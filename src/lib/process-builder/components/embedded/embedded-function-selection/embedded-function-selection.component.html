<div class="body">

    <div class="search-wrapper" [class.expanded]="searchinputExpanded">
        <input #searchInput [formControl]="filterControl" class="search-input" type="text"
            (blur)="toggleSearchInput(false)" />
        <mat-icon (click)="toggleSearchInput()">search</mat-icon>
    </div>

    <div class="content">

        <div class="section-headline">Your implementations</div>
        <div class="grid" *ngIf="(customFunctions$|async)?.length; else noFunctions">

            <div class="function-wrapper" [@showList]="(customFunctions$|async)?.length" *ngFor="let func of (customFunctions$|async)" (click)="selectFunction(func)" [ngClass]="{ 'active': func.identifier === formGroup.controls.functionIdentifier!.value }">

                <div class="preview">
                    <app-function-preview [func]="func"></app-function-preview>
                </div>

                <div class="control-wrapper">

                    <div class="control accent-2">
                        {{ func.identifier === formGroup.controls.functionIdentifier!.value? 'unselect': 'select' }}
                    </div>

                    <div *ngIf="func.customImplementation" class="control danger"
                        (click)="removeFunction(func, $event)">
                        remove
                    </div>

                </div>

            </div>

        </div>

        <div class="section-headline">Templates</div>
        <div class="grid" *ngIf="(functionTemplates$|async)?.length; else noFunctions">

            <div class="function-wrapper" [@showList]="(functionTemplates$|async)?.length" *ngFor="let func of (functionTemplates$|async)" (click)="selectFunction(func)" [ngClass]="{ 'active': func.identifier === formGroup.controls.functionIdentifier!.value }">

                <div class="preview">
                    <app-function-preview [func]="func"></app-function-preview>
                </div>

                <div class="control-wrapper">

                    <div class="control accent-2">
                        {{ func.identifier === formGroup.controls.functionIdentifier!.value? 'unselect': 'select' }}
                    </div>

                    <div *ngIf="func.customImplementation" class="control danger"
                        (click)="removeFunction(func, $event)">
                        remove
                    </div>

                </div>

            </div>

        </div>

        <div class="section-headline">All functions</div>
        <div class="grid" *ngIf="(functions$|async)?.length; else noFunctions">

            <div class="function-wrapper" [@showList]="(functions$|async)?.length" *ngFor="let func of (functions$|async)" (click)="selectFunction(func)" [ngClass]="{ 'active': func.identifier === formGroup.controls.functionIdentifier!.value }">

                <div class="preview">
                    <app-function-preview [func]="func"></app-function-preview>
                </div>

                <div class="control-wrapper">

                    <div class="control accent-2">
                        {{ func.identifier === formGroup.controls.functionIdentifier!.value? 'unselect': 'select' }}
                    </div>

                    <div *ngIf="func.customImplementation" class="control danger"
                        (click)="removeFunction(func, $event)">
                        remove
                    </div>

                </div>

            </div>

        </div>

    </div>

    <div class="output-name-wrapper" *ngIf="requiresCustomOutputParamName$|async">
        <div class="label">please enter a custom output parameter name</div>
        <input [formControl]="formGroup.controls.outputParamName!" type="text" />
    </div>

</div>

<ng-template #noFunctions>

    <div class="no-function-found-hint">
        no functions found
    </div>

</ng-template>
