(self.webpackChunkstorage_manager=self.webpackChunkstorage_manager||[]).push([[790],{3790:(Cn,Ye,xe)=>{"use strict";xe.r(Ye),xe.d(Ye,{ProcessBuilderWrapperModule:()=>A_});var ke={};xe.r(ke),xe.d(ke,{default:()=>q});var Ce={};xe.r(Ce),xe.d(Ce,{default:()=>d_});var P=xe(6814),ae=xe(5187),ce=xe(5861),c=xe(5879),K=xe(4036),U=xe(7398);const Y=r=>r.get("canvas"),F=r=>r.get("modeling"),_=r=>r.get("elementRegistry"),R=r=>r.get("tooltips"),y_EndEvent="bpmn:EndEvent",y_ExclusiveGateway="bpmn:ExclusiveGateway",y_SequenceFlow="bpmn:SequenceFlow",y_Task="bpmn:Task";var w=xe(5280);const p={name:"process builder extension",uri:"https://www.sebleich.com/schema/xml/process-builder-extension",prefix:"slpb",xml:{tagAlias:"lowerCase"},types:[{name:"ActivityExtension",superClass:["Element"],properties:[{name:"activityFunctionId",isAttr:!0,type:"Integer"}]},{name:"GatewayExtension",superClass:["Element"],properties:[{name:"gatewayType",isAttr:!0,type:"String"}]},{name:"SequenceFlowExtension",superClass:["Element"],properties:[{name:"sequenceFlowType",isAttr:!0,type:"String"}]},{name:"DataObjectExtension",superClass:["Element"],properties:[{name:"dataParamId",isAttr:!0,type:"Integer"},{name:"matchesProcessOutputInterface",isAttr:!0,type:"Boolean"},{name:"isProcessOutput",isAttr:!0,type:"Boolean"}]}],emumerations:[],associations:[]},f=p;var m=(()=>((m=m||{})[m.NoStartEvent=0]="NoStartEvent",m[m.MultipleStartEvents=1]="MultipleStartEvents",m[m.StartEventWithIncomingSequenceFlow=2]="StartEventWithIncomingSequenceFlow",m[m.NoEndEvent=3]="NoEndEvent",m[m.SequenceEndWithoutEndEvent=4]="SequenceEndWithoutEndEvent",m[m.MultipleOutgoingSequenceFlowsFromNoneGatewayShape=5]="MultipleOutgoingSequenceFlowsFromNoneGatewayShape",m))(),h=(()=>((h=h||{})[h.NoEndEvent=0]="NoEndEvent",h[h.CyclicAccess=1]="CyclicAccess",h[h.UnusedOutputParam=2]="UnusedOutputParam",h[h.UnreachableElement=3]="UnreachableElement",h))();let v=(()=>{class r{constructor(t){this._config=t}static appendOutputParam(t,i,s,u,g,I,B=!0,ne){let fe=i.outgoing.find(Ne=>"bpmn:DataOutputAssociation"===Ne.type)?.target;(!B||!fe)&&(fe=F(t).appendShape(i,{type:"bpmn:DataObjectReference"},{x:i.x+50,y:i.y-60})),r.setDataParamId(t,fe,s),r.updateBpmnElementSLPBExtension(t,fe.businessObject,"DataObjectExtension",Ne=>Ne.matchesProcessOutputInterface=g===ne),r.updateBpmnElementSLPBExtension(t,fe.businessObject,"DataObjectExtension",Ne=>Ne.isProcessOutput=I);const ye=_(t).filter(Ne=>"bpmn:DataObjectReference"===Ne.type&&r.getDataParamId(Ne)===s);for(const Ne of ye)F(t).updateLabel(Ne,u??"no param name");return{dataOutputElement:fe}}static clearAllTooltips(t){const i=R(t);Object.values(i._tooltips).forEach(s=>i.remove(s))}static fillAnchestors(t,i=[]){let s=0;if(!t||!Array.isArray(t.incoming)||0===t.incoming.length)return;const u=t.incoming.map(g=>g.source).filter(g=>-1===i.indexOf(g));for(;s<u.length;){const g=u[s];i.push(g),this.fillAnchestors(g,i),s++}}static getAvailableInputParams(t){return t?this.getAvailableInputParamsIElements(t).map(u=>r.getDataParamId(u)):[]}static getAvailableInputParamsIElements(t){const i=[];return this.fillAnchestors(t,i),i.filter(ne=>ne.type===y_Task).flatMap(ne=>ne.outgoing).filter(ne=>"bpmn:DataOutputAssociation"===ne.type).map(ne=>ne.target).filter(ne=>"number"==typeof r.getDataParamId(ne))}static getExtensionElement(t,i){return t.extensionElements&&Array.isArray(t.extensionElements.values)?t.extensionElements.values.find(u=>u.$instanceOf(i)):void 0}static getNextNodes(t){return t?t.outgoing.filter(i=>i.type===y_SequenceFlow).map(i=>i.target):[]}static getSLPBExtension(t,i,s){if(!t)return;const g=r.getExtensionElement(t,`${p.prefix}:${i}`);return g?s(g):void 0}static sLPBExtensionSetted(t,i,s){if(!t)return!1;const u=r.getExtensionElement(t,`${p.prefix}:${i}`);return!!u&&s(u)}static updateBpmnElementSLPBExtension(t,i,s,u){let g=i.extensionElements;g||(g=t._moddle.create("bpmn:ExtensionElements"),i.extensionElements=g);let I=r.getExtensionElement(i,`${p.prefix}:${s}`);I||(I=t._moddle.create(`${p.prefix}:${s}`),g.get("values").push(I)),u(I)}validateErrorGateway(t,i,s,u=this._config.errorGatewayConfig.gatewayName){let g=i.outgoing.find(B=>B.type===y_SequenceFlow&&B.target?.type===y_ExclusiveGateway)?.target;const I=F(t);s.canFail&&!g?(g=I.appendShape(i,{type:y_ExclusiveGateway},{x:i.x+200,y:i.y+40}),I.updateLabel(g,u)):!s.canFail&&g&&I.removeElements([g])}static validateProcess(t){const i=[],s=[],u=_(t),g=this.getStartEvents(u),I=this.getEndEvents(u);0===g.length?i.push({error:m.NoStartEvent}):g.length>1&&g.forEach(fe=>i.push({error:m.MultipleStartEvents,element:fe}));const B=[];for(const fe of g){fe.incoming.filter(ze=>ze.type===y_SequenceFlow).length>0&&i.push({element:fe,error:m.StartEventWithIncomingSequenceFlow});let ye=fe,Ne=[];const je=[];for(;ye;){ye.outgoing.filter(Nt=>"bpmn:DataOutputAssociation"===Nt.type).map(Nt=>Nt.target).filter(Nt=>0===Nt.outgoing.filter(Bt=>"bpmn:DataInputAssociation"===Bt.type).length).forEach(Nt=>s.push({element:Nt,warning:h.UnusedOutputParam}));const kt=this.getNextNodes(ye);for(je.push(ye),(ye.type!==y_ExclusiveGateway||ye.type!==y_ExclusiveGateway)&&kt.length>1&&i.push({element:ye,error:m.MultipleOutgoingSequenceFlowsFromNoneGatewayShape}),0===kt.length?ye.type!==y_EndEvent&&i.push({error:m.SequenceEndWithoutEndEvent,element:ye}):Ne=[...Ne,...kt],ye=Ne[0],Ne.splice(0,1);ye&&je.indexOf(ye)>-1;)s.push({element:ye,warning:h.CyclicAccess}),ye=Ne[0]}B.push(...je)}return u.getAll().filter(fe=>(fe.type===y_ExclusiveGateway||"bpmn:ParallelGateway"===fe.type||fe.type===y_Task)&&-1===B.indexOf(fe)).forEach(fe=>s.push({element:fe,warning:h.UnreachableElement})),0===I.length&&s.push({warning:h.NoEndEvent}),{warnings:s,errors:i}}static getEndEvents(t){return t.filter(i=>i.type===y_EndEvent)}static getStartEvents(t){return t.filter(i=>"bpmn:StartEvent"===i.type)}}return r.getActivityFunctionId=e=>r.getSLPBExtension(e.businessObject,"ActivityExtension",t=>t.activityFunctionId),r.getDataParamId=e=>r.getSLPBExtension(e.businessObject,"DataObjectExtension",t=>t.dataParamId),r.getSequenceFlowType=e=>r.getSLPBExtension(e.businessObject,"SequenceFlowExtension",t=>t.sequenceFlowType),r.setActivityFunctionId=(e,t,i)=>r.updateBpmnElementSLPBExtension(e,t.businessObject,"ActivityExtension",s=>s.activityFunctionId="number"==typeof i?i:i?.identifier),r.setDataParamId=(e,t,i)=>r.updateBpmnElementSLPBExtension(e,t.businessObject,"DataObjectExtension",s=>s.dataParamId="number"==typeof i?i:i?.identifier),r.setSequenceFlowType=(e,t,i)=>r.updateBpmnElementSLPBExtension(e,t.businessObject,"SequenceFlowExtension",s=>s.sequenceFlowType="Success"===i?"success":"error"),r.\u0275fac=function(t){return new(t||r)(c.LFG(w.a))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})();var O=xe(7370),C=xe(309),x=xe(1696),L=xe(2247),Q=xe(894),G=xe(2252),T=xe(7517),V=xe(4575),J=xe(2257);const q=new c.OlP("BPMN_JS");var ee=xe(9696),j=xe(4004),D=xe(2013),N=xe(5592),re=xe(3019),ue=xe(2181),ve=xe(7284),Ae=xe(3620),Te=xe(5174),Re=xe(7081),Me=xe(7547),Ie=xe(7921),Ge=xe(6424),oe=xe(5619),pe=xe(4664),ge=xe(2664),be=xe(2572),ie=xe(6990),se=xe(5437),de=xe(6676),_e=xe.n(de),$e=(()=>(($e=$e||{})[$e.ConfigureErrorGatewayEntranceConnection=0]="ConfigureErrorGatewayEntranceConnection",$e[$e.ConfigureFunctionSelection=1]="ConfigureFunctionSelection",$e[$e.ConfigureFunctionImplementation=2]="ConfigureFunctionImplementation",$e[$e.ConfigureFunctionOutput=3]="ConfigureFunctionOutput",$e[$e.ConfigureFunctionInput=4]="ConfigureFunctionInput",$e[$e.ConfigureInputOutputMapping=5]="ConfigureInputOutputMapping",$e[$e.ConfigureStaticOutput=6]="ConfigureStaticOutput",$e))(),Xe=xe(587),ut=xe(6890),mt=xe(708),ct=xe(7700),Tt=xe(2296),St=xe(617);function Et(r,e){if(1&r){const t=c.EpF();c.ynx(0),c.TgZ(1,"button",10),c.NdJ("click",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.abort())}),c.TgZ(2,"mat-icon"),c._uU(3,"clear"),c.qZA()(),c.BQk()}if(2&r){const t=c.oxw();c.xp6(1),c.Q6J("disabled","DISABLED"===t.data.closeStatus)}}let yn=(()=>{class r{constructor(t,i){this.data=t,this._ref=i}abort(){this._ref.close(!1)}confirm(){this._ref.close(!0)}}return r.\u0275fac=function(t){return new(t||r)(c.Y36(ct.WI),c.Y36(ct.so))},r.\u0275cmp=c.Xpm({type:r,selectors:[["app-confirmation"]],decls:14,vars:5,consts:[[1,"body"],[1,"header-wrapper"],[1,"icon"],[1,"headline"],[4,"ngIf"],[1,"content-wrapper",3,"innerHTML"],[1,"footer-wrapper"],[1,"confirmation-button",3,"click"],[1,"spacer"],[1,"abort-button",3,"click"],["mat-icon-button","",1,"dialog-close-control",3,"disabled","click"]],template:function(t,i){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"mat-icon",2),c._uU(3,"support"),c.qZA(),c.TgZ(4,"div",3),c._uU(5),c.qZA(),c.YNc(6,Et,4,1,"ng-container",4),c.qZA(),c._UZ(7,"div",5),c.TgZ(8,"div",6)(9,"div",7),c.NdJ("click",function(){return i.confirm()}),c._uU(10," Confirm "),c.qZA(),c._UZ(11,"div",8),c.TgZ(12,"div",9),c.NdJ("click",function(){return i.abort()}),c._uU(13," Abort "),c.qZA()()()),2&t&&(c.Udp("max-width",i.data.maxWidth,"px"),c.xp6(5),c.hij(" ",i.data.headline," "),c.xp6(1),c.Q6J("ngIf","HIDDEN"!==i.data.closeStatus),c.xp6(1),c.Q6J("innerHTML",i.data.html,c.oJD))},dependencies:[P.O5,Tt.RK,St.Hw],styles:["@keyframes _ngcontent-%COMP%_leaves{0%{transform:scale(.8);-webkit-transform:scale(.8)}to{transform:scale(1);-webkit-transform:scale(1)}}.body[_ngcontent-%COMP%]{width:80vw}.body[_ngcontent-%COMP%]   .header-wrapper[_ngcontent-%COMP%]{padding:.5rem;display:flex;align-items:center}.body[_ngcontent-%COMP%]   .header-wrapper[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-right:.5rem;color:#5d5d5d}.body[_ngcontent-%COMP%]   .header-wrapper[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]{flex:1;font-size:1.2rem}.body[_ngcontent-%COMP%]   .header-wrapper[_ngcontent-%COMP%]   .dialog-close-control[_ngcontent-%COMP%]{color:red}.body[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{padding:1rem;font-weight:100;font-size:.9rem;line-height:1.3rem}.body[_ngcontent-%COMP%]   .footer-wrapper[_ngcontent-%COMP%]{padding:0px 1rem 1rem;display:flex}.body[_ngcontent-%COMP%]   .footer-wrapper[_ngcontent-%COMP%]   .abort-button[_ngcontent-%COMP%]{padding:.3rem .5rem;cursor:pointer;border-radius:2px;transition:all .3s;animation:_ngcontent-%COMP%_leaves .15s ease-out;width:5rem;text-align:center;font-weight:200!important;background:linear-gradient(135deg,#444444,rgba(68,68,68,.7803921569),#444444);color:#fff}.body[_ngcontent-%COMP%]   .footer-wrapper[_ngcontent-%COMP%]   .abort-button[_ngcontent-%COMP%]:hover{opacity:.8}.body[_ngcontent-%COMP%]   .footer-wrapper[_ngcontent-%COMP%]   .confirmation-button[_ngcontent-%COMP%]{padding:.3rem .5rem;cursor:pointer;border-radius:2px;transition:all .3s;animation:_ngcontent-%COMP%_leaves .15s ease-out;width:5rem;text-align:center;font-weight:200!important;background:linear-gradient(135deg,#0078d4,rgba(0,120,212,.7411764706),#0078d4);color:#fff}.body[_ngcontent-%COMP%]   .footer-wrapper[_ngcontent-%COMP%]   .confirmation-button[_ngcontent-%COMP%]:hover{opacity:.8}"]}),r})(),ft=(()=>{class r{constructor(t){this._matDialog=t}requestConfirmation(t,i){const s=this._matDialog.open(yn,{autoFocus:!1,data:{headline:t,html:i,maxWidth:400}});return(0,mt.n)(s.afterClosed())}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(ct.uw))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})();class pt{constructor(e,t,i,s,u,g){this._config=e,this._bpmnJs=t,this._store=i,this._snackBar=s,this._confirmationService=u,this._router=g,this.attachEventFired$=new N.y(I=>this.eventBusModule.on("attach",B=>{I.next(B)})),this.connectionCreatePostExecutedEventFired$=new N.y(I=>this.eventBusModule.on("commandStack.connection.create.postExecuted",B=>{I.next(B)})),this.detachEventFired$=new N.y(I=>this.eventBusModule.on("detach",B=>{I.next(B)})),this.directEditingEventFired$=new N.y(I=>this.eventBusModule.on("directEditing.activate",B=>{this.directEditingModule.cancel(),I.next(B)})),this.elementChangedEventFired$=new N.y(I=>this.eventBusModule.on("element.changed",B=>{I.next(B)})),this.elementHover$=new N.y(I=>this.eventBusModule.on("element.hover",B=>{I.next(B)})),this.shapeAddedEventFired$=new N.y(I=>this.eventBusModule.on("shape.added",B=>{I.next(B)})),this.shapeCreatedPostExecutedEventFired$=new N.y(I=>this.eventBusModule.on("commandStack.shape.create.postExecuted",B=>{I.next(B)})),this.shapeRemoveEventFired$=new N.y(I=>this.eventBusModule.on("shape.remove",B=>{I.next(B)})),this.shapeDeletePreExecuteEventFired$=new N.y(I=>this.eventBusModule.on("commandStack.shape.delete.preExecute",B=>{I.next(B)})),this.shapeDeletePostExecutedEventFired$=new N.y(I=>this.eventBusModule.on("commandStack.shape.delete.postExecuted",B=>{I.next(B)})),this.shapeDeleteExecutedEventFired$=new N.y(I=>this.eventBusModule.on("commandStack.shape.delete.executed",B=>{I.next(B)})),this.toolManagerUpdateEventFired$=new N.y(I=>this.eventBusModule.on("tool-manager.update",B=>{I.next(B)})),this.viewboxChangedEventFired$=new N.y(I=>this.eventBusModule.on("canvas.viewbox.changed",B=>{I.next(B)})),this.eventFired$=(0,re.T)(this.attachEventFired$.pipe((0,U.U)(I=>({event:I,type:"attach"}))),this.connectionCreatePostExecutedEventFired$.pipe((0,U.U)(I=>({event:I,type:"commandStack.connection.create.postExecuted"}))),this.detachEventFired$.pipe((0,U.U)(I=>({event:I,type:"detach"}))),this.directEditingEventFired$.pipe((0,U.U)(I=>({event:I,type:"directEditing.activate"}))),this.elementChangedEventFired$.pipe((0,U.U)(I=>({event:I,type:"element.changed"}))),this.elementHover$.pipe((0,U.U)(I=>({event:I,type:"element.hover"}))),this.shapeAddedEventFired$.pipe((0,U.U)(I=>({event:I,type:"shape.added"}))),this.shapeDeleteExecutedEventFired$.pipe((0,U.U)(I=>({event:I,type:"commandStack.shape.delete.executed"}))),this.shapeRemoveEventFired$.pipe((0,U.U)(I=>({event:I,type:"shape.remove"}))),this.toolManagerUpdateEventFired$.pipe((0,U.U)(I=>({event:I,type:"tool-manager.update"}))),this.viewboxChangedEventFired$.pipe((0,U.U)(I=>({event:I,type:"canvas.viewbox.changed"})))),this.taskEditingEventFired$=(0,re.T)(this.directEditingEventFired$.pipe((0,ue.h)(I=>I?.active?.element?.type===y_Task),(0,U.U)(I=>({taskCreationStep:$e.ConfigureFunctionSelection,element:I.active.element}))),this.connectionCreatePostExecutedEventFired$.pipe((0,ue.h)(I=>I.context.source.type===y_ExclusiveGateway),(0,U.U)(I=>({taskCreationStep:$e.ConfigureErrorGatewayEntranceConnection,element:I.context.connection})))),this.dataObjectReferenceEditingEventFired$=this.directEditingEventFired$.pipe((0,ue.h)(I=>"bpmn:DataObjectReference"===I?.active?.element?.type)),this.bufferedTaskEditingEvents$=this.taskEditingEventFired$.pipe((0,ve.f)(this.taskEditingEventFired$.pipe((0,Ae.b)(500)))),this.bufferedDataObjectReferenceEditingEvents$=this.dataObjectReferenceEditingEventFired$.pipe((0,ve.f)(this.dataObjectReferenceEditingEventFired$.pipe((0,Ae.b)(500)))),this.potentialModelChangeEventFired$=(0,re.T)(this.attachEventFired$.pipe((0,U.U)(I=>({event:I,type:"attach"}))),this.connectionCreatePostExecutedEventFired$.pipe((0,U.U)(I=>({event:I,type:"commandStack.connection.create.postExecuted"}))),this.detachEventFired$.pipe((0,U.U)(I=>({event:I,type:"detach"}))),this.directEditingEventFired$.pipe((0,U.U)(I=>({event:I,type:"directEditing.activate"}))),this.elementChangedEventFired$.pipe((0,U.U)(I=>({event:I,type:"element.changed"}))),this.shapeAddedEventFired$.pipe((0,U.U)(I=>({event:I,type:"shape.added"}))),this.shapeDeleteExecutedEventFired$.pipe((0,U.U)(I=>({event:I,type:"commandStack.shape.delete.executed"}))),this.shapeRemoveEventFired$.pipe((0,U.U)(I=>({event:I,type:"shape.remove"}))),this.toolManagerUpdateEventFired$.pipe((0,U.U)(I=>({event:I,type:"tool-manager.update"}))),this.viewboxChangedEventFired$.pipe((0,U.U)(I=>({event:I,type:"canvas.viewbox.changed"})))),this.validation$=this.potentialModelChangeEventFired$.pipe((0,Te.p)(500),(0,U.U)(()=>v.validateProcess(this._bpmnJs)),(0,Re.d)(1),(0,Me.g)(0)),this.validationContainsErrors$=this.validation$.pipe((0,U.U)(I=>(I?.errors?.length??0)>0)),this.bpmnJsLoggingEnabled=!1,this.status$=(0,re.T)(this.taskEditingEventFired$.pipe((0,U.U)(()=>"collecting")),this.dataObjectReferenceEditingEventFired$.pipe((0,U.U)(()=>"collecting")),this.taskEditingEventFired$.pipe((0,Ae.b)(500)).pipe((0,U.U)(()=>"idle")),this.dataObjectReferenceEditingEventFired$.pipe((0,Ae.b)(500)).pipe((0,U.U)(()=>"idle"))).pipe((0,Ie.O)("idle")),this.taskEditingProcedure$=this.status$.pipe((0,Ge.R)((I,B)=>({...I,progress:"idle"===B}),{guid:(0,j.Z)(),progress:!1,startedUnix:_e()().unix(),finishedUnix:null})),this.currentBpmnJSModel$=this._store.select(G.j3),this._containsChanges=new oe.X(!1),this.containsChanges$=this._containsChanges.asObservable(),this._isSaving=new oe.X(!1),this.isSaving$=this._isSaving.asObservable(),this.undo=()=>window.cli.undo(),this.redo=()=>window.cli.redo(),this.zoomIn=()=>this._bpmnJs.get("zoomScroll").stepZoom(1),this.zoomOut=()=>this._bpmnJs.get("zoomScroll").stepZoom(-1),this._setUp()}attachBpmnModelToDomElement(e){var t=this;return(0,ce.Z)(function*(){t._bpmnJs.attachTo(e);let i=yield(0,x.g)(t._store.select((0,G.Hx)()));i||(i={guid:(0,j.Z)(),created:_e()().format("yyyy-MM-ddTHH:mm:ss"),description:null,name:t._config.defaultBpmnModelName,xml:se.Z,lastModified:_e()().format("yyyy-MM-ddTHH:mm:ss")},t._store.dispatch((0,L._M)(i))),t._store.dispatch((0,L.KW)(i.guid))})()}compile(e,t=(0,j.Z)()){var i=this;return(0,ce.Z)(function*(){const s=yield(0,x.g)(i._store.select((0,C.jp)(e)));s&&i._store.dispatch((0,O.YV)(s));let g={element:v.getStartEvents(i.elementRegistryModule)[0].outgoing[0].target,successorFor:[]},I=[];const B={id:(0,j.Z)(),bpmnJsModelReference:e,name:t,solutionReference:null},ne=[];let fe=[],ye=0;for(;g;){if(g){if(g.element.type===y_Task){const{action:At}=yield i._buildPipelineAction(ye,B,g.element);fe.forEach(kt=>{kt["Success"===g?.gatewayType?"onSuccess":"onError"]=At.identifier}),ne.push(At),fe=[At]}const ze=g.element.outgoing.filter(At=>At.type===y_SequenceFlow).map(At=>{const kt=v.getSLPBExtension(At.businessObject,"SequenceFlowExtension",Bt=>Bt.sequenceFlowType),Nt=i._getLastActivities(At);return{element:At.target,successorFor:Nt,gatewayType:"error"===kt?"Error":"Success"}});g=ze[0],I.push(...ze.slice(1)),ye++}if(!g){g=I[0],I=I.slice(1);const je=g?.successorFor.map(ze=>ze.id)??[];fe=ne.filter(ze=>je.indexOf(ze.bpmnElementIdentifier)>-1)}}i._store.dispatch((0,O.FB)(B)),i._store.dispatch((0,Xe.Xf)(ne)),(yield i._confirmationService.requestConfirmation("Pipeline compiled","Your model compiled successfully! Do you want to run your pipeline?"))&&(i._router.navigate(["/pipe-runner"],{queryParams:{pipeline:B.id}}),i._store.dispatch((0,O.jz)(B.id)))})()}_getLastActivities(e){let t=[e.source];for(;t.length>0&&t.every(i=>i.type!==y_Task);)t=t.flatMap(i=>i.incoming.map(s=>s.source));return t.filter(i=>i.type===y_Task)}_buildPipelineAction(e,t,i){var s=this;return(0,ce.Z)(function*(){const u=(0,j.Z)(),g=v.getSLPBExtension(i.businessObject,"ActivityExtension",ze=>ze.activityFunctionId),I=yield(0,x.g)(s._store.select((0,T.ob)(g))),B="number"==typeof I?.output?yield(0,x.g)(s._store.select((0,T.lR)(I.output))):void 0,ne=I?.customImplementation?I.customImplementation.join("\n"):I?.implementation;if(!I)throw"cannot find function";const fe=i.outgoing.find(ze=>"bpmn:DataOutputAssociation"===ze.type)?.target;let ye=!1,Ne=!1;return fe&&(Ne=v.getSLPBExtension(fe.businessObject,"DataObjectExtension",ze=>ze.matchesProcessOutputInterface),ye=v.getSLPBExtension(fe.businessObject,"DataObjectExtension",ze=>ze.isProcessOutput)),{action:{isPipelineStart:0===e,identifier:u,pipeline:t.id,name:I?.name,executableCode:ne,onSuccess:"",isProvidingPipelineOutput:ye,outputMatchesPipelineOutput:Ne,ouputParamName:B?.normalizedName,bpmnElementIdentifier:i.id,solutionReference:null},activityIdentifier:g}})()}markAsUnchanged(){this._containsChanges.next(!1)}removeOutgoingDataObjectReferences(e){const t=e.outgoing.filter(i=>"bpmn:DataOutputAssociation"===i.type);this.modelingModule.removeElements(t.map(i=>i.target))}removeOutgoingGateways(e){const t=e.outgoing.filter(i=>i.type===y_SequenceFlow&&(i.target.type===y_ExclusiveGateway||"bpmn:ParallelGateway"===i.target.type));this.modelingModule.removeElements(t.map(i=>i.target))}saveCurrentBpmnModel(e){var t=this;return(0,ce.Z)(function*(){t._isSaving.next(!0);const i=yield t._bpmnJs.saveXML(),s=Y(t._bpmnJs).viewbox();t._store.dispatch((0,L.ZQ)({xml:i.xml,viewbox:s})),t._containsChanges.next(!1),t._isSaving.next(!1),e&&t._snackBar.open("object"==typeof e&&e.successMessage?e.successMessage:"model saved successfully","ok",{duration:2e3})})()}_setUp(){this.currentBpmnJSModel$.pipe((0,ue.h)(e=>(this._bpmnJs.clear(),!!e?.xml)),(0,pe.w)(e=>(0,ge.D)(this._bpmnJs.importXML(e.xml)).pipe((0,U.U)(t=>({importResult:t,bpmnJsModel:e})))),(0,Me.g)(0)).subscribe(e=>{this.canvasModule.viewbox(e.bpmnJsModel.viewbox)}),this.eventFired$.subscribe(e=>{this.bpmnJsLoggingEnabled&&console.log(e)}),this.eventFired$.pipe((0,Ae.b)(500),(0,pe.w)(()=>(0,be.a)([this._bpmnJs.saveXML(),this._store.select(G.j3)])),(0,U.U)(([e,t])=>e?.xml!=t?.xml||!(0,ie.isEqual)(this.canvasModule.viewbox(),t.viewbox))).subscribe(e=>{this._containsChanges.next(e)})}get canvasModule(){return Y(this._bpmnJs)}get directEditingModule(){return this._bpmnJs.get("directEditing")}get elementRegistryModule(){return _(this._bpmnJs)}get eventBusModule(){return this._bpmnJs.get("eventBus")}get graphicsFactory(){return this._bpmnJs.get("graphicsFactory")}get modelingModule(){return F(this._bpmnJs)}get tooltipModule(){return R(this._bpmnJs)}get zoomScrollModule(){return this._bpmnJs.get("zoomScroll")}}pt.elementDeletionRequested$=new D.x,pt.elementEndEventCreationRequested=new D.x,pt.\u0275fac=function(e){return new(e||pt)(c.LFG(w.a),c.LFG(ke),c.LFG(ee.yh),c.LFG(ut.ux),c.LFG(ft),c.LFG(ae.F0))},pt.\u0275prov=c.Yz7({token:pt,factory:pt.\u0275fac});var vt=xe(7328),wt=xe(5406),Gt=xe(165),Wt=xe(2997);let Ke=(()=>{class r{constructor(t,i){this.config=t,this._store=i,this.funcs$=this._store.select((0,wt.Bc)()),this.models$=this._store.select((0,G.JG)()),this.params$=this._store.select((0,Gt.xE)()),this.currentProcessOutput$=this._store.select(Gt.CN),this._config=new vt.t(1),this.config$=this._config.asObservable(),this.config||(t=this.defaultConfig),this.setConfig(t)}createBpmnJsModel(){this._store.dispatch((0,L.dY)())}mapNavigationPathPropertyMetadata(t,i){var s=this;return(0,ce.Z)(function*(){let u=t.split(".");if(0===u.length)return null;"injector"===u[0]&&(u=u.slice(1));const g=i.find(fe=>fe.normalizedName===u[0]);if("number"!=typeof g?.interface)return null;let I=yield(0,x.g)(s._store.select((0,Wt.Dp)(g.interface))),B=1,ne={interface:I,type:g.type};for(;B<u.length;){if(null===ne.interface)return{warning:`deep path: ${t}, invalid navigation property at index ${B}`};const fe=u[B],ye=ne.interface.typeDef.find(Ne=>(typeof Ne.normalizedName>"u"?Ne.name:Ne.normalizedName)===fe);if(!ye)return{warning:`deep path: ${t}, navigation property not found on interface ${ne.interface.normalizedName}`};I=yield(0,x.g)(s._store.select((0,Wt.Dp)(ye.interface))),ne={interface:I,type:ye.type},B++}return ne})()}resetLocalState(){localStorage.removeItem("funcs"),localStorage.removeItem("models"),localStorage.removeItem("params"),localStorage.removeItem("ifaces"),this._reloadLocation()}setConfig(t){this._config.next(t)}setNextModel(){var t=this;return(0,ce.Z)(function*(){const i=yield(0,x.g)(t._store.select((0,G.JG)())),s=yield(0,x.g)(t._store.select(G.gl));if(i.length<2||"string"!=typeof s)return;const u=i.findIndex(I=>I.guid===s);t._store.dispatch((0,L.KW)(i[u>=i.length-1?0:u+1]))})()}get defaultConfig(){return{}}_reloadLocation(){location.reload()}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(w.a,8),c.LFG(ee.yh))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})();var Ze=xe(1043),Ct=xe(7988),Rt=xe(8525),yt=xe(3680),hn=xe(2596),Fe=xe(6825);const tt=(0,Fe.X$)("show",[(0,Fe.SB)("hidden",(0,Fe.oB)({opacity:0})),(0,Fe.SB)("visible",(0,Fe.oB)({opacity:1})),(0,Fe.eR)("hidden => visible",[(0,Fe.jt)(".2s .3s ease-out")])]);var ot=xe(9080),It=xe(5113),Ut=xe(9397),Vt=xe(5036),pn=xe(1398),Mn=xe(8679);const jt=1024;let ir=0;class dn{constructor(e,t){this.from=e,this.to=t}}class Qt{constructor(e={}){this.id=ir++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=Kn.match(e)),t=>{let i=e(t);return void 0===i?null:[this,i]}}}Qt.closedBy=new Qt({deserialize:r=>r.split(" ")}),Qt.openedBy=new Qt({deserialize:r=>r.split(" ")}),Qt.group=new Qt({deserialize:r=>r.split(" ")}),Qt.contextHash=new Qt({perNode:!0}),Qt.lookAhead=new Qt({perNode:!0}),Qt.mounted=new Qt({perNode:!0});const lo=Object.create(null);class Kn{constructor(e,t,i,s=0){this.name=e,this.props=t,this.id=i,this.flags=s}static define(e){let t=e.props&&e.props.length?Object.create(null):lo,s=new Kn(e.name||"",t,e.id,(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0));if(e.props)for(let u of e.props)if(Array.isArray(u)||(u=u(s)),u){if(u[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[u[0].id]=u[1]}return s}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(Qt.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let s of i.split(" "))t[s]=e[i];return i=>{for(let s=i.prop(Qt.group),u=-1;u<(s?s.length:0);u++){let g=t[u<0?i.name:s[u]];if(g)return g}}}}Kn.none=new Kn("",Object.create(null),0,8);class Je{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let s=null;for(let u of e){let g=u(i);g&&(s||(s=Object.assign({},i.props)),s[g[0].id]=g[1])}t.push(s?new Kn(i.name,s,i.id,i.flags):i)}return new Je(t)}}const Qe=new WeakMap,it=new WeakMap;var lt=(()=>((lt=lt||{})[lt.ExcludeBuffers=1]="ExcludeBuffers",lt[lt.IncludeAnonymous=2]="IncludeAnonymous",lt[lt.IgnoreMounts=4]="IgnoreMounts",lt[lt.IgnoreOverlays=8]="IgnoreOverlays",lt))();class ht{constructor(e,t,i,s,u){if(this.type=e,this.children=t,this.positions=i,this.length=s,this.props=null,u&&u.length){this.props=Object.create(null);for(let[g,I]of u)this.props["number"==typeof g?g:g.id]=I}}toString(){let e=this.prop(Qt.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let s=i.toString();s&&(t&&(t+=","),t+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Un(this.topNode,e)}cursorAt(e,t=0,i=0){let s=Qe.get(this)||this.topNode,u=new Un(s);return u.moveTo(e,t),Qe.set(this,u._tree),u}get topNode(){return new vn(this,0,0,null)}resolve(e,t=0){let i=Yn(Qe.get(this)||this.topNode,e,t,!1);return Qe.set(this,i),i}resolveInner(e,t=0){let i=Yn(it.get(this)||this.topNode,e,t,!0);return it.set(this,i),i}iterate(e){let{enter:t,leave:i,from:s=0,to:u=this.length}=e;for(let g=this.cursor((e.mode||0)|lt.IncludeAnonymous);;){let I=!1;if(g.from<=u&&g.to>=s&&(g.type.isAnonymous||!1!==t(g))){if(g.firstChild())continue;I=!0}for(;I&&i&&!g.type.isAnonymous&&i(g),!g.nextSibling();){if(!g.parent())return;I=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Qn(Kn.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,s)=>new ht(this.type,t,i,s,this.propValues),e.makeTree||((t,i,s)=>new ht(Kn.none,t,i,s)))}static build(e){return function rr(r){var e;let{buffer:t,nodeSet:i,maxBufferLength:s=jt,reused:u=[],minRepeatType:g=i.types.length}=r,I=Array.isArray(t)?new zt(t,t.length):t,B=i.types,ne=0,fe=0;function ye(Ht,Jt,ln,bn,Ei){let{id:Pn,start:Ln,end:pi,size:Wi}=I,nr=fe;for(;Wi<0;){if(I.next(),-1==Wi)return ln.push(u[Pn]),void bn.push(Ln-Ht);if(-3==Wi)return void(ne=Pn);if(-4==Wi)return void(fe=Pn);throw new RangeError(`Unrecognized record size: ${Wi}`)}let jr,ao,Ko=B[Pn],Us=Ln-Ht;if(pi-Ln<=s&&(ao=function At(Ht,Jt){let ln=I.fork(),bn=0,Ei=0,Pn=0,Ln=ln.end-s,pi={size:0,start:0,skip:0};e:for(let Wi=ln.pos-Ht;ln.pos>Wi;){let nr=ln.size;if(ln.id==Jt&&nr>=0){pi.size=bn,pi.start=Ei,pi.skip=Pn,Pn+=4,bn+=4,ln.next();continue}let Ko=ln.pos-nr;if(nr<0||Ko<Wi||ln.start<Ln)break;let jr=ln.id>=g?4:0,ao=ln.start;for(ln.next();ln.pos>Ko;){if(ln.size<0){if(-3!=ln.size)break e;jr+=4}else ln.id>=g&&(jr+=4);ln.next()}Ei=ao,bn+=nr,Pn+=jr}return(Jt<0||bn==Ht)&&(pi.size=bn,pi.start=Ei,pi.skip=Pn),pi.size>4?pi:void 0}(I.pos-Jt,Ei))){let $r=new Uint16Array(ao.size-ao.skip),Xs=I.pos-ao.size,jl=$r.length;for(;I.pos>Xs;)jl=kt(ao.start,$r,jl);jr=new fn($r,pi-ao.start,i),Us=ao.start-Ht}else{let $r=I.pos-Wi;I.next();let Xs=[],jl=[],Xh=Pn>=g?Pn:-1,Cp=0,yC=pi;for(;I.pos>$r;)Xh>=0&&I.id==Xh&&I.size>=0?(I.end<=yC-s&&(je(Xs,jl,Ln,Cp,I.end,yC,Xh,nr),Cp=Xs.length,yC=I.end),I.next()):ye(Ln,$r,Xs,jl,Xh);if(Xh>=0&&Cp>0&&Cp<Xs.length&&je(Xs,jl,Ln,Cp,Ln,yC,Xh,nr),Xs.reverse(),jl.reverse(),Xh>-1&&Cp>0){let Tx=function Ne(Ht){return(Jt,ln,bn)=>{let Ln,pi,Ei=0,Pn=Jt.length-1;if(Pn>=0&&(Ln=Jt[Pn])instanceof ht){if(!Pn&&Ln.type==Ht&&Ln.length==bn)return Ln;(pi=Ln.prop(Qt.lookAhead))&&(Ei=ln[Pn]+Ln.length+pi)}return ze(Ht,Jt,ln,bn,Ei)}}(Ko);jr=Qn(Ko,Xs,jl,0,Xs.length,0,pi-Ln,Tx,Tx)}else jr=ze(Ko,Xs,jl,pi-Ln,nr-pi)}ln.push(jr),bn.push(Us)}function je(Ht,Jt,ln,bn,Ei,Pn,Ln,pi){let Wi=[],nr=[];for(;Ht.length>bn;)Wi.push(Ht.pop()),nr.push(Jt.pop()+ln-Ei);Ht.push(ze(i.types[Ln],Wi,nr,Pn-Ei,pi-Pn)),Jt.push(Ei-ln)}function ze(Ht,Jt,ln,bn,Ei=0,Pn){if(ne){let Ln=[Qt.contextHash,ne];Pn=Pn?[Ln].concat(Pn):[Ln]}if(Ei>25){let Ln=[Qt.lookAhead,Ei];Pn=Pn?[Ln].concat(Pn):[Ln]}return new ht(Ht,Jt,ln,bn,Pn)}function kt(Ht,Jt,ln){let{id:bn,start:Ei,end:Pn,size:Ln}=I;if(I.next(),Ln>=0&&bn<g){let pi=ln;if(Ln>4){let Wi=I.pos-(Ln-4);for(;I.pos>Wi;)ln=kt(Ht,Jt,ln)}Jt[--ln]=pi,Jt[--ln]=Pn-Ht,Jt[--ln]=Ei-Ht,Jt[--ln]=bn}else-3==Ln?ne=bn:-4==Ln&&(fe=bn);return ln}let Nt=[],Bt=[];for(;I.pos>0;)ye(r.start||0,r.bufferStart||0,Nt,Bt,-1);let Kt=null!==(e=r.length)&&void 0!==e?e:Nt.length?Bt[0]+Nt[0].length:0;return new ht(B[r.topID],Nt.reverse(),Bt.reverse(),Kt)}(e)}}ht.empty=new ht(Kn.none,[],[],0);class zt{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new zt(this.buffer,this.index)}}class fn{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Kn.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let i=this.buffer[e+3],s=this.set.types[this.buffer[e]],u=s.name;if(/\W/.test(u)&&!s.isError&&(u=JSON.stringify(u)),i==(e+=4))return u;let g=[];for(;e<i;)g.push(this.childString(e)),e=this.buffer[e+3];return u+"("+g.join(",")+")"}findChild(e,t,i,s,u){let{buffer:g}=this,I=-1;for(let B=e;B!=t&&!(Nn(u,s,g[B+1],g[B+2])&&(I=B,i>0));B=g[B+3]);return I}slice(e,t,i,s){let u=this.buffer,g=new Uint16Array(t-e);for(let I=e,B=0;I<t;)g[B++]=u[I++],g[B++]=u[I++]-i,g[B++]=u[I++]-i,g[B++]=u[I++]-e;return new fn(g,s-i,this.set)}}function Nn(r,e,t,i){switch(r){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function Bn(r,e){let t=r.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}function Yn(r,e,t,i){for(var s;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let g=!i&&r instanceof vn&&r.index<0?null:r.parent;if(!g)return r;r=g}let u=i?0:lt.IgnoreOverlays;if(i)for(let g=r,I=g.parent;I;g=I,I=g.parent)g instanceof vn&&g.index<0&&(null===(s=I.enter(e,t,u))||void 0===s?void 0:s.from)!=g.from&&(r=I);for(;;){let g=r.enter(e,t,u);if(!g)return r;r=g}}class vn{constructor(e,t,i,s){this._tree=e,this.from=t,this.index=i,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,s,u=0){for(let g=this;;){for(let{children:I,positions:B}=g._tree,ne=t>0?I.length:-1;e!=ne;e+=t){let fe=I[e],ye=B[e]+g.from;if(Nn(s,i,ye,ye+fe.length))if(fe instanceof fn){if(u&lt.ExcludeBuffers)continue;let Ne=fe.findChild(0,fe.buffer.length,t,i-ye,s);if(Ne>-1)return new xn(new ri(g,fe,e,ye),null,Ne)}else if(u&lt.IncludeAnonymous||!fe.type.isAnonymous||jn(fe)){let Ne;if(!(u&lt.IgnoreMounts)&&fe.props&&(Ne=fe.prop(Qt.mounted))&&!Ne.overlay)return new vn(Ne.tree,ye,e,g);let je=new vn(fe,ye,e,g);return u&lt.IncludeAnonymous||!je.type.isAnonymous?je:je.nextChild(t<0?fe.children.length-1:0,t,i,s)}}if(u&lt.IncludeAnonymous||!g.type.isAnonymous||(e=g.index>=0?g.index+t:t<0?-1:g._parent._tree.children.length,g=g._parent,!g))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let s;if(!(i&lt.IgnoreOverlays)&&(s=this._tree.prop(Qt.mounted))&&s.overlay){let u=e-this.from;for(let{from:g,to:I}of s.overlay)if((t>0?g<=u:g<u)&&(t<0?I>=u:I>u))return new vn(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new Un(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return Yn(this,e,t,!1)}resolveInner(e,t=0){return Yn(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Bn(this,e)}getChild(e,t=null,i=null){let s=ei(this,e,t,i);return s.length?s[0]:null}getChildren(e,t=null,i=null){return ei(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return ui(this,e)}}function ei(r,e,t,i){let s=r.cursor(),u=[];if(!s.firstChild())return u;if(null!=t)for(;!s.type.is(t);)if(!s.nextSibling())return u;for(;;){if(null!=i&&s.type.is(i))return u;if(s.type.is(e)&&u.push(s.node),!s.nextSibling())return null==i?u:[]}}function ui(r,e,t=e.length-1){for(let i=r.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class ri{constructor(e,t,i,s){this.parent=e,this.buffer=t,this.index=i,this.start=s}}class xn{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,i){let{buffer:s}=this.context,u=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.context.start,i);return u<0?null:new xn(this.context,this,u)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&lt.ExcludeBuffers)return null;let{buffer:s}=this.context,u=s.findChild(this.index+4,s.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return u<0?null:new xn(this.context,this,u)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new xn(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new xn(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new Un(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,s=this.index+4,u=i.buffer[this.index+3];return u>s&&(e.push(i.slice(s,u,i.buffer[this.index+1],i.buffer[this.index+2])),t.push(0)),new ht(this.type,e,t,this.to-this.from)}resolve(e,t=0){return Yn(this,e,t,!1)}resolveInner(e,t=0){return Yn(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Bn(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let s=ei(this,e,t,i);return s.length?s[0]:null}getChildren(e,t=null,i=null){return ei(this,e,t,i)}get node(){return this}matchContext(e){return ui(this,e)}}class Un{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof vn)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:i,buffer:s}=this.buffer;return this.type=t||s.set.types[s.buffer[e]],this.from=i+s.buffer[e+1],this.to=i+s.buffer[e+2],!0}yield(e){return!!e&&(e instanceof vn?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:s}=this.buffer,u=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.buffer.start,i);return!(u<0)&&(this.stack.push(this.index),this.yieldBuf(u))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?!(i&lt.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&lt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&lt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let s=i<0?0:this.stack[i]+4;if(this.index!=s)return this.yieldBuf(t.findChild(s,this.index,-1,0,4))}else{let s=t.buffer[this.index+3];if(s<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(s)}return i<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let u=0;u<this.index;u++)if(s.buffer.buffer[u+3]<this.index)return!1;({index:t,parent:i}=s)}else({index:t,_parent:i}=this._tree);for(;i;({index:t,_parent:i}=i))if(t>-1)for(let u=t+e,g=e<0?-1:i._tree.children.length;u!=g;u+=e){let I=i._tree.children[u];if(this.mode&lt.IncludeAnonymous||I instanceof fn||!I.type.isAnonymous||jn(I))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let s=this.index,u=this.stack.length;u>=0;){for(let g=e;g;g=g._parent)if(g.index==s){if(s==this.index)return g;t=g,i=u+1;break e}s=this.stack[--u]}for(let s=i;s<this.stack.length;s++)t=new xn(this.buffer,t,this.stack[s]);return this.bufferNode=new xn(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let s=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){i++;continue}this.type.isAnonymous||(s=!0)}for(;s&&t&&t(this),s=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,s=!0}}}matchContext(e){if(!this.buffer)return ui(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let s=e.length-1,u=this.stack.length-1;s>=0;u--){if(u<0)return ui(this.node,e,s);let g=i[t.buffer[this.stack[u]]];if(!g.isAnonymous){if(e[s]&&e[s]!=g.name)return!1;s--}}return!0}}function jn(r){return r.children.some(e=>e instanceof fn||!e.type.isAnonymous||jn(e))}const Ai=new WeakMap;function Gi(r,e){if(!r.isAnonymous||e instanceof fn||e.type!=r)return 1;let t=Ai.get(e);if(null==t){t=1;for(let i of e.children){if(i.type!=r||!(i instanceof ht)){t=1;break}t+=Gi(r,i)}Ai.set(e,t)}return t}function Qn(r,e,t,i,s,u,g,I,B){let ne=0;for(let ze=i;ze<s;ze++)ne+=Gi(r,e[ze]);let fe=Math.ceil(1.5*ne/8),ye=[],Ne=[];return function je(ze,At,kt,Nt,Bt){for(let Kt=kt;Kt<Nt;){let Ht=Kt,Jt=At[Kt],ln=Gi(r,ze[Kt]);for(Kt++;Kt<Nt;Kt++){let bn=Gi(r,ze[Kt]);if(ln+bn>=fe)break;ln+=bn}if(Kt==Ht+1){if(ln>fe){let bn=ze[Ht];je(bn.children,bn.positions,0,bn.children.length,At[Ht]+Bt);continue}ye.push(ze[Ht])}else ye.push(Qn(r,ze,At,Ht,Kt,Jt,At[Kt-1]+ze[Kt-1].length-Jt,null,B));Ne.push(Jt+Bt-u)}}(e,t,i,s,0),(I||B)(ye,Ne,g)}class Ji{constructor(){this.map=new WeakMap}setBuffer(e,t,i){let s=this.map.get(e);s||this.map.set(e,s=new Map),s.set(t,i)}getBuffer(e,t){let i=this.map.get(e);return i&&i.get(t)}set(e,t){e instanceof xn?this.setBuffer(e.context.buffer,e.index,t):e instanceof vn&&this.map.set(e.tree,t)}get(e){return e instanceof xn?this.getBuffer(e.context.buffer,e.index):e instanceof vn?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class mi{constructor(e,t,i,s,u=!1,g=!1){this.from=e,this.to=t,this.tree=i,this.offset=s,this.open=(u?1:0)|(g?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],i=!1){let s=[new mi(0,e.length,e,0,!1,i)];for(let u of t)u.to>e.length&&s.push(u);return s}static applyChanges(e,t,i=128){if(!t.length)return e;let s=[],u=1,g=e.length?e[0]:null;for(let I=0,B=0,ne=0;;I++){let fe=I<t.length?t[I]:null,ye=fe?fe.fromA:1e9;if(ye-B>=i)for(;g&&g.from<ye;){let Ne=g;if(B>=Ne.from||ye<=Ne.to||ne){let je=Math.max(Ne.from,B)-ne,ze=Math.min(Ne.to,ye)-ne;Ne=je>=ze?null:new mi(je,ze,Ne.tree,Ne.offset+ne,I>0,!!fe)}if(Ne&&s.push(Ne),g.to>ye)break;g=u<e.length?e[u++]:null}if(!fe)break;B=fe.toA,ne=fe.toA-fe.toB}return s}}class pr{startParse(e,t,i){return"string"==typeof e&&(e=new Yo(e)),i=i?i.length?i.map(s=>new dn(s.from,s.to)):[new dn(0,0)]:[new dn(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let s=this.startParse(e,t,i);for(;;){let u=s.advance();if(u)return u}}}class Yo{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Qt({perNode:!0});class uo{constructor(e,t,i,s,u,g,I,B,ne,fe=0,ye){this.p=e,this.stack=t,this.state=i,this.reducePos=s,this.pos=u,this.score=g,this.buffer=I,this.bufferBase=B,this.curContext=ne,this.lookAhead=fe,this.parent=ye}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let s=e.parser.context;return new uo(e,[],t,i,i,0,[],0,s?new ho(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,i=65535&e,{parser:s}=this.p,u=s.dynamicPrecedence(i);if(u&&(this.score+=u),0==t)return this.pushState(s.getGoto(this.state,i,!0),this.reducePos),i<s.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),void this.reduceContext(i,this.reducePos);let g=this.stack.length-3*(t-1)-(262144&e?6:0),I=this.stack[g-2],ne=this.bufferBase+this.buffer.length-this.stack[g-1];if(i<s.minRepeatTerm||131072&e){let fe=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,I,fe,ne+4,!0)}for(this.state=262144&e?this.stack[g]:s.getGoto(this.stack[g-3],i,!0);this.stack.length>g;)this.stack.pop();this.reduceContext(i,I)}storeNode(e,t,i,s=4,u=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let g=this,I=this.buffer.length;if(0==I&&g.parent&&(I=g.bufferBase-g.parent.bufferBase,g=g.parent),I>0&&0==g.buffer[I-4]&&g.buffer[I-1]>-1){if(t==i)return;if(g.buffer[I-2]>=t)return void(g.buffer[I-2]=i)}}if(u&&this.pos!=i){let g=this.buffer.length;if(g>0&&0!=this.buffer[g-4])for(;g>0&&this.buffer[g-2]>i;)this.buffer[g]=this.buffer[g-4],this.buffer[g+1]=this.buffer[g-3],this.buffer[g+2]=this.buffer[g-2],this.buffer[g+3]=this.buffer[g-1],g-=4,s>4&&(s-=4);this.buffer[g]=e,this.buffer[g+1]=t,this.buffer[g+2]=i,this.buffer[g+3]=s}else this.buffer.push(e,t,i,s)}shift(e,t,i){let s=this.pos;if(131072&e)this.pushState(65535&e,this.pos);else if(262144&e)this.pos=i,this.shiftContext(t,s),t<=this.p.parser.maxNode&&this.buffer.push(t,s,i,4);else{let u=e,{parser:g}=this.p;(i>this.pos||t<=g.maxNode)&&(this.pos=i,g.stateFlag(u,1)||(this.reducePos=i)),this.pushState(u,s),this.shiftContext(t,s),t<=g.maxNode&&this.buffer.push(t,s,i,4)}}apply(e,t,i){65536&e?this.reduce(e):this.shift(e,t,i)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(t,s),this.buffer.push(i,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),s=e.bufferBase+t;for(;e&&s==e.bufferBase;)e=e.parent;return new uo(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new Ar(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(!(65536&i))return!0;if(0==i)return!1;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let s=[];for(let g,u=0;u<t.length;u+=2)(g=t[u+1])!=this.state&&this.p.parser.hasAction(g,e)&&s.push(t[u],g);if(this.stack.length<120)for(let u=0;s.length<8&&u<t.length;u+=2){let g=t[u+1];s.some((I,B)=>1&B&&I==g)||s.push(t[u],g)}t=s}let i=[];for(let s=0;s<t.length&&i.length<4;s+=2){let u=t[s+1];if(u==this.state)continue;let g=this.split();g.pushState(u,this.pos),g.storeNode(0,g.pos,g.pos,4,!0),g.shiftContext(t[s],this.pos),g.score-=200,i.push(g)}return i}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(!(65536&e))return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let u=this.stack.length-3*(e>>19);if(u<0||t.getGoto(this.stack[u],65535&e,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new ho(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class ho{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class Ar{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,i=e>>19;0==i?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(i-1);let s=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=s}}class Zl{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Zl(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new Zl(this.stack,this.pos,this.index)}}class Ks{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Vl=new Ks;class To{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Vl,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,s=this.rangeIndex,u=this.pos+e;for(;u<i.from;){if(!s)return null;let g=this.ranges[--s];u-=i.from-g.to,i=g}for(;t<0?u>i.to:u>=i.to;){if(s==this.ranges.length-1)return null;let g=this.ranges[++s];u+=g.from-i.to,i=g}return u}peek(e){let i,s,t=this.chunkOff+e;if(t>=0&&t<this.chunk.length)i=this.pos+e,s=this.chunk.charCodeAt(t);else{let u=this.resolveOffset(e,1);if(null==u)return-1;if(i=u,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let g=this.rangeIndex,I=this.range;for(;I.to<=i;)I=this.ranges[++g];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>I.to&&(this.chunk2=this.chunk2.slice(0,I.to-i)),s=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),s}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(null==i||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos);this.chunk=this.pos+e.length>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.next=this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?-1:this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Vl,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let s of this.ranges){if(s.from>=t)break;s.to>e&&(i+=this.input.read(Math.max(s.from,e),Math.min(s.to,t)))}return i}}class Po{constructor(e,t){this.data=e,this.id=t}token(e,t){!function Fa(r,e,t,i){let s=0,u=1<<i,{parser:g}=t.p,{dialect:I}=g;e:for(;u&r[s];){let B=r[s+1];for(let ne=s+3;ne<B;ne+=2)if((r[ne+1]&u)>0){let fe=r[ne];if(I.allows(fe)&&(-1==e.token.value||e.token.value==fe||g.overrides(fe,e.token.value))){e.acceptToken(fe);break}}for(let ne=e.next,fe=0,ye=r[s+2];fe<ye;){let Ne=fe+ye>>1,je=B+Ne+(Ne<<1);if(ne<r[je])ye=Ne;else{if(!(ne>=r[je+1])){s=r[je+2],e.advance();continue e}fe=Ne+1}}break}}(this.data,e,t,this.id)}}Po.prototype.contextual=Po.prototype.fallback=Po.prototype.extend=!1;class Ys{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function Zn(r,e=Uint16Array){if("string"!=typeof r)return r;let t=null;for(let i=0,s=0;i<r.length;){let u=0;for(;;){let g=r.charCodeAt(i++),I=!1;if(126==g){u=65535;break}g>=92&&g--,g>=34&&g--;let B=g-32;if(B>=46&&(B-=46,I=!0),u+=B,I)break;u*=46}t?t[s++]=u:t=new e(u)}return t}const ji=typeof process<"u"&&process.env&&/\bparse\b/.test(process.env.LOG);let Zi=null;function Ql(r,e,t){let i=r.cursor(lt.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(r.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:r.length}}class Jo{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Ql(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Ql(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],s=this.index[t];if(s==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let u=i.children[s],g=this.start[t]+i.positions[s];if(g>e)return this.nextStart=g,null;if(u instanceof ht){if(g==e){if(g<this.safeFrom)return null;let I=g+u.length;if(I<=this.safeTo){let B=u.prop(Qt.lookAhead);if(!B||I+B<this.fragment.to)return u}}this.index[t]++,g+u.length>=Math.max(this.safeFrom,e)&&(this.trees.push(u),this.start.push(g),this.index.push(0))}else this.index[t]++,this.nextStart=g+u.length}}}class wp{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new Ks)}getActions(e){let t=0,i=null,{parser:s}=e.p,{tokenizers:u}=s,g=s.stateSlot(e.state,3),I=e.curContext?e.curContext.hash:0,B=0;for(let ne=0;ne<u.length;ne++){if(!(1<<ne&g))continue;let fe=u[ne],ye=this.tokens[ne];if((!i||fe.fallback)&&((fe.contextual||ye.start!=e.pos||ye.mask!=g||ye.context!=I)&&(this.updateCachedToken(ye,fe,e),ye.mask=g,ye.context=I),ye.lookAhead>ye.end+25&&(B=Math.max(ye.lookAhead,B)),0!=ye.value)){let Ne=t;if(ye.extended>-1&&(t=this.addActions(e,ye.extended,ye.end,t)),t=this.addActions(e,ye.value,ye.end,t),!fe.extend&&(i=ye,t>Ne))break}}for(;this.actions.length>t;)this.actions.pop();return B&&e.setLookAhead(B),!i&&e.pos==this.stream.end&&(i=new Ks,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Ks,{pos:i,p:s}=e;return t.start=i,t.end=Math.min(i+1,s.stream.end),t.value=i==s.stream.end?s.parser.eofTerm:0,t}updateCachedToken(e,t,i){if(t.token(this.stream.reset(i.pos,e),i),e.value>-1){let{parser:s}=i.p;for(let u=0;u<s.specialized.length;u++)if(s.specialized[u]==e.value){let g=s.specializers[u](this.stream.read(e.start,e.end),i);if(g>=0&&i.p.parser.dialect.allows(g>>1)){1&g?e.extended=g>>1:e.value=g>>1;break}}}else e.value=0,e.end=Math.min(i.p.stream.end,i.pos+1)}putAction(e,t,i,s){for(let u=0;u<s;u+=3)if(this.actions[u]==e)return s;return this.actions[s++]=e,this.actions[s++]=t,this.actions[s++]=i,s}addActions(e,t,i,s){let{state:u}=e,{parser:g}=e.p,{data:I}=g;for(let B=0;B<2;B++)for(let ne=g.stateSlot(u,B?2:1);;ne+=3){if(65535==I[ne]){if(1!=I[ne+1]){0==s&&2==I[ne+1]&&(s=this.putAction(Ro(I,ne+2),t,i,s));break}ne=Ro(I,ne+2)}I[ne]==t&&(s=this.putAction(Ro(I,ne+1),t,i,s))}return s}}class nu{constructor(e,t,i,s){this.parser=e,this.input=t,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new To(t,s),this.tokens=new wp(e,this.stream),this.topTerm=e.top[1];let{from:u}=s[0];this.stacks=[uo.start(this,e.top[0],u)],this.fragments=i.length&&this.stream.end-u>4*e.bufferLength?new Jo(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let s,u,e=this.stacks,t=this.minStackPos,i=this.stacks=[];for(let g=0;g<e.length;g++){let I=e[g];for(;;){if(this.tokens.mainToken=null,I.pos>t)i.push(I);else{if(this.advanceStack(I,i,e))continue;{s||(s=[],u=[]),s.push(I);let B=this.tokens.getMainToken(I);u.push(B.value,B.end)}}break}}if(!i.length){let g=s&&function Lv(r){let e=null;for(let t of r){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||null!=i&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}(s);if(g)return this.stackToTree(g);if(this.parser.strict)throw ji&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&s){let g=null!=this.stoppedAt&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,u,i);if(g)return this.stackToTree(g.forceAll())}if(this.recovering){let g=1==this.recovering?1:3*this.recovering;if(i.length>g)for(i.sort((I,B)=>B.score-I.score);i.length>g;)i.pop();i.some(I=>I.reducePos>t)&&this.recovering--}else if(i.length>1)e:for(let g=0;g<i.length-1;g++){let I=i[g];for(let B=g+1;B<i.length;B++){let ne=i[B];if(I.sameState(ne)||I.buffer.length>500&&ne.buffer.length>500){if(!((I.score-ne.score||I.buffer.length-ne.buffer.length)>0)){i.splice(g--,1);continue e}i.splice(B--,1)}}}this.minStackPos=i[0].pos;for(let g=1;g<i.length;g++)i[g].pos<this.minStackPos&&(this.minStackPos=i[g].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let s=e.pos,{parser:u}=this,g=ji?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let ne=e.curContext&&e.curContext.tracker.strict,fe=ne?e.curContext.hash:0;for(let ye=this.fragments.nodeAt(s);ye;){let Ne=this.parser.nodeSet.types[ye.type.id]==ye.type?u.getGoto(e.state,ye.type.id):-1;if(Ne>-1&&ye.length&&(!ne||(ye.prop(Qt.contextHash)||0)==fe))return e.useNode(ye,Ne),ji&&console.log(g+this.stackID(e)+` (via reuse of ${u.getName(ye.type.id)})`),!0;if(!(ye instanceof ht)||0==ye.children.length||ye.positions[0]>0)break;let je=ye.children[0];if(!(je instanceof ht&&0==ye.positions[0]))break;ye=je}}let I=u.stateSlot(e.state,4);if(I>0)return e.reduce(I),ji&&console.log(g+this.stackID(e)+` (via always-reduce ${u.getName(65535&I)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let B=this.tokens.getActions(e);for(let ne=0;ne<B.length;){let fe=B[ne++],ye=B[ne++],Ne=B[ne++],je=ne==B.length||!i,ze=je?e:e.split();if(ze.apply(fe,ye,Ne),ji&&console.log(g+this.stackID(ze)+` (via ${65536&fe?`reduce of ${u.getName(65535&fe)}`:"shift"} for ${u.getName(ye)} @ ${s}${ze==e?"":", split"})`),je)return!0;ze.pos>s?t.push(ze):i.push(ze)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return iu(e,t),!0}}runRecovery(e,t,i){let s=null,u=!1;for(let g=0;g<e.length;g++){let I=e[g],B=t[g<<1],ne=t[1+(g<<1)],fe=ji?this.stackID(I)+" -> ":"";if(I.deadEnd&&(u||(u=!0,I.restart(),ji&&console.log(fe+this.stackID(I)+" (restarted)"),this.advanceFully(I,i))))continue;let ye=I.split(),Ne=fe;for(let je=0;ye.forceReduce()&&je<10&&(ji&&console.log(Ne+this.stackID(ye)+" (via force-reduce)"),!this.advanceFully(ye,i));je++)ji&&(Ne=this.stackID(ye)+" -> ");for(let je of I.recoverByInsert(B))ji&&console.log(fe+this.stackID(je)+" (via recover-insert)"),this.advanceFully(je,i);this.stream.end>I.pos?(ne==I.pos&&(ne++,B=0),I.recoverByDelete(B,ne),ji&&console.log(fe+this.stackID(I)+` (via recover-delete ${this.parser.getName(B)})`),iu(I,i)):(!s||s.score<I.score)&&(s=I)}return s}stackToTree(e){return e.close(),ht.build({buffer:Zl.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Zi||(Zi=new WeakMap)).get(e);return t||Zi.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function iu(r,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==r.pos&&i.sameState(r))return void(e[t].score<r.score&&(e[t]=r))}e.push(r)}class Hl{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||0==this.disabled[e]}}const Yh=r=>r;class Ga extends pr{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let I=0;I<e.repeatNodeCount;I++)t.push("");let i=Object.keys(e.topRules).map(I=>e.topRules[I][1]),s=[];for(let I=0;I<t.length;I++)s.push([]);function u(I,B,ne){s[I].push([B,B.deserialize(String(ne))])}if(e.nodeProps)for(let I of e.nodeProps){let B=I[0];"string"==typeof B&&(B=Qt[B]);for(let ne=1;ne<I.length;){let fe=I[ne++];if(fe>=0)u(fe,B,I[ne++]);else{let ye=I[ne+-fe];for(let Ne=-fe;Ne>0;Ne--)u(I[ne++],B,ye);ne++}}}this.nodeSet=new Je(t.map((I,B)=>Kn.define({name:B>=this.minRepeatTerm?void 0:I,id:B,props:s[B],top:i.indexOf(B)>-1,error:0==B,skipped:e.skippedNodes&&e.skippedNodes.indexOf(B)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=jt;let g=Zn(e.tokenData);if(this.context=e.context,this.specialized=new Uint16Array(e.specialized?e.specialized.length:0),this.specializers=[],e.specialized)for(let I=0;I<e.specialized.length;I++)this.specialized[I]=e.specialized[I].term,this.specializers[I]=e.specialized[I].get;this.states=Zn(e.states,Uint32Array),this.data=Zn(e.stateData),this.goto=Zn(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(I=>"number"==typeof I?new Po(g,I):I),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let s=new nu(this,e,t,i);for(let u of this.wrappers)s=u(s,e,t,i);return s}getGoto(e,t,i=!1){let s=this.goto;if(t>=s[0])return-1;for(let u=s[t+1];;){let g=s[u++],I=1&g,B=s[u++];if(I&&i)return B;for(let ne=u+(g>>1);u<ne;u++)if(s[u]==e)return B;if(I)return-1}}hasAction(e,t){let i=this.data;for(let s=0;s<2;s++)for(let g,u=this.stateSlot(e,s?2:1);;u+=3){if(65535==(g=i[u])){if(1!=i[u+1]){if(2==i[u+1])return Ro(i,u+2);break}g=i[u=Ro(i,u+2)]}if(g==t||0==g)return Ro(i,u+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let i=this.stateSlot(e,1);;i+=3){if(65535==this.data[i]){if(1!=this.data[i+1])return!1;i=Ro(this.data,i+2)}if(t==Ro(this.data,i+1))return!0}}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(65535==this.data[i]){if(1!=this.data[i+1])break;i=Ro(this.data,i+2)}if(!(1&this.data[i+2])){let s=this.data[i+1];t.some((u,g)=>1&g&&u==s)||t.push(this.data[i],s)}}return t}overrides(e,t){let i=ru(this.data,this.tokenPrecTable,t);return i<0||ru(this.data,this.tokenPrecTable,e)<i}configure(e){let t=Object.assign(Object.create(Ga.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let s=e.tokenizers.find(u=>u.from==i);return s?s.to:i})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let u of e.split(" ")){let g=t.indexOf(u);g>=0&&(i[g]=!0)}let s=null;for(let u=0;u<t.length;u++)if(!i[u])for(let I,g=this.dialects[t[u]];65535!=(I=this.data[g++]);)(s||(s=new Uint8Array(this.maxTerm+1)))[I]=1;return new Hl(e,i,s)}static deserialize(e){return new Ga(e)}}function Ro(r,e){return r[e]|r[e+1]<<16}function ru(r,e,t){for(let s,i=e;65535!=(s=r[i]);i++)if(s==t)return i-e;return-1}let Bv=0;class or{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=Bv++}static define(e){if(e?.base)throw new Error("Can not derive from a modified tag");let t=new or([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new ou;return t=>t.modified.indexOf(e)>-1?t:ou.get(t.base||t,t.modified.concat(e).sort((i,s)=>i.id-s.id))}}let Dv=0;class ou{constructor(){this.instances=[],this.id=Dv++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(I=>I.base==e&&function bC(r,e){return r.length==e.length&&r.every((t,i)=>t==e[i])}(t,I.modified));if(i)return i;let s=[],u=new or(s,e,t);for(let I of t)I.instances.push(u);let g=su(t);for(let I of e.set)for(let B of g)s.push(ou.get(I,B));return u}}function su(r){let e=[r];for(let t=0;t<r.length;t++)for(let i of su(r.slice(0,t).concat(r.slice(t+1))))e.push(i);return e}function Fv(r){let e=Object.create(null);for(let t in r){let i=r[t];Array.isArray(i)||(i=[i]);for(let s of t.split(" "))if(s){let u=[],g=2,I=s;for(let ye=0;;){if("..."==I&&ye>0&&ye+3==s.length){g=1;break}let Ne=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(I);if(!Ne)throw new RangeError("Invalid path: "+s);if(u.push("*"==Ne[0]?"":'"'==Ne[0][0]?JSON.parse(Ne[0]):Ne[0]),ye+=Ne[0].length,ye==s.length)break;let je=s[ye++];if(ye==s.length&&"!"==je){g=0;break}if("/"!=je)throw new RangeError("Invalid path: "+s);I=s.slice(ye)}let B=u.length-1,ne=u[B];if(!ne)throw new RangeError("Invalid path: "+s);let fe=new Gv(i,g,B>0?u.slice(0,B):null);e[ne]=fe.sort(e[ne])}}return Wv.add(e)}const Wv=new Qt;class Gv{constructor(e,t,i,s){this.tags=e,this.mode=t,this.context=i,this.next=s}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function au(r,e){let t=Object.create(null);for(let u of r)if(Array.isArray(u.tag))for(let g of u.tag)t[g.id]=u.class;else t[u.tag.id]=u.class;let{scope:i,all:s=null}=e||{};return{style:u=>{let g=s;for(let I of u)for(let B of I.set){let ne=t[B.id];if(ne){g=g?g+" "+ne:ne;break}}return g},scope:i}}function jv(r,e){let t=null;for(let i of r){let s=i.style(e);s&&(t=t?t+" "+s:s)}return t}function Zv(r,e,t,i=0,s=r.length){let u=new CC(i,Array.isArray(e)?e:[e],t);u.highlightRange(r.cursor(),i,s,"",u.highlighters),u.flush(s)}class CC{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,s,u){let{type:g,from:I,to:B}=e;if(I>=i||B<=t)return;g.isTop&&(u=this.highlighters.filter(je=>!je.scope||je.scope(g)));let ne=s,fe=g.prop(Wv),ye=!1;for(;fe;){if(!fe.context||e.matchContext(fe.context)){let je=jv(u,fe.tags);je&&(ne&&(ne+=" "),ne+=je,1==fe.mode?s+=(s?" ":"")+je:0==fe.mode&&(ye=!0));break}fe=fe.next}if(this.startSpan(e.from,ne),ye)return;let Ne=e.tree&&e.tree.prop(Qt.mounted);if(Ne&&Ne.overlay){let je=e.node.enter(Ne.overlay[0].from+I,1),ze=this.highlighters.filter(kt=>!kt.scope||kt.scope(Ne.tree.type)),At=e.firstChild();for(let kt=0,Nt=I;;kt++){let Bt=kt<Ne.overlay.length?Ne.overlay[kt]:null,Kt=Bt?Bt.from+I:B,Ht=Math.max(t,Nt),Jt=Math.min(i,Kt);if(Ht<Jt&&At)for(;e.from<Jt&&(this.highlightRange(e,Ht,Jt,s,u),this.startSpan(Math.min(i,e.to),ne),!(e.to>=Kt)&&e.nextSibling()););if(!Bt||Kt>i)break;Nt=Bt.to+I,Nt>t&&(this.highlightRange(je.cursor(),Math.max(t,Bt.from+I),Math.min(i,Nt),s,ze),this.startSpan(Nt,ne))}At&&e.parent()}else if(e.firstChild()){do{if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,s,u),this.startSpan(Math.min(i,e.to),ne)}}while(e.nextSibling());e.parent()}}}const Zt=or.define,qh=Zt(),ys=Zt(),xp=Zt(ys),bs=Zt(ys),Yt=Zt(),ja=Zt(Yt),Ap=Zt(Yt),on=Zt(),bi=Zt(on),fo=Zt(),Qr=Zt(),Jh=Zt(),zl=Zt(Jh),ed=Zt(),st={comment:qh,lineComment:Zt(qh),blockComment:Zt(qh),docComment:Zt(qh),name:ys,variableName:Zt(ys),typeName:xp,tagName:Zt(xp),propertyName:bs,attributeName:Zt(bs),className:Zt(ys),labelName:Zt(ys),namespace:Zt(ys),macroName:Zt(ys),literal:Yt,string:ja,docString:Zt(ja),character:Zt(ja),attributeValue:Zt(ja),number:Ap,integer:Zt(Ap),float:Zt(Ap),bool:Zt(Yt),regexp:Zt(Yt),escape:Zt(Yt),color:Zt(Yt),url:Zt(Yt),keyword:fo,self:Zt(fo),null:Zt(fo),atom:Zt(fo),unit:Zt(fo),modifier:Zt(fo),operatorKeyword:Zt(fo),controlKeyword:Zt(fo),definitionKeyword:Zt(fo),moduleKeyword:Zt(fo),operator:Qr,derefOperator:Zt(Qr),arithmeticOperator:Zt(Qr),logicOperator:Zt(Qr),bitwiseOperator:Zt(Qr),compareOperator:Zt(Qr),updateOperator:Zt(Qr),definitionOperator:Zt(Qr),typeOperator:Zt(Qr),controlOperator:Zt(Qr),punctuation:Jh,separator:Zt(Jh),bracket:zl,angleBracket:Zt(zl),squareBracket:Zt(zl),paren:Zt(zl),brace:Zt(zl),content:on,heading:bi,heading1:Zt(bi),heading2:Zt(bi),heading3:Zt(bi),heading4:Zt(bi),heading5:Zt(bi),heading6:Zt(bi),contentSeparator:Zt(on),list:Zt(on),quote:Zt(on),emphasis:Zt(on),strong:Zt(on),link:Zt(on),monospace:Zt(on),strikethrough:Zt(on),inserted:Zt(),deleted:Zt(),changed:Zt(),invalid:Zt(),meta:ed,documentMeta:Zt(ed),annotation:Zt(ed),processingInstruction:Zt(ed),definition:or.defineModifier(),constant:or.defineModifier(),function:or.defineModifier(),standard:or.defineModifier(),local:or.defineModifier(),special:or.defineModifier()},Yv=(au([{tag:st.link,class:"tok-link"},{tag:st.heading,class:"tok-heading"},{tag:st.emphasis,class:"tok-emphasis"},{tag:st.strong,class:"tok-strong"},{tag:st.keyword,class:"tok-keyword"},{tag:st.atom,class:"tok-atom"},{tag:st.bool,class:"tok-bool"},{tag:st.url,class:"tok-url"},{tag:st.labelName,class:"tok-labelName"},{tag:st.inserted,class:"tok-inserted"},{tag:st.deleted,class:"tok-deleted"},{tag:st.literal,class:"tok-literal"},{tag:st.string,class:"tok-string"},{tag:st.number,class:"tok-number"},{tag:[st.regexp,st.escape,st.special(st.string)],class:"tok-string2"},{tag:st.variableName,class:"tok-variableName"},{tag:st.local(st.variableName),class:"tok-variableName tok-local"},{tag:st.definition(st.variableName),class:"tok-variableName tok-definition"},{tag:st.special(st.variableName),class:"tok-variableName2"},{tag:st.definition(st.propertyName),class:"tok-propertyName tok-definition"},{tag:st.typeName,class:"tok-typeName"},{tag:st.namespace,class:"tok-namespace"},{tag:st.className,class:"tok-className"},{tag:st.macroName,class:"tok-macroName"},{tag:st.propertyName,class:"tok-propertyName"},{tag:st.operator,class:"tok-operator"},{tag:st.comment,class:"tok-comment"},{tag:st.meta,class:"tok-meta"},{tag:st.invalid,class:"tok-invalid"},{tag:st.punctuation,class:"tok-punctuation"}]),[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288]),td=new class Wa{constructor(e){this.start=e.start,this.shift=e.shift||Yh,this.reduce=e.reduce||Yh,this.reuse=e.reuse||Yh,this.hash=e.hash||(()=>0),this.strict=!1!==e.strict}}({start:!1,shift:(r,e)=>5==e||6==e||286==e?r:287==e,strict:!1}),Op=new Ys((r,e)=>{let{next:t}=r;(125==t||-1==t||e.context)&&e.canShift(284)&&r.acceptToken(284)},{contextual:!0,fallback:!0}),Br=new Ys((r,e)=>{let i,{next:t}=r;Yv.indexOf(t)>-1||47==t&&(47==(i=r.peek(1))||42==i)||125!=t&&59!=t&&-1!=t&&!e.context&&e.canShift(281)&&r.acceptToken(281)},{contextual:!0}),ey=new Ys((r,e)=>{let{next:t}=r;if((43==t||45==t)&&(r.advance(),t==r.next)){r.advance();let i=!e.context&&e.canShift(1);r.acceptToken(i?1:2)}},{contextual:!0}),Hr=new Ys(r=>{for(let e=!1,t=0;;t++){let{next:i}=r;if(i<0){t&&r.acceptToken(282);break}if(96==i){t?r.acceptToken(282):r.acceptToken(283,1);break}if(123==i&&e){1==t?r.acceptToken(3,1):r.acceptToken(282,-1);break}if(10==i&&t){r.advance(),r.acceptToken(282);break}92==i&&r.advance(),e=36==i,r.advance()}}),IC=Fv({"get set async static":st.modifier,"for while do if else switch try catch finally return throw break continue default case":st.controlKeyword,"in of await yield void typeof delete instanceof":st.operatorKeyword,"let var const function class extends":st.definitionKeyword,"import export from":st.moduleKeyword,"with debugger as new":st.keyword,TemplateString:st.special(st.string),Super:st.atom,BooleanLiteral:st.bool,this:st.self,null:st.null,Star:st.modifier,VariableName:st.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":st.function(st.variableName),VariableDefinition:st.definition(st.variableName),Label:st.labelName,PropertyName:st.propertyName,PrivatePropertyName:st.special(st.propertyName),"CallExpression/MemberExpression/PropertyName":st.function(st.propertyName),"FunctionDeclaration/VariableDefinition":st.function(st.definition(st.variableName)),"ClassDeclaration/VariableDefinition":st.definition(st.className),PropertyDefinition:st.definition(st.propertyName),PrivatePropertyDefinition:st.definition(st.special(st.propertyName)),UpdateOp:st.updateOperator,LineComment:st.lineComment,BlockComment:st.blockComment,Number:st.number,String:st.string,ArithOp:st.arithmeticOperator,LogicOp:st.logicOperator,BitOp:st.bitwiseOperator,CompareOp:st.compareOperator,RegExp:st.regexp,Equals:st.definitionOperator,"Arrow : Spread":st.punctuation,"( )":st.paren,"[ ]":st.squareBracket,"{ }":st.brace,"InterpolationStart InterpolationEnd":st.special(st.brace),".":st.derefOperator,", ;":st.separator,TypeName:st.typeName,TypeDefinition:st.definition(st.typeName),"type enum interface implements namespace module declare":st.definitionKeyword,"abstract global Privacy readonly override":st.modifier,"is keyof unique infer":st.operatorKeyword,JSXAttributeValue:st.attributeValue,JSXText:st.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":st.angleBracket,"JSXIdentifier JSXNameSpacedName":st.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":st.attributeName}),_C={__proto__:null,export:18,as:23,from:29,default:32,async:37,function:38,this:48,true:56,false:56,void:66,typeof:70,null:86,super:88,new:122,await:139,yield:141,delete:142,class:152,extends:154,public:197,private:197,protected:197,readonly:199,instanceof:220,in:222,const:224,import:256,keyof:307,unique:311,infer:317,is:351,abstract:371,implements:373,type:375,let:378,var:380,interface:387,enum:391,namespace:397,module:399,declare:403,global:407,for:428,of:437,while:440,with:444,do:448,if:452,else:454,switch:458,case:464,try:470,catch:474,finally:478,return:482,throw:486,break:490,continue:494,debugger:498},Kl={__proto__:null,async:109,get:111,set:113,public:161,private:161,protected:161,static:163,abstract:165,override:167,readonly:173,new:355},Ip={__proto__:null,"<":129},ny=Ga.deserialize({version:14,states:"$4|O`QYOOO'QQ$IfO'#ChO'XOSO'#DVO)dQYO'#D]O)tQYO'#DhO){QYO'#DrO-xQYO'#DxOOQO'#E]'#E]O.]QWO'#E[O.bQWO'#E[OOQ$IU'#Ef'#EfO0aQ$IfO'#ItO2wQ$IfO'#IuO3eQWO'#EzO3jQpO'#FaOOQ$IU'#FS'#FSO3rO!bO'#FSO4QQWO'#FhO5_QWO'#FgOOQ$IU'#Iu'#IuOOQ$IS'#It'#ItOOQQ'#J^'#J^O5dQWO'#HpO5iQ$I[O'#HqOOQQ'#Ih'#IhOOQQ'#Hr'#HrQ`QYOOO){QYO'#DjO5qQWO'#G[O5vQ#tO'#CmO6UQWO'#EZO6aQWO'#EgO6fQ#tO'#FRO7QQWO'#G[O7VQWO'#G`O7bQWO'#G`O7pQWO'#GcO7pQWO'#GdO7pQWO'#GfO5qQWO'#GiO8aQWO'#GlO9oQWO'#CdO:PQWO'#GyO:XQWO'#HPO:XQWO'#HRO`QYO'#HTO:XQWO'#HVO:XQWO'#HYO:^QWO'#H`O:cQ$I]O'#HfO){QYO'#HhO:nQ$I]O'#HjO:yQ$I]O'#HlO5iQ$I[O'#HnO){QYO'#DWOOOS'#Ht'#HtO;UOSO,59qOOQ$IU,59q,59qO=gQbO'#ChO=qQYO'#HuO>UQWO'#IvO@TQbO'#IvO'dQYO'#IvO@[QWO,59wO@rQ&jO'#DbOAkQWO'#E]OAxQWO'#JROBTQWO'#JQOBTQWO'#JQOB]QWO,5:yOBbQWO'#JPOBiQWO'#DyO5vQ#tO'#EZOBwQWO'#EZOCSQ`O'#FROOQ$IU,5:S,5:SOC[QYO,5:SOEYQ$IfO,5:^OEvQWO,5:dOFaQ$I[O'#JOO7VQWO'#I}OFhQWO'#I}OFpQWO,5:xOFuQWO'#I}OGTQYO,5:vOITQWO'#EWOJ_QWO,5:vOKnQWO'#DlOKuQYO'#DqOLPQ&jO,5;PO){QYO,5;POOQQ'#Er'#ErOOQQ'#Et'#EtO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;RO){QYO,5;ROOQQ'#Ex'#ExOLXQYO,5;cOOQ$IU,5;h,5;hOOQ$IU,5;i,5;iONXQWO,5;iOOQ$IU,5;j,5;jO){QYO'#IPON^Q$I[O,5<TONxQWO,5;RO){QYO,5;fO! bQpO'#JVO! PQpO'#JVO! iQpO'#JVO! zQpO,5;qOOOO,5;{,5;{O!!YQYO'#FcOOOO'#IO'#IOO3rO!bO,5;nO!!aQpO'#FeOOQ$IU,5;n,5;nO!!}Q,UO'#CrOOQ$IU'#Cu'#CuO!#bQWO'#CuO!#gOSO'#CyO!$TQ#tO,5<QO!$[QWO,5<SO!%hQWO'#FrO!%uQWO'#FsO!%zQWO'#FwO!&yQ&jO'#F{O!'lQ,UO'#IqOOQ$IU'#Iq'#IqO!'vQWO'#IpO!(UQWO'#IoOOQ$IU'#Cs'#CsOOQ$IU'#C|'#C|O!(^QWO'#DOOJdQWO'#FjOJdQWO'#FlO!(cQWO'#FnO!(hQWO'#FoO!(mQWO'#FuOJdQWO'#FzO!(rQWO'#E^O!)ZQWO,5<RO`QYO,5>[OOQQ'#Ik'#IkOOQQ,5>],5>]OOQQ-E;p-E;pO!+VQ$IfO,5:UOOQ$IS'#Cp'#CpO!+vQ#tO,5<vOOQO'#Cf'#CfO!,XQWO'#CqO!,aQ$I[O'#IlO5_QWO'#IlO:^QWO,59XO!,rQpO,59XO!,zQ#tO,59XO5vQ#tO,59XO!-VQWO,5:vO!-_QWO'#GxO!-mQWO'#JbO){QYO,5;kO!-uQ&jO,5;mO!-zQWO,5=cO!.PQWO,5=cO!.UQWO,5=cO5iQ$I[O,5=cO5qQWO,5<vO!.dQWO'#E_O!.xQ&jO'#E`OOQ$IS'#JP'#JPO!/ZQ$I[O'#J_O5iQ$I[O,5<zO7pQWO,5=QOOQO'#Cr'#CrO!/fQpO,5<}O!/nQ#tO,5=OO!/yQWO,5=QO!0OQ`O,5=TO:^QWO'#GnO5qQWO'#GpO!0WQWO'#GpO5vQ#tO'#GsO!0]QWO'#GsOOQQ,5=W,5=WO!0bQWO'#GtO!0jQWO'#CmO!0oQWO,59OO!0yQWO,59OO!2{QYO,59OOOQQ,59O,59OO!3YQ$I[O,59OO){QYO,59OO!3eQYO'#G{OOQQ'#G|'#G|OOQQ'#G}'#G}O`QYO,5=eO!3uQWO,5=eO){QYO'#DxO`QYO,5=kO`QYO,5=mO!3zQWO,5=oO`QYO,5=qO!4PQWO,5=tO!4UQYO,5=zOOQQ,5>Q,5>QO){QYO,5>QO5iQ$I[O,5>SOOQQ,5>U,5>UO!8VQWO,5>UOOQQ,5>W,5>WO!8VQWO,5>WOOQQ,5>Y,5>YO!8[Q`O,59rOOOS-E;r-E;rOOQ$IU1G/]1G/]O!8aQbO,5>aO'dQYO,5>aOOQO,5>f,5>fO!8kQYO'#HuOOQO-E;s-E;sO!8xQWO,5?bO!9QQbO,5?bO!9XQWO,5?lOOQ$IU1G/c1G/cO!9aQpO'#DTOOQO'#Ix'#IxO){QYO'#IxO!:OQpO'#IxO!:mQpO'#DcO!;OQ&jO'#DcO!=ZQYO'#DcO!=bQWO'#IwO!=jQWO,59|O!=oQWO'#EaO!=}QWO'#JSO!>VQWO,5:zO!>mQ&jO'#DcO){QYO,5?mO!>wQWO'#HzOOQO-E;x-E;xO!9XQWO,5?lOOQ$IS1G0e1G0eO!@TQ&jO'#D|OOQ$IU,5:e,5:eO){QYO,5:eOITQWO,5:eO!@[QWO,5:eO:^QWO,5:uO!,rQpO,5:uO!,zQ#tO,5:uO5vQ#tO,5:uOOQ$IU1G/n1G/nOOQ$IU1G0O1G0OOOQ$IS'#EV'#EVO){QYO,5?jO!@gQ$I[O,5?jO!@xQ$I[O,5?jO!APQWO,5?iO!AXQWO'#H|O!APQWO,5?iOOQ$IS1G0d1G0dO7VQWO,5?iOOQ$IU1G0b1G0bO!AsQ$IfO1G0bO!BdQ$IdO,5:rOOQ$IU'#Fq'#FqO!CQQ$IfO'#IqOGTQYO1G0bO!EPQ#tO'#IyO!EZQWO,5:WO!E`QbO'#IzO){QYO'#IzO!EjQWO,5:]OOQ$IU'#DT'#DTOOQ$IU1G0k1G0kO!EoQWO1G0kO!HQQ$IfO1G0mO!HXQ$IfO1G0mO!JlQ$IfO1G0mO!JsQ$IfO1G0mO!LzQ$IfO1G0mO!M_Q$IfO1G0mO#!OQ$IfO1G0mO#!VQ$IfO1G0mO#$jQ$IfO1G0mO#$qQ$IfO1G0mO#&fQ$IfO1G0mO#)`Q7^O'#ChO#+ZQ7^O1G0}O#-UQ7^O'#IuOOQ$IU1G1T1G1TO#-iQ$IfO,5>kOOQ$IS-E;}-E;}O#.YQ$IfO1G0mOOQ$IU1G0m1G0mO#0[Q$IfO1G1QO#0{QpO,5;sO#1QQpO,5;tO#1VQpO'#F[O#1kQWO'#FZOOQO'#JW'#JWOOQO'#H}'#H}O#1pQpO1G1]OOQ$IU1G1]1G1]OOOO1G1f1G1fO#2OQ7^O'#ItO#2YQWO,5;}OLXQYO,5;}OOOO-E;|-E;|OOQ$IU1G1Y1G1YOOQ$IU,5<P,5<PO#2_QpO,5<POOQ$IU,59a,59aOITQWO'#C{OOOS'#Hs'#HsO#2dOSO,59eOOQ$IU,59e,59eO){QYO1G1lO!(hQWO'#IRO#2oQWO,5<eOOQ$IU,5<b,5<bOOQO'#GV'#GVOJdQWO,5<pOOQO'#GX'#GXOJdQWO,5<rOJdQWO,5<tOOQO1G1n1G1nO#2zQ`O'#CpO#3_Q`O,5<^O#3fQWO'#JZO5qQWO'#JZO#3tQWO,5<`OJdQWO,5<_O#3yQ`O'#FqO#4WQ`O'#J[O#4bQWO'#J[OITQWO'#J[O#4gQWO,5<cOOQ$IS'#Dg'#DgO#4lQWO'#FtO#4wQpO'#F|O!&tQ&jO'#F|O!&tQ&jO'#GOO#5YQWO'#GPO!(mQWO'#GSO#5_Q$I[O'#ITO#5jQ&jO,5<gOOQ$IU,5<g,5<gO#5qQ&jO'#F|O#6PQ&jO'#F}O#6XQ&jO'#F}OOQ$IU,5<u,5<uOJdQWO,5?[OJdQWO,5?[O#6^QWO'#IUO#6iQWO,5?ZOOQ$IU'#Ch'#ChO#7]Q#tO,59jOOQ$IU,59j,59jO#8OQ#tO,5<UO#8qQ#tO,5<WO#8{QWO,5<YOOQ$IU,5<Z,5<ZO#9QQWO,5<aO#9VQ#tO,5<fOGTQYO1G1mO#9gQWO1G1mOOQQ1G3v1G3vOOQ$IU1G/p1G/pONXQWO1G/pOOQQ1G2b1G2bOITQWO1G2bO){QYO1G2bOITQWO1G2bO#9lQWO1G2bO#9zQWO,59]O#;TQWO'#EWOOQ$IS,5?W,5?WO#;_Q$I[O,5?WOOQQ1G.s1G.sO:^QWO1G.sO!,rQpO1G.sO!,zQ#tO1G.sO#;pQWO1G0bO#;uQWO'#ChO#<QQWO'#JcO#<YQWO,5=dO#<_QWO'#JcO#<dQWO'#JcO#<lQWO'#I^O#<zQWO,5?|O#=SQbO1G1VOOQ$IU1G1X1G1XO5qQWO1G2}O#=ZQWO1G2}O#=`QWO1G2}O#=eQWO1G2}OOQQ1G2}1G2}O#=jQ#tO1G2bO7VQWO'#JQO7VQWO'#EaO7VQWO'#IWO#={Q$I[O,5?yOOQQ1G2f1G2fO!/yQWO1G2lOITQWO1G2iO#>WQWO1G2iOOQQ1G2j1G2jOITQWO1G2jO#>]QWO1G2jO#>eQ&jO'#GhOOQQ1G2l1G2lO!&tQ&jO'#IYO!0OQ`O1G2oOOQQ1G2o1G2oOOQQ,5=Y,5=YO#>mQ#tO,5=[O5qQWO,5=[O#5YQWO,5=_O5_QWO,5=_O!,rQpO,5=_O!,zQ#tO,5=_O5vQ#tO,5=_O#?OQWO'#JaO#?ZQWO,5=`OOQQ1G.j1G.jO#?`Q$I[O1G.jO#?kQWO1G.jO#?pQWO1G.jO5iQ$I[O1G.jO#?xQbO,5@OO#@SQWO,5@OO#@_QYO,5=gO#@fQWO,5=gO7VQWO,5@OOOQQ1G3P1G3PO`QYO1G3POOQQ1G3V1G3VOOQQ1G3X1G3XO:XQWO1G3ZO#@kQYO1G3]O#DfQYO'#H[OOQQ1G3`1G3`O#DsQWO'#HbO:^QWO'#HdOOQQ1G3f1G3fO#D{QYO1G3fO5iQ$I[O1G3lOOQQ1G3n1G3nOOQ$IS'#Fx'#FxO5iQ$I[O1G3pO5iQ$I[O1G3rOOOS1G/^1G/^O#HyQ`O,5<TO#IRQbO1G3{OOQO1G4Q1G4QO){QYO,5>aO#I]QWO1G4|O#IeQWO1G5WO#ImQWO,5?dOLXQYO,5:{O7VQWO,5:{O:^QWO,59}OLXQYO,59}O!,rQpO,59}O#IrQ7^O,59}OOQO,5:{,5:{O#I|Q&jO'#HvO#JdQWO,5?cOOQ$IU1G/h1G/hO#JlQ&jO'#H{O#KQQWO,5?nOOQ$IS1G0f1G0fO!;OQ&jO,59}O#KYQbO1G5XO7VQWO,5>fOOQ$IS'#ES'#ESO#KdQ$ItO'#ETO!?{Q&jO'#D}OOQO'#Hy'#HyO#LOQ&jO,5:hOOQ$IU,5:h,5:hO#LVQ&jO'#D}O#LhQ&jO'#D}O#LoQ&jO'#EYO#LrQ&jO'#ETO#MPQ&jO'#ETO!?{Q&jO'#ETO#MdQWO1G0PO#MiQ`O1G0POOQ$IU1G0P1G0PO){QYO1G0POITQWO1G0POOQ$IU1G0a1G0aO:^QWO1G0aO!,rQpO1G0aO!,zQ#tO1G0aO#MpQ$IfO1G5UO){QYO1G5UO#NQQ$I[O1G5UO#NcQWO1G5TO7VQWO,5>hOOQO,5>h,5>hO#NkQWO,5>hOOQO-E;z-E;zO#NcQWO1G5TO#NyQ$IfO,59jO$!xQ$IfO,5<UO$$zQ$IfO,5<WO$&|Q$IfO,5<fOOQ$IU7+%|7+%|O$)UQ$IfO7+%|O$)uQWO'#HwO$*PQWO,5?eOOQ$IU1G/r1G/rO$*XQYO'#HxO$*fQWO,5?fO$*nQbO,5?fOOQ$IU1G/w1G/wOOQ$IU7+&V7+&VO$*xQ7^O,5:^O){QYO7+&iO$+SQ7^O,5:UOOQO1G1_1G1_OOQO1G1`1G1`O$+aQMhO,5;vOLXQYO,5;uOOQO-E;{-E;{OOQ$IU7+&w7+&wOOOO7+'Q7+'QOOOO1G1i1G1iO$+lQWO1G1iOOQ$IU1G1k1G1kO$+qQ`O,59gOOOS-E;q-E;qOOQ$IU1G/P1G/PO$+xQ$IfO7+'WOOQ$IU,5>m,5>mO$,iQWO,5>mOOQ$IU1G2P1G2PP$,nQWO'#IRPOQ$IU-E<P-E<PO$-_Q#tO1G2[O$.QQ#tO1G2^O$.[Q#tO1G2`OOQ$IU1G1x1G1xO$.cQWO'#IQO$.qQWO,5?uO$.qQWO,5?uO$.yQWO,5?uO$/UQWO,5?uOOQO1G1z1G1zO$/dQ#tO1G1yO$/tQWO'#ISO$0UQWO,5?vOITQWO,5?vO$0^Q`O,5?vOOQ$IU1G1}1G1}OOQ$IS,5<h,5<hOOQ$IS,5<i,5<iO$0hQWO,5<iO#5TQWO,5<iO!,rQpO,5<hO$0mQWO,5<jOOQ$IS,5<k,5<kO$0hQWO,5<nOOQO,5>o,5>oOOQO-E<R-E<ROOQ$IU1G2R1G2RO!&tQ&jO,5<hO$0uQWO,5<iO!&tQ&jO,5<jO!&tQ&jO,5<iO$1QQ#tO1G4vO$1[Q#tO1G4vOOQO,5>p,5>pOOQO-E<S-E<SO!-uQ&jO,59lO){QYO,59lO$1iQWO1G1tOJdQWO1G1{O$1nQ$IfO7+'XOOQ$IU7+'X7+'XOGTQYO7+'XOOQ$IU7+%[7+%[O$2_Q`O'#J]O#MdQWO7+'|O$2iQWO7+'|O$2qQ`O7+'|OOQQ7+'|7+'|OITQWO7+'|O){QYO7+'|OITQWO7+'|OOQO1G.w1G.wO$2{Q$IdO'#ChO$3`Q$IdO,5<lO$4QQWO,5<lOOQ$IS1G4r1G4rOOQQ7+$_7+$_O:^QWO7+$_O!,rQpO7+$_OGTQYO7+%|O$4VQWO'#I]O$4hQWO,5?}OOQO1G3O1G3OO5qQWO,5?}O$4hQWO,5?}O$4pQWO,5?}OOQO,5>x,5>xOOQO-E<[-E<[OOQ$IU7+&q7+&qO$4uQWO7+(iO5iQ$I[O7+(iO5qQWO7+(iO$4zQWO7+(iO$5PQWO7+'|OOQ$IS,5>r,5>rOOQ$IS-E<U-E<UOOQQ7+(W7+(WO$5_Q$IdO7+(TOITQWO7+(TO$5iQ`O7+(UOOQQ7+(U7+(UOITQWO7+(UO$5pQWO'#J`O$5{QWO,5=SOOQO,5>t,5>tOOQO-E<W-E<WOOQQ7+(Z7+(ZO$6uQ&jO'#GqOOQQ1G2v1G2vOITQWO1G2vO){QYO1G2vOITQWO1G2vO$6|QWO1G2vO$7[Q#tO1G2vO5iQ$I[O1G2yO#5YQWO1G2yO5_QWO1G2yO!,rQpO1G2yO!,zQ#tO1G2yO$7mQWO'#I[O$7xQWO,5?{O$8QQ&jO,5?{OOQ$IS1G2z1G2zOOQQ7+$U7+$UO$8YQWO7+$UO5iQ$I[O7+$UO$8_QWO7+$UO){QYO1G5jO){QYO1G5kO$8dQYO1G3RO$8kQWO1G3RO$8pQYO1G3RO$8wQ$I[O1G5jOOQQ7+(k7+(kO5iQ$I[O7+(uO`QYO7+(wOOQQ'#Jf'#JfOOQQ'#I_'#I_O$9RQYO,5=vOOQQ,5=v,5=vO){QYO'#H]O$9`QWO'#H_OOQQ,5=|,5=|O7VQWO,5=|OOQQ,5>O,5>OOOQQ7+)Q7+)QOOQQ7+)W7+)WOOQQ7+)[7+)[OOQQ7+)^7+)^OOQO1G5O1G5OO$9eQ7^O1G0gO$9oQWO1G0gOOQO1G/i1G/iO$9zQ7^O1G/iO:^QWO1G/iOLXQYO'#DcOOQO,5>b,5>bOOQO-E;t-E;tOOQO,5>g,5>gOOQO-E;y-E;yO!,rQpO1G/iO:^QWO,5:iOOQO,5:o,5:oO){QYO,5:oO$:UQ$I[O,5:oO$:aQ$I[O,5:oO!,rQpO,5:iOOQO-E;w-E;wOOQ$IU1G0S1G0SO!?{Q&jO,5:iO$:oQ&jO,5:iO$;QQ$ItO,5:oO$;lQ&jO,5:iO!?{Q&jO,5:oOOQO,5:t,5:tO$;sQ&jO,5:oO$<QQ$I[O,5:oOOQ$IU7+%k7+%kO#MdQWO7+%kO#MiQ`O7+%kOOQ$IU7+%{7+%{O:^QWO7+%{O!,rQpO7+%{O$<fQ$IfO7+*pO){QYO7+*pOOQO1G4S1G4SO7VQWO1G4SO$<vQWO7+*oO$=OQ$IfO1G2[O$?QQ$IfO1G2^O$ASQ$IfO1G1yO$C[Q#tO,5>cOOQO-E;u-E;uO$CfQbO,5>dO){QYO,5>dOOQO-E;v-E;vO$CpQWO1G5QO$CxQ7^O1G0bO$FPQ7^O1G0mO$FWQ7^O1G0mO$HXQ7^O1G0mO$H`Q7^O1G0mO$JTQ7^O1G0mO$JhQ7^O1G0mO$LuQ7^O1G0mO$L|Q7^O1G0mO$N}Q7^O1G0mO% UQ7^O1G0mO%!yQ7^O1G0mO%#^Q$IfO<<JTO%#}Q7^O1G0mO%&UQ7^O'#IqO%'nQ7^O1G1QOLXQYO'#F^OOQO'#JX'#JXOOQO1G1b1G1bO%'{QWO1G1aO%(QQ7^O,5>kOOOO7+'T7+'TOOOS1G/R1G/ROOQ$IU1G4X1G4XOJdQWO7+'zO%([QWO,5>lO5qQWO,5>lOOQO-E<O-E<OO%(jQWO1G5aO%(jQWO1G5aO%(rQWO1G5aO%(}Q`O,5>nO%)XQWO,5>nOITQWO,5>nOOQO-E<Q-E<QO%)^Q`O1G5bO%)hQWO1G5bOOQ$IS1G2T1G2TO$0hQWO1G2TOOQ$IS1G2S1G2SO%)pQWO1G2UOITQWO1G2UOOQ$IS1G2Y1G2YO!,rQpO1G2SO#5TQWO1G2TO%)uQWO1G2UO%)}QWO1G2TOJdQWO7+*bOOQ$IU1G/W1G/WO%*YQWO1G/WOOQ$IU7+'`7+'`O%*_Q#tO7+'gO%*oQ$IfO<<JsOOQ$IU<<Js<<JsOITQWO'#IVO%+`QWO,5?wOOQQ<<Kh<<KhOITQWO<<KhO#MdQWO<<KhO%+hQWO<<KhO%+pQ`O<<KhOITQWO1G2WOOQQ<<Gy<<GyO:^QWO<<GyO%+zQ$IfO<<IhOOQ$IU<<Ih<<IhOOQO,5>w,5>wO%,kQWO,5>wO%,pQWO,5>wOOQO-E<Z-E<ZO%,xQWO1G5iO%,xQWO1G5iO5qQWO1G5iO%-QQWO<<LTOOQQ<<LT<<LTO%-VQWO<<LTO5iQ$I[O<<LTO){QYO<<KhOITQWO<<KhOOQQ<<Ko<<KoO$5_Q$IdO<<KoOOQQ<<Kp<<KpO$5iQ`O<<KpO%-[Q&jO'#IXO%-gQWO,5?zOLXQYO,5?zOOQQ1G2n1G2nO#KdQ$ItO'#ETO!?{Q&jO'#GrOOQO'#IZ'#IZO%-oQ&jO,5=]OOQQ,5=],5=]O%-vQ&jO'#ETO%.RQ&jO'#ETO%.jQ&jO'#ETO%.tQ&jO'#GrO%/VQWO7+(bO%/[QWO7+(bO%/dQ`O7+(bOOQQ7+(b7+(bOITQWO7+(bO){QYO7+(bOITQWO7+(bO%/nQWO7+(bOOQQ7+(e7+(eO5iQ$I[O7+(eO#5YQWO7+(eO5_QWO7+(eO!,rQpO7+(eO%/|QWO,5>vOOQO-E<Y-E<YOOQO'#Gu'#GuO%0XQWO1G5gO5iQ$I[O<<GpOOQQ<<Gp<<GpO%0aQWO<<GpO%0fQWO7++UO%0kQWO7++VOOQQ7+(m7+(mO%0pQWO7+(mO%0uQYO7+(mO%0|QWO7+(mO){QYO7++UO){QYO7++VOOQQ<<La<<LaOOQQ<<Lc<<LcOOQQ-E<]-E<]OOQQ1G3b1G3bO%1RQWO,5=wOOQQ,5=y,5=yO%1WQWO1G3hOLXQYO7+&ROOQO7+%T7+%TO%1]Q7^O1G5XO:^QWO7+%TOOQO1G0T1G0TO%1gQ$IfO1G0ZOOQO1G0Z1G0ZO){QYO1G0ZO%1qQ$I[O1G0ZO:^QWO1G0TO!,rQpO1G0TO!?{Q&jO1G0TO%1|Q$I[O1G0ZO%2[Q&jO1G0TO%2mQ$I[O1G0ZO%3RQ$ItO1G0ZO%3]Q&jO1G0TO!?{Q&jO1G0ZOOQ$IU<<IV<<IVOOQ$IU<<Ig<<IgO:^QWO<<IgO%3dQ$IfO<<N[OOQO7+)n7+)nO%3tQ$IfO7+'gO%5|QbO1G4OO%6WQ7^O7+%|O%6|Q7^O,59jO%8zQ7^O,5<UO%:{Q7^O,5<WO%<hQ7^O,5<fO%>WQ7^O7+'WO%>eQ7^O7+'XO%>rQWO,5;xOOQO7+&{7+&{O%>wQ#tO<<KfOOQO1G4W1G4WO%?XQWO1G4WO%?dQWO1G4WO%?rQWO7+*{O%?rQWO7+*{OITQWO1G4YO%?zQ`O1G4YO%@UQWO7+*|OOQ$IS7+'o7+'oO$0hQWO7+'pO%@^Q`O7+'pOOQ$IS7+'n7+'nO$0hQWO7+'oO%@eQWO7+'pOITQWO7+'pO#5TQWO7+'oO%@jQ#tO<<M|OOQ$IU7+$r7+$rO%@tQ`O,5>qOOQO-E<T-E<TO#MdQWOANASOOQQANASANASOITQWOANASO%AOQ$IdO7+'rOOQQAN=eAN=eO5qQWO1G4cOOQO1G4c1G4cO%A`QWO1G4cO%AeQWO7++TO%AeQWO7++TO5iQ$I[OANAoO%AmQWOANAoOOQQANAoANAoO%ArQWOANASO%AzQ`OANASOOQQANAZANAZOOQQANA[ANA[O%BUQWO,5>sOOQO-E<V-E<VO%BaQ7^O1G5fO#5YQWO,5=^O5_QWO,5=^O!,rQpO,5=^OOQO-E<X-E<XOOQQ1G2w1G2wO$;QQ$ItO,5:oO!?{Q&jO,5=^O%BkQ&jO,5=^O%B|Q&jO,5:oOOQQ<<K|<<K|OITQWO<<K|O%/VQWO<<K|O%CWQWO<<K|O%C`Q`O<<K|O){QYO<<K|OITQWO<<K|OOQQ<<LP<<LPO5iQ$I[O<<LPO#5YQWO<<LPO5_QWO<<LPO%CjQ&jO1G4bO%CrQWO7++ROOQQAN=[AN=[O5iQ$I[OAN=[OOQQ<<Np<<NpOOQQ<<Nq<<NqOOQQ<<LX<<LXO%CzQWO<<LXO%DPQYO<<LXO%DWQWO<<NpO%D]QWO<<NqOOQQ1G3c1G3cO:^QWO7+)SO%DbQ7^O<<ImOOQO<<Ho<<HoOOQO7+%u7+%uO%1gQ$IfO7+%uO){QYO7+%uOOQO7+%o7+%oO:^QWO7+%oO!,rQpO7+%oO%DlQ$I[O7+%uO!?{Q&jO7+%oO%DwQ$I[O7+%uO%EVQ&jO7+%oO%EhQ$I[O7+%uOOQ$IUAN?RAN?RO%E|Q$IfO<<KfO%HUQ7^O<<JTO%HcQ7^O1G1yO%JgQ7^O1G2[O%LhQ7^O1G2^O%NTQ7^O<<JsO%NbQ7^O<<IhOOQO1G1d1G1dOOQO7+)r7+)rO%NoQWO7+)rO%NzQWO<<NgO& SQ`O7+)tOOQ$IS<<K[<<K[O$0hQWO<<K[OOQ$IS<<KZ<<KZO& ^Q`O<<K[O$0hQWO<<KZOOQQG26nG26nO#MdQWOG26nOOQO7+)}7+)}O5qQWO7+)}O& eQWO<<NoOOQQG27ZG27ZO5iQ$I[OG27ZOITQWOG26nOLXQYO1G4_O& mQWO7++QO5iQ$I[O1G2xO#5YQWO1G2xO5_QWO1G2xO!,rQpO1G2xO!?{Q&jO1G2xO%3RQ$ItO1G0ZO& uQ&jO1G2xO%/VQWOANAhOOQQANAhANAhOITQWOANAhO&!WQWOANAhO&!`Q`OANAhOOQQANAkANAkO5iQ$I[OANAkO#5YQWOANAkOOQO'#Gv'#GvOOQO7+)|7+)|OOQQG22vG22vOOQQANAsANAsO&!jQWOANAsOOQQAND[AND[OOQQAND]AND]OOQQ<<Ln<<LnOOQO<<Ia<<IaO%1gQ$IfO<<IaOOQO<<IZ<<IZO:^QWO<<IZO){QYO<<IaO!,rQpO<<IZO&!oQ$I[O<<IaO!?{Q&jO<<IZO&!zQ$I[O<<IaO&#YQ7^O7+'gOOQO<<M^<<M^OOQ$ISAN@vAN@vO$0hQWOAN@vOOQ$ISAN@uAN@uOOQQLD,YLD,YOOQO<<Mi<<MiOOQQLD,uLD,uO#MdQWOLD,YO&$xQ7^O7+)yOOQO7+(d7+(dO5iQ$I[O7+(dO#5YQWO7+(dO5_QWO7+(dO!,rQpO7+(dO!?{Q&jO7+(dOOQQG27SG27SO%/VQWOG27SOITQWOG27SOOQQG27VG27VO5iQ$I[OG27VOOQQG27_G27_OOQOAN>{AN>{OOQOAN>uAN>uO%1gQ$IfOAN>{O:^QWOAN>uO){QYOAN>{O!,rQpOAN>uO&%SQ$I[OAN>{O&%_Q7^O<<KfOOQ$ISG26bG26bOOQQ!$( t!$( tOOQO<<LO<<LOO5iQ$I[O<<LOO#5YQWO<<LOO5_QWO<<LOO!,rQpO<<LOOOQQLD,nLD,nO%/VQWOLD,nOOQQLD,qLD,qOOQOG24gG24gOOQOG24aG24aO%1gQ$IfOG24gO:^QWOG24aO){QYOG24gO&&}QMhO,5:rO&'tQ!LQO'#IqOOQOANAjANAjO5iQ$I[OANAjO#5YQWOANAjO5_QWOANAjOOQQ!$(!Y!$(!YOOQOLD*RLD*ROOQOLD){LD){O%1gQ$IfOLD*RO&(hQMhO,59jO&)[QMhO,5<UO&*OQMhO,5<WO&*rQMhO,5<fOOQOG27UG27UO5iQ$I[OG27UO#5YQWOG27UOOQO!$'Mm!$'MmO&+iQMhO1G2[O&,]QMhO1G2^O&-PQMhO1G1yOOQOLD,pLD,pO5iQ$I[OLD,pO&-vQMhO7+'gOOQO!$(![!$(![O&.mQMhO<<KfOLXQYO'#DrO&/dQbO'#ItOLXQYO'#DjO&/kQ$IfO'#ChO&0UQbO'#ChO&0fQYO,5:vO&2fQWO'#EWOLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO,5;ROLXQYO'#IPO&3pQWO,5<TO&5SQWO,5;ROLXQYO,5;fO!(^QWO'#DOO!(^QWO'#DOO!(^QWO'#DOOITQWO'#FjO&2fQWO'#FjO&3xQWO'#FjOITQWO'#FlO&2fQWO'#FlO&3xQWO'#FlOITQWO'#FzO&2fQWO'#FzO&3xQWO'#FzOLXQYO,5?mO&0fQYO1G0bO&5ZQ7^O'#ChOLXQYO1G1lOITQWO,5<pO&2fQWO,5<pO&3xQWO,5<pOITQWO,5<rO&2fQWO,5<rO&3xQWO,5<rOITQWO,5<_O&2fQWO,5<_O&3xQWO,5<_O&0fQYO1G1mOLXQYO7+&iOITQWO1G1{O&2fQWO1G1{O&3xQWO1G1{O&0fQYO7+'XO&0fQYO7+%|OITQWO7+'zO&2fQWO7+'zO&3xQWO7+'zO&5eQWO7+'pO&5eQWO<<K[O&5eQWOAN@vO&5jQWO'#E[O&5oQWO'#E[O&5wQWO'#EzO&5|QWO'#EgO&6RQWO'#JRO&6^QWO'#JPO&6iQWO,5:vO&6nQ#tO,5<QO&6uQWO'#FsO&6zQWO'#FsO&7PQWO'#FsO&7UQWO,5<RO&7^QWO,5:vO&7fQ7^O1G0}O&7mQWO,5<aO&7rQWO,5<aO&7wQWO,5<aO&7|QWO1G1mO&8RQWO1G0bO&8WQ#tO1G2`O&8_Q#tO1G2`O&8fQ#tO1G2`O&8mQWO1G2UO&8rQ`O7+'pO&8yQWO7+'pO&9OQ`O<<K[O4QQWO'#FhO5_QWO'#FgOBwQWO'#EZOLXQYO,5;cO!(mQWO'#FuO!(mQWO'#FuO!(mQWO'#FuOJdQWO,5<tOJdQWO,5<tOJdQWO,5<tO&9VQWO,5<jOITQWO1G2UO&9_QWO1G2UOITQWO7+'pO!&tQ&jO'#GOO!&tQ&jO,5<j",stateData:"&:]~O'YOS'ZOSTOSUOS~OPTOQTOXyO]cO_hObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#dsO#tpO#x^O%PqO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO%axO%nzO%t{O%v|O%x}O%z!OO%}!PO&T!QO&Z!RO&]!SO&_!TO&a!UO&c!VO']PO'fQO'oYO'|aO~OP[XZ[X_[Xj[Xu[Xv[Xx[X!R[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'W[X'f[X'p[X'w[X'x[X~O!]$lX~P$zOR!WO'U!XO'V!ZO~OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']![O'fQO'oYO'|aO~O!Q!`O!R!]O!O'jP!O'tP~P'dO!S!mO~P`OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9WO'fQO'oYO'|aO~OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!T!bO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O'fQO'oYO'|aO~O!Q!rO#U!uO#V!rO']9XO!c'qP~P+{O#W!vO~O!]!wO#W!vO~OP#^OZ#dOj#ROu!{Ov!{Ox!|O!R#bO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_'hX'W'hX!c'hX!O'hX!T'hX%Q'hX!]'hX~P.jO!{#eO#o#eOP'iXZ'iX_'iXj'iXu'iXv'iXx'iX!R'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX~O#c'iX'W'iX!O'iX!c'iXn'iX!T'iX%Q'iX!]'iX~P0zO!{#eO~O#z#fO$R#jO~O!T#kO#x^O$U#lO$W#nO~O]#qOh$OOj#rOk#qOl#qOq$POs$QOx#xO!T#yO!_$VO!d#vO#V$WO#t$TO$_$RO$a$SO$d$UO']#pO'f#sO'a'cP~O!d$XO~O!]$ZO~O_$[O'W$[O~O']$`O~O!d$XO']$`O'^$bO'b$cO~Oc$iO!d$XO']$`O~O#c#TO~O]$rOu$nO!T$kO!d$mO%R$qO']$`O'^$bO^(UP~O!n$sO~Ox$tO!T$uO']$`O~Ox$tO!T$uO%Z$yO']$`O~O']$zO~O#dsO%RtO%TrO%UrO%XuO%ZvO%^wO%_wO~Ob%TOc%SO!n%QO%P%RO%c%PO~P7uOb%WOcmO!T%VO!nlO#dsO%PqO%TrO%UrO%XuO%ZvO%^wO%_wO%axO~O`%ZO!{%^O%R%XO'^$bO~P8tO!d%_O!g%cO~O!d%dO~O!TSO~O_$[O'T%lO'W$[O~O_$[O'T%oO'W$[O~O_$[O'T%qO'W$[O~OR!WO'U!XO'V%uO~OP[XZ[Xj[Xu[Xv[Xx[X!R[X!RdX!a[X!b[X!d[X!j[X!{[X!{dX#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X~O!O[X!OdX~P;aO!Q%wO!O&iX!O&nX!R&iX!R&nX~P'dO!R%yO!O'jX~OP#^OZ#dOj#ROu!{Ov!{Ox!|O!R%yO!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O!O'jX~P>^O!O&OO~Ox&RO!W&]O!X&UO!Y&UO'^$bO~O]&SOk&SO!Q&VO'g&PO!S'kP!S'vP~P@aO!O'sX!R'sX!]'sX!c'sX'p'sX~O!{'sX#W#PX!S'sX~PAYO!{&^O!O'uX!R'uX~O!R&_O!O'tX~O!O&bO~O!{#eO~PAYOS&fO!T&cO!o&eO']$`O~Oc&kO!d$XO']$`O~Ou$nO!d$mO~O!S&lO~P`Ou!{Ov!{Ox!|O!b!yO!d!zO'fQOP!faZ!faj!fa!R!fa!a!fa!j!fa#[!fa#]!fa#^!fa#_!fa#`!fa#a!fa#b!fa#c!fa#e!fa#g!fa#i!fa#j!fa'p!fa'w!fa'x!fa~O_!fa'W!fa!O!fa!c!fan!fa!T!fa%Q!fa!]!fa~PCcO!c&mO~O!]!wO!{&oO'p&nO!R'rX_'rX'W'rX~O!c'rX~PE{O!R&sO!c'qX~O!c&uO~Ox$tO!T$uO#V&vO']$`O~OPTOQTO]cOb!kOc!jOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!TSO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!n!iO#t!lO#x^O']9WO'fQO'oYO'|aO~O]#qOh$OOj#rOk#qOl#qOq$POs9kOx#xO!T#yO!_;RO!d#vO#V9tO#t$TO$_9nO$a9qO$d$UO']&zO'f#sO~O#W&|O~O]#qOh$OOj#rOk#qOl#qOq$POs$QOx#xO!T#yO!_$VO!d#vO#V$WO#t$TO$_$RO$a$SO$d$UO']&zO'f#sO~O'a'mP~PJdO!Q'QO!c'nP~P){O'g'SO'oYO~OP9TOQ9TO]cOb;POc!jOhcOj9TOkcOlcOq9TOs9TOxRO{cO|cO}cO!T!bO!_9VO!dUO!g9TO!h9TO!i9TO!j9TO!k9TO!n!iO#t!lO#x^O']'bO'fQO'oYO'|:}O~O!d!zO~O!R#bO_$]a'W$]a!c$]a!O$]a!T$]a%Q$]a!]$]a~O#d'iO~PITO!]'kO!T'yX#w'yX#z'yX$R'yX~Ou'lO~P! POu'lO!T'yX#w'yX#z'yX$R'yX~O!T'nO#w'rO#z'mO$R'sO~O!Q'vO~PLXO#z#fO$R'yO~Ou$eXx$eX!b$eX'p$eX'w$eX'x$eX~OSfX!RfX!{fX'afX'a$eX~P!!iOk'{O~OR'|O'U'}O'V(PO~Ou(ROx(SO'p#[O'w(UO'x(WO~O'a(QO~P!#rO'a(ZO~O]#qOh$OOj#rOk#qOl#qOq$POs9kOx#xO!T#yO!_;RO!d#vO#V9tO#t$TO$_9nO$a9qO$d$UO'f#sO~O!Q(_O']([O!c'}P~P!$aO#W(aO~O!Q(eO'](bO!O(OP~P!$aOj(sOx(kO!W(qO!X(jO!Y(jO!d(hO!x(rO$w(mO'^$bO'g(gO~O!S(pO~P!&XO!b!yOu'eXx'eX'p'eX'w'eX'x'eX!R'eX!{'eX~O'a'eX#m'eX~P!'QOS(vO!{(uO!R'dX'a'dX~O!R(wO'a'cX~O'](yO~O!d)OO~O']&zO~O!d(hO~Ox$tO!Q!rO!T$uO#U!uO#V!rO']$`O!c'qP~O!]!wO#W)SO~OP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO#j#ZO'fQO'p#[O'w!}O'x#OO~O_!^a!R!^a'W!^a!O!^a!c!^an!^a!T!^a%Q!^a!]!^a~P!)cOS)[O!T&cO!o)ZO%Q)YO'b$cO~O']$zO'a'cP~O!])_O!T'`X_'`X!R'`X'W'`X~O!d$XO'b$cO~O!d$XO']$`O'b$cO~O!]!wO#W&|O~O])jO%R)kO'])gO!S(VP~O!R)lO^(UX~O'g'SO~OZ)pO~O^)qO~O!T$kO']$`O'^$bO^(UP~Ox$tO!Q)vO!R&_O!T$uO']$`O!O'tP~O]&YOk&YO!Q)wO'g'SO!S'vP~O!R)xO_(RX'W(RX~O!{)|O'b$cO~OS*PO!T#yO'b$cO~O!T*RO~Ou*TO!TSO~O!n*YO~Oc*_O~O'](yO!S(TP~Oc$iO~O%RtO']$zO~P8tOZ*eO^*dO~OPTOQTO]cObnOcmOhcOjTOkcOlcOqTOsTOxRO{cO|cO}cO!_kO!dUO!gTO!hTO!iTO!jTO!kTO!nlO#x^O%PqO'fQO'oYO'|aO~O!T!bO#t!lO']9WO~P!1RO^*dO_$[O'W$[O~O_*iO#d*kO%T*kO%U*kO~P){O!d%_O~O%t*pO~O!T*rO~O&V*tO&X*uOP&SaQ&SaX&Sa]&Sa_&Sab&Sac&Sah&Saj&Sak&Sal&Saq&Sas&Sax&Sa{&Sa|&Sa}&Sa!T&Sa!_&Sa!d&Sa!g&Sa!h&Sa!i&Sa!j&Sa!k&Sa!n&Sa#d&Sa#t&Sa#x&Sa%P&Sa%R&Sa%T&Sa%U&Sa%X&Sa%Z&Sa%^&Sa%_&Sa%a&Sa%n&Sa%t&Sa%v&Sa%x&Sa%z&Sa%}&Sa&T&Sa&Z&Sa&]&Sa&_&Sa&a&Sa&c&Sa'S&Sa']&Sa'f&Sa'o&Sa'|&Sa!S&Sa%{&Sa`&Sa&Q&Sa~O']*zO~On*}O~O!O&ia!R&ia~P!)cO!Q+RO!O&iX!R&iX~P){O!R%yO!O'ja~O!O'ja~P>^O!R&_O!O'ta~O!RwX!R!ZX!SwX!S!ZX!]wX!]!ZX!d!ZX!{wX'b!ZX~O!]+WO!{+VO!R#TX!R'lX!S#TX!S'lX!]'lX!d'lX'b'lX~O!]+YO!d$XO'b$cO!R!VX!S!VX~O]&QOk&QOx&RO'g(gO~OP9TOQ9TO]cOb;POc!jOhcOj9TOkcOlcOq9TOs9TOxRO{cO|cO}cO!T!bO!_9VO!dUO!g9TO!h9TO!i9TO!j9TO!k9TO!n!iO#t!lO#x^O'fQO'oYO'|:}O~O']9yO~P!;^O!R+^O!S'kX~O!S+`O~O!]+WO!{+VO!R#TX!S#TX~O!R+aO!S'vX~O!S+cO~O]&QOk&QOx&RO'^$bO'g(gO~O!X+dO!Y+dO~P!>[Ox$tO!Q+fO!T$uO']$`O!O&nX!R&nX~O_+jO!W+mO!X+iO!Y+iO!r+qO!s+oO!t+pO!u+nO!x+rO'^$bO'g(gO'o+gO~O!S+lO~P!?]OS+wO!T&cO!o+vO~O!{+}O!R'ra!c'ra_'ra'W'ra~O!]!wO~P!@gO!R&sO!c'qa~Ox$tO!Q,QO!T$uO#U,SO#V,QO']$`O!R&pX!c&pX~O_#Oi!R#Oi'W#Oi!O#Oi!c#Oin#Oi!T#Oi%Q#Oi!]#Oi~P!)cO#W!za!R!za!c!za!{!za!T!za_!za'W!za!O!za~P!#rO#W'eXP'eXZ'eX_'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX'W'eX'f'eX!c'eX!O'eX!T'eXn'eX%Q'eX!]'eX~P!'QO!R,]O'a'mX~P!#rO'a,_O~O!R,`O!c'nX~P!)cO!c,cO~O!O,dO~OP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zi_#Zij#Zi!R#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O#[#Zi~P!EtO#[#PO~P!EtOP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO'fQOZ#Zi_#Zi!R#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~Oj#Zi~P!H`Oj#RO~P!H`OP#^Oj#ROu!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO'fQO_#Zi!R#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'w#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P!JzOZ#dO!a#TO#a#TO#b#TO#c#TO~P!JzOP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO'fQO_#Zi!R#Zi#g#Zi#i#Zi#j#Zi'W#Zi'p#Zi'x#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'w#Zi~P!MrO'w!}O~P!MrOP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO'fQO'w!}O_#Zi!R#Zi#i#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~O'x#Zi~P#!^O'x#OO~P#!^OP#^OZ#dOj#ROu!{Ov!{Ox!|O!a#TO!b!yO!d!zO!j#^O#[#PO#]#QO#^#QO#_#QO#`#SO#a#TO#b#TO#c#TO#e#UO#g#WO#i#YO'fQO'w!}O'x#OO~O_#Zi!R#Zi#j#Zi'W#Zi'p#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P#$xOP[XZ[Xj[Xu[Xv[Xx[X!a[X!b[X!d[X!j[X!{[X#WdX#[[X#][X#^[X#_[X#`[X#a[X#b[X#c[X#e[X#g[X#i[X#j[X#o[X'f[X'p[X'w[X'x[X!R[X!S[X~O#m[X~P#']OP#^OZ9iOj9^Ou!{Ov!{Ox!|O!a9`O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O#`9_O#a9`O#b9`O#c9`O#e9aO#g9cO#i9eO#j9fO'fQO'p#[O'w!}O'x#OO~O#m,fO~P#)gOP'iXZ'iXj'iXu'iXv'iXx'iX!a'iX!b'iX!d'iX!j'iX#['iX#]'iX#^'iX#_'iX#`'iX#a'iX#b'iX#e'iX#g'iX#i'iX#j'iX'f'iX'p'iX'w'iX'x'iX!R'iX~O!{9jO#o9jO#c'iX#m'iX!S'iX~P#+bO_&sa!R&sa'W&sa!c&san&sa!O&sa!T&sa%Q&sa!]&sa~P!)cOP#ZiZ#Zi_#Zij#Ziv#Zi!R#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi'W#Zi'f#Zi!O#Zi!c#Zin#Zi!T#Zi%Q#Zi!]#Zi~P!#rO_#ni!R#ni'W#ni!O#ni!c#nin#ni!T#ni%Q#ni!]#ni~P!)cO#z,hO~O#z,iO~O!]'kO!{,jO!T$OX#w$OX#z$OX$R$OX~O!Q,kO~O!T'nO#w,mO#z'mO$R,nO~O!R9gO!S'hX~P#)gO!S,oO~O$R,qO~OR'|O'U'}O'V,tO~O],wOk,wO!O,xO~O!RdX!]dX!cdX!c$eX'pdX~P!!iO!c-OO~P!#rO!R-PO!]!wO'p&nO!c'}X~O!c-UO~O!O$eX!R$eX!]$lX~P!!iO!R-WO!O(OX~P!#rO!]-YO~O!O-[O~O!Q(_O']$`O!c'}P~Oj-`O!]!wO!d$XO'b$cO'p&nO~O!])_O~O_$[O!R-eO'W$[O~O!S-gO~P!&XO!X-hO!Y-hO'^$bO'g(gO~Ox-jO'g(gO~O!x-kO~O']$zO!R&xX'a&xX~O!R(wO'a'ca~Ou-pOv-pOx-qO'pra'wra'xra!Rra!{ra~O'ara#mra~P#6qOu(ROx(SO'p$^a'w$^a'x$^a!R$^a!{$^a~O'a$^a#m$^a~P#7gOu(ROx(SO'p$`a'w$`a'x$`a!R$`a!{$`a~O'a$`a#m$`a~P#8YO]-rO~O#W-sO~O'a$na!R$na#m$na!{$na~P!#rO#W-vO~OS.PO!T&cO!o.OO%Q-}O~O'a.QO~O]#qOj#rOk#qOl#qOq$POs9kOx#xO!T#yO!_;RO!d#vO#V9tO#t$TO$_9nO$a9qO$d$UO'f#sO~Oh.SO'].RO~P#:PO!])_O!T'`a_'`a!R'`a'W'`a~O#W.YO~OZ[X!RdX!SdX~O!R.ZO!S(VX~O!S.]O~OZ.^O~O].`O'])gO~O!T$kO']$`O^'QX!R'QX~O!R)lO^(Ua~O!c.cO~P!)cO].eO~OZ.fO~O^.gO~OS.PO!T&cO!o.OO%Q-}O'b$cO~O!R)xO_(Ra'W(Ra~O!{.mO~OS.pO!T#yO~O'g'SO!S(SP~OS.zO!T.vO!o.yO%Q.xO'b$cO~OZ/UO!R/SO!S(TX~O!S/VO~O^/XO_$[O'W$[O~O]/YO~O]/ZO'](yO~O#c/[O%r/]O~P0zO!{#eO#c/[O%r/]O~O_/^O~P){O_/`O~O%{/dOP%yiQ%yiX%yi]%yi_%yib%yic%yih%yij%yik%yil%yiq%yis%yix%yi{%yi|%yi}%yi!T%yi!_%yi!d%yi!g%yi!h%yi!i%yi!j%yi!k%yi!n%yi#d%yi#t%yi#x%yi%P%yi%R%yi%T%yi%U%yi%X%yi%Z%yi%^%yi%_%yi%a%yi%n%yi%t%yi%v%yi%x%yi%z%yi%}%yi&T%yi&Z%yi&]%yi&_%yi&a%yi&c%yi'S%yi']%yi'f%yi'o%yi'|%yi!S%yi`%yi&Q%yi~O`/jO!S/hO&Q/iO~P`O!TSO!d/lO~O&X*uOP&SiQ&SiX&Si]&Si_&Sib&Sic&Sih&Sij&Sik&Sil&Siq&Sis&Six&Si{&Si|&Si}&Si!T&Si!_&Si!d&Si!g&Si!h&Si!i&Si!j&Si!k&Si!n&Si#d&Si#t&Si#x&Si%P&Si%R&Si%T&Si%U&Si%X&Si%Z&Si%^&Si%_&Si%a&Si%n&Si%t&Si%v&Si%x&Si%z&Si%}&Si&T&Si&Z&Si&]&Si&_&Si&a&Si&c&Si'S&Si']&Si'f&Si'o&Si'|&Si!S&Si%{&Si`&Si&Q&Si~O!R#bOn$]a~O!O&ii!R&ii~P!)cO!R%yO!O'ji~O!R&_O!O'ti~O!O/rO~O!R!Va!S!Va~P#)gO]&QOk&QO!Q/xO'g(gO!R&jX!S&jX~P@aO!R+^O!S'ka~O]&YOk&YO!Q)wO'g'SO!R&oX!S&oX~O!R+aO!S'va~O!O'ui!R'ui~P!)cO_$[O!]!wO!d$XO!j0SO!{0QO'W$[O'b$cO'p&nO~O!S0VO~P!?]O!X0WO!Y0WO'^$bO'g(gO'o+gO~O!W0XO~P#LVO!TSO!W0XO!u0ZO!x0[O~P#LVO!W0XO!s0^O!t0^O!u0ZO!x0[O~P#LVO!T&cO~O!T&cO~P!#rO!R'ri!c'ri_'ri'W'ri~P!)cO!{0gO!R'ri!c'ri_'ri'W'ri~O!R&sO!c'qi~Ox$tO!T$uO#V0iO']$`O~O#WraPraZra_rajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra'Wra'fra!cra!Ora!Tranra%Qra!]ra~P#6qO#W$^aP$^aZ$^a_$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a'W$^a'f$^a!c$^a!O$^a!T$^an$^a%Q$^a!]$^a~P#7gO#W$`aP$`aZ$`a_$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a'W$`a'f$`a!c$`a!O$`a!T$`an$`a%Q$`a!]$`a~P#8YO#W$naP$naZ$na_$naj$nav$na!R$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na'W$na'f$na!c$na!O$na!T$na!{$nan$na%Q$na!]$na~P!#rO_#Oq!R#Oq'W#Oq!O#Oq!c#Oqn#Oq!T#Oq%Q#Oq!]#Oq~P!)cO!R&kX'a&kX~PJdO!R,]O'a'ma~O!Q0qO!R&lX!c&lX~P){O!R,`O!c'na~O!R,`O!c'na~P!)cO#m!fa!S!fa~PCcO#m!^a!R!^a!S!^a~P#)gO!T1UO#x^O$P1VO~O!S1ZO~On1[O~P!#rO_$Yq!R$Yq'W$Yq!O$Yq!c$Yqn$Yq!T$Yq%Q$Yq!]$Yq~P!)cO!O1]O~O],wOk,wO~Ou(ROx(SO'x(WO'p$xi'w$xi!R$xi!{$xi~O'a$xi#m$xi~P$,vOu(ROx(SO'p$zi'w$zi'x$zi!R$zi!{$zi~O'a$zi#m$zi~P$-iO#m1^O~P!#rO!Q1`O']$`O!R&tX!c&tX~O!R-PO!c'}a~O!R-PO!]!wO!c'}a~O!R-PO!]!wO'p&nO!c'}a~O'a$gi!R$gi#m$gi!{$gi~P!#rO!Q1gO'](bO!O&vX!R&vX~P!$aO!R-WO!O(Oa~O!R-WO!O(Oa~P!#rO!]!wO~O!]!wO#c1oO~Oj1rO!]!wO'p&nO~O!R'di'a'di~P!#rO!{1uO!R'di'a'di~P!#rO!c1xO~O_$Zq!R$Zq'W$Zq!O$Zq!c$Zqn$Zq!T$Zq%Q$Zq!]$Zq~P!)cO!R1|O!T(PX~P!#rO!T&cO%Q2PO~O!T&cO%Q2PO~P!#rO!T$eX$u[X_$eX!R$eX'W$eX~P!!iO$u2TOugXxgX!TgX'pgX'wgX'xgX_gX!RgX'WgX~O$u2TO~O]2ZO%R2[O'])gO!R'PX!S'PX~O!R.ZO!S(Va~OZ2`O~O^2aO~O]2dO~OS2fO!T&cO!o2eO%Q2PO~O_$[O'W$[O~P!#rO!T#yO~P!#rO!R2kO!{2mO!S(SX~O!S2nO~Ox;]O!W2wO!X2pO!Y2pO!r2vO!s2uO!t2uO!x2tO'^$bO'g(gO'o+gO~O!S2sO~P$6QOS3OO!T.vO!o2}O%Q2|O~OS3OO!T.vO!o2}O%Q2|O'b$cO~O'](yO!R'OX!S'OX~O!R/SO!S(Ta~O]3YO'g3XO~O]3ZO~O^3]O~O!c3`O~P){O_3bO~O_3bO~P){O#c3dO%r3eO~PE{O`/jO!S3iO&Q/iO~P`O!]3kO~O!R#Ti!S#Ti~P#)gO!{3mO!R#Ti!S#Ti~O!R!Vi!S!Vi~P#)gO_$[O!{3tO'W$[O~O_$[O!]!wO!{3tO'W$[O~O!X3xO!Y3xO'^$bO'g(gO'o+gO~O_$[O!]!wO!d$XO!j3yO!{3tO'W$[O'b$cO'p&nO~O!W3zO~P$:oO!W3zO!u3}O!x4OO~P$:oO_$[O!]!wO!j3yO!{3tO'W$[O'p&nO~O!R'rq!c'rq_'rq'W'rq~P!)cO!R&sO!c'qq~O#W$xiP$xiZ$xi_$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi'W$xi'f$xi!c$xi!O$xi!T$xin$xi%Q$xi!]$xi~P$,vO#W$ziP$ziZ$zi_$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi'W$zi'f$zi!c$zi!O$zi!T$zin$zi%Q$zi!]$zi~P$-iO#W$giP$giZ$gi_$gij$giv$gi!R$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi'W$gi'f$gi!c$gi!O$gi!T$gi!{$gin$gi%Q$gi!]$gi~P!#rO!R&ka'a&ka~P!#rO!R&la!c&la~P!)cO!R,`O!c'ni~O#m#Oi!R#Oi!S#Oi~P#)gOP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O'fQOZ#Zij#Zi!a#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~O#[#Zi~P$DVO#[9[O~P$DVOP#^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O'fQOZ#Zi!a#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~Oj#Zi~P$F_Oj9^O~P$F_OP#^Oj9^Ou!{Ov!{Ox!|O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O#`9_O'fQO#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'w#Zi'x#Zi!R#Zi!S#Zi~OZ#Zi!a#Zi#a#Zi#b#Zi#c#Zi~P$HgOZ9iO!a9`O#a9`O#b9`O#c9`O~P$HgOP#^OZ9iOj9^Ou!{Ov!{Ox!|O!a9`O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O#`9_O#a9`O#b9`O#c9`O#e9aO'fQO#g#Zi#i#Zi#j#Zi#m#Zi'p#Zi'x#Zi!R#Zi!S#Zi~O'w#Zi~P$J{O'w!}O~P$J{OP#^OZ9iOj9^Ou!{Ov!{Ox!|O!a9`O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O#`9_O#a9`O#b9`O#c9`O#e9aO#g9cO'fQO'w!}O#i#Zi#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~O'x#Zi~P$MTO'x#OO~P$MTOP#^OZ9iOj9^Ou!{Ov!{Ox!|O!a9`O!b!yO!d!zO!j#^O#[9[O#]9]O#^9]O#_9]O#`9_O#a9`O#b9`O#c9`O#e9aO#g9cO#i9eO'fQO'w!}O'x#OO~O#j#Zi#m#Zi'p#Zi!R#Zi!S#Zi~P% ]O_#ky!R#ky'W#ky!O#ky!c#kyn#ky!T#ky%Q#ky!]#ky~P!)cOP#ZiZ#Zij#Ziv#Zi!a#Zi!b#Zi!d#Zi!j#Zi#[#Zi#]#Zi#^#Zi#_#Zi#`#Zi#a#Zi#b#Zi#c#Zi#e#Zi#g#Zi#i#Zi#j#Zi#m#Zi'f#Zi!R#Zi!S#Zi~P!#rO!b!yOu'eXx'eX'p'eX'w'eX'x'eX!S'eX~OP'eXZ'eXj'eXv'eX!a'eX!d'eX!j'eX#['eX#]'eX#^'eX#_'eX#`'eX#a'eX#b'eX#c'eX#e'eX#g'eX#i'eX#j'eX#m'eX'f'eX!R'eX~P%%mO#m#ni!R#ni!S#ni~P#)gO!S4`O~O!R&sa!S&sa~P#)gO!]!wO'p&nO!R&ta!c&ta~O!R-PO!c'}i~O!R-PO!]!wO!c'}i~O!O&va!R&va~P!#rO!]4gO~O!R-WO!O(Oi~P!#rO!R-WO!O(Oi~O!O4kO~O!]!wO#c4pO~Oj4qO!]!wO'p&nO~O!O4sO~O'a$iq!R$iq#m$iq!{$iq~P!#rO_$Zy!R$Zy'W$Zy!O$Zy!c$Zyn$Zy!T$Zy%Q$Zy!]$Zy~P!)cO!R1|O!T(Pa~O!T&cO%Q4xO~O!T&cO%Q4xO~P!#rO_#Oy!R#Oy'W#Oy!O#Oy!c#Oyn#Oy!T#Oy%Q#Oy!]#Oy~P!)cOZ4{O~O]4}O'])gO~O!R.ZO!S(Vi~O]5QO~O^5RO~O'g'SO!R&{X!S&{X~O!R2kO!S(Sa~O!S5`O~P$6QOx;^O'g(gO'o+gO~O!W5cO!X5bO!Y5bO!x0[O'^$bO'g(gO'o+gO~O!s5dO!t5dO~P%.RO!X5bO!Y5bO'^$bO'g(gO'o+gO~O!T.vO~O!T.vO%Q5fO~O!T.vO%Q5fO~P!#rOS5kO!T.vO!o5jO%Q5fO~OZ5pO!R'Oa!S'Oa~O!R/SO!S(Ti~O]5sO~O!c5tO~O!c5uO~O!c5vO~O!c5vO~P){O_5xO~O!]5{O~O!c5|O~O!R'ui!S'ui~P#)gO_$[O'W$[O~P!)cO_$[O!{6RO'W$[O~O_$[O!]!wO!{6RO'W$[O~O!X6WO!Y6WO'^$bO'g(gO'o+gO~O_$[O!]!wO!j6XO!{6RO'W$[O'p&nO~O!d$XO'b$cO~P%2mO!W6YO~P%2[O!R'ry!c'ry_'ry'W'ry~P!)cO#W$iqP$iqZ$iq_$iqj$iqv$iq!R$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq'W$iq'f$iq!c$iq!O$iq!T$iq!{$iqn$iq%Q$iq!]$iq~P!#rO!R&li!c&li~P!)cO#m#Oq!R#Oq!S#Oq~P#)gOu-pOv-pOx-qO'pra'wra'xra!Sra~OPraZrajra!ara!bra!dra!jra#[ra#]ra#^ra#_ra#`ra#ara#bra#cra#era#gra#ira#jra#mra'fra!Rra~P%6eOu(ROx(SO'p$^a'w$^a'x$^a!S$^a~OP$^aZ$^aj$^av$^a!a$^a!b$^a!d$^a!j$^a#[$^a#]$^a#^$^a#_$^a#`$^a#a$^a#b$^a#c$^a#e$^a#g$^a#i$^a#j$^a#m$^a'f$^a!R$^a~P%8fOu(ROx(SO'p$`a'w$`a'x$`a!S$`a~OP$`aZ$`aj$`av$`a!a$`a!b$`a!d$`a!j$`a#[$`a#]$`a#^$`a#_$`a#`$`a#a$`a#b$`a#c$`a#e$`a#g$`a#i$`a#j$`a#m$`a'f$`a!R$`a~P%:gOP$naZ$naj$nav$na!a$na!b$na!d$na!j$na#[$na#]$na#^$na#_$na#`$na#a$na#b$na#c$na#e$na#g$na#i$na#j$na#m$na'f$na!R$na!S$na~P!#rO#m$Yq!R$Yq!S$Yq~P#)gO#m$Zq!R$Zq!S$Zq~P#)gO!S6dO~O'a$|y!R$|y#m$|y!{$|y~P!#rO!]!wO!R&ti!c&ti~O!]!wO'p&nO!R&ti!c&ti~O!R-PO!c'}q~O!O&vi!R&vi~P!#rO!R-WO!O(Oq~O!O6jO~P!#rO!O6jO~O!R'dy'a'dy~P!#rO!R&ya!T&ya~P!#rO!T$tq_$tq!R$tq'W$tq~P!#rOZ6qO~O!R.ZO!S(Vq~O]6tO~O!T&cO%Q6uO~O!T&cO%Q6uO~P!#rO!{6vO!R&{a!S&{a~O!R2kO!S(Si~P#)gO!X6|O!Y6|O'^$bO'g(gO'o+gO~O!W7OO!x4OO~P%BkO!T.vO%Q7RO~O!T.vO%Q7RO~P!#rO]7YO'g7XO~O!R/SO!S(Tq~O!c7[O~O!c7[O~P){O!c7^O~O!c7_O~O!R#Ty!S#Ty~P#)gO_$[O!{7eO'W$[O~O_$[O!]!wO!{7eO'W$[O~O!X7hO!Y7hO'^$bO'g(gO'o+gO~O_$[O!]!wO!j7iO!{7eO'W$[O'p&nO~O#W$|yP$|yZ$|y_$|yj$|yv$|y!R$|y!a$|y!b$|y!d$|y!j$|y#[$|y#]$|y#^$|y#_$|y#`$|y#a$|y#b$|y#c$|y#e$|y#g$|y#i$|y#j$|y'W$|y'f$|y!c$|y!O$|y!T$|y!{$|yn$|y%Q$|y!]$|y~P!#rO#m#ky!R#ky!S#ky~P#)gOP$giZ$gij$giv$gi!a$gi!b$gi!d$gi!j$gi#[$gi#]$gi#^$gi#_$gi#`$gi#a$gi#b$gi#c$gi#e$gi#g$gi#i$gi#j$gi#m$gi'f$gi!R$gi!S$gi~P!#rOu(ROx(SO'x(WO'p$xi'w$xi!S$xi~OP$xiZ$xij$xiv$xi!a$xi!b$xi!d$xi!j$xi#[$xi#]$xi#^$xi#_$xi#`$xi#a$xi#b$xi#c$xi#e$xi#g$xi#i$xi#j$xi#m$xi'f$xi!R$xi~P%JROu(ROx(SO'p$zi'w$zi'x$zi!S$zi~OP$ziZ$zij$ziv$zi!a$zi!b$zi!d$zi!j$zi#[$zi#]$zi#^$zi#_$zi#`$zi#a$zi#b$zi#c$zi#e$zi#g$zi#i$zi#j$zi#m$zi'f$zi!R$zi~P%LSO#m$Zy!R$Zy!S$Zy~P#)gO#m#Oy!R#Oy!S#Oy~P#)gO!]!wO!R&tq!c&tq~O!R-PO!c'}y~O!O&vq!R&vq~P!#rO!O7mO~P!#rO!R.ZO!S(Vy~O!R2kO!S(Sq~O!X7yO!Y7yO'^$bO'g(gO'o+gO~O!T.vO%Q7|O~O!T.vO%Q7|O~P!#rO!c8PO~O_$[O!{8UO'W$[O~O_$[O!]!wO!{8UO'W$[O~OP$iqZ$iqj$iqv$iq!a$iq!b$iq!d$iq!j$iq#[$iq#]$iq#^$iq#_$iq#`$iq#a$iq#b$iq#c$iq#e$iq#g$iq#i$iq#j$iq#m$iq'f$iq!R$iq!S$iq~P!#rO!R&{q!S&{q~P#)gO_$[O!{8hO'W$[O~OP$|yZ$|yj$|yv$|y!a$|y!b$|y!d$|y!j$|y#[$|y#]$|y#^$|y#_$|y#`$|y#a$|y#b$|y#c$|y#e$|y#g$|y#i$|y#j$|y#m$|y'f$|y!R$|y!S$|y~P!#rO!S!za!W!za!X!za!Y!za!r!za!s!za!t!za!x!za'^!za'g!za'o!za~P!#rO!W'eX!X'eX!Y'eX!r'eX!s'eX!t'eX!x'eX'^'eX'g'eX'o'eX~P%%mO!Wra!Xra!Yra!rra!sra!tra!xra'^ra'gra'ora~P%6eO!W$^a!X$^a!Y$^a!r$^a!s$^a!t$^a!x$^a'^$^a'g$^a'o$^a~P%8fO!W$`a!X$`a!Y$`a!r$`a!s$`a!t$`a!x$`a'^$`a'g$`a'o$`a~P%:gO!S$na!W$na!X$na!Y$na!r$na!s$na!t$na!x$na'^$na'g$na'o$na~P!#rO!W$xi!X$xi!Y$xi!r$xi!s$xi!t$xi!x$xi'^$xi'g$xi'o$xi~P%JRO!W$zi!X$zi!Y$zi!r$zi!s$zi!t$zi!x$zi'^$zi'g$zi'o$zi~P%LSO!S$gi!W$gi!X$gi!Y$gi!r$gi!s$gi!t$gi!x$gi'^$gi'g$gi'o$gi~P!#rO!S$iq!W$iq!X$iq!Y$iq!r$iq!s$iq!t$iq!x$iq'^$iq'g$iq'o$iq~P!#rO!S$|y!W$|y!X$|y!Y$|y!r$|y!s$|y!t$|y!x$|y'^$|y'g$|y'o$|y~P!#rOn'hX~P.jOn[X!O[X!c[X%r[X!T[X%Q[X!][X~P$zO!]dX!c[X!cdX'pdX~P;aOP9TOQ9TO]cOb;POc!jOhcOj9TOkcOlcOq9TOs9TOxRO{cO|cO}cO!TSO!_9VO!dUO!g9TO!h9TO!i9TO!j9TO!k9TO!n!iO#t!lO#x^O']'bO'fQO'oYO'|:}O~O]#qOh$OOj#rOk#qOl#qOq$POs9lOx#xO!T#yO!_;SO!d#vO#V9uO#t$TO$_9oO$a9rO$d$UO']&zO'f#sO~O!R9gO!S$]a~O]#qOh$OOj#rOk#qOl#qOq$POs9mOx#xO!T#yO!_;TO!d#vO#V9vO#t$TO$_9pO$a9sO$d$UO']&zO'f#sO~O#d'iO~P&3xO!S[X!SdX~P;aO!]9ZO~O#W9YO~O!]!wO#W9YO~O!{9jO~O#c9`O~O!{9wO!R'uX!S'uX~O!{9jO!R'sX!S'sX~O#W9xO~O'a9zO~P!#rO#W:RO~O#W:SO~O#W:TO~O!]!wO#W:UO~O!]!wO#W9xO~O#m:VO~P#)gO#W:WO~O#W:XO~O#W:YO~O#W:ZO~O#W:[O~O#m:]O~P!#rO#m:^O~P!#rO#m:_O~P!#rO!O:`O~O!O:aO~P!#rO!O:aO~O!O:bO~P!#rO!]!wO#c;YO~O!]!wO#c;[O~O#x~!b!r!t!u#U#V'|$_$a$d$u%P%Q%R%X%Z%^%_%a%c~UT#x'|#]}'Y'Z#z'Y']'g~",goto:"#Hc(ZPPPPPPPP([P(lP*`PPPP-zPP.a3s5g5zP5zPPP5zP7t5zP5zP7xPP8OP8d<uPPPP<yPPPP<y?kPPP?qBSP<yPDgPPPPF`<yPPPPPHX<yPPKYLVPPPPLZMsPM{N|PLV<y<y!$^!'X!+z!+z!/ZPPP!/b!2W<yPPPPPPPPPP!4}P!6`PP<y!7mP<yP<y<y<y<yP<y!:[PP!=TP!?x!@Q!@U!@UP!=QP!@Y!@YP!B}P!CR<y<y!CX!E{5zP5zP5z5zP!GO5z5z!IU5z!Ki5z!Mi5z5z!NV#!]#!]#!a#!]#!iP#!]P5z##e5z#$y5z5z-zPPP#&cPP#&{#&{P#&{P#'b#&{PP#'hP#'_P#'_#'zMw#'_#(i#(o#(r([#(u([P#(|#(|#(|P([P([P([P([PP([P#)S#)VP#)V([P#)ZP#)^P([P([P([P([P([P([([#)d#)n#)t#)z#*Y#*`#*f#*p#*v#+V#+]#+k#+q#+w#,V#,l#.[#.j#.p#.v#.|#/S#/^#/d#/j#/t#0W#0^PPPPPPPP#0dPP#1W#4`PP#5v#5}#6VPP#;X#=l#Ch#Ck#Cn#Cy#C|PP#DP#DT#Dr#Ei#Em#FRPP#FV#F]#FaP#Fd#Fh#Fk#GZ#Gq#Gv#Gy#G|#HS#HV#HZ#H_mhOSj}!n$Z%b%e%f%h*m*r/d/gQ$hmQ$opQ%YyS&U!b+^Q&j!jS(j#y(oQ)e$iQ)r$qQ*^%SQ+d&]S+i&c+kQ+{&kQ-h(qQ/R*_Y0W+m+n+o+p+qS2p.v2rU3x0X0Z0^U5b2u2v2wS6W3z3}S6|5c5dQ7h6YR7y7O$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8h!j'd#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QQ(z$QQ)j$kQ*`%VQ*g%_Q,V9kQ.T)_Q.`)kQ/Z*eQ2Z.ZQ3V/SQ4X9mQ4}2[R8s9lpeOSjy}!n$Z%X%b%e%f%h*m*r/d/gR*b%Z&WVOSTjkn}!S!W!k!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%y&R&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;P;Q[!cRU!]!`%w&VQ$alQ$gmS$lp$qv$vrs!r!u$X$t&_&s&v)v)w)x*k+W+f,Q,S/l0iQ%OwQ&g!iQ&i!jS(^#v(hS)d$h$iQ)h$kQ)u$sQ*X%QQ*]%SS+z&j&kQ-T(_Q.X)eQ._)kQ.a)lQ.d)pQ.|*YS/Q*^*_Q0e+{Q1_-PQ2Y.ZQ2^.^Q2c.fQ3U/RQ4d1`Q4|2[Q5P2`Q6p4{R7p6q!Y$em!j$g$h$i&T&i&j&k(i)d)e+Z+h+z+{-a.X/}0T0Y0e1q3w3|6U7f8VQ)]$aQ)}${Q*Q$|Q*[%SQ.h)uQ.{*XU/P*]*^*_Q3P.|S3T/Q/RQ5]2oQ5o3US6z5^5aS7w6{6}Q8_7xR8n8`W#|a$c(w:}S${t%XQ$|uQ$}vR){$y$o#{a!w!y#d#v#x$R$S$W&f'|(V(X(Y(a(e(u(v)Y)[)_)|*P+w,]-W-Y-s-}.P.m.p.x.z1^1g1o1u1|2P2T2f2|3O4g4p4x5f5k6u7R7|9Z9i9n9o9p9q9r9s9t9u9v9{9|9}:O:P:Q:R:S:T:W:X:Y:]:^:_:};U;V;W;Y;[T'}#s(OX({$Q9k9l9mU&Y!b$u+aQ'T!{Q)o$nQ.q*RQ1v-pR5X2k&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;Q$]#aZ!_!o$_%v%|&x'P'V'W'X'Y'Z'[']'^'_'`'a'c'f'j't)n+P+[+e+|,[,b,e,g,u-t/s/v0f0p0t0u0v0w0x0y0z0{0|0}1O1P1Q1T1Y1z2W3o3r4S4V4W4]4^5Z5}6Q6^6b6c7b7s8S8f8r9U:pT!XQ!Y&_cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QQ&W!bR/y+^Y&Q!b&U&]+^+dS(i#y(oS+h&c+kS-a(j(qQ-b(kQ-i(rQ.s*TU0T+i+m+nU0Y+o+p+qS0_+r2tQ1q-hQ1s-jQ1t-kS2o.v2rU3w0W0X0ZQ3{0[Q3|0^S5^2p2wS5a2u2vU6U3x3z3}Q6Z4OS6{5b5cQ6}5dS7f6W6YS7x6|7OQ8V7hQ8`7yQ;X;]R;Z;^lhOSj}!n$Z%b%e%f%h*m*r/d/gQ%j!QS&w!v9YQ)b$fQ*V%OQ*W%PQ+x&hS,Z&|9xS-u)S:UQ.V)cQ.u*UQ/k*tQ/m*uQ/u+XQ0]+oQ0c+yS1{-v:ZQ2U.WS2X.Y:[Q3n/wQ3q0OQ4Q0dQ4z2VQ6O3pQ6S3vQ6[4RQ7`5|Q7c6TQ8R7dQ8e8TR8q8g$W#`Z!_!o%v%|&x'P'V'W'X'Y'Z'[']'^'_'`'a'c'f'j't)n+P+[+e+|,[,b,e,u-t/s/v0f0p0t0u0v0w0x0y0z0{0|0}1O1P1Q1T1Y1z2W3o3r4S4V4W4]4^5Z5}6Q6^6b6c7b7s8S8f8r9U:pW(t#z&{1S8jT)W$_,g$W#_Z!_!o%v%|&x'P'V'W'X'Y'Z'[']'^'_'`'a'c'f'j't)n+P+[+e+|,[,b,e,u-t/s/v0f0p0t0u0v0w0x0y0z0{0|0}1O1P1Q1T1Y1z2W3o3r4S4V4W4]4^5Z5}6Q6^6b6c7b7s8S8f8r9U:pQ'e#`S)V$_,gR-w)W&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QQ%e{Q%f|Q%h!OQ%i!PR/c*pQ&d!iQ)X$aQ+u&gS-|)])uS0`+s+tW2O-y-z-{.hS4P0a0bU4w2Q2R2SU6n4v5T5UQ7o6oR8Z7rT+j&c+kS+h&c+kU0T+i+m+nU0Y+o+p+qS0_+r2tS2o.v2rU3w0W0X0ZQ3{0[Q3|0^S5^2p2wS5a2u2vU6U3x3z3}Q6Z4OS6{5b5cQ6}5dS7f6W6YS7x6|7OQ8V7hR8`7yS+j&c+kT2q.v2rS&q!q/aQ-S(^Q-_(iS0S+h2oQ1d-TS1l-`-iU3y0Y0_5aQ4c1_S4n1r1tU6X3{3|6}Q6f4dQ6m4qR7i6ZQ!xXS&p!q/aQ)T$YQ)`$dQ)f$jQ,O&qQ-R(^Q-^(iQ-c(lQ.U)aQ.}*ZS0R+h2oS1c-S-TS1k-_-iQ1n-bQ1p-dQ3R/OW3u0S0Y0_5aQ4b1_Q4f1dS4j1l1tQ4o1sQ5m3SW6V3y3{3|6}S6e4c4dS6i4k:`Q6k4nQ6x5[Q7V5nS7g6X6ZQ7k6fS7l6j:aQ7n6mQ7u6yQ8O7WQ8W7iS8Y7m:bQ8]7vQ8l8^Q8x8mQ9P8yQ:i:dQ:t:nQ:u:oQ:y;XR:{;Z$rWORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8hS!xn!k!j:c#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QR:i;P$rXORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8hQ$Yb!Y$dm!j$g$h$i&T&i&j&k(i)d)e+Z+h+z+{-a.X/}0T0Y0e1q3w3|6U7f8VS$jn!kQ)a$eQ*Z%SW/O*[*]*^*_U3S/P/Q/RQ5[2oS5n3T3UU6y5]5^5aQ7W5oU7v6z6{6}S8^7w7xS8m8_8`Q8y8n!j:d#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QQ:n;OR:o;P$f]OSTjk}!S!W!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%b%d%e%f%h%l%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8hY!hRU!]!`%wv$vrs!r!u$X$t&_&s&v)v)w)x*k+W+f,Q,S/l0iQ*h%_!h:e#]#k'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QR:h&VS&Z!b$uR/{+a$p[ORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8h!j'd#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QR*g%_$roORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8hQ'T!{!k:f#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;Q!h#VZ!_$_%v%|&x'P'^'_'`'a'f'j)n+P+e+|,[,b,u-t0f0p1Q1z2W3r4S4V6Q7b8S8f8r9U!R9b'c't+[,g/s/v0t0|0}1O1P1T1Y3o4W4]4^5Z5}6^6b6c7s:p!d#XZ!_$_%v%|&x'P'`'a'f'j)n+P+e+|,[,b,u-t0f0p1Q1z2W3r4S4V6Q7b8S8f8r9U}9d'c't+[,g/s/v0t1O1P1T1Y3o4W4]4^5Z5}6^6b6c7s:p!`#]Z!_$_%v%|&x'P'f'j)n+P+e+|,[,b,u-t0f0p1Q1z2W3r4S4V6Q7b8S8f8r9Un(Y#t&})R,}-V-l-m0n1y4a4r:j:v:w:xx;Q'c't+[,g/s/v0t1T1Y3o4W4]4^5Z5}6^6b6c7s:p!d;U&y'h(](c+t,Y,r-Z-x-{.l.n0b0m1e1i2S2h2j2z4U4h4l4t4y5U5i6]6h6l7T:z:|Y;V8i8v8}9Q9SZ;W1R4[6_7j8X&^cORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QS#l`#mR1V,j&e_ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,j,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QS#g^#nT'm#i'qT#h^#nT'o#i'q&e`ORSTU`jk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#]#b#e#k#m$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&V&^&e&o&|'Q'v(Q)S)Z*i*m*r+R+V+Y+v+},`,f,j,k-q-v.O.Y.y/[/]/^/`/d/g/i/x0Q0g0q1U2e2m2}3b3d3e3m3t5j5x6R6v7e8U8h9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;QT#l`#mQ#o`R'x#m$rbORSTUjk}!S!W!]!`!n!v!z!|#P#Q#R#S#T#U#V#W#X#Y#Z#b#e$Z$m%Z%^%_%b%d%e%f%h%l%w%y&R&^&e&o&|'Q(Q)S)Z*i*m*r+R+v+},`,f-q-v.O.Y.y/[/]/^/`/d/g/i0Q0g0q2e2}3b3d3e3t5j5x6R7e8U8h!k;O#]#k&V'v+V+Y,k/x1U2m3m6v9T9V9Y9[9]9^9_9`9a9b9c9d9e9f9g9j9w9x9z:U:V:Z:[;Q#RdOSUj}!S!W!n!|#k$Z%Z%^%_%b%d%e%f%h%l&R&e'v)Z*i*m*r+v,k-q.O.y/[/]/^/`/d/g/i1U2e2}3b3d3e5j5xv#za!y$R$S$W(V(X(Y(a(u(v,]-s1^1u:};U;V;W#Q&{!w#d#v#x&f'|(e)Y)[)_)|*P+w-W-Y-}.P.m.p.x.z1g1o1|2P2T2f2|3O4g4p4x5f5k6u7R7|9n9q9t9{:O:R:W:];Y;[Q)P$UQ,v(Rb1S9i9p9s9v9}:Q:T:Y:_c8j9Z9o9r9u9|:P:S:X:^v#wa!y$R$S$W(V(X(Y(a(u(v,]-s1^1u:};U;V;WS(l#y(oQ)Q$VQ-d(m#Q:k!w#d#v#x&f'|(e)Y)[)_)|*P+w-W-Y-}.P.m.p.x.z1g1o1|2P2T2f2|3O4g4p4x5f5k6u7R7|9n9q9t9{:O:R:W:];Y;[b:l9Z9o9r9u9|:P:S:X:^b:m9i9p9s9v9}:Q:T:Y:_Q:q;RQ:r;SR:s;Tv#za!y$R$S$W(V(X(Y(a(u(v,]-s1^1u:};U;V;W#Q&{!w#d#v#x&f'|(e)Y)[)_)|*P+w-W-Y-}.P.m.p.x.z1g1o1|2P2T2f2|3O4g4p4x5f5k6u7R7|9n9q9t9{:O:R:W:];Y;[b1S9i9p9s9v9}:Q:T:Y:_c8j9Z9o9r9u9|:P:S:X:^lfOSj}!n$Z%b%e%f%h*m*r/d/gQ(d#xQ*{%oQ*|%qR1f-W$n#{a!w!y#d#v#x$R$S$W&f'|(V(X(Y(a(e(u(v)Y)[)_)|*P+w,]-W-Y-s-}.P.m.p.x.z1^1g1o1u1|2P2T2f2|3O4g4p4x5f5k6u7R7|9Z9i9n9o9p9q9r9s9t9u9v9{9|9}:O:P:Q:R:S:T:W:X:Y:]:^:_:};U;V;W;Y;[Q*O$|Q.o*QQ2i.nR5W2jT(n#y(oS(n#y(oT2q.v2rQ)`$dQ-c(lQ.U)aQ.}*ZQ3R/OQ5m3SQ6x5[Q7V5nQ7u6yQ8O7WQ8]7vQ8l8^Q8x8mR9P8yn(V#t&})R,}-V-l-m0n1y4a4r:j:v:w:x!d9{&y'h(](c+t,Y,r-Z-x-{.l.n0b0m1e1i2S2h2j2z4U4h4l4t4y5U5i6]6h6l7T:z:|Y9|8i8v8}9Q9SZ9}1R4[6_7j8Xp(X#t&})R,{,}-V-l-m0n1y4a4r:j:v:w:x!f:O&y'h(](c+t,Y,r-Z-x-{.l.n0b0k0m1e1i2S2h2j2z4U4h4l4t4y5U5i6]6h6l7T:z:|[:P8i8v8{8}9Q9S]:Q1R4[6_6`7j8XpeOSjy}!n$Z%X%b%e%f%h*m*r/d/gQ%UxR*i%_peOSjy}!n$Z%X%b%e%f%h*m*r/d/gR%UxQ*S$}R.k){qeOSjy}!n$Z%X%b%e%f%h*m*r/d/gQ.w*XS2{.{.|W5e2x2y2z3PU7Q5g5h5iU7z7P7S7TQ8a7{R8o8bQ%]yR*c%XR3Y/UR7Y5pS$lp$qR.a)lQ%bzR*m%cR*s%iT/e*r/gR*w%jQ*v%jR/n*wQjOQ!nST$^j!nQ(O#sR,s(OQ!YQR%t!YQ!^RU%z!^%{+SQ%{!_R+S%|Q+_&WR/z+_Q,^&}R0o,^Q,a'PS0r,a0sR0s,bQ+k&cR0U+kS!eR$tU&`!e&a+TQ&a!fR+T%}Q+b&ZR/|+bQ&t!sQ,P&rU,T&t,P0jR0j,UQ'q#iR,l'qQ#m`R'w#mQ#cZU'g#c+O9hQ+O9UR9h'tQ-Q(^W1a-Q1b4e6gU1b-R-S-TS4e1c1dR6g4f$Z(T#t&y&}'h(](c(|(})R+t,W,X,Y,r,{,|,}-V-Z-l-m-x-{.l.n0b0k0l0m0n1R1e1i1y2S2h2j2z4U4Y4Z4[4a4h4l4r4t4y5U5i6]6_6`6a6h6l7T7j8X8i8t8u8v8{8|8}9Q9S:j:v:w:x:z:|Q-X(cU1h-X1j4iQ1j-ZR4i1iQ(o#yR-f(oQ(x#}R-o(xQ1}-xR4u1}Q)y$wR.j)yQ2l.qS5Y2l6wR6w5ZQ*U%OR.t*UQ2r.vR5_2rQ/T*`S3W/T5qR5q3YQ.[)hW2].[2_5O6rQ2_._Q5O2^R6r5PQ)m$lR.b)mQ/g*rR3h/gWiOSj!nQ%g}Q)U$ZQ*l%bQ*n%eQ*o%fQ*q%hQ/b*mS/e*r/gR3g/dQ$]gQ%k!RQ%n!TQ%p!UQ%r!VQ)t$rQ)z$xQ*b%]Q*y%mQ-e(nS/W*c*fQ/o*xQ/p*{Q/q*|S0P+h2oQ2b.eQ2g.lQ3Q.}Q3[/YQ3f/cY3s0R0S0Y0_5aQ5S2dQ5V2hQ5l3RQ5r3Z[6P3r3u3y3{3|6}Q6s5QQ7U5mQ7Z5sW7a6Q6V6X6ZQ7q6tQ7t6xQ7}7VU8Q7b7g7iQ8[7uQ8c8OS8d8S8WQ8k8]Q8p8fQ8w8lQ8z8rQ9O8xR9R9PQ$fmQ&h!jU)c$g$h$iQ+X&TU+y&i&j&kQ-](iS.W)d)eQ/w+ZQ0O+hS0d+z+{Q1m-aQ2V.XQ3p/}S3v0T0YQ4R0eQ4m1qS6T3w3|Q7d6UQ8T7fR8g8VS#ua:}R)^$cU#}a$c:}R-n(wQ#taS&y!w)_Q&}!yQ'h#dQ(]#vQ(c#xQ(|$RQ(}$SQ)R$WQ+t&fQ,W9nQ,X9qQ,Y9tQ,r'|Q,{(VQ,|(XQ,}(YQ-V(aQ-Z(eQ-l(uQ-m(vd-x)Y-}.x2P2|4x5f6u7R7|Q-{)[Q.l)|Q.n*PQ0b+wQ0k9{Q0l:OQ0m:RQ0n,]Q1R9iQ1e-WQ1i-YQ1y-sQ2S.PQ2h.mQ2j.pQ2z.zQ4U:WQ4Y9pQ4Z9sQ4[9vQ4a1^Q4h1gQ4l1oQ4r1uQ4t1|Q4y2TQ5U2fQ5i3OQ6]:]Q6_:TQ6`9}Q6a:QQ6h4gQ6l4pQ7T5kQ7j:YQ8X:_Q8i9ZQ8t9oQ8u9rQ8v9uQ8{9|Q8|:PQ8}:SQ9Q:XQ9S:^Q:j:}Q:v;UQ:w;VQ:x;WQ:z;YR:|;[lgOSj}!n$Z%b%e%f%h*m*r/d/gS!pU%dQ%m!SQ%s!WQ'U!|Q'u#kS*f%Z%^Q*j%_Q*x%lQ+U&RQ+s&eQ,p'vQ-z)ZQ/_*iQ0a+vQ1X,kQ1w-qQ2R.OQ2y.yQ3^/[Q3_/]Q3a/^Q3c/`Q3j/iQ4_1UQ5T2eQ5h2}Q5w3bQ5y3dQ5z3eQ7S5jR7]5x!vZOSUj}!S!n!|$Z%Z%^%_%b%d%e%f%h%l&R&e)Z*i*m*r+v-q.O.y/[/]/^/`/d/g/i2e2}3b3d3e5j5xQ!_RQ!oTQ$_kS%v!]%yQ%|!`Q&x!vQ'P!zQ'V#PQ'W#QQ'X#RQ'Y#SQ'Z#TQ'[#UQ']#VQ'^#WQ'_#XQ'`#YQ'a#ZQ'c#]Q'f#bQ'j#eW't#k'v,k1UQ)n$mS+P%w+RS+[&V/xQ+e&^Q+|&oQ,[&|Q,b'QQ,e9TQ,g9VQ,u(QQ-t)SQ/s+VQ/v+YQ0f+}Q0p,`Q0t9YQ0u9[Q0v9]Q0w9^Q0x9_Q0y9`Q0z9aQ0{9bQ0|9cQ0}9dQ1O9eQ1P9fQ1Q,fQ1T9jQ1Y9gQ1z-vQ2W.YQ3o9wQ3r0QQ4S0gQ4V0qQ4W9xQ4]9zQ4^:UQ5Z2mQ5}3mQ6Q3tQ6^:VQ6b:ZQ6c:[Q7b6RQ7s6vQ8S7eQ8f8UQ8r8hQ9U!WR:p;QR!aRR&X!bS&T!b+^S+Z&U&]R/}+dR'O!yR'R!zT!tU$XS!sU$XU$wrs*kS&r!r!uQ,R&sQ,U&vQ.i)xS0h,Q,SR4T0i`!dR!]!`$t%w&_)v+fh!qUrs!r!u$X&s&v)x,Q,S0iQ/a*kQ/t+WQ3l/lT:g&V)wT!gR$tS!fR$tS%x!]&_S%}!`)vS+Q%w+fT+]&V)wT&[!b$uQ#i^R'z#nT'p#i'qR1W,jT(`#v(hR(f#xQ-y)YQ2Q-}Q2x.xQ4v2PQ5g2|Q6o4xQ7P5fQ7r6uQ7{7RR8b7|lhOSj}!n$Z%b%e%f%h*m*r/d/gQ%[yR*b%XV$xrs*kR.r*RR*a%VQ$ppR)s$qR)i$kT%`z%cT%az%cT/f*r/g",nodeNames:"\u26a0 ArithOp ArithOp InterpolationStart extends LineComment BlockComment Script ExportDeclaration export Star as VariableName String from ; default FunctionDeclaration async function VariableDefinition TypeParamList TypeDefinition ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Interpolation null super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression await yield delete LogicOp BitOp ParenthesizedExpression ClassExpression class extends ClassBody MethodDeclaration Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression PrivatePropertyName BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement",maxTerm:332,context:td,nodeProps:[["closedBy",3,"InterpolationEnd",40,"]",51,"}",66,")",132,"JSXSelfCloseEndTag JSXEndTag",146,"JSXEndTag"],["group",-26,8,15,17,58,184,188,191,192,194,197,200,211,213,219,221,223,225,228,234,240,242,244,246,248,250,251,"Statement",-30,12,13,24,27,28,41,43,44,45,47,52,60,68,74,75,91,92,101,103,119,122,124,125,126,127,129,130,148,149,151,"Expression",-22,23,25,29,32,34,152,154,156,157,159,160,161,163,164,165,167,168,169,178,180,182,183,"Type",-3,79,85,90,"ClassItem"],["openedBy",30,"InterpolationStart",46,"[",50,"{",65,"(",131,"JSXStartTag",141,"JSXStartTag JSXStartCloseTag"]],propSources:[IC],skippedNodes:[0,5,6],repeatNodeCount:28,tokenData:"!C}~R!`OX%TXY%cYZ'RZ[%c[]%T]^'R^p%Tpq%cqr'crs(kst0htu2`uv4pvw5ewx6cxy<yyz=Zz{=k{|>k|}?O}!O>k!O!P?`!P!QCl!Q!R!0[!R![!1q![!]!7s!]!^!8V!^!_!8g!_!`!9d!`!a!:[!a!b!<R!b!c%T!c!}2`!}#O!=d#O#P%T#P#Q!=t#Q#R!>U#R#S2`#S#T!>i#T#o2`#o#p!>y#p#q!?O#q#r!?f#r#s!?x#s$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$I|2`$I|$I}!Bq$I}$JO!Bq$JO$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`W%YR$UWO!^%T!_#o%T#p~%T7Z%jg$UW'Y7ROX%TXY%cYZ%TZ[%c[p%Tpq%cq!^%T!_#o%T#p$f%T$f$g%c$g#BY%T#BY#BZ%c#BZ$IS%T$IS$I_%c$I_$JT%T$JT$JU%c$JU$KV%T$KV$KW%c$KW&FU%T&FU&FV%c&FV?HT%T?HT?HU%c?HU~%T7Z'YR$UW'Z7RO!^%T!_#o%T#p~%T$T'jS$UW!j#{O!^%T!_!`'v!`#o%T#p~%T$O'}S#e#v$UWO!^%T!_!`(Z!`#o%T#p~%T$O(bR#e#v$UWO!^%T!_#o%T#p~%T'u(rZ$UW]!ROY(kYZ)eZr(krs*rs!^(k!^!_+U!_#O(k#O#P-b#P#o(k#o#p+U#p~(k&r)jV$UWOr)ers*Ps!^)e!^!_*a!_#o)e#o#p*a#p~)e&r*WR$P&j$UWO!^%T!_#o%T#p~%T&j*dROr*ars*ms~*a&j*rO$P&j'u*{R$P&j$UW]!RO!^%T!_#o%T#p~%T'm+ZV]!ROY+UYZ*aZr+Urs+ps#O+U#O#P+w#P~+U'm+wO$P&j]!R'm+zROr+Urs,Ts~+U'm,[U$P&j]!ROY,nZr,nrs-Vs#O,n#O#P-[#P~,n!R,sU]!ROY,nZr,nrs-Vs#O,n#O#P-[#P~,n!R-[O]!R!R-_PO~,n'u-gV$UWOr(krs-|s!^(k!^!_+U!_#o(k#o#p+U#p~(k'u.VZ$P&j$UW]!ROY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x!Z/PZ$UW]!ROY.xYZ%TZr.xrs/rs!^.x!^!_,n!_#O.x#O#P0S#P#o.x#o#p,n#p~.x!Z/yR$UW]!RO!^%T!_#o%T#p~%T!Z0XT$UWO!^.x!^!_,n!_#o.x#o#p,n#p~.x2k0mZ$UWOt%Ttu1`u!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`2k1g]$UW'o2cOt%Ttu1`u!Q%T!Q![1`![!^%T!_!c%T!c!}1`!}#R%T#R#S1`#S#T%T#T#o1`#p$g%T$g~1`7Z2k_$UW#zS']%k'g2bOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`[3q_$UW#zSOt%Ttu3ju}%T}!O3j!O!Q%T!Q![3j![!^%T!_!c%T!c!}3j!}#R%T#R#S3j#S#T%T#T#o3j#p$g%T$g~3j$O4wS#^#v$UWO!^%T!_!`5T!`#o%T#p~%T$O5[R$UW#o#vO!^%T!_#o%T#p~%T6d5lU'x6[$UWOv%Tvw6Ow!^%T!_!`5T!`#o%T#p~%T$O6VS$UW#i#vO!^%T!_!`5T!`#o%T#p~%T'u6jZ$UW]!ROY6cYZ7]Zw6cwx*rx!^6c!^!_8T!_#O6c#O#P:T#P#o6c#o#p8T#p~6c&r7bV$UWOw7]wx*Px!^7]!^!_7w!_#o7]#o#p7w#p~7]&j7zROw7wwx*mx~7w'm8YV]!ROY8TYZ7wZw8Twx+px#O8T#O#P8o#P~8T'm8rROw8Twx8{x~8T'm9SU$P&j]!ROY9fZw9fwx-Vx#O9f#O#P9}#P~9f!R9kU]!ROY9fZw9fwx-Vx#O9f#O#P9}#P~9f!R:QPO~9f'u:YV$UWOw6cwx:ox!^6c!^!_8T!_#o6c#o#p8T#p~6c'u:xZ$P&j$UW]!ROY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k!Z;rZ$UW]!ROY;kYZ%TZw;kwx/rx!^;k!^!_9f!_#O;k#O#P<e#P#o;k#o#p9f#p~;k!Z<jT$UWO!^;k!^!_9f!_#o;k#o#p9f#p~;k%V=QR!d$}$UWO!^%T!_#o%T#p~%TZ=bR!cR$UWO!^%T!_#o%T#p~%T5s=tU'^2s#_#v$UWOz%Tz{>W{!^%T!_!`5T!`#o%T#p~%T$O>_S#[#v$UWO!^%T!_!`5T!`#o%T#p~%T$u>rSj$m$UWO!^%T!_!`5T!`#o%T#p~%T&i?VR!R&a$UWO!^%T!_#o%T#p~%T7Z?gVu6`$UWO!O%T!O!P?|!P!Q%T!Q![@r![!^%T!_#o%T#p~%Ty@RT$UWO!O%T!O!P@b!P!^%T!_#o%T#p~%Ty@iR!Qq$UWO!^%T!_#o%T#p~%Ty@yZ$UWkqO!Q%T!Q![@r![!^%T!_!g%T!g!hAl!h#R%T#R#S@r#S#X%T#X#YAl#Y#o%T#p~%TyAqZ$UWO{%T{|Bd|}%T}!OBd!O!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%TyBiV$UWO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%TyCVV$UWkqO!Q%T!Q![CO![!^%T!_#R%T#R#SCO#S#o%T#p~%T7ZCs`$UW#]#vOYDuYZ%TZzDuz{Jl{!PDu!P!Q!-e!Q!^Du!^!_Fx!_!`!.^!`!a!/]!a!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXD|[$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~DuXEy_$UW}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%TPF}V}POYFxZ!PFx!P!QGd!Q!}Fx!}#OG{#O#PHh#P~FxPGiU}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGdPHOTOYG{Z#OG{#O#PH_#P#QFx#Q~G{PHbQOYG{Z~G{PHkQOYFxZ~FxXHvY$UWOYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~HqXIkV$UWOYHqYZ%TZ!^Hq!^!_G{!_#oHq#o#pG{#p~HqXJVV$UWOYDuYZ%TZ!^Du!^!_Fx!_#oDu#o#pFx#p~Du7ZJs^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q!,R!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7ZKtV$UWOzKoz{LZ{!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZL`X$UWOzKoz{LZ{!PKo!P!QL{!Q!^Ko!^!_M]!_#oKo#o#pM]#p~Ko7ZMSR$UWU7RO!^%T!_#o%T#p~%T7RM`ROzM]z{Mi{~M]7RMlTOzM]z{Mi{!PM]!P!QM{!Q~M]7RNQOU7R7ZNX^$UW}POYJlYZKoZzJlz{NQ{!PJl!P!Q! T!Q!^Jl!^!_!!]!_!}Jl!}#O!'|#O#P!+a#P#oJl#o#p!!]#p~Jl7Z! ^_$UWU7R}PO!^%T!_#Z%T#Z#[Er#[#]%T#]#^Er#^#a%T#a#bEr#b#g%T#g#hEr#h#i%T#i#jEr#j#m%T#m#nEr#n#o%T#p~%T7R!!bY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!&x!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#VY}POY!!]YZM]Zz!!]z{!#Q{!P!!]!P!Q!#u!Q!}!!]!}#O!$`#O#P!&f#P~!!]7R!#|UU7R}P#Z#[Gd#]#^Gd#a#bGd#g#hGd#i#jGd#m#nGd7R!$cWOY!$`YZM]Zz!$`z{!${{#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%OYOY!$`YZM]Zz!$`z{!${{!P!$`!P!Q!%n!Q#O!$`#O#P!&S#P#Q!!]#Q~!$`7R!%sTU7ROYG{Z#OG{#O#PH_#P#QFx#Q~G{7R!&VTOY!$`YZM]Zz!$`z{!${{~!$`7R!&iTOY!!]YZM]Zz!!]z{!#Q{~!!]7R!&}_}POzM]z{Mi{#ZM]#Z#[!&x#[#]M]#]#^!&x#^#aM]#a#b!&x#b#gM]#g#h!&x#h#iM]#i#j!&x#j#mM]#m#n!&x#n~M]7Z!(R[$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!(|^$UWOY!'|YZKoZz!'|z{!(w{!P!'|!P!Q!)x!Q!^!'|!^!_!$`!_#O!'|#O#P!*o#P#QJl#Q#o!'|#o#p!$`#p~!'|7Z!*PY$UWU7ROYHqYZ%TZ!^Hq!^!_G{!_#OHq#O#PIf#P#QDu#Q#oHq#o#pG{#p~Hq7Z!*tX$UWOY!'|YZKoZz!'|z{!(w{!^!'|!^!_!$`!_#o!'|#o#p!$`#p~!'|7Z!+fX$UWOYJlYZKoZzJlz{NQ{!^Jl!^!_!!]!_#oJl#o#p!!]#p~Jl7Z!,Yc$UW}POzKoz{LZ{!^Ko!^!_M]!_#ZKo#Z#[!,R#[#]Ko#]#^!,R#^#aKo#a#b!,R#b#gKo#g#h!,R#h#iKo#i#j!,R#j#mKo#m#n!,R#n#oKo#o#pM]#p~Ko7Z!-lV$UWT7ROY!-eYZ%TZ!^!-e!^!_!.R!_#o!-e#o#p!.R#p~!-e7R!.WQT7ROY!.RZ~!.R$P!.g[$UW#o#v}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Du]!/f[#wS$UW}POYDuYZ%TZ!PDu!P!QEr!Q!^Du!^!_Fx!_!}Du!}#OHq#O#PJQ#P#oDu#o#pFx#p~Duy!0cd$UWkqO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#U%T#U#V!3X#V#X%T#X#YAl#Y#b%T#b#c!2w#c#d!4m#d#l%T#l#m!5{#m#o%T#p~%Ty!1x_$UWkqO!O%T!O!P@r!P!Q%T!Q![!1q![!^%T!_!g%T!g!hAl!h#R%T#R#S!1q#S#X%T#X#YAl#Y#b%T#b#c!2w#c#o%T#p~%Ty!3OR$UWkqO!^%T!_#o%T#p~%Ty!3^W$UWO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#o%T#p~%Ty!3}Y$UWkqO!Q%T!Q!R!3v!R!S!3v!S!^%T!_#R%T#R#S!3v#S#b%T#b#c!2w#c#o%T#p~%Ty!4rV$UWO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#o%T#p~%Ty!5`X$UWkqO!Q%T!Q!Y!5X!Y!^%T!_#R%T#R#S!5X#S#b%T#b#c!2w#c#o%T#p~%Ty!6QZ$UWO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#o%T#p~%Ty!6z]$UWkqO!Q%T!Q![!6s![!^%T!_!c%T!c!i!6s!i#R%T#R#S!6s#S#T%T#T#Z!6s#Z#b%T#b#c!2w#c#o%T#p~%T%w!7|R!]V$UW#m%hO!^%T!_#o%T#p~%T!P!8^R_w$UWO!^%T!_#o%T#p~%T6i!8rR'bd!a0`#x&s'|P!P!Q!8{!^!_!9Q!_!`!9_W!9QO$WW#v!9VP#`#v!_!`!9Y#v!9_O#o#v#v!9dO#a#v%w!9kT!{%o$UWO!^%T!_!`'v!`!a!9z!a#o%T#p~%T$P!:RR#W#w$UWO!^%T!_#o%T#p~%T%w!:gT'a!s#a#v$RS$UWO!^%T!_!`!:v!`!a!;W!a#o%T#p~%T$O!:}R#a#v$UWO!^%T!_#o%T#p~%T$O!;_T#`#v$UWO!^%T!_!`5T!`!a!;n!a#o%T#p~%T$O!;uS#`#v$UWO!^%T!_!`5T!`#o%T#p~%T6i!<YV'p6a$UWO!O%T!O!P!<o!P!^%T!_!a%T!a!b!=P!b#o%T#p~%T)z!<vRv)r$UWO!^%T!_#o%T#p~%T$O!=WS$UW#j#vO!^%T!_!`5T!`#o%T#p~%T7V!=kRx6}$UWO!^%T!_#o%T#p~%TZ!={R!OR$UWO!^%T!_#o%T#p~%T$O!>]S#g#v$UWO!^%T!_!`5T!`#o%T#p~%T$P!>pR$UW'f#wO!^%T!_#o%T#p~%T~!?OO!T~6d!?VT'w6[$UWO!^%T!_!`5T!`#o%T#p#q!=P#q~%T5g!?oR!S5]nQ$UWO!^%T!_#o%T#p~%TX!@PR!kP$UWO!^%T!_#o%T#p~%T7Z!@gr$UW'Y7R#zS']%k'g2bOX%TXY%cYZ%TZ[%c[p%Tpq%cqt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$f%T$f$g%c$g#BY2`#BY#BZ!@Y#BZ$IS2`$IS$I_!@Y$I_$JT2`$JT$JU!@Y$JU$KV2`$KV$KW!@Y$KW&FU2`&FU&FV!@Y&FV?HT2`?HT?HU!@Y?HU~2`7Z!CO_$UW'Z7R#zS']%k'g2bOt%Ttu2`u}%T}!O3j!O!Q%T!Q![2`![!^%T!_!c%T!c!}2`!}#R%T#R#S2`#S#T%T#T#o2`#p$g%T$g~2`",tokenizers:[Br,ey,Hr,0,1,2,3,4,5,6,7,8,9,Op],topRules:{Script:[0,7]},dialects:{jsx:11707,ts:11709},dynamicPrecedences:{149:1,176:1},specialized:[{term:289,get:(r,e)=>function ty(r,e){return"extends"==r&&e.dialectEnabled(1)?4:-1}(r,e)<<1},{term:289,get:r=>_C[r]||-1},{term:299,get:r=>Kl[r]||-1},{term:63,get:r=>Ip[r]||-1}],tokenPrec:11730});class Vn{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){let s=[];return this.decompose(0,e,s,2),i.length&&i.decompose(0,i.length,s,3),this.decompose(t,this.length,s,1),po.from(s,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let i=[];return this.decompose(e,t,i,0),po.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),s=new vr(this),u=new vr(e);for(let g=t,I=t;;){if(s.next(g),u.next(g),g=0,s.lineBreak!=u.lineBreak||s.done!=u.done||s.value!=u.value)return!1;if(I+=s.value.length,s.done||I>=i)return!0}}iter(e=1){return new vr(this,e)}iterRange(e,t=this.length){return new xs(this,e,t)}iterLines(e,t){let i;if(null==e)i=this.iter();else{null==t&&(t=this.lines+1);let s=this.line(e).from;i=this.iterRange(s,Math.max(s,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Sp(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new Oi(e):po.from(Oi.split(e,[])):Vn.empty}}class Oi extends Vn{constructor(e,t=function _p(r){let e=-1;for(let t of r)e+=t.length+1;return e}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,s){for(let u=0;;u++){let g=this.text[u],I=s+g.length;if((t?i:I)>=e)return new Yl(s,I,i,g);s=I+1,i++}}decompose(e,t,i,s){let u=e<=0&&t>=this.length?this:new Oi(gr(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&s){let g=i.pop(),I=hu(u.text,g.text.slice(),0,u.length);if(I.length<=32)i.push(new Oi(I,g.length+u.length));else{let B=I.length>>1;i.push(new Oi(I.slice(0,B)),new Oi(I.slice(B)))}}else i.push(u)}replace(e,t,i){if(!(i instanceof Oi))return super.replace(e,t,i);let s=hu(this.text,hu(i.text,gr(this.text,0,e)),t),u=this.length+i.length-(t-e);return s.length<=32?new Oi(s,u):po.from(Oi.split(s,[]),u)}sliceString(e,t=this.length,i="\n"){let s="";for(let u=0,g=0;u<=t&&g<this.text.length;g++){let I=this.text[g],B=u+I.length;u>e&&g&&(s+=i),e<B&&t>u&&(s+=I.slice(Math.max(0,e-u),t-u)),u=B+1}return s}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],s=-1;for(let u of e)i.push(u),s+=u.length+1,32==i.length&&(t.push(new Oi(i,s)),i=[],s=-1);return s>-1&&t.push(new Oi(i,s)),t}}class po extends Vn{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,s){for(let u=0;;u++){let g=this.children[u],I=s+g.length,B=i+g.lines-1;if((t?B:I)>=e)return g.lineInner(e,t,i,s);s=I+1,i=B+1}}decompose(e,t,i,s){for(let u=0,g=0;g<=t&&u<this.children.length;u++){let I=this.children[u],B=g+I.length;if(e<=B&&t>=g){let ne=s&((g<=e?1:0)|(B>=t?2:0));g>=e&&B<=t&&!ne?i.push(I):I.decompose(e-g,t-g,i,ne)}g=B+1}}replace(e,t,i){if(i.lines<this.lines)for(let s=0,u=0;s<this.children.length;s++){let g=this.children[s],I=u+g.length;if(e>=u&&t<=I){let B=g.replace(e-u,t-u,i),ne=this.lines-g.lines+B.lines;if(B.lines<ne>>4&&B.lines>ne>>6){let fe=this.children.slice();return fe[s]=B,new po(fe,this.length-(t-e)+i.length)}return super.replace(u,I,B)}u=I+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i="\n"){let s="";for(let u=0,g=0;u<this.children.length&&g<=t;u++){let I=this.children[u],B=g+I.length;g>e&&u&&(s+=i),e<B&&t>g&&(s+=I.sliceString(e-g,t-g,i)),g=B+1}return s}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof po))return 0;let i=0,[s,u,g,I]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=t,u+=t){if(s==g||u==I)return i;let B=this.children[s],ne=e.children[u];if(B!=ne)return i+B.scanIdentical(ne,t);i+=B.length+1}}static from(e,t=e.reduce((i,s)=>i+s.length+1,-1)){let i=0;for(let je of e)i+=je.lines;if(i<32){let je=[];for(let ze of e)ze.flatten(je);return new Oi(je,t)}let s=Math.max(32,i>>5),u=s<<1,g=s>>1,I=[],B=0,ne=-1,fe=[];function ye(je){let ze;if(je.lines>u&&je instanceof po)for(let At of je.children)ye(At);else je.lines>g&&(B>g||!B)?(Ne(),I.push(je)):je instanceof Oi&&B&&(ze=fe[fe.length-1])instanceof Oi&&je.lines+ze.lines<=32?(B+=je.lines,ne+=je.length+1,fe[fe.length-1]=new Oi(ze.text.concat(je.text),ze.length+1+je.length)):(B+je.lines>s&&Ne(),B+=je.lines,ne+=je.length+1,fe.push(je))}function Ne(){0!=B&&(I.push(1==fe.length?fe[0]:po.from(fe,ne)),ne=-1,B=fe.length=0)}for(let je of e)ye(je);return Ne(),1==I.length?I[0]:new po(I,t)}}function hu(r,e,t=0,i=1e9){for(let s=0,u=0,g=!0;u<r.length&&s<=i;u++){let I=r[u],B=s+I.length;B>=t&&(B>i&&(I=I.slice(0,i-s)),s<t&&(I=I.slice(t-s)),g?(e[e.length-1]+=I,g=!1):e.push(I)),s=B+1}return e}function gr(r,e,t){return hu(r,[""],e,t)}Vn.empty=new Oi([""],0);class vr{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Oi?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,s=this.nodes[i],u=this.offsets[i],g=u>>1;if(g==(t>0?s instanceof Oi?s.text.length:s.children.length:0)){if(0==i)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&u)==(t>0?0:1)){if(this.offsets[i]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(s instanceof Oi){let B=s.text[g+(t<0?-1:0)];if(this.offsets[i]+=t,B.length>Math.max(0,e))return this.value=0==e?B:t>0?B.slice(e):B.slice(0,B.length-e),this;e-=B.length}else{let B=s.children[g+(t<0?-1:0)];e>B.length?(e-=B.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(B),this.offsets.push(t>0?1:(B instanceof Oi?B.text.length:B.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class xs{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new vr(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*t,this.value=s.length<=i?s:t<0?s.slice(s.length-i):s.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class Sp{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:s}=this.inner.next(e);return t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Vn.prototype[Symbol.iterator]=function(){return this.iter()},vr.prototype[Symbol.iterator]=xs.prototype[Symbol.iterator]=Sp.prototype[Symbol.iterator]=function(){return this});class Yl{constructor(e,t,i,s){this.from=e,this.to=t,this.number=i,this.text=s}get length(){return this.to-this.from}}let Qa="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(r=>r?parseInt(r,36):1);for(let r=1;r<Qa.length;r++)Qa[r]+=Qa[r-1];function mo(r){for(let e=1;e<Qa.length;e+=2)if(Qa[e]>r)return Qa[e-1]<=r;return!1}function iy(r){return r>=127462&&r<=127487}const ry=8205;function zr(r,e,t=!0,i=!0){return(t?ql:SC)(r,e,i)}function ql(r,e,t){if(e==r.length)return e;e&&qs(r.charCodeAt(e))&&Ep(r.charCodeAt(e-1))&&e--;let i=sr(r,e);for(e+=Ur(i);e<r.length;){let s=sr(r,e);if(i==ry||s==ry||t&&mo(s))e+=Ur(s),i=s;else{if(!iy(s))break;{let u=0,g=e-2;for(;g>=0&&iy(sr(r,g));)u++,g-=2;if(u%2==0)break;e+=2}}}return e}function SC(r,e,t){for(;e>0;){let i=ql(r,e-2,t);if(i<e)return i;e--}return 0}function qs(r){return r>=56320&&r<57344}function Ep(r){return r>=55296&&r<56320}function sr(r,e){let t=r.charCodeAt(e);if(!Ep(t)||e+1==r.length)return t;let i=r.charCodeAt(e+1);return qs(i)?i-56320+(t-55296<<10)+65536:t}function Js(r){return r<=65535?String.fromCharCode(r):(r-=65536,String.fromCharCode(55296+(r>>10),56320+(1023&r)))}function Ur(r){return r<65536?1:2}const Jl=/\r\n?|\n/;var ar=function(r){return r[r.Simple=0]="Simple",r[r.TrackDel=1]="TrackDel",r[r.TrackBefore=2]="TrackBefore",r[r.TrackAfter=3]="TrackAfter",r}(ar||(ar={}));class go{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,s=0;t<this.sections.length;){let u=this.sections[t++],g=this.sections[t++];g<0?(e(i,s,u),s+=u):s+=g,i+=u}}iterChangedRanges(e,t=!1){nd(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];s<0?e.push(i,s):e.push(s,i)}return new go(e)}composeDesc(e){return this.empty?e:e.empty?this:du(this,e)}mapDesc(e,t=!1){return e.empty?this:kp(this,e,t)}mapPos(e,t=-1,i=ar.Simple){let s=0,u=0;for(let g=0;g<this.sections.length;){let I=this.sections[g++],B=this.sections[g++],ne=s+I;if(B<0){if(ne>e)return u+(e-s);u+=I}else{if(i!=ar.Simple&&ne>=e&&(i==ar.TrackDel&&s<e&&ne>e||i==ar.TrackBefore&&s<e||i==ar.TrackAfter&&ne>e))return null;if(ne>e||ne==e&&t<0&&!I)return e==s||t<0?u:u+B;u+=B}s=ne}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return u}touchesRange(e,t=e){for(let i=0,s=0;i<this.sections.length&&s<=t;){let I=s+this.sections[i++];if(this.sections[i++]>=0&&s<=t&&I>=e)return!(s<e&&I>t)||"cover";s=I}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],s=this.sections[t++];e+=(e?" ":"")+i+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>"number"!=typeof t))throw new RangeError("Invalid JSON representation of ChangeDesc");return new go(e)}static create(e){return new go(e)}}class Mi extends go{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return nd(this,(t,i,s,u,g)=>e=e.replace(s,s+(i-t),g),!1),e}mapDesc(e,t=!1){return kp(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let s=0,u=0;s<t.length;s+=2){let g=t[s],I=t[s+1];if(I>=0){t[s]=I,t[s+1]=g;let B=s>>1;for(;i.length<B;)i.push(Vn.empty);i.push(g?e.slice(u,u+g):Vn.empty)}u+=g}return new Mi(t,i)}compose(e){return this.empty?e:e.empty?this:du(this,e,!0)}map(e,t=!1){return e.empty?this:kp(this,e,t,!0)}iterChanges(e,t=!1){nd(this,e,t)}get desc(){return go.create(this.sections)}filter(e){let t=[],i=[],s=[],u=new ec(this);e:for(let g=0,I=0;;){let B=g==e.length?1e9:e[g++];for(;I<B||I==B&&0==u.len;){if(u.done)break e;let fe=Math.min(u.len,B-I);Ir(s,fe,-1);let ye=-1==u.ins?-1:0==u.off?u.ins:0;Ir(t,fe,ye),ye>0&&ea(i,t,u.text),u.forward(fe),I+=fe}let ne=e[g++];for(;I<ne;){if(u.done)break e;let fe=Math.min(u.len,ne-I);Ir(t,fe,-1),Ir(s,fe,-1==u.ins?-1:0==u.off?u.ins:0),u.forward(fe),I+=fe}}return{changes:new Mi(t,i),filtered:go.create(s)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],s=this.sections[t+1];e.push(s<0?i:0==s?[i]:[i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let s=[],u=[],g=0,I=null;function B(fe=!1){if(!fe&&!s.length)return;g<t&&Ir(s,t-g,-1);let ye=new Mi(s,u);I=I?I.compose(ye.map(I)):ye,s=[],u=[],g=0}return function ne(fe){if(Array.isArray(fe))for(let ye of fe)ne(ye);else if(fe instanceof Mi){if(fe.length!=t)throw new RangeError(`Mismatched change set length (got ${fe.length}, expected ${t})`);B(),I=I?I.compose(fe.map(I)):fe}else{let{from:ye,to:Ne=ye,insert:je}=fe;if(ye>Ne||ye<0||Ne>t)throw new RangeError(`Invalid change range ${ye} to ${Ne} (in doc of length ${t})`);let ze=je?"string"==typeof je?Vn.of(je.split(i||Jl)):je:Vn.empty,At=ze.length;if(ye==Ne&&0==At)return;ye<g&&B(),ye>g&&Ir(s,ye-g,-1),Ir(s,Ne-ye,At),ea(u,s,ze),g=Ne}}(e),B(!I),I}static empty(e){return new Mi(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let s=0;s<e.length;s++){let u=e[s];if("number"==typeof u)t.push(u,-1);else{if(!Array.isArray(u)||"number"!=typeof u[0]||u.some((g,I)=>I&&"string"!=typeof g))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==u.length)t.push(u[0],0);else{for(;i.length<s;)i.push(Vn.empty);i[s]=Vn.of(u.slice(1)),t.push(u[0],i[s].length)}}}return new Mi(t,i)}static createSet(e,t){return new Mi(e,t)}}function Ir(r,e,t,i=!1){if(0==e&&t<=0)return;let s=r.length-2;s>=0&&t<=0&&t==r[s+1]?r[s]+=e:0==e&&0==r[s]?r[s+1]+=t:i?(r[s]+=e,r[s+1]+=t):r.push(e,t)}function ea(r,e,t){if(0==t.length)return;let i=e.length-2>>1;if(i<r.length)r[r.length-1]=r[r.length-1].append(t);else{for(;r.length<i;)r.push(Vn.empty);r.push(t)}}function nd(r,e,t){let i=r.inserted;for(let s=0,u=0,g=0;g<r.sections.length;){let I=r.sections[g++],B=r.sections[g++];if(B<0)s+=I,u+=I;else{let ne=s,fe=u,ye=Vn.empty;for(;ne+=I,fe+=B,B&&i&&(ye=ye.append(i[g-2>>1])),!(t||g==r.sections.length||r.sections[g+1]<0);)I=r.sections[g++],B=r.sections[g++];e(s,ne,u,fe,ye),s=ne,u=fe}}}function kp(r,e,t,i=!1){let s=[],u=i?[]:null,g=new ec(r),I=new ec(e);for(let B=0,ne=0;;)if(-1==g.ins)B+=g.len,g.next();else if(-1==I.ins&&ne<B){let fe=Math.min(I.len,B-ne);I.forward(fe),Ir(s,fe,-1),ne+=fe}else if(I.ins>=0&&(g.done||ne<B||ne==B&&(I.len<g.len||I.len==g.len&&!t))){for(Ir(s,I.ins,-1);B>ne&&!g.done&&B+g.len<ne+I.len;)B+=g.len,g.next();ne+=I.len,I.next()}else{if(!(g.ins>=0)){if(g.done&&I.done)return u?Mi.createSet(s,u):go.create(s);throw new Error("Mismatched change set lengths")}{let fe=0,ye=B+g.len;for(;;)if(I.ins>=0&&ne>B&&ne+I.len<ye)fe+=I.ins,ne+=I.len,I.next();else{if(!(-1==I.ins&&ne<ye))break;{let Ne=Math.min(I.len,ye-ne);fe+=Ne,I.forward(Ne),ne+=Ne}}Ir(s,fe,g.ins),u&&ea(u,s,g.text),B=ye,g.next()}}}function du(r,e,t=!1){let i=[],s=t?[]:null,u=new ec(r),g=new ec(e);for(let I=!1;;){if(u.done&&g.done)return s?Mi.createSet(i,s):go.create(i);if(0==u.ins)Ir(i,u.len,0,I),u.next();else if(0!=g.len||g.done){if(u.done||g.done)throw new Error("Mismatched change set lengths");{let B=Math.min(u.len2,g.len),ne=i.length;if(-1==u.ins){let fe=-1==g.ins?-1:g.off?0:g.ins;Ir(i,B,fe,I),s&&fe&&ea(s,i,g.text)}else-1==g.ins?(Ir(i,u.off?0:u.len,B,I),s&&ea(s,i,u.textBit(B))):(Ir(i,u.off?0:u.len,g.off?0:g.ins,I),s&&!g.off&&ea(s,i,g.text));I=(u.ins>B||g.ins>=0&&g.len>B)&&(I||i.length>ne),u.forward2(B),g.forward(B)}}else Ir(i,0,g.ins,I),s&&ea(s,i,g.text),g.next()}}class ec{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Vn.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?Vn.empty:t[i].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class ta{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let e=3&this.flags;return 3==e?null:e}get goalColumn(){let e=this.flags>>5;return 33554431==e?void 0:e}map(e,t=-1){let i,s;return this.empty?i=s=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),i==this.from&&s==this.to?this:new ta(i,s,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return _t.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return _t.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return _t.range(e.anchor,e.head)}static create(e,t,i){return new ta(e,t,i)}}class _t{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:_t.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new _t([this.main],0)}addRange(e,t=!0){return _t.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,_t.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new _t(e.ranges.map(t=>ta.fromJSON(t)),e.main)}static single(e,t=e){return new _t([_t.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let i=0,s=0;s<e.length;s++){let u=e[s];if(u.empty?u.from<=i:u.from<i)return _t.normalized(e.slice(),t);i=u.to}return new _t(e,t)}static cursor(e,t=0,i,s){return ta.create(e,e,(0==t?0:t<0?4:8)|(null==i?3:Math.min(2,i))|(s??33554431)<<5)}static range(e,t,i){let s=(i??33554431)<<5;return t<e?ta.create(t,e,24|s):ta.create(e,t,s|(t>e?4:0))}static normalized(e,t=0){let i=e[t];e.sort((s,u)=>s.from-u.from),t=e.indexOf(i);for(let s=1;s<e.length;s++){let u=e[s],g=e[s-1];if(u.empty?u.from<=g.to:u.from<g.to){let I=g.from,B=Math.max(u.to,g.to);s<=t&&t--,e.splice(--s,2,u.anchor>u.head?_t.range(B,I):_t.range(I,B))}}return new _t(e,t)}}function As(r,e){for(let t of r.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let $o=0;class sn{constructor(e,t,i,s,u){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=s,this.extensions=u,this.id=$o++,this.default=e([])}static define(e={}){return new sn(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:Ha),!!e.static,e.enables)}of(e){return new tc([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new tc(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new tc(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function Ha(r,e){return r==e||r.length==e.length&&r.every((t,i)=>t===e[i])}class tc{constructor(e,t,i,s){this.dependencies=e,this.facet=t,this.type=i,this.value=s,this.id=$o++}dynamicSlot(e){var t;let i=this.value,s=this.facet.compareInput,u=this.id,g=e[u]>>1,I=2==this.type,B=!1,ne=!1,fe=[];for(let ye of this.dependencies)"doc"==ye?B=!0:"selection"==ye?ne=!0:1&(null!==(t=e[ye.id])&&void 0!==t?t:1)||fe.push(e[ye.id]);return{create:ye=>(ye.values[g]=i(ye),1),update(ye,Ne){if(B&&Ne.docChanged||ne&&(Ne.docChanged||Ne.selection)||Ua(ye,fe)){let je=i(ye);if(I?!za(je,ye.values[g],s):!s(je,ye.values[g]))return ye.values[g]=je,1}return 0},reconfigure:(ye,Ne)=>{let je=i(ye),ze=Ne.config.address[u];if(null!=ze){let At=rd(Ne,ze);if(this.dependencies.every(kt=>kt instanceof sn?Ne.facet(kt)===ye.facet(kt):!(kt instanceof Dn)||Ne.field(kt,!1)==ye.field(kt,!1))||(I?za(je,At,s):s(je,At)))return ye.values[g]=At,0}return ye.values[g]=je,1}}}}function za(r,e,t){if(r.length!=e.length)return!1;for(let i=0;i<r.length;i++)if(!t(r[i],e[i]))return!1;return!0}function Ua(r,e){let t=!1;for(let i of e)1&nc(r,i)&&(t=!0);return t}function Tp(r,e,t){let i=t.map(B=>r[B.id]),s=t.map(B=>B.type),u=i.filter(B=>!(1&B)),g=r[e.id]>>1;function I(B){let ne=[];for(let fe=0;fe<i.length;fe++){let ye=rd(B,i[fe]);if(2==s[fe])for(let Ne of ye)ne.push(Ne);else ne.push(ye)}return e.combine(ne)}return{create(B){for(let ne of i)nc(B,ne);return B.values[g]=I(B),1},update(B,ne){if(!Ua(B,u))return 0;let fe=I(B);return e.compare(fe,B.values[g])?0:(B.values[g]=fe,1)},reconfigure(B,ne){let fe=Ua(B,i),ye=ne.config.facets[e.id],Ne=ne.facet(e);if(ye&&!fe&&Ha(t,ye))return B.values[g]=Ne,0;let je=I(B);return e.compare(je,Ne)?(B.values[g]=Ne,0):(B.values[g]=je,1)}}}const fu=sn.define({static:!0});class Dn{constructor(e,t,i,s,u){this.id=e,this.createF=t,this.updateF=i,this.compareF=s,this.spec=u,this.provides=void 0}static define(e){let t=new Dn($o++,e.create,e.update,e.compare||((i,s)=>i===s),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(fu).find(i=>i.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,s)=>{let u=i.values[t],g=this.updateF(u,s);return this.compareF(u,g)?0:(i.values[t]=g,1)},reconfigure:(i,s)=>null!=s.config.address[this.id]?(i.values[t]=s.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,fu.of({field:this,create:e})]}get extension(){return this}}function es(r){return e=>new oy(e,r)}const ia={highest:es(0),high:es(1),default:es(2),low:es(3),lowest:es(4)};class oy{constructor(e,t){this.inner=e,this.prec=t}}class pu{of(e){return new Pp(this,e)}reconfigure(e){return pu.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Pp{constructor(e,t){this.compartment=e,this.inner=t}}class id{constructor(e,t,i,s,u,g){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=s,this.staticValues=u,this.facets=g,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let s=[],u=Object.create(null),g=new Map;for(let Ne of function sy(r,e,t){let i=[[],[],[],[],[]],s=new Map;return function u(g,I){let B=s.get(g);if(null!=B){if(B<=I)return;let ne=i[B].indexOf(g);ne>-1&&i[B].splice(ne,1),g instanceof Pp&&t.delete(g.compartment)}if(s.set(g,I),Array.isArray(g))for(let ne of g)u(ne,I);else if(g instanceof Pp){if(t.has(g.compartment))throw new RangeError("Duplicate use of compartment in extensions");let ne=e.get(g.compartment)||g.inner;t.set(g.compartment,ne),u(ne,I)}else if(g instanceof oy)u(g.inner,g.prec);else if(g instanceof Dn)i[I].push(g),g.provides&&u(g.provides,I);else if(g instanceof tc)i[I].push(g),g.facet.extensions&&u(g.facet.extensions,I);else{let ne=g.extension;if(!ne)throw new Error(`Unrecognized extension value in extension set (${g}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);u(ne,I)}}(r,2),i.reduce((g,I)=>g.concat(I))}(e,t,g))Ne instanceof Dn?s.push(Ne):(u[Ne.facet.id]||(u[Ne.facet.id]=[])).push(Ne);let I=Object.create(null),B=[],ne=[];for(let Ne of s)I[Ne.id]=ne.length<<1,ne.push(je=>Ne.slot(je));let fe=i?.config.facets;for(let Ne in u){let je=u[Ne],ze=je[0].facet,At=fe&&fe[Ne]||[];if(je.every(kt=>0==kt.type))if(I[ze.id]=B.length<<1|1,Ha(At,je))B.push(i.facet(ze));else{let kt=ze.combine(je.map(Nt=>Nt.value));B.push(i&&ze.compare(kt,i.facet(ze))?i.facet(ze):kt)}else{for(let kt of je)0==kt.type?(I[kt.id]=B.length<<1|1,B.push(kt.value)):(I[kt.id]=ne.length<<1,ne.push(Nt=>kt.dynamicSlot(Nt)));I[ze.id]=ne.length<<1,ne.push(kt=>Tp(kt,ze,je))}}let ye=ne.map(Ne=>Ne(I));return new id(e,g,ye,I,B,u)}}function nc(r,e){if(1&e)return 2;let t=e>>1,i=r.status[t];if(4==i)throw new Error("Cyclic dependency between fields and/or facets");if(2&i)return i;r.status[t]=4;let s=r.computeSlot(r,r.config.dynamicSlots[t]);return r.status[t]=2|s}function rd(r,e){return 1&e?r.config.staticValues[e>>1]:r.values[e>>1]}const ay=sn.define(),Rp=sn.define({combine:r=>r.some(e=>e),static:!0}),od=sn.define({combine:r=>r.length?r[0]:void 0,static:!0}),ra=sn.define(),sd=sn.define(),oi=sn.define(),mu=sn.define({combine:r=>!!r.length&&r[0]});class Xa{constructor(e,t){this.type=e,this.value=t}static define(){return new EC}}class EC{of(e){return new Xa(this,e)}}class kC{constructor(e){this.map=e}of(e){return new _n(this,e)}}let _n=(()=>{class r{constructor(t,i){this.type=t,this.value=i}map(t){let i=this.type.map(this.value,t);return void 0===i?void 0:i==this.value?this:new r(this.type,i)}is(t){return this.type==t}static define(t={}){return new kC(t.map||(i=>i))}static mapEffects(t,i){if(!t.length)return t;let s=[];for(let u of t){let g=u.map(i);g&&s.push(g)}return s}}return r.reconfigure=r.define(),r.appendConfig=r.define(),r})(),ts=(()=>{class r{constructor(t,i,s,u,g,I){this.startState=t,this.changes=i,this.selection=s,this.effects=u,this.annotations=g,this.scrollIntoView=I,this._doc=null,this._state=null,s&&As(s,i.newLength),g.some(B=>B.type==r.time)||(this.annotations=g.concat(r.time.of(Date.now())))}static create(t,i,s,u,g,I){return new r(t,i,s,u,g,I)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let i of this.annotations)if(i.type==t)return i.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let i=this.annotation(r.userEvent);return!(!i||!(i==t||i.length>t.length&&i.slice(0,t.length)==t&&"."==i[t.length]))}}return r.time=Xa.define(),r.userEvent=Xa.define(),r.addToHistory=Xa.define(),r.remote=Xa.define(),r})();function TC(r,e){let t=[];for(let i=0,s=0;;){let u,g;if(i<r.length&&(s==e.length||e[s]>=r[i]))u=r[i++],g=r[i++];else{if(!(s<e.length))return t;u=e[s++],g=e[s++]}!t.length||t[t.length-1]<u?t.push(u,g):t[t.length-1]<g&&(t[t.length-1]=g)}}function er(r,e,t){var i;let s,u,g;return t?(s=e.changes,u=Mi.empty(e.changes.length),g=r.changes.compose(e.changes)):(s=e.changes.map(r.changes),u=r.changes.mapDesc(e.changes,!0),g=r.changes.compose(s)),{changes:g,selection:e.selection?e.selection.map(u):null===(i=r.selection)||void 0===i?void 0:i.map(s),effects:_n.mapEffects(r.effects,s).concat(_n.mapEffects(e.effects,u)),annotations:r.annotations.length?r.annotations.concat(e.annotations):e.annotations,scrollIntoView:r.scrollIntoView||e.scrollIntoView}}function oa(r,e,t){let i=e.selection,s=wn(e.annotations);return e.userEvent&&(s=s.concat(ts.userEvent.of(e.userEvent))),{changes:e.changes instanceof Mi?e.changes:Mi.of(e.changes||[],t,r.facet(od)),selection:i&&(i instanceof _t?i:_t.single(i.anchor,i.head)),effects:wn(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function $p(r,e,t){let i=oa(r,e.length?e[0]:{},r.doc.length);e.length&&!1===e[0].filter&&(t=!1);for(let u=1;u<e.length;u++){!1===e[u].filter&&(t=!1);let g=!!e[u].sequential;i=er(i,oa(r,e[u],g?i.changes.newLength:r.doc.length),g)}let s=ts.create(r,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return function PC(r){let e=r.startState,t=e.facet(oi),i=r;for(let s=t.length-1;s>=0;s--){let u=t[s](r);u&&Object.keys(u).length&&(i=er(r,oa(e,u,r.changes.newLength),!0))}return i==r?r:ts.create(e,r.changes,r.selection,i.effects,i.annotations,i.scrollIntoView)}(t?function _r(r){let e=r.startState,t=!0;for(let s of e.facet(ra)){let u=s(r);if(!1===u){t=!1;break}Array.isArray(u)&&(t=!0===t?u:TC(t,u))}if(!0!==t){let s,u;if(!1===t)u=r.changes.invertedDesc,s=Mi.empty(e.doc.length);else{let g=r.changes.filter(t);s=g.changes,u=g.filtered.invertedDesc}r=ts.create(e,s,r.selection&&r.selection.map(u),_n.mapEffects(r.effects,u),r.annotations,r.scrollIntoView)}let i=e.facet(sd);for(let s=i.length-1;s>=0;s--){let u=i[s](r);r=u instanceof ts?u:Array.isArray(u)&&1==u.length&&u[0]instanceof ts?u[0]:$p(e,wn(u),!1)}return r}(s):s)}const Le=[];function wn(r){return null==r?Le:Array.isArray(r)?r:[r]}var Dt=function(r){return r[r.Word=0]="Word",r[r.Space=1]="Space",r[r.Other=2]="Other",r}(Dt||(Dt={}));const Rn=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Mp;try{Mp=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}let Sr=(()=>{class r{constructor(t,i,s,u,g,I){this.config=t,this.doc=i,this.selection=s,this.values=u,this.status=t.statusTemplate.slice(),this.computeSlot=g,I&&(I._state=this);for(let B=0;B<this.config.dynamicSlots.length;B++)nc(this,B<<1);this.computeSlot=null}field(t,i=!0){let s=this.config.address[t.id];if(null!=s)return nc(this,s),rd(this,s);if(i)throw new RangeError("Field is not present in this state")}update(...t){return $p(this,t,!0)}applyTransaction(t){let g,i=this.config,{base:s,compartments:u}=i;for(let I of t.effects)I.is(pu.reconfigure)?(i&&(u=new Map,i.compartments.forEach((B,ne)=>u.set(ne,B)),i=null),u.set(I.value.compartment,I.value.extension)):I.is(_n.reconfigure)?(i=null,s=I.value):I.is(_n.appendConfig)&&(i=null,s=wn(s).concat(I.value));i?g=t.startState.values.slice():(i=id.resolve(s,u,this),g=new r(i,this.doc,this.selection,i.dynamicSlots.map(()=>null),(B,ne)=>ne.reconfigure(B,this),null).values),new r(i,t.newDoc,t.newSelection,g,(I,B)=>B.update(I,t),t)}replaceSelection(t){return"string"==typeof t&&(t=this.toText(t)),this.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:t},range:_t.cursor(i.from+t.length)}))}changeByRange(t){let i=this.selection,s=t(i.ranges[0]),u=this.changes(s.changes),g=[s.range],I=wn(s.effects);for(let B=1;B<i.ranges.length;B++){let ne=t(i.ranges[B]),fe=this.changes(ne.changes),ye=fe.map(u);for(let je=0;je<B;je++)g[je]=g[je].map(ye);let Ne=u.mapDesc(fe,!0);g.push(ne.range.map(Ne)),u=u.compose(ye),I=_n.mapEffects(I,ye).concat(_n.mapEffects(wn(ne.effects),Ne))}return{changes:u,selection:_t.create(g,i.mainIndex),effects:I}}changes(t=[]){return t instanceof Mi?t:Mi.of(t,this.doc.length,this.facet(r.lineSeparator))}toText(t){return Vn.of(t.split(this.facet(r.lineSeparator)||Jl))}sliceDoc(t=0,i=this.doc.length){return this.doc.sliceString(t,i,this.lineBreak)}facet(t){let i=this.config.address[t.id];return null==i?t.default:(nc(this,i),rd(this,i))}toJSON(t){let i={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let s in t){let u=t[s];u instanceof Dn&&(i[s]=u.spec.toJSON(this.field(t[s]),this))}return i}static fromJSON(t,i={},s){if(!t||"string"!=typeof t.doc)throw new RangeError("Invalid JSON representation for EditorState");let u=[];if(s)for(let g in s){let I=s[g],B=t[g];u.push(I.init(ne=>I.spec.fromJSON(B,ne)))}return r.create({doc:t.doc,selection:_t.fromJSON(t.selection),extensions:i.extensions?u.concat([i.extensions]):u})}static create(t={}){let i=id.resolve(t.extensions||[],new Map),s=t.doc instanceof Vn?t.doc:Vn.of((t.doc||"").split(i.staticFacet(r.lineSeparator)||Jl)),u=t.selection?t.selection instanceof _t?t.selection:_t.single(t.selection.anchor,t.selection.head):_t.single(0);return As(u,s.length),i.staticFacet(Rp)||(u=u.asSingle()),new r(i,s,u,i.dynamicSlots.map(()=>null),(g,I)=>I.create(g),null)}get tabSize(){return this.facet(r.tabSize)}get lineBreak(){return this.facet(r.lineSeparator)||"\n"}get readOnly(){return this.facet(mu)}phrase(t,...i){for(let s of this.facet(r.phrases))if(Object.prototype.hasOwnProperty.call(s,t)){t=s[t];break}return i.length&&(t=t.replace(/\$(\$|\d*)/g,(s,u)=>{if("$"==u)return"$";let g=+(u||1);return g>i.length?s:i[g-1]})),t}languageDataAt(t,i,s=-1){let u=[];for(let g of this.facet(ay))for(let I of g(this,i,s))Object.prototype.hasOwnProperty.call(I,t)&&u.push(I[t]);return u}charCategorizer(t){return function Os(r){return e=>{if(!/\S/.test(e))return Dt.Space;if(function ly(r){if(Mp)return Mp.test(r);for(let e=0;e<r.length;e++){let t=r[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||Rn.test(t)))return!0}return!1}(e))return Dt.Word;for(let t=0;t<r.length;t++)if(e.indexOf(r[t])>-1)return Dt.Word;return Dt.Other}}(this.languageDataAt("wordChars",t).join(""))}wordAt(t){let{text:i,from:s,length:u}=this.doc.lineAt(t),g=this.charCategorizer(t),I=t-s,B=t-s;for(;I>0;){let ne=zr(i,I,!1);if(g(i.slice(ne,I))!=Dt.Word)break;I=ne}for(;B<u;){let ne=zr(i,B);if(g(i.slice(B,ne))!=Dt.Word)break;B=ne}return I==B?null:_t.range(I+s,B+s)}}return r.allowMultipleSelections=Rp,r.tabSize=sn.define({combine:e=>e.length?e[0]:4}),r.lineSeparator=od,r.readOnly=mu,r.phrases=sn.define({compare(e,t){let i=Object.keys(e),s=Object.keys(t);return i.length==s.length&&i.every(u=>e[u]==t[u])}}),r.languageData=ay,r.changeFilter=ra,r.transactionFilter=sd,r.transactionExtender=oi,r})();function Mo(r,e,t={}){let i={};for(let s of r)for(let u of Object.keys(s)){let g=s[u],I=i[u];if(void 0===I)i[u]=g;else if(I!==g&&void 0!==g){if(!Object.hasOwnProperty.call(t,u))throw new Error("Config merge conflict for field "+u);i[u]=t[u](I,g)}}for(let s in e)void 0===i[s]&&(i[s]=e[s]);return i}pu.reconfigure=_n.define();class sa{eq(e){return this==e}range(e,t=e){return gu.create(e,t,this)}}sa.prototype.startSide=sa.prototype.endSide=0,sa.prototype.point=!1,sa.prototype.mapMode=ar.TrackDel;class gu{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new gu(e,t,i)}}function Np(r,e){return r.from-e.from||r.value.startSide-e.value.startSide}class Lp{constructor(e,t,i,s){this.from=e,this.to=t,this.value=i,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,s=0){let u=i?this.to:this.from;for(let g=s,I=u.length;;){if(g==I)return g;let B=g+I>>1,ne=u[B]-e||(i?this.value[B].endSide:this.value[B].startSide)-t;if(B==g)return ne>=0?g:I;ne>=0?I=B:g=B+1}}between(e,t,i,s){for(let u=this.findIndex(t,-1e9,!0),g=this.findIndex(i,1e9,!1,u);u<g;u++)if(!1===s(this.from[u]+e,this.to[u]+e,this.value[u]))return!1}map(e,t){let i=[],s=[],u=[],g=-1,I=-1;for(let B=0;B<this.value.length;B++){let Ne,je,ne=this.value[B],fe=this.from[B]+e,ye=this.to[B]+e;if(fe==ye){let ze=t.mapPos(fe,ne.startSide,ne.mapMode);if(null==ze||(Ne=je=ze,ne.startSide!=ne.endSide&&(je=t.mapPos(fe,ne.endSide),je<Ne)))continue}else if(Ne=t.mapPos(fe,ne.startSide),je=t.mapPos(ye,ne.endSide),Ne>je||Ne==je&&ne.startSide>0&&ne.endSide<=0)continue;(je-Ne||ne.endSide-ne.startSide)<0||(g<0&&(g=Ne),ne.point&&(I=Math.max(I,je-Ne)),i.push(ne),s.push(Ne-g),u.push(je-g))}return{mapped:i.length?new Lp(s,u,i,I):null,pos:g}}}let Ci=(()=>{class r{constructor(t,i,s,u){this.chunkPos=t,this.chunk=i,this.nextLayer=s,this.maxPoint=u}static create(t,i,s,u){return new r(t,i,s,u)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let i of this.chunk)t+=i.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:i=[],sort:s=!1,filterFrom:u=0,filterTo:g=this.length}=t,I=t.filter;if(0==i.length&&!I)return this;if(s&&(i=i.slice().sort(Np)),this.isEmpty)return i.length?r.of(i):this;let B=new Bp(this,null,-1).goto(0),ne=0,fe=[],ye=new No;for(;B.value||ne<i.length;)if(ne<i.length&&(B.from-i[ne].from||B.startSide-i[ne].value.startSide)>=0){let Ne=i[ne++];ye.addInner(Ne.from,Ne.to,Ne.value)||fe.push(Ne)}else 1==B.rangeIndex&&B.chunkIndex<this.chunk.length&&(ne==i.length||this.chunkEnd(B.chunkIndex)<i[ne].from)&&(!I||u>this.chunkEnd(B.chunkIndex)||g<this.chunkPos[B.chunkIndex])&&ye.addChunk(this.chunkPos[B.chunkIndex],this.chunk[B.chunkIndex])?B.nextChunk():((!I||u>B.to||g<B.from||I(B.from,B.to,B.value))&&(ye.addInner(B.from,B.to,B.value)||fe.push(gu.create(B.from,B.to,B.value))),B.next());return ye.finishInner(this.nextLayer.isEmpty&&!fe.length?r.empty:this.nextLayer.update({add:fe,filter:I,filterFrom:u,filterTo:g}))}map(t){if(t.empty||this.isEmpty)return this;let i=[],s=[],u=-1;for(let I=0;I<this.chunk.length;I++){let B=this.chunkPos[I],ne=this.chunk[I],fe=t.touchesRange(B,B+ne.length);if(!1===fe)u=Math.max(u,ne.maxPoint),i.push(ne),s.push(t.mapPos(B));else if(!0===fe){let{mapped:ye,pos:Ne}=ne.map(B,t);ye&&(u=Math.max(u,ye.maxPoint),i.push(ye),s.push(Ne))}}let g=this.nextLayer.map(t);return 0==i.length?g:new r(s,i,g||r.empty,u)}between(t,i,s){if(!this.isEmpty){for(let u=0;u<this.chunk.length;u++){let g=this.chunkPos[u],I=this.chunk[u];if(i>=g&&t<=g+I.length&&!1===I.between(g,t-g,i-g,s))return}this.nextLayer.between(t,i,s)}}iter(t=0){return Is.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,i=0){return Is.from(t).goto(i)}static compare(t,i,s,u,g=-1){let I=t.filter(Ne=>Ne.maxPoint>0||!Ne.isEmpty&&Ne.maxPoint>=g),B=i.filter(Ne=>Ne.maxPoint>0||!Ne.isEmpty&&Ne.maxPoint>=g),ne=cy(I,B,s),fe=new lr(I,ne,g),ye=new lr(B,ne,g);s.iterGaps((Ne,je,ze)=>vu(fe,Ne,ye,je,ze,u)),s.empty&&0==s.length&&vu(fe,0,ye,0,0,u)}static eq(t,i,s=0,u){null==u&&(u=1e9);let g=t.filter(ye=>!ye.isEmpty&&i.indexOf(ye)<0),I=i.filter(ye=>!ye.isEmpty&&t.indexOf(ye)<0);if(g.length!=I.length)return!1;if(!g.length)return!0;let B=cy(g,I),ne=new lr(g,B,0).goto(s),fe=new lr(I,B,0).goto(s);for(;;){if(ne.to!=fe.to||!ad(ne.active,fe.active)||ne.point&&(!fe.point||!ne.point.eq(fe.point)))return!1;if(ne.to>u)return!0;ne.next(),fe.next()}}static spans(t,i,s,u,g=-1){let I=new lr(t,null,g).goto(i),B=i,ne=I.openStart;for(;;){let fe=Math.min(I.to,s);if(I.point?(u.point(B,fe,I.point,I.activeForPoint(I.to),ne,I.pointRank),ne=I.openEnd(fe)+(I.to>fe?1:0)):fe>B&&(u.span(B,fe,I.active,ne),ne=I.openEnd(fe)),I.to>s)break;B=I.to,I.next()}return ne}static of(t,i=!1){let s=new No;for(let u of t instanceof gu?[t]:i?function di(r){if(r.length>1)for(let e=r[0],t=1;t<r.length;t++){let i=r[t];if(Np(e,i)>0)return r.slice().sort(Np);e=i}return r}(t):t)s.add(u.from,u.to,u.value);return s.finish()}}return r.empty=new r([],[],null,-1),r})();Ci.empty.nextLayer=Ci.empty;class No{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new Lp(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new No)).add(e,t,i)}addInner(e,t,i){let s=e-this.lastTo||i.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(s<0||(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),0))}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(Ci.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=Ci.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function cy(r,e,t){let i=new Map;for(let u of r)for(let g=0;g<u.chunk.length;g++)u.chunk[g].maxPoint<=0&&i.set(u.chunk[g],u.chunkPos[g]);let s=new Set;for(let u of e)for(let g=0;g<u.chunk.length;g++){let I=i.get(u.chunk[g]);null!=I&&(t?t.mapPos(I):I)==u.chunkPos[g]&&!t?.touchesRange(I,I+u.chunk[g].length)&&s.add(u.chunk[g])}return s}class Bp{constructor(e,t,i,s=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex];if(this.from=e+t.from[this.rangeIndex],this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Is{constructor(e){this.heap=e}static from(e,t=null,i=-1){let s=[];for(let u=0;u<e.length;u++)for(let g=e[u];!g.isEmpty;g=g.nextLayer)g.maxPoint>=i&&s.push(new Bp(g,t,i,u));return 1==s.length?s[0]:new Is(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)kn(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)kn(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),kn(this.heap,0)}}}function kn(r,e){for(let t=r[e];;){let i=1+(e<<1);if(i>=r.length)break;let s=r[i];if(i+1<r.length&&s.compare(r[i+1])>=0&&(s=r[i+1],i++),t.compare(s)<0)break;r[i]=t,r[e]=s,e=i}}class lr{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Is.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Dr(this.active,e),Dr(this.activeTo,e),Dr(this.activeRank,e),this.minActive=Lo(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:s,rank:u}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=u;)t++;aa(this.active,t,i),aa(this.activeTo,t,s),aa(this.activeRank,t,u),e&&aa(e,t,this.cursor.from),this.minActive=Lo(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null,s=0;for(;;){let u=this.minActive;if(u>-1&&(this.activeTo[u]-this.cursor.from||this.active[u].endSide-this.cursor.startSide)<0){if(this.activeTo[u]>e){this.to=this.activeTo[u],this.endSide=this.active[u].endSide;break}this.removeActive(u),i&&Dr(i,u)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let g=this.cursor.value;if(g.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=g,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=g.endSide,this.cursor.from<e&&(s=1),this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(i),this.cursor.next()}}}if(i){let u=0;for(;u<i.length&&i[u]<e;)u++;this.openStart=u+s}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function vu(r,e,t,i,s,u){r.goto(e),t.goto(i);let g=i+s,I=i,B=i-e;for(;;){let ne=r.to+B-t.to||r.endSide-t.endSide,fe=ne<0?r.to+B:t.to,ye=Math.min(fe,g);if(r.point||t.point?r.point&&t.point&&(r.point==t.point||r.point.eq(t.point))&&ad(r.activeForPoint(r.to+B),t.activeForPoint(t.to))||u.comparePoint(I,ye,r.point,t.point):ye>I&&!ad(r.active,t.active)&&u.compareRange(I,ye,r.active,t.active),fe>g)break;I=fe,ne<=0&&r.next(),ne>=0&&t.next()}}function ad(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!=e[t]&&!r[t].eq(e[t]))return!1;return!0}function Dr(r,e){for(let t=e,i=r.length-1;t<i;t++)r[t]=r[t+1];r.pop()}function aa(r,e,t){for(let i=r.length-1;i>=e;i--)r[i+1]=r[i];r[e]=t}function Lo(r,e){let t=-1,i=1e9;for(let s=0;s<e.length;s++)(e[s]-i||r[s].endSide-r[t].endSide)<0&&(t=s,i=e[s]);return t}function Ni(r,e,t=r.length){let i=0;for(let s=0;s<t;)9==r.charCodeAt(s)?(i+=e-i%e,s++):(i++,s=zr(r,s));return i}function Sn(r,e,t,i){for(let s=0,u=0;;){if(u>=e)return s;if(s==r.length)break;u+=9==r.charCodeAt(s)?t-u%t:1,s=zr(r,s)}return!0===i?-1:r.length}var Ft=xe(5431),ic=xe(4074);function ld(r){let e;return e=11==r.nodeType?r.getSelection?r:r.ownerDocument:r,e.getSelection()}function Bo(r,e){return!!e&&(r==e||r.contains(1!=e.nodeType?e.parentNode:e))}function Dp(r,e){if(!e.anchorNode)return!1;try{return Bo(r,e.anchorNode)}catch{return!1}}function yu(r){return 3==r.nodeType?Cu(r,0,r.nodeValue.length).getClientRects():1==r.nodeType?r.getClientRects():[]}function cd(r,e,t,i){return!!t&&(uy(r,e,t,i,-1)||uy(r,e,t,i,1))}function Fp(r){for(var e=0;;e++)if(!(r=r.previousSibling))return e}function uy(r,e,t,i,s){for(;;){if(r==t&&e==i)return!0;if(e==(s<0?0:Ya(r))){if("DIV"==r.nodeName)return!1;let u=r.parentNode;if(!u||1!=u.nodeType)return!1;e=Fp(r)+(s<0?0:1),r=u}else{if(1!=r.nodeType)return!1;if(1==(r=r.childNodes[e+(s<0?-1:0)]).nodeType&&"false"==r.contentEditable)return!1;e=s<0?Ya(r):0}}}function Ya(r){return 3==r.nodeType?r.nodeValue.length:r.childNodes.length}const Wp={left:0,right:0,top:0,bottom:0};function ud(r,e){let t=e?r.left:r.right;return{left:t,right:t,top:r.top,bottom:r.bottom}}function RC(r){return{left:0,right:r.innerWidth,top:0,bottom:r.innerHeight}}class hd{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,i,s){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=s}}let bu,ns=null;function la(r){if(r.setActive)return r.setActive();if(ns)return r.focus(ns);let e=[];for(let t=r;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(r.focus(null==ns?{get preventScroll(){return ns={preventScroll:!0},!0}}:void 0),!ns){ns=!1;for(let t=0;t<e.length;){let i=e[t++],s=e[t++],u=e[t++];i.scrollTop!=s&&(i.scrollTop=s),i.scrollLeft!=u&&(i.scrollLeft=u)}}}function Cu(r,e,t=e){let i=bu||(bu=document.createRange());return i.setEnd(r,t),i.setStart(r,e),i}function ca(r,e,t){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0},s=new KeyboardEvent("keydown",i);s.synthetic=!0,r.dispatchEvent(s);let u=new KeyboardEvent("keyup",i);return u.synthetic=!0,r.dispatchEvent(u),s.defaultPrevented||u.defaultPrevented}function wu(r){for(;r.attributes.length;)r.removeAttributeNode(r.attributes[0])}class cr{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new cr(e.parentNode,Fp(e),t)}static after(e,t){return new cr(e.parentNode,Fp(e)+1,t)}}const dd=[];class Xn{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(2&this.dirty){let s,t=this.dom,i=null;for(let u of this.children){if(u.dirty){if(!u.dom&&(s=i?i.nextSibling:t.firstChild)){let g=Xn.get(s);(!g||!g.parent&&g.constructor==u.constructor)&&u.reuseDOM(s)}u.sync(e),u.dirty=0}if(s=i?i.nextSibling:t.firstChild,e&&!e.written&&e.node==t&&s!=u.dom&&(e.written=!0),u.dom.parentNode==t)for(;s&&s!=u.dom;)s=hy(s);else t.insertBefore(u.dom,s);i=u.dom}for(s=i?i.nextSibling:t.firstChild,s&&e&&e.node==t&&(e.written=!0);s;)s=hy(s)}else if(1&this.dirty)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let s=0==Ya(e)?0:0==t?-1:1;for(;;){let u=e.parentNode;if(u==this.dom)break;0==s&&u.firstChild!=u.lastChild&&(s=e==u.firstChild?-1:1),e=u}i=s<0?e:e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Xn.get(i);)i=i.nextSibling;if(!i)return this.length;for(let s=0,u=0;;s++){let g=this.children[s];if(g.dom==i)return u;u+=g.length+g.breakAfter}}domBoundsAround(e,t,i=0){let s=-1,u=-1,g=-1,I=-1;for(let B=0,ne=i,fe=i;B<this.children.length;B++){let ye=this.children[B],Ne=ne+ye.length;if(ne<e&&Ne>t)return ye.domBoundsAround(e,t,ne);if(Ne>=e&&-1==s&&(s=B,u=ne),ne>t&&ye.dom.parentNode==this.dom){g=B,I=fe;break}fe=Ne,ne=Ne+ye.breakAfter}return{from:u,to:I<0?i+this.length:I,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:g<this.children.length&&g>=0?this.children[g].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),1&t.dirty)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=dd){this.markDirty();for(let s=e;s<t;s++){let u=this.children[s];u.parent==this&&u.destroy()}this.children.splice(e,t-e,...i);for(let s=0;s<i.length;s++)i[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Gp(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,i,s,u,g){return!1}become(e){return!1}getSide(){return 0}destroy(){this.parent=null}}function hy(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}Xn.prototype.breakAfter=0;class Gp{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function qa(r,e,t,i,s,u,g,I,B){let{children:ne}=r,fe=ne.length?ne[e]:null,ye=u.length?u[u.length-1]:null,Ne=ye?ye.breakAfter:g;if(!(e==i&&fe&&!g&&!Ne&&u.length<2&&fe.merge(t,s,u.length?ye:null,0==t,I,B))){if(i<ne.length){let je=ne[i];je&&s<je.length?(e==i&&(je=je.split(s),s=0),!Ne&&ye&&je.merge(0,s,ye,!0,0,B)?u[u.length-1]=je:(s&&je.merge(0,s,null,!1,0,B),u.push(je))):je?.breakAfter&&(ye?ye.breakAfter=1:g=1),i++}for(fe&&(fe.breakAfter=g,t>0&&(!g&&u.length&&fe.merge(t,fe.length,u[0],!1,I,0)?fe.breakAfter=u.shift().breakAfter:(t<fe.length||fe.children.length&&0==fe.children[fe.children.length-1].length)&&fe.merge(t,fe.length,null,!1,I,0),e++));e<i&&u.length;)if(ne[i-1].become(u[u.length-1]))i--,u.pop(),B=u.length?0:I;else{if(!ne[e].become(u[0]))break;e++,u.shift(),I=u.length?0:B}!u.length&&e&&i<ne.length&&!ne[e-1].breakAfter&&ne[i].merge(0,0,ne[e-1],!1,I,B)&&e--,(e<i||u.length)&&r.replaceChildren(e,i,u)}}function fd(r,e,t,i,s,u){let g=r.childCursor(),{i:I,off:B}=g.findPos(t,1),{i:ne,off:fe}=g.findPos(e,-1),ye=e-t;for(let Ne of i)ye+=Ne.length;r.length+=ye,qa(r,ne,fe,I,B,i,0,s,u)}let Li=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},pd=typeof document<"u"?document:{documentElement:{style:{}}};const is=/Edge\/(\d+)/.exec(Li.userAgent),Ja=/MSIE \d/.test(Li.userAgent),md=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Li.userAgent),gd=!!(Ja||md||is),xu=!gd&&/gecko\/(\d+)/i.test(Li.userAgent),vd=!gd&&/Chrome\/(\d+)/.exec(Li.userAgent),rc="webkitFontSmoothing"in pd.documentElement.style,Au=!gd&&/Apple Computer/.test(Li.vendor),jp=Au&&(/Mobile\/\w+/.test(Li.userAgent)||Li.maxTouchPoints>2);var rn={mac:jp||/Mac/.test(Li.platform),windows:/Win/.test(Li.platform),linux:/Linux|X11/.test(Li.platform),ie:gd,ie_version:Ja?pd.documentMode||6:md?+md[1]:is?+is[1]:0,gecko:xu,gecko_version:xu?+(/Firefox\/(\d+)/.exec(Li.userAgent)||[0,0])[1]:0,chrome:!!vd,chrome_version:vd?+vd[1]:0,ios:jp,android:/Android\b/.test(Li.userAgent),webkit:rc,safari:Au,webkit_version:rc?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=pd.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class _s extends Xn{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,i){return(!i||i instanceof _s&&!(this.length-(t-e)+i.length>256))&&(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new _s(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new cr(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return yd(this.dom,e,t)}}class vo extends Xn{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let s of t)s.setParent(this)}setAttrs(e){if(wu(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,i,s,u,g){return!(i&&(!(i instanceof vo&&i.mark.eq(this.mark))||e&&u<=0||t<this.length&&g<=0)||(fd(this,e,t,i?i.children:[],u-1,g-1),this.markDirty(),0))}split(e){let t=[],i=0,s=-1,u=0;for(let I of this.children){let B=i+I.length;B>e&&t.push(i<e?I.split(e-i):I),s<0&&i>=e&&(s=u),i=B,u++}let g=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new vo(this.mark,t,g)}domAtPos(e){return Iu(this.dom,this.children,e)}coordsAt(e,t){return _u(this,e,t)}}function yd(r,e,t){let i=r.nodeValue.length;e>i&&(e=i);let s=e,u=e,g=0;0==e&&t<0||e==i&&t>=0?rn.chrome||rn.gecko||(e?(s--,g=1):u<i&&(u++,g=-1)):t<0?s--:u<i&&u++;let I=Cu(r,s,u).getClientRects();if(!I.length)return Wp;let B=I[(g?g<0:t>=0)?0:I.length-1];return rn.safari&&!g&&0==B.width&&(B=Array.prototype.find.call(I,ne=>ne.width)||B),g?ud(B,g<0):B||null}class ua extends Xn{constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}static create(e,t,i){return new(e.customView||ua)(e,t,i)}split(e){let t=ua.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,s,u,g){return!(i&&(!(i instanceof ua&&this.widget.compare(i.widget))||e>0&&u<=0||t<this.length&&g<=0)||(this.length=e+(i?i.length:0)+(this.length-t),0))}become(e){return e.length==this.length&&e instanceof ua&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return Vn.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,i=t&&t.state.doc,s=this.posAtStart;return i?i.slice(s,s+this.length):Vn.empty}domAtPos(e){return 0==e?cr.before(this.dom):cr.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.dom.getClientRects(),s=null;if(!i.length)return Wp;for(let u=e>0?i.length-1:0;s=i[u],!(e>0?0==u:u==i.length-1||s.top<s.bottom);u+=e>0?-1:1);return 0==e&&t>0||e==this.length&&t<=0?s:ud(s,0==e)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Do extends ua{domAtPos(e){let{topView:t,text:i}=this.widget;return t?Ou(e,0,t,i,(s,u)=>s.domAtPos(u),s=>new cr(i,Math.min(s,i.nodeValue.length))):new cr(i,Math.min(e,i.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:i,text:s}=this.widget;return i?fy(e,t,i,s):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:i,text:s}=this.widget;return i?Ou(e,t,i,s,(u,g,I)=>u.coordsAt(g,I),(u,g)=>yd(s,u,g)):yd(s,e,t)}destroy(){var e;super.destroy(),null===(e=this.widget.topView)||void 0===e||e.destroy()}get isEditable(){return!0}}function Ou(r,e,t,i,s,u){if(t instanceof vo){for(let g of t.children){let I=Bo(g.dom,i),B=I?i.nodeValue.length:g.length;if(r<B||r==B&&g.getSide()<=0)return I?Ou(r,e,g,i,s,u):s(g,r,e);r-=B}return s(t,t.length,-1)}return t.dom==i?u(r,e):s(t,r,e)}function fy(r,e,t,i){if(t instanceof vo)for(let s of t.children){let u=0,g=Bo(s.dom,i);if(Bo(s.dom,r))return u+(g?fy(r,e,s,i):s.localPosFromDOM(r,e));u+=g?i.nodeValue.length:s.length}else if(t.dom==i)return Math.min(e,i.nodeValue.length);return t.localPosFromDOM(r,e)}class vi extends Xn{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof vi&&e.side==this.side}split(){return new vi(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return cr.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),i=function py(r,e){let t=r.parent,i=t?t.children.indexOf(r):-1;for(;t&&i>=0;)if(e<0?i>0:i<t.children.length){let s=t.children[i+e];if(s instanceof _s){let u=s.coordsAt(e<0?s.length:0,e);if(u)return u}i+=e}else{if(!(t instanceof vo&&t.parent)){let s=t.dom.lastChild;if(s&&"BR"==s.nodeName)return s.getClientRects()[0];break}i=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent}}(this,this.side>0?-1:1);return i&&i.top<t.bottom&&i.bottom>t.top?{left:t.left,right:t.right,top:i.top,bottom:i.bottom}:t}get overrideDOMText(){return Vn.empty}}function Iu(r,e,t){let i=0;for(let s=0;i<e.length;i++){let u=e[i],g=s+u.length;if(!(g==s&&u.getSide()<=0)){if(t>s&&t<g&&u.dom.parentNode==r)return u.domAtPos(t-s);if(t<=s)break;s=g}}for(;i>0;i--){let s=e[i-1].dom;if(s.parentNode==r)return cr.after(s)}return new cr(r,0)}function Zp(r,e,t){let i,{children:s}=r;t>0&&e instanceof vo&&s.length&&(i=s[s.length-1])instanceof vo&&i.mark.eq(e.mark)?Zp(i,e.children[0],t-1):(s.push(e),e.setParent(r)),r.length+=e.length}function _u(r,e,t){for(let u=0,g=0;g<r.children.length;g++){let ne,I=r.children[g],B=u+I.length;if((t<=0||B==r.length||I.getSide()>0?B>=e:B>e)&&(e<B||g+1==r.children.length||(ne=r.children[g+1]).length||ne.getSide()>0)){let fe=0;if(B==u){if(I.getSide()<=0)continue;fe=t=-I.getSide()}let ye=I.coordsAt(Math.max(0,e-u),t);return fe&&ye?ud(ye,t<0):ye}u=B}let i=r.dom.lastChild;if(!i)return r.dom.getBoundingClientRect();let s=yu(i);return s[s.length-1]||null}function bd(r,e){for(let t in r)"class"==t&&e.class?e.class+=" "+r.class:"style"==t&&e.style?e.style+=";"+r.style:e[t]=r[t];return e}function Su(r,e){if(r==e)return!0;if(!r||!e)return!1;let t=Object.keys(r),i=Object.keys(e);if(t.length!=i.length)return!1;for(let s of t)if(-1==i.indexOf(s)||r[s]!==e[s])return!1;return!0}function Lt(r,e,t){let i=null;if(e)for(let s in e)t&&s in t||r.removeAttribute(i=s);if(t)for(let s in t)e&&e[s]==t[s]||r.setAttribute(i=s,t[s]);return!!i}_s.prototype.children=ua.prototype.children=vi.prototype.children=dd;class Fo{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var si=function(r){return r[r.Text=0]="Text",r[r.WidgetBefore=1]="WidgetBefore",r[r.WidgetAfter=2]="WidgetAfter",r[r.WidgetRange=3]="WidgetRange",r}(si||(si={}));class an extends sa{constructor(e,t,i,s){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=s}get heightRelevant(){return!1}static mark(e){return new ha(e)}static widget(e){let t=e.side||0,i=!!e.block;return t+=i?t>0?3e8:-4e8:t>0?1e8:-1e8,new Ss(e,t,t,i,e.widget||null,!1)}static replace(e){let i,s,t=!!e.block;if(e.isBlockGap)i=-5e8,s=4e8;else{let{start:u,end:g}=my(e,t);i=(u?t?-3e8:-1:5e8)-1,s=1+(g?t?2e8:1:-6e8)}return new Ss(e,i,s,t,e.widget||null,!0)}static line(e){return new Eu(e)}static set(e,t=!1){return Ci.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}an.none=Ci.empty;class ha extends an{constructor(e){let{start:t,end:i}=my(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof ha&&this.tagName==e.tagName&&this.class==e.class&&Su(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}ha.prototype.point=!1;class Eu extends an{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Eu&&Su(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Eu.prototype.mapMode=ar.TrackBefore,Eu.prototype.point=!0;class Ss extends an{constructor(e,t,i,s,u,g){super(t,i,u,e),this.block=s,this.isReplace=g,this.mapMode=s?t<=0?ar.TrackBefore:ar.TrackAfter:ar.TrackDel}get type(){return this.startSide<this.endSide?si.WidgetRange:this.startSide<=0?si.WidgetBefore:si.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof Ss&&function gy(r,e){return r==e||!!(r&&e&&r.compare(e))}(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function my(r,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=r;return null==t&&(t=r.inclusive),null==i&&(i=r.inclusive),{start:t??e,end:i??e}}function Wo(r,e,t,i=0){let s=t.length-1;s>=0&&t[s]+i>=r?t[s]=Math.max(t[s],e):t.push(r,e)}Ss.prototype.point=!0;class ki extends Xn{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,s,u,g){if(i){if(!(i instanceof ki))return!1;this.dom||i.transferDOM(this)}return s&&this.setDeco(i?i.attrs:null),fd(this,e,t,i?i.children:[],u,g),!0}split(e){let t=new ki;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i,off:s}=this.childPos(e);s&&(t.append(this.children[i].split(s),0),this.children[i].merge(s,this.children[i].length,null,!1,0,0),i++);for(let u=i;u<this.children.length;u++)t.append(this.children[u],0);for(;i>0&&0==this.children[i-1].length;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Su(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){Zp(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=bd(t,this.attrs||{})),i&&(this.attrs=bd({class:i},this.attrs||{}))}domAtPos(e){return Iu(this.dom,this.children,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?4&this.dirty&&(wu(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(Lt(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let i=this.dom.lastChild;for(;i&&Xn.get(i)instanceof vo;)i=i.lastChild;if(!(i&&this.length&&("BR"==i.nodeName||0!=(null===(t=Xn.get(i))||void 0===t?void 0:t.isEditable)||rn.ios&&this.children.some(s=>s instanceof _s)))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof _s))return null;let i=yu(t.dom);if(1!=i.length)return null;e+=i[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}}coordsAt(e,t){return _u(this,e,t)}become(e){return!1}get type(){return si.Text}static find(e,t){for(let i=0,s=0;i<e.children.length;i++){let u=e.children[i],g=s+u.length;if(g>=t){if(u instanceof ki)return u;if(g>t)break}s=g+u.breakAfter}return null}}class Es extends Xn{constructor(e,t,i){super(),this.widget=e,this.length=t,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,s,u,g){return!(i&&(!(i instanceof Es&&this.widget.compare(i.widget))||e>0&&u<=0||t<this.length&&g<=0)||(this.length=e+(i?i.length:0)+(this.length-t),0))}domAtPos(e){return 0==e?cr.before(this.dom):cr.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Es(this.widget,t,this.type);return i.breakAfter=this.breakAfter,i}get children(){return dd}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Vn.empty}domBoundsAround(){return null}become(e){return e instanceof Es&&e.type==this.type&&e.widget.constructor==this.widget.constructor&&(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Cd{constructor(e,t,i,s){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Es&&e.type==si.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new ki),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(ku(new vi(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:u,lineBreak:g,done:I}=this.cursor.next(this.skip);if(this.skip=0,I)throw new Error("Ran out of text content when drawing inline views");if(g){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}this.text=u,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,i)),this.getLine().append(ku(new _s(this.text.slice(this.textOff,this.textOff+s)),t),i),this.atCursorPos=!0,this.textOff+=s,e-=s,i=0}}span(e,t,i,s){this.buildText(t-e,i,s),this.pos=t,this.openStart<0&&(this.openStart=s)}point(e,t,i,s,u,g){if(this.disallowBlockEffectsFor[g]&&i instanceof Ss){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let I=t-e;if(i instanceof Ss)if(i.block){let{type:B}=i;B==si.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Es(i.widget||new Vp("div"),I,B))}else{let B=ua.create(i.widget||new Vp("span"),I,i.startSide),ne=this.atCursorPos&&!B.isEditable&&u<=s.length&&(e<t||i.startSide>0),fe=!B.isEditable&&(e<t||i.startSide<=0),ye=this.getLine();2==this.pendingBuffer&&!ne&&(this.pendingBuffer=0),this.flushBuffer(s),ne&&(ye.append(ku(new vi(1),s),u),u=s.length+Math.max(0,u-s.length)),ye.append(ku(B,s),u),this.atCursorPos=fe,this.pendingBuffer=fe?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);I&&(this.textOff+I<=this.text.length?this.textOff+=I:(this.skip+=I-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=u)}static build(e,t,i,s,u){let g=new Cd(e,t,i,u);return g.openEnd=Ci.spans(s,t,i,g),g.openStart<0&&(g.openStart=g.openEnd),g.finish(g.openEnd),g}}function ku(r,e){for(let t of e)r=new vo(t,[r],r.length);return r}class Vp extends Fo{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const vy=sn.define(),yy=sn.define(),by=sn.define(),da=sn.define(),wd=sn.define(),Tu=sn.define(),ks=sn.define({combine:r=>r.some(e=>e)});class xd{constructor(e,t="nearest",i="nearest",s=5,u=5){this.range=e,this.y=t,this.x=i,this.yMargin=s,this.xMargin=u}map(e){return e.empty?this:new xd(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const Ts=_n.define({map:(r,e)=>r.map(e)});function Xr(r,e,t){let i=r.facet(da);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const Pu=sn.define({combine:r=>!r.length||r[0]});let MC=0;const oc=sn.define();class Gn{constructor(e,t,i,s){this.id=e,this.create=t,this.domEventHandlers=i,this.extension=s(this)}static define(e,t){const{eventHandlers:i,provide:s,decorations:u}=t||{};return new Gn(MC++,e,i,g=>{let I=[oc.of(g)];return u&&I.push(Ru.of(B=>{let ne=B.plugin(g);return ne?u(ne):an.none})),s&&I.push(s(g)),I})}static fromClass(e,t){return Gn.define(i=>new e(i),t)}}class Ti{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(Xr(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Xr(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null!==(t=this.value)&&void 0!==t&&t.destroy)try{this.value.destroy()}catch(i){Xr(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Ad=sn.define(),sc=sn.define(),Ru=sn.define(),Qi=sn.define(),rs=sn.define(),el=sn.define();class os{constructor(e,t,i,s){this.fromA=e,this.toA=t,this.fromB=i,this.toB=s}join(e){return new os(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let s=e[t-1];if(!(s.fromA>i.toA)){if(s.toA<i.fromA)break;i=i.join(s),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(0==t.length)return e;let i=[];for(let s=0,u=0,g=0,I=0;;s++){let B=s==e.length?null:e[s],ne=g-I,fe=B?B.fromB:1e9;for(;u<t.length&&t[u]<fe;){let Ne=t[u+1],je=Math.max(I,t[u]),ze=Math.min(fe,Ne);if(je<=ze&&new os(je+ne,ze+ne,je,ze).addToSet(i),Ne>fe)break;u+=2}if(!B)return i;new os(B.fromA,B.toA,B.fromB,B.toB).addToSet(i),g=B.toA,I=B.toB}}}class $u{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Mi.empty(this.startState.doc.length);for(let g of i)this.changes=this.changes.compose(g.changes);let s=[];this.changes.iterChangedRanges((g,I,B,ne)=>s.push(new os(g,I,B,ne))),this.changedRanges=s;let u=e.hasFocus;u!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=u,this.flags|=1)}static create(e,t,i){return new $u(e,t,i)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return 0==this.flags&&0==this.transactions.length}}var yi=function(r){return r[r.LTR=0]="LTR",r[r.RTL=1]="RTL",r}(yi||(yi={}));const Qp=yi.LTR,Od=yi.RTL;function Hp(r){let e=[];for(let t=0;t<r.length;t++)e.push(1<<+r[t]);return e}const Cy=Hp("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Mu=Hp("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Kr=Object.create(null),Go=[];for(let r of["()","[]","{}"]){let e=r.charCodeAt(0),t=r.charCodeAt(1);Kr[e]=t,Kr[t]=-e}function wy(r){return r<=247?Cy[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?Mu[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8203||8204==r?256:1}const zp=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;class tl{constructor(e,t,i){this.from=e,this.to=t,this.level=i}get dir(){return this.level%2?Od:Qp}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,s){let u=-1;for(let g=0;g<e.length;g++){let I=e[g];if(I.from<=t&&I.to>=t){if(I.level==i)return g;(u<0||(0!=s?s<0?I.from<t:I.to>t:e[u].level>I.level))&&(u=g)}}if(u<0)throw new RangeError("Index out of range");return u}}const wi=[];function jo(r){return[new tl(0,r,0)]}let Up="";function ac(r,e,t,i,s){var u;let g=i.head-r.from,I=-1;if(0==g){if(!s||!r.length)return null;e[0].level!=t&&(g=e[0].side(!1,t),I=0)}else if(g==r.length){if(s)return null;let Ne=e[e.length-1];Ne.level!=t&&(g=Ne.side(!0,t),I=e.length-1)}I<0&&(I=tl.find(e,g,null!==(u=i.bidiLevel)&&void 0!==u?u:-1,i.assoc));let B=e[I];g==B.side(s,t)&&(B=e[I+=s?1:-1],g=B.side(!s,t));let ne=s==(B.dir==t),fe=zr(r.text,g,ne);if(Up=r.text.slice(Math.min(g,fe),Math.max(g,fe)),fe!=B.side(s,t))return _t.cursor(fe+r.from,ne?-1:1,B.level);let ye=I==(s?e.length-1:0)?null:e[I+(s?1:-1)];return ye||B.level==t?ye&&ye.level<B.level?_t.cursor(ye.side(!s,t)+r.from,s?1:-1,ye.level):_t.cursor(fe+r.from,s?-1:1,B.level):_t.cursor(s?r.to:r.from,s?-1:1,t)}class fa{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Sr.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+="\uffff"}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let s=e;;){this.findPointBefore(i,s),this.readNode(s);let u=s.nextSibling;if(u==t)break;let g=Xn.get(s),I=Xn.get(u);(g&&I?g.breakAfter:(g?g.breakAfter:Xp(s))||Xp(u)&&("BR"!=s.nodeName||s.cmIgnore))&&this.lineBreak(),s=u}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let I,u=-1,g=1;if(this.lineSeparator?(u=t.indexOf(this.lineSeparator,i),g=this.lineSeparator.length):(I=s.exec(t))&&(u=I.index,g=I[0].length),this.append(t.slice(i,u<0?t.length:u)),u<0)break;if(this.lineBreak(),g>1)for(let B of this.points)B.node==e&&B.pos>this.text.length&&(B.pos-=g-1);i=u+g}}readNode(e){if(e.cmIgnore)return;let t=Xn.get(e),i=t&&t.overrideDOMText;if(null!=i){this.findPointInside(e,i.length);for(let s=i.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(3==e.nodeType?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(t,i.offset))}}function Xp(r){return 1==r.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(r.nodeName)}class Nu{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class _d extends Xn{constructor(e){super(),this.view=e,this.compositionDeco=an.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new ki],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new os(0,0,0,e.state.doc.length)],0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:g,toA:I})=>I<this.minWidthFrom||g>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=an.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=function NC(r,e){let t=Sd(r);if(!t)return an.none;let{from:i,to:s,node:u,text:g}=t,I=e.mapPos(i,1),B=Math.max(I,e.mapPos(s,-1)),{state:ne}=r,fe=3==u.nodeType?u.nodeValue:new fa([],ne).readRange(u.firstChild,null).text;if(B-I<fe.length)if(ne.doc.sliceString(I,Math.min(ne.doc.length,I+fe.length),"\uffff")==fe)B=I+fe.length;else{if(ne.doc.sliceString(Math.max(0,B-fe.length),B,"\uffff")!=fe)return an.none;I=B-fe.length}else if(ne.doc.sliceString(I,B,"\uffff")!=fe)return an.none;let ye=Xn.get(u);return ye instanceof Do?ye=ye.widget.topView:ye&&(ye.parent=null),an.set(an.replace({widget:new qp(u,g,ye),inclusive:!0}).range(I,B))}(this.view,e.changes)),(rn.ie||rn.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let u=function lc(r,e,t){let i=new LC;return Ci.compare(r,e,t,i),i.changes}(this.decorations,this.updateDeco(),e.changes);return t=os.extendWithRanges(t,u),(0!=this.dirty||0!=t.length)&&(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let u=rn.chrome||rn.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(u),this.dirty=0,u&&(u.written||i.selectionRange.focusNode!=u.node)&&(this.forceSelection=!0),this.dom.style.height=""});let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let u of this.children)u instanceof Es&&u.widget instanceof Yp&&s.push(u.dom);i.updateGaps(s)}updateChildren(e,t){let i=this.childCursor(t);for(let s=e.length-1;;s--){let u=s>=0?e[s]:null;if(!u)break;let{fromA:g,toA:I,fromB:B,toB:ne}=u,{content:fe,breakAtStart:ye,openStart:Ne,openEnd:je}=Cd.build(this.view.state.doc,B,ne,this.decorations,this.dynamicDecorationMap),{i:ze,off:At}=i.findPos(I,1),{i:kt,off:Nt}=i.findPos(g,-1);qa(this,kt,Nt,ze,At,fe,ye,Ne,je)}}updateSelection(e=!1,t=!1){if(e&&this.view.observer.readSelectionRange(),!t&&!this.mayControlSelection()||rn.ios&&this.view.inputState.rapidCompositionStart)return;let i=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,u=this.domAtPos(s.anchor),g=s.empty?u:this.domAtPos(s.head);if(rn.gecko&&s.empty&&function Kp(r){return 1==r.node.nodeType&&r.node.firstChild&&(0==r.offset||"false"==r.node.childNodes[r.offset-1].contentEditable)&&(r.offset==r.node.childNodes.length||"false"==r.node.childNodes[r.offset].contentEditable)}(u)){let B=document.createTextNode("");this.view.observer.ignore(()=>u.node.insertBefore(B,u.node.childNodes[u.offset]||null)),u=g=new cr(B,0),i=!0}let I=this.view.observer.selectionRange;(i||!I.focusNode||!cd(u.node,u.offset,I.anchorNode,I.anchorOffset)||!cd(g.node,g.offset,I.focusNode,I.focusOffset))&&(this.view.observer.ignore(()=>{rn.android&&rn.chrome&&this.dom.contains(I.focusNode)&&function BC(r,e){for(let t=r;t&&t!=e;t=t.assignedSlot||t.parentNode)if(1==t.nodeType&&"false"==t.contentEditable)return!0;return!1}(I.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let B=ld(this.root);if(s.empty){if(rn.gecko){let ne=function xy(r,e){return 1!=r.nodeType?0:(e&&"false"==r.childNodes[e-1].contentEditable?1:0)|(e<r.childNodes.length&&"false"==r.childNodes[e].contentEditable?2:0)}(u.node,u.offset);if(ne&&3!=ne){let fe=Jp(u.node,u.offset,1==ne?1:-1);fe&&(u=new cr(fe,1==ne?0:fe.nodeValue.length))}}B.collapse(u.node,u.offset),null!=s.bidiLevel&&null!=I.cursorBidiLevel&&(I.cursorBidiLevel=s.bidiLevel)}else if(B.extend)B.collapse(u.node,u.offset),B.extend(g.node,g.offset);else{let ne=document.createRange();s.anchor>s.head&&([u,g]=[g,u]),ne.setEnd(g.node,g.offset),ne.setStart(u.node,u.offset),B.removeAllRanges(),B.addRange(ne)}}),this.view.observer.setSelectionRange(u,g)),this.impreciseAnchor=u.precise?null:new cr(I.anchorNode,I.anchorOffset),this.impreciseHead=g.precise?null:new cr(I.focusNode,I.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let e=this.view.state.selection.main,t=ld(this.root);if(!e.empty||!e.assoc||!t.modify)return;let i=ki.find(this,e.head);if(!i)return;let s=i.posAtStart;if(e.head==s||e.head==s+i.length)return;let u=this.coordsAt(e.head,-1),g=this.coordsAt(e.head,1);if(!u||!g||u.bottom>g.top)return;let I=this.domAtPos(e.head+e.assoc);t.collapse(I.node,I.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){return this.view.state.facet(Pu)?this.root.activeElement==this.dom:Dp(this.dom,this.view.observer.selectionRange)}nearest(e){for(let t=e;t;){let i=Xn.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let s=this.children[t];if(i<s.length||s instanceof ki)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){for(let i=this.length,s=this.children.length-1;;s--){let u=this.children[s],g=i-u.breakAfter-u.length;if(e>g||e==g&&u.type!=si.WidgetBefore&&u.type!=si.WidgetAfter&&(!s||2==t||this.children[s-1].breakAfter||this.children[s-1].type==si.WidgetBefore&&t>-2))return u.coordsAt(e-g,t);i=g}}measureVisibleLineHeights(e){let t=[],{from:i,to:s}=e,u=this.view.contentDOM.clientWidth,g=u>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,I=-1,B=this.view.textDirection==yi.LTR;for(let ne=0,fe=0;fe<this.children.length;fe++){let ye=this.children[fe],Ne=ne+ye.length;if(Ne>s)break;if(ne>=i){let je=ye.dom.getBoundingClientRect();if(t.push(je.height),g){let ze=ye.dom.lastChild,At=ze?yu(ze):[];if(At.length){let kt=At[At.length-1],Nt=B?kt.right-je.left:je.right-kt.left;Nt>I&&(I=Nt,this.minWidth=u,this.minWidthFrom=ne,this.minWidthTo=Ne)}}}ne=Ne+ye.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?yi.RTL:yi.LTR}measureTextSize(){for(let s of this.children)if(s instanceof ki){let u=s.measureTextSize();if(u)return u}let t,i,e=document.createElement("div");return e.className="cm-line",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=yu(e.firstChild)[0];t=e.getBoundingClientRect().height,i=s?s.width/27:7,e.remove()}),{lineHeight:t,charWidth:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Gp(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,s=0;;s++){let u=s==t.viewports.length?null:t.viewports[s],g=u?u.from-1:this.length;if(g>i){let I=t.lineBlockAt(g).bottom-t.lineBlockAt(i).top;e.push(an.replace({widget:new Yp(I),block:!0,inclusive:!0,isBlockGap:!0}).range(i,g))}if(!u)break;i=u.to+1}return an.set(e)}updateDeco(){let e=this.view.state.facet(Ru).map((t,i)=>(this.dynamicDecorationMap[i]="function"==typeof t)?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let s,{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1);if(!i)return;!t.empty&&(s=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,s.left),top:Math.min(i.top,s.top),right:Math.max(i.right,s.right),bottom:Math.max(i.bottom,s.bottom)});let u=0,g=0,I=0,B=0;for(let fe of this.view.state.facet(rs).map(ye=>ye(this.view)))if(fe){let{left:ye,right:Ne,top:je,bottom:ze}=fe;null!=ye&&(u=Math.max(u,ye)),null!=Ne&&(g=Math.max(g,Ne)),null!=je&&(I=Math.max(I,je)),null!=ze&&(B=Math.max(B,ze))}!function $C(r,e,t,i,s,u,g,I){let B=r.ownerDocument,ne=B.defaultView;for(let fe=r;fe;)if(1==fe.nodeType){let ye,Ne=fe==B.body;if(Ne)ye=RC(ne);else{if(fe.scrollHeight<=fe.clientHeight&&fe.scrollWidth<=fe.clientWidth){fe=fe.parentNode;continue}let At=fe.getBoundingClientRect();ye={left:At.left,right:At.left+fe.clientWidth,top:At.top,bottom:At.top+fe.clientHeight}}let je=0,ze=0;if("nearest"==s)e.top<ye.top?(ze=-(ye.top-e.top+g),t>0&&e.bottom>ye.bottom+ze&&(ze=e.bottom-ye.bottom+ze+g)):e.bottom>ye.bottom&&(ze=e.bottom-ye.bottom+g,t<0&&e.top-ze<ye.top&&(ze=-(ye.top+ze-e.top+g)));else{let At=e.bottom-e.top,kt=ye.bottom-ye.top;ze=("center"==s&&At<=kt?e.top+At/2-kt/2:"start"==s||"center"==s&&t<0?e.top-g:e.bottom-kt+g)-ye.top}if("nearest"==i?e.left<ye.left?(je=-(ye.left-e.left+u),t>0&&e.right>ye.right+je&&(je=e.right-ye.right+je+u)):e.right>ye.right&&(je=e.right-ye.right+u,t<0&&e.left<ye.left+je&&(je=-(ye.left+je-e.left+u))):je=("center"==i?e.left+(e.right-e.left)/2-(ye.right-ye.left)/2:"start"==i==I?e.left-u:e.right-(ye.right-ye.left)+u)-ye.left,je||ze)if(Ne)ne.scrollBy(je,ze);else{if(ze){let At=fe.scrollTop;fe.scrollTop+=ze,ze=fe.scrollTop-At}if(je){let At=fe.scrollLeft;fe.scrollLeft+=je,je=fe.scrollLeft-At}e={left:e.left-je,top:e.top-ze,right:e.right-je,bottom:e.bottom-ze}}if(Ne)break;fe=fe.assignedSlot||fe.parentNode,i=s="nearest"}else{if(11!=fe.nodeType)break;fe=fe.host}}(this.view.scrollDOM,{left:i.left-u,top:i.top-I,right:i.right+g,bottom:i.bottom+B},t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==yi.LTR)}}class Yp extends Fo{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Sd(r){let e=r.observer.selectionRange,t=e.focusNode&&Jp(e.focusNode,e.focusOffset,0);if(!t)return null;let i=r.docView.nearest(t);if(!i)return null;if(i instanceof ki){let s=t;for(;s.parentNode!=i.dom;)s=s.parentNode;let u=s.previousSibling;for(;u&&!Xn.get(u);)u=u.previousSibling;let g=u?Xn.get(u).posAtEnd:i.posAtStart;return{from:g,to:g,node:s,text:t}}{for(;;){let{parent:u}=i;if(!u)return null;if(u instanceof ki)break;i=u}let s=i.posAtStart;return{from:s,to:s+i.length,node:i.dom,text:t}}}class qp extends Fo{constructor(e,t,i){super(),this.top=e,this.text=t,this.topView=i}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return Do}}function Jp(r,e,t){for(;;){if(3==r.nodeType)return r;if(1==r.nodeType&&e>0&&t<=0)e=Ya(r=r.childNodes[e-1]);else{if(!(1==r.nodeType&&e<r.childNodes.length&&t>=0))return null;r=r.childNodes[e],e=0}}}class LC{constructor(){this.changes=[]}compareRange(e,t){Wo(e,t,this.changes)}comparePoint(e,t){Wo(e,t,this.changes)}}function Er(r,e){return e.left>r?e.left-r:Math.max(0,r-e.right)}function Oy(r,e){return e.top>r?e.top-r:Math.max(0,r-e.bottom)}function cc(r,e){return r.top<e.bottom-1&&r.bottom>e.top+1}function In(r,e){return e<r.top?{top:e,left:r.left,right:r.right,bottom:r.bottom}:r}function em(r,e){return e>r.bottom?{top:r.top,left:r.left,right:r.right,bottom:e}:r}function nl(r,e,t){let i,s,u,g,I,B,ne,fe;for(let je=r.firstChild;je;je=je.nextSibling){let ze=yu(je);for(let At=0;At<ze.length;At++){let kt=ze[At];s&&cc(s,kt)&&(kt=In(em(kt,s.bottom),s.top));let Nt=Er(e,kt),Bt=Oy(t,kt);if(0==Nt&&0==Bt)return 3==je.nodeType?tm(je,e,t):nl(je,e,t);(!i||g>Bt||g==Bt&&u>Nt)&&(i=je,s=kt,u=Nt,g=Bt),0==Nt?t>kt.bottom&&(!ne||ne.bottom<kt.bottom)?(I=je,ne=kt):t<kt.top&&(!fe||fe.top>kt.top)&&(B=je,fe=kt):ne&&cc(ne,kt)?ne=em(ne,kt.bottom):fe&&cc(fe,kt)&&(fe=In(fe,kt.top))}}if(ne&&ne.bottom>=t?(i=I,s=ne):fe&&fe.top<=t&&(i=B,s=fe),!i)return{node:r,offset:0};let ye=Math.max(s.left,Math.min(s.right,e));return 3==i.nodeType?tm(i,ye,t):u||"true"!=i.contentEditable?{node:r,offset:Array.prototype.indexOf.call(r.childNodes,i)+(e>=(s.left+s.right)/2?1:0)}:nl(i,ye,t)}function tm(r,e,t){let i=r.nodeValue.length,s=-1,u=1e9,g=0;for(let I=0;I<i;I++){let B=Cu(r,I,I+1).getClientRects();for(let ne=0;ne<B.length;ne++){let fe=B[ne];if(fe.top==fe.bottom)continue;g||(g=e-fe.left);let ye=(fe.top>t?fe.top-t:t-fe.bottom)-1;if(fe.left-1<=e&&fe.right+1>=e&&ye<u){let Ne=e>=(fe.left+fe.right)/2,je=Ne;if((rn.chrome||rn.gecko)&&Cu(r,I).getBoundingClientRect().left==fe.right&&(je=!Ne),ye<=0)return{node:r,offset:I+(je?1:0)};s=I+(je?1:0),u=ye}}}return{node:r,offset:s>-1?s:g>0?r.nodeValue.length:0}}function Ed(r,{x:e,y:t},i,s=-1){var u;let B,g=r.contentDOM.getBoundingClientRect(),I=g.top+r.viewState.paddingTop,{docHeight:ne}=r.viewState,fe=t-I;if(fe<0)return 0;if(fe>ne)return r.state.doc.length;for(let Nt=r.defaultLineHeight/2,Bt=!1;B=r.elementAtHeight(fe),B.type!=si.Text;)for(;fe=s>0?B.bottom+Nt:B.top-Nt,!(fe>=0&&fe<=ne);){if(Bt)return i?null:0;Bt=!0,s=-s}t=I+fe;let ye=B.from;if(ye<r.viewport.from)return 0==r.viewport.from?0:i?null:Lu(r,g,B,e,t);if(ye>r.viewport.to)return r.viewport.to==r.state.doc.length?r.state.doc.length:i?null:Lu(r,g,B,e,t);let Ne=r.dom.ownerDocument,je=r.root.elementFromPoint?r.root:Ne,ze=je.elementFromPoint(e,t);ze&&!r.contentDOM.contains(ze)&&(ze=null),ze||(e=Math.max(g.left+1,Math.min(g.right-1,e)),ze=je.elementFromPoint(e,t),ze&&!r.contentDOM.contains(ze)&&(ze=null));let At,kt=-1;if(ze&&0!=(null===(u=r.docView.nearest(ze))||void 0===u?void 0:u.isEditable))if(Ne.caretPositionFromPoint){let Nt=Ne.caretPositionFromPoint(e,t);Nt&&({offsetNode:At,offset:kt}=Nt)}else if(Ne.caretRangeFromPoint){let Nt=Ne.caretRangeFromPoint(e,t);Nt&&(({startContainer:At,startOffset:kt}=Nt),rn.safari&&function Iy(r,e,t){let i;if(3!=r.nodeType||e!=(i=r.nodeValue.length))return!1;for(let s=r.nextSibling;s;s=s.nextSibling)if(1!=s.nodeType||"BR"!=s.nodeName)return!1;return Cu(r,i-1,i).getBoundingClientRect().left>t}(At,kt,e)&&(At=void 0))}if(!At||!r.docView.dom.contains(At)){let Nt=ki.find(r.docView,ye);if(!Nt)return fe>B.top+B.height/2?B.to:B.from;({node:At,offset:kt}=nl(Nt.dom,e,t))}return r.docView.posFromDOM(At,kt)}function Lu(r,e,t,i,s){let u=Math.round((i-e.left)*r.defaultCharacterWidth);r.lineWrapping&&t.height>1.5*r.defaultLineHeight&&(u+=Math.floor((s-t.top)/r.defaultLineHeight)*r.viewState.heightOracle.lineLength);let g=r.state.sliceDoc(t.from,t.to);return t.from+Sn(g,u,r.state.tabSize)}function Rs(r,e,t,i){let s=r.state.doc.lineAt(e.head),u=r.bidiSpans(s),g=r.textDirectionAt(s.from);for(let I=e,B=null;;){let ne=ac(s,u,g,I,t),fe=Up;if(!ne){if(s.number==(t?r.state.doc.lines:1))return I;fe="\n",s=r.state.doc.line(s.number+(t?1:-1)),u=r.bidiSpans(s),ne=_t.cursor(t?s.from:s.to)}if(B){if(!B(fe))return I}else{if(!i)return ne;B=i(fe)}I=ne}}function uc(r,e,t){let i=r.state.facet(Qi).map(s=>s(r));for(;;){let s=!1;for(let u of i)u.between(t.from-1,t.from+1,(g,I,B)=>{t.from>g&&t.from<I&&(t=e.from>t.from?_t.cursor(g,1):_t.cursor(I,-1),s=!0)});if(!s)return t}}class kd{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;for(let t in Hi){let i=Hi[t];e.contentDOM.addEventListener(t,s=>{!nm(e,s)||this.ignoreDuringComposition(s)||"keydown"==t&&this.keydown(e,s)||(this.mustFlushObserver(s)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,s)?s.preventDefault():i(e,s))}),this.registeredEvents.push(t)}rn.chrome&&rn.chrome_version>=102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,rn.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var i;let s;this.customHandlers=[];for(let u of t)if(s=null===(i=u.update(e).spec)||void 0===i?void 0:i.domEventHandlers){this.customHandlers.push({plugin:u.value,handlers:s});for(let g in s)this.registeredEvents.indexOf(g)<0&&"scroll"!=g&&(this.registeredEvents.push(g),e.contentDOM.addEventListener(g,I=>{nm(e,I)&&this.runCustomHandlers(g,e,I)&&I.preventDefault()}))}}runCustomHandlers(e,t,i){for(let s of this.customHandlers){let u=s.handlers[e];if(u)try{if(u.call(s.plugin,i,t)||i.defaultPrevented)return!0}catch(g){Xr(t.state,g)}}return!1}runScrollHandlers(e,t){for(let i of this.customHandlers){let s=i.handlers.scroll;if(s)try{s.call(i.plugin,t,e)}catch(u){Xr(e.state,u)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(rn.android&&rn.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let i;return!(!rn.ios||!(i=Bu.find(s=>s.keyCode==t.keyCode))||t.ctrlKey||t.altKey||t.metaKey||t.synthetic||(this.pendingIOSKey=i,setTimeout(()=>this.flushIOSKey(e),250),0))}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&(this.pendingIOSKey=void 0,ca(e.contentDOM,t.key,t.keyCode))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(rn.safari&&Date.now()-this.compositionEndedAt<100)&&(this.compositionEndedAt=0,!0))}mustFlushObserver(e){return"keydown"==e.type&&229!=e.keyCode||"compositionend"==e.type&&!rn.ios}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const Bu=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],hc=[16,17,18,20,91,92,224,225];class Ey{constructor(e,t,i,s){this.view=e,this.style=i,this.mustSelect=s,this.lastEvent=t;let u=e.contentDOM.ownerDocument;u.addEventListener("mousemove",this.move=this.move.bind(this)),u.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Sr.allowMultipleSelections)&&function ky(r,e){let t=r.state.facet(vy);return t.length?t[0](e):rn.mac?e.metaKey:e.ctrlKey}(e,t),this.dragMove=function Td(r,e){let t=r.state.facet(yy);return t.length?t[0](e):rn.mac?!e.altKey:!e.ctrlKey}(e,t),this.dragging=!(!function Ty(r,e){let{main:t}=r.state.selection;if(t.empty)return!1;let i=ld(r.root);if(0==i.rangeCount)return!0;let s=i.getRangeAt(0).getClientRects();for(let u=0;u<s.length;u++){let g=s[u];if(g.left<=e.clientX&&g.right>=e.clientX&&g.top<=e.clientY&&g.bottom>=e.clientY)return!0}return!1}(e,t)||1!=il(t))&&null,!1===this.dragging&&(t.preventDefault(),this.select(t))}move(e){if(0==e.buttons)return this.destroy();!1===this.dragging&&this.select(this.lastEvent=e)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function nm(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let i,t=e.target;t!=r.contentDOM;t=t.parentNode)if(!t||11==t.nodeType||(i=Xn.get(t))&&i.ignoreEvent(e))return!1;return!0}const Hi=Object.create(null),im=rn.ie&&rn.ie_version<15||rn.ios&&rn.webkit_version<604;function rm(r,e){let i,{state:t}=r,s=1,u=t.toText(e),g=u.lines==t.selection.ranges.length;if(null!=rl&&t.selection.ranges.every(B=>B.empty)&&rl==u.toString()){let B=-1;i=t.changeByRange(ne=>{let fe=t.doc.lineAt(ne.from);if(fe.from==B)return{range:ne};B=fe.from;let ye=t.toText((g?u.line(s++).text:e)+t.lineBreak);return{changes:{from:fe.from,insert:ye},range:_t.cursor(ne.from+ye.length)}})}else i=g?t.changeByRange(B=>{let ne=u.line(s++);return{changes:{from:B.from,to:B.to,insert:ne.text},range:_t.cursor(B.from+ne.length)}}):t.replaceSelection(u);r.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Hi.keydown=(r,e)=>{r.inputState.setSelectionOrigin("select"),27==e.keyCode?r.inputState.lastEscPress=Date.now():hc.indexOf(e.keyCode)<0&&(r.inputState.lastEscPress=0)};let om=0;function Rd(r,e,t,i){if(1==i)return _t.cursor(e,t);if(2==i)return function Ay(r,e,t=1){let i=r.charCategorizer(e),s=r.doc.lineAt(e),u=e-s.from;if(0==s.length)return _t.cursor(e);0==u?t=1:u==s.length&&(t=-1);let g=u,I=u;t<0?g=zr(s.text,u,!1):I=zr(s.text,u);let B=i(s.text.slice(g,I));for(;g>0;){let ne=zr(s.text,g,!1);if(i(s.text.slice(ne,g))!=B)break;g=ne}for(;I<s.length;){let ne=zr(s.text,I);if(i(s.text.slice(I,ne))!=B)break;I=ne}return _t.range(g+s.from,I+s.from)}(r.state,e,t);{let s=ki.find(r.docView,e),u=r.state.doc.lineAt(s?s.posAtEnd:e),I=s?s.posAtEnd:u.to;return I<r.state.doc.length&&I==u.to&&I++,_t.range(s?s.posAtStart:u.from,I)}}Hi.touchstart=(r,e)=>{om=Date.now(),r.inputState.setSelectionOrigin("select.pointer")},Hi.touchmove=r=>{r.inputState.setSelectionOrigin("select.pointer")},Hi.mousedown=(r,e)=>{if(r.observer.flush(),om>Date.now()-2e3&&1==il(e))return;let t=null;for(let i of r.state.facet(by))if(t=i(r,e),t)break;if(!t&&0==e.button&&(t=function Bi(r,e){let t=am(r,e),i=il(e),s=r.state.selection,u=t,g=e;return{update(I){I.docChanged&&(t&&(t.pos=I.changes.mapPos(t.pos)),s=s.map(I.changes),g=null)},get(I,B,ne){let fe;if(g&&I.clientX==g.clientX&&I.clientY==g.clientY?fe=u:(fe=u=am(r,I),g=I),!fe||!t)return s;let ye=Rd(r,fe.pos,fe.bias,i);if(t.pos!=fe.pos&&!B){let Ne=Rd(r,t.pos,t.bias,i),je=Math.min(Ne.from,ye.from),ze=Math.max(Ne.to,ye.to);ye=je<ye.from?_t.range(je,ze):_t.range(ze,je)}return B?s.replaceRange(s.main.extend(ye.from,ye.to)):ne?s.addRange(ye):_t.create([ye])}}}(r,e)),t){let i=r.root.activeElement!=r.contentDOM;i&&r.observer.ignore(()=>la(r.contentDOM)),r.inputState.startMouseSelection(new Ey(r,e,t,i))}};let sm=(r,e)=>r>=e.top&&r<=e.bottom,Py=(r,e,t)=>sm(e,t)&&r>=t.left&&r<=t.right;function Ry(r,e,t,i){let s=ki.find(r.docView,e);if(!s)return 1;let u=e-s.posAtStart;if(0==u)return 1;if(u==s.length)return-1;let g=s.coordsAt(u,-1);if(g&&Py(t,i,g))return-1;let I=s.coordsAt(u,1);return I&&Py(t,i,I)?1:g&&sm(i,g)?-1:1}function am(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:Ry(r,t,e.clientX,e.clientY)}}const FC=rn.ie&&rn.ie_version<=11;let lm=null,cm=0,um=0;function il(r){if(!FC)return r.detail;let e=lm,t=um;return lm=r,um=Date.now(),cm=!e||t>Date.now()-400&&Math.abs(e.clientX-r.clientX)<2&&Math.abs(e.clientY-r.clientY)<2?(cm+1)%3:1}function $d(r,e,t,i){if(!t)return;let s=r.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:u}=r.inputState,g=i&&u&&u.dragging&&u.dragMove?{from:u.dragging.from,to:u.dragging.to}:null,I={from:s,insert:t},B=r.state.changes(g?[g,I]:I);r.focus(),r.dispatch({changes:B,selection:{anchor:B.mapPos(s,-1),head:B.mapPos(s,1)},userEvent:g?"move.drop":"input.drop"})}Hi.dragstart=(r,e)=>{let{selection:{main:t}}=r.state,{mouseSelection:i}=r.inputState;i&&(i.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",r.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")},Hi.drop=(r,e)=>{if(!e.dataTransfer)return;if(r.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let i=Array(t.length),s=0,u=()=>{++s==t.length&&$d(r,e,i.filter(g=>null!=g).join(r.state.lineBreak),!1)};for(let g=0;g<t.length;g++){let I=new FileReader;I.onerror=u,I.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(I.result)||(i[g]=I.result),u()},I.readAsText(t[g])}}else $d(r,e,e.dataTransfer.getData("Text"),!0)},Hi.paste=(r,e)=>{if(r.state.readOnly)return e.preventDefault();r.observer.flush();let t=im?null:e.clipboardData;t?(rm(r,t.getData("text/plain")),e.preventDefault()):function Pd(r){let e=r.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{r.focus(),t.remove(),rm(r,t.value)},50)}(r)};let rl=null;function hm(r){setTimeout(()=>{r.hasFocus!=r.inputState.notifiedFocused&&r.update([])},10)}function Du(r,e){if(r.docView.compositionDeco.size){r.inputState.rapidCompositionStart=e;try{r.update([])}finally{r.inputState.rapidCompositionStart=!1}}}Hi.copy=Hi.cut=(r,e)=>{let{text:t,ranges:i,linewise:s}=function zi(r){let e=[],t=[],i=!1;for(let s of r.selection.ranges)s.empty||(e.push(r.sliceDoc(s.from,s.to)),t.push(s));if(!e.length){let s=-1;for(let{from:u}of r.selection.ranges){let g=r.doc.lineAt(u);g.number>s&&(e.push(g.text),t.push({from:g.from,to:Math.min(r.doc.length,g.to+1)})),s=g.number}i=!0}return{text:e.join(r.lineBreak),ranges:t,linewise:i}}(r.state);if(!t&&!s)return;rl=s?t:null;let u=im?null:e.clipboardData;u?(e.preventDefault(),u.clearData(),u.setData("text/plain",t)):function $y(r,e){let t=r.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),r.focus()},50)}(r,t),"cut"==e.type&&!r.state.readOnly&&r.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})},Hi.focus=hm,Hi.blur=r=>{r.observer.clearSelectionRange(),hm(r)},Hi.compositionstart=Hi.compositionupdate=r=>{null==r.inputState.compositionFirstChange&&(r.inputState.compositionFirstChange=!0),r.inputState.composing<0&&(r.inputState.composing=0,r.docView.compositionDeco.size&&(r.observer.flush(),Du(r,!0)))},Hi.compositionend=r=>{r.inputState.composing=-1,r.inputState.compositionEndedAt=Date.now(),r.inputState.compositionFirstChange=null,setTimeout(()=>{r.inputState.composing<0&&Du(r,!1)},50)},Hi.contextmenu=r=>{r.inputState.lastContextMenu=Date.now()},Hi.beforeinput=(r,e)=>{var t;let i;if(rn.chrome&&rn.android&&(i=Bu.find(s=>s.inputType==e.inputType))&&(r.observer.delayAndroidKey(i.key,i.keyCode),"Backspace"==i.key||"Delete"==i.key)){let s=(null===(t=window.visualViewport)||void 0===t?void 0:t.height)||0;setTimeout(()=>{var u;((null===(u=window.visualViewport)||void 0===u?void 0:u.height)||0)>s+10&&r.hasFocus&&(r.contentDOM.blur(),r.focus())},100)}};const dm=["pre-wrap","normal","pre-line","break-spaces"];class fm{constructor(){this.doc=Vn.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength)),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return dm.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let s=e[i];s<0?i++:this.heightSamples[Math.floor(10*s)]||(t=!0,this.heightSamples[Math.floor(10*s)]=!0)}return t}refresh(e,t,i,s,u){let g=dm.indexOf(e)>-1,I=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=g;if(this.lineWrapping=g,this.lineHeight=t,this.charWidth=i,this.lineLength=s,I){this.heightSamples={};for(let B=0;B<u.length;B++){let ne=u[B];ne<0?B++:this.heightSamples[Math.floor(10*ne)]=!0}}return I}}class pm{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class $s{constructor(e,t,i,s,u){this.from=e,this.length=t,this.top=i,this.height=s,this.type=u}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new $s(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var ti=function(r){return r[r.ByPos=0]="ByPos",r[r.ByHeight=1]="ByHeight",r[r.ByPosNoHeight=2]="ByPosNoHeight",r}(ti||(ti={}));const ol=.001;class ur{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>ol&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return ur.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,s){let u=this;for(let g=s.length-1;g>=0;g--){let{fromA:I,toA:B,fromB:ne,toB:fe}=s[g],ye=u.lineAt(I,ti.ByPosNoHeight,t,0,0),Ne=ye.to>=B?ye:u.lineAt(B,ti.ByPosNoHeight,t,0,0);for(fe+=Ne.to-B,B=Ne.to;g>0&&ye.from<=s[g-1].toA;)I=s[g-1].fromA,ne=s[g-1].fromB,g--,I<ye.from&&(ye=u.lineAt(I,ti.ByPosNoHeight,t,0,0));ne+=ye.from-I,I=ye.from;let je=Nd.build(i,e,ne,fe);u=u.replace(I,B,je)}return u.updateHeight(i,0)}static empty(){return new yr(0,0)}static of(e){if(1==e.length)return e[0];let t=0,i=e.length,s=0,u=0;for(;;)if(t==i)if(s>2*u){let I=e[t-1];I.break?e.splice(--t,1,I.left,null,I.right):e.splice(--t,1,I.left,I.right),i+=1+I.break,s-=I.size}else{if(!(u>2*s))break;{let I=e[i];I.break?e.splice(i,1,I.left,null,I.right):e.splice(i,1,I.left,I.right),i+=2+I.break,u-=I.size}}else if(s<u){let I=e[t++];I&&(s+=I.size)}else{let I=e[--i];I&&(u+=I.size)}let g=0;return null==e[t-1]?(g=1,t--):null==e[t]&&(g=1,i++),new Fu(ur.of(e.slice(0,t)),g,ur.of(e.slice(i)))}}ur.prototype.size=1;class Md extends ur{constructor(e,t,i){super(e,t),this.type=i}blockAt(e,t,i,s){return new $s(s,this.length,i,this.height,this.type)}lineAt(e,t,i,s,u){return this.blockAt(0,i,s,u)}forEachLine(e,t,i,s,u,g){e<=u+this.length&&t>=u&&g(this.blockAt(0,i,s,u))}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more&&this.setHeight(e,s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class yr extends Md{constructor(e,t){super(e,t,si.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,i){let s=i[0];return 1==i.length&&(s instanceof yr||s instanceof Ui&&4&s.flags)&&Math.abs(this.length-s.length)<10?(s instanceof Ui?s=new yr(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):ur.of(i)}updateHeight(e,t=0,i=!1,s){return s&&s.from<=t&&s.more?this.setHeight(e,s.heights[s.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ui extends ur{constructor(e){super(e,0)}lines(e,t){let i=e.lineAt(t).number,s=e.lineAt(t+this.length).number;return{firstLine:i,lastLine:s,lineHeight:this.height/(s-i+1)}}blockAt(e,t,i,s){let{firstLine:u,lastLine:g,lineHeight:I}=this.lines(t,s),B=Math.max(0,Math.min(g-u,Math.floor((e-i)/I))),{from:ne,length:fe}=t.line(u+B);return new $s(ne,fe,i+I*B,I,si.Text)}lineAt(e,t,i,s,u){if(t==ti.ByHeight)return this.blockAt(e,i,s,u);if(t==ti.ByPosNoHeight){let{from:ye,to:Ne}=i.lineAt(e);return new $s(ye,Ne-ye,0,0,si.Text)}let{firstLine:g,lineHeight:I}=this.lines(i,u),{from:B,length:ne,number:fe}=i.lineAt(e);return new $s(B,ne,s+I*(fe-g),I,si.Text)}forEachLine(e,t,i,s,u,g){let{firstLine:I,lineHeight:B}=this.lines(i,u);for(let ne=Math.max(e,u),fe=Math.min(u+this.length,t);ne<=fe;){let ye=i.lineAt(ne);ne==e&&(s+=B*(ye.number-I)),g(new $s(ye.from,ye.length,s,B,si.Text)),s+=B,ne=ye.to+1}}replace(e,t,i){let s=this.length-t;if(s>0){let u=i[i.length-1];u instanceof Ui?i[i.length-1]=new Ui(u.length+s):i.push(null,new Ui(s-1))}if(e>0){let u=i[0];u instanceof Ui?i[0]=new Ui(e+u.length):i.unshift(new Ui(e-1),null)}return ur.of(i)}decomposeLeft(e,t){t.push(new Ui(e-1),null)}decomposeRight(e,t){t.push(null,new Ui(this.length-e-1))}updateHeight(e,t=0,i=!1,s){let u=t+this.length;if(s&&s.from<=t+this.length&&s.more){let g=[],I=Math.max(t,s.from),B=-1,ne=e.heightChanged;for(s.from>t&&g.push(new Ui(s.from-t-1).updateHeight(e,t));I<=u&&s.more;){let ye=e.doc.lineAt(I).length;g.length&&g.push(null);let Ne=s.heights[s.index++];-1==B?B=Ne:Math.abs(Ne-B)>=ol&&(B=-2);let je=new yr(ye,Ne);je.outdated=!1,g.push(je),I+=ye+1}I<=u&&g.push(null,new Ui(u-I).updateHeight(e,I));let fe=ur.of(g);return e.heightChanged=ne||B<0||Math.abs(fe.height-this.height)>=ol||Math.abs(B-this.lines(e.doc,t).lineHeight)>=ol,fe}return(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class Fu extends ur{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return 1&this.flags}blockAt(e,t,i,s){let u=i+this.left.height;return e<u?this.left.blockAt(e,t,i,s):this.right.blockAt(e,t,u,s+this.left.length+this.break)}lineAt(e,t,i,s,u){let g=s+this.left.height,I=u+this.left.length+this.break,B=t==ti.ByHeight?e<g:e<I,ne=B?this.left.lineAt(e,t,i,s,u):this.right.lineAt(e,t,i,g,I);if(this.break||(B?ne.to<I:ne.from>I))return ne;let fe=t==ti.ByPosNoHeight?ti.ByPosNoHeight:ti.ByPos;return B?ne.join(this.right.lineAt(I,fe,i,g,I)):this.left.lineAt(I,fe,i,s,u).join(ne)}forEachLine(e,t,i,s,u,g){let I=s+this.left.height,B=u+this.left.length+this.break;if(this.break)e<B&&this.left.forEachLine(e,t,i,s,u,g),t>=B&&this.right.forEachLine(e,t,i,I,B,g);else{let ne=this.lineAt(B,ti.ByPos,i,s,u);e<ne.from&&this.left.forEachLine(e,ne.from-1,i,s,u,g),ne.to>=e&&ne.from<=t&&g(ne),t>ne.to&&this.right.forEachLine(ne.to+1,t,i,I,B,g)}}replace(e,t,i){let s=this.left.length+this.break;if(t<s)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,t-s,i));let u=[];e>0&&this.decomposeLeft(e,u);let g=u.length;for(let I of i)u.push(I);if(e>0&&sl(u,g-1),t<this.length){let I=u.length;this.decomposeRight(t,u),sl(u,I)}return ur.of(u)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,s=i+this.break;if(e>=s)return this.right.decomposeRight(e-s,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<s&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?ur.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,s){let{left:u,right:g}=this,I=t+u.length+this.break,B=null;return s&&s.from<=t+u.length&&s.more?B=u=u.updateHeight(e,t,i,s):u.updateHeight(e,t,i),s&&s.from<=I+g.length&&s.more?B=g=g.updateHeight(e,I,i,s):g.updateHeight(e,I,i),B?this.balanced(u,g):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function sl(r,e){let t,i;null==r[e]&&(t=r[e-1])instanceof Ui&&(i=r[e+1])instanceof Ui&&r.splice(e-1,3,new Ui(t.length+1+i.length))}class Nd{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof yr?s.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new yr(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let s=i.widget?i.widget.estimatedHeight:0;s<0&&(s=this.oracle.lineHeight);let u=t-e;i.block?this.addBlock(new Md(u,s,i.type)):(u||s>=5)&&this.addLineDeco(s,u)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new yr(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new Ui(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof yr)return e;let t=new yr(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==si.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=si.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let i=this.ensureLine();i.length+=t,i.collapsed+=t,i.widgetHeight=Math.max(i.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof yr||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new yr(0,-1));let i=e;for(let s of this.nodes)s instanceof yr&&s.updateHeight(this.oracle,i),i+=s?s.length:1;return this.nodes}static build(e,t,i,s){let u=new Nd(i,e);return Ci.spans(t,i,s,u,0),u.finish(i)}}class Ld{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,s){(e<t||i&&i.heightRelevant||s&&s.heightRelevant)&&Wo(e,t,this.changes,5)}}function mm(r,e){let t=r.getBoundingClientRect(),i=Math.max(0,t.left),s=Math.min(innerWidth,t.right),u=Math.max(0,t.top),g=Math.min(innerHeight,t.bottom),I=r.ownerDocument.body;for(let B=r.parentNode;B&&B!=I;)if(1==B.nodeType){let ne=B,fe=window.getComputedStyle(ne);if((ne.scrollHeight>ne.clientHeight||ne.scrollWidth>ne.clientWidth)&&"visible"!=fe.overflow){let ye=ne.getBoundingClientRect();i=Math.max(i,ye.left),s=Math.min(s,ye.right),u=Math.max(u,ye.top),g=Math.min(g,ye.bottom)}B="absolute"==fe.position||"fixed"==fe.position?ne.offsetParent:ne.parentNode}else{if(11!=B.nodeType)break;B=B.host}return{left:i-t.left,right:Math.max(i,s)-t.left,top:u-(t.top+e),bottom:Math.max(u,g)-(t.top+e)}}function gm(r,e){let t=r.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Bd{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let s=e[i],u=t[i];if(s.from!=u.from||s.to!=u.to||s.size!=u.size)return!1}return!0}draw(e){return an.replace({widget:new My(this.size,e)}).range(this.from,this.to)}}class My extends Fo{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Wu{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new fm,this.scaler=Gu,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=yi.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=e.facet(Ru).filter(t=>"function"!=typeof t),this.heightMap=ur.empty().applyChanges(this.stateDeco,Vn.empty,this.heightOracle.setDoc(e.doc),[new os(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=an.set(this.lineGaps.map(t=>t.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let s=i?t.head:t.anchor;if(!e.some(({from:u,to:g})=>s>=u&&s<=g)){let{from:u,to:g}=this.lineBlockAt(s);e.push(new Dd(u,g))}}this.viewports=e.sort((i,s)=>i.from-s.from),this.scaler=this.heightMap.height<=7e6?Gu:new Ny(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,e=>{this.viewportLines.push(1==this.scaler.scale?e:ss(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Ru).filter(ne=>"function"!=typeof ne);let u=os.extendWithRanges(e.changedRanges,function GC(r,e,t){let i=new Ld;return Ci.compare(r,e,t,i,0),i.changes}(i,this.stateDeco,e?e.changes:Mi.empty(this.state.doc.length))),g=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),u),this.heightMap.height!=g&&(e.flags|=2);let I=u.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<I.from||t.range.head>I.to)||!this.viewportIsAppropriate(I))&&(I=this.getViewport(0,t));let B=!e.changes.empty||2&e.flags||I.from!=this.viewport.from||I.to!=this.viewport.to;this.viewport=I,this.updateForViewport(),B&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),s=this.heightOracle,u=i.whiteSpace;this.defaultTextDirection="rtl"==i.direction?yi.RTL:yi.LTR;let g=this.heightOracle.mustRefreshForWrapping(u),I=g||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;let B=0,ne=0,fe=parseInt(i.paddingTop)||0,ye=parseInt(i.paddingBottom)||0;(this.paddingTop!=fe||this.paddingBottom!=ye)&&(this.paddingTop=fe,this.paddingBottom=ye,B|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(I=!0),this.editorWidth=e.scrollDOM.clientWidth,B|=8);let Ne=(this.printing?gm:mm)(t,this.paddingTop),je=Ne.top-this.pixelViewport.top,ze=Ne.bottom-this.pixelViewport.bottom;this.pixelViewport=Ne;let At=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(At!=this.inView&&(this.inView=At,At&&(I=!0)),!this.inView)return 0;let kt=t.clientWidth;if((this.contentDOMWidth!=kt||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=kt,this.editorHeight=e.scrollDOM.clientHeight,B|=8),I){let Bt=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(Bt)&&(g=!0),g||s.lineWrapping&&Math.abs(kt-this.contentDOMWidth)>s.charWidth){let{lineHeight:Kt,charWidth:Ht}=e.docView.measureTextSize();g=s.refresh(u,Kt,Ht,kt/Ht,Bt),g&&(e.docView.minWidth=0,B|=8)}je>0&&ze>0?ne=Math.max(je,ze):je<0&&ze<0&&(ne=Math.min(je,ze)),s.heightChanged=!1;for(let Kt of this.viewports){let Ht=Kt.from==this.viewport.from?Bt:e.docView.measureVisibleLineHeights(Kt);this.heightMap=this.heightMap.updateHeight(s,0,g,new pm(Kt.from,Ht))}s.heightChanged&&(B|=2)}let Nt=!this.viewportIsAppropriate(this.viewport,ne)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return Nt&&(this.viewport=this.getViewport(ne,this.scrollTarget)),this.updateForViewport(),(2&B||Nt)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(g?[]:this.lineGaps)),B|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),B}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,u=this.state.doc,{visibleTop:g,visibleBottom:I}=this,B=new Dd(s.lineAt(g-1e3*i,ti.ByHeight,u,0,0).from,s.lineAt(I+1e3*(1-i),ti.ByHeight,u,0,0).to);if(t){let{head:ne}=t.range;if(ne<B.from||ne>B.to){let Ne,fe=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),ye=s.lineAt(ne,ti.ByPos,u,0,0);Ne="center"==t.y?(ye.top+ye.bottom)/2-fe/2:"start"==t.y||"nearest"==t.y&&ne<B.from?ye.top:ye.bottom-fe,B=new Dd(s.lineAt(Ne-500,ti.ByHeight,u,0,0).from,s.lineAt(Ne+fe+500,ti.ByHeight,u,0,0).to)}}return B}mapViewport(e,t){let i=t.mapPos(e.from,-1),s=t.mapPos(e.to,1);return new Dd(this.heightMap.lineAt(i,ti.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(s,ti.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,ti.ByPos,this.state.doc,0,0),{bottom:u}=this.heightMap.lineAt(t,ti.ByPos,this.state.doc,0,0),{visibleTop:g,visibleBottom:I}=this;return(0==e||s<=g-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||u>=I+Math.max(10,Math.min(i,250)))&&s>g-2e3&&u<I+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let s of e)t.touchesRange(s.from,s.to)||i.push(new Bd(t.mapPos(s.from),t.mapPos(s.to),s.size));return i}ensureLineGaps(e){let t=[];if(this.defaultTextDirection!=yi.LTR)return t;for(let i of this.viewportLines){if(i.length<4e3)continue;let u,g,s=jC(i.from,i.to,this.stateDeco);if(s.total<4e3)continue;if(this.heightOracle.lineWrapping){let ne=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;u=Fd(s,(this.visibleTop-i.top-ne)/i.height),g=Fd(s,(this.visibleBottom-i.top+ne)/i.height)}else{let ne=s.total*this.heightOracle.charWidth,fe=2e3*this.heightOracle.charWidth;u=Fd(s,(this.pixelViewport.left-fe)/ne),g=Fd(s,(this.pixelViewport.right+fe)/ne)}let I=[];u>i.from&&I.push({from:i.from,to:u}),g<i.to&&I.push({from:g,to:i.to});let B=this.state.selection.main;B.from>=i.from&&B.from<=i.to&&ym(I,B.from-10,B.from+10),!B.empty&&B.to>=i.from&&B.to<=i.to&&ym(I,B.to-10,B.to+10);for(let{from:ne,to:fe}of I)fe-ne>1e3&&t.push(xi(e,ye=>ye.from>=i.from&&ye.to<=i.to&&Math.abs(ye.from-ne)<1e3&&Math.abs(ye.to-fe)<1e3)||new Bd(ne,fe,this.gapSize(i,ne,fe,s)))}return t}gapSize(e,t,i,s){let u=vm(s,i)-vm(s,t);return this.heightOracle.lineWrapping?e.height*u:s.total*this.heightOracle.charWidth*u}updateLineGaps(e){Bd.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=an.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Ci.spans(e,this.viewport.from,this.viewport.to,{span(s,u){t.push({from:s,to:u})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((s,u)=>s.from!=t[u].from||s.to!=t[u].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||ss(this.heightMap.lineAt(e,ti.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return ss(this.heightMap.lineAt(this.scaler.fromDOM(e),ti.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return ss(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Dd{constructor(e,t){this.from=e,this.to=t}}function jC(r,e,t){let i=[],s=r,u=0;return Ci.spans(t,r,e,{span(){},point(g,I){g>s&&(i.push({from:s,to:g}),u+=g-s),s=I}},20),s<e&&(i.push({from:s,to:e}),u+=e-s),{total:u,ranges:i}}function Fd({total:r,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(r*t);for(let s=0;;s++){let{from:u,to:g}=e[s],I=g-u;if(i<=I)return u+i;i-=I}}function vm(r,e){let t=0;for(let{from:i,to:s}of r.ranges){if(e<=s){t+=e-i;break}t+=s-i}return t/r.total}function ym(r,e,t){for(let i=0;i<r.length;i++){let s=r[i];if(s.from<t&&s.to>e){let u=[];s.from<e&&u.push({from:s.from,to:e}),s.to>t&&u.push({from:t,to:s.to}),r.splice(i,1,...u),i+=u.length-1}}}function xi(r,e){for(let t of r)if(e(t))return t}const Gu={toDOM:r=>r,fromDOM:r=>r,scale:1};class Ny{constructor(e,t,i){let s=0,u=0,g=0;this.viewports=i.map(({from:I,to:B})=>{let ne=t.lineAt(I,ti.ByPos,e,0,0).top,fe=t.lineAt(B,ti.ByPos,e,0,0).bottom;return s+=fe-ne,{from:I,to:B,top:ne,bottom:fe,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(t.height-s);for(let I of this.viewports)I.domTop=g+(I.top-u)*this.scale,g=I.domBottom=I.domTop+(I.bottom-I.top),u=I.bottom}toDOM(e){for(let t=0,i=0,s=0;;t++){let u=t<this.viewports.length?this.viewports[t]:null;if(!u||e<u.top)return s+(e-i)*this.scale;if(e<=u.bottom)return u.domTop+(e-u.top);i=u.bottom,s=u.domBottom}}fromDOM(e){for(let t=0,i=0,s=0;;t++){let u=t<this.viewports.length?this.viewports[t]:null;if(!u||e<u.domTop)return i+(e-s)/this.scale;if(e<=u.domBottom)return u.top+(e-u.domTop);i=u.bottom,s=u.domBottom}}}function ss(r,e){if(1==e.scale)return r;let t=e.toDOM(r.top),i=e.toDOM(r.bottom);return new $s(r.from,r.length,t,i-t,Array.isArray(r.type)?r.type.map(s=>ss(s,e)):r.type)}const Wd=sn.define({combine:r=>r.join(" ")}),al=sn.define({combine:r=>r.indexOf(!0)>-1}),br=Ft.V.newName(),ju=Ft.V.newName(),Ly=Ft.V.newName(),Gd={"&light":"."+ju,"&dark":"."+Ly};function Zu(r,e,t){return new Ft.V(e,{finish:i=>/&/.test(i)?i.replace(/&\w*/,s=>{if("&"==s)return r;if(!t||!t[s])throw new RangeError(`Unsupported selector: ${s}`);return t[s]}):r+" "+i})}const ZC=Zu("."+br,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Gd),bm={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Cm=rn.ie&&rn.ie_version<=11;class By{constructor(e,t,i){this.view=e,this.onChange=t,this.onScrollChanged=i,this.active=!1,this.selectionRange=new hd,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(s=>{for(let u of s)this.queue.push(u);(rn.ie&&rn.ie_version<=11||rn.ios&&e.composing)&&s.some(u=>"childList"==u.type&&u.removedNodes.length||"characterData"==u.type&&u.oldValue.length>u.target.nodeValue.length)?this.flushSoon():this.flush()}),Cm&&(this.onCharData=s=>{this.queue.push({target:s.target,type:"characterData",oldValue:s.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),window.addEventListener("resize",this.onResize=this.onResize.bind(this)),"function"==typeof ResizeObserver&&(this.resize=new ResizeObserver(()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()}),this.resize.observe(e.scrollDOM)),window.addEventListener("beforeprint",this.onPrint=this.onPrint.bind(this)),this.start(),window.addEventListener("scroll",this.onScroll=this.onScroll.bind(this)),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(s=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),s.length>0&&s[s.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(s=>{s.length>0&&s[s.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange(),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:t}=this,i=this.selectionRange;if(t.state.facet(Pu)?t.root.activeElement!=this.dom:!Dp(t.dom,i))return;let s=i.anchorNode&&t.docView.nearest(i.anchorNode);s&&s.ignoreEvent(e)||((rn.ie&&rn.ie_version<=11||rn.android&&rn.chrome)&&!t.state.selection.main.empty&&i.focusNode&&cd(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1))}readSelectionRange(){let{root:e}=this.view,t=ld(e),i=rn.safari&&11==e.nodeType&&function Ka(){let r=document.activeElement;for(;r&&r.shadowRoot;)r=r.shadowRoot.activeElement;return r}()==this.view.contentDOM&&function Dy(r){let e=null;function t(B){B.preventDefault(),B.stopImmediatePropagation(),e=B.getTargetRanges()[0]}if(r.contentDOM.addEventListener("beforeinput",t,!0),document.execCommand("indent"),r.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let i=e.startContainer,s=e.startOffset,u=e.endContainer,g=e.endOffset,I=r.docView.domAtPos(r.state.selection.main.anchor);return cd(I.node,I.offset,u,g)&&([i,s,u,g]=[u,g,i,s]),{anchorNode:i,anchorOffset:s,focusNode:u,focusOffset:g}}(this.view)||t;return!this.selectionRange.eq(i)&&(this.selectionRange.setRange(i),this.selectionChanged=!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(1==i.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else{if(11!=i.nodeType)break;i=i.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,bm),Cm&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Cm&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){this.delayedAndroidKey||requestAnimationFrame(()=>{let i=this.delayedAndroidKey;this.delayedAndroidKey=null,this.delayedFlush=-1,this.flush()||ca(this.view.contentDOM,i.key,i.keyCode)}),(!this.delayedAndroidKey||"Enter"==e)&&(this.delayedAndroidKey={key:e,keyCode:t})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout(()=>{this.delayedFlush=-1,this.flush()},20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}processRecords(){let e=this.queue;for(let u of this.observer.takeRecords())e.push(u);e.length&&(this.queue=[]);let t=-1,i=-1,s=!1;for(let u of e){let g=this.readMutation(u);g&&(g.typeOver&&(s=!0),-1==t?({from:t,to:i}=g):(t=Math.min(g.from,t),i=Math.max(g.to,i)))}return{from:t,to:i,typeOver:s}}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return;e&&this.readSelectionRange();let{from:t,to:i,typeOver:s}=this.processRecords(),u=this.selectionChanged&&Dp(this.dom,this.selectionRange);if(t<0&&!u)return;this.selectionChanged=!1;let g=this.view.state,I=this.onChange(t,i,s);return this.view.state==g&&this.view.update([]),I}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.dirty|=4),"childList"==e.type){let i=wm(t,e.previousSibling||e.target.previousSibling,-1),s=wm(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:s?t.posBefore(s):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}destroy(){var e,t,i;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(i=this.resize)||void 0===i||i.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),window.removeEventListener("beforeprint",this.onPrint),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function wm(r,e,t){for(;e;){let i=Xn.get(e);if(i&&i.parent==r)return i;let s=e.parentNode;e=s!=r.dom?s:t>0?e.nextSibling:e.previousSibling}return null}let $n=(()=>{class r{constructor(t={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=t.dispatch||(i=>this.update([i])),this.dispatch=this.dispatch.bind(this),this.root=t.root||function Vi(r){for(;r;){if(r&&(9==r.nodeType||11==r.nodeType&&r.host))return r;r=r.assignedSlot||r.parentNode}return null}(t.parent)||document,this.viewState=new Wu(t.state||Sr.create()),this.plugins=this.state.facet(oc).map(i=>new Ti(i));for(let i of this.plugins)i.update(this);this.observer=new By(this,(i,s,u)=>function jd(r,e,t,i){let s,u,g=r.state.selection.main;if(e>-1){let I=r.docView.domBoundsAround(e,t,0);if(!I||r.state.readOnly)return!1;let{from:B,to:ne}=I,fe=r.docView.impreciseHead||r.docView.impreciseAnchor?[]:function VC(r){let e=[];if(r.root.activeElement!=r.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:s,focusOffset:u}=r.observer.selectionRange;return t&&(e.push(new Nu(t,i)),(s!=t||u!=i)&&e.push(new Nu(s,u))),e}(r),ye=new fa(fe,r.state);ye.readRange(I.startDOM,I.endDOM);let Ne=g.from,je=null;(8===r.inputState.lastKeyCode&&r.inputState.lastKeyTime>Date.now()-100||rn.android&&ye.text.length<ne-B)&&(Ne=g.to,je="end");let ze=function Fy(r,e,t,i){let s=Math.min(r.length,e.length),u=0;for(;u<s&&r.charCodeAt(u)==e.charCodeAt(u);)u++;if(u==s&&r.length==e.length)return null;let g=r.length,I=e.length;for(;g>0&&I>0&&r.charCodeAt(g-1)==e.charCodeAt(I-1);)g--,I--;return"end"==i&&(t-=g+Math.max(0,u-Math.min(g,I))-u),g<u&&r.length<e.length?(u-=t<=u&&t>=g?u-t:0,I=u+(I-g),g=u):I<u&&(u-=t<=u&&t>=I?u-t:0,g=u+(g-I),I=u),{from:u,toA:g,toB:I}}(r.state.doc.sliceString(B,ne,"\uffff"),ye.text,Ne-B,je);ze&&(rn.chrome&&13==r.inputState.lastKeyCode&&ze.toB==ze.from+2&&"\uffff\uffff"==ye.text.slice(ze.from,ze.toB)&&ze.toB--,s={from:B+ze.from,to:B+ze.toA,insert:Vn.of(ye.text.slice(ze.from,ze.toB).split("\uffff"))}),u=function Wy(r,e){if(0==r.length)return null;let t=r[0].pos,i=2==r.length?r[1].pos:t;return t>-1&&i>-1?_t.single(t+e,i+e):null}(fe,B)}else if(r.hasFocus||!r.state.facet(Pu)){let I=r.observer.selectionRange,{impreciseHead:B,impreciseAnchor:ne}=r.docView,fe=B&&B.node==I.focusNode&&B.offset==I.focusOffset||!Bo(r.contentDOM,I.focusNode)?r.state.selection.main.head:r.docView.posFromDOM(I.focusNode,I.focusOffset),ye=ne&&ne.node==I.anchorNode&&ne.offset==I.anchorOffset||!Bo(r.contentDOM,I.anchorNode)?r.state.selection.main.anchor:r.docView.posFromDOM(I.anchorNode,I.anchorOffset);(fe!=g.head||ye!=g.anchor)&&(u=_t.single(ye,fe))}if(!s&&!u)return!1;if(!s&&i&&!g.empty&&u&&u.main.empty?s={from:g.from,to:g.to,insert:r.state.doc.slice(g.from,g.to)}:s&&s.from>=g.from&&s.to<=g.to&&(s.from!=g.from||s.to!=g.to)&&g.to-g.from-(s.to-s.from)<=4?s={from:g.from,to:g.to,insert:r.state.doc.slice(g.from,s.from).append(s.insert).append(r.state.doc.slice(s.to,g.to))}:(rn.mac||rn.android)&&s&&s.from==s.to&&s.from==g.head-1&&"."==s.insert.toString()&&(s={from:g.from,to:g.to,insert:Vn.of([" "])}),s){let I=r.state;if(rn.ios&&r.inputState.flushIOSKey(r)||rn.android&&(s.from==g.from&&s.to==g.to&&1==s.insert.length&&2==s.insert.lines&&ca(r.contentDOM,"Enter",13)||s.from==g.from-1&&s.to==g.to&&0==s.insert.length&&ca(r.contentDOM,"Backspace",8)||s.from==g.from&&s.to==g.to+1&&0==s.insert.length&&ca(r.contentDOM,"Delete",46)))return!0;let ne,B=s.insert.toString();if(r.state.facet(Tu).some(ye=>ye(r,s.from,s.to,B)))return!0;if(r.inputState.composing>=0&&r.inputState.composing++,s.from>=g.from&&s.to<=g.to&&s.to-s.from>=(g.to-g.from)/3&&(!u||u.main.empty&&u.main.from==s.from+s.insert.length)&&r.inputState.composing<0){let ye=g.from<s.from?I.sliceDoc(g.from,s.from):"",Ne=g.to>s.to?I.sliceDoc(s.to,g.to):"";ne=I.replaceSelection(r.state.toText(ye+s.insert.sliceString(0,void 0,r.state.lineBreak)+Ne))}else{let ye=I.changes(s),Ne=u&&!I.selection.main.eq(u.main)&&u.main.to<=ye.newLength?u.main:void 0;if(I.selection.ranges.length>1&&r.inputState.composing>=0&&s.to<=g.to&&s.to>=g.to-10){let je=r.state.sliceDoc(s.from,s.to),ze=Sd(r)||r.state.doc.lineAt(g.head),At=g.to-s.to,kt=g.to-g.from;ne=I.changeByRange(Nt=>{if(Nt.from==g.from&&Nt.to==g.to)return{changes:ye,range:Ne||Nt.map(ye)};let Bt=Nt.to-At,Kt=Bt-je.length;if(Nt.to-Nt.from!=kt||r.state.sliceDoc(Kt,Bt)!=je||ze&&Nt.to>=ze.from&&Nt.from<=ze.to)return{range:Nt};let Ht=I.changes({from:Kt,to:Bt,insert:s.insert}),Jt=Nt.to-g.to;return{changes:Ht,range:Ne?_t.range(Math.max(0,Ne.anchor+Jt),Math.max(0,Ne.head+Jt)):Nt.map(Ht)}})}else ne={changes:ye,selection:Ne&&I.selection.replaceRange(Ne)}}let fe="input.type";return r.composing&&(fe+=".compose",r.inputState.compositionFirstChange&&(fe+=".start",r.inputState.compositionFirstChange=!1)),r.dispatch(ne,{scrollIntoView:!0,userEvent:fe}),!0}if(u&&!u.main.eq(g)){let I=!1,B="select";return r.inputState.lastSelectionTime>Date.now()-50&&("select"==r.inputState.lastSelectionOrigin&&(I=!0),B=r.inputState.lastSelectionOrigin),r.dispatch({selection:u,scrollIntoView:I,userEvent:B}),!0}return!1}(this,i,s,u),i=>{this.inputState.runScrollHandlers(this,i),this.observer.intersecting&&this.measure()}),this.inputState=new kd(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new _d(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),t.parent&&t.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}dispatch(...t){this._dispatch(1==t.length&&t[0]instanceof ts?t[0]:this.state.update(...t))}update(t){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let u,i=!1,s=!1,g=this.state;for(let B of t){if(B.startState!=g)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");g=B.state}if(this.destroyed)return void(this.viewState.state=g);if(this.observer.clear(),g.facet(Sr.phrases)!=this.state.facet(Sr.phrases))return this.setState(g);u=$u.create(this,g,t);let I=this.viewState.scrollTarget;try{this.updateState=2;for(let B of t){if(I&&(I=I.map(B.changes)),B.scrollIntoView){let{main:ne}=B.state.selection;I=new xd(ne.empty?ne:_t.cursor(ne.head,ne.head>ne.anchor?-1:1))}for(let ne of B.effects)ne.is(Ts)&&(I=ne.value)}this.viewState.update(u,I),this.bidiCache=pa.update(this.bidiCache,u.changes),u.empty||(this.updatePlugins(u),this.inputState.update(u)),i=this.docView.update(u),this.state.facet(el)!=this.styleModules&&this.mountStyles(),s=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(i,t.some(B=>B.isUserEvent("select.pointer")))}finally{this.updateState=0}if(u.startState.facet(Wd)!=u.state.facet(Wd)&&(this.viewState.mustMeasureContent=!0),(i||s||I||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!u.empty)for(let B of this.state.facet(wd))B(u)}setState(t){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=t);this.updateState=2;let i=this.hasFocus;try{for(let s of this.plugins)s.destroy(this);this.viewState=new Wu(t),this.plugins=t.facet(oc).map(s=>new Ti(s)),this.pluginMap.clear();for(let s of this.plugins)s.update(this);this.docView=new _d(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}i&&this.focus(),this.requestMeasure()}updatePlugins(t){let i=t.startState.facet(oc),s=t.state.facet(oc);if(i!=s){let u=[];for(let g of s){let I=i.indexOf(g);if(I<0)u.push(new Ti(g));else{let B=this.plugins[I];B.mustUpdate=t,u.push(B)}}for(let g of this.plugins)g.mustUpdate!=t&&g.destroy(this);this.plugins=u,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let u of this.plugins)u.mustUpdate=t;for(let u=0;u<this.plugins.length;u++)this.plugins[u].update(this)}measure(t=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,t&&this.observer.flush();let i=null;try{for(let s=0;;s++){this.updateState=1;let u=this.viewport,g=this.viewState.measure(this);if(!g&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(s>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let I=[];4&g||([this.measureRequests,I]=[I,this.measureRequests]);let B=I.map(Ne=>{try{return Ne.read(this)}catch(je){return Xr(this.state,je),Vu}}),ne=$u.create(this,this.state,[]),fe=!1,ye=!1;ne.flags|=g,i?i.flags|=g:i=ne,this.updateState=2,ne.empty||(this.updatePlugins(ne),this.inputState.update(ne),this.updateAttrs(),fe=this.docView.update(ne));for(let Ne=0;Ne<I.length;Ne++)if(B[Ne]!=Vu)try{let je=I[Ne];je.write&&je.write(B[Ne],this)}catch(je){Xr(this.state,je)}if(this.viewState.scrollTarget&&(this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,ye=!0),fe&&this.docView.updateSelection(!0),this.viewport.from==u.from&&this.viewport.to==u.to&&!ye&&0==this.measureRequests.length)break}}finally{this.updateState=0,this.measureScheduled=-1}if(i&&!i.empty)for(let s of this.state.facet(wd))s(i)}get themeClasses(){return br+" "+(this.state.facet(al)?Ly:ju)+" "+this.state.facet(Wd)}updateAttrs(){let t=Qu(this,Ad,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),i={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Pu)?"true":"false",class:"cm-content",style:`${rn.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(i["aria-readonly"]="true"),Qu(this,sc,i);let s=this.observer.ignore(()=>{let u=Lt(this.contentDOM,this.contentAttrs,i),g=Lt(this.dom,this.editorAttrs,t);return u||g});return this.editorAttrs=t,this.contentAttrs=i,s}showAnnouncements(t){let i=!0;for(let s of t)for(let u of s.effects)u.is(r.announce)&&(i&&(this.announceDOM.textContent=""),i=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=u.value)}mountStyles(){this.styleModules=this.state.facet(el),Ft.V.mount(this.root,this.styleModules.concat(ZC).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame(()=>this.measure())),t){if(null!=t.key)for(let i=0;i<this.measureRequests.length;i++)if(this.measureRequests[i].key===t.key)return void(this.measureRequests[i]=t);this.measureRequests.push(t)}}plugin(t){let i=this.pluginMap.get(t);return(void 0===i||i&&i.spec!=t)&&this.pluginMap.set(t,i=this.plugins.find(s=>s.spec==t)||null),i&&i.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,i,s){return uc(this,t,Rs(this,t,i,s))}moveByGroup(t,i){return uc(this,t,Rs(this,t,i,s=>function _y(r,e,t){let i=r.state.charCategorizer(e),s=i(t);return u=>{let g=i(u);return s==Dt.Space&&(s=g),s==g}}(this,t.head,s)))}moveToLineBoundary(t,i,s=!0){return function DC(r,e,t,i){let s=r.state.doc.lineAt(e.head),u=i&&r.lineWrapping?r.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head):null;if(u){let B=r.dom.getBoundingClientRect(),ne=r.textDirectionAt(s.from),fe=r.posAtCoords({x:t==(ne==yi.LTR)?B.right-1:B.left+1,y:(u.top+u.bottom)/2});if(null!=fe)return _t.cursor(fe,t?-1:1)}let g=ki.find(r.docView,e.head);return _t.cursor(g?t?g.posAtEnd:g.posAtStart:t?s.to:s.from,t?-1:1)}(this,t,i,s)}moveVertically(t,i,s){return uc(this,t,function Sy(r,e,t,i){let s=e.head,u=t?1:-1;if(s==(t?r.state.doc.length:0))return _t.cursor(s,e.assoc);let I,g=e.goalColumn,B=r.contentDOM.getBoundingClientRect(),ne=r.coordsAtPos(s),fe=r.documentTop;if(ne)null==g&&(g=ne.left-B.left),I=u<0?ne.top:ne.bottom;else{let je=r.viewState.lineBlockAt(s);null==g&&(g=Math.min(B.right-B.left,r.defaultCharacterWidth*(s-je.from))),I=(u<0?je.top:je.bottom)+fe}let ye=B.left+g,Ne=i??r.defaultLineHeight>>1;for(let je=0;;je+=10){let ze=I+(Ne+je)*u,At=Ed(r,{x:ye,y:ze},!1,u);if(ze<B.top||ze>B.bottom||(u<0?At<s:At>s))return _t.cursor(At,e.assoc,void 0,g)}}(this,t,i,s))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,i=0){return this.docView.posFromDOM(t,i)}posAtCoords(t,i=!0){return this.readMeasured(),Ed(this,t,i)}coordsAtPos(t,i=1){this.readMeasured();let s=this.docView.coordsAt(t,i);if(!s||s.left==s.right)return s;let u=this.state.doc.lineAt(t),g=this.bidiSpans(u);return ud(s,g[tl.find(g,t-u.from,-1,i)].dir==yi.LTR==i>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(ks)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>Ms)return jo(t.length);let i=this.textDirectionAt(t.from);for(let u of this.bidiCache)if(u.from==t.from&&u.dir==i)return u.order;let s=function Id(r,e){let t=r.length,i=e==Qp?1:2,s=e==Qp?2:1;if(!r||1==i&&!zp.test(r))return jo(t);for(let g=0,I=i,B=i;g<t;g++){let ne=wy(r.charCodeAt(g));512==ne?ne=I:8==ne&&4==B&&(ne=16),wi[g]=4==ne?2:ne,7&ne&&(B=ne),I=ne}for(let g=0,I=i,B=i;g<t;g++){let ne=wi[g];if(128==ne)g<t-1&&I==wi[g+1]&&24&I?ne=wi[g]=I:wi[g]=256;else if(64==ne){let fe=g+1;for(;fe<t&&64==wi[fe];)fe++;let ye=g&&8==I||fe<t&&8==wi[fe]?1==B?1:8:256;for(let Ne=g;Ne<fe;Ne++)wi[Ne]=ye;g=fe-1}else 8==ne&&1==B&&(wi[g]=1);I=ne,7&ne&&(B=ne)}for(let ne,fe,ye,g=0,I=0,B=0;g<t;g++)if(fe=Kr[ne=r.charCodeAt(g)])if(fe<0){for(let Ne=I-3;Ne>=0;Ne-=3)if(Go[Ne+1]==-fe){let je=Go[Ne+2],ze=2&je?i:4&je?1&je?s:i:0;ze&&(wi[g]=wi[Go[Ne]]=ze),I=Ne;break}}else{if(189==Go.length)break;Go[I++]=g,Go[I++]=ne,Go[I++]=B}else if(2==(ye=wi[g])||1==ye){let Ne=ye==i;B=Ne?0:1;for(let je=I-3;je>=0;je-=3){let ze=Go[je+2];if(2&ze)break;if(Ne)Go[je+2]|=2;else{if(4&ze)break;Go[je+2]|=4}}}for(let g=0;g<t;g++)if(256==wi[g]){let I=g+1;for(;I<t&&256==wi[I];)I++;let B=1==(g?wi[g-1]:i),fe=B==(1==(I<t?wi[I]:i))?B?1:2:i;for(let ye=g;ye<I;ye++)wi[ye]=fe;g=I-1}let u=[];if(1==i)for(let g=0;g<t;){let I=g,B=1!=wi[g++];for(;g<t&&B==(1!=wi[g]);)g++;if(B)for(let ne=g;ne>I;){let fe=ne,ye=2!=wi[--ne];for(;ne>I&&ye==(2!=wi[ne-1]);)ne--;u.push(new tl(ne,fe,ye?2:1))}else u.push(new tl(I,g,0))}else for(let g=0;g<t;){let I=g,B=2==wi[g++];for(;g<t&&B==(2==wi[g]);)g++;u.push(new tl(I,g,B?1:2))}return u}(t.text,i);return this.bidiCache.push(new pa(t.from,t.to,i,s)),s}get hasFocus(){var t;return(document.hasFocus()||rn.safari&&(null===(t=this.inputState)||void 0===t?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{la(this.contentDOM),this.docView.updateSelection()})}destroy(){for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,i={}){return Ts.of(new xd("number"==typeof t?_t.cursor(t):t,i.y,i.x,i.yMargin,i.xMargin))}static domEventHandlers(t){return Gn.define(()=>({}),{eventHandlers:t})}static theme(t,i){let s=Ft.V.newName(),u=[Wd.of(s),el.of(Zu(`.${s}`,t))];return i&&i.dark&&u.push(al.of(!0)),u}static baseTheme(t){return ia.lowest(el.of(Zu("."+br,t,Gd)))}}return r.styleModule=el,r.inputHandler=Tu,r.perLineTextDirection=ks,r.exceptionSink=da,r.updateListener=wd,r.editable=Pu,r.mouseSelectionStyle=by,r.dragMovesSelection=yy,r.clickAddsSelectionRange=vy,r.decorations=Ru,r.atomicRanges=Qi,r.scrollMargins=rs,r.darkTheme=al,r.contentAttributes=sc,r.editorAttributes=Ad,r.lineWrapping=r.contentAttributes.of({class:"cm-lineWrapping"}),r.announce=_n.define(),r})();const Ms=4096,Vu={};class pa{constructor(e,t,i,s){this.from=e,this.to=t,this.dir=i,this.order=s}static update(e,t){if(t.empty)return e;let i=[],s=e.length?e[e.length-1].dir:yi.LTR;for(let u=Math.max(0,e.length-10);u<e.length;u++){let g=e[u];g.dir==s&&!t.touchesRange(g.from,g.to)&&i.push(new pa(t.mapPos(g.from,1),t.mapPos(g.to,-1),g.dir,g.order))}return i}}function Qu(r,e,t){for(let i=r.state.facet(e),s=i.length-1;s>=0;s--){let u=i[s],g="function"==typeof u?u(r):u;g&&bd(g,t)}return t}const QC=rn.mac?"mac":rn.windows?"win":rn.linux?"linux":"key";function xm(r,e,t){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),!1!==t&&e.shiftKey&&(r="Shift-"+r),r}const Hu=sn.define({enables:$n.domEventHandlers({keydown:(r,e)=>Zd(Am(e.state),r,e,"editor")})}),ma=new WeakMap;function Am(r){let e=r.facet(Hu),t=ma.get(e);return t||ma.set(e,t=function zC(r,e=QC){let t=Object.create(null),i=Object.create(null),s=(g,I)=>{let B=i[g];if(null==B)i[g]=I;else if(B!=I)throw new Error("Key binding "+g+" is used both as a regular binding and as a multi-stroke prefix")},u=(g,I,B,ne)=>{let fe=t[g]||(t[g]=Object.create(null)),ye=I.split(/ (?!$)/).map(ze=>function Gy(r,e){const t=r.split(/-(?!$)/);let s,u,g,I,i=t[t.length-1];"Space"==i&&(i=" ");for(let B=0;B<t.length-1;++B){const ne=t[B];if(/^(cmd|meta|m)$/i.test(ne))I=!0;else if(/^a(lt)?$/i.test(ne))s=!0;else if(/^(c|ctrl|control)$/i.test(ne))u=!0;else if(/^s(hift)?$/i.test(ne))g=!0;else{if(!/^mod$/i.test(ne))throw new Error("Unrecognized modifier name: "+ne);"mac"==e?I=!0:u=!0}}return s&&(i="Alt-"+i),u&&(i="Ctrl-"+i),I&&(i="Meta-"+i),g&&(i="Shift-"+i),i}(ze,e));for(let ze=1;ze<ye.length;ze++){let At=ye.slice(0,ze).join(" ");s(At,!0),fe[At]||(fe[At]={preventDefault:!0,commands:[kt=>{let Nt=Yr={view:kt,prefix:At,scope:g};return setTimeout(()=>{Yr==Nt&&(Yr=null)},HC),!0}]})}let Ne=ye.join(" ");s(Ne,!1);let je=fe[Ne]||(fe[Ne]={preventDefault:!1,commands:[]});je.commands.push(B),ne&&(je.preventDefault=!0)};for(let g of r){let I=g[e]||g.key;if(I)for(let B of g.scope?g.scope.split(" "):["editor"])u(B,I,g.run,g.preventDefault),g.shift&&u(B,"Shift-"+I,g.shift,g.preventDefault)}return t}(e.reduce((i,s)=>i.concat(s),[]))),t}let Yr=null;const HC=4e3;function Zd(r,e,t,i){let s=(0,ic.YG)(e),u=1==s.length&&" "!=s,g="",I=!1;Yr&&Yr.view==t&&Yr.scope==i&&(g=Yr.prefix+" ",(I=hc.indexOf(e.keyCode)<0)&&(Yr=null));let fe,B=ye=>{if(ye){for(let Ne of ye.commands)if(Ne(t))return!0;ye.preventDefault&&(I=!0)}return!1},ne=r[i];if(ne){if(B(ne[g+xm(s,e,!u)]))return!0;if(u&&(e.shiftKey||e.altKey||e.metaKey)&&(fe=ic.ue[e.keyCode])&&fe!=s){if(B(ne[g+xm(fe,e,!0)]))return!0}else if(u&&e.shiftKey&&B(ne[g+xm(s,e,!0)]))return!0}return I}const Zo=!rn.ios,ga=sn.define({combine:r=>Mo(r,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function UC(r={}){return[ga.of(r),jy,Im]}class Vd{constructor(e,t,i,s,u){this.left=e,this.top=t,this.width=i,this.height=s,this.className=u}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}}const jy=Gn.fromClass(class{constructor(r){this.view=r,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=r.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=r.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),r.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(ga).cursorBlinkRate+"ms"}update(r){let e=r.startState.facet(ga)!=r.state.facet(ga);(e||r.selectionSet||r.geometryChanged||r.viewportChanged)&&this.view.requestMeasure(this.measureReq),r.transactions.some(t=>t.scrollIntoView)&&(this.cursorLayer.style.animationName="cm-blink"==this.cursorLayer.style.animationName?"cm-blink2":"cm-blink"),e&&this.setBlinkRate()}readPos(){let{state:r}=this.view,e=r.facet(ga),t=r.selection.ranges.map(s=>s.empty?[]:function XC(r,e){if(e.to<=r.viewport.from||e.from>=r.viewport.to)return[];let t=Math.max(e.from,r.viewport.from),i=Math.min(e.to,r.viewport.to),s=r.textDirection==yi.LTR,u=r.contentDOM,g=u.getBoundingClientRect(),I=_m(r),B=window.getComputedStyle(u.firstChild),ne=g.left+parseInt(B.paddingLeft)+Math.min(0,parseInt(B.textIndent)),fe=g.right-parseInt(B.paddingRight),ye=Zy(r,t),Ne=Zy(r,i),je=ye.type==si.Text?ye:null,ze=Ne.type==si.Text?Ne:null;if(r.lineWrapping&&(je&&(je=zu(r,t,je)),ze&&(ze=zu(r,i,ze))),je&&ze&&je.from==ze.from)return kt(Nt(e.from,e.to,je));{let Kt=je?Nt(e.from,null,je):Bt(ye,!1),Ht=ze?Nt(null,e.to,ze):Bt(Ne,!0),Jt=[];return(je||ye).to<(ze||Ne).from-1?Jt.push(At(ne,Kt.bottom,fe,Ht.top)):Kt.bottom<Ht.top&&r.elementAtHeight((Kt.bottom+Ht.top)/2).type==si.Text&&(Kt.bottom=Ht.top=(Kt.bottom+Ht.top)/2),kt(Kt).concat(Jt).concat(kt(Ht))}function At(Kt,Ht,Jt,ln){return new Vd(Kt-I.left,Ht-I.top-.01,Jt-Kt,ln-Ht+.01,"cm-selectionBackground")}function kt({top:Kt,bottom:Ht,horizontal:Jt}){let ln=[];for(let bn=0;bn<Jt.length;bn+=2)ln.push(At(Jt[bn],Kt,Jt[bn+1],Ht));return ln}function Nt(Kt,Ht,Jt){let ln=1e9,bn=-1e9,Ei=[];function Pn(Wi,nr,Ko,jr,ao){let Us=r.coordsAtPos(Wi,Wi==Jt.to?-2:2),$r=r.coordsAtPos(Ko,Ko==Jt.from?2:-2);ln=Math.min(Us.top,$r.top,ln),bn=Math.max(Us.bottom,$r.bottom,bn),ao==yi.LTR?Ei.push(s&&nr?ne:Us.left,s&&jr?fe:$r.right):Ei.push(!s&&jr?ne:$r.left,!s&&nr?fe:Us.right)}let Ln=Kt??Jt.from,pi=Ht??Jt.to;for(let Wi of r.visibleRanges)if(Wi.to>Ln&&Wi.from<pi)for(let nr=Math.max(Wi.from,Ln),Ko=Math.min(Wi.to,pi);;){let jr=r.state.doc.lineAt(nr);for(let ao of r.bidiSpans(jr)){let Us=ao.from+jr.from,$r=ao.to+jr.from;if(Us>=Ko)break;$r>nr&&Pn(Math.max(Us,nr),null==Kt&&Us<=Ln,Math.min($r,Ko),null==Ht&&$r>=pi,ao.dir)}if(nr=jr.to+1,nr>=Ko)break}return 0==Ei.length&&Pn(Ln,null==Kt,pi,null==Ht,r.textDirection),{top:ln,bottom:bn,horizontal:Ei}}function Bt(Kt,Ht){let Jt=g.top+(Ht?Kt.top:Kt.bottom);return{top:Jt,bottom:Jt,horizontal:[]}}}(this.view,s)).reduce((s,u)=>s.concat(u)),i=[];for(let s of r.selection.ranges){let u=s==r.selection.main;if(s.empty?!u||Zo:e.drawRangeCursor){let g=Sm(this.view,s,u);g&&i.push(g)}}return{rangePieces:t,cursors:i}}drawSel({rangePieces:r,cursors:e}){if(r.length!=this.rangePieces.length||r.some((t,i)=>!t.eq(this.rangePieces[i]))){this.selectionLayer.textContent="";for(let t of r)this.selectionLayer.appendChild(t.draw());this.rangePieces=r}if(e.length!=this.cursors.length||e.some((t,i)=>!t.eq(this.cursors[i]))){let t=this.cursorLayer.children;if(t.length!==e.length){this.cursorLayer.textContent="";for(const i of e)this.cursorLayer.appendChild(i.draw())}else e.forEach((i,s)=>i.adjust(t[s]));this.cursors=e}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),Om={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Zo&&(Om[".cm-line"].caretColor="transparent !important");const Im=ia.highest($n.theme(Om));function _m(r){let e=r.scrollDOM.getBoundingClientRect();return{left:(r.textDirection==yi.LTR?e.left:e.right-r.scrollDOM.clientWidth)-r.scrollDOM.scrollLeft,top:e.top-r.scrollDOM.scrollTop}}function zu(r,e,t){let i=_t.cursor(e);return{from:Math.max(t.from,r.moveToLineBoundary(i,!1,!0).from),to:Math.min(t.to,r.moveToLineBoundary(i,!0,!0).from),type:si.Text}}function Zy(r,e){let t=r.lineBlockAt(e);if(Array.isArray(t.type))for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==si.Text))return i;return t}function Sm(r,e,t){let i=r.coordsAtPos(e.head,e.assoc||1);if(!i)return null;let s=_m(r);return new Vd(i.left-s.left,i.top-s.top,-1,i.bottom-i.top,t?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}const Qd=_n.define({map:(r,e)=>null==r?null:e.mapPos(r)}),Uu=Dn.define({create:()=>null,update:(r,e)=>(null!=r&&(r=e.changes.mapPos(r)),e.effects.reduce((t,i)=>i.is(Qd)?i.value:t,r))}),Vy=Gn.fromClass(class{constructor(r){this.view=r,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(r){var e;let t=r.state.field(Uu);null==t?null!=this.cursor&&(null===(e=this.cursor)||void 0===e||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(r.startState.field(Uu)!=t||r.docChanged||r.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let r=this.view.state.field(Uu),e=null!=r&&this.view.coordsAtPos(r);if(!e)return null;let t=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-t.left+this.view.scrollDOM.scrollLeft,top:e.top-t.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(r){this.cursor&&(r?(this.cursor.style.left=r.left+"px",this.cursor.style.top=r.top+"px",this.cursor.style.height=r.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(r){this.view.state.field(Uu)!=r&&this.view.dispatch({effects:Qd.of(r)})}},{eventHandlers:{dragover(r){this.setDropPos(this.view.posAtCoords({x:r.clientX,y:r.clientY}))},dragleave(r){(r.target==this.view.contentDOM||!this.view.contentDOM.contains(r.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Qy(){return[Uu,Vy]}function Hy(r,e,t,i,s){e.lastIndex=0;for(let I,u=r.iterRange(t,i),g=t;!u.next().done;g+=u.value.length)if(!u.lineBreak)for(;I=e.exec(u.value);)s(g+I.index,g+I.index+I[0].length,I)}class Uy{constructor(e){let{regexp:t,decoration:i,boundary:s,maxLength:u=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");this.regexp=t,this.getDeco="function"==typeof i?i:()=>i,this.boundary=s,this.maxLength=u}createDeco(e){let t=new No;for(let{from:i,to:s}of function zy(r,e){let t=r.visibleRanges;if(1==t.length&&t[0].from==r.viewport.from&&t[0].to==r.viewport.to)return t;let i=[];for(let{from:s,to:u}of t)s=Math.max(r.state.doc.lineAt(s).from,s-e),u=Math.min(r.state.doc.lineAt(u).to,u+e),i.length&&i[i.length-1].to>=s?i[i.length-1].to=u:i.push({from:s,to:u});return i}(e,this.maxLength))Hy(e.state.doc,this.regexp,i,s,(u,g,I)=>t.add(u,g,this.getDeco(I,e,u)));return t.finish()}updateDeco(e,t){let i=1e9,s=-1;return e.docChanged&&e.changes.iterChanges((u,g,I,B)=>{B>e.view.viewport.from&&I<e.view.viewport.to&&(i=Math.min(I,i),s=Math.max(B,s))}),e.viewportChanged||s-i>1e3?this.createDeco(e.view):s>-1?this.updateRange(e.view,t.map(e.changes),i,s):t}updateRange(e,t,i,s){for(let u of e.visibleRanges){let g=Math.max(u.from,i),I=Math.min(u.to,s);if(I>g){let B=e.state.doc.lineAt(g),ne=B.to<I?e.state.doc.lineAt(I):B,fe=Math.max(u.from,B.from),ye=Math.min(u.to,ne.to);if(this.boundary){for(;g>B.from;g--)if(this.boundary.test(B.text[g-1-B.from])){fe=g;break}for(;I<ne.to;I++)if(this.boundary.test(ne.text[I-ne.from])){ye=I;break}}let je,Ne=[];if(B==ne)for(this.regexp.lastIndex=fe-B.from;(je=this.regexp.exec(B.text))&&je.index<ye-B.from;){let ze=je.index+B.from;Ne.push(this.getDeco(je,e,ze).range(ze,ze+je[0].length))}else Hy(e.state.doc,this.regexp,fe,ye,(ze,At,kt)=>Ne.push(this.getDeco(kt,e,ze).range(ze,At)));t=t.update({filterFrom:fe,filterTo:ye,filter:(ze,At)=>ze<fe||At>ye,add:Ne})}}return t}}const Ls=null!=/x/.unicode?"gu":"g",ll=new RegExp("[\0-\b\n-\x1f\x7f-\x9f\xad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\ufeff\ufff9-\ufffc]",Ls),Xu={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Ku=null;const Yu=sn.define({combine(r){let e=Mo(r,{render:null,specialChars:ll,addSpecialChars:null});return(e.replaceTabs=!function Hd(){var r;if(null==Ku&&typeof document<"u"&&document.body){let e=document.body.style;Ku=null!=(null!==(r=e.tabSize)&&void 0!==r?r:e.MozTabSize)}return Ku||!1}())&&(e.specialChars=new RegExp("\t|"+e.specialChars.source,Ls)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Ls)),e}});function qu(r={}){return[Yu.of(r),Ju||(Ju=Gn.fromClass(class{constructor(r){this.view=r,this.decorations=an.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(r.state.facet(Yu)),this.decorations=this.decorator.createDeco(r)}makeDecorator(r){return new Uy({regexp:r.specialChars,decoration:(e,t,i)=>{let{doc:s}=t.state,u=sr(e[0],0);if(9==u){let g=s.lineAt(i),I=t.state.tabSize,B=Ni(g.text,I,i-g.from);return an.replace({widget:new Jy((I-B%I)*this.view.defaultCharacterWidth)})}return this.decorationCache[u]||(this.decorationCache[u]=an.replace({widget:new qy(r,u)}))},boundary:r.replaceTabs?void 0:/[^]/})}update(r){let e=r.state.facet(Yu);r.startState.facet(Yu)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(r.view)):this.decorations=this.decorator.updateDeco(r,this.decorations)}},{decorations:r=>r.decorations}))]}let Ju=null;class qy extends Fo{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=function Yy(r){return r>=32?"\u2022":10==r?"\u2424":String.fromCharCode(9216+r)}(this.code),i=e.state.phrase("Control character")+" "+(Xu[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,i,t);if(s)return s;let u=document.createElement("span");return u.textContent=t,u.title=i,u.setAttribute("aria-label",i),u.className="cm-specialChar",u}ignoreEvent(){return!1}}class Jy extends Fo{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function km(){return t0}const e0=an.line({class:"cm-activeLine"}),t0=Gn.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.docChanged||r.selectionSet)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=-1,t=[];for(let i of r.state.selection.ranges){if(!i.empty)return an.none;let s=r.lineBlockAt(i.head);s.from>e&&(t.push(e0.range(s.from)),e=s.from)}return an.set(t)}},{decorations:r=>r.decorations}),zd=2e3;function qr(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1),i=r.state.doc.lineAt(t),s=t-i.from,u=s>zd?-1:s==i.length?function o0(r,e){let t=r.coordsAtPos(r.viewport.from);return t?Math.round(Math.abs((t.left-e)/r.defaultCharacterWidth)):-1}(r,e.clientX):Ni(i.text,r.state.tabSize,t-i.from);return{line:i.number,col:u,off:s}}function Ii(r){let e=r?.eventFilter||(t=>t.altKey&&0==t.button);return $n.mouseSelectionStyle.of((t,i)=>e(i)?function fc(r,e){let t=qr(r,e),i=r.state.selection;return t?{update(s){if(s.docChanged){let u=s.changes.mapPos(s.startState.doc.line(t.line).from),g=s.state.doc.lineAt(u);t={line:g.number,col:t.col,off:Math.min(t.off,g.length)},i=i.map(s.changes)}},get(s,u,g){let I=qr(r,s);if(!I)return i;let B=function r0(r,e,t){let i=Math.min(e.line,t.line),s=Math.max(e.line,t.line),u=[];if(e.off>zd||t.off>zd||e.col<0||t.col<0){let g=Math.min(e.off,t.off),I=Math.max(e.off,t.off);for(let B=i;B<=s;B++){let ne=r.doc.line(B);ne.length<=I&&u.push(_t.range(ne.from+g,ne.to+I))}}else{let g=Math.min(e.col,t.col),I=Math.max(e.col,t.col);for(let B=i;B<=s;B++){let ne=r.doc.line(B),fe=Sn(ne.text,g,r.tabSize,!0);if(fe>-1){let ye=Sn(ne.text,I,r.tabSize);u.push(_t.range(ne.from+fe,ne.from+ye))}}}return u}(r.state,t,I);return B.length?_t.create(g?B.concat(i.ranges):B):i}}:null}(t,i):null)}const s0={Alt:[18,r=>r.altKey],Control:[17,r=>r.ctrlKey],Shift:[16,r=>r.shiftKey],Meta:[91,r=>r.metaKey]},YC={style:"cursor: crosshair"};function a0(r={}){let[e,t]=s0[r.key||"Alt"],i=Gn.fromClass(class{constructor(s){this.view=s,this.isDown=!1}set(s){this.isDown!=s&&(this.isDown=s,this.view.update([]))}},{eventHandlers:{keydown(s){this.set(s.keyCode==e||t(s))},keyup(s){(s.keyCode==e||!t(s))&&this.set(!1)}}});return[i,$n.contentAttributes.of(s=>{var u;return null!==(u=s.plugin(i))&&void 0!==u&&u.isDown?YC:null})]}const Ud="-10000px";class l0{constructor(e,t,i){this.facet=t,this.createTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(s=>s),this.tooltipViews=this.tooltips.map(i)}update(e){let t=e.state.facet(this.facet),i=t.filter(u=>u);if(t===this.input){for(let u of this.tooltipViews)u.update&&u.update(e);return!1}let s=[];for(let u=0;u<i.length;u++){let g=i[u],I=-1;if(g){for(let B=0;B<this.tooltips.length;B++){let ne=this.tooltips[B];ne&&ne.create==g.create&&(I=B)}if(I<0)s[u]=this.createTooltipView(g);else{let B=s[u]=this.tooltipViews[I];B.update&&B.update(e)}}}for(let u of this.tooltipViews)s.indexOf(u)<0&&u.dom.remove();return this.input=t,this.tooltips=i,this.tooltipViews=s,!0}}function Tm(){return{top:0,left:0,bottom:innerHeight,right:innerWidth}}const eh=sn.define({combine:r=>{var e,t,i;return{position:rn.ios?"absolute":(null===(e=r.find(s=>s.position))||void 0===e?void 0:e.position)||"fixed",parent:(null===(t=r.find(s=>s.parent))||void 0===t?void 0:t.parent)||null,tooltipSpace:(null===(i=r.find(s=>s.tooltipSpace))||void 0===i?void 0:i.tooltipSpace)||Tm}}}),Xd=Gn.fromClass(class{constructor(r){var e;this.view=r,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let t=r.state.facet(eh);this.position=t.position,this.parent=t.parent,this.classes=r.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new l0(r,yo,i=>this.createTooltip(i)),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver(i=>{Date.now()>this.lastTransaction-50&&i.length>0&&i[i.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),null===(e=r.dom.ownerDocument.defaultView)||void 0===e||e.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let r of this.manager.tooltipViews)this.intersectionObserver.observe(r.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(r){r.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(r);e&&this.observeIntersection();let t=e||r.geometryChanged,i=r.state.facet(eh);if(i.position!=this.position){this.position=i.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(r){let e=r.create(this.view);if(e.dom.classList.add("cm-tooltip"),r.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=Ud,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var r,e;null===(r=this.view.dom.ownerDocument.defaultView)||void 0===r||r.removeEventListener("resize",this.measureSoon);for(let{dom:t}of this.manager.tooltipViews)t.remove();null===(e=this.intersectionObserver)||void 0===e||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let r=this.view.dom.getBoundingClientRect();return{editor:r,parent:this.parent?this.container.getBoundingClientRect():r,pos:this.manager.tooltips.map((e,t)=>{let i=this.manager.tooltipViews[t];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(eh).tooltipSpace(this.view)}}writeMeasure(r){let{editor:e,space:t}=r,i=[];for(let s=0;s<this.manager.tooltips.length;s++){let u=this.manager.tooltips[s],g=this.manager.tooltipViews[s],{dom:I}=g,B=r.pos[s],ne=r.size[s];if(!B||B.bottom<=Math.max(e.top,t.top)||B.top>=Math.min(e.bottom,t.bottom)||B.right<Math.max(e.left,t.left)-.1||B.left>Math.min(e.right,t.right)+.1){I.style.top=Ud;continue}let fe=u.arrow?g.dom.querySelector(".cm-tooltip-arrow"):null,ye=fe?7:0,Ne=ne.right-ne.left,je=ne.bottom-ne.top,ze=g.offset||Pm,At=this.view.textDirection==yi.LTR,kt=ne.width>t.right-t.left?At?t.left:t.right-ne.width:At?Math.min(B.left-(fe?14:0)+ze.x,t.right-Ne):Math.max(t.left,B.left-Ne+(fe?14:0)-ze.x),Nt=!!u.above;!u.strictSide&&(Nt?B.top-(ne.bottom-ne.top)-ze.y<t.top:B.bottom+(ne.bottom-ne.top)+ze.y>t.bottom)&&Nt==t.bottom-B.bottom>B.top-t.top&&(Nt=!Nt);let Bt=Nt?B.top-je-ye-ze.y:B.bottom+ye+ze.y,Kt=kt+Ne;if(!0!==g.overlap)for(let Ht of i)Ht.left<Kt&&Ht.right>kt&&Ht.top<Bt+je&&Ht.bottom>Bt&&(Bt=Nt?Ht.top-je-2-ye:Ht.bottom+ye+2);"absolute"==this.position?(I.style.top=Bt-r.parent.top+"px",I.style.left=kt-r.parent.left+"px"):(I.style.top=Bt+"px",I.style.left=kt+"px"),fe&&(fe.style.left=B.left+(At?ze.x:-ze.x)-(kt+14-7)+"px"),!0!==g.overlap&&i.push({left:kt,top:Bt,right:Kt,bottom:Bt+je}),I.classList.toggle("cm-tooltip-above",Nt),I.classList.toggle("cm-tooltip-below",!Nt),g.positioned&&g.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let r of this.manager.tooltipViews)r.dom.style.top=Ud}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),Pm={x:0,y:0},yo=sn.define({enables:[Xd,$n.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}})]}),th=sn.define();class Kd{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new l0(e,th,t=>this.createHostedView(t))}static create(e){return new Kd(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned()}update(e){this.manager.update(e)}}const u0=yo.compute([th],r=>{let e=r.facet(th).filter(t=>t);return 0===e.length?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.filter(t=>null!=t.end).map(t=>t.end)),create:Kd.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class Rm{constructor(e,t,i,s,u){this.view=e,this.source=t,this.field=i,this.setHover=s,this.hoverTime=u,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(null==t)return;let i=this.view.coordsAtPos(t);if(null==i||e.y<i.top||e.y>i.bottom||e.x<i.left-this.view.defaultCharacterWidth||e.x>i.right+this.view.defaultCharacterWidth)return;let s=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find(I=>I.from<=t&&I.to>=t),u=s&&s.dir==yi.RTL?-1:1,g=this.source(this.view,t,e.x<i.left?-u:u);if(g?.then){let I=this.pending={pos:t};g.then(B=>{this.pending==I&&(this.pending=null,B&&this.view.dispatch({effects:this.setHover.of(B)}))},B=>Xr(this.view.state,B,"hover tooltip"))}else g&&this.view.dispatch({effects:this.setHover.of(g)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!function nh(r){for(let e=r;e;e=e.parentNode)if(1==e.nodeType&&e.classList.contains("cm-tooltip"))return!0;return!1}(this.lastMove.target)||this.pending){let{pos:s}=i||this.pending,u=null!==(t=i?.end)&&void 0!==t?t:s;(s==u?this.view.posAtCoords(this.lastMove)!=s:!function Vo(r,e,t,i,s,u){let g=document.createRange(),I=r.domAtPos(e),B=r.domAtPos(t);g.setEnd(B.node,B.offset),g.setStart(I.node,I.offset);let ne=g.getClientRects();g.detach();for(let fe=0;fe<ne.length;fe++){let ye=ne[fe];if(Math.max(ye.top-s,s-ye.bottom,ye.left-i,i-ye.right)<=u)return!0}return!1}(this.view,s,u,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function bo(r,e={}){let t=_n.define(),i=Dn.define({create:()=>null,update(s,u){if(s&&(e.hideOnChange&&(u.docChanged||u.selection)||e.hideOn&&e.hideOn(u,s)))return null;if(s&&u.docChanged){let g=u.changes.mapPos(s.pos,-1,ar.TrackDel);if(null==g)return null;let I=Object.assign(Object.create(null),s);I.pos=g,null!=s.end&&(I.end=u.changes.mapPos(s.end)),s=I}for(let g of u.effects)g.is(t)&&(s=g.value),g.is(JC)&&(s=null);return s},provide:s=>th.from(s)});return[i,Gn.define(s=>new Rm(s,r,i,t,e.hoverTime||300)),u0]}const JC=_n.define(),$m=sn.define({combine(r){let e,t;for(let i of r)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function mc(r,e){let t=r.plugin(Mm),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const Mm=Gn.fromClass(class{constructor(r){this.input=r.state.facet(gc),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(r));let e=r.state.facet($m);this.top=new ih(r,!0,e.topContainer),this.bottom=new ih(r,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(r){let e=r.state.facet($m);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new ih(r.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new ih(r.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=r.state.facet(gc);if(t!=this.input){let i=t.filter(B=>B),s=[],u=[],g=[],I=[];for(let B of i){let fe,ne=this.specs.indexOf(B);ne<0?(fe=B(r.view),I.push(fe)):(fe=this.panels[ne],fe.update&&fe.update(r)),s.push(fe),(fe.top?u:g).push(fe)}this.specs=i,this.panels=s,this.top.sync(u),this.bottom.sync(g);for(let B of I)B.dom.classList.add("cm-panel"),B.mount&&B.mount()}else for(let i of this.panels)i.update&&i.update(r)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:r=>$n.scrollMargins.of(e=>{let t=e.plugin(r);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class ih{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Nm(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Nm(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Nm(r){let e=r.nextSibling;return r.remove(),e}const gc=sn.define({enables:Mm});class Fr extends sa{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Fr.prototype.elementClass="",Fr.prototype.toDOM=void 0,Fr.prototype.mapMode=ar.TrackBefore,Fr.prototype.startSide=Fr.prototype.endSide=-1,Fr.prototype.point=!0;const rh=sn.define(),d0={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Ci.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},va=sn.define();function vc(r){return[qd(),va.of(Object.assign(Object.assign({},d0),r))]}const Lm=sn.define({combine:r=>r.some(e=>e)});function qd(r){let e=[oh];return r&&!1===r.fixed&&e.push(Lm.of(!0)),e}const oh=Gn.fromClass(class{constructor(r){this.view=r,this.prevViewport=r.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=r.state.facet(va).map(e=>new Bm(r,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!r.state.facet(Lm),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),r.scrollDOM.insertBefore(this.dom,r.contentDOM)}update(r){if(this.updateGutters(r)){let e=this.prevViewport,t=r.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<.8*(t.to-t.from))}r.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Lm)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=r.view.viewport}syncGutters(r){let e=this.dom.nextSibling;r&&this.dom.remove();let t=Ci.iter(this.view.state.facet(rh),this.view.viewport.from),i=[],s=this.gutters.map(u=>new Jd(u,this.view.viewport,-this.view.documentPadding.top));for(let u of this.view.viewportLineBlocks){let g;if(Array.isArray(u.type)){for(let I of u.type)if(I.type==si.Text){g=I;break}}else g=u.type==si.Text?u:void 0;if(g){i.length&&(i=[]),sh(t,i,u.from);for(let I of s)I.line(this.view,g,i)}}for(let u of s)u.finish();r&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(r){let e=r.startState.facet(va),t=r.state.facet(va),i=r.docChanged||r.heightChanged||r.viewportChanged||!Ci.eq(r.startState.facet(rh),r.state.facet(rh),r.view.viewport.from,r.view.viewport.to);if(e==t)for(let s of this.gutters)s.update(r)&&(i=!0);else{i=!0;let s=[];for(let u of t){let g=e.indexOf(u);g<0?s.push(new Bm(this.view,u)):(this.gutters[g].update(r),s.push(this.gutters[g]))}for(let u of this.gutters)u.dom.remove(),s.indexOf(u)<0&&u.destroy();for(let u of s)this.dom.appendChild(u.dom);this.gutters=s}return i}destroy(){for(let r of this.gutters)r.destroy();this.dom.remove()}},{provide:r=>$n.scrollMargins.of(e=>{let t=e.plugin(r);return t&&0!=t.gutters.length&&t.fixed?e.textDirection==yi.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}:null})});function Co(r){return Array.isArray(r)?r:[r]}function sh(r,e,t){for(;r.value&&r.from<=t;)r.from==t&&e.push(r.value),r.next()}class Jd{constructor(e,t,i){this.gutter=e,this.height=i,this.localMarkers=[],this.i=0,this.cursor=Ci.iter(e.markers,t.from)}line(e,t,i){this.localMarkers.length&&(this.localMarkers=[]),sh(this.cursor,this.localMarkers,t.from);let s=i.length?this.localMarkers.concat(i):this.localMarkers,u=this.gutter.config.lineMarker(e,t,s);u&&s.unshift(u);let g=this.gutter;if(0==s.length&&!g.config.renderEmptyElements)return;let I=t.top-this.height;if(this.i==g.elements.length){let B=new Dm(e,t.height,I,s);g.elements.push(B),g.dom.appendChild(B.dom)}else g.elements[this.i].update(e,t.height,I,s);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class Bm{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,s=>{let u=e.lineBlockAtHeight(s.clientY-e.documentTop);t.domEventHandlers[i](e,u,s)&&s.preventDefault()});this.markers=Co(t.markers(e)),t.initialSpacer&&(this.spacer=new Dm(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Co(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let i=e.view.viewport;return!Ci.eq(this.markers,t,i.from,i.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class Dm{constructor(e,t,i,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,s)}update(e,t,i,s){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),function t1(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(!r[t].compare(e[t]))return!1;return!0}(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,t){let i="cm-gutterElement",s=this.dom.firstChild;for(let u=0,g=0;;){let I=g,B=u<t.length?t[u++]:null,ne=!1;if(B){let fe=B.elementClass;fe&&(i+=" "+fe);for(let ye=g;ye<this.markers.length;ye++)if(this.markers[ye].compare(B)){I=ye,ne=!0;break}}else I=this.markers.length;for(;g<I;){let fe=this.markers[g++];if(fe.toDOM){fe.destroy(s);let ye=s.nextSibling;s.remove(),s=ye}}if(!B)break;B.toDOM&&(ne?s=s.nextSibling:this.dom.insertBefore(B.toDOM(e),s)),ne&&g++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}const Fm=sn.define(),cl=sn.define({combine:r=>Mo(r,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let s in t){let u=i[s],g=t[s];i[s]=u?(I,B,ne)=>u(I,B,ne)||g(I,B,ne):g}return i}})});class ef extends Fr{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Wm(r,e){return r.state.facet(cl).formatNumber(e,r.state)}const ah=va.compute([cl],r=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(Fm),lineMarker:(e,t,i)=>i.some(s=>s.toDOM)?null:new ef(Wm(e,e.state.doc.lineAt(t.from).number)),lineMarkerChange:e=>e.startState.facet(cl)!=e.state.facet(cl),initialSpacer:e=>new ef(Wm(e,jm(e.state.doc.lines))),updateSpacer(e,t){let i=Wm(t.view,jm(t.view.state.doc.lines));return i==e.number?e:new ef(i)},domEventHandlers:r.facet(cl).domEventHandlers}));function Gm(r={}){return[cl.of(r),qd(),ah]}function jm(r){let e=9;for(;e<r;)e=10*e+9;return e}const f0=new class extends Fr{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Zm=rh.compute(["selection"],r=>{let e=[],t=-1;for(let i of r.selection.ranges)if(i.empty){let s=r.doc.lineAt(i.head).from;s>t&&(t=s,e.push(f0.range(s)))}return Ci.of(e)});function n1(){return Zm}var tf;const Bs=new Qt;let Jr=(()=>{class r{constructor(t,i,s=[]){this.data=t,Sr.prototype.hasOwnProperty("tree")||Object.defineProperty(Sr.prototype,"tree",{get(){return ni(this)}}),this.parser=i,this.extension=[ya.of(this),Sr.languageData.of((u,g,I)=>u.facet(Qm(u,g,I)))].concat(s)}isActiveAt(t,i,s=-1){return Qm(t,i,s)==this.data}findRegions(t){let i=t.facet(ya);if(i?.data==this.data)return[{from:0,to:t.doc.length}];if(!i||!i.allowsNesting)return[];let s=[],u=(g,I)=>{if(g.prop(Bs)==this.data)return void s.push({from:I,to:I+g.length});let B=g.prop(Qt.mounted);if(B){if(B.tree.prop(Bs)==this.data){if(B.overlay)for(let ne of B.overlay)s.push({from:ne.from+I,to:ne.to+I});else s.push({from:I,to:I+g.length});return}if(B.overlay){let ne=s.length;if(u(B.tree,B.overlay[0].from+I),s.length>ne)return}}for(let ne=0;ne<g.children.length;ne++){let fe=g.children[ne];fe instanceof ht&&u(fe,g.positions[ne]+I)}};return u(ni(t),0),s}get allowsNesting(){return!0}}return r.setState=_n.define(),r})();function Qm(r,e,t){let i=r.facet(ya);if(!i)return null;let s=i.data;if(i.allowsNesting)for(let u=ni(r).topNode;u;u=u.enter(e,t,lt.ExcludeBuffers))s=u.type.prop(Bs)||s;return s}class nf extends Jr{constructor(e,t){super(e,t),this.parser=t}static define(e){let t=function Vm(r){return sn.define({combine:r?e=>e.concat(r):void 0})}(e.languageData);return new nf(t,e.parser.configure({props:[Bs.add(i=>i.isTop?t:void 0)]}))}configure(e){return new nf(this.data,this.parser.configure(e))}get allowsNesting(){return this.parser.hasWrappers()}}function ni(r){let e=r.field(Jr.state,!1);return e?e.tree:ht.empty}class p0{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let lh=null;class ul{constructor(e,t,i=[],s,u,g,I,B){this.parser=e,this.state=t,this.fragments=i,this.tree=s,this.treeLen=u,this.viewport=g,this.skipped=I,this.scheduleOn=B,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new ul(e,t,[],ht.empty,0,i,[],null)}startParse(){return this.parser.startParse(new p0(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=ht.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if("number"==typeof e){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let s=this.parse.advance();if(s){if(this.fragments=this.withoutTempSkipped(mi.addTree(s,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(i=this.parse.stoppedAt)&&void 0!==i?i:this.state.doc.length,this.tree=s,this.parse=null,!(this.treeLen<(t??this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(mi.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=lh;lh=this;try{return e()}finally{lh=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=m0(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:s,treeLen:u,viewport:g,skipped:I}=this;if(this.takeTree(),!e.empty){let B=[];if(e.iterChangedRanges((ne,fe,ye,Ne)=>B.push({fromA:ne,toA:fe,fromB:ye,toB:Ne})),i=mi.applyChanges(i,B),s=ht.empty,u=0,g={from:e.mapPos(g.from,-1),to:e.mapPos(g.to,1)},this.skipped.length){I=[];for(let ne of this.skipped){let fe=e.mapPos(ne.from,1),ye=e.mapPos(ne.to,-1);fe<ye&&I.push({from:fe,to:ye})}}}return new ul(this.parser,t,i,s,u,g,I,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:s,to:u}=this.skipped[i];s<e.to&&u>e.from&&(this.fragments=m0(this.fragments,s,u),this.skipped.splice(i--,1))}return!(this.skipped.length>=t||(this.reset(),0))}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends pr{createParse(t,i,s){let u=s[0].from,g=s[s.length-1].to;return{parsedPos:u,advance(){let B=lh;if(B){for(let ne of s)B.tempSkipped.push(ne);e&&(B.scheduleOn=B.scheduleOn?Promise.all([B.scheduleOn,e]):e)}return this.parsedPos=g,new ht(Kn.none,[],[],g-u)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return lh}}function m0(r,e,t){return mi.applyChanges(r,[{fromA:e,toA:t,fromB:e,toB:t}])}class yc{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new yc(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=ul.create(e.facet(ya).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new yc(i)}}Jr.state=Dn.define({create:yc.init,update(r,e){for(let t of e.effects)if(t.is(Jr.setState))return t.value;return e.startState.facet(ya)!=e.state.facet(ya)?yc.init(e.state):r.apply(e)}});let g0=r=>{let e=setTimeout(()=>r(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(g0=r=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(r,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Hm=typeof navigator<"u"&&null!==(tf=navigator.scheduling)&&void 0!==tf&&tf.isInputPending?()=>navigator.scheduling.isInputPending():null,v0=Gn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Jr.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Jr.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=g0(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:s}}=this.view,u=i.field(Jr.state);if(u.tree==u.context.tree&&u.context.isDone(s+1e5))return;let g=Date.now()+Math.min(this.chunkBudget,100,e&&!Hm?Math.max(25,e.timeRemaining()-5):1e9),I=u.context.treeLen<s&&i.doc.length>s+1e3,B=u.context.work(()=>Hm&&Hm()||Date.now()>g,s+(I?0:1e5));this.chunkBudget-=Date.now()-t,(B||this.chunkBudget<=0)&&(u.context.takeTree(),this.view.dispatch({effects:Jr.setState.of(new yc(u.context))})),this.chunkBudget>0&&!(B&&!I)&&this.scheduleWork(),this.checkAsyncSchedule(u.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Xr(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),ya=sn.define({combine:r=>r.length?r[0]:null,enables:[Jr.state,v0]});class wo{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const ch=sn.define(),hl=sn.define({combine:r=>{if(!r.length)return"  ";if(!/^(?: +|\t+)$/.test(r[0]))throw new Error("Invalid indent unit: "+JSON.stringify(r[0]));return r[0]}});function ba(r){let e=r.facet(hl);return 9==e.charCodeAt(0)?r.tabSize*e.length:e.length}function Ca(r,e){let t="",i=r.tabSize;if(9==r.facet(hl).charCodeAt(0))for(;e>=i;)t+="\t",e-=i;for(let s=0;s<e;s++)t+=" ";return t}function dl(r,e){r instanceof Sr&&(r=new rf(r));for(let i of r.state.facet(ch)){let s=i(r,e);if(null!=s)return s}let t=ni(r.state);return t?function of(r,e,t){return uh(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,r)}(r,t,e):null}class rf{constructor(e,t={}){this.state=e,this.options=t,this.unit=ba(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:u}=this.options;return null!=s&&s>=i.from&&s<=i.to?u&&s==e?{text:"",from:e}:(t<0?s<e:s<=e)?{text:i.text.slice(s-i.from),from:s}:{text:i.text.slice(0,s-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:s}=this.lineAt(e,t);return i.slice(e-s,Math.min(i.length,e+100-s))}column(e,t=1){let{text:i,from:s}=this.lineAt(e,t),u=this.countColumn(i,e-s),g=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return g>-1&&(u+=g-this.countColumn(i,i.search(/\S|$/))),u}countColumn(e,t=e.length){return Ni(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:s}=this.lineAt(e,t),u=this.options.overrideIndentation;if(u){let g=u(s);if(g>-1)return g}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const zm=new Qt;function bc(r){let e=r.type.prop(zm);if(e)return e;let i,t=r.firstChild;if(t&&(i=t.type.prop(Qt.closedBy))){let s=r.lastChild,u=s&&i.indexOf(s.name)>-1;return g=>C0(g,!0,1,void 0,u&&!function r1(r){return r.pos==r.options.simulateBreak&&r.options.simulateDoubleBreak}(g)?s.from:void 0)}return null==r.parent?fl:null}function uh(r,e,t){for(;r;r=r.parent){let i=bc(r);if(i)return i(eo.create(t,e,r))}return null}function fl(){return 0}class eo extends rf{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.node=i}static create(e,t,i){return new eo(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(o1(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?uh(e,this.pos,this.base):0}}function o1(r,e){for(let t=e;t;t=t.parent)if(r==t)return!0;return!1}function b0({closing:r,align:e=!0,units:t=1}){return i=>C0(i,e,t,r)}function C0(r,e,t,i,s){let u=r.textAfter,g=u.match(/^\s*/)[0].length,I=i&&u.slice(g,g+i.length)==i||s==r.pos+g,B=e?function hh(r){let e=r.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let s=r.options.simulateBreak,u=r.state.doc.lineAt(t.from),g=null==s||s<=u.from?u.to:Math.min(u.to,s);for(let I=t.to;;){let B=e.childAfter(I);if(!B||B==i)return null;if(!B.type.isSkipped)return B.from<g?t:null;I=B.to}}(r):null;return B?r.column(I?B.from:B.to):r.baseIndent+(I?0:r.unit*t)}function Um({except:r,units:e=1}={}){return t=>{let i=r&&r.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}function a1(){return Sr.transactionFilter.of(r=>{if(!r.docChanged||!r.isUserEvent("input.type")&&!r.isUserEvent("input.complete"))return r;let e=r.startState.languageDataAt("indentOnInput",r.startState.selection.main.head);if(!e.length)return r;let t=r.newDoc,{head:i}=r.newSelection.main,s=t.lineAt(i);if(i>s.from+200)return r;let u=t.sliceString(s.from,i);if(!e.some(ne=>ne.test(u)))return r;let{state:g}=r,I=-1,B=[];for(let{head:ne}of g.selection.ranges){let fe=g.doc.lineAt(ne);if(fe.from==I)continue;I=fe.from;let ye=dl(g,fe.from);if(null==ye)continue;let Ne=/^\s*/.exec(fe.text)[0],je=Ca(g,ye);Ne!=je&&B.push({from:fe.from,to:fe.from+Ne.length,insert:je})}return B.length?[r,{changes:B,sequential:!0}]:r})}const _i=sn.define(),x0=new Qt;function l1(r){let e=r.lastChild;return e&&e.to==r.to&&e.type.isError}function sf(r,e,t){for(let i of r.facet(_i)){let s=i(r,e,t);if(s)return s}return function dh(r,e,t){let i=ni(r);if(i.length<t)return null;let u=null;for(let g=i.resolveInner(t);g;g=g.parent){if(g.to<=t||g.from>t)continue;if(u&&g.from<e)break;let I=g.type.prop(x0);if(I&&(g.to<i.length-50||i.length==r.doc.length||!l1(g))){let B=I(g,r);B&&B.from<=t&&B.from>=e&&B.to>t&&(u=B)}}return u}(r,e,t)}function O0(r,e){let t=e.mapPos(r.from,1),i=e.mapPos(r.to,-1);return t>=i?void 0:{from:t,to:i}}const af=_n.define({map:O0}),fh=_n.define({map:O0});function I0(r){let e=[];for(let{head:t}of r.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(r.lineBlockAt(t));return e}const wa=Dn.define({create:()=>an.none,update(r,e){r=r.map(e.changes);for(let t of e.effects)t.is(af)&&!c1(r,t.value.from,t.value.to)?r=r.update({add:[h1.range(t.value.from,t.value.to)]}):t.is(fh)&&(r=r.update({filter:(i,s)=>t.value.from!=i||t.value.to!=s,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;r.between(i,i,(s,u)=>{s<i&&u>i&&(t=!0)}),t&&(r=r.update({filterFrom:i,filterTo:i,filter:(s,u)=>u<=i||s>=i}))}return r},provide:r=>$n.decorations.from(r)});function lf(r,e,t){var i;let s=null;return null===(i=r.field(wa,!1))||void 0===i||i.between(e,t,(u,g)=>{(!s||s.from>u)&&(s={from:u,to:g})}),s}function c1(r,e,t){let i=!1;return r.between(e,e,(s,u)=>{s==e&&u==t&&(i=!0)}),i}function _0(r,e){return r.field(wa,!1)?e:e.concat(_n.appendConfig.of(mh()))}function Cc(r,e,t=!0){let i=r.state.doc.lineAt(e.from).number,s=r.state.doc.lineAt(e.to).number;return $n.announce.of(`${r.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${r.state.phrase("to")} ${s}.`)}const cf=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:r=>{for(let e of I0(r)){let t=sf(r.state,e.from,e.to);if(t)return r.dispatch({effects:_0(r.state,[af.of(t),Cc(r,t)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:r=>{if(!r.state.field(wa,!1))return!1;let e=[];for(let t of I0(r)){let i=lf(r.state,t.from,t.to);i&&e.push(fh.of(i),Cc(r,i,!1))}return e.length&&r.dispatch({effects:e}),e.length>0}},{key:"Ctrl-Alt-[",run:r=>{let{state:e}=r,t=[];for(let i=0;i<e.doc.length;){let s=r.lineBlockAt(i),u=sf(e,s.from,s.to);u&&t.push(af.of(u)),i=(u?r.lineBlockAt(u.to):s).to+1}return t.length&&r.dispatch({effects:_0(r.state,t)}),!!t.length}},{key:"Ctrl-Alt-]",run:r=>{let e=r.state.field(wa,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,r.state.doc.length,(i,s)=>{t.push(fh.of({from:i,to:s}))}),r.dispatch({effects:t}),!0}}],pl={placeholderDOM:null,placeholderText:"\u2026"},ph=sn.define({combine:r=>Mo(r,pl)});function mh(r){let e=[wa,uf];return r&&e.push(ph.of(r)),e}const h1=an.replace({widget:new class extends Fo{toDOM(r){let{state:e}=r,t=e.facet(ph),i=u=>{let g=r.lineBlockAt(r.posAtDOM(u.target)),I=lf(r.state,g.from,g.to);I&&r.dispatch({effects:fh.of(I)}),u.preventDefault()};if(t.placeholderDOM)return t.placeholderDOM(r,i);let s=document.createElement("span");return s.textContent=t.placeholderText,s.setAttribute("aria-label",e.phrase("folded code")),s.title=e.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}}}),d1={openText:"\u2304",closedText:"\u203a",markerDOM:null,domEventHandlers:{}};class Qo extends Fr{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function f1(r={}){let e=Object.assign(Object.assign({},d1),r),t=new Qo(e,!0),i=new Qo(e,!1),s=Gn.fromClass(class{constructor(g){this.from=g.viewport.from,this.markers=this.buildMarkers(g)}update(g){(g.docChanged||g.viewportChanged||g.startState.facet(ya)!=g.state.facet(ya)||g.startState.field(wa,!1)!=g.state.field(wa,!1)||ni(g.startState)!=ni(g.state))&&(this.markers=this.buildMarkers(g.view))}buildMarkers(g){let I=new No;for(let B of g.viewportLineBlocks){let ne=lf(g.state,B.from,B.to)?i:sf(g.state,B.from,B.to)?t:null;ne&&I.add(B.from,B.from,ne)}return I.finish()}}),{domEventHandlers:u}=e;return[s,vc({class:"cm-foldGutter",markers(g){var I;return(null===(I=g.plugin(s))||void 0===I?void 0:I.markers)||Ci.empty},initialSpacer:()=>new Qo(e,!1),domEventHandlers:Object.assign(Object.assign({},u),{click:(g,I,B)=>{if(u.click&&u.click(g,I,B))return!0;let ne=lf(g.state,I.from,I.to);if(ne)return g.dispatch({effects:fh.of(ne)}),!0;let fe=sf(g.state,I.from,I.to);return!!fe&&(g.dispatch({effects:af.of(fe)}),!0)}})}),mh()]}const uf=$n.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class gh{constructor(e,t){let i;function s(I){let B=Ft.V.newName();return(i||(i=Object.create(null)))["."+B]=I,B}const u="string"==typeof t.all?t.all:t.all?s(t.all):void 0,g=t.scope;this.scope=g instanceof Jr?I=>I.prop(Bs)==g.data:g?I=>I==g:void 0,this.style=au(e.map(I=>({tag:I.tag,class:I.class||s(Object.assign({},I,{tag:null}))})),{all:u}).style,this.module=i?new Ft.V(i):null,this.themeType=t.themeType}static define(e,t){return new gh(e,t||{})}}const ml=sn.define(),T0=sn.define({combine:r=>r.length?[r[0]]:null});function vh(r){let e=r.facet(ml);return e.length?e:r.facet(T0)}function xo(r,e){let i,t=[hf];return r instanceof gh&&(r.module&&t.push($n.styleModule.of(r.module)),i=r.themeType),t.push(e?.fallback?T0.of(r):i?ml.computeN([$n.darkTheme],s=>s.facet($n.darkTheme)==("dark"==i)?[r]:[]):ml.of(r)),t}class p1{constructor(e){this.markCache=Object.create(null),this.tree=ni(e.state),this.decorations=this.buildDeco(e,vh(e.state))}update(e){let t=ni(e.state),i=vh(e.state),s=i!=vh(e.startState);t.length<e.view.viewport.to&&!s&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||s)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,t){if(!t||!this.tree.length)return an.none;let i=new No;for(let{from:s,to:u}of e.visibleRanges)Zv(this.tree,t,(g,I,B)=>{i.add(g,I,this.markCache[B]||(this.markCache[B]=an.mark({class:B})))},s,u);return i.finish()}}const hf=ia.high(Gn.fromClass(p1,{decorations:r=>r.decorations})),m1=gh.define([{tag:st.meta,color:"#7a757a"},{tag:st.link,textDecoration:"underline"},{tag:st.heading,textDecoration:"underline",fontWeight:"bold"},{tag:st.emphasis,fontStyle:"italic"},{tag:st.strong,fontWeight:"bold"},{tag:st.strikethrough,textDecoration:"line-through"},{tag:st.keyword,color:"#708"},{tag:[st.atom,st.bool,st.url,st.contentSeparator,st.labelName],color:"#219"},{tag:[st.literal,st.inserted],color:"#164"},{tag:[st.string,st.deleted],color:"#a11"},{tag:[st.regexp,st.escape,st.special(st.string)],color:"#e40"},{tag:st.definition(st.variableName),color:"#00f"},{tag:st.local(st.variableName),color:"#30a"},{tag:[st.typeName,st.namespace],color:"#085"},{tag:st.className,color:"#167"},{tag:[st.special(st.variableName),st.macroName],color:"#256"},{tag:st.definition(st.propertyName),color:"#00c"},{tag:st.comment,color:"#940"},{tag:st.invalid,color:"#f00"}]),R0=$n.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),df=1e4,Ds="()[]{}",yh=sn.define({combine:r=>Mo(r,{afterCursor:!0,brackets:Ds,maxScanDistance:df,renderMatch:gl})}),$0=an.mark({class:"cm-matchingBracket"}),M0=an.mark({class:"cm-nonmatchingBracket"});function gl(r){let e=[],t=r.matched?$0:M0;return e.push(t.range(r.start.from,r.start.to)),r.end&&e.push(t.range(r.end.from,r.end.to)),e}const v1=[Dn.define({create:()=>an.none,update(r,e){if(!e.docChanged&&!e.selection)return r;let t=[],i=e.state.facet(yh);for(let s of e.state.selection.ranges){if(!s.empty)continue;let u=to(e.state,s.head,-1,i)||s.head>0&&to(e.state,s.head-1,1,i)||i.afterCursor&&(to(e.state,s.head,1,i)||s.head<e.state.doc.length&&to(e.state,s.head+1,-1,i));u&&(t=t.concat(i.renderMatch(u,e.state)))}return an.set(t,!0)},provide:r=>$n.decorations.from(r)}),R0];function N0(r={}){return[yh.of(r),v1]}function ff(r,e,t){let i=r.prop(e<0?Qt.openedBy:Qt.closedBy);if(i)return i;if(1==r.name.length){let s=t.indexOf(r.name);if(s>-1&&s%2==(e<0?1:0))return[t[s+e]]}return null}function to(r,e,t,i={}){let s=i.maxScanDistance||df,u=i.brackets||Ds,g=ni(r),I=g.resolveInner(e,t);for(let B=I;B;B=B.parent){let ne=ff(B.type,t,u);if(ne&&B.from<B.to)return y1(0,0,t,B,ne,u)}return function b1(r,e,t,i,s,u,g){let I=t<0?r.sliceDoc(e-1,e):r.sliceDoc(e,e+1),B=g.indexOf(I);if(B<0||B%2==0!=t>0)return null;let ne={from:t<0?e-1:e,to:t>0?e+1:e},fe=r.doc.iterRange(e,t>0?r.doc.length:0),ye=0;for(let Ne=0;!fe.next().done&&Ne<=u;){let je=fe.value;t<0&&(Ne+=je.length);let ze=e+Ne*t;for(let At=t>0?0:je.length-1,kt=t>0?je.length:-1;At!=kt;At+=t){let Nt=g.indexOf(je[At]);if(!(Nt<0||i.resolve(ze+At,1).type!=s))if(Nt%2==0==t>0)ye++;else{if(1==ye)return{start:ne,end:{from:ze+At,to:ze+At+1},matched:Nt>>1==B>>1};ye--}}t>0&&(Ne+=je.length)}return fe.done?{start:ne,matched:!1}:null}(r,e,t,g,I.type,s,u)}function y1(r,e,t,i,s,u){let g=i.parent,I={from:i.from,to:i.to},B=0,ne=g?.cursor();if(ne&&(t<0?ne.childBefore(i.from):ne.childAfter(i.to)))do{if(t<0?ne.to<=i.from:ne.from>=i.to){if(0==B&&s.indexOf(ne.type.name)>-1&&ne.from<ne.to)return{start:I,end:{from:ne.from,to:ne.to},matched:!0};if(ff(ne.type,t,u))B++;else if(ff(ne.type,-t,u)&&(B--,0==B))return{start:I,end:ne.from==ne.to?void 0:{from:ne.from,to:ne.to},matched:!1}}}while(t<0?ne.prevSibling():ne.nextSibling());return{start:I,matched:!1}}const gf=Object.create(null),bh=[Kn.none],Km=[],W0=Object.create(null);for(let[r,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","typeName"],["attribute","propertyName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])W0[r]=qm(gf,e);function vf(r,e){Km.indexOf(r)>-1||(Km.push(r),console.warn(e))}function qm(r,e){let t=null;for(let u of e.split(".")){let g=r[u]||st[u];g?"function"==typeof g?t?t=g(t):vf(u,`Modifier ${u} used at start of tag`):t?vf(u,`Tag ${u} used as modifier`):t=g:vf(u,`Unknown highlighting tag ${u}`)}if(!t)return 0;let i=e.replace(/ /g,"_"),s=Kn.define({id:bh.length,name:i,props:[Fv({[i]:t})]});return bh.push(s),s.id}class j0{constructor(e,t,i){this.state=e,this.pos=t,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let t=ni(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),s=t.text.slice(i-t.from,this.pos-t.from),u=s.search(H0(e,!1));return u<0?null:{from:i+u,to:this.pos,text:s.slice(u)}}get aborted(){return null==this.abortListeners}addEventListener(e,t){"abort"==e&&this.abortListeners&&this.abortListeners.push(t)}}function Fs(r){let e=Object.keys(r).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function xc(r){let e=r.map(s=>"string"==typeof s?{label:s}:s),[t,i]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:function Z0(r){let e=Object.create(null),t=Object.create(null);for(let{label:s}of r){e[s[0]]=!0;for(let u=1;u<s.length;u++)t[s[u]]=!0}let i=Fs(e)+Fs(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}(e);return s=>{let u=s.matchBefore(i);return u||s.explicit?{from:u?u.from:s.pos,options:e,validFor:t}:null}}function Q0(r,e){return t=>{for(let i=ni(t.state).resolveInner(t.pos,-1);i;i=i.parent)if(r.indexOf(i.name)>-1)return null;return e(t)}}class Jm{constructor(e,t,i){this.completion=e,this.source=t,this.match=i}}function Ws(r){return r.selection.main.head}function H0(r,e){var t;let{source:i}=r,s=e&&"^"!=i[0],u="$"!=i[i.length-1];return s||u?new RegExp(`${s?"^":""}(?:${i})${u?"$":""}`,null!==(t=r.flags)&&void 0!==t?t:r.ignoreCase?"i":""):r}function wh(r,e){const t=e.completion.apply||e.completion.label;let i=e.source;"string"==typeof t?r.dispatch(function eg(r,e,t,i){return Object.assign(Object.assign({},r.changeByRange(s=>{if(s==r.selection.main)return{changes:{from:t,to:i,insert:e},range:_t.cursor(t+e.length)};let u=i-t;return!s.empty||u&&r.sliceDoc(s.from-u,s.from)!=r.sliceDoc(t,i)?{range:s}:{changes:{from:s.from-u,to:s.from,insert:e},range:_t.cursor(s.from-u+e.length)}})),{userEvent:"input.complete"})}(r.state,t,i.from,i.to)):t(r,e.completion,i.from,i.to)}const yf=new WeakMap;function z0(r){if(!Array.isArray(r))return r;let e=yf.get(r);return e||yf.set(r,e=xc(r)),e}class tg{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let i=sr(e,t),s=Ur(i);this.chars.push(i);let u=e.slice(t,t+s),g=u.toUpperCase();this.folded.push(sr(g==u?u.toLowerCase():g,0)),t+=s}this.astral=e.length!=this.chars.length}match(e){if(0==this.pattern.length)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:s,precise:u,byWord:g}=this;if(1==t.length){let Bt=sr(e,0);return Bt==t[0]?[0,0,Ur(Bt)]:Bt==i[0]?[-200,0,Ur(Bt)]:null}let I=e.indexOf(this.pattern);if(0==I)return[0,0,this.pattern.length];let B=t.length,ne=0;if(I<0){for(let Bt=0,Kt=Math.min(e.length,200);Bt<Kt&&ne<B;){let Ht=sr(e,Bt);(Ht==t[ne]||Ht==i[ne])&&(s[ne++]=Bt),Bt+=Ur(Ht)}if(ne<B)return null}let fe=0,ye=0,Ne=!1,je=0,ze=-1,At=-1,kt=/[a-z]/.test(e),Nt=!0;for(let Bt=0,Kt=Math.min(e.length,200),Ht=0;Bt<Kt&&ye<B;){let Jt=sr(e,Bt);I<0&&(fe<B&&Jt==t[fe]&&(u[fe++]=Bt),je<B&&(Jt==t[je]||Jt==i[je]?(0==je&&(ze=Bt),At=Bt+1,je++):je=0));let ln,bn=Jt<255?Jt>=48&&Jt<=57||Jt>=97&&Jt<=122?2:Jt>=65&&Jt<=90?1:0:(ln=Js(Jt))!=ln.toLowerCase()?1:ln!=ln.toUpperCase()?2:0;(!Bt||1==bn&&kt||0==Ht&&0!=bn)&&(t[ye]==Jt||i[ye]==Jt&&(Ne=!0)?g[ye++]=Bt:g.length&&(Nt=!1)),Ht=bn,Bt+=Ur(Jt)}return ye==B&&0==g[0]&&Nt?this.result((Ne?-200:0)-100,g,e):je==B&&0==ze?[-200-e.length,0,At]:I>-1?[-700-e.length,I,I+this.pattern.length]:je==B?[-900-e.length,ze,At]:ye==B?this.result((Ne?-200:0)-100-700+(Nt?0:-1100),g,e):2==t.length?null:this.result((s[0]?-700:0)-200-1100,s,e)}result(e,t,i){let s=[e-i.length],u=1;for(let g of t){let I=g+(this.astral?Ur(sr(i,g)):1);u>1&&s[u-1]==g?s[u-1]=I:(s[u++]=g,s[u++]=I)}return s}}const as=sn.define({combine:r=>Mo(r,{activateOnTyping:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[]},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,optionClass:(e,t)=>i=>function bf(r,e){return r?e?r+" "+e:r:e}(e(i),t(i)),addToOptions:(e,t)=>e.concat(t)})});function Cf(r,e,t){if(r<=t)return{from:0,to:r};if(e<=r>>1){let s=Math.floor(e/t);return{from:s*t,to:(s+1)*t}}let i=Math.floor((r-e)/t);return{from:r-(i+1)*t,to:r-i*t}}class ng{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:I=>this.positionInfo(I),key:this};let i=e.state.field(t),{options:s,selected:u}=i.open,g=e.state.facet(as);this.optionContent=function U0(r){let e=r.addToOptions.slice();return r.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,s){let u=document.createElement("span");u.className="cm-completionLabel";let{label:g}=t,I=0;for(let B=1;B<s.length;){let ne=s[B++],fe=s[B++];ne>I&&u.appendChild(document.createTextNode(g.slice(I,ne)));let ye=u.appendChild(document.createElement("span"));ye.appendChild(document.createTextNode(g.slice(ne,fe))),ye.className="cm-completionMatchedText",I=fe}return I<g.length&&u.appendChild(document.createTextNode(g.slice(I))),u},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}(g),this.optionClass=g.optionClass,this.range=Cf(s.length,u,g.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",I=>{for(let ne,B=I.target;B&&B!=this.dom;B=B.parentNode)if("LI"==B.nodeName&&(ne=/-(\d+)$/.exec(B.id))&&+ne[1]<s.length)return wh(e,s[+ne[1]]),void I.preventDefault()}),this.list=this.dom.appendChild(this.createListBox(s,i.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=Cf(t.options.length,t.selected,this.view.state.facet(as).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:i}=t.options[t.selected],{info:s}=i;if(!s)return;let u="string"==typeof s?document.createTextNode(s):s(i);if(!u)return;"then"in u?u.then(g=>{g&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(g)}).catch(g=>Xr(this.view.state,g,"completion info")):this.addInfoPane(u)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,s=this.range.from;i;i=i.nextSibling,s++)s==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&function X0(r,e){let t=r.getBoundingClientRect(),i=e.getBoundingClientRect();i.top<t.top?r.scrollTop-=t.top-i.top:i.bottom>t.bottom&&(r.scrollTop+=i.bottom-t.bottom)}(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),s=e.getBoundingClientRect();if(s.top>Math.min(innerHeight,t.bottom)-10||s.bottom<Math.max(0,t.top)+10)return null;let u=Math.max(0,Math.min(s.top,innerHeight-i.height))-t.top,g=this.view.textDirection==yi.RTL,I=t.left,B=innerWidth-t.right;return g&&I<Math.min(i.width,B)?g=!1:!g&&B<Math.min(i.width,I)&&(g=!0),{top:u,left:g}}positionInfo(e){this.info&&(this.info.style.top=(e?e.top:-1e6)+"px",e&&(this.info.classList.toggle("cm-completionInfo-left",e.left),this.info.classList.toggle("cm-completionInfo-right",!e.left)))}createListBox(e,t,i){const s=document.createElement("ul");s.id=t,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let u=i.from;u<i.to;u++){let{completion:g,match:I}=e[u];const B=s.appendChild(document.createElement("li"));B.id=t+"-"+u,B.setAttribute("role","option");let ne=this.optionClass(g);ne&&(B.className=ne);for(let fe of this.optionContent){let ye=fe(g,this.view.state,I);ye&&B.appendChild(ye)}}return i.from&&s.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&s.classList.add("cm-completionListIncompleteBottom"),s}}function rg(r){return 100*(r.boost||0)+(r.apply?10:0)+(r.info?5:0)+(r.type?1:0)}class vl{constructor(e,t,i,s,u){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=s,this.selected=u}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new vl(this.options,Ah(t,e),this.tooltip,this.timestamp,e)}static build(e,t,i,s,u){let g=function wf(r,e){let t=[],i=0;for(let g of r)if(g.hasResult())if(!1===g.result.filter){let I=g.result.getMatch;for(let B of g.result.options){let ne=[1e9-i++];if(I)for(let fe of I(B))ne.push(fe);t.push(new Jm(B,g,ne))}}else{let B,I=new tg(e.sliceDoc(g.from,g.to));for(let ne of g.result.options)(B=I.match(ne.label))&&(null!=ne.boost&&(B[0]+=ne.boost),t.push(new Jm(ne,g,B)))}let s=[],u=null;for(let g of t.sort(ag))!u||u.label!=g.completion.label||u.detail!=g.completion.detail||null!=u.type&&null!=g.completion.type&&u.type!=g.completion.type||u.apply!=g.completion.apply?s.push(g):rg(g.completion)>rg(u)&&(s[s.length-1]=g),u=g.completion;return s}(e,t);if(!g.length)return null;let I=0;if(s&&s.selected){let B=s.options[s.selected].completion;for(let ne=0;ne<g.length;ne++)if(g[ne].completion==B){I=ne;break}}return new vl(g,Ah(i,I),{pos:e.reduce((B,ne)=>ne.hasResult()?Math.min(B,ne.from):B,1e8),create:(r=hr,e=>new ng(e,r)),above:u.aboveCursor},s?s.timestamp:Date.now(),I);var r}map(e){return new vl(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class xh{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new xh(sg,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,i=t.facet(as),u=(i.override||t.languageDataAt("autocomplete",Ws(t)).map(z0)).map(I=>(this.active.find(ne=>ne.source==I)||new kr(I,this.active.some(ne=>0!=ne.state)?1:0)).update(e,i));u.length==this.active.length&&u.every((I,B)=>I==this.active[B])&&(u=this.active);let g=e.selection||u.some(I=>I.hasResult()&&e.changes.touchesRange(I.from,I.to))||!function og(r,e){if(r==e)return!0;for(let t=0,i=0;;){for(;t<r.length&&!r[t].hasResult;)t++;for(;i<e.length&&!e[i].hasResult;)i++;let s=t==r.length,u=i==e.length;if(s||u)return s==u;if(r[t++].result!=e[i++].result)return!1}}(u,this.active)?vl.build(u,t,this.id,this.open,i):this.open&&e.docChanged?this.open.map(e.changes):this.open;!g&&u.every(I=>1!=I.state)&&u.some(I=>I.hasResult())&&(u=u.map(I=>I.hasResult()?new kr(I.source,0):I));for(let I of e.effects)I.is(Ic)&&(g=g&&g.setSelected(I.value,this.id));return u==this.active&&g==this.open?this:new xh(u,this.id,g)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:K0}}const K0={"aria-autocomplete":"list"};function Ah(r,e){return{"aria-autocomplete":"list","aria-haspopup":"listbox","aria-activedescendant":r+"-"+e,"aria-controls":r}}const sg=[];function ag(r,e){return e.match[0]-r.match[0]||r.completion.label.localeCompare(e.completion.label)}function Ac(r){return r.isUserEvent("input.type")?"input":r.isUserEvent("delete.backward")?"delete":null}class kr{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=Ac(e),s=this;i?s=s.handleUserEvent(e,i,t):e.docChanged?s=s.handleChange(e):e.selection&&0!=s.state&&(s=new kr(s.source,0));for(let u of e.effects)if(u.is(xf))s=new kr(s.source,1,u.value?Ws(e.state):-1);else if(u.is(Oc))s=new kr(s.source,0);else if(u.is(bl))for(let g of u.value)g.source==s.source&&(s=g);return s}handleUserEvent(e,t,i){return"delete"!=t&&i.activateOnTyping?new kr(this.source,1):this.map(e.changes)}handleChange(e){return e.changes.touchesRange(Ws(e.startState))?new kr(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new kr(this.source,this.state,e.mapPos(this.explicitPos))}}class yl extends kr{constructor(e,t,i,s,u){super(e,2,t),this.result=i,this.from=s,this.to=u}hasResult(){return!0}handleUserEvent(e,t,i){var s;let u=e.changes.mapPos(this.from),g=e.changes.mapPos(this.to,1),I=Ws(e.state);if((this.explicitPos<0?I<=u:I<this.from)||I>g||"delete"==t&&Ws(e.startState)==this.from)return new kr(this.source,"input"==t&&i.activateOnTyping?1:0);let ne,B=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return function Y0(r,e,t,i){if(!r)return!1;let s=e.sliceDoc(t,i);return"function"==typeof r?r(s,t,i,e):H0(r,!0).test(s)}(this.result.validFor,e.state,u,g)?new yl(this.source,B,this.result,u,g):this.result.update&&(ne=this.result.update(this.result,u,g,new j0(e.state,I,B>=0)))?new yl(this.source,B,ne,ne.from,null!==(s=ne.to)&&void 0!==s?s:Ws(e.state)):new kr(this.source,1,B)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new kr(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new yl(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}const xf=_n.define(),Oc=_n.define(),bl=_n.define({map:(r,e)=>r.map(t=>t.map(e))}),Ic=_n.define(),hr=Dn.define({create:()=>xh.start(),update:(r,e)=>r.update(e),provide:r=>[yo.from(r,e=>e.tooltip),$n.contentAttributes.from(r,e=>e.attrs)]});function _c(r,e="option"){return t=>{let i=t.state.field(hr,!1);if(!i||!i.open||Date.now()-i.open.timestamp<75)return!1;let u,s=1;"page"==e&&(u=function h0(r,e){let t=r.plugin(Xd);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}(t,i.open.tooltip))&&(s=Math.max(2,Math.floor(u.dom.offsetHeight/u.dom.querySelector("li").offsetHeight)-1));let g=i.open.selected+s*(r?1:-1),{length:I}=i.open.options;return g<0?g="page"==e?0:I-1:g>=I&&(g="page"==e?I-1:0),t.dispatch({effects:Ic.of(g)}),!0}}class eb{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const nb=Gn.fromClass(class{constructor(r){this.view=r,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of r.state.field(hr).active)1==e.state&&this.startQuery(e)}update(r){let e=r.state.field(hr);if(!r.selectionSet&&!r.docChanged&&r.startState.field(hr)==e)return;let t=r.transactions.some(i=>(i.selection||i.docChanged)&&!Ac(i));for(let i=0;i<this.running.length;i++){let s=this.running[i];if(t||s.updates.length+r.transactions.length>50&&Date.now()-s.time>1e3){for(let u of s.context.abortListeners)try{u()}catch(g){Xr(this.view.state,g)}s.context.abortListeners=null,this.running.splice(i--,1)}else s.updates.push(...r.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(i=>1==i.state&&!this.running.some(s=>s.active.source==i.source))?setTimeout(()=>this.startUpdate(),50):-1,0!=this.composing)for(let i of r.transactions)"input"==Ac(i)?this.composing=2:2==this.composing&&i.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:r}=this.view,e=r.field(hr);for(let t of e.active)1==t.state&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t)}startQuery(r){let{state:e}=this.view,t=Ws(e),i=new j0(e,t,r.explicitPos==t),s=new eb(r,i);this.running.push(s),Promise.resolve(r.source(i)).then(u=>{s.context.aborted||(s.done=u||null,this.scheduleAccept())},u=>{this.view.dispatch({effects:Oc.of(null)}),Xr(this.view.state,u)})}scheduleAccept(){this.running.every(r=>void 0!==r.done)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),50))}accept(){var r;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(as);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(void 0===s.done)continue;if(this.running.splice(i--,1),s.done){let g=new yl(s.active.source,s.active.explicitPos,s.done,s.done.from,null!==(r=s.done.to)&&void 0!==r?r:Ws(s.updates.length?s.updates[0].startState:this.view.state));for(let I of s.updates)g=g.update(I,t);if(g.hasResult()){e.push(g);continue}}let u=this.view.state.field(hr).active.find(g=>g.source==s.active.source);if(u&&1==u.state)if(null==s.done){let g=new kr(s.active.source,0);for(let I of s.updates)g=g.update(I,t);1!=g.state&&e.push(g)}else this.startQuery(u)}e.length&&this.view.dispatch({effects:bl.of(e)})}},{eventHandlers:{blur(){let r=this.view.state.field(hr,!1);r&&r.tooltip&&this.view.state.facet(as).closeOnBlur&&this.view.dispatch({effects:Oc.of(null)})},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout(()=>this.view.dispatch({effects:xf.of(!1)}),20),this.composing=0}}}),Sc=$n.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xb7\xb7\xb7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25cb'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25cc'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1d465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1d436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1d461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222a'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25a1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1f511}\ufe0e'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25a2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class O1{constructor(e,t,i,s){this.field=e,this.line=t,this.from=i,this.to=s}}class Of{constructor(e,t,i){this.field=e,this.from=t,this.to=i}map(e){let t=e.mapPos(this.from,-1,ar.TrackDel),i=e.mapPos(this.to,1,ar.TrackDel);return null==t||null==i?null:new Of(this.field,t,i)}}class Ec{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let i=[],s=[t],u=e.doc.lineAt(t),g=/^\s*/.exec(u.text)[0];for(let B of this.lines){if(i.length){let ne=g,fe=/^\t*/.exec(B)[0].length;for(let ye=0;ye<fe;ye++)ne+=e.facet(hl);s.push(t+ne.length-fe),B=ne+B.slice(fe)}i.push(B),t+=B.length+1}return{text:i,ranges:this.fieldPositions.map(B=>new Of(B.field,s[B.line]+B.from,s[B.line]+B.to))}}static parse(e){let u,t=[],i=[],s=[];for(let g of e.split(/\r\n?|\n/)){for(;u=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(g);){let I=u[1]?+u[1]:null,B=u[2]||u[3]||"",ne=-1;for(let fe=0;fe<t.length;fe++)(null!=I?t[fe].seq==I:B&&t[fe].name==B)&&(ne=fe);if(ne<0){let fe=0;for(;fe<t.length&&(null==I||null!=t[fe].seq&&t[fe].seq<I);)fe++;t.splice(fe,0,{seq:I,name:B}),ne=fe;for(let ye of s)ye.field>=ne&&ye.field++}s.push(new O1(ne,i.length,u.index,u.index+B.length)),g=g.slice(0,u.index)+B+g.slice(u.index+u[0].length)}i.push(g)}return new Ec(i,s)}}let ib=an.widget({widget:new class extends Fo{toDOM(){let r=document.createElement("span");return r.className="cm-snippetFieldPosition",r}ignoreEvent(){return!1}}}),rb=an.mark({class:"cm-snippetField"});class Cl{constructor(e,t){this.ranges=e,this.active=t,this.deco=an.set(e.map(i=>(i.from==i.to?ib:rb).range(i.from,i.to)))}map(e){let t=[];for(let i of this.ranges){let s=i.map(e);if(!s)return null;t.push(s)}return new Cl(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(i=>i.field==this.active&&i.from<=t.from&&i.to>=t.to))}}const kc=_n.define({map:(r,e)=>r&&r.map(e)}),Oh=_n.define(),Tc=Dn.define({create:()=>null,update(r,e){for(let t of e.effects){if(t.is(kc))return t.value;if(t.is(Oh)&&r)return new Cl(r.ranges,t.value)}return r&&e.docChanged&&(r=r.map(e.changes)),r&&e.selection&&!r.selectionInsideField(e.selection)&&(r=null),r},provide:r=>$n.decorations.from(r,e=>e?e.deco:an.none)});function ug(r,e){return _t.create(r.filter(t=>t.field==e).map(t=>_t.range(t.from,t.to)))}function I1(r){let e=Ec.parse(r);return(t,i,s,u)=>{let{text:g,ranges:I}=e.instantiate(t.state,s),B={changes:{from:s,to:u,insert:Vn.of(g)}};if(I.length&&(B.selection=ug(I,0)),I.length>1){let ne=new Cl(I,0),fe=B.effects=[kc.of(ne)];void 0===t.state.field(Tc,!1)&&fe.push(_n.appendConfig.of([Tc,hg,lb,Sc]))}t.dispatch(t.state.update(B))}}function ob(r){return({state:e,dispatch:t})=>{let i=e.field(Tc,!1);if(!i||r<0&&0==i.active)return!1;let s=i.active+r,u=r>0&&!i.ranges.some(g=>g.field==s+r);return t(e.update({selection:ug(i.ranges,s),effects:kc.of(u?null:new Cl(i.ranges,s))})),!0}}const If=[{key:"Tab",run:ob(1),shift:ob(-1)},{key:"Escape",run:({state:r,dispatch:e})=>!!r.field(Tc,!1)&&(e(r.update({effects:kc.of(null)})),!0)}],Ih=sn.define({combine:r=>r.length?r[0]:If}),hg=ia.highest(Hu.compute([Ih],r=>r.facet(Ih)));function Gs(r,e){return Object.assign(Object.assign({},e),{apply:I1(r)})}const lb=$n.domEventHandlers({mousedown(r,e){let i,t=e.state.field(Tc,!1);if(!t||null==(i=e.posAtCoords({x:r.clientX,y:r.clientY})))return!1;let s=t.ranges.find(u=>u.from<=i&&u.to>=i);return!(!s||s.field==t.active||(e.dispatch({selection:ug(t.ranges,s.field),effects:kc.of(t.ranges.some(u=>u.field>s.field)?new Cl(t.ranges,s.field):null)}),0))}}),js={brackets:["(","[","{","'",'"'],before:")]}:;>"},Zs=_n.define({map:(r,e)=>e.mapPos(r,-1,ar.TrackAfter)??void 0}),_h=_n.define({map:(r,e)=>e.mapPos(r)}),Pc=new class extends sa{};Pc.startSide=1,Pc.endSide=-1;const hb=Dn.define({create:()=>Ci.empty,update(r,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,i=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(i,-1)&&(r=Ci.empty)}r=r.map(e.changes);for(let t of e.effects)t.is(Zs)?r=r.update({add:[Pc.range(t.value,t.value+1)]}):t.is(_h)&&(r=r.update({filter:i=>i!=t.value}));return r}});function db(){return[pb,hb]}const wl="()[]{}<>";function Rc(r){for(let e=0;e<8;e+=2)if(wl.charCodeAt(e)==r)return wl.charAt(e+1);return Js(r<128?r:r+1)}function mg(r,e){return r.languageDataAt("closeBrackets",e)[0]||js}const fb="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),pb=$n.inputHandler.of((r,e,t,i)=>{if((fb?r.composing:r.compositionStarted)||r.state.readOnly)return!1;let s=r.state.selection.main;if(i.length>2||2==i.length&&1==Ur(sr(i,0))||e!=s.from||t!=s.to)return!1;let u=function S1(r,e){let t=mg(r,r.selection.main.head),i=t.brackets||js.brackets;for(let s of i){let u=Rc(sr(s,0));if(e==s)return u==s?E1(r,s,i.indexOf(s+s+s)>-1):mb(r,s,u,t.before||js.before);if(e==u&&vg(r,r.selection.main.from))return yg(r,0,u)}return null}(r.state,i);return!!u&&(r.dispatch(u),!0)}),_1=[{key:"Backspace",run:({state:r,dispatch:e})=>{if(r.readOnly)return!1;let i=mg(r,r.selection.main.head).brackets||js.brackets,s=null,u=r.changeByRange(g=>{if(g.empty){let I=function Ef(r,e){let t=r.sliceString(e-2,e);return Ur(sr(t,0))==t.length?t:t.slice(1)}(r.doc,g.head);for(let B of i)if(B==I&&xl(r.doc,g.head)==Rc(sr(B,0)))return{changes:{from:g.head-B.length,to:g.head+B.length},range:_t.cursor(g.head-B.length),userEvent:"delete.backward"}}return{range:s=g}});return s||e(r.update(u,{scrollIntoView:!0})),!s}}];function vg(r,e){let t=!1;return r.field(hb).between(0,r.doc.length,i=>{i==e&&(t=!0)}),t}function xl(r,e){let t=r.sliceString(e,e+2);return t.slice(0,Ur(sr(t,0)))}function mb(r,e,t,i){let s=null,u=r.changeByRange(g=>{if(!g.empty)return{changes:[{insert:e,from:g.from},{insert:t,from:g.to}],effects:Zs.of(g.to+e.length),range:_t.range(g.anchor+e.length,g.head+e.length)};let I=xl(r.doc,g.head);return!I||/\s/.test(I)||i.indexOf(I)>-1?{changes:{insert:e+t,from:g.head},effects:Zs.of(g.head+e.length),range:_t.cursor(g.head+e.length)}:{range:s=g}});return s?null:r.update(u,{scrollIntoView:!0,userEvent:"input.type"})}function yg(r,e,t){let i=null,s=r.selection.ranges.map(u=>u.empty&&xl(r.doc,u.head)==t?_t.cursor(u.head+t.length):i=u);return i?null:r.update({selection:_t.create(s,r.selection.mainIndex),scrollIntoView:!0,effects:r.selection.ranges.map(({from:u})=>_h.of(u))})}function E1(r,e,t){let i=null,s=r.changeByRange(u=>{if(!u.empty)return{changes:[{insert:e,from:u.from},{insert:e,from:u.to}],effects:Zs.of(u.to+e.length),range:_t.range(u.anchor+e.length,u.head+e.length)};let g=u.head,I=xl(r.doc,g);if(I==e){if(bg(r,g))return{changes:{insert:e+e,from:g},effects:Zs.of(g+e.length),range:_t.cursor(g+e.length)};if(vg(r,g)){let B=t&&r.sliceDoc(g,g+3*e.length)==e+e+e;return{range:_t.cursor(g+e.length*(B?3:1)),effects:_h.of(g)}}}else{if(t&&r.sliceDoc(g-2*e.length,g)==e+e&&bg(r,g-2*e.length))return{changes:{insert:e+e+e+e,from:g},effects:Zs.of(g+e.length),range:_t.cursor(g+e.length)};if(r.charCategorizer(g)(I)!=Dt.Word){let B=r.sliceDoc(g-1,g);if(B!=e&&r.charCategorizer(g)(B)!=Dt.Word&&!function k1(r,e,t){let i=ni(r).resolveInner(e,-1);for(let s=0;s<5;s++){if(r.sliceDoc(i.from,i.from+t.length)==t)return!0;let u=i.to==e&&i.parent;if(!u)break;i=u}return!1}(r,g,e))return{changes:{insert:e+e,from:g},effects:Zs.of(g+e.length),range:_t.cursor(g+e.length)}}}return{range:i=u}});return i?null:r.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function bg(r,e){let t=ni(r).resolveInner(e+1);return t.parent&&t.from==e}function Cg(r={}){return[hr,as.of(r),nb,T1,Sc]}const gb=[{key:"Ctrl-Space",run:r=>!!r.state.field(hr,!1)&&(r.dispatch({effects:xf.of(!0)}),!0)},{key:"Escape",run:r=>{let e=r.state.field(hr,!1);return!(!e||!e.active.some(t=>0!=t.state)||(r.dispatch({effects:Oc.of(null)}),0))}},{key:"ArrowDown",run:_c(!0)},{key:"ArrowUp",run:_c(!1)},{key:"PageDown",run:_c(!0,"page")},{key:"PageUp",run:_c(!1,"page")},{key:"Enter",run:r=>{let e=r.state.field(hr,!1);return!(r.state.readOnly||!e||!e.open||Date.now()-e.open.timestamp<75||(wh(r,e.open.options[e.open.selected]),0))}}],T1=ia.highest(Hu.computeN([as],r=>r.facet(as).defaultKeymap?[gb]:[])),wg=[Gs("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),Gs("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),Gs("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),Gs("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"block",type:"keyword"}),Gs("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),Gs('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),Gs('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],wb=new Ji,xb=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function $c(r){return(e,t)=>{let i=e.node.getChild("VariableDefinition");return i&&t(i,r),!0}}const dr=["FunctionDeclaration"],xg={FunctionDeclaration:$c("function"),ClassDeclaration:$c("class"),ClassExpression:()=>!0,EnumDeclaration:$c("constant"),TypeAliasDeclaration:$c("type"),NamespaceDeclaration:$c("namespace"),VariableDefinition(r,e){r.matchContext(dr)||e(r,"variable")},TypeDefinition(r,e){e(r,"type")},__proto__:null};function Ag(r,e){let t=wb.get(e);if(t)return t;let i=[],s=!0;function u(g,I){let B=r.sliceString(g.from,g.to);i.push({label:B,type:I})}return e.cursor(lt.IncludeAnonymous).iterate(g=>{if(s)s=!1;else if(g.name){let I=xg[g.name];if(I&&I(g,u)||xb.has(g.name))return!1}else if(g.to-g.from>8192){for(let I of Ag(r,g.node))i.push(I);return!1}}),wb.set(e,i),i}const Tf=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/;function Og(r){let e=ni(r.state).resolve(r.pos,-1);if("TemplateString"==e.name||"String"==e.name||"LineComment"==e.name||"BlockComment"==e.name)return null;let t=e.to-e.from<20&&Tf.test(r.state.sliceDoc(e.from,e.to));if(!t&&!r.explicit)return null;let i=[];for(let s=e;s;s=s.parent)xb.has(s.name)&&(i=i.concat(Ag(r.state.doc,s)));return{options:i,from:t?e.from:r.pos,validFor:Tf}}const ls=nf.define({parser:ny.configure({props:[zm.add({IfStatement:Um({except:/^\s*({|else\b)/}),TryStatement:Um({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:r=>r.baseIndent,SwitchBody:r=>{let e=r.textAfter,t=/^\s*\}/.test(e),i=/^\s*(case|default)\b/.test(e);return r.baseIndent+(t?0:i?1:2)*r.unit},Block:b0({closing:"}"}),ArrowFunction:r=>r.baseIndent+r.unit,"TemplateString BlockComment":()=>-1,"Statement Property":Um({except:/^{/}),JSXElement(r){let e=/^\s*<\//.test(r.textAfter);return r.lineIndent(r.node.from)+(e?0:r.unit)},JSXEscape(r){let e=/\s*\}/.test(r.textAfter);return r.lineIndent(r.node.from)+(e?0:r.unit)},"JSXOpenTag JSXSelfClosingTag":r=>r.column(r.node.from)+r.unit}),x0.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression":function A0(r){let e=r.firstChild,t=r.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?r.to:t.from}:null},BlockComment:r=>({from:r.from+2,to:r.to-2})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),Mc=ls.configure({dialect:"ts"}),Ab=ls.configure({dialect:"jsx"}),cs=ls.configure({dialect:"jsx ts"});function Sh(r={}){return new wo(r.jsx?r.typescript?cs:Ab:r.typescript?Mc:ls,[ls.data.of({autocomplete:Q0(["LineComment","BlockComment","String"],xc(wg))}),ls.data.of({autocomplete:Og}),r.jsx?Pf:[]])}function Ig(r,e,t=r.length){if(!e)return"";let i=e.getChild("JSXIdentifier");return i?r.sliceString(i.from,Math.min(i.to,t)):""}const _g="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),Pf=$n.inputHandler.of((r,e,t,i)=>{if((_g?r.composing:r.compositionStarted)||r.state.readOnly||e!=t||">"!=i&&"/"!=i||!ls.isActiveAt(r.state,e,-1))return!1;let{state:s}=r,u=s.changeByRange(g=>{var I,B,ne;let Ne,{head:fe}=g,ye=ni(s).resolveInner(fe,-1);if("JSXStartTag"==ye.name&&(ye=ye.parent),">"==i&&"JSXFragmentTag"==ye.name)return{range:_t.cursor(fe+1),changes:{from:fe,insert:"><>"}};if(">"==i&&"JSXIdentifier"==ye.name){if("JSXEndTag"!=(null===(B=null===(I=ye.parent)||void 0===I?void 0:I.lastChild)||void 0===B?void 0:B.name)&&(Ne=Ig(s.doc,ye.parent,fe)))return{range:_t.cursor(fe+1),changes:{from:fe,insert:`></${Ne}>`}}}else if("/"==i&&"JSXFragmentTag"==ye.name){let je=ye.parent,ze=je?.parent;if(je.from==fe-1&&"JSXEndTag"!=(null===(ne=ze.lastChild)||void 0===ne?void 0:ne.name)&&(Ne=Ig(s.doc,ze?.firstChild,fe))){let At=`/${Ne}>`;return{range:_t.cursor(fe+At.length),changes:{from:fe,insert:At}}}}return{range:g}});return!u.changes.empty&&(r.dispatch(u,{userEvent:"input.type",scrollIntoView:!0}),!0)});var En=(()=>((En=En||{})[En.Initial=0]="Initial",En[En.Calculating=1]="Calculating",En[En.NoMainMethodFound=2]="NoMainMethodFound",En[En.NoReturnValue=3]="NoReturnValue",En[En.ReturnValueFound=4]="ReturnValueFound",En))();class Ho{static stringToTextLeaf(e){const t=Array.isArray(e)?e.join("\n"):e??"";return Sr.create({doc:t,extensions:[Sh()]}).doc}static evaluateCustomMethod(e,t,i={},s=[]){const u=Array.isArray(t)?t.join("\n"):t;if(!e){if(!t)throw"no state and no text passed";e=Sr.create({doc:u,extensions:[Sh()]})}const g=ni(e),I=this.getMainMethod(g,e,t),B=this.findAllChildrenOfType(g,"VariableName").map(Ne=>e?.sliceDoc(Ne.from,Ne.to)).filter(Ne=>"string"==typeof Ne);if(!I.node)return{status:En.NoMainMethodFound,valueIsDefinite:!1,inputParamCandidates:B};const ne=I.node.getChild("ArrowFunction"),fe=ne?ne.getChild("Block"):I.node.getChild("Block"),ye=fe?.getChild("ReturnStatement")??void 0;if(ye){const Ne=this.getEvaluationResult(e,ye,fe,i,s);if(Ne)return{...Ne,inputParamCandidates:B}}return{status:En.NoReturnValue,valueIsDefinite:!1,inputParamCandidates:B}}static findAllChildrenOfType(e,t){t&&!Array.isArray(t)&&(t=[t]);const i=[];return e.iterate({enter:s=>{t.indexOf(s.type.name)>-1&&i.push(s.node)}}),i}static getEvaluationResult(e,t,i,s,u){const g=t.getChild("MemberExpression");if(g){const Bt=e.sliceDoc(g?.from,g?.to),Kt=Bt.split(".").map(Pn=>Pn.trim().replace("\n",""));if("injector"!==Kt[0]){const Pn=this.resolveVariableValue(e,i,Bt);if(Pn)return{...this.getEvaluationResult(e,Pn,i,s,u),valueIsDefinite:!1}}let Jt=0,ln=Kt[Jt],bn=u.find(Pn=>Pn.normalizedName===ln);for(;ln&&bn;)Jt++,ln=Kt[Jt],ln&&(bn=bn.typeDef.find(Pn=>(Pn.normalizedName??Pn.name)===ln));const Ei=Kt[Kt.length-1];return{status:En.ReturnValueFound,injectorNavigationPath:Bt,type:bn?.type,valueIsDefinite:!1,interface:bn?.interface??void 0,paramName:Ei}}const I=t.getChild("VariableName");if(I){const Bt=e.sliceDoc(I?.from,I?.to);if("undefined"===Bt)return{status:En.ReturnValueFound,detectedValue:void 0,type:void 0,valueIsDefinite:!0};const Kt=this.resolveVariableValue(e,i,Bt);if(Kt)return{...this.getEvaluationResult(e,Kt,i,s,u),valueIsDefinite:!1};const Ht=u.find(Jt=>Jt.normalizedName===Bt);return Ht?{status:En.ReturnValueFound,injectorNavigationPath:Bt,type:Ht?.type,valueIsDefinite:!1,interface:Ht?.interface??void 0,paramName:Bt}:{status:En.ReturnValueFound,valueIsDefinite:!1}}const B=t.getChild("VariableDeclaration");if(B){const Bt=e.sliceDoc(B?.from,B?.to),Kt=B.getChild("Equals");return Kt?{...this.getEvaluationResult(e,Kt.nextSibling,i,s,u),valueIsDefinite:!1}:{status:En.ReturnValueFound,valueIsDefinite:!1,variableDeclaration:Bt}}const ne=t.getChild("UnaryExpression");if(ne){const Bt=e.sliceDoc(ne?.from,ne?.to);return{status:En.ReturnValueFound,valueIsDefinite:!1,unaryExpression:Bt}}const fe=t.getChild("BinaryExpression");if(fe)return this.evaluateBinaryExpression(e,fe,i,s,u);const ye=t.getChild("CallExpression");if(ye){const Bt=e.sliceDoc(ye?.from,ye?.to);return{status:En.ReturnValueFound,valueIsDefinite:!1,unaryExpression:Bt}}const Ne=t.getChild("String");if(Ne){const Bt=e.sliceDoc(Ne?.from,Ne?.to);return{status:En.ReturnValueFound,detectedValue:Bt,type:"string",valueIsDefinite:!0}}const je=t.getChild("Number");if(je){const Bt=e.sliceDoc(je?.from,je?.to);return{status:En.ReturnValueFound,detectedValue:parseFloat(Bt),type:"number",valueIsDefinite:!0}}const ze=t.getChild("ObjectExpression");if(ze){const Bt=e.sliceDoc(ze?.from,ze?.to);try{const Kt=JSON.parse(Bt);return{status:En.ReturnValueFound,detectedValue:Kt,valueIsDefinite:!0,type:"object"}}catch{return{status:En.ReturnValueFound,valueIsDefinite:!1,type:"object"}}}const At=t.getChild("BooleanLiteral");if(At){const Bt=e.sliceDoc(At?.from,At?.to);return{status:En.ReturnValueFound,detectedValue:"true"===Bt,type:"boolean",valueIsDefinite:!0}}const kt=t.getChild("ArrayExpression");if(kt){const Bt=e.sliceDoc(kt?.from,kt?.to);return{status:En.ReturnValueFound,detectedValue:JSON.parse(Bt),type:"array",valueIsDefinite:!1}}return t.getChild("null")?{status:En.ReturnValueFound,detectedValue:null,type:void 0,valueIsDefinite:!0}:{status:En.NoReturnValue,valueIsDefinite:!1}}static isNumeric(e,t,i,s,u){return!!t&&("Number"===t.type.name||"VariableName"===t.type.name&&"number"===Ho.evaluateVariable(e,t,i,s,u).type)}static isBoolean(e,t,i,s,u){return"Boolean"===t.type.name||"VariableName"===t.type.name&&"number"===Ho.evaluateVariable(e,t,i,s,u).type}static evaluateVariable(e,t,i,s,u){const g=e.sliceDoc(t?.from,t?.to);if("undefined"===g)return{status:En.ReturnValueFound,detectedValue:void 0,type:"undefined",valueIsDefinite:!0};const I=this.resolveVariableValue(e,i,g);if(I)return{...this.getEvaluationResult(e,I,i,s,u),valueIsDefinite:!1};const B=u.find(ne=>ne.normalizedName===g);return B?{status:En.ReturnValueFound,injectorNavigationPath:g,type:B?.type,valueIsDefinite:!1,interface:B?.interface??void 0,paramName:g}:{status:En.ReturnValueFound,valueIsDefinite:!1}}static evaluateBinaryExpression(e,t,i,s,u){const g=e.sliceDoc(t?.from,t?.to);let I=t.firstChild,B=!0;for(;I&&B;)"BinaryExpression"!==I?.type?.name?"ArithOp"!==I?.type?.name?(B=Ho.isNumeric(e,I,i,s,u),I=I.nextSibling):I=I.nextSibling:(B="number"===Ho.evaluateBinaryExpression(e,I,i,s,u).type,I=I.nextSibling);return{status:En.ReturnValueFound,valueIsDefinite:!1,unaryExpression:g,type:B?"number":"string"}}static getMainMethod(e,t,i){const s=Array.isArray(i)?i.join("\n"):i;if(!t){if(!i)throw"no state and no text passed";t=Sr.create({doc:s,extensions:[Sh()]})}e||(e=ni(t));const g=[...e.resolveInner(0).getChildren("ExpressionStatement")];return{node:g.length>0?g[g.length-1]:null,tree:e}}static getMemberExpressionContainingCandidates(e){const t=e?[...e.getChildren("ExpressionStatement"),...e.getChildren("VariableDeclaration"),...e.getChildren("ObjectExpression")]:[];return e?.getChildren("ReturnStatement").forEach(i=>{t.push(...i.getChildren("MemberExpression"),...i.getChildren("ObjectExpression"),...i.getChildren("ArrayExpression"),...i.getChildren("BinaryExpression"),...i.getChildren("ParenthesizedExpression"),...i.getChildren("TemplateString"))}),t}static extractMemberExpressionVariableNameNode(e){if("MemberExpression"!==e?.type.name)return null;let t=e;for(;t&&"MemberExpression"===t.type.name;)t=t.firstChild;return t&&"VariableName"===t.type.name?t:null}static iterateToMemberStatementNode(e){if(null==e)return[];switch(e.type.name){case"{":case"[":case"LineComment":case"var":case"VariableDefinition":case"Equals":case"return":case"PropertyDefinition":case"String":case":":return e.nextSibling?[e.nextSibling]:[];case"ExpressionStatement":case"CallExpression":case"VariableDeclaration":case"ReturnStatement":case"Property":return e.firstChild?[e.firstChild]:[];case"ObjectExpression":return e.getChildren("Property");case"ArrayExpression":case"ArgList":case"BinaryExpression":case"ParenthesizedExpression":case"Interpolation":return[...e.getChildren("MemberExpression"),...e.getChildren("BinaryExpression"),...e.getChildren("ParenthesizedExpression")];case"TemplateString":return e.getChildren("Interpolation")}return[]}static resolveVariableValue(e,t,i){const s=t.getChildren("VariableDeclaration");if(0===s.length)return;return s.find(g=>{const I=g.getChild("VariableDefinition");return e.sliceDoc(I?.from,I?.to)===i})||void 0}}const Rf=["/**"," * write your custom code in the method"," * use javascript notation"," */","","async () => {","  // your code","}"];let Nc=(()=>{class r{constructor(t){this._store=t}getFunctionFormGroupValue(t,i){var s=this;return(0,ce.Z)(function*(){const u={};if(null==t)return u;const g="number"==typeof t?yield(0,x.g)(s._store.select((0,T.ob)(t))):t;if(!g)return u;const I=g.requireCustomImplementation?Ho.stringToTextLeaf(g._isImplementation?g.customImplementation:g.implementation??Rf):null;if(u.functionIdentifier=g.identifier,u.functionCanFail=g.canFail,u.functionName=g.name,u.functionNormalizedName=g.normalizedName,u.functionImplementation=I,u.outputParamInterface=g.outputTemplate&&"dynamic"!==g.outputTemplate?g.outputTemplate:null,!g._isImplementation&&g.outputTemplate&&i){const B=yield(0,x.g)(s._store.select((0,T.Dp)(g.outputTemplate)));u.outputParamName=B?.name??"",u.outputParamNormalizedName=B?.normalizedName??""}else if(g._isImplementation&&"number"==typeof g.output){const B=yield(0,x.g)(s._store.select((0,T.lR)(g.output)));u.outputParamName=B.name,u.outputParamNormalizedName=B.normalizedName}return u})()}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(ee.yh))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})();var Ib=xe(4716),_b=xe(8150),Sg=xe.n(_b),Tr=xe(1212),xa=xe(3997),cn=xe(6223),Pi=xe(2096),kh=xe(9315),Th=xe(2291),Eg=xe(8180),$f=xe(6721);let kg=(()=>{class r{constructor(t,i){this.data=t,this._store=i,this.paramObject$=(0,c.f3M)(ee.yh).select((0,Gt.lR)(()=>this.data.paramCode)),this.paramObjectPseudoObject$=this.paramObject$.pipe((r=>e=>e.pipe((0,pe.w)(t=>"array"===t?.type?(0,Pi.of)({...t}).pipe((0,Th.V)(i=>(0,kh.D)([(0,Pi.of)(i),(0,Pi.of)(i.typeDef).pipe((0,$f.n)(r))])),(0,Ut.b)(([i,s])=>i.typeDef=s),(0,U.U)(([i,s])=>i)):"string"==typeof t?.interface?(0,be.a)([(0,Pi.of)(t),r.select((0,Wt.Dp)(t.interface))]).pipe((0,Eg.q)(1),(0,U.U)(([i,s])=>{const u={...i};return u.typeDef=s.typeDef,u}),(0,Th.V)(i=>(0,kh.D)([(0,Pi.of)(i),(0,Pi.of)(i.typeDef).pipe((0,$f.n)(r))])),(0,Ut.b)(([i,s])=>i.typeDef=s),(0,U.U)(([i,s])=>i)):(0,Pi.of)(t))))(this._store),(0,pe.w)(s=>(0,Pi.of)(s?Tr.D.createPseudoObjectFromIParam(s):{}))),this.formGroup$=this.paramObject$.pipe((0,Ge.R)((s,u)=>(u&&s.patchValue(u,{emitEvent:!1}),s),(0,c.f3M)(cn.qu).group({name:"",identifier:0,defaultValue:null,normalizedName:"",_isIParam:!0,type:"object",typeDef:[],interface:null,constant:null,isProcessOutput:void 0,nullable:null,optional:null})),(0,xa.x)(),(0,Re.d)()),this.formGroupIsPristine$=this.formGroup$.pipe((0,U.U)(s=>s.pristine)),this.currentParamIsConstant$=this.paramObject$.pipe((0,U.U)(s=>!!s?.constant)),this.computable$=this.currentParamIsConstant$.pipe((0,U.U)(s=>!s)),this.paramIsProducedByFunctions$=this.paramObject$.pipe((0,pe.w)(s=>s?(0,c.f3M)(ee.yh).select((0,wt.EN)(s)):(0,Pi.of)([]))),this.availableInputParams$=(0,c.f3M)(ee.yh).select((0,Gt.xE)(()=>v.getAvailableInputParams(this.data.element))),this.defaultValueControl$=this.formGroup$.pipe((0,U.U)(s=>s.controls.defaultValue)),this.nameControl$=this.formGroup$.pipe((0,U.U)(s=>s.controls.name)),this.normalizedNameControl$=this.formGroup$.pipe((0,U.U)(s=>s.controls.normalizedName))}updateInjector(t){for(let i of t){const s=Tr.D.createPseudoObjectFromIParamDefinition(i.defaultValue),u=Tr.D.createPseudoObjectFromIParamDefinition(i.defaultValue);this._store.dispatch((0,Vt.w)(i.normalizedName,s,u))}}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(ct.WI),c.LFG(ee.yh))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var $1=xe(4088),Ol=xe(8582),Il=xe(4104);function M1(r,e){if(1&r&&(c.ynx(0),c.TgZ(1,"div",11),c._uU(2),c.qZA(),c.BQk()),2&r){const t=c.oxw();c.xp6(2),c.hij(" ",t.customImplementationRequiredText," ")}}function _l(r,e){1&r&&(c.ynx(0),c._uU(1," requires no inputs "),c.BQk())}function Mf(r,e){if(1&r&&(c.TgZ(0,"div",14),c._uU(1),c.qZA()),2&r){const t=e.$implicit;c.xp6(1),c.hij(" ",t," ")}}function Ph(r,e){if(1&r&&(c.TgZ(0,"div",12),c.YNc(1,Mf,2,1,"div",13),c.ALo(2,"async"),c.qZA()),2&r){const t=c.oxw();c.xp6(1),c.Q6J("ngForOf",c.lcZ(2,1,t.inputs$))}}function Tg(r,e){1&r&&(c.TgZ(0,"div",16),c._uU(1,"May fail"),c.qZA())}function N1(r,e){if(1&r&&c.YNc(0,Tg,2,0,"div",15),2&r){const t=c.oxw();c.Q6J("ngIf",null==t.func?null:t.func.canFail)}}let us=(()=>{class r{constructor(t){this._store=t,this._currentFunc$$=new vt.t(1),this.inputs$=this._currentFunc$$.pipe((0,pe.w)(i=>{let s=i?.inputTemplates??[];return Array.isArray(s)||(s=[s]),(0,kh.D)(s.map(u=>"dynamic"===u?(0,Pi.of)(u):this._store.select((0,T.Dp)(u.interface))))}),(0,U.U)(i=>i.map(s=>"string"==typeof s?s:s?.name))),this.output$=this._currentFunc$$.pipe((0,pe.w)(i=>"string"==typeof i?.outputTemplate?"dynamic"===i.outputTemplate?(0,Pi.of)("dynamic"):this._store.select((0,T.Dp)(i.outputTemplate)):this._store.select((0,T.lR)(i?.output))),(0,U.U)(i=>"string"==typeof i?i:i?.name)),this.customImplementationRequiredText="JS code required"}ngOnDestroy(){this._currentFunc$$.complete()}ngOnChanges(t){t.func&&this._currentFunc$$.next(t.func.currentValue)}}return r.\u0275fac=function(t){return new(t||r)(c.Y36(ee.yh))},r.\u0275cmp=c.Xpm({type:r,selectors:[["app-function-preview"]],inputs:{func:"func"},features:[c.TTD],decls:25,vars:19,consts:[[1,"body"],[1,"preview"],[1,"headline"],[1,"description"],[1,"tag-wrapper"],[4,"ngIf","ngIfElse"],[1,"io-wrapper"],["matTooltip","function inputs","matTooltipPosition","before",1,"input"],["matTooltip","function output","matTooltipPosition","before",1,"output"],["inputParamPreview",""],["canFailHint",""],[1,"tag","custom-implementation-hint"],[1,"input-param-list"],["class","input-param",4,"ngFor","ngForOf"],[1,"input-param"],["class","tag can-fail-hint",4,"ngIf"],[1,"tag","can-fail-hint"]],template:function(t,i){if(1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2),c._uU(3),c.qZA(),c.TgZ(4,"div",3),c._uU(5),c.qZA(),c.TgZ(6,"div",4),c.YNc(7,M1,3,1,"ng-container",5),c.qZA(),c.TgZ(8,"div",6)(9,"div",7),c.ALo(10,"async"),c.TgZ(11,"mat-icon"),c._uU(12,"login"),c.qZA(),c.YNc(13,_l,2,0,"ng-container",5),c.ALo(14,"async"),c.qZA(),c.TgZ(15,"div",8),c.ALo(16,"async"),c.TgZ(17,"mat-icon"),c._uU(18,"logout"),c.qZA(),c._uU(19),c.ALo(20,"async"),c.qZA()()()(),c.YNc(21,Ph,3,3,"ng-template",null,9,c.W1O),c.YNc(23,N1,1,1,"ng-template",null,10,c.W1O)),2&t){const s=c.MAs(22),u=c.MAs(24);let g,I,B;c.xp6(3),c.Oqu(null==i.func?null:i.func.name),c.xp6(2),c.Oqu(null==i.func?null:i.func.description),c.xp6(2),c.Q6J("ngIf",null==i.func?null:i.func.requireCustomImplementation)("ngIfElse",u),c.xp6(2),c.ekj("no-value",!(null!=(g=c.lcZ(10,11,i.inputs$))&&g.length)),c.xp6(4),c.Q6J("ngIf",!(null!=(I=c.lcZ(14,13,i.inputs$))&&I.length))("ngIfElse",s),c.xp6(2),c.ekj("no-value",!c.lcZ(16,15,i.output$)),c.xp6(4),c.hij(" ",null!==(B=c.lcZ(20,17,i.output$))&&void 0!==B?B:"no output"," ")}},dependencies:[P.sg,P.O5,St.Hw,hn.gM,P.Ov],styles:[".body[_ngcontent-%COMP%]{height:100%;cursor:pointer}.body[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.body[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .headline[_ngcontent-%COMP%]{font-size:1.2rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-transform:uppercase;font-weight:500;color:#6c6c6c}.body[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-weight:100;margin:.35rem 0px;font-size:.9rem}.body[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .io-wrapper[_ngcontent-%COMP%]{flex:1;display:flex}.body[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .io-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:.5rem;display:flex;font-size:.8rem;align-items:center;color:#494949}.body[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .io-wrapper[_ngcontent-%COMP%] > *.no-value[_ngcontent-%COMP%]{opacity:.1}.body[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .io-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(1){margin-right:5px}.body[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .io-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(2){flex:1}.body[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .io-wrapper[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{flex:2}.body[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .io-wrapper[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:green}.body[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .io-wrapper[_ngcontent-%COMP%]   .output[_ngcontent-%COMP%]{flex:1}.body[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   .io-wrapper[_ngcontent-%COMP%]   .output[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f04}.tag[_ngcontent-%COMP%]{margin:0 .2rem .5rem 0;font-size:.7rem;border:1px solid;padding:3px 4px 2px;display:inline-block;border-radius:3px;line-height:.7rem}.tag.custom-implementation-hint[_ngcontent-%COMP%]{color:#9635a1}.tag.can-fail-hint[_ngcontent-%COMP%]{color:#c85959}.input-param-list[_ngcontent-%COMP%]   .input-param[_ngcontent-%COMP%]{background:linear-gradient(135deg,#88c057,rgba(136,192,87,.7725490196),#88c057);padding:2px 4px;color:#fff;margin:2px;display:inline-block;border-radius:3px}"],changeDetection:0}),r})();const Sb=["parameterBody"];function Aa(r,e){if(1&r){const t=c.EpF();c.TgZ(0,"div",17),c._UZ(1,"app-function-preview",18),c.TgZ(2,"div",19),c.NdJ("click",function(){const u=c.CHM(t).$implicit,g=c.oxw(2);return c.KtG(g.calculateFunctionOutput(u))}),c._uU(3," calculate "),c.qZA()()}if(2&r){const t=e.$implicit;c.xp6(1),c.Q6J("func",t)}}function Nf(r,e){if(1&r&&(c.TgZ(0,"mat-tab",14)(1,"div",15),c._uU(2," Dynamically calculate the parameter's data structure as a result of your modeled flow. The parameter "),c.TgZ(3,"b"),c._uU(4),c.ALo(5,"async"),c.qZA(),c._uU(6," is produced by "),c.TgZ(7,"b"),c._uU(8),c.ALo(9,"async"),c.qZA(),c._uU(10," function(s). "),c.qZA(),c.YNc(11,Aa,4,1,"div",16),c.ALo(12,"async"),c.qZA()),2&r){const t=c.oxw();let i,s;c.xp6(4),c.Oqu(null!==(i=null==(i=c.lcZ(5,3,t.paramEditorComponentService.paramObject$))?null:i.name)&&void 0!==i?i:"unknown"),c.xp6(4),c.Oqu(null!==(s=null==(s=c.lcZ(9,5,t.paramEditorComponentService.paramIsProducedByFunctions$))?null:s.length)&&void 0!==s?s:0),c.xp6(3),c.Q6J("ngForOf",c.lcZ(12,7,t.paramEditorComponentService.paramIsProducedByFunctions$))}}let Ao=(()=>{class r{set parameterBody(t){this._paramBody$$.next(t),this._editor$$.next(new(Sg())(t.nativeElement,{onChangeJSON:i=>this._jsonChanged$$.next(i)}))}constructor(t,i,s,u,g){this.config=t,this._ref=i,this._store=s,this.paramEditorComponentService=u,this._snackBar=g,this._paramBody$$=new vt.t(1),this._editor$$=new vt.t(1),this._jsonChanged$$=new D.x,this.jsonChanged$=this._jsonChanged$$.pipe((0,Ae.b)(500)),this.selectedIndex=0,this._subscriptions=new It.w0}calculateFunctionOutput(t){var i=this;return(0,ce.Z)(function*(){const s=yield(0,x.g)(i.paramEditorComponentService.formGroup$);if(t.customImplementation){const u=i._store.select($1.L9),g=yield Tr.D.calculateCustomImplementationOutput(t.customImplementation,u),I=Tr.D.extractObjectTypeDefinition(g);s.controls.typeDef?.setValue(I),s.controls.typeDef?.markAsDirty(),i._store.dispatch((0,Mn.qt)(s.value)),i._snackBar.open("param recalculated successfully","Ok",{duration:2e3}),i.selectedIndex=0}else if("function"==typeof t.implementation){let u=t.implementation();console.log(u)}})()}close(){var t=this;return(0,ce.Z)(function*(){const i=yield(0,x.g)(t.paramEditorComponentService.formGroup$);if(i.dirty){const s=yield(0,x.g)(t._editor$$),u=Tr.D.extractObjectTypeDefinition(s.get());i.controls.defaultValue.setValue(u),i.controls.normalizedName.setValue(Tr.D.normalizeName(i.controls.name?.value)),t._store.dispatch((0,Mn.qt)(i.value)),t._snackBar.open("param saved","Ok",{duration:2e3})}t._ref.close()})()}ngOnDestroy(){this._subscriptions.unsubscribe()}ngOnInit(){this._subscriptions.add(this.paramEditorComponentService.availableInputParams$.subscribe(t=>this.paramEditorComponentService.updateInjector(t))),this._subscriptions.add((0,be.a)([this._editor$$,this.paramEditorComponentService.paramObjectPseudoObject$]).subscribe(([t,i])=>{t.set(i),t.expandAll()})),this._subscriptions.add((0,be.a)([this.paramEditorComponentService.formGroup$,this.jsonChanged$]).subscribe(([t,i])=>{const s=Tr.D.extractObjectTypeDefinition(i);t.controls.typeDef?.setValue(s.typeDef),t.controls.interface.setValue(null),t.controls.typeDef?.markAsDirty(),t.controls.interface.markAsDirty()}))}}return r.\u0275fac=function(t){return new(t||r)(c.Y36(w.a),c.Y36(ct.so),c.Y36(ee.yh),c.Y36(kg),c.Y36(ut.ux))},r.\u0275cmp=c.Xpm({type:r,selectors:[["app-param-editor"]],viewQuery:function(t,i){if(1&t&&c.Gf(Sb,7,c.SBq),2&t){let s;c.iGM(s=c.CRH())&&(i.parameterBody=s.first)}},features:[c._Bn([kg])],decls:22,vars:7,consts:[[1,"body"],[1,"dialog-navbar"],[1,"icon"],[1,"text"],["mat-icon-button","","color","warn",3,"click"],[1,"dialog-body","form-body",3,"formGroup"],[1,"param-naming-wrapper"],[1,"width"],["type","text","matInput","","formControlName","name"],["mat-align-tabs","start",3,"selectedIndex","selectedIndexChange"],["label","design"],[1,"structure-editor-wrapper"],["parameterBody",""],["label","import from flow",4,"ngIf"],["label","import from flow"],[1,"hint"],["class","function-wrapper",4,"ngFor","ngForOf"],[1,"function-wrapper"],[3,"func"],[1,"calculate-control",3,"click"]],template:function(t,i){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"mat-icon",2),c._uU(3,"edit"),c.qZA(),c.TgZ(4,"div",3),c._uU(5," Edit parameter "),c.qZA(),c.TgZ(6,"button",4),c.NdJ("click",function(){return i.close()}),c.TgZ(7,"mat-icon"),c._uU(8,"clear"),c.qZA()()(),c.TgZ(9,"div",5),c.ALo(10,"async"),c.TgZ(11,"div",6)(12,"mat-form-field",7),c._UZ(13,"input",8),c.TgZ(14,"mat-label"),c._uU(15,"param name"),c.qZA()()(),c.TgZ(16,"mat-tab-group",9),c.NdJ("selectedIndexChange",function(u){return i.selectedIndex=u}),c.TgZ(17,"mat-tab",10),c._UZ(18,"div",11,12),c.qZA(),c.YNc(20,Nf,13,9,"mat-tab",13),c.ALo(21,"async"),c.qZA()()()),2&t&&(c.xp6(9),c.Q6J("formGroup",c.lcZ(10,3,i.paramEditorComponentService.formGroup$)),c.xp6(7),c.Q6J("selectedIndex",i.selectedIndex),c.xp6(4),c.Q6J("ngIf",c.lcZ(21,5,i.paramEditorComponentService.computable$)))},dependencies:[P.sg,P.O5,cn.Fj,cn.JJ,cn.JL,Tt.RK,St.Hw,Ol.Nt,Ze.KE,Ze.hX,Il.uX,Il.SP,cn.sg,cn.u,us,P.Ov],styles:[".body[_ngcontent-%COMP%]{width:80vw;max-width:1000px;overflow:hidden;box-sizing:border-box;display:flex;flex-direction:column}.dialog-body[_ngcontent-%COMP%]{overflow:hidden;max-height:80vh}.param-naming-wrapper[_ngcontent-%COMP%]{padding:.5rem 1.5rem}.hint[_ngcontent-%COMP%]{padding:1rem;background-color:#fadfff;color:#484848}.structure-editor-wrapper[_ngcontent-%COMP%]{height:800px;max-height:calc(100vh - 220px)}.function-wrapper[_ngcontent-%COMP%]{padding:1rem}.calculate-control[_ngcontent-%COMP%]{text-align:center;background-color:#ededed;cursor:pointer;padding:.5rem;margin-top:.5rem}"]}),r})();var Lf=xe(1993),Pg=xe(34),Sl=xe(4366),Bf=xe(3020);const Df=function(r,e){return{active:r,disabled:e}};let Rg=(()=>{class r{set gateway(t){const i=t.outgoing.map(s=>v.getSLPBExtension(s.businessObject,"SequenceFlowExtension",u=>u.sequenceFlowType));this.successActionDefined=i.indexOf("success")>-1,this.errorActionDefined=i.indexOf("error")>-1}get formGroup(){return this._controlContainer.control}constructor(t,i){this.config=t,this._controlContainer=i,this.successActionDefined=!1,this.errorActionDefined=!1}setValue(t){this.formGroup.controls.entranceGatewayType.setValue(t)}}return r.\u0275fac=function(t){return new(t||r)(c.Y36(w.a),c.Y36(cn.gN))},r.\u0275cmp=c.Xpm({type:r,selectors:[["app-embedded-configure-error-gateway-entrance-connection"]],decls:14,vars:10,consts:[[1,"body"],[1,"hint"],[1,"option-wrapper"],[1,"option","on-success",3,"ngClass","click"],[1,"header"],[1,"value"],[1,"option","on-error",3,"ngClass","click"]],template:function(t,i){1&t&&(c.TgZ(0,"div",0)(1,"div",1),c._uU(2," That function is connected to an error gateway. Decide, whether the function should be activated on success or error. "),c.qZA(),c.TgZ(3,"div",2)(4,"div",3),c.NdJ("click",function(){return i.setValue("Success")}),c.TgZ(5,"div",4),c._uU(6," that method should be activated "),c.qZA(),c.TgZ(7,"div",5),c._uU(8),c.qZA()(),c.TgZ(9,"div",6),c.NdJ("click",function(){return i.setValue("Error")}),c.TgZ(10,"div",4),c._uU(11," that method should be activated "),c.qZA(),c.TgZ(12,"div",5),c._uU(13),c.qZA()()()()),2&t&&(c.xp6(4),c.Q6J("ngClass",c.WLB(4,Df,"Success"===i.formGroup.controls.entranceGatewayType.value,i.successActionDefined)),c.xp6(4),c.Oqu(i.config.errorGatewayConfig.successConnectionName),c.xp6(1),c.Q6J("ngClass",c.WLB(7,Df,"Error"===i.formGroup.controls.entranceGatewayType.value,i.errorActionDefined)),c.xp6(4),c.Oqu(i.config.errorGatewayConfig.errorConnectionName))},dependencies:[P.mk],styles:[".body[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.hint[_ngcontent-%COMP%]{padding:1rem;background-color:#fadfff;color:#484848}.option-wrapper[_ngcontent-%COMP%]{display:flex;flex:1}.option[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;flex-direction:column;cursor:pointer;border:2px solid transparent;-webkit-user-select:none;user-select:none}.option.active[_ngcontent-%COMP%]{background-color:#fdffc4;border:2px solid gold}.option.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.option[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:.5rem}.option[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.5rem}.option.on-success[_ngcontent-%COMP%]:hover{background-color:#ebffe5}.option.on-error[_ngcontent-%COMP%]:hover{background-color:#ffefe5}"]}),r})();var Rh=xe(4911);let El=(()=>{class r{constructor(t){this._store=t}parameterToInjector(t=[]){var i=this;return(0,ce.Z)(function*(){const s=yield Promise.all(t.map(function(){var I=(0,ce.Z)(function*(B){return"number"==typeof B?yield(0,x.g)(i._store.select((0,T.lR)(B))):B});return function(B){return I.apply(this,arguments)}}()));let u=yield(0,x.g)((0,Pi.of)(s.filter(I=>null!=I)).pipe((0,$f.n)(i._store)));return Array.isArray(u)||(u=[]),{injector:u.reduce((I,B)=>{if(B.defaultValue)I[B.normalizedName]=B.defaultValue;else{const ne=r.createPseudoObjectFromIParam(B);I[B.normalizedName]=ne}return I},{}),mappedParameters:u}})()}static createPseudoObjectFromIParam(t,i=null,s={string:()=>{},boolean:()=>{},number:()=>{},object:()=>({}),array:()=>[],function:()=>{},symbol:()=>{},bigint:()=>{},undefined:()=>{}}){if(!t)return{};try{let u="array"===t.type?[]:"object"===t.type?{}:t.defaultValue;if(u||(u=s[t.type]()),u||(u=this._randomValueGenerator[t.type]()),Array.isArray(i)?i.push(u):i&&"object"==typeof i&&(i[t.name]=u),t.typeDef){const g=Array.isArray(t.typeDef)?t.typeDef:[t.typeDef];for(const I of g)this.createPseudoObjectFromIParamDefinition(I,u)}return u}catch(u){return console.error(u),{}}}static createPseudoObjectFromIParamDefinition(t,i=null,s={string:()=>{},boolean:()=>{},number:()=>{},object:()=>({}),array:()=>[],function:()=>{},symbol:()=>{},bigint:()=>{},undefined:()=>{}}){if(!t)return{};let u="array"===t.type?[]:"object"===t.type?{}:t.defaultValue;try{if(u||(u=s[t.type]()),u||(u=this._randomValueGenerator[t.type]()),Array.isArray(i)?i.push(u):i&&"object"==typeof i&&(i[t.name]=u),t.typeDef){const g=Array.isArray(t.typeDef)?t.typeDef:[t.typeDef];for(const I of g)this.createPseudoObjectFromIParamDefinition(I,u)}return i??u}catch(g){return console.error(g),u}}}return r._randomValueGenerator={array:()=>[],object:()=>({}),string:()=>btoa(Math.random().toString()).slice(0,5),number:()=>Math.floor(11*Math.random()),boolean:()=>Math.floor(11*Math.random())%2==1,bigint:()=>BigInt(Math.floor(11*Math.random())),symbol:()=>Symbol("foo"),undefined:()=>{},function:()=>()=>{}},r.\u0275fac=function(t){return new(t||r)(c.LFG(ee.yh))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})(),Lc=(()=>{class r{constructor(t){this._store=t}detectFunctionOutput(t,i){var s=this;return(0,ce.Z)(function*(){let u=!1,g=!1,I=!1,B=null,ne=null,fe=null,ye=null;if(t._isImplementation)t.requireCustomImplementation?(i||(i=Ho.evaluateCustomMethod(void 0,t.implementation,void 0,void 0)),u=i.status===En.ReturnValueFound,g="number"==typeof t.output&&!u,I="number"!=typeof t.output&&u,B=u?I?yield(0,x.g)(s._store.select((0,T.Xn)())):t.output:null,fe=u?i.interface??null:null,ye=i.type??null):(u="number"==typeof t.output,u&&(ne=yield(0,x.g)(s._store.select((0,T.lR)(B))),B=t.output,fe=t.outputTemplate,ye=ne?.type));else if("dynamic"===t.outputTemplate){if(!i)throw"method evaluation is required for dynamic output!";u=i.status===En.ReturnValueFound,g=!1,I=!0,B=yield(0,x.g)(s._store.select((0,T.Xn)())),fe=i.interface??null,ye=i.type??null}else u=!!t.outputTemplate,u&&(I=!0,B=yield(0,x.g)(s._store.select((0,T.Xn)())),fe=t.outputTemplate,ye="object");return I||(ne=yield(0,x.g)(s._store.select((0,T.lR)(B))),ye=ne?.type),{hasOutput:u,outputParamIsNew:I,outputParamIsRemoved:g,outputParamIdentifier:B,outputParamObject:ne,outputParamInterface:fe,outputParamType:ye}})()}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(ee.yh))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})();var $g=xe(5940),Ff=xe(4300),Mg=xe(2495);const fi=["switch"],L1=["*"],B1=new c.OlP("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})}),Ng={provide:cn.JU,useExisting:(0,c.Gpc)(()=>Gf),multi:!0};class Wf{constructor(e,t){this.source=e,this.checked=t}}let Pr=0;const D1=(0,yt.sb)((0,yt.pj)((0,yt.Kr)((0,yt.Id)(class{constructor(r){this._elementRef=r}}))));let Oa=(()=>{class r extends D1{get required(){return this._required}set required(t){this._required=(0,Mg.Ig)(t)}get checked(){return this._checked}set checked(t){this._checked=(0,Mg.Ig)(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(t,i,s,u,g,I,B){super(t),this._focusMonitor=i,this._changeDetectorRef=s,this.defaults=g,this._onChange=ne=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new c.vpe,this.toggleChange=new c.vpe,this.tabIndex=parseInt(u)||0,this.color=this.defaultColor=g.color||"accent",this._noopAnimations="NoopAnimations"===I,this.id=this._uniqueId=`${B}${++Pr}`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?(this._focused=!0,this._changeDetectorRef.markForCheck()):t||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return r.\u0275fac=function(t){c.$Z()},r.\u0275dir=c.lG2({type:r,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[c.qOj]}),r})(),Gf=(()=>{class r extends Oa{get buttonId(){return`${this.id||this._uniqueId}-button`}constructor(t,i,s,u,g,I){super(t,i,s,u,g,I,"mat-mdc-slide-toggle-"),this._labelId=this._uniqueId+"-label"}_handleClick(){this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new Wf(this,this.checked)))}focus(){this._switchElement.nativeElement.focus()}_createChangeEvent(t){return new Wf(this,t)}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}}return r.\u0275fac=function(t){return new(t||r)(c.Y36(c.SBq),c.Y36(Ff.tE),c.Y36(c.sBO),c.$8M("tabindex"),c.Y36(B1),c.Y36(c.QbO,8))},r.\u0275cmp=c.Xpm({type:r,selectors:[["mat-slide-toggle"]],viewQuery:function(t,i){if(1&t&&c.Gf(fi,5),2&t){let s;c.iGM(s=c.CRH())&&(i._switchElement=s.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:11,hostBindings:function(t,i){2&t&&(c.Ikx("id",i.id),c.uIk("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),c.ekj("mat-mdc-slide-toggle-focused",i._focused)("mat-mdc-slide-toggle-checked",i.checked)("_mat-animation-noopable",i._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[c._Bn([Ng]),c.qOj],ngContentSelectors:L1,decls:17,vars:24,consts:[[1,"mdc-form-field"],["role","switch","type","button",1,"mdc-switch",3,"tabIndex","disabled","click"],["switch",""],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],["viewBox","0 0 24 24",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"],[1,"mdc-label",3,"for","click"]],template:function(t,i){if(1&t&&(c.F$t(),c.TgZ(0,"div",0)(1,"button",1,2),c.NdJ("click",function(){return i._handleClick()}),c._UZ(3,"div",3),c.TgZ(4,"div",4)(5,"div",5)(6,"div",6),c._UZ(7,"div",7),c.qZA(),c.TgZ(8,"div",8),c._UZ(9,"div",9),c.qZA(),c.TgZ(10,"div",10),c.O4$(),c.TgZ(11,"svg",11),c._UZ(12,"path",12),c.qZA(),c.TgZ(13,"svg",13),c._UZ(14,"path",14),c.qZA()()()()(),c.kcU(),c.TgZ(15,"label",15),c.NdJ("click",function(u){return u.stopPropagation()}),c.Hsn(16),c.qZA()()),2&t){const s=c.MAs(2);c.ekj("mdc-form-field--align-end","before"==i.labelPosition),c.xp6(1),c.ekj("mdc-switch--selected",i.checked)("mdc-switch--unselected",!i.checked)("mdc-switch--checked",i.checked)("mdc-switch--disabled",i.disabled),c.Q6J("tabIndex",i.tabIndex)("disabled",i.disabled),c.uIk("id",i.buttonId)("name",i.name)("aria-label",i.ariaLabel)("aria-labelledby",i._getAriaLabelledBy())("aria-describedby",i.ariaDescribedby)("aria-required",i.required||null)("aria-checked",i.checked),c.xp6(8),c.Q6J("matRippleTrigger",s)("matRippleDisabled",i.disableRipple||i.disabled)("matRippleCentered",!0),c.xp6(6),c.Q6J("for",i.buttonId),c.uIk("id",i._labelId)}},dependencies:[yt.wG],styles:['.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--mdc-elevation-overlay-color, #fff)}.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative}.mdc-switch[hidden]{display:none}.mdc-switch:disabled{cursor:default;pointer-events:none}.mdc-switch__track{overflow:hidden;position:relative;width:100%}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%}@media screen and (forced-colors: active){.mdc-switch__track::before,.mdc-switch__track::after{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(-100%)}[dir=rtl] .mdc-switch__track::after,.mdc-switch__track[dir=rtl]::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track[dir=rtl]::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0)}[dir=rtl] .mdc-switch__handle-track,.mdc-switch__handle-track[dir=rtl]{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track,.mdc-switch--selected .mdc-switch__handle-track[dir=rtl]{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto}[dir=rtl] .mdc-switch__handle,.mdc-switch__handle[dir=rtl]{left:auto;right:0}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media screen and (forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-elevation-overlay{bottom:0;left:0;right:0;top:0}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1}.mdc-switch:disabled .mdc-switch__ripple{display:none}.mdc-switch__icons{height:100%;position:relative;width:100%;z-index:1}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mdc-switch{width:var(--mdc-switch-track-width, 36px)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color, #310077)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color, #310077)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color, #310077)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color, #616161)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color, #212121)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color, #212121)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color, #212121)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color, #424242)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color, var(--mdc-theme-surface, #fff))}.mat-mdc-slide-toggle .mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation, 0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 1px 3px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__focus-ring-wrapper,.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle{height:var(--mdc-switch-handle-height, 20px)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__handle::after{opacity:var(--mdc-switch-disabled-handle-opacity, 0.38)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle{border-radius:var(--mdc-switch-handle-shape, 10px)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle{width:var(--mdc-switch-handle-width, 20px)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle-track{width:calc(100% - var(--mdc-switch-handle-width, 20px))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled .mdc-switch__icon{fill:var(--mdc-switch-selected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled .mdc-switch__icon{fill:var(--mdc-switch-unselected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity, 0.38)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size, 18px);height:var(--mdc-switch-selected-icon-size, 18px)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size, 18px);height:var(--mdc-switch-unselected-icon-size, 18px)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-hover-state-layer-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-focus-state-layer-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-pressed-state-layer-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-hover-state-layer-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-focus-state-layer-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-pressed-state-layer-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-selected-hover-state-layer-opacity, 0.04)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-selected-focus-state-layer-opacity, 0.12)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-unselected-hover-state-layer-opacity, 0.04)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-unselected-focus-state-layer-opacity, 0.12)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__ripple{height:var(--mdc-switch-state-layer-size, 48px);width:var(--mdc-switch-state-layer-size, 48px)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__track{height:var(--mdc-switch-track-height, 14px)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity, 0.12)}.mat-mdc-slide-toggle .mdc-switch:enabled .mdc-switch__track::after{background:var(--mdc-switch-selected-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color, #424242)}.mat-mdc-slide-toggle .mdc-switch:enabled .mdc-switch__track::before{background:var(--mdc-switch-unselected-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color, #424242)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__track{border-radius:var(--mdc-switch-track-shape, 7px)}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle .mdc-switch__ripple::after{content:"";opacity:0}.mat-mdc-slide-toggle .mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:opacity 75ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-elevation-overlay,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}'],encapsulation:2,changeDetection:0}),r})(),Lg=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({}),r})(),$h=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({imports:[Lg,yt.BQ,yt.si,P.ez,Lg,yt.BQ]}),r})();function Dg(r,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let s=r(e,t);return!!s&&(i(t.update(s)),!0)}}const Oo=Dg(Sa,0),Ia=Dg(Gg,0),jf=Dg((r,e)=>Gg(r,e,function kb(r){let e=[];for(let t of r.selection.ranges){let i=r.doc.lineAt(t.from),s=t.to<=i.to?i:r.doc.lineAt(t.to),u=e.length-1;u>=0&&e[u].to>i.from?e[u].to=s.to:e.push({from:i.from,to:s.to})}return e}(e)),0);function Bc(r,e=r.selection.main.head){let t=r.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const _a=50;function Gg(r,e,t=e.selection.ranges){let i=t.map(u=>Bc(e,u.from).block);if(!i.every(u=>u))return null;let s=t.map((u,g)=>function Wg(r,{open:e,close:t},i,s){let fe,ye,u=r.sliceDoc(i-_a,i),g=r.sliceDoc(s,s+_a),I=/\s*$/.exec(u)[0].length,B=/^\s*/.exec(g)[0].length,ne=u.length-I;if(u.slice(ne-e.length,ne)==e&&g.slice(B,B+t.length)==t)return{open:{pos:i-I,margin:I&&1},close:{pos:s+B,margin:B&&1}};s-i<=2*_a?fe=ye=r.sliceDoc(i,s):(fe=r.sliceDoc(i,i+_a),ye=r.sliceDoc(s-_a,s));let Ne=/^\s*/.exec(fe)[0].length,je=/\s*$/.exec(ye)[0].length,ze=ye.length-je-t.length;return fe.slice(Ne,Ne+e.length)==e&&ye.slice(ze,ze+t.length)==t?{open:{pos:i+Ne+e.length,margin:/\s/.test(fe.charAt(Ne+e.length))?1:0},close:{pos:s-je-t.length,margin:/\s/.test(ye.charAt(ze-1))?1:0}}:null}(e,i[g],u.from,u.to));if(2!=r&&!s.every(u=>u))return{changes:e.changes(t.map((u,g)=>s[g]?[]:[{from:u.from,insert:i[g].open+" "},{from:u.to,insert:" "+i[g].close}]))};if(1!=r&&s.some(u=>u)){let u=[];for(let I,g=0;g<s.length;g++)if(I=s[g]){let B=i[g],{open:ne,close:fe}=I;u.push({from:ne.pos-B.open.length,to:ne.pos+ne.margin},{from:fe.pos-fe.margin,to:fe.pos+B.close.length})}return{changes:u}}return null}function Sa(r,e,t=e.selection.ranges){let i=[],s=-1;for(let{from:u,to:g}of t){let I=i.length,B=1e9;for(let ne=u;ne<=g;){let fe=e.doc.lineAt(ne);if(fe.from>s&&(u==g||g>fe.from)){s=fe.from;let ye=Bc(e,ne).line;if(!ye)continue;let Ne=/^\s*/.exec(fe.text)[0].length,je=Ne==fe.length,ze=fe.text.slice(Ne,Ne+ye.length)==ye?Ne:-1;Ne<fe.text.length&&Ne<B&&(B=Ne),i.push({line:fe,comment:ze,token:ye,indent:Ne,empty:je,single:!1})}ne=fe.to+1}if(B<1e9)for(let ne=I;ne<i.length;ne++)i[ne].indent<i[ne].line.text.length&&(i[ne].indent=B);i.length==I+1&&(i[I].single=!0)}if(2!=r&&i.some(u=>u.comment<0&&(!u.empty||u.single))){let u=[];for(let{line:I,token:B,indent:ne,empty:fe,single:ye}of i)(ye||!fe)&&u.push({from:I.from+ne,insert:B+" "});let g=e.changes(u);return{changes:g,selection:e.selection.map(g,1)}}if(1!=r&&i.some(u=>u.comment>=0)){let u=[];for(let{line:g,comment:I,token:B}of i)if(I>=0){let ne=g.from+I,fe=ne+B.length;" "==g.text[fe-g.from]&&fe++,u.push({from:ne,to:fe})}return{changes:u}}return null}const kl=Xa.define(),G1=Xa.define(),j1=sn.define(),Dc=sn.define({combine:r=>Mo(r,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}),Tl=Dn.define({create:()=>Kf.empty,update(r,e){let t=e.state.facet(Dc),i=e.annotation(kl);if(i){let B=e.docChanged?_t.single(function jg(r){let e=0;return r.iterChangedRanges((t,i)=>e=i),e}(e.changes)):void 0,ne=Si.fromTransaction(e,B),fe=i.side,ye=0==fe?r.undone:r.done;return ye=ne?Ea(ye,ye.length,t.minDepth,ne):Nh(ye,e.startState.selection),new Kf(0==fe?i.rest:ye,0==fe?ye:i.rest)}let s=e.annotation(G1);if(("full"==s||"before"==s)&&(r=r.isolate()),!1===e.annotation(ts.addToHistory))return e.changes.empty?r:r.addMapping(e.changes.desc);let u=Si.fromTransaction(e),g=e.annotation(ts.time),I=e.annotation(ts.userEvent);return u?r=r.addChanges(u,g,I,t.newGroupDelay,t.minDepth):e.selection&&(r=r.addSelection(e.startState.selection,g,I,t.newGroupDelay)),("full"==s||"after"==s)&&(r=r.isolate()),r},toJSON:r=>({done:r.done.map(e=>e.toJSON()),undone:r.undone.map(e=>e.toJSON())}),fromJSON:r=>new Kf(r.done.map(Si.fromJSON),r.undone.map(Si.fromJSON))});function Zf(r={}){return[Tl,Dc.of(r),$n.domEventHandlers({beforeinput(e,t){let i="historyUndo"==e.inputType?Vf:"historyRedo"==e.inputType?Qf:null;return!!i&&(e.preventDefault(),i(t))}})]}function Pl(r,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let s=t.field(Tl,!1);if(!s)return!1;let u=s.pop(r,t,e);return!!u&&(i(u),!0)}}const Vf=Pl(0,!1),Qf=Pl(1,!1),Mh=Pl(0,!0),Hf=Pl(1,!0);class Si{constructor(e,t,i,s,u){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=s,this.selectionsAfter=u}setSelAfter(e){return new Si(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(i=this.startSelection)||void 0===i?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new Si(e.changes&&Mi.fromJSON(e.changes),[],e.mapped&&go.fromJSON(e.mapped),e.startSelection&&_t.fromJSON(e.startSelection),e.selectionsAfter.map(_t.fromJSON))}static fromTransaction(e,t){let i=io;for(let s of e.startState.facet(j1)){let u=s(e);u.length&&(i=i.concat(u))}return!i.length&&e.changes.empty?null:new Si(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,io)}static selection(e){return new Si(void 0,io,void 0,void 0,e)}}function Ea(r,e,t,i){let u=r.slice(e+1>t+20?e-t-1:0,e);return u.push(i),u}function Zg(r,e){return r.length?e.length?r.concat(e):r:e}const io=[],Ta=200;function Nh(r,e){if(r.length){let t=r[r.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-Ta));return i.length&&i[i.length-1].eq(e)?r:(i.push(e),Ea(r,r.length-1,1e9,t.setSelAfter(i)))}return[Si.selection([e])]}function Pb(r){let e=r[r.length-1],t=r.slice();return t[r.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Uf(r,e){if(!r.length)return r;let t=r.length,i=io;for(;t;){let s=Rb(r[t-1],e,i);if(s.changes&&!s.changes.empty||s.effects.length){let u=r.slice(0,t);return u[t-1]=s,u}e=s.mapped,t--,i=s.selectionsAfter}return i.length?[Si.selection(i)]:io}function Rb(r,e,t){let i=Zg(r.selectionsAfter.length?r.selectionsAfter.map(I=>I.map(e)):io,t);if(!r.changes)return Si.selection(i);let s=r.changes.map(e),u=e.mapDesc(r.changes,!0),g=r.mapped?r.mapped.composeDesc(u):u;return new Si(s,_n.mapEffects(r.effects,e),g,r.startSelection.map(u),i)}const Xf=/^(input\.type|delete)($|\.)/;let Kf=(()=>{class r{constructor(t,i,s=0,u=void 0){this.done=t,this.undone=i,this.prevTime=s,this.prevUserEvent=u}isolate(){return this.prevTime?new r(this.done,this.undone):this}addChanges(t,i,s,u,g){let I=this.done,B=I[I.length-1];return I=B&&B.changes&&!B.changes.empty&&t.changes&&(!s||Xf.test(s))&&(!B.selectionsAfter.length&&i-this.prevTime<u&&function ka(r,e){let t=[],i=!1;return r.iterChangedRanges((s,u)=>t.push(s,u)),e.iterChangedRanges((s,u,g,I)=>{for(let B=0;B<t.length;){let ne=t[B++],fe=t[B++];I>=ne&&g<=fe&&(i=!0)}}),i}(B.changes,t.changes)||"input.type.compose"==s)?Ea(I,I.length-1,g,new Si(t.changes.compose(B.changes),Zg(t.effects,B.effects),B.mapped,B.startSelection,io)):Ea(I,I.length,g,t),new r(I,io,i,s)}addSelection(t,i,s,u){let g=this.done.length?this.done[this.done.length-1].selectionsAfter:io;return g.length>0&&i-this.prevTime<u&&s==this.prevUserEvent&&s&&/^select($|\.)/.test(s)&&function Tb(r,e){return r.ranges.length==e.ranges.length&&0===r.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length}(g[g.length-1],t)?this:new r(Nh(this.done,t),this.undone,i,s)}addMapping(t){return new r(Uf(this.done,t),Uf(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,i,s){let u=0==t?this.done:this.undone;if(0==u.length)return null;let g=u[u.length-1];if(s&&g.selectionsAfter.length)return i.update({selection:g.selectionsAfter[g.selectionsAfter.length-1],annotations:kl.of({side:t,rest:Pb(u)}),userEvent:0==t?"select.undo":"select.redo",scrollIntoView:!0});if(g.changes){let I=1==u.length?io:u.slice(0,u.length-1);return g.mapped&&(I=Uf(I,g.mapped)),i.update({changes:g.changes,selection:g.startSelection,effects:g.effects,annotations:kl.of({side:t,rest:I}),filter:!1,userEvent:0==t?"undo":"redo",scrollIntoView:!0})}return null}}return r.empty=new r(io,io),r})();const $b=[{key:"Mod-z",run:Vf,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Qf,preventDefault:!0},{key:"Mod-u",run:Mh,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Hf,preventDefault:!0}];function Pa(r,e){return _t.create(r.ranges.map(e),r.mainIndex)}function Tn(r,e){return r.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Wr({state:r,dispatch:e},t){let i=Pa(r.selection,t);return!i.eq(r.selection)&&(e(Tn(r,i)),!0)}function Wc(r,e){return _t.cursor(e?r.to:r.from)}function Yf(r,e){return Wr(r,t=>t.empty?r.moveByChar(t,e):Wc(t,e))}function Io(r){return r.textDirectionAt(r.state.selection.main.head)==yi.LTR}const Vg=r=>Yf(r,!Io(r)),Mb=r=>Yf(r,Io(r));function Lh(r,e){return Wr(r,t=>t.empty?r.moveByGroup(t,e):Wc(t,e))}function tp(r,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(r.sliceDoc(e.from,e.to)))||e.firstChild}function np(r,e,t){let g,I,i=ni(r).resolveInner(e.head),s=t?Qt.closedBy:Qt.openedBy;for(let B=e.head;;){let ne=t?i.childAfter(B):i.childBefore(B);if(!ne)break;tp(r,ne,s)?i=ne:B=t?ne.to:ne.from}return I=i.type.prop(s)&&(g=t?to(r,i.from,1):to(r,i.to,-1))&&g.matched?t?g.end.to:g.end.from:t?i.to:i.from,_t.cursor(I,t?-1:1)}function Hg(r,e){return Wr(r,t=>{if(!t.empty)return Wc(t,e);let i=r.moveVertically(t,e);return i.head!=t.head?i:r.moveToLineBoundary(t,e)})}const zg=r=>Hg(r,!1),tr=r=>Hg(r,!0);function Ug(r,e){let{state:t}=r,i=Pa(t.selection,I=>I.empty?r.moveVertically(I,e,Math.min(r.dom.clientHeight,innerHeight)):Wc(I,e));if(i.eq(t.selection))return!1;let g,s=r.coordsAtPos(t.selection.main.head),u=r.scrollDOM.getBoundingClientRect();return s&&s.top>u.top&&s.bottom<u.bottom&&s.top-u.top<=r.scrollDOM.scrollHeight-r.scrollDOM.scrollTop-r.scrollDOM.clientHeight&&(g=$n.scrollIntoView(i.main.head,{y:"start",yMargin:s.top-u.top})),r.dispatch(Tn(t,i),{effects:g}),!0}const Bh=r=>Ug(r,!1),Xg=r=>Ug(r,!0);function Dh(r,e,t){let i=r.lineBlockAt(e.head),s=r.moveToLineBoundary(e,t);if(s.head==e.head&&s.head!=(t?i.to:i.from)&&(s=r.moveToLineBoundary(e,t,!1)),!t&&s.head==i.from&&i.length){let u=/^\s*/.exec(r.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;u&&e.head!=i.from+u&&(s=_t.cursor(i.from+u))}return s}const Kg=r=>Wr(r,e=>Dh(r,e,!0)),ip=r=>Wr(r,e=>Dh(r,e,!1));function _o(r,e){let t=Pa(r.state.selection,i=>{let s=e(i);return _t.range(i.anchor,s.head,s.goalColumn)});return!t.eq(r.state.selection)&&(r.dispatch(Tn(r.state,t)),!0)}function Fh(r,e){return _o(r,t=>r.moveByChar(t,e))}const rp=r=>Fh(r,!Io(r)),Wh=r=>Fh(r,Io(r));function op(r,e){return _o(r,t=>r.moveByGroup(t,e))}function Jg(r,e){return _o(r,t=>r.moveVertically(t,e))}const lp=r=>Jg(r,!1),ev=r=>Jg(r,!0);function Vs(r,e){return _o(r,t=>r.moveVertically(t,e,Math.min(r.dom.clientHeight,innerHeight)))}const jb=r=>Vs(r,!1),Gh=r=>Vs(r,!0),tv=r=>_o(r,e=>Dh(r,e,!0)),cp=r=>_o(r,e=>Dh(r,e,!1)),nv=({state:r,dispatch:e})=>(e(Tn(r,{anchor:0})),!0),iv=({state:r,dispatch:e})=>(e(Tn(r,{anchor:r.doc.length})),!0),rv=({state:r,dispatch:e})=>(e(Tn(r,{anchor:r.selection.main.anchor,head:0})),!0),Qb=({state:r,dispatch:e})=>(e(Tn(r,{anchor:r.selection.main.anchor,head:r.doc.length})),!0);function Qc({state:r,dispatch:e},t){if(r.readOnly)return!1;let i="delete.selection",s=r.changeByRange(u=>{let{from:g,to:I}=u;if(g==I){let B=t(g);B<g?i="delete.backward":B>g&&(i="delete.forward"),g=Math.min(g,B),I=Math.max(I,B)}return g==I?{range:u}:{changes:{from:g,to:I},range:_t.cursor(g)}});return!s.changes.empty&&(e(r.update(s,{scrollIntoView:!0,userEvent:i})),!0)}function jh(r,e,t){if(r instanceof $n)for(let i of r.state.facet($n.atomicRanges).map(s=>s(r)))i.between(e,e,(s,u)=>{s<e&&u>e&&(e=t?u:s)});return e}const $l=(r,e)=>Qc(r,t=>{let u,g,{state:i}=r,s=i.doc.lineAt(t);if(!e&&t>s.from&&t<s.from+200&&!/[^ \t]/.test(u=s.text.slice(0,t-s.from))){if("\t"==u[u.length-1])return t-1;let B=Ni(u,i.tabSize)%ba(i)||ba(i);for(let ne=0;ne<B&&" "==u[u.length-1-ne];ne++)t--;g=t}else g=zr(s.text,t-s.from,e,e)+s.from,g==t&&s.number!=(e?i.doc.lines:1)&&(g+=e?1:-1);return jh(r,g,e)}),up=r=>$l(r,!1),zb=r=>$l(r,!0),sv=(r,e)=>Qc(r,t=>{let i=t,{state:s}=r,u=s.doc.lineAt(i),g=s.charCategorizer(i);for(let I=null;;){if(i==(e?u.to:u.from)){i==t&&u.number!=(e?s.doc.lines:1)&&(i+=e?1:-1);break}let B=zr(u.text,i-u.from,e)+u.from,ne=u.text.slice(Math.min(i,B)-u.from,Math.max(i,B)-u.from),fe=g(ne);if(null!=I&&fe!=I)break;(" "!=ne||i!=t)&&(I=fe),i=B}return jh(r,i,e)}),av=r=>sv(r,!1),Ub=r=>Qc(r,e=>{let t=r.lineBlockAt(e).to;return jh(r,e<t?t:Math.min(r.state.doc.length,e+1),!0)});function zc(r){let e=[],t=-1;for(let i of r.selection.ranges){let s=r.doc.lineAt(i.from),u=r.doc.lineAt(i.to);if(!i.empty&&i.to==u.from&&(u=r.doc.lineAt(i.to-1)),t>=s.number){let g=e[e.length-1];g.to=u.to,g.ranges.push(i)}else e.push({from:s.from,to:u.to,ranges:[i]});t=u.number+1}return e}function uv(r,e,t){if(r.readOnly)return!1;let i=[],s=[];for(let u of zc(r)){if(t?u.to==r.doc.length:0==u.from)continue;let g=r.doc.lineAt(t?u.to+1:u.from-1),I=g.length+1;if(t){i.push({from:u.to,to:g.to},{from:u.from,insert:g.text+r.lineBreak});for(let B of u.ranges)s.push(_t.range(Math.min(r.doc.length,B.anchor+I),Math.min(r.doc.length,B.head+I)))}else{i.push({from:g.from,to:u.from},{from:u.to,insert:r.lineBreak+g.text});for(let B of u.ranges)s.push(_t.range(B.anchor-I,B.head-I))}}return!!i.length&&(e(r.update({changes:i,scrollIntoView:!0,selection:_t.create(s,r.selection.mainIndex),userEvent:"move.line"})),!0)}function hv(r,e,t){if(r.readOnly)return!1;let i=[];for(let s of zc(r))i.push(t?{from:s.from,insert:r.doc.slice(s.from,s.to)+r.lineBreak}:{from:s.to,insert:r.lineBreak+r.doc.slice(s.from,s.to)});return e(r.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const fv=qb(!1);function qb(r){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(s=>{let{from:u,to:g}=s,I=e.doc.lineAt(u),B=!r&&u==g&&function hs(r,e){if(/\(\)|\[\]|\{\}/.test(r.sliceDoc(e-1,e+1)))return{from:e,to:e};let u,t=ni(r).resolveInner(e),i=t.childBefore(e),s=t.childAfter(e);return i&&s&&i.to<=e&&s.from>=e&&(u=i.type.prop(Qt.closedBy))&&u.indexOf(s.name)>-1&&r.doc.lineAt(i.to).from==r.doc.lineAt(s.from).from?{from:i.to,to:s.from}:null}(e,u);r&&(u=g=(g<=I.to?I:e.doc.lineAt(g)).to);let ne=new rf(e,{simulateBreak:u,simulateDoubleBreak:!!B}),fe=dl(ne,u);for(null==fe&&(fe=/^\s*/.exec(e.doc.lineAt(u).text)[0].length);g<I.to&&/\s/.test(I.text[g-I.from]);)g++;B?({from:u,to:g}=B):u>I.from&&u<I.from+100&&!/\S/.test(I.text.slice(0,u))&&(u=I.from);let ye=["",Ca(e,fe)];return B&&ye.push(Ca(e,ne.lineIndent(I.from,-1))),{changes:{from:u,to:g,insert:Vn.of(ye)},range:_t.cursor(u+1+ye[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function hp(r,e){let t=-1;return r.changeByRange(i=>{let s=[];for(let g=i.from;g<=i.to;){let I=r.doc.lineAt(g);I.number>t&&(i.empty||i.to>I.from)&&(e(I,s,i),t=I.number),g=I.to+1}let u=r.changes(s);return{changes:s,range:_t.range(u.mapPos(i.anchor,1),u.mapPos(i.head,1))}})}const eC=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:r=>Wr(r,e=>np(r.state,e,!Io(r))),shift:r=>_o(r,e=>np(r.state,e,!Io(r)))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:r=>Wr(r,e=>np(r.state,e,Io(r))),shift:r=>_o(r,e=>np(r.state,e,Io(r)))},{key:"Alt-ArrowUp",run:({state:r,dispatch:e})=>uv(r,e,!1)},{key:"Shift-Alt-ArrowUp",run:({state:r,dispatch:e})=>hv(r,e,!1)},{key:"Alt-ArrowDown",run:({state:r,dispatch:e})=>uv(r,e,!0)},{key:"Shift-Alt-ArrowDown",run:({state:r,dispatch:e})=>hv(r,e,!0)},{key:"Escape",run:({state:r,dispatch:e})=>{let t=r.selection,i=null;return t.ranges.length>1?i=_t.create([t.main]):t.main.empty||(i=_t.create([_t.cursor(t.main.head)])),!!i&&(e(Tn(r,i)),!0)}},{key:"Mod-Enter",run:qb(!0)},{key:"Alt-l",mac:"Ctrl-l",run:({state:r,dispatch:e})=>{let t=zc(r).map(({from:i,to:s})=>_t.range(i,Math.min(s+1,r.doc.length)));return e(r.update({selection:_t.create(t),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:r,dispatch:e})=>{let t=Pa(r.selection,i=>{var s;let u=ni(r).resolveInner(i.head,1);for(;!(u.from<i.from&&u.to>=i.to||u.to>i.to&&u.from<=i.from||null===(s=u.parent)||void 0===s)&&s.parent;)u=u.parent;return _t.range(u.to,u.from)});return e(Tn(r,t)),!0},preventDefault:!0},{key:"Mod-[",run:({state:r,dispatch:e})=>!r.readOnly&&(e(r.update(hp(r,(t,i)=>{let s=/^\s*/.exec(t.text)[0];if(!s)return;let u=Ni(s,r.tabSize),g=0,I=Ca(r,Math.max(0,u-ba(r)));for(;g<s.length&&g<I.length&&s.charCodeAt(g)==I.charCodeAt(g);)g++;i.push({from:t.from+g,to:t.from+s.length,insert:I.slice(g)})}),{userEvent:"delete.dedent"})),!0)},{key:"Mod-]",run:({state:r,dispatch:e})=>!r.readOnly&&(e(r.update(hp(r,(t,i)=>{i.push({from:t.from,insert:r.facet(hl)})}),{userEvent:"input.indent"})),!0)},{key:"Mod-Alt-\\",run:({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=Object.create(null),i=new rf(r,{overrideIndentation:u=>t[u]??-1}),s=hp(r,(u,g,I)=>{let B=dl(i,u.from);if(null==B)return;/\S/.test(u.text)||(B=0);let ne=/^\s*/.exec(u.text)[0],fe=Ca(r,B);(ne!=fe||I.from<u.from+ne.length)&&(t[u.from]=B,g.push({from:u.from,to:u.from+ne.length,insert:fe}))});return s.changes.empty||e(r.update(s,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:r=>{if(r.state.readOnly)return!1;let{state:e}=r,t=e.changes(zc(e).map(({from:s,to:u})=>(s>0?s--:u<e.doc.length&&u++,{from:s,to:u}))),i=Pa(e.selection,s=>r.moveVertically(s,!0)).map(t);return r.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:r,dispatch:e})=>function Yg(r,e,t){let i=!1,s=Pa(r.selection,u=>{let g=to(r,u.head,-1)||to(r,u.head,1)||u.head>0&&to(r,u.head-1,1)||u.head<r.doc.length&&to(r,u.head+1,-1);if(!g||!g.end)return u;i=!0;let I=g.start.from==u.head?g.end.to:g.end.from;return t?_t.range(u.anchor,I):_t.cursor(I)});return!!i&&(e(Tn(r,s)),!0)}(r,e,!1)},{key:"Mod-/",run:r=>{let e=Bc(r.state);return e.line?Oo(r):!!e.block&&jf(r)}},{key:"Alt-A",run:Ia}].concat([{key:"ArrowLeft",run:Vg,shift:rp,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:r=>Lh(r,!Io(r)),shift:r=>op(r,!Io(r))},{mac:"Cmd-ArrowLeft",run:ip,shift:cp},{key:"ArrowRight",run:Mb,shift:Wh,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:r=>Lh(r,Io(r)),shift:r=>op(r,Io(r))},{mac:"Cmd-ArrowRight",run:Kg,shift:tv},{key:"ArrowUp",run:zg,shift:lp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:nv,shift:rv},{mac:"Ctrl-ArrowUp",run:Bh,shift:jb},{key:"ArrowDown",run:tr,shift:ev,preventDefault:!0},{mac:"Cmd-ArrowDown",run:iv,shift:Qb},{mac:"Ctrl-ArrowDown",run:Xg,shift:Gh},{key:"PageUp",run:Bh,shift:jb},{key:"PageDown",run:Xg,shift:Gh},{key:"Home",run:ip,shift:cp,preventDefault:!0},{key:"Mod-Home",run:nv,shift:rv},{key:"End",run:Kg,shift:tv,preventDefault:!0},{key:"Mod-End",run:iv,shift:Qb},{key:"Enter",run:fv},{key:"Mod-a",run:({state:r,dispatch:e})=>(e(r.update({selection:{anchor:0,head:r.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:up,shift:up},{key:"Delete",run:zb},{key:"Mod-Backspace",mac:"Alt-Backspace",run:av},{key:"Mod-Delete",mac:"Alt-Delete",run:r=>sv(r,!0)},{mac:"Mod-Backspace",run:r=>Qc(r,e=>{let t=r.lineBlockAt(e).from;return jh(r,e>t?t:Math.max(0,e-1),!1)})},{mac:"Mod-Delete",run:Ub}].concat([{key:"Ctrl-b",run:Vg,shift:rp,preventDefault:!0},{key:"Ctrl-f",run:Mb,shift:Wh},{key:"Ctrl-p",run:zg,shift:lp},{key:"Ctrl-n",run:tr,shift:ev},{key:"Ctrl-a",run:r=>Wr(r,e=>_t.cursor(r.lineBlockAt(e.head).from,1)),shift:r=>_o(r,e=>_t.cursor(r.lineBlockAt(e.head).from))},{key:"Ctrl-e",run:r=>Wr(r,e=>_t.cursor(r.lineBlockAt(e.head).to,-1)),shift:r=>_o(r,e=>_t.cursor(r.lineBlockAt(e.head).to))},{key:"Ctrl-d",run:zb},{key:"Ctrl-h",run:up},{key:"Ctrl-k",run:Ub},{key:"Ctrl-Alt-h",run:av},{key:"Ctrl-o",run:({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Vn.of(["",""])},range:_t.cursor(i.from)}));return e(r.update(t,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(i=>{if(!i.empty||0==i.from||i.from==r.doc.length)return{range:i};let s=i.from,u=r.doc.lineAt(s),g=s==u.from?s-1:zr(u.text,s-u.from,!1)+u.from,I=s==u.to?s+1:zr(u.text,s-u.from,!0)+u.from;return{changes:{from:g,to:I,insert:r.doc.slice(s,I).append(r.doc.slice(g,s))},range:_t.cursor(I)}});return!t.changes.empty&&(e(r.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:Xg}].map(r=>({mac:r.key,run:r.run,shift:r.shift}))));var ai=xe(6773);const mv="function"==typeof String.prototype.normalize?r=>r.normalize("NFKD"):r=>r;class Ll{constructor(e,t,i=0,s=e.length,u){this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,s),this.bufferStart=i,this.normalize=u?g=>u(mv(g)):mv,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return sr(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Js(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Ur(e);let s=this.normalize(t);for(let u=0,g=i;;u++){let I=s.charCodeAt(u),B=this.match(I,g);if(B)return this.value=B,this;if(u==s.length-1)break;g==i&&u<t.length&&t.charCodeAt(u)==I&&g++}}}match(e,t){let i=null;for(let s=0;s<this.matches.length;s+=2){let u=this.matches[s],g=!1;this.query.charCodeAt(u)==e&&(u==this.query.length-1?i={from:this.matches[s+1],to:t+1}:(this.matches[s]++,g=!0)),g||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?i={from:t,to:t+1}:this.matches.push(1,t)),i}}typeof Symbol<"u"&&(Ll.prototype[Symbol.iterator]=function(){return this});const tC={from:-1,to:-1,match:/.*/.exec("")},So="gm"+(null==/x/.unicode?"":"u");class n{constructor(e,t,i,s=0,u=e.length){if(this.to=u,this.curLine="",this.done=!1,this.value=tC,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new l(e,t,i,s,u);this.re=new RegExp(t,So+(i?.ignoreCase?"i":"")),this.iter=e.iter();let g=e.lineAt(s);this.curLineStart=g.from,this.matchPos=s,this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,s=i+t[0].length;if(this.matchPos=s+(i==s?1:0),i==this.curLine.length&&this.nextLine(),i<s||i>this.value.to)return this.value={from:i,to:s,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}const o=new WeakMap;class a{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let s=o.get(e);if(!s||s.from>=i||s.to<=t){let I=new a(t,e.sliceString(t,i));return o.set(e,I),I}if(s.from==t&&s.to==i)return s;let{text:u,from:g}=s;return g>t&&(u=e.sliceString(t,g)+u,g=t),s.to<i&&(u+=e.sliceString(s.to,i)),o.set(e,new a(g,u)),new a(t,u.slice(t-g,i-g))}}class l{constructor(e,t,i,s,u){this.text=e,this.to=u,this.done=!1,this.value=tC,this.matchPos=s,this.re=new RegExp(t,So+(i?.ignoreCase?"i":"")),this.flat=a.get(e,s,this.chunkEnd(s+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t&&this.flat.to<this.to&&t.index+t[0].length>this.flat.text.length-10&&(t=null),t){let i=this.flat.from+t.index,s=i+t[0].length;return this.value={from:i,to:s,match:t},this.matchPos=s+(i==s?1:0),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=a.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function b(r){let e=(0,ai.Z)("input",{class:"cm-textfield",name:"line"});function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!s)return;let{state:u}=r,g=u.doc.lineAt(u.selection.main.head),[,I,B,ne,fe]=s,ye=ne?+ne.slice(1):0,Ne=B?+B:g.number;if(B&&fe){let ze=Ne/100;I&&(ze=ze*("-"==I?-1:1)+g.number/u.doc.lines),Ne=Math.round(u.doc.lines*ze)}else B&&I&&(Ne=Ne*("-"==I?-1:1)+g.number);let je=u.doc.line(Math.max(1,Math.min(u.doc.lines,Ne)));r.dispatch({effects:A.of(!1),selection:_t.cursor(je.from+Math.max(0,Math.min(ye,je.length))),scrollIntoView:!0}),r.focus()}return{dom:(0,ai.Z)("form",{class:"cm-gotoLine",onkeydown:s=>{27==s.keyCode?(s.preventDefault(),r.dispatch({effects:A.of(!1)}),r.focus()):13==s.keyCode&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},(0,ai.Z)("label",r.state.phrase("Go to line"),": ",e)," ",(0,ai.Z)("button",{class:"cm-button",type:"submit"},r.state.phrase("go")))}}typeof Symbol<"u"&&(n.prototype[Symbol.iterator]=l.prototype[Symbol.iterator]=function(){return this});const A=_n.define(),E=Dn.define({create:()=>!0,update(r,e){for(let t of e.effects)t.is(A)&&(r=t.value);return r},provide:r=>gc.from(r,e=>e?b:null)}),W=$n.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),z={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},te=sn.define({combine:r=>Mo(r,z,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})});function le(r){let e=[Ee,we];return r&&e.push(te.of(r)),e}const he=an.mark({class:"cm-selectionMatch"}),me=an.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Oe(r,e,t,i){return!(0!=t&&r(e.sliceDoc(t-1,t))==Dt.Word||i!=e.doc.length&&r(e.sliceDoc(i,i+1))==Dt.Word)}const we=Gn.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.selectionSet||r.docChanged||r.viewportChanged)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=r.state.facet(te),{state:t}=r,i=t.selection;if(i.ranges.length>1)return an.none;let u,s=i.main,g=null;if(s.empty){if(!e.highlightWordAroundCursor)return an.none;let B=t.wordAt(s.head);if(!B)return an.none;g=t.charCategorizer(s.head),u=t.sliceDoc(B.from,B.to)}else{let B=s.to-s.from;if(B<e.minSelectionLength||B>200)return an.none;if(e.wholeWords){if(u=t.sliceDoc(s.from,s.to),g=t.charCategorizer(s.head),!Oe(g,t,s.from,s.to)||!function Pe(r,e,t,i){return r(e.sliceDoc(t,t+1))==Dt.Word&&r(e.sliceDoc(i-1,i))==Dt.Word}(g,t,s.from,s.to))return an.none}else if(u=t.sliceDoc(s.from,s.to).trim(),!u)return an.none}let I=[];for(let B of r.visibleRanges){let ne=new Ll(t.doc,u,B.from,B.to);for(;!ne.next().done;){let{from:fe,to:ye}=ne.value;if((!g||Oe(g,t,fe,ye))&&(s.empty&&fe<=s.from&&ye>=s.to?I.push(me.range(fe,ye)):(fe>=s.to||ye<=s.from)&&I.push(he.range(fe,ye)),I.length>e.maxMatches))return an.none}}return an.set(I)}},{decorations:r=>r.decorations}),Ee=$n.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),rt=sn.define({combine(r){var e;return{top:r.reduce((t,i)=>t??i.top,void 0)||!1,caseSensitive:r.reduce((t,i)=>t??i.caseSensitive,void 0)||!1,createPanel:(null===(e=r.find(t=>t.createPanel))||void 0===e?void 0:e.createPanel)||(t=>new Rr(t))}}});class nt{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function d(r){try{return new RegExp(r,So),!0}catch{return!1}}(this.search)),this.unquoted=e.literal?this.search:this.search.replace(/\\([nrt\\])/g,(t,i)=>"n"==i?"\n":"r"==i?"\r":"t"==i?"\t":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp}create(){return this.regexp?new Ot(this):new Mt(this)}getCursor(e,t=0,i=e.length){return this.regexp?dt(this,e,t,i):qt(this,e,t,i)}}class gt{constructor(e){this.spec=e}}function qt(r,e,t,i){return new Ll(e,r.unquoted,t,i,r.caseSensitive?void 0:s=>s.toLowerCase())}class Mt extends gt{constructor(e){super(e)}nextMatch(e,t,i){let s=qt(this.spec,e,i,e.length).nextOverlapping();return s.done&&(s=qt(this.spec,e,0,t).nextOverlapping()),s.done?null:s.value}prevMatchInRange(e,t,i){for(let s=i;;){let u=Math.max(t,s-1e4-this.spec.unquoted.length),g=qt(this.spec,e,u,s),I=null;for(;!g.nextOverlapping().done;)I=g.value;if(I)return I;if(u==t)return null;s-=1e4}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.length)}getReplacement(e){return this.spec.replace}matchAll(e,t){let i=qt(this.spec,e,0,e.length),s=[];for(;!i.next().done;){if(s.length>=t)return null;s.push(i.value)}return s}highlight(e,t,i,s){let u=qt(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.length));for(;!u.next().done;)s(u.value.from,u.value.to)}}function dt(r,e,t,i){return new n(e,r.search,r.caseSensitive?void 0:{ignoreCase:!0},t,i)}class Ot extends gt{nextMatch(e,t,i){let s=dt(this.spec,e,i,e.length).next();return s.done&&(s=dt(this.spec,e,0,t).next()),s.done?null:s.value}prevMatchInRange(e,t,i){for(let s=1;;s++){let u=Math.max(t,i-1e4*s),g=dt(this.spec,e,u,i),I=null;for(;!g.next().done;)I=g.value;if(I&&(u==t||I.from>u+10))return I;if(u==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.length)}getReplacement(e){return this.spec.replace.replace(/\$([$&\d+])/g,(t,i)=>"$"==i?"$":"&"==i?e.match[0]:"0"!=i&&+i<e.match.length?e.match[i]:t)}matchAll(e,t){let i=dt(this.spec,e,0,e.length),s=[];for(;!i.next().done;){if(s.length>=t)return null;s.push(i.value)}return s}highlight(e,t,i,s){let u=dt(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.length));for(;!u.next().done;)s(u.value.from,u.value.to)}}const un=_n.define(),Ve=_n.define(),Se=Dn.define({create:r=>new bt(Fn(r).create(),null),update(r,e){for(let t of e.effects)t.is(un)?r=new bt(t.value.create(),r.panel):t.is(Ve)&&(r=new bt(r.query,t.value?ci:null));return r},provide:r=>gc.from(r,e=>e.panel)});class bt{constructor(e,t){this.query=e,this.panel=t}}const Pt=an.mark({class:"cm-searchMatch"}),Xt=an.mark({class:"cm-searchMatch cm-searchMatch-selected"}),tn=Gn.fromClass(class{constructor(r){this.view=r,this.decorations=this.highlight(r.state.field(Se))}update(r){let e=r.state.field(Se);(e!=r.startState.field(Se)||r.docChanged||r.selectionSet||r.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:r,panel:e}){if(!e||!r.spec.valid)return an.none;let{view:t}=this,i=new No;for(let s=0,u=t.visibleRanges,g=u.length;s<g;s++){let{from:I,to:B}=u[s];for(;s<g-1&&B>u[s+1].from-500;)B=u[++s].to;r.highlight(t.state.doc,I,B,(ne,fe)=>{let ye=t.state.selection.ranges.some(Ne=>Ne.from==ne&&Ne.to==fe);i.add(ne,fe,ye?Xt:Pt)})}return i.finish()}},{decorations:r=>r.decorations});function en(r){return e=>{let t=e.state.field(Se,!1);return t&&t.query.spec.valid?r(e,t):Di(e)}}const nn=en((r,{query:e})=>{let{from:t,to:i}=r.state.selection.main,s=e.nextMatch(r.state.doc,t,i);return!(!s||s.from==t&&s.to==i||(r.dispatch({selection:{anchor:s.from,head:s.to},scrollIntoView:!0,effects:zn(r,s),userEvent:"select.search"}),0))}),Hn=en((r,{query:e})=>{let{state:t}=r,{from:i,to:s}=t.selection.main,u=e.prevMatch(t.doc,i,s);return!!u&&(r.dispatch({selection:{anchor:u.from,head:u.to},scrollIntoView:!0,effects:zn(r,u),userEvent:"select.search"}),!0)}),Xi=en((r,{query:e})=>{let t=e.matchAll(r.state.doc,1e3);return!(!t||!t.length||(r.dispatch({selection:_t.create(t.map(i=>_t.range(i.from,i.to))),userEvent:"select.search.matches"}),0))}),Eo=en((r,{query:e})=>{let{state:t}=r,{from:i,to:s}=t.selection.main;if(t.readOnly)return!1;let u=e.nextMatch(t.doc,i,i);if(!u)return!1;let I,B,g=[];if(u.from==i&&u.to==s&&(B=t.toText(e.getReplacement(u)),g.push({from:u.from,to:u.to,insert:B}),u=e.nextMatch(t.doc,u.from,u.to)),u){let ne=0==g.length||g[0].from>=u.to?0:u.to-u.from-B.length;I={anchor:u.from-ne,head:u.to-ne}}return r.dispatch({changes:g,selection:I,scrollIntoView:!!I,effects:u?zn(r,u):void 0,userEvent:"input.replace"}),!0}),li=en((r,{query:e})=>{if(r.state.readOnly)return!1;let t=e.matchAll(r.state.doc,1e9).map(i=>{let{from:s,to:u}=i;return{from:s,to:u,insert:e.getReplacement(i)}});return!!t.length&&(r.dispatch({changes:t,userEvent:"input.replace.all"}),!0)});function ci(r){return r.state.facet(rt).createPanel(r)}function Fn(r,e){var t;let i=r.selection.main,s=i.empty||i.to>i.from+100?"":r.sliceDoc(i.from,i.to),u=null!==(t=e?.caseSensitive)&&void 0!==t?t:r.facet(rt).caseSensitive;return e&&!s?e:new nt({search:s.replace(/\n/g,"\\n"),caseSensitive:u})}const Di=r=>{let e=r.state.field(Se,!1);if(e&&e.panel){let t=mc(r,ci);if(!t)return!1;let i=t.dom.querySelector("[name=search]");if(i!=r.root.activeElement){let s=Fn(r.state,e.query.spec);s.valid&&r.dispatch({effects:un.of(s)}),i.focus(),i.select()}}else r.dispatch({effects:[Ve.of(!0),e?un.of(Fn(r.state,e.query.spec)):_n.appendConfig.of(ds)]});return!0},Ki=r=>{let e=r.state.field(Se,!1);if(!e||!e.panel)return!1;let t=mc(r,ci);return t&&t.dom.contains(r.root.activeElement)&&r.focus(),r.dispatch({effects:Ve.of(!1)}),!0},ii=[{key:"Mod-f",run:Di,scope:"editor search-panel"},{key:"F3",run:nn,shift:Hn,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:nn,shift:Hn,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Ki,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:r,dispatch:e})=>{let t=r.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:s}=t.main,u=[],g=0;for(let I=new Ll(r.doc,r.sliceDoc(i,s));!I.next().done;){if(u.length>1e3)return!1;I.value.from==i&&(g=u.length),u.push(_t.range(I.value.from,I.value.to))}return e(r.update({selection:_t.create(u,g),userEvent:"select.search.matches"})),!0}},{key:"Alt-g",run:r=>{let e=mc(r,b);if(!e){let t=[A.of(!0)];null==r.state.field(E,!1)&&t.push(_n.appendConfig.of([E,W])),r.dispatch({effects:t}),e=mc(r,b)}return e&&e.dom.querySelector("input").focus(),!0}},{key:"Mod-d",run:({state:r,dispatch:e})=>{let{ranges:t}=r.selection;if(t.some(u=>u.from===u.to))return(({state:r,dispatch:e})=>{let{selection:t}=r,i=_t.create(t.ranges.map(s=>r.wordAt(s.head)||_t.cursor(s.head)),t.mainIndex);return!i.eq(t)&&(e(r.update({selection:i})),!0)})({state:r,dispatch:e});let i=r.sliceDoc(t[0].from,t[0].to);if(r.selection.ranges.some(u=>r.sliceDoc(u.from,u.to)!=i))return!1;let s=function Be(r,e){let{main:t,ranges:i}=r.selection,s=r.wordAt(t.head),u=s&&s.from==t.from&&s.to==t.to;for(let g=!1,I=new Ll(r.doc,e,i[i.length-1].to);;){if(I.next(),!I.done){if(g&&i.some(B=>B.from==I.value.from))continue;if(u){let B=r.wordAt(I.value.from);if(!B||B.from!=I.value.from||B.to!=I.value.to)continue}return I.value}if(g)return null;I=new Ll(r.doc,e,0,Math.max(0,i[i.length-1].from-1)),g=!0}}(r,i);return!!s&&(e(r.update({selection:r.selection.addRange(_t.range(s.from,s.to),!1),effects:$n.scrollIntoView(s.to)})),!0)},preventDefault:!0}];class Rr{constructor(e){this.view=e;let t=this.query=e.state.field(Se).query.spec;function i(s,u,g){return(0,ai.Z)("button",{class:"cm-button",name:s,onclick:u,type:"button"},g)}this.commit=this.commit.bind(this),this.searchField=(0,ai.Z)("input",{value:t.search,placeholder:An(e,"Find"),"aria-label":An(e,"Find"),class:"cm-textfield",name:"search",onchange:this.commit,onkeyup:this.commit}),this.replaceField=(0,ai.Z)("input",{value:t.replace,placeholder:An(e,"Replace"),"aria-label":An(e,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=(0,ai.Z)("input",{type:"checkbox",name:"case",checked:t.caseSensitive,onchange:this.commit}),this.reField=(0,ai.Z)("input",{type:"checkbox",name:"re",checked:t.regexp,onchange:this.commit}),this.dom=(0,ai.Z)("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,i("next",()=>nn(e),[An(e,"next")]),i("prev",()=>Hn(e),[An(e,"previous")]),i("select",()=>Xi(e),[An(e,"all")]),(0,ai.Z)("label",null,[this.caseField,An(e,"match case")]),(0,ai.Z)("label",null,[this.reField,An(e,"regexp")]),...e.state.readOnly?[]:[(0,ai.Z)("br"),this.replaceField,i("replace",()=>Eo(e),[An(e,"replace")]),i("replaceAll",()=>li(e),[An(e,"replace all")]),(0,ai.Z)("button",{name:"close",onclick:()=>Ki(e),"aria-label":An(e,"close"),type:"button"},["\xd7"])]])}commit(){let e=new nt({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:un.of(e)}))}keydown(e){!function Ns(r,e,t){return Zd(Am(r.state),e,r,t)}(this.view,e,"search-panel")?13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Hn:nn)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),Eo(this.view)):e.preventDefault()}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(un)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(rt).top}}function An(r,e){return r.state.phrase(e)}const Cr=30,gn=/[\s\.,:;?!]/;function zn(r,{from:e,to:t}){let i=r.state.doc.lineAt(e).from,s=r.state.doc.lineAt(t).to,u=Math.max(i,e-Cr),g=Math.min(s,t+Cr),I=r.state.sliceDoc(u,g);if(u!=i)for(let B=0;B<Cr;B++)if(!gn.test(I[B+1])&&gn.test(I[B])){I=I.slice(B);break}if(g!=s)for(let B=I.length-1;B>I.length-Cr;B--)if(!gn.test(I[B-1])&&gn.test(I[B])){I=I.slice(0,B);break}return $n.announce.of(`${r.state.phrase("current match")}. ${I} ${r.state.phrase("on line")} ${r.state.doc.lineAt(e).number}`)}const $a=$n.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),ds=[Se,ia.lowest(tn),$a];class Ri{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class Fi{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let s=e,u=i.facet(ps).markerFilter;u&&(s=u(s));let g=an.set(s.map(I=>I.from==I.to||I.from==I.to-1&&i.doc.lineAt(I.from).to==I.from?an.widget({widget:new Hs(I),diagnostic:I}).range(I.from):an.mark({attributes:{class:"cm-lintRange cm-lintRange-"+I.severity},diagnostic:I}).range(I.from,I.to)),!0);return new Fi(g,t,Gr(g))}}function Gr(r,e=null,t=0){let i=null;return r.between(t,1e9,(s,u,{spec:g})=>{if(!e||g.diagnostic==e)return i=new Ri(s,u,g.diagnostic),!1}),i}function fs(r,e){return!(!r.effects.some(t=>t.is(dp))&&!r.changes.touchesRange(e.pos))}function Zh(r,e){return r.field(wr,!1)?e:e.concat(_n.appendConfig.of([wr,$n.decorations.compute([wr],t=>{let{selected:i,panel:s}=t.field(wr);return i&&s&&i.from!=i.to?an.set([iC.range(i.from,i.to)]):an.none}),bo(rw,{hideOn:fs}),pp]))}const dp=_n.define(),Xc=_n.define(),nC=_n.define(),wr=Dn.define({create:()=>new Fi(an.none,null,null),update(r,e){if(e.docChanged){let t=r.diagnostics.map(e.changes),i=null;if(r.selected){let s=e.changes.mapPos(r.selected.from,1);i=Gr(t,r.selected.diagnostic,s)||Gr(t,null,s)}r=new Fi(t,r.panel,i)}for(let t of e.effects)t.is(dp)?r=Fi.init(t.value,r.panel,e.state):t.is(Xc)?r=new Fi(r.diagnostics,t.value?Vh.open:null,r.selected):t.is(nC)&&(r=new Fi(r.diagnostics,r.panel,t.value));return r},provide:r=>[gc.from(r,e=>e.panel),$n.decorations.from(r,e=>e.diagnostics)]}),iC=an.mark({class:"cm-lintRange cm-lintRange-active"});function rw(r,e,t){let{diagnostics:i}=r.state.field(wr),s=[],u=2e8,g=0;i.between(e-(t<0?1:0),e+(t>0?1:0),(B,ne,{spec:fe})=>{e>=B&&e<=ne&&(B==ne||(e>B||t>0)&&(e<ne||t<0))&&(s.push(fe.diagnostic),u=Math.min(B,u),g=Math.max(ne,g))});let I=r.state.facet(ps).tooltipFilter;return I&&(s=I(s)),s.length?{pos:u,end:g,above:r.state.doc.lineAt(u).to<g,create:()=>({dom:gv(r,s)})}:null}function gv(r,e){return(0,ai.Z)("ul",{class:"cm-tooltip-lint"},e.map(t=>Qs(r,t,!1)))}const vv=r=>{let e=r.state.field(wr,!1);return!(!e||!e.panel||(r.dispatch({effects:Xc.of(!1)}),0))},yv=[{key:"Mod-Shift-m",run:r=>{let e=r.state.field(wr,!1);(!e||!e.panel)&&r.dispatch({effects:Zh(r.state,[Xc.of(!0)])});let t=mc(r,Vh.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0}},{key:"F8",run:r=>{let e=r.state.field(wr,!1);if(!e)return!1;let t=r.state.selection.main,i=e.diagnostics.iter(t.to+1);return!(!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)||(r.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),0))}}],ps=sn.define({combine:r=>Object.assign({sources:r.map(e=>e.source)},Mo(r.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null})),enables:Gn.fromClass(class{constructor(r){this.view=r,this.timeout=-1,this.set=!0;let{delay:e}=r.state.facet(ps);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let r=Date.now();if(r<this.lintTime-10)setTimeout(this.run,this.lintTime-r);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(ps);Promise.all(t.map(i=>Promise.resolve(i(this.view)))).then(i=>{let s=i.reduce((u,g)=>u.concat(g));this.view.state.doc==e.doc&&this.view.dispatch(function iw(r,e){return{effects:Zh(r,[dp.of(e)])}}(this.view.state,s))},i=>{Xr(this.view.state,i)})}}update(r){let e=r.state.facet(ps);(r.docChanged||e!=r.startState.facet(ps))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}})});function fp(r){let e=[];if(r)e:for(let{name:t}of r){for(let i=0;i<t.length;i++){let s=t[i];if(/[a-zA-Z]/.test(s)&&!e.some(u=>u.toLowerCase()==s.toLowerCase())){e.push(s);continue e}}e.push("")}return e}function Qs(r,e,t){var i;let s=t?fp(e.actions):[];return(0,ai.Z)("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},(0,ai.Z)("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),null===(i=e.actions)||void 0===i?void 0:i.map((u,g)=>{let I=ye=>{ye.preventDefault();let Ne=Gr(r.state.field(wr).diagnostics,e);Ne&&u.apply(r,Ne.from,Ne.to)},{name:B}=u,ne=s[g]?B.indexOf(s[g]):-1,fe=ne<0?B:[B.slice(0,ne),(0,ai.Z)("u",B.slice(ne,ne+1)),B.slice(ne+1)];return(0,ai.Z)("button",{type:"button",class:"cm-diagnosticAction",onclick:I,onmousedown:I,"aria-label":` Action: ${B}${ne<0?"":` (access key "${s[g]})"`}.`},fe)}),e.source&&(0,ai.Z)("div",{class:"cm-diagnosticSource"},e.source))}class Hs extends Fo{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return(0,ai.Z)("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class wv{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=Qs(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Vh{constructor(e){this.view=e,this.items=[],this.list=(0,ai.Z)("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:s=>{if(27==s.keyCode)vv(this.view),this.view.focus();else if(38==s.keyCode||33==s.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==s.keyCode||34==s.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==s.keyCode)this.moveSelection(0);else if(35==s.keyCode)this.moveSelection(this.items.length-1);else if(13==s.keyCode)this.view.focus();else{if(!(s.keyCode>=65&&s.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:u}=this.items[this.selectedIndex],g=fp(u.actions);for(let I=0;I<g.length;I++)if(g[I].toUpperCase().charCodeAt(0)==s.keyCode){let B=Gr(this.view.state.field(wr).diagnostics,u);B&&u.actions[I].apply(e,B.from,B.to)}}}s.preventDefault()},onclick:s=>{for(let u=0;u<this.items.length;u++)this.items[u].dom.contains(s.target)&&this.moveSelection(u)}}),this.dom=(0,ai.Z)("div",{class:"cm-panel-lint"},this.list,(0,ai.Z)("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>vv(this.view)},"\xd7")),this.update()}get selectedIndex(){let e=this.view.state.field(wr).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(wr),i=0,s=!1,u=null;for(e.between(0,this.view.state.doc.length,(g,I,{spec:B})=>{let fe,ne=-1;for(let ye=i;ye<this.items.length;ye++)if(this.items[ye].diagnostic==B.diagnostic){ne=ye;break}ne<0?(fe=new wv(this.view,B.diagnostic),this.items.splice(i,0,fe),s=!0):(fe=this.items[ne],ne>i&&(this.items.splice(i,ne-i),s=!0)),t&&fe.diagnostic==t.diagnostic?fe.dom.hasAttribute("aria-selected")||(fe.dom.setAttribute("aria-selected","true"),u=fe):fe.dom.hasAttribute("aria-selected")&&fe.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)s=!0,this.items.pop();0==this.items.length&&(this.items.push(new wv(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),s=!0),u?(this.list.setAttribute("aria-activedescendant",u.id),this.view.requestMeasure({key:this,read:()=>({sel:u.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:g,panel:I})=>{g.top<I.top?this.list.scrollTop-=I.top-g.top:g.bottom>I.bottom&&(this.list.scrollTop+=g.bottom-I.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),s&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let i=Gr(this.view.state.field(wr).diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:nC.of(i)})}static open(e){return new Vh(e)}}function Dl(r,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(r)}</svg>')`}function ro(r){return Dl(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${r}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const pp=$n.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:ro("#d11")},".cm-lintRange-warning":{backgroundImage:ro("orange")},".cm-lintRange-info":{backgroundImage:ro("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});class xv extends Fr{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce((t,i)=>{let s=i.severity;return"error"==s||"warning"==s&&"info"==t?s:t},"info")}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let i=this.diagnostics,s=e.state.facet(Ue).tooltipFilter;return s&&(i=s(i)),i.length&&(t.onmouseover=()=>function Ov(r,e,t){function i(){let g=r.elementAtHeight(e.getBoundingClientRect().top+5-r.documentTop);r.coordsAtPos(g.from)&&r.dispatch({effects:Qh.of({pos:g.from,above:!1,create:()=>({dom:gv(r,t),getCoords:()=>e.getBoundingClientRect()})})}),e.onmouseout=e.onmousemove=null,function Av(r,e){let t=i=>{let s=e.getBoundingClientRect();if(!(i.clientX>s.left-10&&i.clientX<s.right+10&&i.clientY>s.top-10&&i.clientY<s.bottom+10)){for(let u=i.target;u;u=u.parentNode)if(1==u.nodeType&&u.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",t),r.state.field(_v)&&r.dispatch({effects:Qh.of(null)})}};window.addEventListener("mousemove",t)}(r,e)}let{hoverTime:s}=r.state.facet(Ue),u=setTimeout(i,s);e.onmouseout=()=>{clearTimeout(u),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(u),u=setTimeout(i,s)}}(e,t,i)),t}}function Iv(r,e){let t=Object.create(null);for(let s of e){let u=r.lineAt(s.from);(t[u.from]||(t[u.from]=[])).push(s)}let i=[];for(let s in t)i.push(new xv(t[s]).range(+s));return Ci.of(i,!0)}const mp=vc({class:"cm-gutter-lint",markers:r=>r.state.field(zs)}),zs=Dn.define({create:()=>Ci.empty,update(r,e){r=r.map(e.changes);let t=e.state.facet(Ue).markerFilter;for(let i of e.effects)if(i.is(dp)){let s=i.value;t&&(s=t(s||[])),r=Iv(e.state.doc,s.slice(0))}return r}}),Qh=_n.define(),_v=Dn.define({create:()=>null,update:(r,e)=>(r&&e.docChanged&&(r=fs(e,r)?null:Object.assign(Object.assign({},r),{pos:e.changes.mapPos(r.pos)})),e.effects.reduce((t,i)=>i.is(Qh)?i.value:t,r)),provide:r=>yo.from(r)}),We=$n.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:Dl('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:Dl('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error:before":{content:Dl('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),Ue=sn.define({combine:r=>Mo(r,{hoverTime:300,markerFilter:null,tooltipFilter:null})});function at(r={}){return[Ue.of(r),zs,mp,We,_v]}const xt=[Gm(),n1(),qu(),Zf(),f1(),UC(),Qy(),Sr.allowMultipleSelections.of(!0),a1(),xo(m1,{fallback:!0}),N0(),db(),Cg(),Ii(),a0(),km(),le(),Hu.of([..._1,...eC,...ii,...$b,...cf,...gb,...yv])];class $t{provideCompletions(e){var t=this;return(0,ce.Z)(function*(){let i=[];const s=ni(e.state).resolveInner(e.pos,-1),u=s.parent;if("ArgList"===u?.type.name){const g=u.prevSibling;if(g&&"MemberExpression"===g.type.name){const I=e.state.sliceDoc(g.from,g.to);/.*.pipe.*/.test(I)&&i.push(...t.rxjsPipeMethods())}}else"Block"===u?.parent?.type.name&&i.push(...t.rxjsStandaloneMethods());if("VariableName"===s?.type.name){const g=e.state.sliceDoc(s.from,s.to);i=i.filter(I=>I.label.startsWith(g))}return i})()}rxjsPipeMethods(){return[{type:"function",label:"catchError",detail:"use in pipe"},{type:"function",label:"debounceTime",detail:"use in pipe"},{type:"function",label:"delay",detail:"use in pipe"},{type:"function",label:"map",detail:"use in pipe"},{type:"function",label:"merge",detail:"use in pipe"},{type:"function",label:"mergeMap",detail:"use in pipe"},{type:"function",label:"scan",detail:"use in pipe"},{type:"function",label:"switchMap",detail:"use in pipe"},{type:"function",label:"tap",detail:"use in pipe"},{type:"function",label:"throwError",detail:"use in pipe"}]}rxjsStandaloneMethods(){return[{type:"function",label:"defer",detail:"defer observable creation"},{type:"function",label:"firstValueFrom",detail:"promise from observable"},{type:"function",label:"lastValueFrom",detail:"promise from observable"},{type:"function",label:"Observable",apply:"new Observable((subscriber) =>\n  {\n\n  });",detail:"create observable"}]}}class On{provideCompletions(e){var t=this;return(0,ce.Z)(function*(){const i=ni(e.state).resolveInner(e.pos,-1);if("."===i?.type.name)return[];let s=t.httpClientMethods();if("VariableName"===i?.type.name){const g=e.state.sliceDoc(i.from,i.to);s=s.filter(I=>I.label.startsWith(g))}const u=i.parent;return u&&e.state.sliceDoc(u.from,u.to),s})()}httpClientMethods(){return[{type:"function",label:"httpClient.get()",apply:"httpClient.get(/*url*/, /*options?*/).toPromise()",detail:"asynchronously"},{type:"function",label:"httpClient.post()",apply:"httpClient.post(/*url*/, /*data*/, /*options?*/).toPromise()",detail:"asynchronously"},{type:"function",label:"httpClient.put()",apply:"httpClient.put(/*url*/, /*data*/, /*options?*/).toPromise()",detail:"asynchronously"},{type:"function",label:"httpClient.delete()",apply:"httpClient.delete(/*url*/, /*options?*/).toPromise()",detail:"asynchronously"},{type:"class",label:"HttpHeaders",apply:"new HttpHeaders()",detail:"create http headers"},{type:"class",label:"HttpHeaders.set()",apply:"new HttpHeaders().set(/*headerName*/, /*headerValue(s)*/)",detail:"create http headers"}]}}class fr{constructor(e=null){this.inputParams=e}provideCompletions(e){var t=this;return(0,ce.Z)(function*(){const i=t.inputParams;if(!i)return[];const s=ni(e.state).resolveInner(e.pos,-1);if("."===s?.type?.name){const g=s.parent;if("MemberExpression"===g?.type.name){const I=e.state.sliceDoc(g.from,g.to)?.trim().replace(/.$/,"");if(I){const B=function Jn(r,e){const t=e.split(".");let i=r;for(let s=0;s<t.length;++s){if(typeof i[t[s]]>"u")return;i=i[t[s]]}return i}(t.inputParams,I);return B?Object.keys(B).map(ne=>({label:`${ne}`,apply:`.${ne}`,type:"function"==typeof B[ne]?"function":"variable"})):[]}}}let u=Object.keys(i).map(g=>({label:g,type:"function"==typeof i[g]?"function":"variable"}));if("VariableName"===s?.type.name){const g=e.state.sliceDoc(s.from,s.to);u=u.filter(I=>I.label.startsWith(g))}return u})()}}const Wn=["codeBody"],xr=[".cm-content"];let gp=(()=>{class r{constructor(t){var i=this;this._renderer=t,this.inputParams=null,this.implementation=Vn.of(Rf),this._complete=function(){var s=(0,ce.Z)(function*(u){const g=ni(u.state).resolveInner(u.pos,-1);if(";"===g.type.name)return{from:g.from,options:[],filter:!1};const I=[...yield(new $t).provideCompletions(u),...yield(new On).provideCompletions(u),...yield new fr(i.inputParams).provideCompletions(u)];return{from:g.from,options:I,filter:!1}});return function(u){return s.apply(this,arguments)}}()}ngOnInit(){this._codeMirror=new $n({state:this._state,parent:this.codeBody.nativeElement})}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.codeMirrorContent&&this._renderer.setAttribute(this.codeMirrorContent.nativeElement,"contenteditable",(!t).toString())}writeValue(t){if("object"!=typeof t||Array.isArray(t)){let i=[];t&&(i=Array.isArray(t)?t:t.split("\n")),this.implementation=Vn.of(i)}else this.implementation=t;this._codeMirror&&this._codeMirror.setState(this._state)}get _state(){return Sr.create({doc:this.implementation,extensions:[xt,Cg({override:[this._complete]}),Sh(),$n.updateListener.of(t=>{t.docChanged&&(this.implementation=t.state.doc,"function"==typeof this._onChange&&this._onChange(this.implementation)),t.focusChanged&&"function"==typeof this._onTouched&&this._onTouched(this.implementation)}),at()]})}}return r.\u0275fac=function(t){return new(t||r)(c.Y36(c.Qsj))},r.\u0275cmp=c.Xpm({type:r,selectors:[["app-code-editor"]],viewQuery:function(t,i){if(1&t&&(c.Gf(Wn,7,c.SBq),c.Gf(xr,5,c.SBq)),2&t){let s;c.iGM(s=c.CRH())&&(i.codeBody=s.first),c.iGM(s=c.CRH())&&(i.codeMirrorContent=s.first)}},inputs:{inputParams:"inputParams"},features:[c._Bn([{provide:cn.JU,useExisting:(0,c.Gpc)(()=>r),multi:!0}])],decls:2,vars:0,consts:[[1,"body"],["codeBody",""]],template:function(t,i){1&t&&c._UZ(0,"div",0,1)},styles:["[_nghost-%COMP%]{flex:1}.body[_ngcontent-%COMP%]{height:100%;width:100%;background-color:#fff}"],changeDetection:0}),r})(),Sv=(()=>{class r{constructor(t){this._store=t,this._notFoundResult="not found",this._emptyResult="no value"}transform(t){return"string"!=typeof t?(0,Pi.of)(this._emptyResult):this._store.select((0,Wt.Dp)(t)).pipe((0,U.U)(i=>i?i.name:this._notFoundResult))}}return r.\u0275fac=function(t){return new(t||r)(c.Y36(ee.yh,16))},r.\u0275pipe=c.Yjl({name:"interface",type:r,pure:!0}),r})();function oC(r,e){if(1&r&&(c.TgZ(0,"div")(1,"i"),c._uU(2),c.qZA(),c._uU(3),c.ALo(4,"async"),c.ALo(5,"interface"),c.qZA()),2&r){const t=c.oxw(2);c.xp6(2),c.Oqu(t.outputParamName),c.xp6(1),c.hij(" (",c.lcZ(4,2,c.lcZ(5,4,t.interfaceIdentifier)),") ")}}function Kc(r,e){if(1&r&&(c.TgZ(0,"div"),c.YNc(1,oC,6,6,"div",1),c.qZA()),2&r){const t=c.oxw(),i=c.MAs(5);c.xp6(1),c.Q6J("ngIf",t.interfaceIdentifier)("ngIfElse",i)}}function sC(r,e){if(1&r&&(c.TgZ(0,"div"),c._uU(1),c.qZA()),2&r){const t=c.oxw();c.xp6(1),c.AsE(" ",t.outputParamName," of type ",t.outputParamType," ")}}function aC(r,e){1&r&&(c.TgZ(0,"div"),c._uU(1," object without interface "),c.qZA())}let Yc=(()=>{class r{constructor(){this.outputParamType=null,this.outputParamName=null,this.interfaceIdentifier=null}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=c.Xpm({type:r,selectors:[["app-function-output-preview"]],inputs:{outputParamType:"outputParamType",outputParamName:"outputParamName",interfaceIdentifier:"interfaceIdentifier"},decls:6,vars:2,consts:[[1,"body"],[4,"ngIf","ngIfElse"],["nonObjectType",""],["unknownInterface",""]],template:function(t,i){if(1&t&&(c.TgZ(0,"div",0),c.YNc(1,Kc,2,2,"div",1),c.qZA(),c.YNc(2,sC,2,2,"ng-template",null,2,c.W1O),c.YNc(4,aC,2,0,"ng-template",null,3,c.W1O)),2&t){const s=c.MAs(3);c.xp6(1),c.Q6J("ngIf","object"===i.outputParamType)("ngIfElse",s)}},dependencies:[P.O5,P.Ov,Sv],changeDetection:0}),r})();function Ev(r,e){if(1&r&&(c.TgZ(0,"mat-option",13),c._uU(1),c.qZA()),2&r){const t=e.$implicit;c.Q6J("value",t.identifier),c.xp6(1),c.hij(" ",t.name," ")}}function kv(r,e){1&r&&c._UZ(0,"mat-spinner",14)}const Tv=function(){return[]};let Xo=(()=>{class r{constructor(t,i,s,u){var g=this;this.config=t,this._parameterService=i,this._controlContainer=s,this._store=u,this.injectorDef$=(0,Rh.P)(()=>(0,ge.D)(this._parameterService.parameterToInjector(this.inputParams))),this.injector$=this.injectorDef$.pipe((0,U.U)(I=>I.injector)),this.customEvaluationResult$=(0,Pg.z)((0,Pi.of)(this.formGroup.controls.functionImplementation?.value),this.formGroup.controls.functionImplementation.valueChanges.pipe((0,Ae.b)(1e3))).pipe((0,pe.w)(function(){var I=(0,ce.Z)(function*(B){return yield g._getEvaluationResult(B)});return function(B){return I.apply(this,arguments)}}()),(0,Bf.B)()),this.returnValueStatus$=(0,Rh.P)(()=>this.customEvaluationResult$.pipe((0,U.U)(I=>I?.status),(0,Ie.O)(En.Initial))),this.templates$=this._store.select((0,T.pO)()),this._functionOutputService=new Lc(this._store),this._subscriptions=new It.w0,this.ngAfterContentInit=()=>this.formGroup.controls.outputParamInterface?.disable(),this.ngOnDestroy=()=>this._subscriptions.unsubscribe(),this.MethodEvaluationStatus=En}ngOnInit(){var t=this;this._subscriptions.add(this.returnValueStatus$.subscribe(i=>this._verifyOutputParamNameControl(i))),this._subscriptions.add(this.customEvaluationResult$.subscribe(function(){var i=(0,ce.Z)(function*(s){return yield t._verifyOutput(s.type??null,s.interface,s.paramName??"",s)});return function(s){return i.apply(this,arguments)}}())),this._subscriptions.add(this.formGroup.controls.functionName?.valueChanges.subscribe(i=>this._normalizeFunctionName(i))),this._subscriptions.add(this.formGroup.controls.outputParamName?.valueChanges.subscribe(i=>this._normalizeOutputParamName(i)))}get formGroup(){return this._controlContainer.control}get functionCanFailControl(){return this.formGroup.controls.functionCanFail}_verifyOutput(t,i,s,u){var g=this;return(0,ce.Z)(function*(){let I;if(g.formGroup.controls.outputParamType.setValue(t),"object"!==t)g.formGroup.controls.outputParamInterface?.setValue(null),g.formGroup.controls.outputParamInterface?.disable(),I=s;else{if(!i)return g.formGroup.controls.outputParamInterface?.setValue(null),void g.formGroup.controls.outputParamInterface?.enable();const ye=yield(0,x.g)(g._store.select((0,T.Dp)(i)));if(!ye)return g.formGroup.controls.outputParamInterface?.setValue(null),void g.formGroup.controls.outputParamInterface?.disable();g.formGroup.controls.outputParamInterface?.setValue(ye.identifier),g.formGroup.controls.outputParamInterface?.enable(),I=ye.name}const B=yield(0,x.g)(g._store.select((0,T.ob)(g.formGroup.controls.functionIdentifier?.value))),{outputParamObject:ne}=yield g._functionOutputService.detectFunctionOutput(B,u);if(ne)return;const fe=Tr.D.normalizeName(I);if(g.formGroup.controls.outputParamName?.pristine&&(g.formGroup.controls.outputParamName.setValue(I),g.formGroup.controls.outputParamNormalizedName.setValue(fe)),g.formGroup.controls.functionName?.pristine){const ye=`provide ${I}`,Ne=Tr.D.normalizeName(ye);g.formGroup.controls.functionName.setValue(ye),g.formGroup.controls.functionNormalizedName.setValue(Ne)}})()}_getEvaluationResult(t=this.formGroup.controls.functionImplementation?.value??null){var i=this;return(0,ce.Z)(function*(){const{injector:s,mappedParameters:u}=yield i._parameterService.parameterToInjector(i.inputParams);return Ho.evaluateCustomMethod(void 0,t?.text??[],s,u)})()}_verifyOutputParamNameControl(t){const i=this.formGroup.controls.outputParamName;i&&i[t===En.ReturnValueFound?"enable":"disable"]()}_normalizeFunctionName(t){const i=Tr.D.normalizeName(t);this.formGroup.controls.functionNormalizedName?.setValue(i)}_normalizeOutputParamName(t){const i=Tr.D.normalizeName(t);this.formGroup.controls.outputParamNormalizedName?.setValue(i)}}return r.\u0275fac=function(t){return new(t||r)(c.Y36(w.a),c.Y36(El),c.Y36(cn.gN),c.Y36(ee.yh))},r.\u0275cmp=c.Xpm({type:r,selectors:[["app-embedded-function-implementation"]],inputs:{inputParams:"inputParams"},features:[c._Bn([Ke,El])],decls:24,vars:18,consts:[[1,"body",3,"formGroup"],[1,"control-header"],["appearance","outline",1,"mat-form-field-outline-lightblue-bg","mat-form-field-outline-no-padding-bottom"],["matInput","","type","text","formControlName","functionName"],["matInput","","type","text","formControlName","outputParamName"],["appearance","outline",1,"mat-form-field-outline-lightblue-bg","mat-form-field-outline-no-padding-bottom","template-control"],[3,"outputParamType","outputParamName","interfaceIdentifier"],["formControlName","outputParamInterface"],["class","dropdown-option",3,"value",4,"ngFor","ngForOf"],["formControlName","functionCanFail"],[1,"loading-wrapper"],["diameter","20",4,"ngIf"],["formControlName","functionImplementation",3,"inputParams"],[1,"dropdown-option",3,"value"],["diameter","20"]],template:function(t,i){if(1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),c._uU(4,"method name"),c.qZA(),c._UZ(5,"input",3),c.qZA(),c.TgZ(6,"mat-form-field",2)(7,"mat-label"),c._uU(8),c.ALo(9,"async"),c.qZA(),c._UZ(10,"input",4),c.qZA(),c.TgZ(11,"mat-form-field",5)(12,"mat-label"),c._UZ(13,"app-function-output-preview",6),c.qZA(),c.TgZ(14,"mat-select",7),c.YNc(15,Ev,2,2,"mat-option",8),c.ALo(16,"async"),c.qZA()(),c.TgZ(17,"mat-slide-toggle",9),c._uU(18),c.qZA(),c.TgZ(19,"div",10),c.YNc(20,kv,1,0,"mat-spinner",11),c.ALo(21,"async"),c.qZA()(),c._UZ(22,"app-code-editor",12),c.ALo(23,"async"),c.qZA()),2&t){let s,u,g,I;c.Q6J("formGroup",i.formGroup),c.xp6(8),c.Oqu(c.lcZ(9,9,i.returnValueStatus$)===i.MethodEvaluationStatus.ReturnValueFound?"output param name":"no output param"),c.xp6(5),c.Q6J("outputParamType",null!==(s=null==i.formGroup.controls.outputParamType?null:i.formGroup.controls.outputParamType.value)&&void 0!==s?s:null)("outputParamName",null!==(u=null==i.formGroup.controls.outputParamName?null:i.formGroup.controls.outputParamName.value)&&void 0!==u?u:null)("interfaceIdentifier",null!==(g=null==i.formGroup.controls.outputParamInterface?null:i.formGroup.controls.outputParamInterface.value)&&void 0!==g?g:null),c.xp6(2),c.Q6J("ngForOf",null!==(I=c.lcZ(16,11,i.templates$))&&void 0!==I?I:c.DdM(17,Tv)),c.xp6(3),c.hij(" ",i.functionCanFailControl.value?"can fail":"can not fail"," "),c.xp6(2),c.Q6J("ngIf",c.lcZ(21,13,i.returnValueStatus$)===i.MethodEvaluationStatus.Calculating),c.xp6(2),c.Q6J("inputParams",c.lcZ(23,15,i.injector$))}},dependencies:[P.sg,P.O5,cn.Fj,cn.JJ,cn.JL,Ol.Nt,Ze.KE,Ze.hX,$g.Ou,Gf,Rt.gD,yt.ey,cn.sg,cn.u,gp,Yc,P.Ov],styles:[".body[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background-color:#fff}.body[_ngcontent-%COMP%]   .control-header[_ngcontent-%COMP%]{padding:1rem 3rem .5rem;border-bottom:1px solid #e2e2e2;display:flex;align-items:center}.body[_ngcontent-%COMP%]   .control-header[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{flex:1}.body[_ngcontent-%COMP%]   .control-header[_ngcontent-%COMP%]   .template-control[_ngcontent-%COMP%]{flex:2;max-width:unset}.body[_ngcontent-%COMP%]   .control-header[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{min-width:6rem}.body[_ngcontent-%COMP%]   .control-header[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{min-width:8rem;max-width:12rem}.body[_ngcontent-%COMP%]   .control-header[_ngcontent-%COMP%] > .loading-wrapper[_ngcontent-%COMP%]{flex:0;width:30px}.body[_ngcontent-%COMP%]   .control-header[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:last-child){margin-right:.5rem}"],changeDetection:0}),r})();var Yi=xe(280);const Ma=(0,Fe.X$)("showList",[(0,Fe.eR)("* => *",[(0,Fe.IO)(":enter",[(0,Fe.oB)({opacity:0}),(0,Fe.EY)(50,[(0,Fe.jt)("0.2s",(0,Fe.oB)({opacity:1}))])],{optional:!0})])]),Fl=["searchInput"];function Wl(r,e){if(1&r){const t=c.EpF();c.TgZ(0,"div",19),c.NdJ("click",function(s){c.CHM(t);const u=c.oxw().$implicit,g=c.oxw(2);return c.KtG(g.removeFunction(u,s))}),c._uU(1," remove "),c.qZA()}}const Na=function(r){return{active:r}};function La(r,e){if(1&r){const t=c.EpF();c.TgZ(0,"div",13),c.NdJ("click",function(){const u=c.CHM(t).$implicit,g=c.oxw(2);return c.KtG(g.selectFunction(u))}),c.ALo(1,"async"),c.TgZ(2,"div",14),c._UZ(3,"app-function-preview",15),c.qZA(),c.TgZ(4,"div",16)(5,"div",17),c._uU(6),c.qZA(),c.YNc(7,Wl,2,0,"div",18),c.qZA()()}if(2&r){const t=e.$implicit,i=c.oxw(2);let s;c.Q6J("@showList",null==(s=c.lcZ(1,5,i.functionTemplates$))?null:s.length)("ngClass",c.VKq(7,Na,t.identifier===i.formGroup.controls.functionIdentifier.value)),c.xp6(3),c.Q6J("func",t),c.xp6(3),c.hij(" ",t.identifier===i.formGroup.controls.functionIdentifier.value?"unselect":"select"," "),c.xp6(1),c.Q6J("ngIf",t.customImplementation)}}function lC(r,e){if(1&r&&(c.ynx(0),c.TgZ(1,"div",7),c._uU(2,"Templates"),c.qZA(),c.TgZ(3,"div",11),c.YNc(4,La,8,9,"div",12),c.ALo(5,"async"),c.qZA(),c.BQk()),2&r){const t=c.oxw();c.xp6(4),c.Q6J("ngForOf",c.lcZ(5,1,t.functionTemplates$))}}function cC(r,e){if(1&r){const t=c.EpF();c.TgZ(0,"div",19),c.NdJ("click",function(s){c.CHM(t);const u=c.oxw().$implicit,g=c.oxw(2);return c.KtG(g.removeFunction(u,s))}),c._uU(1," remove "),c.qZA()}}function uC(r,e){if(1&r){const t=c.EpF();c.TgZ(0,"div",13),c.NdJ("click",function(){const u=c.CHM(t).$implicit,g=c.oxw(2);return c.KtG(g.selectFunction(u))}),c.ALo(1,"async"),c.TgZ(2,"div",14),c._UZ(3,"app-function-preview",15),c.qZA(),c.TgZ(4,"div",16)(5,"div",17),c._uU(6),c.qZA(),c.YNc(7,cC,2,0,"div",18),c.qZA()()}if(2&r){const t=e.$implicit,i=c.oxw(2);let s;c.Q6J("@showList",null==(s=c.lcZ(1,5,i.functions$))?null:s.length)("ngClass",c.VKq(7,Na,t.identifier===i.formGroup.controls.functionIdentifier.value)),c.xp6(3),c.Q6J("func",t),c.xp6(3),c.hij(" ",t.identifier===i.formGroup.controls.functionIdentifier.value?"unselect":"select"," "),c.xp6(1),c.Q6J("ngIf",t.customImplementation)}}function qc(r,e){if(1&r&&(c.TgZ(0,"div",11),c.YNc(1,uC,8,9,"div",12),c.ALo(2,"async"),c.qZA()),2&r){const t=c.oxw();c.xp6(1),c.Q6J("ngForOf",c.lcZ(2,1,t.functions$))}}function Px(r,e){if(1&r){const t=c.EpF();c.TgZ(0,"div",20)(1,"div",21),c._uU(2,"please enter a custom output parameter name"),c.qZA(),c.TgZ(3,"input",22),c.NdJ("input",function(s){c.CHM(t);const u=c.oxw();return c.KtG(u.setOutputParamName(s))}),c.qZA()()}if(2&r){const t=c.oxw();let i;c.xp6(3),c.Q6J("value",null!==(i=null==t.formGroup.controls.outputParamName?null:t.formGroup.controls.outputParamName.value)&&void 0!==i?i:"")}}function Rx(r,e){1&r&&(c.TgZ(0,"div",23),c._uU(1," no functions found "),c.qZA())}let $x=(()=>{class r{get formGroup(){return this._controlContainer.control}constructor(t,i,s,u){this._store=t,this._controlContainer=i,this.elementRef=s,this._changeDetectorRef=u,this.filterControl=new cn.NI(""),this._filter$=this.filterControl.valueChanges.pipe((0,Ie.O)(""),(0,U.U)(g=>(g??"").trim().toLowerCase().split(" ").filter(B=>B))),this.searchinputExpanded=!1,this._allFunctions$=this._store.select((0,wt.Bc)()),this.functions$=(0,be.a)([this._allFunctions$,this._filter$]).pipe((0,U.U)(([g,I])=>g.filter(B=>{if(!B)return!1;if(I.length>0){const Ne=B.name.trim().toLowerCase().split(" ");if(I.some(ze=>Ne.every(At=>-1===At.indexOf(ze))))return!1}return 0===(Array.isArray(B.inputTemplates)?B.inputTemplates.filter(Ne=>"dynamic"!==Ne):[]).filter(Ne=>Ne&&"object"==typeof Ne&&!Ne.optional).map(Ne=>Ne.interface).length||Array.isArray(this.inputParams),!0}))),this.functionTemplates$=this.functions$.pipe((0,U.U)(g=>g.filter(I=>!I._isImplementation))),this.customFunctions$=this.functions$.pipe((0,U.U)(g=>g.filter(I=>I._isImplementation&&I.customImplementation))),this.selectedFunction$=(0,Rh.P)(()=>{const g=this.formGroup.controls.functionIdentifier;return g.valueChanges.pipe((0,Ie.O)(g.value),(0,pe.w)(I=>this._store.select((0,wt.ob)(I))))}),this.requiresCustomOutputParamName$=this.selectedFunction$.pipe((0,U.U)(g=>!g?.requireCustomImplementation&&!g?.customImplementation&&"string"==typeof g?.outputTemplate)),this._subscriptions=new It.w0}ngOnDestroy(){this._subscriptions.unsubscribe()}ngAfterViewInit(){this._subscriptions.add((0,ot.H)(200).subscribe(()=>this._scrollToActiveFunction()))}removeFunction(t,i){i&&(i.stopPropagation(),i.preventDefault()),this._store.dispatch((0,Q.wU)(t))}selectFunction(t){var i=this;return(0,ce.Z)(function*(){const s=yield new Nc(i._store).getFunctionFormGroupValue(t,!i.formGroup.controls.outputParamName?.pristine);i.formGroup.patchValue(s),i._changeDetectorRef.markForCheck()})()}toggleSearchInput(t){this.searchinputExpanded="boolean"==typeof t?t:!this.searchinputExpanded,this._searchInput.nativeElement[this.searchinputExpanded?"focus":"blur"]()}setOutputParamName(t){const i=t.target.value,s=Tr.D.normalizeName(i);this.formGroup.patchValue({outputParamName:i,outputParamNormalizedName:s})}_scrollToActiveFunction(){const t=this.elementRef.nativeElement.querySelector(".function-wrapper.active");t&&t.scrollIntoView({behavior:"smooth"})}}return r.\u0275fac=function(t){return new(t||r)(c.Y36(ee.yh),c.Y36(cn.gN),c.Y36(c.SBq),c.Y36(c.sBO))},r.\u0275cmp=c.Xpm({type:r,selectors:[["app-embedded-function-selection"]],viewQuery:function(t,i){if(1&t&&c.Gf(Fl,7,c.SBq),2&t){let s;c.iGM(s=c.CRH())&&(i._searchInput=s.first)}},inputs:{inputParams:"inputParams"},decls:17,vars:14,consts:[[1,"body"],[1,"search-wrapper"],["type","text",1,"search-input",3,"formControl","blur"],["searchInput",""],[3,"click"],[1,"content"],[4,"ngIf"],[1,"section-headline"],["class","grid",4,"ngIf","ngIfElse"],["class","output-name-wrapper",4,"ngIf"],["noFunctions",""],[1,"grid"],["class","function-wrapper",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"function-wrapper",3,"ngClass","click"],[1,"preview"],[3,"func"],[1,"control-wrapper"],[1,"control","accent-2"],["class","control danger",3,"click",4,"ngIf"],[1,"control","danger",3,"click"],[1,"output-name-wrapper"],[1,"label"],["type","text","placeholder","set output param name",3,"value","input"],[1,"no-function-found-hint"]],template:function(t,i){if(1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"input",2,3),c.NdJ("blur",function(){return i.toggleSearchInput(!1)}),c.qZA(),c.TgZ(4,"mat-icon",4),c.NdJ("click",function(){return i.toggleSearchInput()}),c._uU(5,"search"),c.qZA()(),c.TgZ(6,"div",5),c.YNc(7,lC,6,3,"ng-container",6),c.ALo(8,"async"),c.TgZ(9,"div",7),c._uU(10,"All functions"),c.qZA(),c.YNc(11,qc,3,3,"div",8),c.ALo(12,"async"),c.qZA(),c.YNc(13,Px,4,1,"div",9),c.ALo(14,"async"),c.qZA(),c.YNc(15,Rx,2,0,"ng-template",null,10,c.W1O)),2&t){const s=c.MAs(16);let u,g;c.Q6J("@show",void 0),c.xp6(1),c.ekj("expanded",i.searchinputExpanded),c.xp6(1),c.Q6J("formControl",i.filterControl),c.xp6(5),c.Q6J("ngIf",null==(u=c.lcZ(8,8,i.functionTemplates$))?null:u.length),c.xp6(4),c.Q6J("ngIf",null==(g=c.lcZ(12,10,i.functions$))?null:g.length)("ngIfElse",s),c.xp6(2),c.Q6J("ngIf",c.lcZ(14,12,i.requiresCustomOutputParamName$))}},dependencies:[P.mk,P.sg,P.O5,cn.Fj,cn.JJ,St.Hw,cn.oH,us,P.Ov],styles:[".body[_ngcontent-%COMP%]{position:relative;height:100%;overflow:hidden;display:flex;flex-direction:column}.body[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{background-color:#fff;padding:.5rem;position:absolute;top:2px;right:10px;cursor:pointer;display:flex;z-index:1;border-radius:10px;opacity:.5}.body[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:0px;padding:0;margin:0 2px 0 0;border:none}.body[_ngcontent-%COMP%]   .search-wrapper.expanded[_ngcontent-%COMP%]{opacity:1}.body[_ngcontent-%COMP%]   .search-wrapper.expanded[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:200px;padding:5px;margin:0;border:none}.body[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:1rem;overflow-y:scroll;flex:1}.body[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-headline[_ngcontent-%COMP%]{margin:1rem .5rem .5rem;font-weight:100;font-size:1.2rem}.body[_ngcontent-%COMP%]   .output-name-wrapper[_ngcontent-%COMP%]{background-color:#ffffffbf;text-align:center;border-top:1px solid #e9e9e9;display:flex;flex-direction:column}.body[_ngcontent-%COMP%]   .output-name-wrapper[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{box-sizing:border-box;padding:.5rem .5rem .2rem;font-weight:100;-webkit-user-select:none;user-select:none}.body[_ngcontent-%COMP%]   .output-name-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;outline:none;border:none;text-align:center;color:#000;box-sizing:border-box;font-size:1.2rem;line-height:1.2rem;display:block;padding:.5rem;background-color:#eff8ff;margin:0px .5rem .5rem;border-radius:3px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:.6rem}.search-input[_ngcontent-%COMP%]{flex:1;width:auto;transition:width .5s}.function-wrapper[_ngcontent-%COMP%]{padding:1rem;border-radius:3px;background-color:#fff;box-shadow:0 0 4px #8484844d;display:flex;flex-direction:column;transition:.1s ease-in;min-height:10rem;border:3px solid white}.function-wrapper.active[_ngcontent-%COMP%]{transform:scale(1.01);border-color:gold}.preview[_ngcontent-%COMP%]{padding-bottom:.2rem;margin-bottom:.5rem;flex:1}.no-function-found-hint[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-weight:100}.control-wrapper[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:inline-block;margin-right:.5rem}"],data:{animation:[Yi.s,Ma]},changeDetection:0}),r})();const Mx=function(r,e){return{pre:r,main:e}};function Nx(r,e){if(1&r&&(c.TgZ(0,"span",2),c.ALo(1,"async"),c.ALo(2,"async"),c._uU(3),c.qZA()),2&r){const t=e.$implicit,i=e.index,s=c.oxw();c.Q6J("ngClass",c.WLB(6,Mx,c.lcZ(1,2,s.segmentCount$)>i+1,c.lcZ(2,4,s.segmentCount$)<i+1)),c.xp6(3),c.hij(" ",t," ")}}let Lx=(()=>{class r{set path(t){typeof t>"u"||this._pathSegments.next(this.toPathSegments(t))}constructor(){this._pathSegments=new vt.t(1),this.pathSegments$=this._pathSegments.asObservable(),this.segmentCount$=this.pathSegments$.pipe((0,U.U)(t=>t.length))}toPathSegments(t){return"string"==typeof t?t.split("."):[]}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=c.Xpm({type:r,selectors:[["app-param-member-path-preview"]],inputs:{path:"path"},decls:3,vars:3,consts:[[1,"body"],["class","segment",3,"ngClass",4,"ngFor","ngForOf"],[1,"segment",3,"ngClass"]],template:function(t,i){1&t&&(c.TgZ(0,"div",0),c.YNc(1,Nx,4,9,"span",1),c.ALo(2,"async"),c.qZA()),2&t&&(c.xp6(1),c.Q6J("ngForOf",c.lcZ(2,1,i.pathSegments$)))},dependencies:[P.mk,P.sg,P.Ov],styles:[".segment[_ngcontent-%COMP%]{overflow:hidden;display:inline-block;vertical-align:bottom;font-size:.8rem;text-overflow:ellipsis;padding:.25rem .5rem;background-color:#f1f1f1;border-radius:2px;margin-right:.25rem;line-height:.8rem}.segment.pre[_ngcontent-%COMP%]{max-width:40px}.segment.main[_ngcontent-%COMP%]{background-color:#4646a5;color:#fff}"]}),r})(),Zw=(()=>{class r{constructor(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=c.Xpm({type:r,selectors:[["app-param-member-preview"]],inputs:{paramMember:"paramMember"},decls:5,vars:2,consts:[[1,"body"],[1,"navigation-path-wrapper"],[3,"path"],[1,"type"]],template:function(t,i){1&t&&(c.TgZ(0,"div",0)(1,"div",1),c._UZ(2,"app-param-member-path-preview",2),c.qZA(),c.TgZ(3,"div",3),c._uU(4),c.qZA()()),2&t&&(c.xp6(2),c.Q6J("path",i.paramMember.navigationPath),c.xp6(2),c.hij(" ",i.paramMember.type," "))},dependencies:[Lx],styles:[".body[_ngcontent-%COMP%]{padding:.5rem}.navigation-path-wrapper[_ngcontent-%COMP%]{margin-bottom:.1rem}.type[_ngcontent-%COMP%]{font-size:.8rem;color:#5c5c5c;font-weight:100;margin:0rem .25rem}"]}),r})();const Bx=["rowTemplate"];function Dx(r,e){1&r&&c.Hsn(0,0,["*ngTemplateOutlet","wrapper.rowTemplate"])}function Fx(r,e){if(1&r&&(c.ynx(0),c._UZ(1,"app-embedded-input-output-mapping-table-row",9,10),c.YNc(3,Dx,1,0,"ng-content",11),c.BQk()),2&r){const t=e.$implicit,i=c.MAs(2),s=c.oxw(3);c.xp6(1),c.Q6J("def",t)("level",s.level+1),c.xp6(2),c.Q6J("ngTemplateOutlet",i.rowTemplate)}}function Wx(r,e){if(1&r&&(c.ynx(0),c.YNc(1,Fx,4,3,"ng-container",8),c.ALo(2,"async"),c.BQk()),2&r){const t=c.oxw(2);c.xp6(1),c.Q6J("ngForOf",c.lcZ(2,1,t.typeDef$))}}const Gx=function(r,e){return{object:r,array:e}},jx=function(r){return{"padding-left":r}};function Zx(r,e){if(1&r){const t=c.EpF();c.TgZ(0,"tr",3)(1,"td",4),c.NdJ("menuOpened",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.menuOpened())}),c._uU(2," click to select "),c.qZA(),c.TgZ(3,"td",5),c._uU(4),c.ALo(5,"async"),c.ALo(6,"interface"),c.qZA(),c.TgZ(7,"td",6),c._uU(8),c.qZA()(),c.YNc(9,Wx,3,3,"ng-container",7)}if(2&r){const t=c.oxw(),i=c.MAs(3);c.Q6J("ngClass",c.WLB(11,Gx,"object"===t.def.type,"array"===t.def.type)),c.xp6(1),c.Q6J("matMenuTriggerFor",i),c.xp6(2),c.Q6J("ngStyle",c.VKq(14,jx,"calc(.5rem + (.5rem * "+t.level+"))")),c.xp6(1),c.AsE(" ",t.def.name," (type: ",t.isNumber(t.def.interface)?c.lcZ(5,7,c.lcZ(6,9,t.def.interface)):t.def.type,") "),c.xp6(4),c.Oqu("object"===t.def.type||"array"===t.def.type?"-":t.def.defaultValue),c.xp6(1),c.Q6J("ngIf","object"===t.def.type||"array"===t.def.type)}}function Vx(r,e){if(1&r&&(c.TgZ(0,"div",12),c._UZ(1,"app-param-member-preview",13),c.qZA()),2&r){const t=e.$implicit;c.xp6(1),c.Q6J("paramMember",t)}}const Qx=["*"];let Hx=(()=>{class r{constructor(t){this._store=t,this.level=0,this._typeDef=new oe.X([]),this.typeDef$=this._typeDef.asObservable(),this._availableTypes=new oe.X([]),this.availableTypes$=this._availableTypes.asObservable(),this._sub=null,this._subscriptions=[],this.isNumber=i=>"number"==typeof i}menuOpened(){this._setAvailableTypes()}ngOnChanges(t){(t.def||t.inputParams)&&this._setTypeDef()}ngOnDestroy(){this._sub&&(this._sub.unsubscribe(),this._sub=null);for(let t of this._subscriptions)t.unsubscribe(),this._subscriptions=[]}ngAfterViewInit(){this._setTypeDef()}_setAvailableTypes(){this._availableTypes.next([{navigationPath:"exemplarySolution",type:"Solution template"},{navigationPath:"exemplarySolution.container",type:"Container template"}])}_setTypeDef(){this.def&&("number"==typeof this.def.interface?(this._sub&&(this._sub.unsubscribe(),this._sub=null),this._sub=this._store.select((0,Wt.Dp)(this.def.interface)).subscribe(t=>{!t||!Array.isArray(t.typeDef)||this._typeDef.next(t.typeDef)})):this._typeDef.next(Array.isArray(this.def.typeDef)?this.def.typeDef:[this.def.typeDef]))}}return r.\u0275fac=function(t){return new(t||r)(c.Y36(ee.yh))},r.\u0275cmp=c.Xpm({type:r,selectors:[["app-embedded-input-output-mapping-table-row"]],viewQuery:function(t,i){if(1&t&&c.Gf(Bx,5),2&t){let s;c.iGM(s=c.CRH())&&(i.rowTemplate=s.first)}},inputs:{level:"level",def:"def",inputParams:"inputParams"},features:[c.TTD],ngContentSelectors:Qx,decls:6,vars:3,consts:[["rowTemplate",""],["menu","matMenu"],["class","param-member-wrapper",4,"ngFor","ngForOf"],[1,"entry-row",3,"ngClass"],[1,"input-value",3,"matMenuTriggerFor","menuOpened"],[1,"output-value",3,"ngStyle"],[1,"exemplary-value"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"def","level"],["wrapper",""],[4,"ngTemplateOutlet"],[1,"param-member-wrapper"],[3,"paramMember"]],template:function(t,i){1&t&&(c.F$t(),c.YNc(0,Zx,10,16,"ng-template",null,0,c.W1O),c.TgZ(2,"mat-menu",null,1),c.YNc(4,Vx,2,1,"div",2),c.ALo(5,"async"),c.qZA()),2&t&&(c.xp6(4),c.Q6J("ngForOf",c.lcZ(5,1,i.availableTypes$)))},dependencies:[P.mk,P.sg,P.O5,P.tP,P.PC,Ct.VK,Ct.p6,r,Zw,P.Ov,Sv],styles:["th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:.4rem .5rem;border-radius:2px;font-size:.7rem}.input-value[_ngcontent-%COMP%]:hover{opacity:.7}.output-value[_ngcontent-%COMP%]{min-width:min(10rem,40vw)}.exemplary-value[_ngcontent-%COMP%]{max-width:10rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center;opacity:.6;font-weight:500}tr[_ngcontent-%COMP%]:nth-child(4n+2){background-color:#f7f7f7}.entry-row.object[_ngcontent-%COMP%]{background-color:#e6f0ff}.entry-row.array[_ngcontent-%COMP%]{background-color:#ffece0}.input-value[_ngcontent-%COMP%]{cursor:pointer;width:100%}.entry-row[_ngcontent-%COMP%]:nth-child(2n+2)   .input-value[_ngcontent-%COMP%]{background-color:#d8ffd970}.entry-row[_ngcontent-%COMP%]:nth-child(4n+2)   .input-value[_ngcontent-%COMP%]{background-color:#e6ffe79d}.param-member-wrapper[_ngcontent-%COMP%]{cursor:pointer}.param-member-wrapper[_ngcontent-%COMP%]:hover{opacity:.8}.param-member-wrapper[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid rgb(235,235,235)}"]}),r})();function zx(r,e){1&r&&c.Hsn(0,0,["*ngTemplateOutlet","wrapper.rowTemplate"])}function Ux(r,e){if(1&r&&(c.ynx(0),c._UZ(1,"app-embedded-input-output-mapping-table-row",6,7),c.YNc(3,zx,1,0,"ng-content",8),c.BQk()),2&r){const t=e.$implicit,i=c.MAs(2),s=c.oxw();c.xp6(1),c.Q6J("def",t)("inputParams",s.inputParams),c.xp6(2),c.Q6J("ngTemplateOutlet",i.rowTemplate)}}function Xx(r,e){if(1&r&&(c.TgZ(0,"div"),c._UZ(1,"app-param-member-preview",9),c.qZA()),2&r){const t=e.$implicit;c.xp6(1),c.Q6J("paramMember",t)}}const Kx=["*"],qx=new Map([[$e.ConfigureErrorGatewayEntranceConnection,{type:Rg,provideInputParams:(r,e)=>{r.gateway=e.source}}],[$e.ConfigureFunctionImplementation,{type:Xo,provideInputParams:(r,e)=>{r.inputParams=v.getAvailableInputParams(e)}}],[$e.ConfigureFunctionSelection,{type:$x,provideInputParams:(r,e)=>{r.inputParams=v.getAvailableInputParams(e)}}],[$e.ConfigureInputOutputMapping,{type:(()=>{class r{constructor(t){this._store=t,this.formGroup=new cn.cw({functionIdentifier:new cn.NI(null),outputParamValue:new cn.NI(null)}),this.outputParamName$=this._store.select((0,wt.ob)(()=>this.formGroup.controls.functionIdentifier.value)).pipe((0,ue.h)(i=>!!i),(0,pe.w)(i=>"number"==typeof i.outputTemplate?this._store.select((0,Wt.Dp)(i.outputTemplate)).pipe((0,U.U)(s=>s?.name)):(0,Pi.of)(`param ${i.output}`))),this._availableTypes=new oe.X([]),this.availableTypes$=this._availableTypes.asObservable(),this._params=new vt.t(1),this.params$=this._params.asObservable(),this._subscriptions=new It.w0}menuOpened(){this._setAvailableTypes()}ngOnDestroy(){this._subscriptions.unsubscribe()}ngOnInit(){this._subscriptions.add(this.formGroup.controls.outputParamValue.valueChanges.subscribe(t=>{this._params.next(t?Array.isArray(t)?t:[t]:[])})),this._params.next(this.formGroup.controls.outputParamValue.value?Array.isArray(this.formGroup.controls.outputParamValue.value)?this.formGroup.controls.outputParamValue.value:[this.formGroup.controls.outputParamValue.value]:[])}_setAvailableTypes(){this._availableTypes.next([{navigationPath:"exemplarySolution",type:"solution (template)"},{navigationPath:"exemplarySolution.container",type:"container (template)"}])}}return r.\u0275fac=function(t){return new(t||r)(c.Y36(ee.yh))},r.\u0275cmp=c.Xpm({type:r,selectors:[["app-embedded-input-output-mapping"]],inputs:{inputParams:"inputParams"},ngContentSelectors:Kx,decls:21,vars:10,consts:[[1,"body"],[1,"input-column"],["rowspan","2"],[1,"input-value",3,"matMenuTriggerFor","menuOpened"],[4,"ngFor","ngForOf"],["menu","matMenu"],[3,"def","inputParams"],["wrapper",""],[4,"ngTemplateOutlet"],[3,"paramMember"]],template:function(t,i){if(1&t&&(c.F$t(),c.TgZ(0,"div",0)(1,"table")(2,"thead")(3,"tr")(4,"th",1),c._uU(5,"input value"),c.qZA(),c.TgZ(6,"th",2),c._uU(7),c.ALo(8,"async"),c.qZA(),c.TgZ(9,"th",2),c._uU(10,"exemplary value"),c.qZA()(),c.TgZ(11,"tr")(12,"td",3),c.NdJ("menuOpened",function(){return i.menuOpened()}),c._uU(13," click to select "),c.qZA()()(),c.TgZ(14,"tbody"),c.YNc(15,Ux,4,3,"ng-container",4),c.ALo(16,"async"),c.qZA()()(),c.TgZ(17,"mat-menu",null,5),c.YNc(19,Xx,2,1,"div",4),c.ALo(20,"async"),c.qZA()),2&t){const s=c.MAs(18);c.xp6(7),c.hij("map to output (",c.lcZ(8,4,i.outputParamName$),")"),c.xp6(5),c.Q6J("matMenuTriggerFor",s),c.xp6(3),c.Q6J("ngForOf",c.lcZ(16,6,i.params$)),c.xp6(4),c.Q6J("ngForOf",c.lcZ(20,8,i.availableTypes$))}},dependencies:[P.sg,P.tP,Ct.VK,Ct.p6,Hx,Zw,P.Ov],styles:["table[_ngcontent-%COMP%]{width:100%}th[_ngcontent-%COMP%]{padding:.5rem}th.input-column[_ngcontent-%COMP%]{text-align:left}.input-value[_ngcontent-%COMP%]{padding:.4rem .5rem;border-radius:2px;font-size:.7rem;cursor:pointer;width:100%}tr[_ngcontent-%COMP%]:nth-child(2n+2)   .input-value[_ngcontent-%COMP%]{background-color:#d8ffd970}tr[_ngcontent-%COMP%]:nth-child(4n+2)   .input-value[_ngcontent-%COMP%]{background-color:#e6ffe79d}"]}),r})(),provideInputParams:(r,e)=>{r.inputParams=v.getAvailableInputParams(e)}}]]),Jx=r=>e=>"number"!=typeof e.controls.functionIdentifier?.value&&r?{noFunctionSelected:!0}:null,eA=r=>function(){var e=(0,ce.Z)(function*(t){const i=t,s=yield(0,x.g)(r.select((0,T.ob)(i.controls.functionIdentifier?.value)));return!s||!s.requireCustomImplementation||i.controls.functionImplementation?.value&&(i.controls.functionImplementation?.value?.text??[]).join("")!==Rf.join("")?null:{implementationExistsWhenRequiredValidator:!0}});return function(t){return e.apply(this,arguments)}}(),tA=(r,e)=>function(){var t=(0,ce.Z)(function*(i){const s=new Lc(r),u=i.value,g=yield(0,x.g)(r.select((0,T.ob)(u.functionIdentifier)));if(!g)return null;const I=yield e.getEvaluationResult(u.functionImplementation??null),{hasOutput:B,outputParamIdentifier:ne}=yield s.detectFunctionOutput(g,I);return B&&!u.outputParamName?{outputParamNameRequired:!0}:(yield(0,x.g)(r.select((0,T.xE)()))).some(Ne=>Ne.name===u.outputParamName&&Ne.identifier!==ne)?{duplicateParamExisting:!0}:null});return function(i){return t.apply(this,arguments)}}();let nA=(()=>{class r{constructor(){this.config={[$e.ConfigureErrorGatewayEntranceConnection]:"error input: event type",[$e.ConfigureFunctionSelection]:"select function",[$e.ConfigureFunctionImplementation]:"implementation",[$e.ConfigureFunctionOutput]:"output structure",[$e.ConfigureFunctionInput]:"select input",[$e.ConfigureInputOutputMapping]:"data mapping",[$e.ConfigureStaticOutput]:"static output"}}transform(t){return this.config[t]}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275pipe=c.Yjl({name:"taskCreationStep",type:r,pure:!0}),r})();const iA=["dynamicInner"];function rA(r,e){if(1&r&&(c._UZ(0,"mat-tab",17),c.ALo(1,"taskCreationStep"),c.ALo(2,"async")),2&r){const t=e.$implicit;let i;c.Q6J("label",c.lcZ(1,2,t.taskCreationStep))("disabled",null!==(i=c.lcZ(2,4,t.disabled$))&&void 0!==i&&i)}}function oA(r,e){1&r&&(c.TgZ(0,"li"),c._uU(1,"no function selected"),c.qZA())}function sA(r,e){1&r&&(c.TgZ(0,"li"),c._uU(1,"please provide an implementation"),c.qZA())}function aA(r,e){1&r&&(c.TgZ(0,"li"),c._uU(1,"output param name required"),c.qZA())}function lA(r,e){1&r&&(c.TgZ(0,"li"),c._uU(1,"output param name already used"),c.qZA())}function cA(r,e){if(1&r&&(c.TgZ(0,"ul",18),c.YNc(1,oA,2,0,"li",19),c.YNc(2,sA,2,0,"li",19),c.YNc(3,aA,2,0,"li",19),c.YNc(4,lA,2,0,"li",19),c.qZA()),2&r){const t=c.oxw();c.xp6(1),c.Q6J("ngIf",null==t.formGroup.errors?null:t.formGroup.errors.noFunctionSelected),c.xp6(1),c.Q6J("ngIf",null==t.formGroup.errors?null:t.formGroup.errors.implementationExistsWhenRequiredValidator),c.xp6(1),c.Q6J("ngIf",null==t.formGroup.errors?null:t.formGroup.errors.outputParamNameRequired),c.xp6(1),c.Q6J("ngIf",null==t.formGroup.errors?null:t.formGroup.errors.duplicateParamExisting)}}function uA(r,e){1&r&&(c.TgZ(0,"div",20),c._uU(1," Help "),c.qZA())}function hA(r,e){if(1&r){const t=c.EpF();c.TgZ(0,"div",21),c.NdJ("click",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.previousStep())}),c._uU(1," Previous "),c.qZA()}}function dA(r,e){if(1&r){const t=c.EpF();c.TgZ(0,"div",21),c.NdJ("click",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.nextStep())}),c._uU(1," Next "),c.qZA()}}function fA(r,e){1&r&&(c.TgZ(0,"div",22),c._UZ(1,"mat-spinner",23),c.qZA()),2&r&&(c.Q6J("@show",void 0),c.xp6(1),c.Q6J("diameter",60))}const pA=function(r){return{disabled:r}};let mA=(()=>{class r{constructor(t,i,s,u,g){var I=this;this.config=t,this.data=i,this._parameterService=s,this._ref=u,this._store=g,this.formGroup=new cn.cw({entranceGatewayType:new cn.NI(this.data.taskCreationFormGroupValue.entranceGatewayType),functionCanFail:new cn.NI(this.data.taskCreationFormGroupValue.functionCanFail),functionIdentifier:new cn.NI(this.data.taskCreationFormGroupValue.functionIdentifier),functionImplementation:new cn.NI(this.data.taskCreationFormGroupValue.functionImplementation),functionName:new cn.NI(this.data.taskCreationFormGroupValue.functionName),functionNormalizedName:new cn.NI(this.data.taskCreationFormGroupValue.functionNormalizedName),outputParamInterface:new cn.NI(this.data.taskCreationFormGroupValue.outputParamInterface),outputParamName:new cn.NI(this.data.taskCreationFormGroupValue.outputParamName),outputParamNormalizedName:new cn.NI(this.data.taskCreationFormGroupValue.outputParamNormalizedName),outputParamType:new cn.NI(this.data.taskCreationFormGroupValue.outputParamType),outputParamValue:new cn.NI(this.data.taskCreationFormGroupValue.outputParamValue)},{asyncValidators:[tA(this._store,this),eA(this._store)],validators:[Jx(!!this.data?.taskCreationPayload?.configureActivity)]}),this.customEvaluationResult$=(0,Pg.z)(this.formGroup.controls.functionImplementation.valueChanges.pipe((0,Eg.q)(1)),this.formGroup.controls.functionImplementation.valueChanges.pipe((0,Ae.b)(1e3))).pipe((0,pe.w)(function(){var B=(0,ce.Z)(function*(ne){return yield I.getEvaluationResult(ne)});return function(ne){return B.apply(this,arguments)}}()),(0,Bf.B)()),this.unableToDetermineOutputParam$=this.customEvaluationResult$.pipe((0,U.U)(B=>!(!B||B.status!==En.ReturnValueFound||B.type)),(0,Ie.O)(!1)),this.currentStepIndex=(0,c.tdS)(0),this.selectedFunction$=this.formGroup.controls.functionIdentifier.valueChanges.pipe((0,Ie.O)(this.formGroup.controls.functionIdentifier.value),(0,pe.w)(B=>this._store.select((0,T.ob)(B)))),this.hasCustomImplementation$=this.selectedFunction$.pipe((0,U.U)(B=>B?.requireCustomImplementation??!1),(0,xa.x)()),this.hasDynamicInputParameters$=this.selectedFunction$.pipe((0,U.U)(B=>"dynamic"===B?.inputTemplates&&!(B.requireCustomImplementation||B.customImplementation)),(0,xa.x)()),this.hasDynamicOutputParameters$=this.selectedFunction$.pipe((0,U.U)(B=>"dynamic"===B?.outputTemplate),(0,xa.x)()),this.hasDataMapping$=this.selectedFunction$.pipe((0,U.U)(B=>B?.requireDataMapping??!1),(0,xa.x)()),this.hasStaticOutputDefinition$=this.selectedFunction$.pipe((0,U.U)(B=>B?.requireStaticOutputDefinition??!1),(0,xa.x)()),this.steps$=(0,be.a)([this.hasCustomImplementation$,this.hasDynamicInputParameters$,this.hasDataMapping$,this.hasStaticOutputDefinition$]).pipe((0,U.U)(([B,ne,fe,ye])=>this._getSteps([ne,B,fe,ye]))),this.currentStep$=(0,be.a)([this.steps$,(0,Lf.Dx)(this.currentStepIndex)]).pipe((0,U.U)(([B,ne])=>B[ne]),(0,ue.h)(B=>!!B),(0,xa.x)((B,ne)=>B.taskCreationStep===ne.taskCreationStep)),this.hasPreviousStep$=(0,Lf.Dx)(this.currentStepIndex).pipe((0,U.U)(B=>B>0)),this.hasNextStep$=(0,be.a)([this.steps$,(0,Lf.Dx)(this.currentStepIndex)]).pipe((0,U.U)(([B,ne])=>ne<B.length-1)),this.canAnalyzeCustomImplementation$=this.currentStep$.pipe((0,ue.h)(B=>!!B),(0,U.U)(B=>B.taskCreationStep===$e.ConfigureFunctionImplementation||B.taskCreationStep===$e.ConfigureFunctionOutput)),this.stepToNextStep$=this.currentStep$.pipe((0,pe.w)(B=>B?.autoProceed$??Sl.C)),this.formInvalid$=this.formGroup.statusChanges.pipe((0,Ie.O)(this.formGroup.status),(0,U.U)(B=>"INVALID"===B)),this.isBlocked=!1,this._subscription=new It.w0,this.abort=()=>this._ref.close({taskCreationPayload:this.data.taskCreationPayload}),this.finish=()=>this._onClose(),this.nextStep=()=>this.setStep(this.currentStepIndex()+1),this.previousStep=()=>this.setStep(this.currentStepIndex()-1),this.ngOnDestroy=()=>this._subscription.unsubscribe(),this.setStep=B=>this.currentStepIndex.set(B),this.TaskCreationStep=$e}ngOnInit(){this.setStep(0),this._subscription.add(this.currentStep$.subscribe(t=>this._renderStep(t))),this._subscription.add(this.stepToNextStep$.subscribe(t=>this.setStep(t+1)))}getEvaluationResult(t=this.formGroup.controls.functionImplementation?.value??null){var i=this;return(0,ce.Z)(function*(){const s=v.getAvailableInputParams(i.data.taskCreationPayload.configureActivity),{injector:u,mappedParameters:g}=yield i._parameterService.parameterToInjector(s);return Ho.evaluateCustomMethod(void 0,t?.text??[],u,g)})()}_onClose(){var t=this;return(0,ce.Z)(function*(){t.isBlocked=!0,t._ref.disableClose=!0;const i=v.getAvailableInputParams(t.data.taskCreationPayload.configureActivity),{injector:s,mappedParameters:u}=yield t._parameterService.parameterToInjector(i),g=t.data.taskCreationPayload,I=yield(0,x.g)(t._store.select((0,T.ob)(t.formGroup.value.functionIdentifier))),ne=Ho.evaluateCustomMethod(void 0,I?.requireCustomImplementation?t.formGroup.value.functionImplementation?.text??[]:I?.implementation,s,u);t.isBlocked=!1,t._ref.disableClose=!1,t._ref.close({formValue:t._formValue,initialFormValue:t.data.taskCreationFormGroupValue,selectedFunction:I,taskCreationPayload:g,methodEvaluation:ne})})()}get _formValue(){return this.formGroup.getRawValue()}_renderStep(t){this.dynamicInner.clear();const i=qx.get(t.taskCreationStep);if(!i)throw`no config found for step ${t.taskCreationStep}`;const s=this.dynamicInner.createComponent(i.type);"function"==typeof i.provideInputParams&&i.provideInputParams(s.instance,t.element)}_getSteps([t,i,s,u]){const g=[];if(this.data){const I=this.data?.taskCreationPayload?.configureIncomingErrorGatewaySequenceFlow;I&&g.push({taskCreationStep:$e.ConfigureErrorGatewayEntranceConnection,element:I,autoProceed$:this.formGroup.controls.entranceGatewayType?.valueChanges.pipe((0,pe.w)(()=>this.steps$),(0,ue.h)(ne=>ne.length>1),(0,U.U)(ne=>ne.findIndex(ye=>ye.taskCreationStep===$e.ConfigureErrorGatewayEntranceConnection)))});const B=this.data?.taskCreationPayload?.configureActivity;B&&(g.push({taskCreationStep:$e.ConfigureFunctionSelection,element:B}),t&&g.push({taskCreationStep:$e.ConfigureFunctionInput,element:B}),i&&g.push({taskCreationStep:$e.ConfigureFunctionImplementation,element:B}),s&&g.push({taskCreationStep:$e.ConfigureInputOutputMapping,element:B}),u)&&g.push({taskCreationStep:$e.ConfigureStaticOutput,element:B})}return g}}return r.\u0275fac=function(t){return new(t||r)(c.Y36(w.a),c.Y36(ct.WI),c.Y36(El),c.Y36(ct.so),c.Y36(ee.yh))},r.\u0275cmp=c.Xpm({type:r,selectors:[["app-task-creation"]],viewQuery:function(t,i){if(1&t&&c.Gf(iA,7,c.s_b),2&t){let s;c.iGM(s=c.CRH())&&(i.dynamicInner=s.first)}},features:[c._Bn([El])],decls:29,vars:23,consts:[[1,"body"],[1,"dialog-navbar"],[1,"icon"],[1,"text"],["mat-icon-button","","color","warn",3,"click"],[1,"dialog-body"],["mat-align-tabs","start",3,"selectedIndex","selectedIndexChange"],[3,"label","disabled",4,"ngFor","ngForOf"],["class","custom-validation-error-list",4,"ngIf"],[1,"content-wrapper",3,"formGroup"],["dynamicInner",""],[1,"footer"],[1,"spacer"],["class","control secondary",4,"ngIf"],["class","control secondary",3,"click",4,"ngIf"],[1,"control","primary",3,"ngClass","click"],["class","overlay",4,"ngIf"],[3,"label","disabled"],[1,"custom-validation-error-list"],[4,"ngIf"],[1,"control","secondary"],[1,"control","secondary",3,"click"],[1,"overlay"],[3,"diameter"]],template:function(t,i){if(1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"mat-icon",2),c._uU(3,"account_tree"),c.qZA(),c.TgZ(4,"div",3),c._uU(5," Modify task "),c.qZA(),c.TgZ(6,"button",4),c.NdJ("click",function(){return i.abort()}),c.TgZ(7,"mat-icon"),c._uU(8,"clear"),c.qZA()()(),c.TgZ(9,"div",5)(10,"mat-tab-group",6),c.NdJ("selectedIndexChange",function(u){return i.setStep(u)}),c.YNc(11,rA,3,6,"mat-tab",7),c.ALo(12,"async"),c.qZA(),c.YNc(13,cA,5,4,"ul",8),c.TgZ(14,"div",9),c._UZ(15,"div",null,10),c.qZA()(),c.TgZ(17,"div",11),c._UZ(18,"div",12),c.YNc(19,uA,2,0,"div",13),c.ALo(20,"async"),c.YNc(21,hA,2,0,"div",14),c.ALo(22,"async"),c.YNc(23,dA,2,0,"div",14),c.ALo(24,"async"),c.TgZ(25,"div",15),c.NdJ("click",function(){return i.finish()}),c.ALo(26,"async"),c._uU(27," Finish "),c.qZA()(),c.YNc(28,fA,2,2,"div",16),c.qZA()),2&t){let s;c.ekj("blocked",i.isBlocked),c.xp6(10),c.Q6J("selectedIndex",i.currentStepIndex()),c.xp6(1),c.Q6J("ngForOf",c.lcZ(12,11,i.steps$)),c.xp6(2),c.Q6J("ngIf",!!i.formGroup.errors),c.xp6(1),c.Q6J("formGroup",i.formGroup),c.xp6(5),c.Q6J("ngIf",(null==(s=c.lcZ(20,13,i.currentStep$))?null:s.taskCreationStep)===i.TaskCreationStep.ConfigureFunctionImplementation),c.xp6(2),c.Q6J("ngIf",c.lcZ(22,15,i.hasPreviousStep$)),c.xp6(2),c.Q6J("ngIf",c.lcZ(24,17,i.hasNextStep$)),c.xp6(2),c.Q6J("ngClass",c.VKq(21,pA,c.lcZ(26,19,i.formInvalid$))),c.xp6(3),c.Q6J("ngIf",i.isBlocked)}},dependencies:[P.mk,P.sg,P.O5,cn.JL,Tt.RK,St.Hw,$g.Ou,Il.uX,Il.SP,cn.sg,P.Ov,nA],styles:["@keyframes _ngcontent-%COMP%_leaves{0%{transform:scale(.8);-webkit-transform:scale(.8)}to{transform:scale(1);-webkit-transform:scale(1)}}.body[_ngcontent-%COMP%]{width:min(80vw,1200px);height:80vh;overflow:hidden;box-sizing:border-box;display:flex;flex-direction:column}.body.blocked[_ngcontent-%COMP%]{pointer-events:none}.body[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;display:flex;align-items:center;justify-content:center;background-color:#fffffff2;z-index:1}.body[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]{overflow:hidden;display:flex;flex-direction:column}.body[_ngcontent-%COMP%]   .dialog-body[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{width:100%;box-sizing:border-box;flex:1;overflow-y:auto;background-color:#f8f8f8}.body[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{height:40px;background-color:#fafafa;display:flex;align-items:center;padding:0px .5rem;border-top:1px solid gainsboro}.body[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{margin-left:.1rem}.body[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .control.primary[_ngcontent-%COMP%]{padding:.3rem .5rem;cursor:pointer;color:#fff;border-radius:2px;transition:all .3s;animation:_ngcontent-%COMP%_leaves .15s ease-out;width:5rem;text-align:center;font-weight:200!important;background:linear-gradient(135deg,#0078d4,rgba(0,120,212,.7411764706),#0078d4)}.body[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .control.primary[_ngcontent-%COMP%]:hover{opacity:.8}.body[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .control.secondary[_ngcontent-%COMP%]{padding:.3rem .5rem;cursor:pointer;color:#fff;border-radius:2px;transition:all .3s;animation:_ngcontent-%COMP%_leaves .15s ease-out;width:5rem;text-align:center;font-weight:200!important;background:linear-gradient(135deg,#444444,rgba(68,68,68,.7803921569),#444444)}.body[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .control.secondary[_ngcontent-%COMP%]:hover{opacity:.8}.body[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .control.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.body[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .status-message[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:.8rem;font-family:monospace;max-width:400px}@media only screen and (max-width: 800px){  .mat-mdc-dialog-container .mdc-dialog__surface{border-radius:unset!important}.body[_ngcontent-%COMP%]{width:100vw;height:100vh}  .cdk-global-scrollblock{overflow:unset}}"],data:{animation:[Yi.s]},changeDetection:0}),r})();var Vw=xe(3681);let gA=(()=>{class r{constructor(t,i,s){this._dialog=t,this.funcs=i,this._injector=s}configTaskCreation(t){const i=this._dialog.open(mA,{injector:this._injector,panelClass:"no-padding-dialog",data:t,disableClose:!0,maxWidth:"unset"});return document.getElementsByClassName("cdk-overlay-container")[0]?.classList.add("z-index-1002"),i.afterClosed().pipe((0,Ib.x)(()=>{document.getElementsByClassName("cdk-overlay-container")[0]?.classList.remove("z-index-1002")}))}editParam(t,i){return this._dialog.open(Ao,{data:{paramCode:t,element:i},panelClass:"no-padding-dialog",disableClose:!0}).afterClosed()}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(ct.uw),c.LFG(Vw.t),c.LFG(c.zs3))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Qw=(()=>{class r{constructor(t,i,s,u){var g=this;this._dialogService=t,this._bpmnJsService=i,this._store=s,this._confirmationService=u,this.taskEditingDialogResultReceived$=this._bpmnJsService.bufferedTaskEditingEvents$.pipe((0,Ut.b)(()=>document.activeElement?.blur()),(0,pe.w)(function(){var I=(0,ce.Z)(function*(B){const ne=B.find(je=>je.taskCreationStep===$e.ConfigureFunctionSelection),fe=v.getSLPBExtension(ne?.element?.businessObject,"ActivityExtension",je=>je.activityFunctionId)??null,ye=yield(0,x.g)(g._store.select((0,T.ob)(fe)));return{events:B,formValue:yield new Nc(g._store).getFunctionFormGroupValue(ye,!1),functionSelectionConfig:ne,selectedFunction:ye}});return function(B){return I.apply(this,arguments)}}()),(0,pe.w)(({events:I,formValue:B})=>{const ne={configureActivity:I.find(fe=>fe.taskCreationStep===$e.ConfigureFunctionSelection)?.element??null,configureIncomingErrorGatewaySequenceFlow:I.find(fe=>fe.taskCreationStep===$e.ConfigureErrorGatewayEntranceConnection)?.element??void 0};return this._dialogService.configTaskCreation({taskCreationFormGroupValue:B,taskCreationPayload:ne})}))}tryDeleteErrorGateway(t){var i=this;return(0,ce.Z)(function*(){const u=t.incoming.filter(ne=>ne.type===y_SequenceFlow&&ne.source.type===y_Task).map(ne=>ne.source).map(ne=>v.getSLPBExtension(ne.businessObject,"ActivityExtension",fe=>fe.activityFunctionId)),g=yield(0,x.g)(i._store.select((0,T.Bc)(u)));if(!(yield i._confirmationService.requestConfirmation((1===g.length?"One method":g.length+" methods")+" will be changed",`By deleting that gateway, you will remove the 'canFail'-flag from the methods listed below.<ul>${g.map(ne=>"<li>"+ne.normalizedName+"</li>")}</ul><b>Do you want to proceed?</b>`)))return;const B=(0,Q.aP)({funcs:u,canFail:!1});i._store.dispatch(B),i._bpmnJsService.modelingModule.removeElements([t]),i._bpmnJsService.saveCurrentBpmnModel()})()}tryDeleteFunction(t){var i=this;return(0,ce.Z)(function*(){const s=v.getSLPBExtension(t.businessObject,"ActivityExtension",I=>I.activityFunctionId),u=yield(0,x.g)(i._store.select((0,T.ob)(s)));(!u?.customImplementation||(yield i._confirmationService.requestConfirmation(`${u.normalizedName} will be deleted`,`By deleting that activity, you will remove the method '${u.normalizedName}', all resulting parameters and all following gateways. That may break your pipeline!</br><b>Do you want to proceed?</b>`)))&&(i._bpmnJsService.removeOutgoingDataObjectReferences(t),i._bpmnJsService.removeOutgoingGateways(t),i._bpmnJsService.modelingModule.removeElements([t]),u?.customImplementation&&i._store.dispatch((0,Q.wU)(u)),i._bpmnJsService.saveCurrentBpmnModel())})()}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(gA),c.LFG(pt),c.LFG(ee.yh),c.LFG(ft))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})();var vA=xe(4078);const Hh=new c.OlP("C2M_INJECTION_TOKEN");let yA=(()=>{class r{constructor(t,i,s,u){this._bpmnJs=t,this._bpmnJsService=i,this._store=s,this._dialog=u}processConfiguration({taskCreationPayload:t,formValue:i},s){var u=this;return(0,ce.Z)(function*(){const g=t?.configureActivity;if(!g)return;if(!i){const ne=v.getActivityFunctionId(g);if("number"!=typeof ne)return void u._bpmnJsService.modelingModule.removeElements([g]);if(!(yield(0,x.g)(u._store.select((0,T.ob)(ne))))){const ye={data:{headline:"function not existing",html:"<p>The function referenced by the activity is not existing. Do you want to remove the activity?</p>"}};(yield(0,x.g)(u._dialog.open(yn,ye).afterClosed()))&&u._bpmnJsService.modelingModule.removeElements([g])}return}const I=yield(0,x.g)(u._store.select((0,T.ob)(s.functionIdentifier)));if(!I)return void u._bpmnJsService.modelingModule.removeElements([g]);v.setActivityFunctionId(u._bpmnJs,g,I.identifier);const B=u._bpmnJsService.elementRegistryModule.filter(ne=>ne.type===y_Task&&v.getSLPBExtension(ne.businessObject,"ActivityExtension",fe=>fe.activityFunctionId)===I?.identifier);for(const ne of B)u._bpmnJsService.modelingModule.updateLabel(ne,I.name)})()}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(ke),c.LFG(pt),c.LFG(ee.yh),c.LFG(ct.uw))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})();var bA=xe(4292),CA=xe(914);let wA=(()=>{class r{constructor(t,i,s){this._bpmnJs=t,this._config=i,this._bpmnJsService=s}processConfiguration({taskCreationPayload:t,taskCreationFormGroupValue:i}){var s=this;return(0,ce.Z)(function*(){const u=s._bpmnJsService.elementRegistryModule.get(t.configureIncomingErrorGatewaySequenceFlow?.id??"");u&&i?.entranceGatewayType&&(v.setSequenceFlowType(s._bpmnJs,u,i.entranceGatewayType),s._applyConnectorDefaultLabels(u,i))})()}_applyConnectorDefaultLabels(t,i){this._bpmnJsService.modelingModule.updateLabel(t,"Success"===i.entranceGatewayType?this._config.errorGatewayConfig.successConnectionName:this._config.errorGatewayConfig.errorConnectionName)}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(ke),c.LFG(w.a),c.LFG(pt))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})(),xA=(()=>{class r{constructor(t){this._bpmnJsService=t}processConfiguration({taskCreationPayload:t,taskCreationFormGroupValue:i}){if(!i)return;const u=t.configureActivity?.outgoing?.find(g=>"bpmn:EndEvent"===g.target.type)?.target;u&&this._bpmnJsService.modelingModule.removeElements([u,...u.incoming])}_appendSequenceFlowEndEvent(t){t.configureActivity&&this._bpmnJsService.modelingModule.appendShape(t.configureActivity,{type:y_EndEvent},{x:t.configureActivity.x+200,y:t.configureActivity.y+40})}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(pt))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})(),AA=(()=>{class r{constructor(t,i){this._config=t,this._bpmnJsService=i}processConfiguration({taskCreationPayload:t,formValue:i}){const s=t.configureActivity;if(!s||!i)return;const u=i.functionCanFail,g=s.outgoing.filter(B=>B.type===y_SequenceFlow&&B.target?.type===y_ExclusiveGateway),I=g.length>0;if(!u||I)!u&&I&&this._bpmnJsService.modelingModule.removeElements([...g,...g.map(B=>B.target),...g.flatMap(B=>B.target.outgoing)]);else{const B=this._disconnectOutgoingElements(s),ne=this._appendGateway(s);this._connectGatewayToElements(ne,B)}}_appendGateway(t){const i=this._bpmnJsService.modelingModule.appendShape(t,{type:y_ExclusiveGateway},{x:t.x+200,y:t.y+40});return this._bpmnJsService.modelingModule.updateLabel(i,this._config.errorGatewayConfig.gatewayName),i}_connectGatewayToElements(t,i){for(const s of i)this._bpmnJsService.modelingModule.connect(t,s)}_disconnectOutgoingElements(t){const i=t.outgoing.filter(u=>u.type===y_SequenceFlow).filter(u=>!!u),s=i.map(u=>u.target);return this._bpmnJsService.modelingModule.removeElements(i),s}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(w.a),c.LFG(pt))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})();const Hw=r=>"object"==typeof r&&"function"==typeof r.then,sw=new c.OlP("C2S_INJECTION_TOKEN");var ko=xe(3964);let OA=(()=>{class r{constructor(t){this.actions$=t}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(ko.eX))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})();var Pv=xe(9769);let IA=(()=>{class r{constructor(t,i){this._config=t,this._actions$=i,this.loadParams$=(0,ko.GW)(()=>this._actions$.pipe((0,ko.l4)(Q.$C),(0,Pv.z)(()=>(0,Pi.of)((0,Q.hD)(this._config??[])))))}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(Vw.t,8),c.LFG(ko.eX))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})(),_A=(()=>{class r{constructor(t,i){this._config=t,this.actions$=i,this.loadIFaces$=(0,ko.GW)(()=>this.actions$.pipe((0,ko.l4)(pn.u9),(0,Pv.z)(()=>(0,Pi.of)((0,pn.nY)(this._config??[])))))}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(bA.c,8),c.LFG(ko.eX))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})(),SA=(()=>{class r{constructor(t,i){this._config=t,this.actions$=i,this.loadParams$=(0,ko.GW)(()=>this.actions$.pipe((0,ko.l4)(Mn.a$),(0,Pv.z)(()=>(0,Pi.of)((0,Mn.qF)(this._config??[])))))}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(CA.q,8),c.LFG(ko.eX))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})();var zw=xe(1473),Uw=xe(301),Xw=xe(2972),Kw=xe(9358),Yw=xe(7688);let EA=(()=>{class r{constructor(t){this._store=t}detectFunction(t){var i=this;return(0,ce.Z)(function*(){let s=!1,u=null;return t&&t._isImplementation?u=t.identifier:(s=!0,u=yield(0,x.g)(i._store.select((0,T.VS)()))),{createNewFunction:s,functionIdentifier:u}})()}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(ee.yh))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})(),kA=(()=>{class r{constructor(t,i){this._config=t,this._store=i,this._functionService=new EA(this._store),this._functionOutputService=new Lc(this._store)}processConfiguration({taskCreationPayload:t,formValue:i,selectedFunction:s,methodEvaluation:u},g){var I=this;return(0,ce.Z)(function*(){if(!t?.configureActivity||!i)return;const{functionIdentifier:ne}=yield I._functionService.detectFunction(s),{outputParamIdentifier:fe}=yield I._functionOutputService.detectFunctionOutput(s,u),Ne=(Array.isArray(u.inputParamCandidates)?yield(0,x.g)(I._store.select((0,T.BT)(u.inputParamCandidates))):[]).map(ze=>({optional:!1,interface:"number"==typeof ze.interface?ze.interface:void 0,name:ze.normalizedName,type:"object"})),je={...s,identifier:ne,_isImplementation:!0,requireCustomImplementation:s.requireCustomImplementation??!1,requireDynamicInput:!1,canFail:i.functionCanFail??!1,name:i.functionName??I._config.defaultFunctionName,normalizedName:i.functionNormalizedName??Tr.D.normalizeName(i.functionName??void 0),finalizesFlow:i.functionFinalizesFlow??!1,customImplementation:i.functionImplementation?.text??void 0,output:fe,inputTemplates:Ne};I._store.dispatch((0,Q.sN)(je)),g.functionIdentifier=ne})()}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(w.a),c.LFG(ee.yh))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})(),TA=(()=>{class r{constructor(t,i){this._config=t,this._store=i,this._functionOutputService=new Lc(this._store)}processConfiguration({formValue:t,taskCreationPayload:i,selectedFunction:s,methodEvaluation:u}){var g=this;return(0,ce.Z)(function*(){if(!i.configureActivity||!t)return;const{hasOutput:B,outputParamIsRemoved:ne,outputParamIdentifier:fe,outputParamObject:ye,outputParamInterface:Ne,outputParamType:je}=yield g._functionOutputService.detectFunctionOutput(s,u);if(!B)return void(ne&&g._store.dispatch((0,Mn.Y7)(fe)));let ze=ye?{...ye}:null;ze||(ze={_isIParam:!0,identifier:fe,optional:null,nullable:null,constant:null,typeDef:null,defaultValue:null}),ze={...ze,interface:t.outputParamInterface??Ne,isProcessOutput:!1,name:t.outputParamName,normalizedName:t.outputParamNormalizedName,type:je,defaultValue:u?.detectedValue??null},g._store.dispatch((0,Mn.Bo)(ze))})()}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(w.a),c.LFG(ee.yh))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})(),PA=(()=>{class r{constructor(t,i,s,u){this._bpmnJs=t,this._config=i,this._bpmnJsService=s,this._store=u,this._functionOutputService=new Lc(this._store)}processConfiguration({taskCreationPayload:t,formValue:i,methodEvaluation:s},u){var g=this;return(0,ce.Z)(function*(){if(!t.configureActivity||!i)return;const B=yield(0,x.g)(g._store.select((0,T.ob)(u.functionIdentifier)));if(!B)return;const{outputParamIsRemoved:ne,outputParamIdentifier:fe}=yield g._functionOutputService.detectFunctionOutput(B,s);if(ne){const Ne=g._bpmnJsService.elementRegistryModule.filter(je=>"bpmn:DataOutputAssociation"===je.type&&v.getDataParamId(je)===fe);return void g._bpmnJsService.modelingModule.removeElements(Ne)}if(null==B.output)return;const ye=yield(0,x.g)(g._store.select((0,T.lR)(fe)));ye&&v.appendOutputParam(g._bpmnJs,t.configureActivity,ye.identifier,ye.name??"no param name",ye.interface,ye.isProcessOutput??!1,!0,g._config.expectInterface)})()}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(ke),c.LFG(w.a),c.LFG(pt),c.LFG(ee.yh))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})(),RA=(()=>{class r{constructor(t,i){this._bpmnJsService=t,this._store=i}processConfiguration({taskCreationPayload:t,formValue:i,methodEvaluation:s},u){var g=this;return(0,ce.Z)(function*(){const I=t.configureActivity;if(!I||!i||!(yield(0,x.g)(g._store.select((0,T.ob)(u.functionIdentifier)))))return;const fe=(yield Promise.all((s.inputParamCandidates??[]).map(Ne=>(0,x.g)(g._store.select((0,T.ZA)(Ne)))))).map(Ne=>Ne?.identifier??-1),ye=g._bpmnJsService.elementRegistryModule.filter(Ne=>"bpmn:DataObjectReference"===Ne.type&&fe.indexOf(v.getDataParamId(Ne)??-1)>-1);for(const Ne of ye)g._bpmnJsService.modelingModule.connect(Ne,I)})()}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(pt),c.LFG(ee.yh))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r})();const $A=["diagramWrapper"];let MA=(()=>{class r{constructor(t,i,s,u,g,I,B){this._c2sProcessors=t,this._c2mProcessors=i,this._bpmnJs=s,this.processBuilderService=u,this.bpmnJsService=g,this._store=I,this._processBuilderComponentService=B,this.animationStatus$=this._store.select(G.j3).pipe((0,pe.w)(()=>(0,ot.H)(0).pipe((0,U.U)(()=>"visible"),(0,Ie.O)("hidden")))),this._subscription=new It.w0}ngOnDestroy(){this._subscription.unsubscribe()}ngOnInit(){this.init()}init(){var t=this;return(0,ce.Z)(function*(){yield t.bpmnJsService.attachBpmnModelToDomElement(t.diagramWrapper.nativeElement),t._subscription.add(t._processBuilderComponentService.taskEditingDialogResultReceived$.subscribe(function(){var i=(0,ce.Z)(function*(s){return yield t._processConfiguration(s)});return function(s){return i.apply(this,arguments)}}())),t._subscription.add(t.bpmnJsService.taskEditingProcedure$.subscribe(i=>t._store.dispatch((0,vA._s)({procedure:i})))),t._subscription.add(pt.elementDeletionRequested$.subscribe(function(){var i=(0,ce.Z)(function*(s){switch(s.type){case y_Task:yield t._processBuilderComponentService.tryDeleteFunction(s);break;case y_ExclusiveGateway:yield t._processBuilderComponentService.tryDeleteErrorGateway(s);break;case y_EndEvent:const u=t._getFirstProvidedOutputWithSLPBExtension(s,"isProcessOutput");u&&v.updateBpmnElementSLPBExtension(t._bpmnJs,u.businessObject,"DataObjectExtension",g=>g.isProcessOutput=!1),t.bpmnJsService.modelingModule.removeElements([s]),t.bpmnJsService.saveCurrentBpmnModel();break;default:t.bpmnJsService.modelingModule.removeElements([s])}});return function(s){return i.apply(this,arguments)}}())),t._subscription.add(pt.elementEndEventCreationRequested.subscribe(function(){var i=(0,ce.Z)(function*(s){const u=t._getFirstProvidedOutputWithSLPBExtension(s,"matchesProcessOutputInterface");u&&v.updateBpmnElementSLPBExtension(t._bpmnJs,u.businessObject,"DataObjectExtension",g=>g.isProcessOutput=!0),t.bpmnJsService.modelingModule.appendShape(s,{type:y_EndEvent}),t.bpmnJsService.saveCurrentBpmnModel()});return function(s){return i.apply(this,arguments)}}()))})()}_processConfiguration(t){var i=this;return(0,ce.Z)(function*(){const s={};yield i._processC2S(t,s),yield i._processC2M(t,s),yield i.bpmnJsService.saveCurrentBpmnModel(!0)})()}_processC2S(t,i){var s=this;return(0,ce.Z)(function*(){for(const u of s._c2sProcessors){const g=u.processConfiguration(t,i),I=Hw(g)?yield g:g;I&&(i={...i,...I})}})()}_processC2M(t,i){var s=this;return(0,ce.Z)(function*(){for(const u of s._c2mProcessors){const g=u.processConfiguration(t,i);Hw(g)&&(yield g)}})()}_getFirstProvidedOutputWithSLPBExtension(t,i){let s=t;for(;s;){const u=s.outgoing.find(g=>"bpmn:DataOutputAssociation"===g.type)?.target;if(u&&v.getSLPBExtension(u.businessObject,"DataObjectExtension",I=>I[i]))return u;s=s.incoming.find(g=>g.type===y_SequenceFlow&&g.source?.type===y_Task)?.source}}}return r.\u0275fac=function(t){return new(t||r)(c.Y36(sw),c.Y36(Hh),c.Y36(ke),c.Y36(Ke),c.Y36(pt),c.Y36(ee.yh),c.Y36(Qw))},r.\u0275cmp=c.Xpm({type:r,selectors:[["app-process-builder"]],viewQuery:function(t,i){if(1&t&&c.Gf($A,7),2&t){let s;c.iGM(s=c.CRH())&&(i.diagramWrapper=s.first)}},features:[c._Bn([Qw,{provide:sw,useClass:kA,multi:!0},{provide:sw,useClass:TA,multi:!0},{provide:Hh,useClass:yA,multi:!0},{provide:Hh,useClass:wA,multi:!0},{provide:Hh,useClass:PA,multi:!0},{provide:Hh,useClass:RA,multi:!0},{provide:Hh,useClass:xA,multi:!0},{provide:Hh,useClass:AA,multi:!0}])],decls:27,vars:15,consts:[[1,"PB_diagram-body"],[1,"diagram-wrapper"],["diagramWrapper",""],[1,"info"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","warn",3,"click"]],template:function(t,i){if(1&t&&(c.TgZ(0,"div",0),c.ALo(1,"async"),c._UZ(2,"div",1,2),c.TgZ(4,"div",3)(5,"div"),c._uU(6),c.ALo(7,"async"),c.qZA(),c.TgZ(8,"div"),c._uU(9),c.ALo(10,"async"),c.qZA(),c.TgZ(11,"div"),c._uU(12),c.ALo(13,"async"),c.qZA(),c.TgZ(14,"button",4),c.NdJ("click",function(){return i.processBuilderService.createBpmnJsModel()}),c._uU(15," New model "),c.qZA(),c.TgZ(16,"button",5),c.NdJ("click",function(){return i.processBuilderService.setNextModel()}),c.ALo(17,"async"),c._uU(18," Next model "),c.qZA(),c.TgZ(19,"button",4),c.NdJ("click",function(){return i.bpmnJsService.undo()}),c._uU(20," Undo "),c.qZA(),c.TgZ(21,"button",4),c.NdJ("click",function(){return i.bpmnJsService.redo()}),c._uU(22," Redo "),c.qZA(),c.TgZ(23,"button",4),c.NdJ("click",function(){return i.bpmnJsService.saveCurrentBpmnModel(!0)}),c._uU(24," Save model "),c.qZA(),c.TgZ(25,"button",6),c.NdJ("click",function(){return i.processBuilderService.resetLocalState()}),c._uU(26," Clear state "),c.qZA()()()),2&t){let s,u,g,I,B;c.Q6J("@show",null!==(s=c.lcZ(1,5,i.animationStatus$))&&void 0!==s?s:"hidden"),c.xp6(6),c.hij(" ",null!==(u=null==(u=c.lcZ(7,7,i.processBuilderService.models$))?null:u.length)&&void 0!==u?u:0," Models "),c.xp6(3),c.hij(" ",null!==(g=null==(g=c.lcZ(10,9,i.processBuilderService.params$))?null:g.length)&&void 0!==g?g:0," Params "),c.xp6(3),c.hij(" ",null!==(I=null==(I=c.lcZ(13,11,i.processBuilderService.funcs$))?null:I.length)&&void 0!==I?I:0," Funcs "),c.xp6(4),c.Q6J("disabled",(null!==(B=null==(B=c.lcZ(17,13,i.processBuilderService.models$))?null:B.length)&&void 0!==B?B:0)<2)}},dependencies:[Tt.lW,P.Ov],styles:[".djs-palette-entries .group[data-group=create]{display:none}  .djs-context-pad .entry[data-action=append]{display:none}.PB_diagram-body[_ngcontent-%COMP%]{height:100%;width:100%;display:flex}.PB_diagram-body[_ngcontent-%COMP%]   .diagram-wrapper[_ngcontent-%COMP%]{flex:1}.PB_diagram-body[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{width:200px;border-left:2px solid #f2f2f2;padding:.5rem 1rem;box-sizing:border-box;overflow-y:scroll;display:none}"],data:{animation:[tt]}}),r})();const aw={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},lw=new c.OlP("config",{providedIn:"root",factory:()=>({modules:aw})});var cw=xe(9074),NA=xe(7258),uw=xe(2438);function LA(r,e){1&r&&c._UZ(0,"pre",3)}function BA(r,e){if(1&r&&c.YNc(0,LA,1,0,"pre",2),2&r){const t=c.oxw(),i=c.MAs(4);c.Q6J("ngIf",t.preserve)("ngIfElse",i)}}function DA(r,e){1&r&&c._UZ(0,"pre",3)}function FA(r,e){if(1&r&&c.YNc(0,DA,1,0,"pre",2),2&r){const t=c.oxw(),i=c.MAs(4);c.Q6J("ngIf",t.preserve)("ngIfElse",i)}}function WA(r,e){1&r&&c._UZ(0,"div",3)}const GA=[[["","quill-editor-toolbar",""]]],jA=["[quill-editor-toolbar]"];function ZA(r,e){1&r&&c._UZ(0,"div",1)}function VA(r,e){1&r&&c._UZ(0,"pre",1)}const Rv=(r,e)=>r||e||"html";let hw=(()=>{class r{constructor(t,i){var s=this;this.config=i,this.quill$=(0,Rh.P)((0,ce.Z)(function*(){if(!s.Quill){const u=s.document.addEventListener;s.document.addEventListener=s.document.__zone_symbol__addEventListener||s.document.addEventListener;const g=yield Promise.resolve().then(xe.t.bind(xe,7536,19));s.document.addEventListener=u,s.Quill=g.default?g.default:g}return s.config.customOptions?.forEach(u=>{const g=s.Quill.import(u.import);g.whitelist=u.whitelist,s.Quill.register(g,!0,s.config.suppressGlobalRegisterWarning)}),yield s.registerCustomModules(s.Quill,s.config.customModules,s.config.suppressGlobalRegisterWarning)})).pipe((0,Re.d)({bufferSize:1,refCount:!0})),this.document=t.get(P.K0),this.config||(this.config={modules:aw})}getQuill(){return this.quill$}registerCustomModules(t,i,s){return(0,ce.Z)(function*(){if(Array.isArray(i))for(let{implementation:u,path:g}of i)(0,NA.b)(u)&&(u=yield(0,K.z)(u)),t.register(g,u,s);return t})()}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(c.zs3),c.LFG(lw,8))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),QA=(()=>{class r{constructor(){this.required=!1,this.customToolbarPosition="top",this.styles=null,this.strict=!0,this.customOptions=[],this.customModules=[],this.preserveWhitespace=!1,this.trimOnValidation=!1,this.compareValues=!1,this.filterNull=!1,this.defaultEmptyValue=null,this.onEditorCreated=new c.vpe,this.onEditorChanged=new c.vpe,this.onContentChanged=new c.vpe,this.onSelectionChanged=new c.vpe,this.onFocus=new c.vpe,this.onBlur=new c.vpe,this.disabled=!1,this.preserve=!1,this.toolbarPosition="top",this.subscription=null,this.quillSubscription=null,this.elementRef=(0,c.f3M)(c.SBq),this.document=(0,c.f3M)(P.K0),this.cd=(0,c.f3M)(c.sBO),this.domSanitizer=(0,c.f3M)(cw.H7),this.platformId=(0,c.f3M)(c.Lbi),this.renderer=(0,c.f3M)(c.Qsj),this.zone=(0,c.f3M)(c.R0b),this.service=(0,c.f3M)(hw),this.valueGetter=(t,i)=>{let s=i.querySelector(".ql-editor").innerHTML;("<p><br></p>"===s||"<div><br></div>"===s)&&(s=this.defaultEmptyValue);let u=s;const g=Rv(this.format,this.service.config.format);if("text"===g)u=t.getText();else if("object"===g)u=t.getContents();else if("json"===g)try{u=JSON.stringify(t.getContents())}catch{u=t.getText()}return u},this.valueSetter=(t,i)=>{const s=Rv(this.format,this.service.config.format);if("html"===s)return([!0,!1].includes(this.sanitize)?this.sanitize:this.service.config.sanitize||!1)&&(i=this.domSanitizer.sanitize(c.q3G.HTML,i)),t.clipboard.convert(i);if("json"===s)try{return JSON.parse(i)}catch{return[{insert:i}]}return i},this.selectionChangeHandler=(t,i,s)=>{const u=!t&&!!this.onModelTouched;!this.onBlur.observed&&!this.onFocus.observed&&!this.onSelectionChanged.observed&&!u||this.zone.run(()=>{null===t?this.onBlur.emit({editor:this.quillEditor,source:s}):null===i&&this.onFocus.emit({editor:this.quillEditor,source:s}),this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:i,range:t,source:s}),u&&this.onModelTouched(),this.cd.markForCheck()})},this.textChangeHandler=(t,i,s)=>{const u=this.quillEditor.getText(),g=this.quillEditor.getContents();let I=this.editorElem.querySelector(".ql-editor").innerHTML;("<p><br></p>"===I||"<div><br></div>"===I)&&(I=this.defaultEmptyValue);const B=this.trackChanges||this.service.config.trackChanges,ne=("user"===s||B&&"all"===B)&&!!this.onModelChange;!this.onContentChanged.observed&&!ne||this.zone.run(()=>{ne&&this.onModelChange(this.valueGetter(this.quillEditor,this.editorElem)),this.onContentChanged.emit({content:g,delta:t,editor:this.quillEditor,html:I,oldDelta:i,source:s,text:u}),this.cd.markForCheck()})},this.editorChangeHandler=(t,i,s,u)=>{if(this.onEditorChanged.observed)if("text-change"===t){const g=this.quillEditor.getText(),I=this.quillEditor.getContents();let B=this.editorElem.querySelector(".ql-editor").innerHTML;("<p><br></p>"===B||"<div><br></div>"===B)&&(B=this.defaultEmptyValue),this.zone.run(()=>{this.onEditorChanged.emit({content:I,delta:i,editor:this.quillEditor,event:t,html:B,oldDelta:s,source:u,text:g}),this.cd.markForCheck()})}else this.zone.run(()=>{this.onEditorChanged.emit({editor:this.quillEditor,event:t,oldRange:s,range:i,source:u}),this.cd.markForCheck()})}}static normalizeClassNames(t){return t.trim().split(" ").reduce((s,u)=>{const g=u.trim();return g&&s.push(g),s},[])}ngOnInit(){this.preserve=this.preserveWhitespace,this.toolbarPosition=this.customToolbarPosition}ngAfterViewInit(){(0,P.PM)(this.platformId)||(this.quillSubscription=this.service.getQuill().pipe((0,Pv.z)(t=>{const i=[this.service.registerCustomModules(t,this.customModules)],s=this.beforeRender??this.service.config.beforeRender;return s&&i.push(s()),Promise.all(i).then(()=>t)})).subscribe(t=>{this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");const i=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),s=Object.assign({},this.modules||this.service.config.modules);i?s.toolbar=i:void 0===s.toolbar&&(s.toolbar=aw.toolbar);let u=void 0!==this.placeholder?this.placeholder:this.service.config.placeholder;void 0===u&&(u="Insert text here ..."),this.styles&&Object.keys(this.styles).forEach(Ne=>{this.renderer.setStyle(this.editorElem,Ne,this.styles[Ne])}),this.classes&&this.addClasses(this.classes),this.customOptions.forEach(Ne=>{const je=t.import(Ne.import);je.whitelist=Ne.whitelist,t.register(je,!0)});let g=this.bounds&&"self"===this.bounds?this.editorElem:this.bounds;g||(g=this.service.config.bounds?this.service.config.bounds:this.document.body);let I=this.debug;!I&&!1!==I&&this.service.config.debug&&(I=this.service.config.debug);let B=this.readOnly;!B&&!1!==this.readOnly&&(B=void 0!==this.service.config.readOnly&&this.service.config.readOnly);let ne=this.defaultEmptyValue;this.service.config.hasOwnProperty("defaultEmptyValue")&&(ne=this.service.config.defaultEmptyValue);let fe=this.scrollingContainer;!fe&&null!==this.scrollingContainer&&(fe=null===this.service.config.scrollingContainer||this.service.config.scrollingContainer?this.service.config.scrollingContainer:null);let ye=this.formats;if(!ye&&void 0===ye&&(ye=this.service.config.formats?[...this.service.config.formats]:null===this.service.config.formats?null:void 0),this.zone.runOutsideAngular(()=>{if(this.quillEditor=new t(this.editorElem,{bounds:g,debug:I,formats:ye,modules:s,placeholder:u,readOnly:B,defaultEmptyValue:ne,scrollingContainer:fe,strict:this.strict,theme:this.theme||(this.service.config.theme?this.service.config.theme:"snow")}),this.linkPlaceholder){const je=this.quillEditor?.theme?.tooltip?.root?.querySelector("input[data-link]");je?.dataset&&(je.dataset.link=this.linkPlaceholder)}}),this.content){if("text"===Rv(this.format,this.service.config.format))this.quillEditor.setText(this.content,"silent");else{const je=this.valueSetter(this.quillEditor,this.content);this.quillEditor.setContents(je,"silent")}this.quillEditor.getModule("history").clear()}this.setDisabledState(),this.addQuillEventListeners(),(this.onEditorCreated.observed||this.onValidatorChanged)&&requestAnimationFrame(()=>{this.onValidatorChanged&&this.onValidatorChanged(),this.onEditorCreated.emit(this.quillEditor),this.onEditorCreated.complete()})}))}ngOnDestroy(){this.dispose(),this.quillSubscription?.unsubscribe(),this.quillSubscription=null}ngOnChanges(t){if(this.quillEditor){if(t.readOnly&&this.quillEditor.enable(!t.readOnly.currentValue),t.placeholder&&(this.quillEditor.root.dataset.placeholder=t.placeholder.currentValue),t.defaultEmptyValue&&(this.quillEditor.root.dataset.defaultEmptyValue=t.defaultEmptyValue.currentValue),t.styles){const i=t.styles.currentValue,s=t.styles.previousValue;s&&Object.keys(s).forEach(u=>{this.renderer.removeStyle(this.editorElem,u)}),i&&Object.keys(i).forEach(u=>{this.renderer.setStyle(this.editorElem,u,this.styles[u])})}if(t.classes){const i=t.classes.currentValue,s=t.classes.previousValue;s&&this.removeClasses(s),i&&this.addClasses(i)}t.debounceTime&&this.addQuillEventListeners()}}addClasses(t){r.normalizeClassNames(t).forEach(i=>{this.renderer.addClass(this.editorElem,i)})}removeClasses(t){r.normalizeClassNames(t).forEach(i=>{this.renderer.removeClass(this.editorElem,i)})}writeValue(t){if(this.filterNull&&null===t||(this.content=t,!this.quillEditor))return;const i=Rv(this.format,this.service.config.format),s=this.valueSetter(this.quillEditor,t);if(this.compareValues){const u=this.quillEditor.getContents();if(JSON.stringify(u)===JSON.stringify(s))return}t?"text"===i?this.quillEditor.setText(t):this.quillEditor.setContents(s):this.quillEditor.setText("")}setDisabledState(t=this.disabled){this.disabled=t,this.quillEditor&&(t?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}registerOnValidatorChange(t){this.onValidatorChanged=t}validate(){if(!this.quillEditor)return null;const t={};let i=!0;const s=this.quillEditor.getText(),u=this.trimOnValidation?s.trim().length:1===s.length&&0===s.trim().length?0:s.length-1,g=this.quillEditor.getContents().ops,I=g&&1===g.length&&["\n",""].includes(g[0].insert);return this.minLength&&u&&u<this.minLength&&(t.minLengthError={given:u,minLength:this.minLength},i=!1),this.maxLength&&u>this.maxLength&&(t.maxLengthError={given:u,maxLength:this.maxLength},i=!1),this.required&&!u&&I&&(t.requiredError={empty:!0},i=!1),i?null:t}addQuillEventListeners(){this.dispose(),this.zone.runOutsideAngular(()=>{this.subscription=new It.w0,this.subscription.add((0,uw.R)(this.quillEditor,"selection-change").subscribe(([s,u,g])=>{this.selectionChangeHandler(s,u,g)}));let t=(0,uw.R)(this.quillEditor,"text-change"),i=(0,uw.R)(this.quillEditor,"editor-change");"number"==typeof this.debounceTime&&(t=t.pipe((0,Ae.b)(this.debounceTime)),i=i.pipe((0,Ae.b)(this.debounceTime))),this.subscription.add(t.subscribe(([s,u,g])=>{this.textChangeHandler(s,u,g)})),this.subscription.add(i.subscribe(([s,u,g,I])=>{this.editorChangeHandler(s,u,g,I)}))})}dispose(){null!==this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275dir=c.lG2({type:r,inputs:{format:"format",theme:"theme",modules:"modules",debug:"debug",readOnly:"readOnly",placeholder:"placeholder",maxLength:"maxLength",minLength:"minLength",required:"required",formats:"formats",customToolbarPosition:"customToolbarPosition",sanitize:"sanitize",beforeRender:"beforeRender",styles:"styles",strict:"strict",scrollingContainer:"scrollingContainer",bounds:"bounds",customOptions:"customOptions",customModules:"customModules",trackChanges:"trackChanges",preserveWhitespace:"preserveWhitespace",classes:"classes",trimOnValidation:"trimOnValidation",linkPlaceholder:"linkPlaceholder",compareValues:"compareValues",filterNull:"filterNull",debounceTime:"debounceTime",defaultEmptyValue:"defaultEmptyValue",valueGetter:"valueGetter",valueSetter:"valueSetter"},outputs:{onEditorCreated:"onEditorCreated",onEditorChanged:"onEditorChanged",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur"},features:[c.TTD]}),r})(),dw=(()=>{class r extends QA{}return r.\u0275fac=function(){let e;return function(i){return(e||(e=c.n5z(r)))(i||r)}}(),r.\u0275cmp=c.Xpm({type:r,selectors:[["quill-editor"]],standalone:!0,features:[c._Bn([{multi:!0,provide:cn.JU,useExisting:(0,c.Gpc)(()=>r)},{multi:!0,provide:cn.Cf,useExisting:(0,c.Gpc)(()=>r)}]),c.qOj,c.jDz],ngContentSelectors:jA,decls:5,vars:2,consts:[[3,"ngIf"],["noPreserveTpl",""],["quill-editor-element","",4,"ngIf","ngIfElse"],["quill-editor-element",""]],template:function(t,i){1&t&&(c.F$t(GA),c.YNc(0,BA,1,2,"ng-template",0),c.Hsn(1),c.YNc(2,FA,1,2,"ng-template",0),c.YNc(3,WA,1,0,"ng-template",null,1,c.W1O)),2&t&&(c.Q6J("ngIf","top"!==i.toolbarPosition),c.xp6(2),c.Q6J("ngIf","top"===i.toolbarPosition))},dependencies:[P.ez,P.O5],styles:["[_nghost-%COMP%]{display:inline-block}"]}),r})(),HA=(()=>{class r{constructor(t,i){this.sanitizer=t,this.service=i,this.content="",this.innerHTML="",this.themeClass="ql-snow"}ngOnChanges(t){if(t.theme?this.themeClass=`ql-${t.theme.currentValue||(this.service.config.theme?this.service.config.theme:"snow")} ngx-quill-view-html`:this.theme||(this.themeClass=`ql-${this.service.config.theme?this.service.config.theme:"snow"} ngx-quill-view-html`),t.content){const i=t.content.currentValue,s=[!0,!1].includes(this.sanitize)?this.sanitize:this.service.config.sanitize||!1;this.innerHTML=s?i:this.sanitizer.bypassSecurityTrustHtml(i)}}}return r.\u0275fac=function(t){return new(t||r)(c.Y36(cw.H7),c.Y36(hw))},r.\u0275cmp=c.Xpm({type:r,selectors:[["quill-view-html"]],inputs:{content:"content",theme:"theme",sanitize:"sanitize"},standalone:!0,features:[c.TTD,c.jDz],decls:2,vars:2,consts:[[1,"ql-container",3,"ngClass"],[1,"ql-editor",3,"innerHTML"]],template:function(t,i){1&t&&(c.TgZ(0,"div",0),c._UZ(1,"div",1),c.qZA()),2&t&&(c.Q6J("ngClass",i.themeClass),c.xp6(1),c.Q6J("innerHTML",i.innerHTML,c.oJD))},dependencies:[P.ez,P.mk],styles:[".ql-container.ngx-quill-view-html{border:0}\n"],encapsulation:2}),r})(),zA=(()=>{class r{constructor(t,i,s,u,g,I){this.elementRef=t,this.renderer=i,this.zone=s,this.service=u,this.domSanitizer=g,this.platformId=I,this.strict=!0,this.customModules=[],this.customOptions=[],this.preserveWhitespace=!1,this.onEditorCreated=new c.vpe,this.preserve=!1,this.quillSubscription=null,this.valueSetter=(B,ne)=>{const fe=Rv(this.format,this.service.config.format);let ye=ne;if("text"===fe)B.setText(ye);else{if("html"===fe)([!0,!1].includes(this.sanitize)?this.sanitize:this.service.config.sanitize||!1)&&(ne=this.domSanitizer.sanitize(c.q3G.HTML,ne)),ye=B.clipboard.convert(ne);else if("json"===fe)try{ye=JSON.parse(ne)}catch{ye=[{insert:ne}]}B.setContents(ye)}}}ngOnInit(){this.preserve=this.preserveWhitespace}ngOnChanges(t){this.quillEditor&&t.content&&this.valueSetter(this.quillEditor,t.content.currentValue)}ngAfterViewInit(){(0,P.PM)(this.platformId)||(this.quillSubscription=this.service.getQuill().pipe((0,Pv.z)(t=>{const i=[this.service.registerCustomModules(t,this.customModules)],s=this.beforeRender??this.service.config.beforeRender;return s&&i.push(s()),Promise.all(i).then(()=>t)})).subscribe(t=>{const i=Object.assign({},this.modules||this.service.config.modules);i.toolbar=!1,this.customOptions.forEach(I=>{const B=t.import(I.import);B.whitelist=I.whitelist,t.register(B,!0)});let s=this.debug;!s&&!1!==s&&this.service.config.debug&&(s=this.service.config.debug);let u=this.formats;!u&&void 0===u&&(u=this.service.config.formats?Object.assign({},this.service.config.formats):null===this.service.config.formats?null:void 0);const g=this.theme||(this.service.config.theme?this.service.config.theme:"snow");this.editorElem=this.elementRef.nativeElement.querySelector("[quill-view-element]"),this.zone.runOutsideAngular(()=>{this.quillEditor=new t(this.editorElem,{debug:s,formats:u,modules:i,readOnly:!0,strict:this.strict,theme:g})}),this.renderer.addClass(this.editorElem,"ngx-quill-view"),this.content&&this.valueSetter(this.quillEditor,this.content),this.onEditorCreated.observers.length&&requestAnimationFrame(()=>{this.onEditorCreated.emit(this.quillEditor),this.onEditorCreated.complete()})}))}ngOnDestroy(){this.quillSubscription?.unsubscribe(),this.quillSubscription=null}}return r.\u0275fac=function(t){return new(t||r)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(c.R0b),c.Y36(hw),c.Y36(cw.H7),c.Y36(c.Lbi))},r.\u0275cmp=c.Xpm({type:r,selectors:[["quill-view"]],inputs:{format:"format",theme:"theme",modules:"modules",debug:"debug",formats:"formats",sanitize:"sanitize",beforeRender:"beforeRender",strict:"strict",content:"content",customModules:"customModules",customOptions:"customOptions",preserveWhitespace:"preserveWhitespace"},outputs:{onEditorCreated:"onEditorCreated"},standalone:!0,features:[c.TTD,c.jDz],decls:2,vars:2,consts:[["quill-view-element","",4,"ngIf"],["quill-view-element",""]],template:function(t,i){1&t&&(c.YNc(0,ZA,1,0,"div",0),c.YNc(1,VA,1,0,"pre",0)),2&t&&(c.Q6J("ngIf",!i.preserve),c.xp6(1),c.Q6J("ngIf",i.preserve))},dependencies:[P.ez,P.O5],styles:[".ql-container.ngx-quill-view{border:0}\n"],encapsulation:2}),r})(),UA=(()=>{class r{static forRoot(t){return{ngModule:r,providers:[{provide:lw,useValue:t}]}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({imports:[dw,zA,HA]}),r})();var XA=xe(7536),KA=xe.n(XA);const YA=function(r){return{"no-border":r}},qA=function(r){return{toolbar:r}};let JA=(()=>{class r{constructor(){this.configuration={},this.blurred=new c.vpe,this.keyDownEnter=new c.vpe,this.valueChanged=new c.vpe,this.formControl=new cn.NI,this.toolbar={container:[["undo","redo"],["bold","italic","underline","strike"],[{header:1},{header:2}],["image"]],handlers:{undo:()=>this.editor?.quillEditor.history.undo(),redo:()=>this.editor?.quillEditor.history.redo()}},this._touched=!1,this._subscription=new It.w0}set value(t){this.formControl.setValue(t??null)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}ngOnDestroy(){this._subscription.unsubscribe()}ngOnInit(){this._subscription.add(this.formControl.valueChanges.subscribe(t=>this.setValue(t))),this._subscription.add(this.keyDownEnter.subscribe(()=>this.setValue(this.formControl.value,"enter"))),this._subscription.add(this.blurred.subscribe(()=>this.setValue(this.formControl.value,"blur"))),this._loadIcons()}onQuillEditorCreated(t){t.root.addEventListener("blur",()=>{this.blurred.emit()}),t.keyboard.bindings[13].unshift({key:13,handler:()=>(this.keyDownEnter.emit(),!1)})}setDisabledState(t){this.formControl[t?"disable":"enable"]()}setValue(t,i="change"){this.configuration.emitOn&&-1===this.configuration.emitOn.indexOf(i)||(this._onChange?.(t),this.valueChanged.emit(t),this._touched||(this._touched=!0,this._onTouched?.()),"enter"===i&&document.activeElement?.blur())}writeValue(t){this.formControl.setValue(t)}_loadIcons(){const t=KA().import("ui/icons");t.undo='<svg viewbox="0 0 18 18"><polygon class="ql-fill ql-stroke" points="6 10 4 12 2 10 6 10"></polygon><path class="ql-stroke" d="M8.09,13.91A4.6,4.6,0,0,0,9,14,5,5,0,1,0,4,9"></path></svg>',t.redo='<svg viewbox="0 0 18 18"><polygon class="ql-fill ql-stroke" points="12 10 14 12 16 10 12 10"></polygon><path class="ql-stroke" d="M9.91,13.91A4.6,4.6,0,0,1,9,14a5,5,0,1,1,5-5"></path></svg>'}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=c.Xpm({type:r,selectors:[["app-markdown-editor"]],viewQuery:function(t,i){if(1&t&&c.Gf(dw,5),2&t){let s;c.iGM(s=c.CRH())&&(i.editor=s.first)}},inputs:{configuration:"configuration",value:"value"},outputs:{blurred:"blurred",keyDownEnter:"keyDownEnter",valueChanged:"valueChanged"},features:[c._Bn([{provide:cn.JU,useExisting:(0,c.Gpc)(()=>r),multi:!0}])],decls:1,vars:8,consts:[[3,"ngClass","modules","formControl","format","onEditorCreated"]],template:function(t,i){if(1&t&&(c.TgZ(0,"quill-editor",0),c.NdJ("onEditorCreated",function(u){return i.onQuillEditorCreated(u)}),c.qZA()),2&t){let s;c.Q6J("ngClass",c.VKq(4,YA,i.configuration.noBorder))("modules",c.VKq(6,qA,i.toolbar))("formControl",i.formControl)("format",null!==(s=i.configuration.format)&&void 0!==s?s:"html")}},dependencies:[P.mk,dw,cn.JJ,cn.oH],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:flex}  quill-editor{flex:1;padding:4px;display:flex!important;flex-direction:column}  quill-editor .ql-container{overflow-y:auto}  quill-editor.no-border .ql-toolbar{border:none}  quill-editor.no-border .ql-container{border:none}"]}),r})(),qw=(()=>{class r{constructor(){this.naming=[],this.naming[m.MultipleOutgoingSequenceFlowsFromNoneGatewayShape]="multiple outgoing sequence flows",this.naming[m.NoEndEvent]="no end event",this.naming[m.NoStartEvent]="no start event",this.naming[m.SequenceEndWithoutEndEvent]="sequence ends without an end event",this.naming[m.MultipleStartEvents]="multiple start events"}transform(t){return this.naming[t]??"unknown error"}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275pipe=c.Yjl({name:"validationError",type:r,pure:!0}),r})(),Jw=(()=>{class r{constructor(){this.naming=[],this.naming[h.CyclicAccess]="cyclic process",this.naming[h.NoEndEvent]="no end event",this.naming[h.UnusedOutputParam]="unused output params",this.naming[h.UnreachableElement]="unreachable process element"}transform(t){return this.naming[t]??"unknown error"}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275pipe=c.Yjl({name:"validationWarning",type:r,pure:!0}),r})();function eO(r,e){if(1&r){const t=c.EpF();c.TgZ(0,"div",7),c.NdJ("mouseenter",function(){const u=c.CHM(t).$implicit,g=c.oxw();return c.KtG(g.showError(u))})("mouseleave",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.hideAllHints())}),c._uU(1),c.ALo(2,"validationError"),c.qZA()}if(2&r){const t=e.$implicit;c.xp6(1),c.hij(" ",c.lcZ(2,1,t.error)," ")}}function tO(r,e){if(1&r){const t=c.EpF();c.TgZ(0,"div",8),c.NdJ("mouseenter",function(){const u=c.CHM(t).$implicit,g=c.oxw();return c.KtG(g.showWarning(u))})("mouseleave",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.hideAllHints())}),c._uU(1),c.ALo(2,"validationWarning"),c.qZA()}if(2&r){const t=e.$implicit;c.xp6(1),c.hij(" ",c.lcZ(2,1,t.warning)," ")}}let nO=(()=>{class r{constructor(t,i,s,u,g){this._bpmnJs=t,this._store=i,this._formBuilder=s,this.bpmnJsService=u,this._snackBar=g,this.currentBpmnJSModel$=this._store.select(G.j3),this._subscriptions=new It.w0,this.hideAllHints=()=>v.clearAllTooltips(this._bpmnJs),this.ngOnDestroy=()=>this._subscriptions.unsubscribe(),this.formGroup=this._formBuilder.group({name:"",guid:null,created:null,description:null,lastModified:null,viewbox:null,xml:null})}createBpmnJsModel(){this._store.dispatch((0,L.dY)())}ngOnInit(){this._subscriptions.add(this.currentBpmnJSModel$.subscribe(t=>{this.formGroup.reset(),this.formGroup.patchValue(t,{emitEvent:!1})}),this.formGroup.valueChanges.pipe((0,Ae.b)(1e3)).subscribe(t=>{this._store.dispatch((0,L.V2)(t)),this.formGroup.markAsPristine()}))}saveCurrentBpmnModel(){var t=this;return(0,ce.Z)(function*(){const i=yield t._bpmnJs.saveXML();t._store.dispatch((0,L.ZQ)({xml:i.xml})),t._snackBar.open("model saved","ok",{duration:2e3}),t.bpmnJsService.markAsUnchanged()})()}resetState(){localStorage.removeItem("params"),localStorage.removeItem("funcs"),localStorage.removeItem("models"),location.reload()}showError(t){this.hideAllHints(),t?.element&&this.bpmnJsService.tooltipModule.add({position:{x:t.element.x,y:t.element.y+t.element.height+3},html:`<div style="width: 120px; background: #f44336de; color: white; font-size: .7rem; padding: .2rem .3rem; border-radius: 2px; line-height: .8rem;">${(new qw).transform(t.error)}</div>`})}showWarning(t){this.hideAllHints(),t.element&&this.bpmnJsService.tooltipModule.add({position:{x:t.element?.x,y:t.element?.y+t.element?.height+3},html:`<div style="width: 120px; background: #ffb200; color: white; font-size: .7rem; padding: .2rem .3rem; border-radius: 2px; line-height: .8rem;">${(new Jw).transform(t.warning)}</div>`})}get nameControl(){return this.formGroup.controls.name}}return r.\u0275fac=function(t){return new(t||r)(c.Y36(ke),c.Y36(ee.yh),c.Y36(cn.QS),c.Y36(pt),c.Y36(ut.ux))},r.\u0275cmp=c.Xpm({type:r,selectors:[["app-method-quick-interaction"]],decls:13,vars:7,consts:[[1,"body",3,"formGroup"],["type","text","formControlName","name","placeholder","function name",1,"function-name"],[1,"hint-wrapper"],["class","hint error",3,"mouseenter","mouseleave",4,"ngFor","ngForOf"],["class","hint warning",3,"mouseenter","mouseleave",4,"ngFor","ngForOf"],[1,"option",3,"click"],[1,"option","reset-all",3,"click"],[1,"hint","error",3,"mouseenter","mouseleave"],[1,"hint","warning",3,"mouseenter","mouseleave"]],template:function(t,i){if(1&t&&(c.TgZ(0,"div",0),c._UZ(1,"input",1),c.TgZ(2,"div",2),c.YNc(3,eO,3,3,"div",3),c.ALo(4,"async"),c.YNc(5,tO,3,3,"div",4),c.ALo(6,"async"),c.qZA(),c.TgZ(7,"div",5),c.NdJ("click",function(){return i.createBpmnJsModel()}),c._uU(8,"add draft"),c.qZA(),c.TgZ(9,"div",5),c.NdJ("click",function(){return i.saveCurrentBpmnModel()}),c._uU(10,"save changes"),c.qZA(),c.TgZ(11,"div",6),c.NdJ("click",function(){return i.resetState()}),c._uU(12,"reset defaults"),c.qZA()()),2&t){let s,u;c.Q6J("formGroup",i.formGroup),c.xp6(3),c.Q6J("ngForOf",null==(s=c.lcZ(4,3,i.bpmnJsService.validation$))?null:s.errors),c.xp6(2),c.Q6J("ngForOf",null==(u=c.lcZ(6,5,i.bpmnJsService.validation$))?null:u.warnings)}},dependencies:[P.sg,cn.Fj,cn.JJ,cn.JL,cn.sg,cn.u,P.Ov,qw,Jw],styles:[".body[_ngcontent-%COMP%]{width:100%}.function-name[_ngcontent-%COMP%]{box-sizing:border-box;outline:none;border:none;border-bottom:1px solid grey;width:100%;padding:.2rem;margin-bottom:.5rem}.option[_ngcontent-%COMP%]{cursor:pointer;padding-bottom:.2rem;margin:0px .5rem .2rem}.option[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #efefef}.option.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none;cursor:default}.option[_ngcontent-%COMP%]:hover{opacity:.8}.option.reset-all[_ngcontent-%COMP%]{color:#b33939;font-weight:500}.hint-wrapper[_ngcontent-%COMP%]{margin-bottom:.5rem}.hint[_ngcontent-%COMP%]{padding:.2rem;font-size:.7rem;line-height:.9rem;margin-bottom:.05rem}.hint.error[_ngcontent-%COMP%]{background-color:#881a1a;color:#fff}.hint.warning[_ngcontent-%COMP%]{background-color:#ffb200;color:#fff}"]}),r})();function iO(r,e){1&r&&c._UZ(0,"app-process-builder"),2&r&&c.Q6J("@fadeIn",void 0)}function rO(r,e){if(1&r){const t=c.EpF();c.TgZ(0,"mat-option",31),c.NdJ("click",function(){const u=c.CHM(t).$implicit,g=c.oxw();return c.KtG(g.setModel(u))}),c._uU(1),c.qZA()}if(2&r){const t=e.$implicit;let i;c.Q6J("value",t.guid),c.xp6(1),c.hij(" ",null!==(i=t.name)&&void 0!==i?i:"no name"," ")}}function oO(r,e){if(1&r){const t=c.EpF();c.TgZ(0,"div",17),c.NdJ("click",function(){c.CHM(t);const s=c.oxw();return c.KtG(s.bpmnJsService.saveCurrentBpmnModel(!0))}),c.TgZ(1,"mat-icon"),c._uU(2,"save"),c.qZA()()}2&r&&c.Q6J("@fadeIn",void 0)}function sO(r,e){if(1&r&&(c.TgZ(0,"div"),c.ALo(1,"async"),c.TgZ(2,"div",32),c._UZ(3,"app-method-quick-interaction"),c.qZA()()),2&r){const t=c.oxw();let i;c.Q6J("@showList",null==(i=c.lcZ(1,1,t.bpmnJSModels$))?null:i.length)}}function aO(r,e){if(1&r){const t=c.EpF();c.TgZ(0,"mat-icon",36),c.NdJ("click",function(){c.CHM(t);const s=c.oxw().$implicit,u=c.oxw(2);return c.KtG(u.removeFunction(s))}),c._uU(1,"delete_forever"),c.qZA()}}function lO(r,e){if(1&r&&(c.TgZ(0,"div",34)(1,"div",15),c._uU(2),c.qZA(),c.YNc(3,aO,2,0,"mat-icon",35),c.qZA()),2&r){const t=e.$implicit;c.xp6(2),c.Oqu(t.name),c.xp6(1),c.Q6J("ngIf",t.customImplementation)}}function cO(r,e){if(1&r&&(c.TgZ(0,"div"),c.ALo(1,"async"),c.YNc(2,lO,4,2,"div",33),c.ALo(3,"async"),c.qZA()),2&r){const t=c.oxw();let i;c.Q6J("@showList",null==(i=c.lcZ(1,2,t.funcs$))?null:i.length),c.xp6(2),c.Q6J("ngForOf",c.lcZ(3,4,t.funcs$))}}function uO(r,e){if(1&r&&(c.TgZ(0,"div",34)(1,"div",15),c._uU(2),c.qZA()()),2&r){const t=e.$implicit;c.xp6(2),c.Oqu(t.name)}}function hO(r,e){if(1&r&&(c.TgZ(0,"div"),c.ALo(1,"async"),c.YNc(2,uO,3,1,"div",33),c.ALo(3,"async"),c.qZA()),2&r){const t=c.oxw();let i;c.Q6J("@showList",null==(i=c.lcZ(1,2,t.params$))?null:i.length),c.xp6(2),c.Q6J("ngForOf",c.lcZ(3,4,t.params$))}}function dO(r,e){1&r&&(c.TgZ(0,"div",37),c._uU(1," no bpmn model setted "),c.qZA())}const fO=function(){return["blur","enter"]},pO=function(r){return{noBorder:!0,emitOn:r}},mO=function(){return[]};let gO=(()=>{class r{constructor(t,i,s,u){this._bpmnJs=t,this._store=i,this.bpmnJsService=s,this.processBuilderService=u,this.bpmnJSModels$=this._store.select((0,G.JG)()),this.funcs$=this._store.select((0,T.Bc)()),this.params$=this._store.select((0,T.xE)()),this.currentBpmnJSModel$=this._store.select(G.j3),this.currentBpmnJSModelDescription$=this.currentBpmnJSModel$.pipe((0,U.U)(g=>g?.description)),this.hasCurrentBpmnJSModel$=this.currentBpmnJSModel$.pipe((0,U.U)(g=>!!g)),this.currentBpmnJSModelGuid$=this._store.select(G.gl),this.modelsVisible=(0,c.tdS)(!1),this.methodsVisible=(0,c.tdS)(!1),this.paramsVisible=(0,c.tdS)(!1),this.toggleBpmnJsModels=()=>this.modelsVisible.set(!this.modelsVisible()),this.toggleMethods=()=>this.methodsVisible.set(!this.methodsVisible()),this.toggleParams=()=>this.paramsVisible.set(!this.paramsVisible())}blurElement(t,i){i&&(i.stopPropagation(),i.preventDefault()),t.blur()}compile(){var t=this;return(0,ce.Z)(function*(){const i=yield(0,K.z)(t.currentBpmnJSModel$);if(!i)return;const s=yield(0,x.g)(t._store.select((0,C.jp)(i.guid)));s&&t._store.dispatch((0,O.YV)(s)),t.bpmnJsService.compile(i.guid,i?.name??void 0)})()}hideAllHints(){v.clearAllTooltips(this._bpmnJs)}removeFunction(t){this._store.dispatch((0,Q.wU)(t))}removeModel(t){this._store.dispatch((0,L.T9)(t))}renameCurrentModel(t){var i=this;return(0,ce.Z)(function*(){i._store.dispatch((0,L.ZQ)({name:t}))})()}saveDescription(t){this._store.dispatch((0,L.ZQ)({description:t}))}setModel(t){this._store.dispatch((0,L.KW)(t))}logFunctions(){var t=this;return(0,ce.Z)(function*(){const i=yield(0,x.g)(t._store.select((0,T.Bc)()));console.log(i)})()}logParams(){var t=this;return(0,ce.Z)(function*(){const i=yield(0,x.g)(t._store.select((0,T.xE)()));console.log(i)})()}}return r.\u0275fac=function(t){return new(t||r)(c.Y36(ke),c.Y36(ee.yh),c.Y36(pt),c.Y36(Ke))},r.\u0275cmp=c.Xpm({type:r,selectors:[["app-process-builder-wrapper"]],decls:91,vars:56,consts:[[1,"body"],[1,"process-builder-wrapper"],[1,"description-wrapper"],[3,"value","configuration","valueChanged"],[4,"ngIf","ngIfElse"],[1,"control-footer"],["appearance","outline",1,"mat-form-field-outline-white-bg","mat-form-field-no-padding","draft-selection-input"],[3,"value"],["contenteditable","",1,"editable-select-trigger",3,"click","keydown.enter","keydown","focusout"],["element",""],["class","dropdown-option",3,"value","click",4,"ngFor","ngForOf"],[1,"dropdown-interaction-control",3,"click"],[1,"spacer"],[1,"hint",3,"ngClass","mouseleave"],[1,"counter"],[1,"text"],["class","control-footer-item accent",3,"click",4,"ngIf"],[1,"control-footer-item","accent",3,"click"],["matTooltip","more options",1,"control-footer-item","accent",3,"matMenuTriggerFor"],[1,"control-wrapper",2,"display","none"],[1,"option-wrapper"],[1,"headline",3,"click"],[4,"ngIf"],[1,"smgr-menu"],["menu","matMenu"],["mat-menu-item","",1,"inactive",3,"click"],[1,"text",3,"click"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",1,"bordered"],["mat-menu-item","",3,"click"],["noBpmnModelSetted",""],[1,"dropdown-option",3,"value","click"],[1,"quick-interaction-wrapper"],["class","option",4,"ngFor","ngForOf"],[1,"option"],["class","control","color","warn",3,"click",4,"ngIf"],["color","warn",1,"control",3,"click"],[1,"no-bpmn-model-hint"]],template:function(t,i){if(1&t){const s=c.EpF();c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-markdown-editor",3),c.NdJ("valueChanged",function(g){return i.saveDescription(g)}),c.ALo(4,"async"),c.qZA()(),c.YNc(5,iO,1,1,"app-process-builder",4),c.ALo(6,"async"),c.qZA(),c.TgZ(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),c._uU(10),c.ALo(11,"async"),c.qZA(),c.TgZ(12,"mat-select",7),c.ALo(13,"async"),c.TgZ(14,"mat-select-trigger")(15,"div",8,9),c.NdJ("click",function(g){return g.stopPropagation()})("keydown.enter",function(g){c.CHM(s);const I=c.MAs(16);return c.KtG(i.blurElement(I,g))})("keydown",function(g){return g.stopPropagation()})("focusout",function(){c.CHM(s);const g=c.MAs(16);return c.KtG(i.renameCurrentModel(g.innerText))}),c._uU(17),c.ALo(18,"async"),c.qZA()(),c.YNc(19,rO,2,2,"mat-option",10),c.ALo(20,"async"),c.TgZ(21,"mat-option",11),c.NdJ("click",function(){return i.processBuilderService.createBpmnJsModel()}),c._uU(22," Add new draft "),c.qZA()()(),c._UZ(23,"div",12),c.TgZ(24,"div",13),c.NdJ("mouseleave",function(){return i.hideAllHints()}),c.ALo(25,"async"),c.TgZ(26,"span",14),c._uU(27),c.ALo(28,"async"),c.qZA(),c.TgZ(29,"span",15),c._uU(30,"errors"),c.qZA()(),c.TgZ(31,"div",13),c.NdJ("mouseleave",function(){return i.hideAllHints()}),c.ALo(32,"async"),c.TgZ(33,"span",14),c._uU(34),c.ALo(35,"async"),c.qZA(),c.TgZ(36,"span",15),c._uU(37,"warn's"),c.qZA()(),c.YNc(38,oO,3,1,"div",16),c.ALo(39,"async"),c.TgZ(40,"div",17),c.NdJ("click",function(){return i.compile()}),c.TgZ(41,"mat-icon"),c._uU(42,"play_arrow"),c.qZA()(),c.TgZ(43,"div",18)(44,"mat-icon"),c._uU(45,"more_horiz"),c.qZA()()(),c.TgZ(46,"div",19)(47,"div",20)(48,"div",21),c.NdJ("click",function(){return i.toggleBpmnJsModels()}),c.TgZ(49,"span",15),c._uU(50,"BPMN Models"),c.qZA(),c.TgZ(51,"span",14),c._uU(52),c.ALo(53,"async"),c.qZA()(),c.YNc(54,sO,4,3,"div",22),c.qZA(),c.TgZ(55,"div",20)(56,"div",21),c.NdJ("click",function(){return i.toggleMethods()}),c.TgZ(57,"span",15),c._uU(58,"Functions"),c.qZA(),c.TgZ(59,"span",14),c._uU(60),c.ALo(61,"async"),c.qZA()(),c.YNc(62,cO,4,6,"div",22),c.qZA(),c.TgZ(63,"div",20)(64,"div",21),c.NdJ("click",function(){return i.toggleParams()}),c.TgZ(65,"span",15),c._uU(66,"Params"),c.qZA(),c.TgZ(67,"span",14),c._uU(68),c.ALo(69,"async"),c.qZA()(),c.YNc(70,hO,4,6,"div",22),c.qZA()()(),c.TgZ(71,"mat-menu",23,24)(73,"div",25),c.NdJ("click",function(g){return g.stopPropagation()}),c.TgZ(74,"span",26),c.NdJ("click",function(){return i.bpmnJsService.zoomIn()}),c._uU(75,"zoom in"),c.qZA()(),c.TgZ(76,"div",25),c.NdJ("click",function(g){return g.stopPropagation()}),c.TgZ(77,"span",26),c.NdJ("click",function(){return i.bpmnJsService.zoomOut()}),c._uU(78,"zoom out"),c.qZA()(),c.TgZ(79,"div",27),c.NdJ("click",function(){return i.bpmnJsService.saveCurrentBpmnModel(!0)}),c.ALo(80,"async"),c.TgZ(81,"span",15),c._uU(82,"save model"),c.qZA()(),c.TgZ(83,"div",28)(84,"span",15),c._uU(85,"run pipeline"),c.qZA()(),c.TgZ(86,"div",29),c.NdJ("click",function(){return i.processBuilderService.resetLocalState()}),c.TgZ(87,"span",15),c._uU(88,"reset environment"),c.qZA()()(),c.YNc(89,dO,2,0,"ng-template",null,30,c.W1O)}if(2&t){const s=c.MAs(72),u=c.MAs(90);let g,I,B,ne,fe,ye,Ne,je,ze;c.xp6(3),c.Q6J("value",c.lcZ(4,22,i.currentBpmnJSModelDescription$))("configuration",c.VKq(53,pO,c.DdM(52,fO))),c.xp6(2),c.Q6J("ngIf",c.lcZ(6,24,i.hasCurrentBpmnJSModel$))("ngIfElse",u),c.xp6(5),c.hij("current draft (total: ",null!==(g=null==(g=c.lcZ(11,26,i.bpmnJSModels$))?null:g.length)&&void 0!==g?g:0,")"),c.xp6(2),c.Q6J("value",c.lcZ(13,28,i.currentBpmnJSModelGuid$)),c.xp6(5),c.hij(" ",null!==(I=null==(I=c.lcZ(18,30,i.currentBpmnJSModel$))?null:I.name)&&void 0!==I?I:"no name"," "),c.xp6(2),c.Q6J("ngForOf",null!==(B=c.lcZ(20,32,i.bpmnJSModels$))&&void 0!==B?B:c.DdM(55,mO)),c.xp6(5),c.Q6J("ngClass",c.lcZ(25,34,i.bpmnJsService.validationContainsErrors$)?"error":"success"),c.xp6(3),c.Oqu(null!==(ne=null==(ne=c.lcZ(28,36,i.bpmnJsService.validation$))||null==ne.errors?null:ne.errors.length)&&void 0!==ne?ne:0),c.xp6(4),c.Q6J("ngClass",(null!==(fe=null==(fe=c.lcZ(32,38,i.bpmnJsService.validation$))||null==fe.warnings?null:fe.warnings.length)&&void 0!==fe?fe:0)>0?"warning":"success"),c.xp6(3),c.Oqu(null!==(ye=null==(ye=c.lcZ(35,40,i.bpmnJsService.validation$))||null==ye.warnings?null:ye.warnings.length)&&void 0!==ye?ye:0),c.xp6(4),c.Q6J("ngIf",c.lcZ(39,42,i.bpmnJsService.containsChanges$)),c.xp6(2),c.Q6J("@fadeIn",void 0),c.xp6(3),c.Q6J("matMenuTriggerFor",s),c.xp6(9),c.hij(" ",null==(Ne=c.lcZ(53,44,i.bpmnJSModels$))?null:Ne.length," "),c.xp6(2),c.Q6J("ngIf",i.modelsVisible()),c.xp6(6),c.hij(" ",null==(je=c.lcZ(61,46,i.funcs$))?null:je.length," "),c.xp6(2),c.Q6J("ngIf",i.methodsVisible()),c.xp6(6),c.hij(" ",null==(ze=c.lcZ(69,48,i.params$))?null:ze.length," "),c.xp6(2),c.Q6J("ngIf",i.paramsVisible()),c.xp6(9),c.Q6J("disabled",!c.lcZ(80,50,i.bpmnJsService.containsChanges$))}},dependencies:[P.mk,P.sg,P.O5,St.Hw,Ze.KE,Ze.hX,Ct.VK,Ct.OP,Ct.p6,Rt.gD,Rt.$L,yt.ey,hn.gM,MA,JA,nO,P.Ov],styles:['.body[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:-webkit-fill-available;width:-webkit-fill-available}.body[_ngcontent-%COMP%]   .control-footer[_ngcontent-%COMP%]{background-color:#ffffff45;display:flex;align-items:center;padding:.5rem 1rem;box-shadow:0 0 .5rem #e4e4e4}.body[_ngcontent-%COMP%]   .control-footer[_ngcontent-%COMP%]   .control-footer-item[_ngcontent-%COMP%]{height:3rem;width:3rem;display:flex;align-items:center;justify-content:center;color:#fff;border-radius:2px;box-shadow:0 0 4px #848484;cursor:pointer;margin-left:.2rem}.body[_ngcontent-%COMP%]   .control-footer[_ngcontent-%COMP%]   .control-footer-item[_ngcontent-%COMP%]:hover{opacity:.8}.body[_ngcontent-%COMP%]   .control-footer[_ngcontent-%COMP%]   .control-footer-item.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0078d4,rgba(0,120,212,.7411764706),#0078d4)}.body[_ngcontent-%COMP%]   .control-footer[_ngcontent-%COMP%]   .control-footer-item.accent[_ngcontent-%COMP%]{background:linear-gradient(135deg,#444444,rgba(68,68,68,.7803921569),#444444)}.body[_ngcontent-%COMP%]   .control-footer[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{max-width:100px;border-radius:3px;color:#fff;display:flex;flex-direction:column;justify-content:center;align-items:center;height:48px;width:48px;padding:2px 4px;box-sizing:border-box;box-shadow:0 0 4px #848484;cursor:pointer;margin-left:4px}.body[_ngcontent-%COMP%]   .control-footer[_ngcontent-%COMP%]   .hint.success[_ngcontent-%COMP%]{background:linear-gradient(135deg,#88c057,rgba(136,192,87,.7725490196),#88c057)}.body[_ngcontent-%COMP%]   .control-footer[_ngcontent-%COMP%]   .hint.error[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e22500,rgba(226,37,0,.7490196078),#e22500)}.body[_ngcontent-%COMP%]   .control-footer[_ngcontent-%COMP%]   .hint.warning[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e28b00,rgba(226,139,0,.8431372549),#e28b00)}.body[_ngcontent-%COMP%]   .control-footer[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.body[_ngcontent-%COMP%]   .control-footer[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:.6rem;line-height:.6rem;font-weight:100}.body[_ngcontent-%COMP%]   .control-footer[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{box-sizing:border-box;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;font-size:10px;line-height:12px}.body[_ngcontent-%COMP%]   .control-footer[_ngcontent-%COMP%]   .draft-selection-input[_ngcontent-%COMP%]{width:min(30%,300px);min-width:150px}.body[_ngcontent-%COMP%]   .control-footer[_ngcontent-%COMP%]   .draft-selection-input[_ngcontent-%COMP%]     label{top:18px!important}.body[_ngcontent-%COMP%]   .control-footer[_ngcontent-%COMP%]   .draft-selection-input[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.body[_ngcontent-%COMP%]   .control-footer[_ngcontent-%COMP%]   .draft-selection-input[_ngcontent-%COMP%]     .mat-mdc-form-field-infix{padding-top:8px;padding-bottom:8px;min-height:unset}.body[_ngcontent-%COMP%]   .control-footer[_ngcontent-%COMP%]   .draft-selection-input[_ngcontent-%COMP%]     .mat-mdc-floating-label:not(.mdc-floating-label--float-above){top:20px}.body[_ngcontent-%COMP%]   .control-wrapper[_ngcontent-%COMP%]{position:absolute;background-color:#fff;width:min(20vw,300px);box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f;z-index:100;right:1rem;top:1rem;padding:.2rem .4rem;max-height:calc(100vh - 2rem);overflow-y:auto}.body[_ngcontent-%COMP%]   .control-wrapper[_ngcontent-%COMP%]   .option-wrapper[_ngcontent-%COMP%]{padding:.2rem .4rem}.body[_ngcontent-%COMP%]   .control-wrapper[_ngcontent-%COMP%]   .option-wrapper[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid lightgray;margin-bottom:.2rem}.body[_ngcontent-%COMP%]   .control-wrapper[_ngcontent-%COMP%]   .option-wrapper[_ngcontent-%COMP%] > .headline[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.body[_ngcontent-%COMP%]   .control-wrapper[_ngcontent-%COMP%]   .option-wrapper[_ngcontent-%COMP%] > .headline[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{flex:1;font-weight:500}.body[_ngcontent-%COMP%]   .control-wrapper[_ngcontent-%COMP%]   .option-wrapper[_ngcontent-%COMP%] > .headline[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]{width:1rem;height:1rem;display:inline-flex;align-items:center;justify-content:center;background-color:#303030;color:#fff;font-size:.6rem;border-radius:2px;margin-right:.25rem}.body[_ngcontent-%COMP%]   .control-wrapper[_ngcontent-%COMP%]   .option-wrapper[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.2rem 0px}.body[_ngcontent-%COMP%]   .control-wrapper[_ngcontent-%COMP%]   .option-wrapper[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:.7rem;flex:1;color:#3c3c3c;cursor:pointer}.body[_ngcontent-%COMP%]   .control-wrapper[_ngcontent-%COMP%]   .option-wrapper[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]:hover{color:#d3d3d3}.body[_ngcontent-%COMP%]   .control-wrapper[_ngcontent-%COMP%]   .option-wrapper[_ngcontent-%COMP%]   .option.active[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:#0097a7}.body[_ngcontent-%COMP%]   .control-wrapper[_ngcontent-%COMP%]   .option-wrapper[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{cursor:pointer}.body[_ngcontent-%COMP%]   .control-wrapper[_ngcontent-%COMP%]   .option-wrapper[_ngcontent-%COMP%]   .quick-interaction-wrapper[_ngcontent-%COMP%]{width:100%;margin-right:1rem;box-sizing:border-box;padding:.5rem 0px}.body[_ngcontent-%COMP%]   .process-builder-wrapper[_ngcontent-%COMP%]{flex:1;overflow:hidden}.body[_ngcontent-%COMP%]   .process-builder-wrapper[_ngcontent-%COMP%]   .description-wrapper[_ngcontent-%COMP%]{box-shadow:0 0 .5rem #e4e4e4;position:absolute;top:1rem;right:1rem;background-color:#ffffffab;border-radius:2px;color:#505050;max-width:30vw;width:30rem;max-height:30vh;height:20rem;z-index:1;font-size:.8rem}.body[_ngcontent-%COMP%]   .process-builder-wrapper[_ngcontent-%COMP%]   .description-wrapper[_ngcontent-%COMP%]:empty:before{content:"no description";color:#555}.no-bpmn-model-hint[_ngcontent-%COMP%]{font-weight:100;font-family:monospace;display:flex;align-items:center;justify-content:center;height:-webkit-fill-available;width:-webkit-fill-available}'],data:{animation:[V.B,J.C]}}),r})();var vO=xe(7515);function vp(r,e){var t=this;r.on(["render.shape","render.connection"],e=e||1e3,function(i,s){var u=i.type,g=s.element,I=s.gfx,B=s.attrs;if(t.canRender(g))return"render.shape"===u?t.drawShape(I,g,B):t.drawConnection(I,g,B)}),r.on(["render.getShapePath","render.getConnectionPath"],e,function(i,s){if(t.canRender(s))return"render.getShapePath"===i.type?t.getShapePath(s):t.getConnectionPath(s)})}function yp(r,e){return function ex(r,e){return e.appendChild(function fw(r,e){if(r.ownerDocument!==e.ownerDocument)try{return e.ownerDocument.importNode(r,!0)}catch{}return r}(r,e))}(e,r),r}vp.prototype.canRender=function(r){},vp.prototype.drawShape=function(r,e){},vp.prototype.drawConnection=function(r,e){},vp.prototype.getShapePath=function(r){},vp.prototype.getConnectionPath=function(r){};var pw=2,tx={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":pw,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":pw,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function nx(r,e,t){var i=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),s=tx[i];s?(s===pw&&"number"==typeof t&&(t=String(t)+"px"),r.style[i]=t):r.setAttributeNS(null,e,t)}function Gl(r,e,t){if("string"==typeof e){if(void 0===t)return function bO(r,e){return tx[e]?r.style[e]:r.getAttributeNS(null,e)}(r,e);nx(r,e,t)}else!function CO(r,e){var i,s,t=Object.keys(e);for(i=0;s=t[i];i++)nx(r,s,e[s])}(r,e);return r}const wO=Object.prototype.toString;function Jc(r){if(!r||!r.nodeType)throw new Error("A DOM element reference is required");this.el=r,this.list=r.classList}function xO(r){var e=r.parentNode;return e&&e.removeChild(r),r}Jc.prototype.add=function(r){return this.list.add(r),this},Jc.prototype.remove=function(r){return"[object RegExp]"==wO.call(r)?this.removeMatching(r):(this.list.remove(r),this)},Jc.prototype.removeMatching=function(r){const e=this.array();for(let t=0;t<e.length;t++)r.test(e[t])&&this.remove(e[t]);return this},Jc.prototype.toggle=function(r,e){return typeof e<"u"?e!==this.list.toggle(r,e)&&this.list.toggle(r):this.list.toggle(r),this},Jc.prototype.array=function(){return Array.from(this.list)},Jc.prototype.has=Jc.prototype.contains=function(r){return this.list.contains(r)};var mw={svg:"http://www.w3.org/2000/svg"},rx='<svg xmlns="'+mw.svg+'"';function zh(r,e){var t;return"<"===r.charAt(0)?(t=function ox(r){var e=!1;"<svg"===r.substring(0,4)?-1===r.indexOf(mw.svg)&&(r=rx+r.substring(4)):(r=rx+">"+r+"</svg>",e=!0);var t=function AO(r){var e;return(e=new DOMParser).async=!1,e.parseFromString(r,"text/xml")}(r);if(!e)return t;for(var i=document.createDocumentFragment(),s=t.firstChild;s.firstChild;)i.appendChild(s.firstChild);return i}(r).firstChild,t=document.importNode(t,!0)):t=document.createElementNS(mw.svg,r),e&&Gl(t,e),t}const $v=Object.prototype.toString,$O=Object.prototype.hasOwnProperty;function BO(r,e){return $O.call(r,e)}function oo(r,e){let t,i;if(function Mv(r){return void 0===r}(r))return;const s=function bw(r){return"[object Array]"===$v.call(r)}(r)?QO:VO;for(let u in r)if(BO(r,u)&&(t=r[u],i=e(t,s(u)),!1===i))return t}function GO(r,e){return!!function DO(r,e){const t=function dC(r){return function cx(r){const e=$v.call(r);return"[object Function]"===e||"[object AsyncFunction]"===e||"[object GeneratorFunction]"===e||"[object AsyncGeneratorFunction]"===e||"[object Proxy]"===e}(r)?r:e=>e===r}(e);let i;return oo(r,function(s,u){if(t(s,u))return i=s,!1}),i}(r,e)}function VO(r){return r}function QO(r){return Number(r)}const qO={__init__:["customContextPad","customRenderer","paletteProvider"],customRenderer:["type",(()=>{class r extends vp{constructor(t,i){super(t,1500),this.eventBus=t,this.bpmnRenderer=i}canRender(t){return function XO(r,e){return GO(e,function(t){return function UO(r,e){var t=function KO(r){return r&&r.businessObject||r}(r);return t&&"function"==typeof t.$instanceOf&&t.$instanceOf(e)}(r,t)})}(t,["bpmn:DataObjectReference"])&&!t.labelTarget}drawShape(t,i){const s=this.bpmnRenderer.drawShape(t,i),u=v.getSLPBExtension(i.businessObject,"DataObjectExtension",I=>I.matchesProcessOutputInterface),g=v.getSLPBExtension(i.businessObject,"DataObjectExtension",I=>I.isProcessOutput);if(u){let I="translate(-10, 0)";Gl(r.drawRect(t,20,20,r.TASK_BORDER_RADIUS,"#e8e8e8"),{transform:I}),g&&Gl(r.drawCheckmark(t,20,20),{transform:I})}return s}static drawRect(t,i,s,u,g="#000",I="#fff"){const B=zh("rect");return Gl(B,{width:i,height:s,rx:u,ry:u,stroke:g,strokeWidth:2,fill:I}),yp(t,B),B}static drawCheckmark(t,i,s){const u=zh("path");return Gl(u,{d:`M${i/4} ${s/2}, L${i/2} ${s-4}, L${i} 4`,style:"stroke: #7cbe4f;stroke-width:3;fill:none;"}),yp(t,u),u}static prependTo(t,i,s){i.insertBefore(t,s||i.firstChild)}}return r.$inject=["eventBus","bpmnRenderer"],r.TASK_BORDER_RADIUS=10,r})()],customContextPad:["type",(()=>{class r{constructor(t,i,s,u,g){this.autoPlace=t,this.contextPad=i,this.create=s,this.elementFactory=u,this.connect=g,i.registerProvider(this)}getContextPadEntries(t){let i={};switch(this._addDeleteAction(i,t),t.type){case y_Task:0===t.outgoing.filter(g=>g.type===y_SequenceFlow).length&&(this._addAddEndEventAction(i,t),this._addAppendTaskAction(i,t,this.elementFactory,this.create,this.autoPlace),this._addConnectAction(i,t,this.connect),this._addAddExclusiveGatewayAction(i,t,this.elementFactory,this.create,this.autoPlace));break;case y_ExclusiveGateway:const u=t.outgoing.map(g=>v.getSLPBExtension(g.businessObject,"SequenceFlowExtension",I=>I.sequenceFlowType));["success","error"].some(g=>-1===u.indexOf(g))&&(this._addAppendTaskAction(i,t,this.elementFactory,this.create,this.autoPlace),this._addAddEndEventAction(i,t)),this._addConnectAction(i,t,this.connect);break;case"bpmn:StartEvent":this._addConnectAction(i,t,this.connect),this._addAppendTaskAction(i,t,this.elementFactory,this.create,this.autoPlace)}return s=>i}_addAppendTaskAction(t,i,s,u,g){t["append.append-task"]={group:"model",className:"bpmn-icon-task",title:"Append Task",action:{click:()=>{const I=s.createShape({type:y_Task});g.append(i,I)}}}}_addAddEndEventAction(t,i){t["append.end-event"]={group:"model",className:"bpmn-icon-end-event-none",title:"Append End Event",action:{click:()=>{pt.elementEndEventCreationRequested.next(i)}}}}_addConnectAction(t,i,s,u=!1){t.connect={group:"edit",className:"bpmn-icon-connection-multi",title:"Connect",action:{click:g=>{s.start(g,i,u)}}}}_addDeleteAction(t,i){t.delete={group:"edit",className:"bpmn-icon-trash",title:"Remove",action:{click:()=>pt.elementDeletionRequested$.next(i)}}}_addAddExclusiveGatewayAction(t,i,s,u,g){t["append.exclusive-gateway"]={group:"model",className:"bpmn-icon-gateway-xor",title:"Append an exclusive gateway",action:{click:()=>{const I=s.createShape({type:y_ExclusiveGateway});g.append(i,I)}}}}}return r.$inject=["autoPlace","contextPad","create","elementFactory","connect"],r})()],paletteProvider:["type",(()=>{class r{constructor(t,i,s,u,g,I,B,ne){this.autoPlace=t,this.create=i,this.elementFactory=s,this.handTool=g,this.lassoTool=I,this.spaceTool=B,this.globalConnect=ne,u.registerProvider(this)}getPaletteEntries(){return{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:"Activate the hand tool",action:i=>this.handTool.activateHand(i)},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:"Activate the lasso tool",action:i=>this.lassoTool.activateSelection(i)},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:"Activate the create/remove space tool",action:i=>this.spaceTool.activateSelection(i)},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:"Connect elements",action:i=>this.globalConnect.toggle(i)},"create.start-event":{action:i=>{const s=this.elementFactory.createShape({type:"bpmn:StartEvent"});this.create.start(i,s)},className:"bpmn-icon-start-event-none",group:"model",title:"Create start event"},"create.task":{action:i=>{const s=this.elementFactory.createShape({type:y_Task});this.create.start(i,s)},className:"bpmn-icon-task",group:"model",title:"Create task"},"create.exclusive-gateway":{action:i=>{const s=this.elementFactory.createShape({type:y_ExclusiveGateway});this.create.start(i,s)},className:"bpmn-icon-gateway-xor",group:"model",title:"Create exclusive gateway"},"create.end-event":{action:i=>{const s=this.elementFactory.createShape({type:y_EndEvent});this.create.start(i,s)},className:"bpmn-icon-end-event-none",group:"model",title:"Create end event"}}}}return r.$inject=["autoPlace","create","elementFactory","palette","handTool","lassoTool","spaceTool","globalConnect"],r})()]};function JO(r,e){return e.forEach(function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach(function(i){if("default"!==i&&!(i in r)){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}})}),Object.freeze(r)}const eI=Object.prototype.toString,tI=Object.prototype.hasOwnProperty;function rI(r,e){return tI.call(r,e)}function ux(r,e){let t,i;if(function nI(r){return void 0===r}(r))return;const s=function iI(r){return"[object Array]"===eI.call(r)}(r)?sI:oI;for(let u in r)if(rI(r,u)&&(t=r[u],i=e(t,s(u)),!1===i))return t}function oI(r){return r}function sI(r){return Number(r)}function Aw(r,...e){const t=r.style;return ux(e,function(i){i&&ux(i,function(s,u){t[u]=s})}),r}const lI=Object.prototype.toString;function hx(r){return new eu(r)}function eu(r){if(!r||!r.nodeType)throw new Error("A DOM element reference is required");this.el=r,this.list=r.classList}function dx(r,e){return r&&"function"==typeof r.matches&&r.matches(e)}eu.prototype.add=function(r){return this.list.add(r),this},eu.prototype.remove=function(r){return"[object RegExp]"==lI.call(r)?this.removeMatching(r):(this.list.remove(r),this)},eu.prototype.removeMatching=function(r){const e=this.array();for(let t=0;t<e.length;t++)r.test(e[t])&&this.remove(e[t]);return this},eu.prototype.toggle=function(r,e){return typeof e<"u"?e!==this.list.toggle(r,e)&&this.list.toggle(r):this.list.toggle(r),this},eu.prototype.array=function(){return Array.from(this.list)},eu.prototype.has=eu.prototype.contains=function(r){return this.list.contains(r)};var pC,Ow,Iw,fC={};function fx(){pC=window.addEventListener?"addEventListener":"attachEvent",Ow=window.removeEventListener?"removeEventListener":"detachEvent",Iw="addEventListener"!==pC?"on":""}var mC,px=JO({__proto__:null,bind:fC.bind=function(r,e,t,i){return pC||fx(),r[pC](Iw+e,t,i||!1),t},unbind:fC.unbind=function(r,e,t,i){return Ow||fx(),r[Ow](Iw+e,t,i||!1),t},default:fC},[fC]),mx=["focus","blur"],_w_bind=function dI(r,e,t,i,s){return-1!==mx.indexOf(t)&&(s=!0),px.bind(r,t,function(u){u.delegateTarget=function cI(r,e,t){for(var i=t?r:r.parentNode;i&&i.nodeType!==document.DOCUMENT_NODE&&i.nodeType!==document.DOCUMENT_FRAGMENT_NODE;){if(dx(i,e))return i;i=i.parentNode}return dx(i,e)?i:null}(u.target||u.srcElement,e,!0),u.delegateTarget&&i.call(r,u)},s)},gx=!1;typeof document<"u"&&((mC=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',gx=!mC.getElementsByTagName("link").length,mC=void 0);var qi={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:gx?[1,"X<div>","</div>"]:[0,"",""]};qi.td=qi.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],qi.option=qi.optgroup=[1,'<select multiple="multiple">',"</select>"],qi.thead=qi.tbody=qi.colgroup=qi.caption=qi.tfoot=[1,"<table>","</table>"],qi.polyline=qi.ellipse=qi.polygon=qi.circle=qi.text=qi.line=qi.path=qi.rect=qi.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var Sw=function mI(r,e){if("string"!=typeof r)throw new TypeError("String expected");e||(e=document);var t=/<([\w:]+)/.exec(r);if(!t)return e.createTextNode(r);r=r.replace(/^\s+|\s+$/g,"");var i=t[1];if("body"==i)return(B=e.createElement("html")).innerHTML=r,B.removeChild(B.lastChild);var B,s=Object.prototype.hasOwnProperty.call(qi,i)?qi[i]:qi._default,u=s[0],g=s[1],I=s[2];for((B=e.createElement("div")).innerHTML=g+r+I;u--;)B=B.lastChild;if(B.firstChild==B.lastChild)return B.removeChild(B.firstChild);for(var ne=e.createDocumentFragment();B.firstChild;)ne.appendChild(B.removeChild(B.firstChild));return ne};function vx(r){r.parentNode&&r.parentNode.removeChild(r)}function yx(r,e,t){return t||(t="round"),Math[t](r/e)*e}function bI(r){return function xI(r){return!!r.waypoints}(r)?function yI(r){for(var e=r.waypoints,t=e.reduce(function(ne,fe,ye){var Ne=e[ye-1];if(Ne){var je=ne[ne.length-1],ze=je&&je.endLength||0,At=function wI(r,e){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))}(Ne,fe);ne.push({start:Ne,end:fe,startLength:ze,endLength:ze+At,length:At})}return ne},[]),s=t.reduce(function(ne,fe){return ne+fe.length},0)/2,u=0,g=t[u];g.endLength<s;)g=t[++u];var I=(s-g.startLength)/g.length;return{x:g.start.x+(g.end.x-g.start.x)*I,y:g.start.y+(g.end.y-g.start.y)*I}}(r):function vI(r){return function vC(r){return{x:Math.round(r.x),y:Math.round(r.y)}}({x:r.x+(r.width||0)/2,y:r.y+(r.height||0)/2})}(r)}xe(1815);function Uh(r,e){this._canvas=r,this._visible=!1;var t=this;e.on("diagram.init",function(){t._init()}),e.on("gridSnapping.toggle",function(i){t.toggle(i.active),t._centerGridAroundViewbox()}),e.on("canvas.viewbox.changed",function(i){t._centerGridAroundViewbox(i.viewbox)})}Uh.prototype._init=function(){var r=function gI(r,e){return(e=e||document).querySelector(r)}("defs",this._canvas._svg);r||(r=zh("defs"),yp(this._canvas._svg,r));var e=this._pattern=zh("pattern"),t="djs-grid-pattern-"+function II(){return Math.trunc(1e6*Math.random())}();Gl(e,{id:t,width:10,height:10,patternUnits:"userSpaceOnUse"});var i=this._circle=zh("circle");Gl(i,{cx:.5,cy:.5,r:.5,fill:"#ccc"}),yp(e,i),yp(r,e),Gl(this._gfx=zh("rect"),{x:-5e4,y:-5e4,width:1e5,height:1e5,fill:`url(#${t})`})},Uh.prototype._centerGridAroundViewbox=function(r){r||(r=this._canvas.viewbox());var e=bI(r);Gl(this._gfx,{x:-5e4+yx(e.x,10),y:-5e4+yx(e.y,10)})},Uh.prototype.isVisible=function(){return this._visible},Uh.prototype.toggle=function(r){if(typeof r>"u"&&(r=!this._visible),r!==this._visible){var e=this._getParent();r?yp(e,this._gfx):function ix(r){for(var e;e=r.firstChild;)xO(e);return r}(e),this._visible=r}},Uh.prototype._getParent=function(){return this._canvas.getLayer("djs-grid",-2)},Uh.$inject=["canvas","eventBus"];const _I={__init__:["grid"],grid:["type",Uh]};var ms=xe(3532);function SI(){return function(r,e){if((0,ms.isObject)(r))return r;if(!r&&e.defaultValue)return e.defaultValue;var t=r.split(/,/);if(2!==t.length)throw new Error("expected delta to match (\\d*,\\d*)");return{x:parseInt(t[0],10)||0,y:parseInt(t[1],10)||0}}}function Cx(r){return function(e,t){if((0,ms.isObject)(e))return e;var i=r.get(e);if(!i){if(t.optional)return null;throw e?new Error("element with id <"+e+"> does not exist"):new Error("argument required")}return i}}function wx(r){return function(e,t){return(0,ms.isString)(e)?e=e.split(","):(0,ms.isArray)(e)||(e=[e]),e.map(function(i){if((0,ms.isObject)(i))return i;var s=r.get(i);if(!s){if(t.optional)return null;throw i?new Error("element with id <"+i+"> does not exist"):new Error("argument required")}return s}).filter(function(i){return i})}}function xx(r){return function(e,t){const i=r.element(e,t).parse(e);if(i&&i.waypoints)throw new Error("element <"+e+"> is a connection");return i}}function Ax(r){return function(e,t){return r.elements(e,t).parse(e).filter(function(i){if(i.waypoints)throw new Error("element <"+i.id+"> is a connection");return!0})}}Cx.$inject=["elementRegistry"],wx.$inject=["elementRegistry"],xx.$inject=["cli._params"],Ax.$inject=["cli._params"];var EI=xe(8992),kI=xe.n(EI),TI=xe(8823),PI=xe.n(TI),RI=xe(2516),$I=xe.n(RI),MI=xe(7709),NI=xe.n(MI),LI=xe(3750),BI=xe.n(LI),DI=xe(3261),FI=xe.n(DI),WI=xe(9597),GI=xe.n(WI),jI=xe(4743),ZI=xe.n(jI),VI=xe(3145),QI=xe.n(VI),HI=xe(2368),zI=xe.n(HI),UI=xe(8952),XI=xe.n(UI),KI=xe(768),YI=xe.n(KI),qI=xe(5877),JI=xe.n(qI),e_=xe(8474),t_=xe.n(e_),n_=xe(2208),i_=xe.n(n_);function Ox(r){r._registerParser("point",SI),r._registerParser("element",Cx),r._registerParser("elements",wx),r._registerParser("shape",xx),r._registerParser("shapes",Ax),r._registerCommand("append",kI()),r._registerCommand("connect",$I()),r._registerCommand("color",PI()),r._registerCommand("create",NI()),r._registerCommand("element",BI()),r._registerCommand("elements",FI()),r._registerCommand("move",GI()),r._registerCommand("redo",ZI()),r._registerCommand("save",QI()),r._registerCommand("setLabel",zI()),r._registerCommand("setRoot",XI()),r._registerCommand("undo",YI()),r._registerCommand("removeShape",JI()),r._registerCommand("removeConnection",t_()),r._registerCommand("remove",i_())}function Ix(r){return Array.prototype.slice.call(r)}function o_(){return function(r,e){if((0,ms.isArray)(r)&&(r=r.join(" ")),""===r||r)return r;if(e.defaultValue)return e.defaultValue;throw new Error("no value given")}}function s_(){return function(r,e){if(r)return r&&"false"!==r;if(e.defaultValue)return e.defaultValue;if(!e.optional)throw new Error("no value given")}}function a_(){return function(r,e){if(0===r||r)return(0,ms.isNumber)(r)?r:parseFloat(r,10);if(e.defaultValue)return e.defaultValue;throw new Error("no value given")}}function Ba(r,e){this._commands={},this._params={},this._injector=e,this._registerParsers(),this._registerCommands(),this._bind(r)}Ox.$inject=["cli"],Ba.$inject=["config","injector"],(Ba.prototype={})._bind=function(r){r.cli&&r.cli.bindTo&&(console.info("bpmn-js-cli is available via window."+r.cli.bindTo),window[r.cli.bindTo]=this)},Ba.prototype._registerParser=function(r,e){var t=this._injector.invoke(e);if(!(0,ms.isFunction)(t))throw new Error("parser must be a Function<String, Object> -> Object");this._params[r]=function r_(r){return function(e,t){return{name:e,parse:function(i){return r(i,t||{})}}}}(t)},Ba.prototype._registerCommand=function(r,e){var t=(0,ms.isFunction)(e)?this._injector.invoke(e):e;t.args=t.args||[],this._commands[r]=t;var i=this;this[r]=function(){var s=Ix(arguments);return s.unshift(r),i.exec.apply(i,s)}},Ba.prototype._registerParsers=function(){this._registerParser("string",o_),this._registerParser("number",a_),this._registerParser("bool",s_)},Ba.prototype._registerCommands=function(){var r=this;this._registerCommand("help",{exec:function(){var e="available commands:\n";return(0,ms.forEach)(r._commands,function(t,i){e+="\n\t"+i}),e}})},Ba.prototype.parseArguments=function(r,e){var t=[],i=e.args.length-1;return(0,ms.forEach)(e.args,function(s,u){var g;g=u===i&&r.length>e.args.length?r.slice(u):r[u];try{t.push(s.parse(g))}catch(I){throw new Error("could not parse <"+s.name+">: "+I.message)}}),t},Ba.prototype.exec=function(){var r=[];Ix(arguments).forEach(function(u){(0,ms.isString)(u)?r=r.concat(u.split(/\s+/)):r.push(u)});var i,s,e=r.shift(),t=this._commands[e];if(!t)throw new Error("no command <"+e+">, execute <commands> to get a list of available commands");try{i=this.parseArguments(r,t),s=t.exec.apply(this,i)}catch(u){throw new Error("failed to execute <"+e+"> with args <["+r.join(", ")+"]> : "+u.stack)}return s};const l_={__init__:["cliInitializer"],cli:["type",Ba],cliInitializer:["type",Ox]};function _x(r){this._counter=0,this._prefix=(r?r+"-":"")+Math.floor(1e9*Math.random())+"-"}_x.prototype.next=function(){return this._prefix+ ++this._counter};var c_=new _x("tt");function Ew(r,e){r.style.display=!1===e?"none":""}var Sx="djs-tooltip",kw="."+Sx;function so(r,e){this._eventBus=r,this._canvas=e,this._ids=c_,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=function u_(r){var e=Sw('<div class="djs-tooltip-container" />');return Aw(e,{position:"absolute",width:"0",height:"0"}),r.insertBefore(e,r.firstChild),e}(e.getContainer());var t=this;_w_bind(this._tooltipRoot,kw,"mousedown",function(i){i.stopPropagation()}),_w_bind(this._tooltipRoot,kw,"mouseover",function(i){t.trigger("mouseover",i)}),_w_bind(this._tooltipRoot,kw,"mouseout",function(i){t.trigger("mouseout",i)}),this._init()}so.$inject=["eventBus","canvas"],so.prototype.add=function(r){if(!r.position)throw new Error("must specifiy tooltip position");if(!r.html)throw new Error("must specifiy tooltip html");var e=this._ids.next();return r=function HO(r,...e){return Object.assign(r,...e)}({},this._tooltipDefaults,r,{id:e}),this._addTooltip(r),r.timeout&&this.setTimeout(r),e},so.prototype.trigger=function(r,e){var i=this.get(function aI(r,e,t){return 2==arguments.length?r.getAttribute(e):null===t?r.removeAttribute(e):(r.setAttribute(e,t),r)}(e.delegateTarget||e.target,"data-tooltip-id"));i&&("mouseover"===r&&i.timeout&&this.clearTimeout(i),"mouseout"===r&&i.timeout&&(i.timeout=1e3,this.setTimeout(i)))},so.prototype.get=function(r){return"string"!=typeof r&&(r=r.id),this._tooltips[r]},so.prototype.clearTimeout=function(r){if(r=this.get(r)){var e=r.removeTimer;e&&(clearTimeout(e),r.removeTimer=null)}},so.prototype.setTimeout=function(r){if(r=this.get(r)){this.clearTimeout(r);var e=this;r.removeTimer=setTimeout(function(){e.remove(r)},r.timeout)}},so.prototype.remove=function(r){var e=this.get(r);e&&(vx(e.html),vx(e.htmlContainer),delete e.htmlContainer,delete this._tooltips[e.id])},so.prototype.show=function(){Ew(this._tooltipRoot)},so.prototype.hide=function(){Ew(this._tooltipRoot,!1)},so.prototype._updateRoot=function(r){var e=r.scale||1,t=r.scale||1,i="matrix("+e+",0,0,"+t+","+-1*r.x*e+","+-1*r.y*t+")";this._tooltipRoot.style.transform=i,this._tooltipRoot.style["-ms-transform"]=i},so.prototype._addTooltip=function(r){var i,e=r.id,t=r.html,s=this._tooltipRoot;t.get&&t.constructor.prototype.jquery&&(t=t.get(0)),function NO(r){return"[object String]"===$v.call(r)}(t)&&(t=Sw(t)),Aw(i=Sw('<div data-tooltip-id="'+e+'" class="'+Sx+'">'),{position:"absolute"}),i.appendChild(t),r.type&&hx(i).add("djs-tooltip-"+r.type),r.className&&hx(i).add(r.className),r.htmlContainer=i,s.appendChild(i),this._tooltips[e]=r,this._updateTooltip(r)},so.prototype._updateTooltip=function(r){var e=r.position;!function h_(r,e,t){Aw(r,{left:e+"px",top:t+"px"})}(r.htmlContainer,e.x,e.y)},so.prototype._updateTooltipVisibilty=function(r){oo(this._tooltips,function(e){var t=e.show,s=!0;t&&((t.minZoom>r.scale||t.maxZoom<r.scale)&&(s=!1),Ew(e.htmlContainer,s))})},so.prototype._init=function(){var r=this;this._eventBus.on("canvas.viewbox.changing",function(t){r.hide()}),this._eventBus.on("canvas.viewbox.changed",function(t){!function e(t){r._updateRoot(t),r._updateTooltipVisibilty(t),r.show()}(t.viewbox)})};const d_={__init__:["tooltips"],tooltips:["type",so]};var Ex=xe(9862);let f_=(()=>{class r{constructor(t){this._store=t,this._emptyResult="no value",this._notFoundResult="not found"}transform(t){return"number"!=typeof t?(0,Pi.of)("dynamic"===t?"dynamic":this._emptyResult):this._store.select((0,Gt.lR)(t)).pipe((0,U.U)(s=>s?.name??this._notFoundResult))}}return r.\u0275fac=function(t){return new(t||r)(c.Y36(ee.yh,16))},r.\u0275pipe=c.Yjl({name:"param",type:r,pure:!0}),r})();var g_=xe(5990);let v_=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({imports:[P.ez,Tt.ot,ct.Is,St.Ps]}),r})();var y_=xe(9918),kx=xe(8139);let b_=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({}),r})(),C_=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({imports:[b_,P.ez]}),r})(),w_=(()=>{class r{constructor(t,i){r.initialize(t,i)}static initialize(t,i){t.dispatch((0,Q.$C)()),t.dispatch((0,Mn.a$)()),t.dispatch((0,pn.u9)()),(r=>{const e=r.get(ee.yh),t=localStorage.getItem("funcs"),i=localStorage.getItem("params"),s=localStorage.getItem("models"),u=localStorage.getItem("currentModelGuid"),g=localStorage.getItem("ifaces");if(t)try{let I=JSON.parse(t);e.dispatch((0,Q.yS)(I))}catch{localStorage.removeItem("funcs")}if(i)try{let I=JSON.parse(i);e.dispatch((0,Mn.$q)(I))}catch{localStorage.removeItem("params")}if(s)try{let I=JSON.parse(s);e.dispatch((0,L.Mo)(I))}catch{localStorage.removeItem("models")}if(u)try{e.dispatch((0,L.KW)(u))}catch{localStorage.removeItem("currentModelGuid")}if(g)try{let I=JSON.parse(g);e.dispatch((0,pn.tJ)(I))}catch{localStorage.removeItem("ifaces")}r.get(c.z2F).tick()})(i),(r=>{const e=r.get(ee.yh);e.select((0,T.xE)()).subscribe(t=>{localStorage.setItem("params",JSON.stringify(t))}),e.select((0,T.Bc)()).subscribe(t=>{localStorage.setItem("funcs",JSON.stringify(t))}),e.select((0,G.JG)()).subscribe(t=>{localStorage.setItem("models",JSON.stringify(t))}),e.select(G.gl).subscribe(t=>{localStorage.setItem("currentModelGuid",t??"")}),e.select((0,T.pO)()).subscribe(t=>{localStorage.setItem("ifaces",JSON.stringify(t))})})(i);const s=i.get(Ex.eN);t.dispatch((0,Vt.w)("httpClient",{...s},g_.H.httpClient()))}}return r.\u0275fac=function(t){return new(t||r)(c.LFG(ee.yh),c.LFG(c.zs3))},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({providers:[pt,ft,f_,Ke,{provide:ke,useFactory:()=>new vO({additionalModules:[qO,_I,l_,Ce],cli:{bindTo:"cli"},moddleExtensions:{processBuilderExtension:f}})}],imports:[P.ez,v_,cn.u5,Ex.JF,Tt.ot,ct.Is,St.Ps,Ol.c,Ct.Tx,$g.Cq,ut.ZX,$h,Rt.LD,Il.Nh,$h,hn.AV,$h,cn.UX,y_.p,ee.Aw.forFeature(Yw.UN,Yw.I6),ko.sQ.forFeature([SA]),ee.Aw.forFeature(Uw.UN,Uw.I6),ko.sQ.forFeature([IA]),ee.Aw.forFeature(zw.UN,zw.I6),ko.sQ.forFeature([OA]),ee.Aw.forFeature(Kw.UN,Kw.I6),ko.sQ.forFeature([_A]),ee.Aw.forFeature(Xw.UN,Xw.I6),kx.I,C_,kx.I]}),r})(),x_=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({imports:[P.ez,UA.forRoot({modules:{history:{delay:2e3,maxStack:500,userOnly:!0}}}),cn.UX]}),r})(),A_=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=c.oAB({type:r}),r.\u0275inj=c.cJS({imports:[P.ez,Tt.ot,St.Ps,Ol.c,Ct.Tx,Rt.LD,ut.ZX,hn.AV,cn.UX,w_,x_,ae.Bz.forChild([{path:"**",component:gO}])]}),r})()},8992:Cn=>{"use strict";function Ye(xe,ke){return{args:[xe.shape("source"),xe.string("type"),xe.point("delta",{defaultValue:{x:200,y:0}})],exec:function(Ce,P,ae){return ke.appendShape(Ce,{type:P},{x:Ce.x+Ce.width/2+ae.x,y:Ce.y+Ce.height/2+ae.y}).id}}}Ye.$inject=["cli._params","modeling"],Cn.exports=Ye},8823:(Cn,Ye,xe)=>{"use strict";var{isArray:ke,isObject:Ce}=xe(3532);function P(ae,ce){return{args:[ae.elements("elements"),ae.string("colors")],exec:function(K,U){ce.setColor(K,function c(K){if(Ce(K))return K;var U=ke(K)?K:K.split(","),Z={};return["fill","stroke"].forEach(function(Y,H){var F=U[H];F&&(Z[Y]="unset"===F?void 0:F)}),Z}(U))}}}P.$inject=["cli._params","modeling"],Cn.exports=P},2516:Cn=>{"use strict";function Ye(xe,ke){return{args:[xe.shape("source"),xe.shape("target"),xe.string("type"),xe.shape("parent",{optional:!0})],exec:function(Ce,P,ae,ce){return ke.createConnection(Ce,P,{type:ae},ce||Ce.parent).id}}}Ye.$inject=["cli._params","modeling"],Cn.exports=Ye},7709:Cn=>{"use strict";function Ye(xe,ke){return{args:[xe.string("type"),xe.point("position"),xe.shape("parent"),xe.bool("isAttach",{optional:!0})],exec:function(Ce,P,ae,ce){var c;return ce&&(c={attach:!0}),ke.createShape({type:Ce},P,ae,c).id}}}Ye.$inject=["cli._params","modeling"],Cn.exports=Ye},3750:Cn=>{"use strict";function Ye(xe){return{args:[xe.element("element")],exec:function(ke){return ke}}}Ye.$inject=["cli._params"],Cn.exports=Ye},3261:Cn=>{"use strict";function Ye(xe,ke){return{exec:function(){return ke.filter(function Ce(){return!0}).map(function P(ae){return ae.id})}}}Ye.$inject=["cli._params","elementRegistry"],Cn.exports=Ye},9597:Cn=>{"use strict";function Ye(xe,ke){return{args:[xe.shapes("shapes"),xe.point("delta"),xe.shape("newParent",{optional:!0}),xe.bool("isAttach",{optional:!0})],exec:function(Ce,P,ae,ce){var c;return ce&&(c={attach:!0}),ke.moveElements(Ce,P,ae,c),Ce}}}Ye.$inject=["cli._params","modeling"],Cn.exports=Ye},4743:Cn=>{"use strict";function Ye(xe){return{exec:function(){xe.redo()}}}Ye.$inject=["commandStack"],Cn.exports=Ye},2208:Cn=>{"use strict";function Ye(xe,ke){return{args:[xe.elements("elements")],exec:function(Ce){return ke.removeElements(Ce)}}}Ye.$inject=["cli._params","modeling"],Cn.exports=Ye},8474:Cn=>{"use strict";function Ye(xe,ke){return{args:[xe.element("connection")],exec:function(Ce){return ke.removeConnection(Ce)}}}Ye.$inject=["cli._params","modeling"],Cn.exports=Ye},5877:Cn=>{"use strict";function Ye(xe,ke){return{args:[xe.shape("shape")],exec:function(Ce){return ke.removeShape(Ce)}}}Ye.$inject=["cli._params","modeling"],Cn.exports=Ye},3145:Cn=>{"use strict";function Ye(xe,ke){return{args:[xe.string("format")],exec:function(Ce){if("svg"===Ce)ke.saveSVG().then(({svg:P})=>{console.info(P)}).catch(P=>{console.error(P)});else{if("bpmn"!==Ce)throw new Error("unknown format, <svg> and <bpmn> are available");ke.saveXML().then(({xml:P})=>{console.info(P)}).catch(P=>{console.error(P)})}}}}Ye.$inject=["cli._params","bpmnjs"],Cn.exports=Ye},2368:Cn=>{"use strict";function Ye(xe,ke){return{args:[xe.element("element"),xe.string("newLabel")],exec:function(Ce,P){return ke.updateLabel(Ce,P),Ce}}}Ye.$inject=["cli._params","modeling"],Cn.exports=Ye},8952:Cn=>{"use strict";function Ye(xe,ke){return{args:[xe.element("element")],exec:function(Ce){return ke.setRootElement(Ce),Ce}}}Ye.$inject=["cli._params","canvas"],Cn.exports=Ye},768:Cn=>{"use strict";function Ye(xe){return{exec:function(){xe.undo()}}}Ye.$inject=["commandStack"],Cn.exports=Ye},3532:(Cn,Ye,xe)=>{"use strict";function ke(Me){return Array.prototype.concat.apply([],Me)}xe.r(Ye),xe.d(Ye,{assign:()=>re,bind:()=>j,debounce:()=>q,ensureArray:()=>F,every:()=>p,filter:()=>R,find:()=>_,findIndex:()=>M,flatten:()=>ke,forEach:()=>S,get:()=>ve,groupBy:()=>C,has:()=>k,isArray:()=>K,isDefined:()=>ce,isFunction:()=>Y,isNil:()=>c,isNumber:()=>Z,isObject:()=>U,isString:()=>H,isUndefined:()=>ae,keys:()=>h,map:()=>m,matchPattern:()=>G,merge:()=>Re,omit:()=>Te,pick:()=>Ae,reduce:()=>w,set:()=>ue,size:()=>v,some:()=>f,sortBy:()=>Q,throttle:()=>ee,unionBy:()=>L,uniqueBy:()=>x,values:()=>O,without:()=>y});var Ce=Object.prototype.toString,P=Object.prototype.hasOwnProperty;function ae(Me){return void 0===Me}function ce(Me){return void 0!==Me}function c(Me){return null==Me}function K(Me){return"[object Array]"===Ce.call(Me)}function U(Me){return"[object Object]"===Ce.call(Me)}function Z(Me){return"[object Number]"===Ce.call(Me)}function Y(Me){var Ie=Ce.call(Me);return"[object Function]"===Ie||"[object AsyncFunction]"===Ie||"[object GeneratorFunction]"===Ie||"[object AsyncGeneratorFunction]"===Ie||"[object Proxy]"===Ie}function H(Me){return"[object String]"===Ce.call(Me)}function F(Me){if(!K(Me))throw new Error("must supply array")}function k(Me,Ie){return P.call(Me,Ie)}function _(Me,Ie){var Ge;return Ie=V(Ie),S(Me,function(oe,pe){if(Ie(oe,pe))return Ge=oe,!1}),Ge}function M(Me,Ie){Ie=V(Ie);var Ge=K(Me)?-1:void 0;return S(Me,function(oe,pe){if(Ie(oe,pe))return Ge=pe,!1}),Ge}function R(Me,Ie){var Ge=[];return S(Me,function(oe,pe){Ie(oe,pe)&&Ge.push(oe)}),Ge}function S(Me,Ie){var Ge;if(!ae(Me)){var pe=K(Me)?X:J;for(var ge in Me)if(k(Me,ge)&&!1===Ie(Ge=Me[ge],pe(ge)))return Ge}}function y(Me,Ie){return ae(Me)?[]:(F(Me),Ie=V(Ie),Me.filter(function(Ge,oe){return!Ie(Ge,oe)}))}function w(Me,Ie,Ge){return S(Me,function(oe,pe){Ge=Ie(Ge,oe,pe)}),Ge}function p(Me,Ie){return!!w(Me,function(Ge,oe,pe){return Ge&&Ie(oe,pe)},!0)}function f(Me,Ie){return!!_(Me,Ie)}function m(Me,Ie){var Ge=[];return S(Me,function(oe,pe){Ge.push(Ie(oe,pe))}),Ge}function h(Me){return Me&&Object.keys(Me)||[]}function v(Me){return h(Me).length}function O(Me){return m(Me,function(Ie){return Ie})}function C(Me,Ie){var Ge=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Ie=T(Ie),S(Me,function(oe){var pe=Ie(oe)||"_",ge=Ge[pe];ge||(ge=Ge[pe]=[]),ge.push(oe)}),Ge}function x(Me){Me=T(Me);for(var Ie={},Ge=arguments.length,oe=new Array(Ge>1?Ge-1:0),pe=1;pe<Ge;pe++)oe[pe-1]=arguments[pe];return S(oe,function(be){return C(be,Me,Ie)}),m(Ie,function(be,ie){return be[0]})}var L=x;function Q(Me,Ie){Ie=T(Ie);var Ge=[];return S(Me,function(oe,pe){for(var ge=Ie(oe,pe),be={d:ge,v:oe},ie=0;ie<Ge.length;ie++)if(ge<Ge[ie].d)return void Ge.splice(ie,0,be);Ge.push(be)}),m(Ge,function(oe){return oe.v})}function G(Me){return function(Ie){return p(Me,function(Ge,oe){return Ie[oe]===Ge})}}function T(Me){return Y(Me)?Me:function(Ie){return Ie[Me]}}function V(Me){return Y(Me)?Me:function(Ie){return Ie===Me}}function J(Me){return Me}function X(Me){return Number(Me)}function q(Me,Ie){var Ge,oe,pe,ge;function be($e){var Xe=Date.now(),ut=$e?0:ge+Ie-Xe;if(ut>0)return ie(ut);Me.apply(pe,oe),se()}function ie($e){Ge=setTimeout(be,$e)}function se(){Ge&&clearTimeout(Ge),Ge=ge=oe=pe=void 0}function _e(){ge=Date.now();for(var $e=arguments.length,Xe=new Array($e),ut=0;ut<$e;ut++)Xe[ut]=arguments[ut];oe=Xe,pe=this,Ge||ie(Ie)}return _e.flush=function de(){Ge&&be(!0),se()},_e.cancel=se,_e}function ee(Me,Ie){var Ge=!1;return function(){Ge||(Me.apply(void 0,arguments),Ge=!0,setTimeout(function(){Ge=!1},Ie))}}function j(Me,Ie){return Me.bind(Ie)}function D(Me){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Ie){return typeof Ie}:function(Ie){return Ie&&"function"==typeof Symbol&&Ie.constructor===Symbol&&Ie!==Symbol.prototype?"symbol":typeof Ie})(Me)}function N(){return N=Object.assign||function(Me){for(var Ie=1;Ie<arguments.length;Ie++){var Ge=arguments[Ie];for(var oe in Ge)Object.prototype.hasOwnProperty.call(Ge,oe)&&(Me[oe]=Ge[oe])}return Me},N.apply(this,arguments)}function re(Me){for(var Ie=arguments.length,Ge=new Array(Ie>1?Ie-1:0),oe=1;oe<Ie;oe++)Ge[oe-1]=arguments[oe];return N.apply(void 0,[Me].concat(Ge))}function ue(Me,Ie,Ge){var oe=Me;return S(Ie,function(pe,ge){if("number"!=typeof pe&&"string"!=typeof pe)throw new Error("illegal key type: "+D(pe)+". Key should be of type number or string.");if("constructor"===pe)throw new Error("illegal key: constructor");if("__proto__"===pe)throw new Error("illegal key: __proto__");var be=Ie[ge+1],ie=oe[pe];ce(be)&&c(ie)&&(ie=oe[pe]=isNaN(+be)?{}:[]),ae(be)?ae(Ge)?delete oe[pe]:oe[pe]=Ge:oe=ie}),Me}function ve(Me,Ie,Ge){var oe=Me;return S(Ie,function(pe){if(c(oe))return oe=void 0,!1;oe=oe[pe]}),ae(oe)?Ge:oe}function Ae(Me,Ie){var Ge={},oe=Object(Me);return S(Ie,function(pe){pe in oe&&(Ge[pe]=Me[pe])}),Ge}function Te(Me,Ie){var Ge={};return S(Object(Me),function(pe,ge){-1===Ie.indexOf(ge)&&(Ge[ge]=pe)}),Ge}function Re(Me){for(var Ie=arguments.length,Ge=new Array(Ie>1?Ie-1:0),oe=1;oe<Ie;oe++)Ge[oe-1]=arguments[oe];return Ge.length&&S(Ge,function(pe){!pe||!U(pe)||S(pe,function(ge,be){if("__proto__"!==be){var ie=Me[be];U(ge)?(U(ie)||(ie={}),Me[be]=Re(ie,ge)):Me[be]=ge}})}),Me}},7515:function(Cn,Ye,xe){var ke=xe(7156).default;Cn.exports=function(){"use strict";function Ce(n,o){o&&(n.super_=o,n.prototype=Object.create(o.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}var n,o,P=(n=function(n){var o=n.exports=function(a,l){if(l||(l=16),void 0===a&&(a=128),a<=0)return"0";for(var d=Math.log(Math.pow(2,a))/Math.log(l),b=2;d===1/0;b*=2)d=Math.log(Math.pow(2,a/b))/Math.log(l)*b;var A=d-Math.floor(d),E="";for(b=0;b<Math.floor(d);b++)E=Math.floor(Math.random()*l).toString(l)+E;if(A){var $=Math.pow(l,A);E=Math.floor(Math.random()*$).toString(l)+E}var W=parseInt(E,l);return W!==1/0&&W>=Math.pow(2,a)?o(a,l):E};o.rack=function(a,l,d){var b=function(E){var $=0;do{if($++>10){if(!d)throw new Error("too many ID collisions, use more bits");a+=d}var W=o(a,l)}while(Object.hasOwnProperty.call(A,W));return A[W]=E,W},A=b.hats={};return b.get=function(E){return b.hats[E]},b.set=function(E,$){return b.hats[E]=$,b},b.bits=a||128,b.base=l||16,b}},n(o={exports:{}}),o.exports);function ae(n){if(!(this instanceof ae))return new ae(n);this._seed=(n=n||[128,36,1]).length?P.rack(n[0],n[1],n[2]):n}function ce(n){return Array.prototype.concat.apply([],n)}ae.prototype.next=function(n){return this._seed(n||!0)},ae.prototype.nextPrefixed=function(n,o){var a;do{a=n+this.next(!0)}while(this.assigned(a));return this.claim(a,o),a},ae.prototype.claim=function(n,o){this._seed.set(n,o||!0)},ae.prototype.assigned=function(n){return this._seed.get(n)||!1},ae.prototype.unclaim=function(n){delete this._seed.hats[n]},ae.prototype.clear=function(){var n,o=this._seed.hats;for(n in o)this.unclaim(n)};const c=Object.prototype.toString,K=Object.prototype.hasOwnProperty;function U(n){return void 0===n}function Z(n){return void 0!==n}function Y(n){return null==n}function H(n){return"[object Array]"===c.call(n)}function F(n){return"[object Object]"===c.call(n)}function k(n){return"[object Number]"===c.call(n)}function _(n){const o=c.call(n);return"[object Function]"===o||"[object AsyncFunction]"===o||"[object GeneratorFunction]"===o||"[object AsyncGeneratorFunction]"===o||"[object Proxy]"===o}function M(n){return"[object String]"===c.call(n)}function R(n,o){return K.call(n,o)}function S(n,o){let a;return o=X(o),p(n,function(l,d){if(o(l,d))return a=l,!1}),a}function y(n,o){o=X(o);let a=H(n)?-1:void 0;return p(n,function(l,d){if(o(l,d))return a=d,!1}),a}function w(n,o){let a=[];return p(n,function(l,d){o(l,d)&&a.push(l)}),a}function p(n,o){let a,l;if(U(n))return;const d=H(n)?ee:q;for(let b in n)if(R(n,b)&&(a=n[b],l=o(a,d(b)),!1===l))return a}function m(n,o,a){return p(n,function(l,d){a=o(a,l,d)}),a}function h(n,o){return!!m(n,function(a,l,d){return a&&o(l,d)},!0)}function v(n,o){return!!S(n,o)}function O(n,o){let a=[];return p(n,function(l,d){a.push(o(l,d))}),a}function C(n){return n&&Object.keys(n)||[]}function x(n){return O(n,o=>o)}function L(n,o,a={}){return o=J(o),p(n,function(l){let d=o(l)||"_",b=a[d];b||(b=a[d]=[]),b.push(l)}),a}function Q(n,...o){n=J(n);let a={};return p(o,l=>L(l,n,a)),O(a,function(l,d){return l[0]})}const G=Q;function T(n,o){o=J(o);let a=[];return p(n,function(l,d){let b=o(l,d),A={d:b,v:l};for(var E=0;E<a.length;E++){let{d:$}=a[E];if(b<$)return void a.splice(E,0,A)}a.push(A)}),O(a,l=>l.v)}function V(n){return function(o){return h(n,function(a,l){return o[l]===a})}}function J(n){return _(n)?n:o=>o[n]}function X(n){return _(n)?n:o=>o===n}function q(n){return n}function ee(n){return Number(n)}function j(n,o){let a,l,d,b;function A(z){let te=Date.now(),le=z?0:b+o-te;if(le>0)return E(le);n.apply(d,l),$()}function E(z){a=setTimeout(A,z)}function $(){a&&clearTimeout(a),a=b=l=d=void 0}function W(...z){b=Date.now(),l=z,d=this,a||E(o)}return W.flush=function(){a&&A(!0),$()},W.cancel=$,W}function D(n,o){return n.bind(o)}function N(n,...o){return Object.assign(n,...o)}function re(n,o){let a={},l=Object(n);return p(o,function(d){d in l&&(a[d]=n[d])}),a}function ue(n,o){let a={};return p(Object(n),function(l,d){-1===o.indexOf(d)&&(a[d]=l)}),a}const Ae=Object.prototype.toString,Te=Object.prototype.hasOwnProperty;function Re(n,o){return Te.call(n,o)}function Me(n,o){let a,l;if(void 0===n)return;const d="[object Array]"===Ae.call(n)?Ge:Ie;for(let b in n)if(Re(n,b)&&(a=n[b],l=o(a,d(b)),!1===l))return a}function Ie(n){return n}function Ge(n){return Number(n)}function oe(n,...o){const a=n.style;return Me(o,function(l){l&&Me(l,function(d,b){a[b]=d})}),n}function pe(n,o,a){return 2==arguments.length?n.getAttribute(o):null===a?n.removeAttribute(o):(n.setAttribute(o,a),n)}const ge=Object.prototype.toString;function be(n){return new ie(n)}function ie(n){if(!n||!n.nodeType)throw new Error("A DOM element reference is required");this.el=n,this.list=n.classList}function se(n){for(;n.childNodes.length;)n.removeChild(n.childNodes[0]);return n}function de(n,o){return n&&"function"==typeof n.matches&&n.matches(o)}function _e(n,o,a){for(var l=a?n:n.parentNode;l&&l.nodeType!==document.DOCUMENT_NODE&&l.nodeType!==document.DOCUMENT_FRAGMENT_NODE;){if(de(l,o))return l;l=l.parentNode}return de(l,o)?l:null}ie.prototype.add=function(n){return this.list.add(n),this},ie.prototype.remove=function(n){return"[object RegExp]"==ge.call(n)?this.removeMatching(n):(this.list.remove(n),this)},ie.prototype.removeMatching=function(n){const o=this.array();for(let a=0;a<o.length;a++)n.test(o[a])&&this.remove(o[a]);return this},ie.prototype.toggle=function(n,o){return void 0!==o?o!==this.list.toggle(n,o)&&this.list.toggle(n):this.list.toggle(n),this},ie.prototype.array=function(){return Array.from(this.list)},ie.prototype.has=ie.prototype.contains=function(n){return this.list.contains(n)};var St,$e={},Xe=window.addEventListener?"addEventListener":"attachEvent",ut=window.removeEventListener?"removeEventListener":"detachEvent",mt="addEventListener"!==Xe?"on":"",ct=function ve(n,o){return o.forEach(function(a){a&&"string"!=typeof a&&!Array.isArray(a)&&Object.keys(a).forEach(function(l){if("default"!==l&&!(l in n)){var d=Object.getOwnPropertyDescriptor(a,l);Object.defineProperty(n,l,d.get?d:{enumerable:!0,get:function(){return a[l]}})}})}),Object.freeze(n)}({__proto__:null,bind:$e.bind=function(n,o,a,l){return n[Xe](mt+o,a,l||!1),a},unbind:$e.unbind=function(n,o,a,l){return n[ut](mt+o,a,l||!1),a},default:$e},[$e]),Tt=["focus","blur"],Et={bind:function(n,o,a,l,d){return-1!==Tt.indexOf(a)&&(d=!0),ct.bind(n,a,function(b){b.delegateTarget=_e(b.target||b.srcElement,o,!0),b.delegateTarget&&l.call(n,b)},d)},unbind:function(n,o,a,l){return-1!==Tt.indexOf(o)&&(l=!0),ct.unbind(n,o,a,l)}},ft=!1;typeof document<"u"&&((St=document.createElement("div")).innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',ft=!St.getElementsByTagName("link").length,St=void 0);var pt={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:ft?[1,"X<div>","</div>"]:[0,"",""]};pt.td=pt.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],pt.option=pt.optgroup=[1,'<select multiple="multiple">',"</select>"],pt.thead=pt.tbody=pt.colgroup=pt.caption=pt.tfoot=[1,"<table>","</table>"],pt.polyline=pt.ellipse=pt.polygon=pt.circle=pt.text=pt.line=pt.path=pt.rect=pt.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var vt=function(n,o){if("string"!=typeof n)throw new TypeError("String expected");o||(o=document);var a=/<([\w:]+)/.exec(n);if(!a)return o.createTextNode(n);n=n.replace(/^\s+|\s+$/g,"");var l=a[1];if("body"==l)return(d=o.createElement("html")).innerHTML=n,d.removeChild(d.lastChild);var d,b=Object.prototype.hasOwnProperty.call(pt,l)?pt[l]:pt._default,A=b[0],E=b[1],$=b[2];for((d=o.createElement("div")).innerHTML=E+n+$;A--;)d=d.lastChild;if(d.firstChild==d.lastChild)return d.removeChild(d.firstChild);for(var W=o.createDocumentFragment();d.firstChild;)W.appendChild(d.removeChild(d.firstChild));return W};function wt(n,o){return(o=o||document).querySelector(n)}function Gt(n,o){return(o=o||document).querySelectorAll(n)}function Wt(n){n.parentNode&&n.parentNode.removeChild(n)}function Ke(n,o){return o.appendChild(function(a,l){if(a.ownerDocument!==l.ownerDocument)try{return l.ownerDocument.importNode(a,!0)}catch{}return a}(n,o))}function Ze(n,o){return Ke(o,n),n}var Ct={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":2,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":2,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function Rt(n,o,a){var l=o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),d=Ct[l];d?(2===d&&"number"==typeof a&&(a=String(a)+"px"),n.style[l]=a):n.setAttributeNS(null,o,a)}function yt(n,o,a){if("string"==typeof o){if(void 0===a)return l=n,Ct[d=o]?l.style[d]:l.getAttributeNS(null,d);Rt(n,o,a)}else!function(l,d){var b,A,E=Object.keys(d);for(b=0;A=E[b];b++)Rt(l,A,d[A])}(n,o);var l,d;return n}const hn=Object.prototype.toString;function Fe(n){return new tt(n)}function tt(n){if(!n||!n.nodeType)throw new Error("A DOM element reference is required");this.el=n,this.list=n.classList}function ot(n){var o=n.parentNode;return o&&o.removeChild(n),n}function It(n){for(var o;o=n.firstChild;)ot(o);return n}function Ut(n){return n.cloneNode(!0)}tt.prototype.add=function(n){return this.list.add(n),this},tt.prototype.remove=function(n){return"[object RegExp]"==hn.call(n)?this.removeMatching(n):(this.list.remove(n),this)},tt.prototype.removeMatching=function(n){const o=this.array();for(let a=0;a<o.length;a++)n.test(o[a])&&this.remove(o[a]);return this},tt.prototype.toggle=function(n,o){return void 0!==o?o!==this.list.toggle(n,o)&&this.list.toggle(n):this.list.toggle(n),this},tt.prototype.array=function(){return Array.from(this.list)},tt.prototype.has=tt.prototype.contains=function(n){return this.list.contains(n)};var Vt="http://www.w3.org/2000/svg",pn='<svg xmlns="'+Vt+'"';function Mn(n){var o=!1;"<svg"===n.substring(0,4)?-1===n.indexOf(Vt)&&(n=pn+n.substring(4)):(n=pn+">"+n+"</svg>",o=!0);var b,A,a=(b=n,(A=new DOMParser).async=!1,A.parseFromString(b,"text/xml"));if(!o)return a;for(var l=document.createDocumentFragment(),d=a.firstChild;d.firstChild;)l.appendChild(d.firstChild);return l}function jt(n,o){var a;return"<"===n.charAt(0)?(a=Mn(n).firstChild,a=document.importNode(a,!0)):a=document.createElementNS(Vt,n),o&&yt(a,o),a}var ir=null;function dn(){return null===ir&&(ir=jt("svg")),ir}function Qt(n,o){var a,l,d=Object.keys(o);for(a=0;l=d[a];a++)n[l]=o[l];return n}function $i(n){return n?dn().createSVGTransformFromMatrix(n):dn().createSVGTransform()}var lo=/([&<>]{1})/g,Kn=/([\n\r"]{1})/g,Je={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function Qe(n,o){return n.replace(o,function(a,l){return Je[l]||l})}function it(n,o){var a,l,d,b,A;switch(n.nodeType){case 3:o.push(Qe(n.textContent,lo));break;case 1:if(o.push("<",n.tagName),n.hasAttributes())for(a=0,l=(d=n.attributes).length;a<l;++a)b=d.item(a),o.push(" ",b.name,'="',Qe(b.value,Kn),'"');if(n.hasChildNodes()){for(o.push(">"),a=0,l=(A=n.childNodes).length;a<l;++a)it(A.item(a),o);o.push("</",n.tagName,">")}else o.push("/>");break;case 8:o.push("\x3c!--",Qe(n.nodeValue,lo),"--\x3e");break;case 4:o.push("<![CDATA[",n.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+n.nodeType)}return o}function ht(n,o){if(void 0!==o){try{!function lt(n,o){var a=Mn(o);if(It(n),o){"#document-fragment"===a.nodeName||(a=a.documentElement);for(var d=Array.prototype.slice.call(a.childNodes),b=0;b<d.length;b++)Ke(d[b],n)}}(n,o)}catch(a){throw new Error("error parsing SVG: "+a.message)}return n}return function(a){for(var l=a.firstChild,d=[];l;)it(l,d),l=l.nextSibling;return d.join("")}(n)}function zt(n,o){return o instanceof SVGMatrix?n.createSVGTransformFromMatrix(o):o}function fn(n,o){var a=n.transform.baseVal;return o&&(Array.isArray(o)||(o=[o]),function(l,d){var b,A;for(l.clear(),b=0;A=d[b];b++)l.appendItem(zt(l,A))}(a,o)),a.consolidate()}const Nn=/^class[ {]/;function Bn(n){return Array.isArray(n)}function Yn(n,o){return Object.prototype.hasOwnProperty.call(n,o)}function vn(...n){1===n.length&&Bn(n[0])&&(n=n[0]);const o=(n=[...n]).pop();return o.$inject=n,o}const ei=/constructor\s*[^(]*\(\s*([^)]*)\)/m,ui=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,ri=/\/\*([^*]*)\*\//m;function xn(n){if("function"!=typeof n)throw new Error(`Cannot annotate "${n}". Expected a function!`);const o=n.toString().match(Nn.test(n.toString())?ei:ui);if(!o)return[];const a=o[1]||o[2];return a&&a.split(",").map(l=>{const d=l.match(ri);return(d&&d[1]||l).trim()})||[]}function Un(n,o){o=o||{get:function(we,Ee){if(a.push(we),!1===Ee)return null;throw A(`No provider for "${we}"!`)}};const a=[],l=this._providers=Object.create(o._providers||null),d=this._instances=Object.create(null),b=d.injector=this,A=function(we){const Ee=a.join(" -> ");return a.length=0,new Error(Ee?`${we} (Resolving: ${Ee})`:we)};function E(we,Ee){if(!l[we]&&-1!==we.indexOf(".")){const De=we.split(".");let Be=E(De.shift());for(;De.length;)Be=Be[De.shift()];return Be}if(Yn(d,we))return d[we];if(Yn(l,we)){if(-1!==a.indexOf(we))throw a.push(we),A("Cannot resolve circular dependency!");return a.push(we),d[we]=l[we][0](l[we][1]),a.pop(),d[we]}return o.get(we,Ee)}function $(we,Ee){if(void 0===Ee&&(Ee={}),"function"!=typeof we){if(!Bn(we))throw A(`Cannot invoke "${we}". Expected a function!`);we=vn(we.slice())}return{fn:we,dependencies:(we.$inject||xn(we)).map(De=>Yn(Ee,De)?Ee[De]:E(De))}}function W(we){const{fn:Ee,dependencies:De}=$(we);return new(Function.prototype.bind.apply(Ee,[null].concat(De)))}function z(we,Ee,De){const{fn:Be,dependencies:He}=$(we,De);return Be.apply(Ee,He)}function te(we){return vn(Ee=>we.get(Ee))}function le(we,Ee){if(Ee&&Ee.length){const De=Object.create(null),Be=Object.create(null),He=[],rt=[],qe=[];let nt,gt,qt,Mt;for(let dt in l)nt=l[dt],-1!==Ee.indexOf(dt)&&("private"===nt[2]?(gt=He.indexOf(nt[3]),-1===gt?(qt=nt[3].createChild([],Ee),Mt=te(qt),He.push(nt[3]),rt.push(qt),qe.push(Mt),De[dt]=[Mt,dt,"private",qt]):De[dt]=[qe[gt],dt,"private",rt[gt]]):De[dt]=[nt[2],nt[1]],Be[dt]=!0),"factory"!==nt[2]&&"type"!==nt[2]||!nt[1].$scope||Ee.forEach(Ot=>{-1!==nt[1].$scope.indexOf(Ot)&&(De[dt]=[nt[2],nt[1]],Be[Ot]=!0)});Ee.forEach(dt=>{if(!Be[dt])throw new Error('No provider for "'+dt+'". Cannot use provider from the parent!')}),we.unshift(De)}return new Un(we,b)}const he={factory:z,type:W,value:function(we){return we}};function me(we,Ee){const De=we.__init__||[];return function(){De.forEach(Be=>{"string"==typeof Be?Ee.get(Be):Ee.invoke(Be)})}}function Oe(we){const Ee=we.__exports__;if(Ee){const De=we.__modules__,Be=Object.keys(we).reduce((nt,gt)=>("__exports__"!==gt&&"__modules__"!==gt&&"__init__"!==gt&&"__depends__"!==gt&&(nt[gt]=we[gt]),nt),Object.create(null)),He=le((De||[]).concat(Be)),rt=vn(function(nt){return He.get(nt)});Ee.forEach(function(nt){l[nt]=[rt,nt,"private",He]});const qe=(we.__init__||[]).slice();return qe.unshift(function(){He.init()}),me(we=Object.assign({},we,{__init__:qe}),He)}return Object.keys(we).forEach(function(De){if("__init__"===De||"__depends__"===De)return;if("private"===we[De][2])return void(l[De]=we[De]);const Be=we[De][0];l[De]=[he[Be],jn(Be,we[De][1]),Be]}),me(we,b)}function Pe(we,Ee){return-1!==we.indexOf(Ee)||-1!==(we=(Ee.__depends__||[]).reduce(Pe,we)).indexOf(Ee)?we:we.concat(Ee)}this.get=E,this.invoke=z,this.instantiate=W,this.createChild=le,this.init=function(we){const Ee=we.reduce(Pe,[]).map(Oe);let De=!1;return function(){De||(De=!0,Ee.forEach(Be=>Be()))}}(n)}function jn(n,o){return"value"!==n&&Bn(o)&&(o=vn(o.slice())),o}function rr(n,o){var a=this;n.on(["render.shape","render.connection"],o=o||1e3,function(l,d){var b=l.type,A=d.element,E=d.gfx,$=d.attrs;if(a.canRender(A))return"render.shape"===b?a.drawShape(E,A,$):a.drawConnection(E,A,$)}),n.on(["render.getShapePath","render.getConnectionPath"],o,function(l,d){if(a.canRender(d))return"render.getShapePath"===l.type?a.getShapePath(d):a.getConnectionPath(d)})}function Ai(n){return n.flat().join(",").replace(/,?([A-z]),?/g,"$1")}function Gi(n){return["L",n.x,n.y]}function Qn(n,o){const a=n.length,l=[(d=n[0],["M",d.x,d.y])];var d,b,A,E;for(let $=1;$<a;$++){const W=n[$-1],z=n[$],te=n[$+1];if(!te||!o){l.push(Gi(z));continue}const le=Math.min(o,mi(z.x-W.x,z.y-W.y),mi(te.x-z.x,te.y-z.y));if(!le){l.push(Gi(z));continue}const he=Ji(z,W,le),me=Ji(z,W,.5*le),Oe=Ji(z,te,le),Pe=Ji(z,te,.5*le);l.push(Gi(he)),l.push(["C",(b=me).x,b.y,(A=Pe).x,A.y,(E=Oe).x,E.y])}return l}function Ji(n,o,a){const l=o.x-n.x,d=o.y-n.y,b=a/mi(l,d);return{x:n.x+l*b,y:n.y+d*b}}function mi(n,o){return Math.sqrt(Math.pow(n,2)+Math.pow(o,2))}function pr(n,o,a){k(o)&&(a=o,o=null),o||(o={});const l=jt("path",o);return k(a)&&(l.dataset.cornerRadius=String(a)),Yo(l,n)}function Yo(n,o){return yt(n,{d:Ai(Qn(o,parseInt(n.dataset.cornerRadius,10)||0))}),n}function Zr(n){return w(n,function(o){return!S(n,function(a){return a!==o&&gs(o,a)})})}function gs(n,o){if(o){if(n===o)return o;if(n.parent)return gs(n.parent,o)}}function Da(n,o,a){var l=!a||-1===n.indexOf(o);return l&&n.push(o),l}function Mr(n,o,a){a=a||0,H(n)||(n=[n]),p(n,function(l,d){var b=o(l,d,a);H(b)&&b.length&&Mr(b,o,a+1)})}function co(n,o){return l=!o,-1,b=[],A=[],Mr(n,function(E,$,W){Da(b,E,l);var z=E.children;if(z&&Da(A,z,l))return z}),b;var l,b,A}function qn(n,o){var a,l,d,b;return o=!!o,H(n)||(n=[n]),p(n,function(A){var E=A;A.waypoints&&!o&&(E=qn(A.waypoints,!0));var $=E.x,W=E.y,z=E.height||0,te=E.width||0;($<a||void 0===a)&&(a=$),(W<l||void 0===l)&&(l=W),($+te>d||void 0===d)&&(d=$+te),(W+z>b||void 0===b)&&(b=W+z)}),{x:a,y:l,height:b-l,width:d-a}}function Vr(n){return"waypoints"in n?"connection":"x"in n?"shape":"root"}function vs(n){return!(!n||!n.isFrame)}function qo(n,o){return N({},n||{},o||{})}function mr(n,o){rr.call(this,n,1),this.CONNECTION_STYLE=o.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=o.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=o.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}rr.prototype.canRender=function(){},rr.prototype.drawShape=function(){},rr.prototype.drawConnection=function(){},rr.prototype.getShapePath=function(){},rr.prototype.getConnectionPath=function(){},Ce(mr,rr),mr.prototype.canRender=function(){return!0},mr.prototype.drawShape=function(n,o,a){var l=jt("rect");return yt(l,{x:0,y:0,width:o.width||0,height:o.height||0}),vs(o)?yt(l,N({},this.FRAME_STYLE,a||{})):yt(l,N({},this.SHAPE_STYLE,a||{})),Ze(n,l),l},mr.prototype.drawConnection=function(n,o,a){var l=pr(o.waypoints,N({},this.CONNECTION_STYLE,a||{}));return Ze(n,l),l},mr.prototype.getShapePath=function(n){var l=n.width;return Ai([["M",n.x,n.y],["l",l,0],["l",0,n.height],["l",-l,0],["z"]])},mr.prototype.getConnectionPath=function(n){var o,a,l=n.waypoints,d=[];for(o=0;a=l[o];o++)d.push([0===o?"M":"L",(a=a.original||a).x,a.y]);return Ai(d)},mr.$inject=["eventBus","styles"];var Kh={__init__:["defaultRenderer"],defaultRenderer:["type",mr],styles:["type",function(){var n={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},o=this;this.cls=function(a,l,d){return N(this.style(l,d),{class:a})},this.style=function(a,l){H(a)||l||(l=a,a=[]);var d=m(a,function(b,A){return N(b,n[A]||{})},{});return l?N(d,l):d},this.computeStyle=function(a,l,d){return H(l)||(d=l,l=[]),o.style(l||[],N({},d,a||{}))}}]};function gi(n,o){if(!n||!o)return-1;var a=n.indexOf(o);return-1!==a&&n.splice(a,1),a}function hi(n,o,a){if(n&&o){"number"!=typeof a&&(a=-1);var l=n.indexOf(o);if(-1!==l){if(l===a||-1===a)return;n.splice(l,1)}-1!==a?n.splice(a,0,o):n.push(o)}}function uo(n,o){return n&&o?n.indexOf(o):-1}function ho(n,o){return n&&o?Math.sqrt(Math.pow(n.x-o.x,2)+Math.pow(n.y-o.y,2)):-1}function tu(n,o,a,l){if(void 0===l&&(l=5),!n||!o||!a)return!1;var d=(o.x-n.x)*(a.y-n.y)-(o.y-n.y)*(a.x-n.x),b=ho(n,o);return Math.abs(d/b)<=l}function Ar(n,o){var a=Array.from(arguments).flat();const l={x:"v",y:"h"};for(const[d,b]of Object.entries(l))if(Zl(d,a))return b;return!1}function Zl(n,o){const a=o[0];return h(o,function(l){return Math.abs(a[n]-l[n])<=2})}function Ks(n,o,a){return n.x>o.x-(a=a||0)&&n.y>o.y-a&&n.x<o.x+o.width+a&&n.y<o.y+o.height+a}function Vl(n,o){return{x:Math.round(n.x+(o.x-n.x)/2),y:Math.round(n.y+(o.y-n.y)/2)}}var To=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ys=/,?([a-z]),?/gi,Fa=parseFloat,Zn=Math,ji=Zn.PI,Zi=Zn.min,Or=Zn.max,Ql=Zn.pow,Jo=Zn.abs,wp=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/gi,Nv=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/gi,nu=Array.isArray||function(n){return n instanceof Array};function iu(n,o){return Object.prototype.hasOwnProperty.call(n,o)}function Hl(n){if("function"==typeof n||Object(n)!==n)return n;var o=new n.constructor;for(var a in n)iu(n,a)&&(o[a]=Hl(n[a]));return o}function Wa(n){var o=Wa.ps=Wa.ps||{};return o[n]?o[n].sleep=100:o[n]={sleep:100},setTimeout(function(){for(var a in o)iu(o,a)&&a!=n&&(o[a].sleep--,!o[a].sleep&&delete o[a])}),o[n]}function Ga(n,o,a,l){return 1===arguments.length&&(o=n.y,a=n.width,l=n.height,n=n.x),{x:n,y:o,width:a,height:l,x2:n+a,y2:o+l}}function Ro(){return this.join(",").replace(Ys,"$1")}function ru(n){var o=Hl(n);return o.toString=Ro,o}function Lv(n,o,a,l,d,b,A,E,$){var W=1-$,z=Ql(W,3),te=Ql(W,2),le=$*$*$,he=z*o+3*te*$*l+3*W*$*$*b+le*E;return{x:su(z*n+3*te*$*a+3*W*$*$*d+le*A),y:su(he)}}function Bv(n){var o=CC.apply(null,n);return Ga(o.x0,o.y0,o.x1-o.x0,o.y1-o.y0)}function or(n,o,a){return o>=n.x&&o<=n.x+n.width&&a>=n.y&&a<=n.y+n.height}function Dv(n,o,a,l,d){return n*(n*(-3*o+9*a-9*l+3*d)+6*o-12*a+6*l)-3*o+3*a}function ou(n,o,a,l,d,b,A,E,$){null==$&&($=1);for(var W=($=$>1?1:$<0?0:$)/2,z=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],te=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],le=0,he=0;he<12;he++){var me=W*z[he]+W,Oe=Dv(me,n,a,d,A),Pe=Dv(me,o,l,b,E);le+=te[he]*Zn.sqrt(Oe*Oe+Pe*Pe)}return W*le}function bC(n,o,a,l,d,b,A,E){if(!(Or(n,a)<Zi(d,A)||Zi(n,a)>Or(d,A)||Or(o,l)<Zi(b,E)||Zi(o,l)>Or(b,E))){var $=(n*l-o*a)*(b-E)-(o-l)*(d*E-b*A),W=(n-a)*(b-E)-(o-l)*(d-A);if(W){var z=su(((n*l-o*a)*(d-A)-(n-a)*(d*E-b*A))/W),te=su($/W),le=+z.toFixed(2),he=+te.toFixed(2);if(!(le<+Zi(n,a).toFixed(2)||le>+Or(n,a).toFixed(2)||le<+Zi(d,A).toFixed(2)||le>+Or(d,A).toFixed(2)||he<+Zi(o,l).toFixed(2)||he>+Or(o,l).toFixed(2)||he<+Zi(b,E).toFixed(2)||he>+Or(b,E).toFixed(2)))return{x:z,y:te}}}}function su(n){return Math.round(1e11*n)/1e11}function Fv(n,o,a){if(nt=Bv(n),gt=Bv(o),nt=Ga(nt),!(or(gt=Ga(gt),nt.x,nt.y)||or(gt,nt.x2,nt.y)||or(gt,nt.x,nt.y2)||or(gt,nt.x2,nt.y2)||or(nt,gt.x,gt.y)||or(nt,gt.x2,gt.y)||or(nt,gt.x,gt.y2)||or(nt,gt.x2,gt.y2)||(nt.x<gt.x2&&nt.x>gt.x||gt.x<nt.x2&&gt.x>nt.x)&&(nt.y<gt.y2&&nt.y>gt.y||gt.y<nt.y2&&gt.y>nt.y)))return a?0:[];for(var nt,gt,l=ou.apply(0,n),d=ou.apply(0,o),b=Gv(n)?1:~~(l/5)||1,A=Gv(o)?1:~~(d/5)||1,E=[],$=[],W={},z=a?0:[],te=0;te<b+1;te++){var le=Lv.apply(0,n.concat(te/b));E.push({x:le.x,y:le.y,t:te/b})}for(te=0;te<A+1;te++)le=Lv.apply(0,o.concat(te/A)),$.push({x:le.x,y:le.y,t:te/A});for(te=0;te<b;te++)for(var he=0;he<A;he++){var me,Oe=E[te],Pe=E[te+1],we=$[he],Ee=$[he+1],De=Jo(Pe.x-Oe.x)<.01?"y":"x",Be=Jo(Ee.x-we.x)<.01?"y":"x",He=bC(Oe.x,Oe.y,Pe.x,Pe.y,we.x,we.y,Ee.x,Ee.y);if(He){if(W[me=He.x.toFixed(9)+"#"+He.y.toFixed(9)])continue;W[me]=!0;var rt=Oe.t+Jo((He[De]-Oe[De])/(Pe[De]-Oe[De]))*(Pe.t-Oe.t),qe=we.t+Jo((He[Be]-we[Be])/(Ee[Be]-we[Be]))*(Ee.t-we.t);rt>=0&&rt<=1&&qe>=0&&qe<=1&&(a?z++:z.push({x:He.x,y:He.y,t1:rt,t2:qe}))}}return z}function Gv(n){return n[0]===n[2]&&n[1]===n[3]&&n[4]===n[6]&&n[5]===n[7]}function au(n,o,a,l){return[n,o,a,l,a,l]}function jv(n,o,a,l,d,b){var A=.3333333333333333,E=2/3;return[A*n+E*a,A*o+E*l,A*d+E*a,A*b+E*l,d,b]}function Zv(n,o,a,l,d,b,A,E,$,W){var z,Eo,te=120*ji/180,le=ji/180*(+d||0),he=[],me=(Eo=function(Eo,li,ci){return{x:Eo*Zn.cos(ci)-li*Zn.sin(ci),y:Eo*Zn.sin(ci)+li*Zn.cos(ci)}},function li(){var ci=Array.prototype.slice.call(arguments,0),Fn=ci.join("\u2400"),Di=li.cache=li.cache||{},Ki=li.count=li.count||[];return iu(Di,Fn)?(function Yh(n,o){for(var a=0,l=n.length;a<l;a++)if(n[a]===o)return n.push(n.splice(a,1)[0])}(Ki,Fn),Di[Fn]):(Ki.length>=1e3&&delete Di[Ki.shift()],Ki.push(Fn),Di[Fn]=Eo.apply(0,ci),Di[Fn])});if(W)qe=W[0],nt=W[1],He=W[2],rt=W[3];else{n=(z=me(n,o,-le)).x,o=z.y;var Oe=(n-(E=(z=me(E,$,-le)).x))/2,Pe=(o-($=z.y))/2,we=Oe*Oe/(a*a)+Pe*Pe/(l*l);we>1&&(a*=we=Zn.sqrt(we),l*=we);var Ee=a*a,De=l*l,Be=(b==A?-1:1)*Zn.sqrt(Jo((Ee*De-Ee*Pe*Pe-De*Oe*Oe)/(Ee*Pe*Pe+De*Oe*Oe))),He=Be*a*Pe/l+(n+E)/2,rt=Be*-l*Oe/a+(o+$)/2,qe=Zn.asin(((o-rt)/l).toFixed(9)),nt=Zn.asin((($-rt)/l).toFixed(9));(qe=n<He?ji-qe:qe)<0&&(qe=2*ji+qe),(nt=E<He?ji-nt:nt)<0&&(nt=2*ji+nt),A&&qe>nt&&(qe-=2*ji),!A&&nt>qe&&(nt-=2*ji)}var gt=nt-qe;if(Jo(gt)>te){var qt=nt,Mt=E,dt=$;he=Zv(E=He+a*Zn.cos(nt=qe+te*(A&&nt>qe?1:-1)),$=rt+l*Zn.sin(nt),a,l,d,0,A,Mt,dt,[nt,qt,He,rt])}gt=nt-qe;var Ot=Zn.cos(qe),un=Zn.sin(qe),Ve=Zn.cos(nt),Se=Zn.sin(nt),et=Zn.tan(gt/4),bt=4/3*a*et,Pt=4/3*l*et,Xt=[n,o],tn=[n+bt*un,o-Pt*Ot],en=[E+bt*Se,$-Pt*Ve],nn=[E,$];if(tn[0]=2*Xt[0]-tn[0],tn[1]=2*Xt[1]-tn[1],W)return[tn,en,nn].concat(he);for(var Hn=[],Xi=0,Uo=(he=[tn,en,nn].concat(he).join().split(",")).length;Xi<Uo;Xi++)Hn[Xi]=Xi%2?me(he[Xi-1],he[Xi],le).y:me(he[Xi],he[Xi+1],le).x;return Hn}function CC(n,o,a,l,d,b,A,E){for(var $,W,z,te,le,he,me,Oe,Pe=[],we=[[],[]],Ee=0;Ee<2;++Ee)if(0==Ee?(W=6*n-12*a+6*d,$=-3*n+9*a-9*d+3*A,z=3*a-3*n):(W=6*o-12*l+6*b,$=-3*o+9*l-9*b+3*E,z=3*l-3*o),Jo($)<1e-12){if(Jo(W)<1e-12)continue;0<(te=-z/W)&&te<1&&Pe.push(te)}else Oe=Zn.sqrt(me=W*W-4*z*$),me<0||(0<(le=(-W+Oe)/(2*$))&&le<1&&Pe.push(le),0<(he=(-W-Oe)/(2*$))&&he<1&&Pe.push(he));for(var De,Be=Pe.length,He=Be;Be--;)De=1-(te=Pe[Be]),we[0][Be]=De*De*De*n+3*De*De*te*a+3*De*te*te*d+te*te*te*A,we[1][Be]=De*De*De*o+3*De*De*te*l+3*De*te*te*b+te*te*te*E;return we[0][He]=n,we[1][He]=o,we[0][He+1]=A,we[1][He+1]=E,we[0].length=we[1].length=He+2,{x0:Zi.apply(0,we[0]),y0:Zi.apply(0,we[1]),x1:Or.apply(0,we[0]),y1:Or.apply(0,we[1])}}function Zt(n){var o=Wa(n);if(o.curve)return ru(o.curve);for(var a=function Wv(n){var o=Wa(n);if(o.abs)return ru(o.abs);if(nu(n)&&nu(n&&n[0])||(n=function(we){if(!we)return null;var Ee=Wa(we);if(Ee.arr)return Hl(Ee.arr);var De={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},Be=[];return nu(we)&&nu(we[0])&&(Be=Hl(we)),Be.length||String(we).replace(wp,function(He,rt,qe){var nt=[],gt=rt.toLowerCase();for(qe.replace(Nv,function(qt,Mt){Mt&&nt.push(+Mt)}),"m"==gt&&nt.length>2&&(Be.push([rt].concat(nt.splice(0,2))),gt="l",rt="m"==rt?"l":"L");nt.length>=De[gt]&&(Be.push([rt].concat(nt.splice(0,De[gt]))),De[gt]););}),Be.toString=Wa.toString,Ee.arr=Hl(Be),Be}(n)),!n||!n.length)return[["M",0,0]];var a,l=[],d=0,b=0,A=0,E=0,$=0;"M"==n[0][0]&&(A=d=+n[0][1],E=b=+n[0][2],$++,l[0]=["M",d,b]);for(var W,z,te=$,le=n.length;te<le;te++){if(l.push(W=[]),(a=(z=n[te])[0])!=a.toUpperCase())switch(W[0]=a.toUpperCase(),W[0]){case"A":W[1]=z[1],W[2]=z[2],W[3]=z[3],W[4]=z[4],W[5]=z[5],W[6]=+z[6]+d,W[7]=+z[7]+b;break;case"V":W[1]=+z[1]+b;break;case"H":W[1]=+z[1]+d;break;case"M":A=+z[1]+d,E=+z[2]+b;default:for(var he=1,me=z.length;he<me;he++)W[he]=+z[he]+(he%2?d:b)}else for(var Oe=0,Pe=z.length;Oe<Pe;Oe++)W[Oe]=z[Oe];switch(a=a.toUpperCase(),W[0]){case"Z":d=+A,b=+E;break;case"H":d=W[1];break;case"V":b=W[1];break;case"M":A=W[W.length-2],E=W[W.length-1];default:d=W[W.length-2],b=W[W.length-1]}}return l.toString=Ro,o.abs=ru(l),l}(n),l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},d=function(he,me,Oe){var Pe,we;if(!he)return["C",me.x,me.y,me.x,me.y,me.x,me.y];switch(!(he[0]in{T:1,Q:1})&&(me.qx=me.qy=null),he[0]){case"M":me.X=he[1],me.Y=he[2];break;case"A":he=["C"].concat(Zv.apply(0,[me.x,me.y].concat(he.slice(1))));break;case"S":"C"==Oe||"S"==Oe?(Pe=2*me.x-me.bx,we=2*me.y-me.by):(Pe=me.x,we=me.y),he=["C",Pe,we].concat(he.slice(1));break;case"T":"Q"==Oe||"T"==Oe?(me.qx=2*me.x-me.qx,me.qy=2*me.y-me.qy):(me.qx=me.x,me.qy=me.y),he=["C"].concat(jv(me.x,me.y,me.qx,me.qy,he[1],he[2]));break;case"Q":me.qx=he[1],me.qy=he[2],he=["C"].concat(jv(me.x,me.y,he[1],he[2],he[3],he[4]));break;case"L":he=["C"].concat(au(me.x,me.y,he[1],he[2]));break;case"H":he=["C"].concat(au(me.x,me.y,he[1],me.y));break;case"V":he=["C"].concat(au(me.x,me.y,me.x,he[1]));break;case"Z":he=["C"].concat(au(me.x,me.y,me.X,me.Y))}return he},b=function(he,me){if(he[me].length>7){he[me].shift();for(var Oe=he[me];Oe.length;)A[me]="A",he.splice(me++,0,["C"].concat(Oe.splice(0,6)));he.splice(me,1),z=a.length}},A=[],E="",$="",W=0,z=a.length;W<z;W++){a[W]&&(E=a[W][0]),"C"!=E&&(A[W]=E,W&&($=A[W-1])),a[W]=d(a[W],l,$),"A"!=A[W]&&"C"==E&&(A[W]="C"),b(a,W);var te=a[W],le=te.length;l.x=te[le-2],l.y=te[le-1],l.bx=Fa(te[le-4])||l.x,l.by=Fa(te[le-3])||l.y}return o.curve=ru(a),a}var ys=function(n,o,a){n=Zt(n),o=Zt(o);for(var l,d,b,A,E,$,W,z,te,le,he=a?0:[],me=0,Oe=n.length;me<Oe;me++){var Pe=n[me];if("M"==Pe[0])l=E=Pe[1],d=$=Pe[2];else{"C"==Pe[0]?(te=[l,d].concat(Pe.slice(1)),l=te[6],d=te[7]):(te=[l,d,l,d,E,$,E,$],l=E,d=$);for(var we=0,Ee=o.length;we<Ee;we++){var De=o[we];if("M"==De[0])b=W=De[1],A=z=De[2];else{"C"==De[0]?(le=[b,A].concat(De.slice(1)),b=le[6],A=le[7]):(le=[b,A,b,A,W,z,W,z],b=W,A=z);var Be=Fv(te,le,a);if(a)he+=Be;else{for(var He=0,rt=Be.length;He<rt;He++)Be[He].segment1=me,Be[He].segment2=we,Be[He].bez1=te,Be[He].bez2=le;he=he.concat(Be)}}}}}return he};function xp(n){return{x:Math.round(n.x),y:Math.round(n.y),width:Math.round(n.width),height:Math.round(n.height)}}function bs(n){return{x:Math.round(n.x),y:Math.round(n.y)}}function Yt(n){return{top:n.y,right:n.x+(n.width||0),bottom:n.y+(n.height||0),left:n.x}}function ja(n){return{x:n.left,y:n.top,width:n.right-n.left,height:n.bottom-n.top}}function on(n){return n.waypoints?function Ap(n){for(var o=n.waypoints,a=o.reduce(function($,W,z){var Oe,Pe,te=o[z-1];if(te){var le=$[$.length-1],he=le&&le.endLength||0,me=(Oe=te,Pe=W,Math.sqrt(Math.pow(Oe.x-Pe.x,2)+Math.pow(Oe.y-Pe.y,2)));$.push({start:te,end:W,startLength:he,endLength:he+me,length:me})}return $},[]),d=a.reduce(function($,W){return $+W.length},0)/2,b=0,A=a[b];A.endLength<d;)A=a[++b];var E=(d-A.startLength)/A.length;return{x:A.start.x+(A.end.x-A.start.x)*E,y:A.start.y+(A.end.y-A.start.y)*E}}(n):bs({x:(o=n).x+(o.width||0)/2,y:o.y+(o.height||0)/2});var o}function bi(n,o,a){F(a=a||0)||(a={x:a,y:a});var l=Yt(n),d=Yt(o),$=l.bottom+a.y<=d.top?"top":l.top-a.y>=d.bottom?"bottom":null,W=l.right+a.x<=d.left?"left":l.left-a.x>=d.right?"right":null;return W&&$?$+"-"+W:W||$||"intersect"}function fo(n,o,a){var l=ys(n,o);return 1===l.length||2===l.length&&ho(l[0],l[1])<1?bs(l[0]):l.length>1?bs((l=T(l,function(d){var b=Math.floor(100*d.t2)||1;return b=((b=100-b)<10?"0":"")+b,d.segment2+"#"+b}))[a?0:l.length-1]):null}function Qr(n,o){return Math.round(n*o)/o}function Jh(n){return k(n)?n+"px":n}function zl(n,o,a){const l=jt("g");return Fe(l).add(o),n.insertBefore(l,n.childNodes[void 0!==a?a:n.childNodes.length-1]||null),l}const ed={shape:["x","y","width","height"],connection:["waypoints"]};function st(n,o,a,l){this._eventBus=o,this._elementRegistry=l,this._graphicsFactory=a,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(n||{})}function wC(n,o){n.setAttribute("transform","matrix("+o.a+","+o.b+","+o.c+","+o.d+","+o.e+","+o.f+")")}st.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],st.prototype._init=function(n){const o=this._eventBus,a=this._container=function(b){const A=(b=N({},{width:"100%",height:"100%"},b)).container||document.body,E=document.createElement("div");return E.setAttribute("class","djs-container djs-parent"),oe(E,{position:"relative",overflow:"hidden",width:Jh(b.width),height:Jh(b.height)}),A.appendChild(E),E}(n),l=this._svg=jt("svg");yt(l,{width:"100%",height:"100%"}),Ze(a,l);const d=this._viewport=zl(l,"viewport");!1!==n.deferUpdate&&(this._viewboxChanged=j(D(this._viewboxChanged,this),300)),o.on("diagram.init",function(){o.fire("canvas.init",{svg:l,viewport:d})},this),o.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],function(){delete this._cachedViewbox},this),o.on("diagram.destroy",500,this._destroy,this),o.on("diagram.clear",500,this._clear,this)},st.prototype._destroy=function(n){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const o=this._container.parentNode;o&&o.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport},st.prototype._clear=function(){this._elementRegistry.getAll().forEach(n=>{const o=Vr(n);"root"===o?this.removeRootElement(n):this._removeElement(n,o)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox},st.prototype.getDefaultLayer=function(){return this.getLayer("base",0)},st.prototype.getLayer=function(n,o){if(!n)throw new Error("must specify a name");let a=this._layers[n];if(a||(a=this._layers[n]=this._createLayer(n,o)),void 0!==o&&a.index!==o)throw new Error("layer <"+n+"> already created at index <"+o+">");return a.group},st.prototype._getChildIndex=function(n){return m(this._layers,function(o,a){return a.visible&&n>=a.index&&o++,o},0)},st.prototype._createLayer=function(n,o){void 0===o&&(o=1);const a=this._getChildIndex(o);return{group:zl(this._viewport,"layer-"+n,a),index:o,visible:!0}},st.prototype.showLayer=function(n){if(!n)throw new Error("must specify a name");const o=this._layers[n];if(!o)throw new Error("layer <"+n+"> does not exist");const a=this._viewport,l=o.group;if(o.visible)return l;const b=this._getChildIndex(o.index);return a.insertBefore(l,a.childNodes[b]||null),o.visible=!0,l},st.prototype.hideLayer=function(n){if(!n)throw new Error("must specify a name");const o=this._layers[n];if(!o)throw new Error("layer <"+n+"> does not exist");const a=o.group;return o.visible&&(ot(a),o.visible=!1),a},st.prototype._removeLayer=function(n){const o=this._layers[n];o&&(delete this._layers[n],ot(o.group))},st.prototype.getActiveLayer=function(){const n=this._findPlaneForRoot(this.getRootElement());return n?n.layer:null},st.prototype.findRoot=function(n){return"string"==typeof n&&(n=this._elementRegistry.get(n)),n?(this._findPlaneForRoot(function(a){for(;a.parent;)a=a.parent;return a}(n))||{}).rootElement:void 0},st.prototype.getRootElements=function(){return this._planes.map(function(n){return n.rootElement})},st.prototype._findPlaneForRoot=function(n){return S(this._planes,function(o){return o.rootElement===n})},st.prototype.getContainer=function(){return this._container},st.prototype._updateMarker=function(n,o,a){let l;n.id||(n=this._elementRegistry.get(n)),l=this._elementRegistry._elements[n.id],l&&(p([l.gfx,l.secondaryGfx],function(d){d&&(a?Fe(d).add(o):Fe(d).remove(o))}),this._eventBus.fire("element.marker.update",{element:n,gfx:l.gfx,marker:o,add:!!a}))},st.prototype.addMarker=function(n,o){this._updateMarker(n,o,!0)},st.prototype.removeMarker=function(n,o){this._updateMarker(n,o,!1)},st.prototype.hasMarker=function(n,o){return n.id||(n=this._elementRegistry.get(n)),Fe(this.getGraphics(n)).has(o)},st.prototype.toggleMarker=function(n,o){this.hasMarker(n,o)?this.removeMarker(n,o):this.addMarker(n,o)},st.prototype.getRootElement=function(){const n=this._rootElement;return n||this._planes.length?n:this.setRootElement(this.addRootElement(null))},st.prototype.addRootElement=function(n){const o=this._rootsIdx++;n||(n={id:"__implicitroot_"+o,children:[],isImplicit:!0});const a=n.layer="root-"+o;this._ensureValid("root",n);const l=this.getLayer(a,0);return this.hideLayer(a),this._addRoot(n,l),this._planes.push({rootElement:n,layer:l}),n},st.prototype.removeRootElement=function(n){if("string"==typeof n&&(n=this._elementRegistry.get(n)),this._findPlaneForRoot(n))return this._removeRoot(n),this._removeLayer(n.layer),this._planes=this._planes.filter(function(o){return o.rootElement!==n}),this._rootElement===n&&(this._rootElement=null),n},st.prototype.setRootElement=function(n,o){if(Z(o))throw new Error("override not supported");if(n===this._rootElement)return;let a;if(!n)throw new Error("rootElement required");return a=this._findPlaneForRoot(n),a||(n=this.addRootElement(n)),this._setRoot(n),n},st.prototype._removeRoot=function(n){const o=this._elementRegistry,a=this._eventBus;a.fire("root.remove",{element:n}),a.fire("root.removed",{element:n}),o.remove(n)},st.prototype._addRoot=function(n,o){const a=this._elementRegistry,l=this._eventBus;l.fire("root.add",{element:n}),a.add(n,o),l.fire("root.added",{element:n,gfx:o})},st.prototype._setRoot=function(n,o){const a=this._rootElement;a&&(this._elementRegistry.updateGraphics(a,null,!0),this.hideLayer(a.layer)),n&&(o||(o=this._findPlaneForRoot(n).layer),this._elementRegistry.updateGraphics(n,this._svg,!0),this.showLayer(n.layer)),this._rootElement=n,this._eventBus.fire("root.set",{element:n})},st.prototype._ensureValid=function(n,o){if(!o.id)throw new Error("element must have an id");if(this._elementRegistry.get(o.id))throw new Error("element <"+o.id+"> already exists");const a=ed[n];if(!h(a,function(d){return void 0!==o[d]}))throw new Error("must supply { "+a.join(", ")+" } with "+n)},st.prototype._setParent=function(n,o,a){hi(o.children,n,a),n.parent=o},st.prototype._addElement=function(n,o,a,l){a=a||this.getRootElement();const d=this._eventBus,b=this._graphicsFactory;this._ensureValid(n,o),d.fire(n+".add",{element:o,parent:a}),this._setParent(o,a,l);const A=b.create(n,o,l);return this._elementRegistry.add(o,A),b.update(n,o,A),d.fire(n+".added",{element:o,gfx:A}),o},st.prototype.addShape=function(n,o,a){return this._addElement("shape",n,o,a)},st.prototype.addConnection=function(n,o,a){return this._addElement("connection",n,o,a)},st.prototype._removeElement=function(n,o){const a=this._elementRegistry,l=this._graphicsFactory,d=this._eventBus;if(n=a.get(n.id||n))return d.fire(o+".remove",{element:n}),l.remove(n),gi(n.parent&&n.parent.children,n),n.parent=null,d.fire(o+".removed",{element:n}),a.remove(n),n},st.prototype.removeShape=function(n){return this._removeElement(n,"shape")},st.prototype.removeConnection=function(n){return this._removeElement(n,"connection")},st.prototype.getGraphics=function(n,o){return this._elementRegistry.getGraphics(n,o)},st.prototype._changeViewbox=function(n){this._eventBus.fire("canvas.viewbox.changing"),n.apply(this),this._cachedViewbox=null,this._viewboxChanged()},st.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},st.prototype.viewbox=function(n){if(void 0===n&&this._cachedViewbox)return this._cachedViewbox;const o=this._viewport,a=this.getSize();let l,d,b,A,E,$,W;return n?(this._changeViewbox(function(){E=Math.min(a.width/n.width,a.height/n.height);const z=this._svg.createSVGMatrix().scale(E).translate(-n.x,-n.y);fn(o,z)}),n):(b=this._rootElement?this.getActiveLayer():null,l=b&&b.getBBox()||{},A=fn(o),d=A?A.matrix:function(z,te,le,he,me,Oe){var Pe=dn().createSVGMatrix();switch(arguments.length){case 0:return Pe;case 1:return Qt(Pe,z);case 6:return Qt(Pe,{a:z,b:te,c:le,d:he,e:me,f:Oe})}}(),E=Qr(d.a,1e3),$=Qr(-d.e||0,1e3),W=Qr(-d.f||0,1e3),n=this._cachedViewbox={x:$?$/E:0,y:W?W/E:0,width:a.width/E,height:a.height/E,scale:E,inner:{width:l.width||0,height:l.height||0,x:l.x||0,y:l.y||0},outer:a})},st.prototype.scroll=function(n){const o=this._viewport;let a=o.getCTM();return n&&this._changeViewbox(function(){n=N({dx:0,dy:0},n||{}),a=this._svg.createSVGMatrix().translate(n.dx,n.dy).multiply(a),wC(o,a)}),{x:a.e,y:a.f}},st.prototype.scrollToElement=function(n,o){let a=100;"string"==typeof n&&(n=this._elementRegistry.get(n));const l=this.findRoot(n);l!==this.getRootElement()&&this.setRootElement(l),o||(o={}),"number"==typeof o&&(a=o),o={top:o.top||a,right:o.right||a,bottom:o.bottom||a,left:o.left||a};const d=qn(n),b=Yt(d),A=this.viewbox(),E=this.zoom();let $,W;A.y+=o.top/E,A.x+=o.left/E,A.width-=(o.right+o.left)/E,A.height-=(o.bottom+o.top)/E;const z=Yt(A);if(d.width<A.width&&d.height<A.height){const te=Math.max(0,b.right-z.right),le=Math.min(0,b.left-z.left),he=Math.max(0,b.bottom-z.bottom),me=Math.min(0,b.top-z.top);$=te||le,W=he||me}else $=d.x-A.x,W=d.y-A.y;this.scroll({dx:-$*E,dy:-W*E})},st.prototype.zoom=function(n,o){if(!n)return this.viewbox(n).scale;if("fit-viewport"===n)return this._fitViewport(o);let a,l;return this._changeViewbox(function(){"object"!=typeof o&&(a=this.viewbox().outer,o={x:a.width/2,y:a.height/2}),l=this._setZoom(n,o)}),Qr(l.a,1e3)},st.prototype._fitViewport=function(n){const o=this.viewbox(),a=o.outer,l=o.inner;let d,b;return l.x>=0&&l.y>=0&&l.x+l.width<=a.width&&l.y+l.height<=a.height&&!n?b={x:0,y:0,width:Math.max(l.width+l.x,a.width),height:Math.max(l.height+l.y,a.height)}:(d=Math.min(1,a.width/l.width,a.height/l.height),b={x:l.x+(n?l.width/2-a.width/d/2:0),y:l.y+(n?l.height/2-a.height/d/2:0),width:a.width/d,height:a.height/d}),this.viewbox(b),this.viewbox(!1).scale},st.prototype._setZoom=function(n,o){const a=this._svg,l=this._viewport,d=a.createSVGMatrix(),b=a.createSVGPoint();let A,E,$,W,z;$=l.getCTM();const te=$.a;return o?(A=N(b,o),E=A.matrixTransform($.inverse()),W=d.translate(E.x,E.y).scale(1/te*n).translate(-E.x,-E.y),z=$.multiply(W)):z=d.scale(n),wC(this._viewport,z),z},st.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},st.prototype.getAbsoluteBBox=function(n){const o=this.viewbox();let a;return a=n.waypoints?this.getGraphics(n).getBBox():n,{x:a.x*o.scale-o.x*o.scale,y:a.y*o.scale-o.y*o.scale,width:a.width*o.scale,height:a.height*o.scale}},st.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var Za="data-element-id";function Nr(n){this._elements={},this._eventBus=n}Nr.$inject=["eventBus"],Nr.prototype.add=function(n,o,a){var l=n.id;this._validateId(l),yt(o,Za,l),a&&yt(a,Za,l),this._elements[l]={element:n,gfx:o,secondaryGfx:a}},Nr.prototype.remove=function(n){var o=this._elements,a=n.id||n,l=a&&o[a];l&&(yt(l.gfx,Za,""),l.secondaryGfx&&yt(l.secondaryGfx,Za,""),delete o[a])},Nr.prototype.updateId=function(n,o){this._validateId(o),"string"==typeof n&&(n=this.get(n)),this._eventBus.fire("element.updateId",{element:n,newId:o});var a=this.getGraphics(n),l=this.getGraphics(n,!0);this.remove(n),n.id=o,this.add(n,a,l)},Nr.prototype.updateGraphics=function(n,o,a){var l=n.id||n,d=this._elements[l];return a?d.secondaryGfx=o:d.gfx=o,o&&yt(o,Za,l),o},Nr.prototype.get=function(n){var o;o="string"==typeof n?n:n&&yt(n,Za);var a=this._elements[o];return a&&a.element},Nr.prototype.filter=function(n){var o=[];return this.forEach(function(a,l){n(a,l)&&o.push(a)}),o},Nr.prototype.find=function(n){for(var o=this._elements,a=Object.keys(o),l=0;l<a.length;l++){var d=o[a[l]],b=d.element;if(n(b,d.gfx))return b}},Nr.prototype.getAll=function(){return this.filter(function(n){return n})},Nr.prototype.forEach=function(n){var o=this._elements;Object.keys(o).forEach(function(a){var l=o[a];return n(l.element,l.gfx)})},Nr.prototype.getGraphics=function(n,o){var l=this._elements[n.id||n];return l&&(o?l.secondaryGfx:l.gfx)},Nr.prototype._validateId=function(n){if(!n)throw new Error("element must have an id");if(this._elements[n])throw new Error("element with id "+n+" already added")};var Vv={exports:{}},Va={extend:function(n,o,a,l){var d=a.inverse;return Object.defineProperty(n,"remove",{value:function(b){var A=this.indexOf(b);return-1!==A&&(this.splice(A,1),o.unset(b,d,l)),b}}),Object.defineProperty(n,"contains",{value:function(b){return-1!==this.indexOf(b)}}),Object.defineProperty(n,"add",{value:function(b,A){var E=this.indexOf(b);if(void 0===A){if(-1!==E)return;A=this.length}-1!==E&&this.splice(E,1),this.splice(A,0,b),-1===E&&o.set(b,d,l)}}),Object.defineProperty(n,"__refs_collection",{value:!0}),n},isExtended:function(n){return!0===n.__refs_collection}},Qv=Va;function Hv(n,o,a){var l=Qv.extend(a[o.name]||[],n,o,a);Object.defineProperty(a,o.name,{enumerable:o.enumerable,value:l}),l.length&&l.forEach(function(d){n.set(d,o.inverse,a)})}function Cs(n,o){if(!(this instanceof Cs))return new Cs(n,o);n.inverse=o,o.inverse=n,this.props={},this.props[n.name]=n,this.props[o.name]=o}Cs.prototype.bind=function(n,o){if("string"==typeof o){if(!this.props[o])throw new Error("no property <"+o+"> in ref");o=this.props[o]}var a,l,d,b,A;o.collection?Hv(this,o,n):(a=this,b=(l=o).inverse,A=(d=n)[l.name],Object.defineProperty(d,l.name,{configurable:l.configurable,enumerable:l.enumerable,get:function(){return A},set:function(E){if(E!==A){var $=A;A=null,$&&a.unset($,b,d),a.set(A=E,b,d)}}}))},Cs.prototype.ensureRefsCollection=function(n,o){var a=n[o.name];return Qv.isExtended(a)||Hv(this,o,n),a},Cs.prototype.ensureBound=function(n,o){var l;l=o,Object.prototype.hasOwnProperty.call(n,l.name||l)||this.bind(n,o)},Cs.prototype.unset=function(n,o,a){n&&(this.ensureBound(n,o),o.collection?this.ensureRefsCollection(n,o).remove(a):n[o.name]=void 0)},Cs.prototype.set=function(n,o,a){n&&(this.ensureBound(n,o),o.collection?this.ensureRefsCollection(n,o).add(a):n[o.name]=a)};var xC=Cs;!function(n){n.exports=xC,n.exports.Collection=Va}(Vv);var lu=function Po(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}(Vv.exports),zv=new lu({name:"children",enumerable:!0,collection:!0},{name:"parent"}),Uv=new lu({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),Xv=new lu({name:"attachers",collection:!0},{name:"host"}),Kv=new lu({name:"outgoing",collection:!0},{name:"source"}),Yv=new lu({name:"incoming",collection:!0},{name:"target"});function Ul(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(n){var o=this.label,a=this.labels;!n&&o?a.remove(o):a.add(n,0)}}),zv.bind(this,"parent"),Uv.bind(this,"labels"),Kv.bind(this,"outgoing"),Yv.bind(this,"incoming")}function Xl(){Ul.call(this),zv.bind(this,"children"),Xv.bind(this,"host"),Xv.bind(this,"attachers")}function qv(){Xl.call(this)}function cu(){Xl.call(this),Uv.bind(this,"labelTarget")}function Jv(){Ul.call(this),Kv.bind(this,"source"),Yv.bind(this,"target")}Ce(Xl,Ul),Ce(qv,Xl),Ce(cu,Xl),Ce(Jv,Ul);var AC={connection:Jv,shape:Xl,label:cu,root:qv};function ws(){this._uid=12}ws.prototype.createRoot=function(n){return this.create("root",n)},ws.prototype.createLabel=function(n){return this.create("label",n)},ws.prototype.createShape=function(n){return this.create("shape",n)},ws.prototype.createConnection=function(n){return this.create("connection",n)},ws.prototype.create=function(n,o){return(o=N({},o||{})).id||(o.id=n+"_"+this._uid++),function(a,l){var d=AC[a];if(!d)throw new Error("unknown type: <"+a+">");return N(new d,l)}(n,o)};var OC=Array.prototype.slice;function Lr(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function uu(){}function td(n){return n.childNodes[0]}function Op(n,o,a,l,d){var b=$i();b.setTranslate(o,a);var A=$i();A.setRotate(l||0,0,0);var E=$i();E.setScale(d||1,d||1),fn(n,[b,A,E])}function Br(n,o,a){var l=$i();l.setTranslate(o,a),fn(n,l)}function ey(n,o){var a=$i();a.setRotate(o,0,0),fn(n,a)}function Hr(n,o){this._eventBus=n,this._elementRegistry=o}function ty(n,o,a){var l=a||o.firstChild;n!==l&&o.insertBefore(n,l)}Lr.prototype.on=function(n,o,a,l){if(n=H(n)?n:[n],_(o)&&(l=a,a=o,o=1e3),!k(o))throw new Error("priority must be a number");var d=a;l&&((d=D(a,l)).__fn=a.__fn||a);var b=this;n.forEach(function(A){b._addListener(A,{priority:o,callback:d,next:null})})},Lr.prototype.once=function(n,o,a,l){var d=this;if(_(o)&&(l=a,a=o,o=1e3),!k(o))throw new Error("priority must be a number");function b(){b.__isTomb=!0;var A=a.apply(l,arguments);return d.off(n,b),A}b.__fn=a,this.on(n,o,b)},Lr.prototype.off=function(n,o){n=H(n)?n:[n];var a=this;n.forEach(function(l){a._removeListener(l,o)})},Lr.prototype.createEvent=function(n){var o=new uu;return o.init(n),o},Lr.prototype.fire=function(n,o){var a,l,d,b;if(b=OC.call(arguments),"object"==typeof n&&(n=(o=n).type),!n)throw new Error("no event type specified");if(l=this._listeners[n]){a=o instanceof uu?o:this.createEvent(o),b[0]=a;var A=a.type;n!==A&&(a.type=n);try{d=this._invokeListeners(a,b,l)}finally{n!==A&&(a.type=A)}return void 0===d&&a.defaultPrevented&&(d=!1),d}},Lr.prototype.handleError=function(n){return!1===this.fire("error",{error:n})},Lr.prototype._destroy=function(){this._listeners={}},Lr.prototype._invokeListeners=function(n,o,a){for(var l;a&&!n.cancelBubble;)l=this._invokeListener(n,o,a),a=a.next;return l},Lr.prototype._invokeListener=function(n,o,a){var l,d;if(a.callback.__isTomb)return l;try{void 0!==(l=(d=a.callback).apply(null,o))&&(n.returnValue=l,n.stopPropagation()),!1===l&&n.preventDefault()}catch(d){if(!this.handleError(d))throw console.error("unhandled error in event listener",d),d}return l},Lr.prototype._addListener=function(n,o){var a,l=this._getListeners(n);if(l){for(;l;){if(l.priority<o.priority)return o.next=l,void(a?a.next=o:this._setListeners(n,o));a=l,l=l.next}a.next=o}else this._setListeners(n,o)},Lr.prototype._getListeners=function(n){return this._listeners[n]},Lr.prototype._setListeners=function(n,o){this._listeners[n]=o},Lr.prototype._removeListener=function(n,o){var a,l,d,b=this._getListeners(n);if(o)for(;b;)a=b.next,(d=b.callback)!==o&&d.__fn!==o||(l?l.next=a:this._setListeners(n,a)),l=b,b=a;else this._setListeners(n,null)},uu.prototype.stopPropagation=function(){this.cancelBubble=!0},uu.prototype.preventDefault=function(){this.defaultPrevented=!0},uu.prototype.init=function(n){N(this,n||{})},Hr.$inject=["eventBus","elementRegistry"],Hr.prototype._getChildrenContainer=function(n){var o,a=this._elementRegistry.getGraphics(n);return n.parent?(o=a.parentNode.childNodes[1])||(Fe(o=jt("g")).add("djs-children"),Ze(a.parentNode,o)):o=a,o},Hr.prototype._clear=function(n){var o=td(n);return se(o),o},Hr.prototype._createContainer=function(n,o,a,l){var d=jt("g");Fe(d).add("djs-group"),void 0!==a?ty(d,o,o.childNodes[a]):Ze(o,d);var b=jt("g");Fe(b).add("djs-element"),Fe(b).add("djs-"+n),l&&Fe(b).add("djs-frame"),Ze(d,b);var A=jt("g");return Fe(A).add("djs-visual"),Ze(b,A),b},Hr.prototype.create=function(n,o,a){var l=this._getChildrenContainer(o.parent);return this._createContainer(n,l,a,vs(o))},Hr.prototype.updateContainments=function(n){var a=this,l=this._elementRegistry;p(m(n,function(d,b){return b.parent&&(d[b.parent.id]=b.parent),d},{}),function(d){var b=d.children;if(b){var A=a._getChildrenContainer(d);p(b.slice().reverse(),function(E){ty(l.getGraphics(E).parentNode,A)})}})},Hr.prototype.drawShape=function(n,o){return this._eventBus.fire("render.shape",{gfx:n,element:o})},Hr.prototype.getShapePath=function(n){return this._eventBus.fire("render.getShapePath",n)},Hr.prototype.drawConnection=function(n,o){return this._eventBus.fire("render.connection",{gfx:n,element:o})},Hr.prototype.getConnectionPath=function(n){return this._eventBus.fire("render.getConnectionPath",n)},Hr.prototype.update=function(n,o,a){if(o.parent){var l=this._clear(a);if("shape"===n)this.drawShape(l,o),Br(a,o.x,o.y);else{if("connection"!==n)throw new Error("unknown type: "+n);this.drawConnection(l,o)}yt(a,"display",o.hidden?"none":"block")}},Hr.prototype.remove=function(n){ot(this._elementRegistry.getGraphics(n).parentNode)};var IC={__depends__:[Kh],__init__:["canvas"],canvas:["type",st],elementRegistry:["type",Nr],elementFactory:["type",ws],eventBus:["type",Lr],graphicsFactory:["type",Hr]};function Kl(n,o){this.injector=o=o||function _C(n){return function(o){var a=new Un(o);return a.init(),a}([{config:["value",n=n||{}]},IC].concat(n.modules||[]))}(n),this.get=o.get,this.invoke=o.invoke,this.get("eventBus").fire("diagram.init")}function Ip(){}function ny(n,o){this.model=n,this.properties=o}Kl.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},Kl.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")},Ip.prototype.get=function(n){return this.$model.properties.get(this,n)},Ip.prototype.set=function(n,o){this.$model.properties.set(this,n,o)},ny.prototype.createType=function(n){var o=this.model,a=this.properties,l=Object.create(Ip.prototype);p(n.properties,function(A){A.isMany||void 0===A.default||(l[A.name]=A.default)}),a.defineModel(l,o),a.defineDescriptor(l,n);var d=n.ns.name;function b(A){a.define(this,"$type",{value:d,enumerable:!0}),a.define(this,"$attrs",{value:{}}),a.define(this,"$parent",{writable:!0}),p(A,D(function(E,$){this.set($,E)},this))}return b.prototype=l,b.hasType=l.$instanceOf=this.model.hasType,a.defineModel(b,o),a.defineDescriptor(b,n),b};var Vn={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},Oi={String:function(n){return n},Boolean:function(n){return"true"===n},Integer:function(n){return parseInt(n,10)},Real:function(n){return parseFloat(n)}};function po(n,o){var a=Oi[n];return a?a(o):o}function _p(n){return!!Vn[n]}function hu(n){return!!Oi[n]}function gr(n,o){var a,l,d=n.split(/:/);if(1===d.length)a=n,l=o;else{if(2!==d.length)throw new Error("expected <prefix:localName> or <localName>, got "+n);a=d[1],l=d[0]}return{name:n=(l?l+":":"")+a,prefix:l,localName:a}}function vr(n){this.ns=n,this.name=n.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}function xs(n,o){this.packageMap={},this.typeMap={},this.packages=[],this.properties=o,p(n,D(this.registerPackage,this))}function Sp(n,o,a){var l=o[a];if(l in n)throw new Error("package with "+a+" <"+l+"> already defined")}function Yl(n){this.model=n}function Qa(n,o,a){Object.defineProperty(n,o.name,{enumerable:!o.isReference,writable:!0,value:a,configurable:!0})}function mo(n){this.properties=new Yl(this),this.factory=new ny(this,this.properties),this.registry=new xs(n,this.properties),this.typeCache={}}vr.prototype.build=function(){return re(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])},vr.prototype.addProperty=function(n,o,a){"boolean"==typeof o&&(a=o,o=void 0),this.addNamedProperty(n,!1!==a);var l=this.properties;void 0!==o?l.splice(o,0,n):l.push(n)},vr.prototype.replaceProperty=function(n,o,a){var l=n.ns,d=this.properties,b=this.propertiesByName,A=n.name!==o.name;if(n.isId){if(!o.isId)throw new Error("property <"+o.ns.name+"> must be id property to refine <"+n.ns.name+">");this.setIdProperty(o,!1)}if(n.isBody){if(!o.isBody)throw new Error("property <"+o.ns.name+"> must be body property to refine <"+n.ns.name+">");this.setBodyProperty(o,!1)}var E=d.indexOf(n);if(-1===E)throw new Error("property <"+l.name+"> not found in property list");d.splice(E,1),this.addProperty(o,a?void 0:E,A),b[l.name]=b[l.localName]=o},vr.prototype.redefineProperty=function(n,o,a){var l=n.ns.prefix,d=o.split("#"),b=gr(d[0],l),A=gr(d[1],b.prefix).name,E=this.propertiesByName[A];if(!E)throw new Error("refined property <"+A+"> not found");this.replaceProperty(E,n,a),delete n.redefines},vr.prototype.addNamedProperty=function(n,o){var a=n.ns,l=this.propertiesByName;o&&(this.assertNotDefined(n,a.name),this.assertNotDefined(n,a.localName)),l[a.name]=l[a.localName]=n},vr.prototype.removeNamedProperty=function(n){var o=n.ns,a=this.propertiesByName;delete a[o.name],delete a[o.localName]},vr.prototype.setBodyProperty=function(n,o){if(o&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+n.ns.name+">)");this.bodyProperty=n},vr.prototype.setIdProperty=function(n,o){if(o&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+n.ns.name+">)");this.idProperty=n},vr.prototype.assertNotDefined=function(n,o){var a=n.name,l=this.propertiesByName[a];if(l)throw new Error("property <"+a+"> already defined; override of <"+l.definedBy.ns.name+"#"+l.ns.name+"> by <"+n.definedBy.ns.name+"#"+n.ns.name+"> not allowed without redefines")},vr.prototype.hasProperty=function(n){return this.propertiesByName[n]},vr.prototype.addTrait=function(n,o){var a=this.allTypesByName,l=this.allTypes,d=n.name;d in a||(p(n.properties,D(function(b){b=N({},b,{name:b.ns.localName,inherited:o}),Object.defineProperty(b,"definedBy",{value:n});var A=b.replaces,E=b.redefines;A||E?this.redefineProperty(b,A||E,A):(b.isBody&&this.setBodyProperty(b),b.isId&&this.setIdProperty(b),this.addProperty(b))},this)),l.push(n),a[d]=n)},xs.prototype.getPackage=function(n){return this.packageMap[n]},xs.prototype.getPackages=function(){return this.packages},xs.prototype.registerPackage=function(n){n=N({},n);var o=this.packageMap;Sp(o,n,"prefix"),Sp(o,n,"uri"),p(n.types,D(function(a){this.registerType(a,n)},this)),o[n.uri]=o[n.prefix]=n,this.packages.push(n)},xs.prototype.registerType=function(n,o){var a=gr((n=N({},n,{superClass:(n.superClass||[]).slice(),extends:(n.extends||[]).slice(),properties:(n.properties||[]).slice(),meta:N(n.meta||{})})).name,o.prefix),l=a.name,d={};p(n.properties,D(function(b){var A=gr(b.name,a.prefix),E=A.name;_p(b.type)||(b.type=gr(b.type,A.prefix).name),N(b,{ns:A,name:E}),d[E]=b},this)),N(n,{ns:a,name:l,propertiesByName:d}),p(n.extends,D(function(b){var A=this.typeMap[b];A.traits=A.traits||[],A.traits.push(l)},this)),this.definePackage(n,o),this.typeMap[l]=n},xs.prototype.mapTypes=function(n,o,a){var l=_p(n.name)?{name:n.name}:this.typeMap[n.name],d=this;function b(E){return A(E,!0)}function A(E,$){var W=gr(E,_p(E)?"":n.prefix);d.mapTypes(W,o,$)}if(!l)throw new Error("unknown type <"+n.name+">");p(l.superClass,a?b:A),o(l,!a),p(l.traits,b)},xs.prototype.getEffectiveDescriptor=function(n){var o=gr(n),a=new vr(o);this.mapTypes(o,function(d,b){a.addTrait(d,b)});var l=a.build();return this.definePackage(l,l.allTypes[l.allTypes.length-1].$pkg),l},xs.prototype.definePackage=function(n,o){this.properties.define(n,"$pkg",{value:o})},Yl.prototype.set=function(n,o,a){if(!M(o)||!o.length)throw new TypeError("property name must be a non-empty string");var l=this.model.getPropertyDescriptor(n,o),d=l&&l.name;void 0===a?l?delete n[d]:delete n.$attrs[o]:l?d in n?n[d]=a:Qa(n,l,a):n.$attrs[o]=a},Yl.prototype.get=function(n,o){var a=this.model.getPropertyDescriptor(n,o);if(!a)return n.$attrs[o];var l=a.name;return!n[l]&&a.isMany&&Qa(n,a,[]),n[l]},Yl.prototype.define=function(n,o,a){if(!a.writable){var l=a.value;delete(a=N({},a,{get:function(){return l}})).value}Object.defineProperty(n,o,a)},Yl.prototype.defineDescriptor=function(n,o){this.define(n,"$descriptor",{value:o})},Yl.prototype.defineModel=function(n,o){this.define(n,"$model",{value:o})},mo.prototype.create=function(n,o){var a=this.getType(n);if(!a)throw new Error("unknown type <"+n+">");return new a(o)},mo.prototype.getType=function(n){var o=this.typeCache,a=M(n)?n:n.ns.name,l=o[a];return l||(n=this.registry.getEffectiveDescriptor(a),l=o[a]=this.factory.createType(n)),l},mo.prototype.createAny=function(n,o,a){var l=gr(n),d={$type:n,$instanceOf:function(A){return A===this.$type}};return this.properties.defineDescriptor(d,{name:n,isGeneric:!0,ns:{prefix:l.prefix,localName:l.localName,uri:o}}),this.properties.defineModel(d,this),this.properties.define(d,"$parent",{enumerable:!1,writable:!0}),this.properties.define(d,"$instanceOf",{enumerable:!1,writable:!0}),p(a,function(A,E){F(A)&&void 0!==A.value?d[A.name]=A.value:d[E]=A}),d},mo.prototype.getPackage=function(n){return this.registry.getPackage(n)},mo.prototype.getPackages=function(){return this.registry.getPackages()},mo.prototype.getElementDescriptor=function(n){return n.$descriptor},mo.prototype.hasType=function(n,o){return void 0===o&&(o=n,n=this),o in n.$model.getElementDescriptor(n).allTypesByName},mo.prototype.getPropertyDescriptor=function(n,o){return this.getElementDescriptor(n).propertiesByName[o]},mo.prototype.getTypeDescriptor=function(n){return this.registry.typeMap[n]};var iy=String.fromCharCode,ry=Object.prototype.hasOwnProperty,zr=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/gi,ql={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};function SC(n,o,a,l){return l?ry.call(ql,l)?ql[l]:"&"+l+";":iy(o||parseInt(a,16))}function qs(n){return n.length>3&&-1!==n.indexOf("&")?n.replace(zr,SC):n}Object.keys(ql).forEach(function(n){ql[n.toUpperCase()]=ql[n]});var Ep="xsi:type",sr="non-whitespace outside of root node";function Js(n){return new Error(n)}function Ur(n){return"missing namespace for prefix <"+n+">"}function Jl(n){return{get:n,enumerable:!0}}function ar(n){var o,a={};for(o in n)a[o]=n[o];return a}function go(n){return n+"$uri"}function Mi(){return{line:0,column:0}}function Ir(n){throw n}function ea(n){if(!this)return new ea(n);var o,a,l,d,b,A,E,$,W,z=n&&n.proxy,te=Ir,le=Mi,he=!1,me=!1,Oe=null,Pe=!1;function we(De){De instanceof Error||(De=Js(De)),Oe=De,te(De,le)}function Ee(De){b&&(De instanceof Error||(De=Js(De)),b(De,le))}this.on=function(De,Be){if("function"!=typeof Be)throw Js("required args <name, cb>");switch(De){case"openTag":a=Be;break;case"text":o=Be;break;case"closeTag":l=Be;break;case"error":te=Be;break;case"warn":b=Be;break;case"cdata":d=Be;break;case"attention":$=Be;break;case"question":E=Be;break;case"comment":A=Be;break;default:throw Js("unsupported event: "+De)}return this},this.ns=function(De){if(void 0===De&&(De={}),"object"!=typeof De)throw Js("required args <nsMap={}>");var Be,He={};for(Be in De)He[Be]=De[Be];return He["http://www.w3.org/2001/XMLSchema-instance"]="xsi",me=!0,W=He,this},this.parse=function(De){if("string"!=typeof De)throw Js("required args <xml=string>");return Oe=null,function(Be){var He,rt,qe,nt,gt,qt,Mt,dt,Ot,un,Ve,Se=me?[]:null,et=me?function(li){var ci,Fn,Di={};for(ci in li)Di[Fn=li[ci]]=Fn,Di[go(Fn)]=ci;return Di}(W):null,bt=[],Pt=0,Xt=!1,tn=!1,en=0,nn=0,Hn="",Xi=0;function Uo(){if(null!==Ve)return Ve;var li,ci,Fn,Di,Ki,ii,Rr,An,Cr,gn,zn,$a=me&&et.xmlns,ds=me&&he?[]:null,Ri=Xi,Fi=Hn,Gr=Fi.length,fs={},Zh={};e:for(;Ri<Gr;Ri++)if(Cr=!1,!(32===(gn=Fi.charCodeAt(Ri))||gn<14&&gn>8)){for((gn<65||gn>122||gn>90&&gn<97)&&95!==gn&&58!==gn&&(Ee("illegal first char attribute name"),Cr=!0),zn=Ri+1;zn<Gr;zn++)if(!((gn=Fi.charCodeAt(zn))>96&&gn<123||gn>64&&gn<91||gn>47&&gn<59||46===gn||45===gn||95===gn)){if(32===gn||gn<14&&gn>8){Ee("missing attribute value"),Ri=zn;continue e}if(61===gn)break;Ee("illegal attribute name char"),Cr=!0}if("xmlns:xmlns"===(An=Fi.substring(Ri,zn))&&(Ee("illegal declaration of xmlns"),Cr=!0),34===(gn=Fi.charCodeAt(zn+1)))-1===(zn=Fi.indexOf('"',Ri=zn+2))&&-1!==(zn=Fi.indexOf("'",Ri))&&(Ee("attribute value quote missmatch"),Cr=!0);else if(39===gn)-1===(zn=Fi.indexOf("'",Ri=zn+2))&&-1!==(zn=Fi.indexOf('"',Ri))&&(Ee("attribute value quote missmatch"),Cr=!0);else for(Ee("missing attribute value quotes"),Cr=!0,zn+=1;zn<Gr&&!(32===(gn=Fi.charCodeAt(zn+1))||gn<14&&gn>8);zn++);for(-1===zn&&(Ee("missing closing quotes"),zn=Gr,Cr=!0),Cr||(ii=Fi.substring(Ri,zn)),Ri=zn;zn+1<Gr&&!(32===(gn=Fi.charCodeAt(zn+1))||gn<14&&gn>8);zn++)Ri===zn&&(Ee("illegal character after attribute end"),Cr=!0);if(Ri=zn+1,!Cr)if(An in Zh)Ee("attribute <"+An+"> already defined");else if(Zh[An]=!0,me)if(he){if(null!==(Ki="xmlns"===An?"xmlns":120===An.charCodeAt(0)&&"xmlns:"===An.substr(0,6)?An.substr(6):null)){if(li=qs(ii),ci=go(Ki),!(Rr=W[li])){if("xmlns"===Ki||ci in et&&et[ci]!==li)do{Rr="ns"+Pt++}while(void 0!==et[Rr]);else Rr=Ki;W[li]=Rr}et[Ki]!==Rr&&(Di||(et=ar(et),Di=!0),et[Ki]=Rr,"xmlns"===Ki&&(et[go(Rr)]=li,$a=Rr),et[ci]=li),fs[An]=ii;continue}ds.push(An,ii)}else-1!==(gn=An.indexOf(":"))?(Fn=et[An.substring(0,gn)])?((An=$a===Fn?An.substr(gn+1):Fn+An.substr(gn))===Ep&&(-1!==(gn=ii.indexOf(":"))?(Fn=ii.substring(0,gn),ii=(Fn=et[Fn]||Fn)+ii.substring(gn)):ii=$a+":"+ii),fs[An]=ii):Ee(Ur(An.substring(0,gn))):fs[An]=ii;else fs[An]=ii}if(he)for(Ri=0,Gr=ds.length;Ri<Gr;Ri++){if(An=ds[Ri++],ii=ds[Ri],-1!==(gn=An.indexOf(":"))){if(!(Fn=et[An.substring(0,gn)])){Ee(Ur(An.substring(0,gn)));continue}(An=$a===Fn?An.substr(gn+1):Fn+An.substr(gn))===Ep&&(-1!==(gn=ii.indexOf(":"))?(Fn=ii.substring(0,gn),ii=(Fn=et[Fn]||Fn)+ii.substring(gn)):ii=$a+":"+ii)}fs[An]=ii}return Ve=fs}for(le=function Eo(){for(var li,ci,Fn=/(\r\n|\r|\n)/g,Di=0,Ki=0,ii=0,Rr=nn;en>=ii&&(li=Fn.exec(Be))&&!((Rr=li[0].length+li.index)>en);)Di+=1,ii=Rr;return-1==en?(Ki=Rr,ci=Be.substring(nn)):0===nn?ci=Be.substring(nn,en):(Ki=en-ii,ci=-1==nn?Be.substring(en):Be.substring(en,nn+1)),{data:ci,line:Di,column:Ki}},z&&(un=Object.create({},{name:Jl(function(){return dt}),originalName:Jl(function(){return Ot}),attrs:Jl(Uo),ns:Jl(function(){return et})}));-1!==nn;){if(-1===(en=60===Be.charCodeAt(nn)?nn:Be.indexOf("<",nn)))return bt.length?we("unexpected end of file"):0===nn?we("missing start tag"):void(nn<Be.length&&Be.substring(nn).trim()&&Ee(sr));if(nn!==en)if(bt.length){if(o&&(o(Be.substring(nn,en),qs,le),Pe))return}else if(Be.substring(nn,en).trim()&&(Ee(sr),Pe))return;if(33===(gt=Be.charCodeAt(en+1))){if(91===(nt=Be.charCodeAt(en+2))&&"CDATA["===Be.substr(en+3,6)){if(-1===(nn=Be.indexOf("]]>",en)))return we("unclosed cdata");if(d&&(d(Be.substring(en+9,nn),le),Pe))return;nn+=3;continue}if(45===nt&&45===Be.charCodeAt(en+3)){if(-1===(nn=Be.indexOf("--\x3e",en)))return we("unclosed comment");if(A&&(A(Be.substring(en+4,nn),qs,le),Pe))return;nn+=3;continue}}if(63!==gt){for(rt=en+1;;rt++){if(qt=Be.charCodeAt(rt),isNaN(qt))return nn=-1,we("unclosed tag");if(34===qt)rt=-1!==(nt=Be.indexOf('"',rt+1))?nt:rt;else if(39===qt)rt=-1!==(nt=Be.indexOf("'",rt+1))?nt:rt;else if(62===qt){nn=rt;break}}if(33!==gt){if(Ve={},47===gt){if(Xt=!1,tn=!0,!bt.length)return we("missing open tag");if(rt=dt=bt.pop(),Be.substring(en+2,nt=en+2+rt.length)!==rt)return we("closing tag mismatch");for(;nt<nn;nt++)if(!(32===(gt=Be.charCodeAt(nt))||gt>8&&gt<14))return we("close tag")}else{if(47===Be.charCodeAt(nn-1)?(rt=dt=Be.substring(en+1,nn-1),Xt=!0,tn=!0):(rt=dt=Be.substring(en+1,nn),Xt=!0,tn=!1),!(gt>96&&gt<123||gt>64&&gt<91||95===gt||58===gt))return we("illegal first char nodeName");for(nt=1,qe=rt.length;nt<qe;nt++)if(!((gt=rt.charCodeAt(nt))>96&&gt<123||gt>64&&gt<91||gt>47&&gt<59||45===gt||95===gt||46==gt)){if(32===gt||gt<14&&gt>8){dt=rt.substring(0,nt),Ve=null;break}return we("invalid nodeName")}tn||bt.push(dt)}if(me){if(He=et,Xt&&(tn||Se.push(He),null===Ve&&(he=-1!==rt.indexOf("xmlns",nt))&&(Xi=nt,Hn=rt,Uo(),he=!1)),Ot=dt,-1!==(gt=dt.indexOf(":"))){if(!(Mt=et[dt.substring(0,gt)]))return we("missing namespace on <"+Ot+">");dt=dt.substr(gt+1)}else Mt=et.xmlns;Mt&&(dt=Mt+":"+dt)}if(Xt&&(Xi=nt,Hn=rt,a&&(z?a(un,qs,tn,le):a(dt,Uo,qs,tn,le),Pe)))return;if(tn){if(l&&(l(z?un:dt,qs,Xt,le),Pe))return;me&&(et=Xt?He:Se.pop())}nn+=1}else{if($&&($(Be.substring(en,nn+1),qs,le),Pe))return;nn+=1}}else{if(-1===(nn=Be.indexOf("?>",en)))return we("unclosed question");if(E&&(E(Be.substring(en,nn+2),le),Pe))return;nn+=2}}}(De),le=Mi,Pe=!1,Oe},this.stop=function(){Pe=!0}}function nd(n){return n.xml&&"lowerCase"===n.xml.tagAlias}var kp={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},du="xsi:type";function ec(n){return n.xml&&n.xml.serialize}function ta(n){return ec(n)===du}function _t(n,o){return nd(o)?n.prefix+":"+((a=n.localName).charAt(0).toUpperCase()+a.slice(1)):n.name;var a}function As(n){return new Error(n)}function $o(n){return n.$descriptor}function sn(n){N(this,n),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(o){this.references.push(o)},this.addElement=function(o){if(!o)throw As("expected element");var a,l=this.elementsById,d=$o(o).idProperty;if(d&&(a=o.get(d.name))){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(a))throw new Error("illegal ID <"+a+">");if(l[a])throw As("duplicate ID <"+a+">");l[a]=o}},this.addWarning=function(o){this.warnings.push(o)}}function Ha(){}function tc(){}function za(){}function Ua(n,o){this.property=n,this.context=o}function Tp(n,o){this.element=o,this.propertyDesc=n}function fu(){}function Dn(n,o,a){this.model=n,this.type=n.getType(o),this.context=a}function na(n,o,a){Dn.call(this,n,o,a)}function es(n,o,a){this.model=n,this.context=a}function ia(n){n instanceof mo&&(n={model:n}),N(this,{lax:!1},n)}Ha.prototype.handleEnd=function(){},Ha.prototype.handleText=function(){},Ha.prototype.handleNode=function(){},(tc.prototype=Object.create(Ha.prototype)).handleNode=function(){return this},(za.prototype=Object.create(Ha.prototype)).handleText=function(n){this.body=(this.body||"")+n},(Ua.prototype=Object.create(za.prototype)).handleNode=function(n){if(this.element)throw As("expected no sub nodes");return this.element=this.createReference(n),this},Ua.prototype.handleEnd=function(){this.element.id=this.body},Ua.prototype.createReference=function(n){return{property:this.property.ns.name,id:""}},(Tp.prototype=Object.create(za.prototype)).handleEnd=function(){var n=this.body||"",o=this.element,a=this.propertyDesc;n=po(a.type,n),a.isMany?o.get(a.name).push(n):o.set(a.name,n)},(fu.prototype=Object.create(za.prototype)).handleNode=function(n){var o=this,a=this.element;return a?o=this.handleChild(n):(a=this.element=this.createElement(n),this.context.addElement(a)),o},(Dn.prototype=Object.create(fu.prototype)).addReference=function(n){this.context.addReference(n)},Dn.prototype.handleText=function(n){if(!$o(this.element).bodyProperty)throw As("unexpected body text <"+n+">");za.prototype.handleText.call(this,n)},Dn.prototype.handleEnd=function(){var n=this.body,o=this.element,a=$o(o).bodyProperty;a&&void 0!==n&&(n=po(a.type,n),o.set(a.name,n))},Dn.prototype.createElement=function(n){var o,a=n.attributes,l=this.type,d=$o(l),b=this.context,A=new l({}),E=this.model;return p(a,function($,W){var z=d.propertiesByName[W];z&&z.isReference?z.isMany?p($.split(" "),function(te){b.addReference({element:A,property:z.ns.name,id:te})}):b.addReference({element:A,property:z.ns.name,id:$}):(z?$=po(z.type,$):"xmlns"!==W&&(o=gr(W,d.ns.prefix),E.getPackage(o.prefix)&&b.addWarning({message:"unknown attribute <"+W+">",element:A,property:W,value:$})),A.set(W,$))}),A},Dn.prototype.getPropertyForNode=function(n){var o,a,te,he,me,Oe,Pe,we,le,l=gr(n.name),b=this.model,A=$o(this.type),$=A.propertiesByName[l.name];if($&&!$.isAttr)return ta($)&&(o=n.attributes[du])?(te=b,he=le=gr(o),me=te.getPackage(le.prefix),Oe=he.name,Pe=he.localName,o=(we=me.xml&&me.xml.typePrefix)&&0===Pe.indexOf(we)?he.prefix+":"+Pe.slice(we.length):Oe,N({},$,{effectiveType:$o(a=b.getType(o)).name})):$;var W=b.getPackage(l.prefix);if(W){if(o=_t(l,W),a=b.getType(o),$=S(A.properties,function(z){return!z.isVirtual&&!z.isReference&&!z.isAttribute&&a.hasType(z.type)}))return N({},$,{effectiveType:$o(a).name})}else if($=S(A.properties,function(z){return!z.isReference&&!z.isAttribute&&"Element"===z.type}))return $;throw As("unrecognized element <"+l.name+">")},Dn.prototype.toString=function(){return"ElementDescriptor["+$o(this.type).name+"]"},Dn.prototype.valueHandler=function(n,o){return new Tp(n,o)},Dn.prototype.referenceHandler=function(n){return new Ua(n,this.context)},Dn.prototype.handler=function(n){return"Element"===n?new es(this.model,n,this.context):new Dn(this.model,n,this.context)},Dn.prototype.handleChild=function(n){var o,a,l,d;if(o=this.getPropertyForNode(n),l=this.element,hu(a=o.effectiveType||o.type))return this.valueHandler(o,l);var b=(d=o.isReference?this.referenceHandler(o).handleNode(n):this.handler(a).handleNode(n)).element;return void 0!==b&&(o.isMany?l.get(o.name).push(b):l.set(o.name,b),o.isReference?(N(b,{element:l}),this.context.addReference(b)):b.$parent=l),d},(na.prototype=Object.create(Dn.prototype)).createElement=function(n){var o=n.name,a=gr(o),d=this.type,b=this.model.getPackage(a.prefix),A=b&&_t(a,b)||o;if(!d.hasType(A))throw As("unexpected element <"+n.originalName+">");return Dn.prototype.createElement.call(this,n)},(es.prototype=Object.create(fu.prototype)).createElement=function(n){var o=n.name,a=gr(o).prefix;return this.model.createAny(o,n.ns[a+"$uri"],n.attributes)},es.prototype.handleChild=function(n){var o=new es(this.model,"Element",this.context).handleNode(n),a=this.element,l=o.element;return void 0!==l&&((a.$children=a.$children||[]).push(l),l.$parent=a),o},es.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},ia.prototype.fromXML=function(n,o,a){var l=o.rootHandler;o instanceof Dn?(l=o,o={}):"string"==typeof o?(l=this.handler(o),o={}):"string"==typeof l&&(l=this.handler(l));var Pe,d=this.model,b=this.lax,A=new sn(N({},o,{rootHandler:l})),E=new ea({proxy:!0}),$=(Pe=[],Object.defineProperty(Pe,"peek",{value:function(){return this[this.length-1]}}),Pe);function W(Pe,we,Ee){var De=we(),Be=De.line,He=De.column,rt=De.data;"<"===rt.charAt(0)&&-1!==rt.indexOf(" ")&&(rt=rt.slice(0,rt.indexOf(" "))+">");var qe="unparsable content "+(rt?rt+" ":"")+"detected\n\tline: "+Be+"\n\tcolumn: "+He+"\n\tnested error: "+Pe.message;if(Ee)return A.addWarning({message:qe,error:Pe}),!0;throw As(qe)}function z(Pe,we){return W(Pe,we,!0)}l.context=A,$.push(l);var te=/^<\?xml /i,le=/ encoding="([^"]+)"/i,he=/^utf-8$/i;function me(Pe,we){try{$.peek().handleText(Pe)}catch(Ee){z(Ee,we)}}var Oe=d.getPackages().reduce(function(Pe,we){return Pe[we.uri]=we.prefix,Pe},{"http://www.w3.org/XML/1998/namespace":"xml"});return E.ns(Oe).on("openTag",function(Pe,we,Ee,De){var Be=Pe.attrs||{},He=Object.keys(Be).reduce(function(rt,qe){var nt=we(Be[qe]);return rt[qe]=nt,rt},{});!function(rt,qe){var nt=$.peek();try{$.push(nt.handleNode(rt))}catch(gt){W(gt,qe,b)&&$.push(new tc)}}({name:Pe.name,originalName:Pe.originalName,attributes:He,ns:Pe.ns},De)}).on("question",function(Pe){if(te.test(Pe)){var we=le.exec(Pe),Ee=we&&we[1];Ee&&!he.test(Ee)&&A.addWarning({message:"unsupported document encoding <"+Ee+">, falling back to UTF-8"})}}).on("closeTag",function(){$.pop().handleEnd()}).on("cdata",me).on("text",function(Pe,we,Ee){var De,Be;Be=Ee,(De=we(Pe)).trim()&&me(De,Be)}).on("error",W).on("warn",z),new Promise(function(Pe,we){var Ee;try{E.parse(n),function(){var qe,nt,gt=A.elementsById,qt=A.references;for(qe=0;nt=qt[qe];qe++){var Mt=nt.element,dt=gt[nt.id],Ot=$o(Mt).propertiesByName[nt.property];if(dt||A.addWarning({message:"unresolved reference <"+nt.id+">",element:nt.element,property:nt.property,value:nt.id}),Ot.isMany){var un=Mt.get(Ot.name),Ve=un.indexOf(nt);-1===Ve&&(Ve=un.length),dt?un[Ve]=dt:un.splice(Ve,1)}else Mt.set(Ot.name,dt)}}()}catch(qe){Ee=qe}var De=l.element;Ee||De||(Ee=As("failed to parse document as <"+l.type.$descriptor.name+">"));var Be=A.warnings,He=A.references,rt=A.elementsById;return Ee?(Ee.warnings=Be,we(Ee)):Pe({rootElement:De,elementsById:rt,references:He,warnings:Be})})},ia.prototype.handler=function(n){return new na(this.model,n)};var oy=/<|>|'|"|&|\n\r|\n/g,pu=/<|>|&/g;function Pp(n){var o={},a={},l={},d=[],b=[];this.byUri=function(A){return a[A]||n&&n.byUri(A)},this.add=function(A,E){a[A.uri]=A,E?d.push(A):b.push(A),this.mapPrefix(A.prefix,A.uri)},this.uriByPrefix=function(A){return o[A||"xmlns"]},this.mapPrefix=function(A,E){o[A||"xmlns"]=E},this.getNSKey=function(A){return void 0!==A.prefix?A.uri+"|"+A.prefix:A.uri},this.logUsed=function(A){var E=A.uri,$=this.getNSKey(A);l[$]=this.byUri(E),n&&n.logUsed(A)},this.getUsed=function(A){var E=this;return[].concat(d,b).filter(function($){var W=E.getNSKey($);return l[W]})}}function id(n,o){return nd(o)?(a=n).charAt(0).toLowerCase()+a.slice(1):n;var a}function sy(n,o){n.super_=o,n.prototype=Object.create(o.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}})}function nc(n){return M(n)?n:(n.prefix?n.prefix+":":"")+n.localName}var rd={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},ay={"<":"lt",">":"gt","&":"amp"};function Rp(n,o,a){return(n=M(n)?n:""+n).replace(o,function(l){return"&"+a[l]+";"})}function od(n){this.tagName=n}function ra(){}function sd(n){this.tagName=n}function oi(n,o){this.body=[],this.attrs=[],this.parent=n,this.propertyDescriptor=o}function mu(n,o){oi.call(this,n,o)}function Xa(){this.value="",this.write=function(n){this.value+=n}}function EC(n,o){var a=[""];this.append=function(l){return n.write(l),this},this.appendNewLine=function(){return o&&n.write("\n"),this},this.appendIndent=function(){return o&&n.write(a.join("  ")),this},this.indent=function(){return a.push(""),this},this.unindent=function(){return a.pop(),this}}function kC(n){return n=N({format:!1,preamble:!0},n||{}),{toXML:function(o,a){var l=a||new Xa,d=new EC(l,n.format);if(n.preamble&&d.append('<?xml version="1.0" encoding="UTF-8"?>\n'),(new oi).build(o).serializeTo(d),!a)return l.value}}}function _n(n,o){mo.call(this,n,o)}od.prototype.build=function(n){return this.element=n,this},od.prototype.serializeTo=function(n){n.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()},ra.prototype.serializeValue=ra.prototype.serializeTo=function(n){n.append(this.escape?Rp(this.value,pu,ay):this.value)},ra.prototype.build=function(n,o){return this.value=o,"String"===n.type&&-1!==o.search(pu)&&(this.escape=!0),this},sy(sd,ra),sd.prototype.serializeTo=function(n){n.appendIndent().append("<"+this.tagName+">"),this.serializeValue(n),n.append("</"+this.tagName+">").appendNewLine()},oi.prototype.build=function(n){this.element=n;var o,a,A,l=n.$descriptor,d=this.propertyDescriptor,b=l.isGeneric;return o=b?this.parseGeneric(n):this.parseNsAttributes(n),this.ns=d?this.nsPropertyTagName(d):this.nsTagName(l),this.tagName=this.addTagName(this.ns),b||(a=w((A=n).$descriptor.properties,function(E){var $=E.name;if(E.isVirtual||!R(A,$))return!1;var W=A[$];return W!==E.default&&null!==W&&(!E.isMany||W.length)}),this.parseAttributes(w(a,function(A){return A.isAttr})),this.parseContainments(function(A){return w(A,function(E){return!E.isAttr})}(a))),this.parseGenericAttributes(n,o),this},oi.prototype.nsTagName=function(n){return function(o,a){return N(a.isGeneric?{localName:a.ns.localName}:{localName:id(a.ns.localName,a.$pkg)},o)}(this.logNamespaceUsed(n.ns),n)},oi.prototype.nsPropertyTagName=function(n){return function(o,a){return N({localName:a.ns.localName},o)}(this.logNamespaceUsed(n.ns),n)},oi.prototype.isLocalNs=function(n){return n.uri===this.ns.uri},oi.prototype.nsAttributeName=function(n){var o;if(o=M(n)?gr(n):n.ns,n.inherited)return{localName:o.localName};var a=this.logNamespaceUsed(o);return this.getNamespaces().logUsed(a),this.isLocalNs(a)?{localName:o.localName}:N({localName:o.localName},a)},oi.prototype.parseGeneric=function(n){var o=this,a=this.body,l=[];return p(n,function(d,b){"$body"===b?a.push((new ra).build({type:"String"},d)):"$children"===b?p(d,function(A){a.push(new oi(o).build(A))}):0!==b.indexOf("$")&&o.parseNsAttribute(n,b,d)&&l.push({name:b,value:d})}),l},oi.prototype.parseNsAttribute=function(n,o,a){var l,d=n.$model,b=gr(o);if("xmlns"===b.prefix&&(l={prefix:b.localName,uri:a}),b.prefix||"xmlns"!==b.localName||(l={uri:a}),!l)return{name:o,value:a};if(d&&d.getPackage(a))this.logNamespace(l,!0,!0);else{var A=this.logNamespaceUsed(l,!0);this.getNamespaces().logUsed(A)}},oi.prototype.parseNsAttributes=function(n,o){var a=this,d=[];return p(n.$attrs,function(b,A){var E=a.parseNsAttribute(n,A,b);E&&d.push(E)}),d},oi.prototype.parseGenericAttributes=function(n,o){var a=this;p(o,function(l){if(l.name!==du)try{a.addAttribute(a.nsAttributeName(l.name),l.value)}catch(d){console.warn("missing namespace information for ",l.name,"=",l.value,"on",n,d)}})},oi.prototype.parseContainments=function(n){var o=this,a=this.body,l=this.element;p(n,function(d){var b=l.get(d.name),A=d.isReference;if(d.isMany||(b=[b]),d.isBody)a.push((new ra).build(d,b[0]));else if(hu(d.type))p(b,function(W){a.push(new sd(o.addTagName(o.nsPropertyTagName(d))).build(d,W))});else if(A)p(b,function(W){a.push(new od(o.addTagName(o.nsPropertyTagName(d))).build(W))});else{var E=ta(d),$="property"===ec(d);p(b,function(W){var z;z=E?new mu(o,d):$?new oi(o,d):new oi(o),a.push(z.build(W))})}})},oi.prototype.getNamespaces=function(n){var o,a=this.namespaces,l=this.parent;return a||(o=l&&l.getNamespaces(),n||!o?this.namespaces=a=new Pp(o):a=o),a},oi.prototype.logNamespace=function(n,o,a){var l=this.getNamespaces(a),d=n.uri,b=n.prefix;return l.byUri(d)&&!a||l.add(n,o),l.mapPrefix(b,d),n},oi.prototype.logNamespaceUsed=function(n,o){var a,l,d,b=this.element.$model,A=this.getNamespaces(o),E=n.prefix,$=n.uri;if(!E&&!$)return{localName:n.localName};if(d=kp[E]||b&&(b.getPackage(E)||{}).uri,!($=$||d||A.uriByPrefix(E)))throw new Error("no namespace uri given for prefix <"+E+">");if(!(n=A.byUri($))){for(a=E,l=1;A.uriByPrefix(a);)a=E+"_"+l++;n=this.logNamespace({prefix:a,uri:$},d===$)}return E&&A.mapPrefix(E,$),n},oi.prototype.parseAttributes=function(n){var o=this,a=this.element;p(n,function(l){var d=a.get(l.name);if(l.isReference)if(l.isMany){var b=[];p(d,function(A){b.push(A.id)}),d=b.join(" ")}else d=d.id;o.addAttribute(o.nsAttributeName(l),d)})},oi.prototype.addTagName=function(n){var o=this.logNamespaceUsed(n);return this.getNamespaces().logUsed(o),nc(n)},oi.prototype.addAttribute=function(n,o){var a=this.attrs;M(o)&&(o=Rp(o,oy,rd));var l=y(a,function(b){return b.name.localName===n.localName&&b.name.uri===n.uri&&b.name.prefix===n.prefix}),d={name:n,value:o};-1!==l?a.splice(l,1,d):a.push(d)},oi.prototype.serializeAttributes=function(n){var l,o=this.attrs,a=this.namespaces;a&&(o=(l=a,l.getUsed().filter(function(d){return"xml"!==d.prefix}).map(function(d){return{name:"xmlns"+(d.prefix?":"+d.prefix:""),value:d.uri}})).concat(o)),p(o,function(l){n.append(" ").append(nc(l.name)).append('="').append(l.value).append('"')})},oi.prototype.serializeTo=function(n){var o=this.body[0],a=o&&o.constructor!==ra;n.appendIndent().append("<"+this.tagName),this.serializeAttributes(n),n.append(o?">":" />"),o&&(a&&n.appendNewLine().indent(),p(this.body,function(l){l.serializeTo(n)}),a&&n.unindent().appendIndent(),n.append("</"+this.tagName+">")),n.appendNewLine()},sy(mu,oi),mu.prototype.parseNsAttributes=function(n){var o=oi.prototype.parseNsAttributes.call(this,n),a=n.$descriptor;if(a.name===this.propertyDescriptor.type)return o;var l=this.typeNs=this.nsTagName(a);this.getNamespaces().logUsed(this.typeNs);var d=n.$model.getPackage(l.uri),b=d.xml&&d.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(du),(l.prefix?l.prefix+":":"")+b+a.ns.localName),o},mu.prototype.isLocalNs=function(n){return n.uri===(this.typeNs||this.ns).uri},(_n.prototype=Object.create(mo.prototype)).fromXML=function(n,o,a){M(o)||(a=o,o="bpmn:Definitions");var l=new ia(N({model:this,lax:!0},a)),d=l.handler(o);return l.fromXML(n,d)},_n.prototype.toXML=function(n,o){var a=new kC(o);return new Promise(function(l,d){try{return l({xml:a.toXML(n)})}catch(b){return d(b)}})};var ts={bpmn:{name:"BPMN20",uri:"http://www.omg.org/spec/BPMN/20100524/MODEL",prefix:"bpmn",associations:[],types:[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isAttr:!0,isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],enumerations:[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],xml:{tagAlias:"lowerCase",typePrefix:"t"}},bpmndi:{name:"BPMNDI",uri:"http://www.omg.org/spec/BPMN/20100524/DI",prefix:"bpmndi",types:[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],enumerations:[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],associations:[]},dc:{name:"DC",uri:"http://www.omg.org/spec/DD/20100524/DC",prefix:"dc",types:[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],associations:[]},di:{name:"DI",uri:"http://www.omg.org/spec/DD/20100524/DI",prefix:"di",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],associations:[],xml:{tagAlias:"lowerCase"}},bioc:{name:"bpmn.io colors for BPMN",uri:"http://bpmn.io/schema/bpmn/biocolor/1.0",prefix:"bioc",types:[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]},color:{name:"BPMN in Color",uri:"http://www.omg.org/spec/BPMN/non-normative/color/1.0",prefix:"color",types:[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],enumerations:[],associations:[]}};function TC(n,o){return new _n(N({},ts,n),o)}function er(n){return n?"<"+n.$type+(n.id?' id="'+n.id:"")+'" />':"<null>"}function oa(n){return function(){if(!window.Promise)throw new Error("Promises is not supported in this environment. Please polyfill Promise.");var o=arguments.length;if(!(o>=1&&_(arguments[o-1])))return n.apply(this,arguments);var a=arguments[o-1];console.warn(new Error("Passing callbacks to "+n.name+" is deprecated and will be removed in a future major release. Please switch to promises: https://bpmn.io/l/moving-to-promises.html"));var l=Array.prototype.slice.call(arguments,0,-1);n.apply(this,l).then(function(d){var b=Object.keys(d)[0];return a(null,d[b])},function(d){return a(d,d.warnings)})}}function $p(n){R(n,"di")||Object.defineProperty(n,"di",{enumerable:!1,get:function(){throw new Error("Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472")}})}function _r(n,o){return n.$instanceOf(o)}function PC(n,o){var a={},l=[],d={};function b(dt,Ot){return function(un){dt(un,Ot)}}function A(dt){a[dt.id]=dt}function E(dt,Ot){try{var un=d[dt.id]&&function(Ve,Se){if(Ve.gfx)throw new Error(o("already rendered {element}",{element:er(Ve)}));return n.element(Ve,d[Ve.id],Se)}(dt,Ot);return A(dt),un}catch(Ve){$(Ve.message,{element:dt,error:Ve}),console.error(o("failed to import {element}",{element:er(dt)})),console.error(Ve)}}function $(dt,Ot){n.error(dt,Ot)}function W(dt){var Ot=dt.bpmnElement;Ot?d[Ot.id]?$(o("multiple DI elements defined for {element}",{element:er(Ot)}),{element:Ot}):(d[Ot.id]=dt,$p(Ot)):$(o("no bpmnElement referenced in {element}",{element:er(dt)}),{element:dt})}function te(dt){W(dt)}function le(){for(;l.length;)l.shift()()}function he(dt,Ot){qt(dt,Ot),Be(dt.ioSpecification,Ot),De(dt.artifacts,Ot),A(dt)}function me(dt,Ot){E(dt,Ot)}function Oe(dt,Ot){E(dt,Ot)}function Pe(dt,Ot){E(dt,Ot)}function we(dt,Ot){E(dt,Ot)}function Ee(dt,Ot){E(dt,Ot)}function De(dt,Ot){p(dt,function(un){_r(un,"bpmn:Association")?l.push(function(){Ee(un,Ot)}):Ee(un,Ot)})}function Be(dt,Ot){dt&&(p(dt.dataInputs,b(Pe,Ot)),p(dt.dataOutputs,b(we,Ot)))}function He(dt,Ot){qt(dt,Ot),De(dt.artifacts,Ot)}function rt(dt,Ot){var un=E(dt,Ot);_r(dt,"bpmn:SubProcess")&&He(dt,un||Ot),_r(dt,"bpmn:Activity")&&Be(dt.ioSpecification,Ot),l.push(function(){p(dt.dataInputAssociations,b(Oe,Ot)),p(dt.dataOutputAssociations,b(Oe,Ot))})}function nt(dt,Ot){l.push(function(){var Ve,un=E(dt,Ot);dt.childLaneSet&&gt(dt.childLaneSet,un||Ot),p((Ve=dt).flowNodeRef,function(Se){var et=Se.get("lanes");et&&et.push(Ve)})})}function gt(dt,Ot){p(dt.lanes,b(nt,Ot))}function qt(dt,Ot){var Ve;Ve=Ot,p(dt.flowElements,function(Se){_r(Se,"bpmn:SequenceFlow")?l.push(function(){E(Se,Ve)}):_r(Se,"bpmn:BoundaryEvent")?l.unshift(function(){rt(Se,Ve)}):_r(Se,"bpmn:FlowNode")?rt(Se,Ve):_r(Se,"bpmn:DataObject")||(_r(Se,"bpmn:DataStoreReference")||_r(Se,"bpmn:DataObjectReference")?function qe(dt,Ot){E(dt,Ot)}(Se,Ve):$(o("unrecognized flowElement {element} in context {context}",{element:er(Se),context:Ve?er(Ve.businessObject):"null"}),{element:Se,context:Ve}))}),dt.laneSets&&function(un,Ve){p(un,b(gt,Ve))}(dt.laneSets,Ot)}function Mt(dt,Ot){var un=E(dt,Ot),Ve=dt.processRef;Ve&&he(Ve,un||Ot)}return{handleDeferred:le,handleDefinitions:function(dt,Ot){var un=dt.diagrams;if(Ot&&-1===un.indexOf(Ot))throw new Error(o("diagram not part of bpmn:Definitions"));if(!Ot&&un&&un.length&&(Ot=un[0]),!Ot)throw new Error(o("no diagram to display"));d={},function z(dt){var Ot;W(Ot=dt.plane),p(Ot.planeElement,te)}(Ot);var Ve=Ot.plane;if(!Ve)throw new Error(o("no plane for {element}",{element:er(Ot)}));var Se=Ve.bpmnElement;if(!Se){if(!(Se=S(dt.rootElements,function(tn){return _r(tn,"bpmn:Process")||_r(tn,"bpmn:Collaboration")})))throw new Error(o("no process or collaboration to display"));$(o("correcting missing bpmnElement on {plane} to {rootElement}",{plane:er(Ve),rootElement:er(Se)})),Ve.bpmnElement=Se,W(Ve)}var et,bt,Xt,Pt=n.root(Xt=Se,d[Xt.id],Ve);if(_r(Se,"bpmn:Process")||_r(Se,"bpmn:SubProcess"))he(Se,Pt);else{if(!_r(Se,"bpmn:Collaboration"))throw new Error(o("unsupported bpmnElement for {plane}: {rootElement}",{plane:er(Ve),rootElement:er(Se)}));p((et=Se).participants,b(Mt,bt=Pt)),De(et.artifacts,bt),l.push(function(){!function(Xt,tn){p(Xt,b(me,tn))}(et.messageFlows,bt)}),function(Xt,tn){w(Xt,function(nn){return!a[nn.id]&&_r(nn,"bpmn:Process")&&nn.laneSets}).forEach(b(he,tn))}(dt.rootElements,Pt)}le()},handleSubProcess:He,registerDi:W}}function Le(n,o){var a=Dt(n);return a&&"function"==typeof a.$instanceOf&&a.$instanceOf(o)}function wn(n,o){return v(o,function(a){return Le(n,a)})}function Dt(n){return n&&n.businessObject||n}function Rn(n){return n&&n.di}function Mp(n,o,a){var l,d,b,A,E=[];function $(W,z){var te=new PC({root:function(me,Oe){return l.add(me,Oe)},element:function(me,Oe,Pe){return l.add(me,Oe,Pe)},error:function(me,Oe){E.push({message:me,context:Oe})}},b),le=function(me,Oe){if(Oe){var Pe,we=Oe.plane.bpmnElement,Ee=we;Le(we,"bpmn:Process")||Le(we,"bpmn:Collaboration")||(Ee=function(qe){for(var nt=qe;nt;){if(Le(nt,"bpmn:Process"))return nt;nt=nt.$parent}}(we)),Pe=Le(Ee,"bpmn:Collaboration")?Ee:S(me.rootElements,function(qe){if(Le(qe,"bpmn:Collaboration"))return S(qe.participants,function(nt){return nt.processRef===Ee})});var De=[Ee];Pe&&(De=O(Pe.participants,function(qe){return qe.processRef})).push(Pe);var Be=ly(De),He=[Oe],rt=[we];return p(me.diagrams,function(qe){var nt=qe.plane.bpmnElement;-1!==Be.indexOf(nt)&&-1===rt.indexOf(nt)&&(He.push(qe),rt.push(nt))}),He}}(W,z=z||W.diagrams&&W.diagrams[0]);if(!le)throw new Error(b("no diagram to display"));p(le,function(me){te.handleDefinitions(W,me)});var he=z.plane.bpmnElement.id;A.setRootElement(A.findRoot(he+"_plane")||A.findRoot(he))}return new Promise(function(W,z){try{return l=n.get("bpmnImporter"),d=n.get("eventBus"),b=n.get("translate"),A=n.get("canvas"),d.fire("import.render.start",{definitions:o}),$(o,a),d.fire("import.render.complete",{error:void 0,warnings:E}),W({warnings:E})}catch(te){return te.warnings=E,z(te)}})}function ly(n){var o=[];return p(n,function(a){a&&(o.push(a),o=o.concat(ly(a.flowElements)))}),o}var Os,Sr='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',Mo={verticalAlign:"middle"},sa={color:"#404040"},gu={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},Np={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},Lp={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"};function di(n){n=N({},cy,n),this._moddle=this._createModdle(n),this._container=this._createContainer(n),function(o){const a=vt('<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+Sr+"</a>");oe(wt("svg",a),Mo),oe(a,sa,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),o.appendChild(a),ct.bind(a,"click",function(l){(function Ci(){Os||(oe(Os=vt('<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg></a><span>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>'),gu),oe(wt("svg",Os),Mo),oe(wt(".backdrop",Os),Np),oe(wt(".notice",Os),Lp),oe(wt(".link",Os),sa,{margin:"15px 20px 15px 10px",alignSelf:"center"}),Et.bind(Os,".backdrop","click",function(n){document.body.removeChild(Os)})),document.body.appendChild(Os)})(),l.preventDefault()})}(this._container),this._init(this._container,this._moddle,n)}function No(n,o){return n.warnings=o,n}Ce(di,Kl),di.prototype.importXML=oa(function(){var n=ke(function*(o,a){const l=this;let d=[];try{let b;o=this._emit("import.parse.start",{xml:o})||o;try{b=yield this._moddle.fromXML(o,"bpmn:Definitions")}catch(te){throw this._emit("import.parse.complete",{error:te}),te}let A=b.rootElement;const E=b.references,W=b.elementsById;d=d.concat(b.warnings),A=this._emit("import.parse.complete",function(te){const le=l.get("eventBus").createEvent(te);return Object.defineProperty(le,"context",{enumerable:!0,get:function(){return console.warn(new Error("import.parse.complete <context> is deprecated and will be removed in future library versions")),{warnings:te.warnings,references:te.references,elementsById:te.elementsById}}}),le}({error:null,definitions:A,elementsById:W,references:E,warnings:d}))||A;const z=yield this.importDefinitions(A,a);return d=d.concat(z.warnings),this._emit("import.done",{error:null,warnings:d}),{warnings:d}}catch(b){let A=b;throw d=d.concat(A.warnings||[]),No(A,d),A=function(E){const $=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(E.message);return $&&(E.message="unparsable content <"+$[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+$[2]),E}(A),this._emit("import.done",{error:A,warnings:A.warnings}),A}});return function(o,a){return n.apply(this,arguments)}}()),di.prototype.importDefinitions=oa(function(){var n=ke(function*(o,a){return this._setDefinitions(o),{warnings:(yield this.open(a)).warnings}});return function(o,a){return n.apply(this,arguments)}}()),di.prototype.open=oa(function(){var n=ke(function*(o){const a=this._definitions;let l=o;if(!a){const b=new Error("no XML imported");throw No(b,[]),b}if("string"==typeof o&&(l=(A=o)&&S((b=a).diagrams,function(E){return E.id===A})||null,!l)){const b=new Error("BPMNDiagram <"+o+"> not found");throw No(b,[]),b}var b,A;try{this.clear()}catch(b){throw No(b,[]),b}const{warnings:d}=yield Mp(this,a,l);return{warnings:d}});return function(o){return n.apply(this,arguments)}}()),di.prototype.saveXML=oa(function(){var n=ke(function*(o){o=o||{};let a,l,d=this._definitions;try{if(!d)throw new Error("no definitions loaded");d=this._emit("saveXML.start",{definitions:d})||d,l=(yield this._moddle.toXML(d,o)).xml,l=this._emit("saveXML.serialized",{xml:l})||l}catch(A){a=A}const b=a?{error:a}:{xml:l};if(this._emit("saveXML.done",b),a)throw a;return b});return function(o){return n.apply(this,arguments)}}()),di.prototype.saveSVG=oa(ke(function*(n={}){let o,a;this._emit("saveSVG.start");try{const l=this.get("canvas"),d=l.getActiveLayer(),b=wt("defs",l._svg),A=ht(d),E=b?"<defs>"+ht(b)+"</defs>":"",$=d.getBBox();o='<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- created with bpmn-js / http://bpmn.io --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+$.width+'" height="'+$.height+'" viewBox="'+$.x+" "+$.y+" "+$.width+" "+$.height+'" version="1.1">'+E+A+"</svg>"}catch(l){a=l}if(this._emit("saveSVG.done",{error:a,svg:o}),a)throw a;return{svg:o}})),di.prototype._setDefinitions=function(n){this._definitions=n},di.prototype.getModules=function(n){return this._modules},di.prototype.clear=function(){this.getDefinitions()&&Kl.prototype.clear.call(this)},di.prototype.destroy=function(){Kl.prototype.destroy.call(this),Wt(this._container)},di.prototype.on=function(n,o,a,l){return this.get("eventBus").on(n,o,a,l)},di.prototype.off=function(n,o){this.get("eventBus").off(n,o)},di.prototype.attachTo=function(n){if(!n)throw new Error("parentNode required");this.detach(),n.get&&n.constructor.prototype.jquery&&(n=n.get(0)),"string"==typeof n&&(n=wt(n)),n.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()},di.prototype.getDefinitions=function(){return this._definitions},di.prototype.detach=function(){const n=this._container,o=n.parentNode;o&&(this._emit("detach",{}),o.removeChild(n))},di.prototype._init=function(n,o,a){const l=a.modules||this.getModules(a),b=[].concat([{bpmnjs:["value",this],moddle:["value",o]}],l,a.additionalModules||[]),A=N(ue(a,["additionalModules"]),{canvas:N({},a.canvas,{container:n}),modules:b});Kl.call(this,A),a&&a.container&&this.attachTo(a.container)},di.prototype._emit=function(n,o){return this.get("eventBus").fire(n,o)},di.prototype._createContainer=function(n){const o=vt('<div class="bjs-container"></div>');return oe(o,{width:Bp(n.width),height:Bp(n.height),position:n.position}),o},di.prototype._createModdle=function(n){return new TC(N({},this._moddleExtensions,n.moddleExtensions))},di.prototype._modules=[];const cy={width:"100%",height:"100%",position:"relative"};function Bp(n){return n+(k(n)?"px":"")}function Is(n){di.call(this,n),this.on("import.parse.complete",function(o){o.error||this._collectIds(o.definitions,o.elementsById)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}function kn(n,o){return!Le(n,"bpmn:CallActivity")&&(Le(n,"bpmn:SubProcess")?!(!(o=o||Rn(n))||!Le(o,"bpmndi:BPMNPlane"))||o&&!!o.isExpanded:!Le(n,"bpmn:Participant")||!!Dt(n).processRef)}function lr(n){return n&&!!Dt(n).triggeredByEvent}function vu(n,o){var a=Dt(n),l=!1;return a.eventDefinitions&&p(a.eventDefinitions,function(d){Le(d,o)&&(l=!0)}),l}function ad(n){return Le(n,"bpmn:FlowElement")||Le(n,"bpmn:Participant")||Le(n,"bpmn:Lane")||Le(n,"bpmn:SequenceFlow")||Le(n,"bpmn:MessageFlow")||Le(n,"bpmn:DataInput")||Le(n,"bpmn:DataOutput")?"name":Le(n,"bpmn:TextAnnotation")?"text":Le(n,"bpmn:Group")?"categoryValueRef":void 0}function Dr(n){var d,o=n.businessObject,a=ad(o);if(a)return"categoryValueRef"===a?(d=o.categoryValueRef)&&d.value||"":o[a]||""}Ce(Is,di),Is.prototype._createModdle=function(n){var o=di.prototype._createModdle.call(this,n);return o.ids=new ae([32,36,1]),o},Is.prototype._collectIds=function(n,o){var a,l=n.$model.ids;for(a in l.clear(),o)l.claim(a,o[a])};var aa="hsl(225, 10%, 15%)";function Lo(n,o,a){return v(n.eventDefinitions,function(l){return l.$type===o&&(d=n,h(a,function(A,E){return d[E]==A}));var d})}function Ni(n){return n.businessObject}function Sn(n,o){var a=Rn(n);return a.get("color:background-color")||a.get("bioc:fill")||o||"white"}function Ft(n,o){var a=Rn(n);return a.get("color:border-color")||a.get("bioc:stroke")||o||aa}function ic(n,o,a){var l=Rn(n).get("label");return l&&l.get("color:color")||o||Ft(n,a)}var ld=new ae,Bo=.95;function Ka(n,o,a,l,d,b,A){rr.call(this,o,A);var E=n&&n.defaultFillColor,$=n&&n.defaultStrokeColor,W=n&&n.defaultLabelColor,z=ld.next(),te={};function le(Ve){return a.computeStyle(Ve,{strokeLinecap:"round",strokeLinejoin:"round",stroke:aa,strokeWidth:2,fill:"white"})}function he(Ve){return a.computeStyle(Ve,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:aa,strokeWidth:2})}function me(Ve,Se){var{ref:et={x:0,y:0},scale:bt=1,element:Pt}=Se,Xt=jt("marker",{id:Ve,viewBox:"0 0 20 20",refX:et.x,refY:et.y,markerWidth:20*bt,markerHeight:20*bt,orient:"auto"});Ze(Xt,Pt);var tn=wt("defs",d._svg);tn||(tn=jt("defs"),Ze(d._svg,tn)),Ze(tn,Xt),te[Ve]=Xt}function Oe(Ve){return Ve.replace(/[^0-9a-zA-z]+/g,"_")}function Pe(Ve,Se,et){var Pt,Xt,tn,en,bt=Ve+"-"+Oe(Se)+"-"+Oe(et)+"-"+z;return te[bt]||(Pt=bt,tn=Se,en=et,"sequenceflow-end"===(Xt=Ve)&&me(Pt,{element:jt("path",{d:"M 1 5 L 11 10 L 1 15 Z",...le({fill:en,stroke:en,strokeWidth:1})}),ref:{x:11,y:10},scale:.5}),"messageflow-start"===Xt&&me(Pt,{element:jt("circle",{cx:6,cy:6,r:3.5,...le({fill:tn,stroke:en,strokeWidth:1,strokeDasharray:[1e4,1]})}),ref:{x:6,y:6}}),"messageflow-end"===Xt&&me(Pt,{element:jt("path",{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z",...le({fill:tn,stroke:en,strokeWidth:1,strokeDasharray:[1e4,1]})}),ref:{x:8.5,y:5}}),"association-start"===Xt&&me(Pt,{element:jt("path",{d:"M 11 5 L 1 10 L 11 15",...he({fill:"none",stroke:en,strokeWidth:1.5,strokeDasharray:[1e4,1]})}),ref:{x:1,y:10},scale:.5}),"association-end"===Xt&&me(Pt,{element:jt("path",{d:"M 1 5 L 11 10 L 1 15",...he({fill:"none",stroke:en,strokeWidth:1.5,strokeDasharray:[1e4,1]})}),ref:{x:11,y:10},scale:.5}),"conditional-flow-marker"===Xt&&me(Pt,{element:jt("path",{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z",...le({fill:tn,stroke:en})}),ref:{x:-1,y:10},scale:.5}),"conditional-default-flow-marker"===Xt&&me(Pt,{element:jt("path",{d:"M 6 4 L 10 16",...le({stroke:en})}),ref:{x:0,y:10},scale:.5})),"url(#"+bt+")"}function we(Ve,Se,et,bt,Pt){F(bt)&&(Pt=bt,bt=0),bt=bt||0,"none"===(Pt=le(Pt)).fill&&delete Pt.fillOpacity;var Xt=jt("circle",{cx:Se/2,cy:et/2,r:Math.round((Se+et)/4-bt),...Pt});return Ze(Ve,Xt),Xt}function Ee(Ve,Se,et,bt,Pt,Xt){F(Pt)&&(Xt=Pt,Pt=0),Pt=Pt||0,Xt=le(Xt);var tn=jt("rect",{x:Pt,y:Pt,width:Se-2*Pt,height:et-2*Pt,rx:bt,ry:bt,...Xt});return Ze(Ve,tn),tn}function De(Ve,Se,et,bt){var Pt=pr(Se,et=he(et),bt);return Ze(Ve,Pt),Pt}function Be(Ve,Se,et){return De(Ve,Se,et,5)}function He(Ve,Se,et){et=he(et);var bt=jt("path",{...et,d:Se});return Ze(Ve,bt),bt}function rt(Ve,Se,et,bt){return He(Se,et,N({"data-marker":Ve},bt))}function qe(Ve){return Ot[Ve]}function nt(Ve){return function(Se,et){return qe(Ve)(Se,et)}}function gt(Ve,Se){var Pt,et=Ni(Ve),bt="bpmn:IntermediateThrowEvent"===(Pt=et).$type||"bpmn:EndEvent"===Pt.$type;return et.eventDefinitions&&et.eventDefinitions.length>1?et.parallelMultiple?qe("bpmn:ParallelMultipleEventDefinition")(Se,Ve,bt):qe("bpmn:MultipleEventDefinition")(Se,Ve,bt):Lo(et,"bpmn:MessageEventDefinition")?qe("bpmn:MessageEventDefinition")(Se,Ve,bt):Lo(et,"bpmn:TimerEventDefinition")?qe("bpmn:TimerEventDefinition")(Se,Ve,bt):Lo(et,"bpmn:ConditionalEventDefinition")?qe("bpmn:ConditionalEventDefinition")(Se,Ve):Lo(et,"bpmn:SignalEventDefinition")?qe("bpmn:SignalEventDefinition")(Se,Ve,bt):Lo(et,"bpmn:EscalationEventDefinition")?qe("bpmn:EscalationEventDefinition")(Se,Ve,bt):Lo(et,"bpmn:LinkEventDefinition")?qe("bpmn:LinkEventDefinition")(Se,Ve,bt):Lo(et,"bpmn:ErrorEventDefinition")?qe("bpmn:ErrorEventDefinition")(Se,Ve,bt):Lo(et,"bpmn:CancelEventDefinition")?qe("bpmn:CancelEventDefinition")(Se,Ve,bt):Lo(et,"bpmn:CompensateEventDefinition")?qe("bpmn:CompensateEventDefinition")(Se,Ve,bt):Lo(et,"bpmn:TerminateEventDefinition")?qe("bpmn:TerminateEventDefinition")(Se,Ve,bt):null}function qt(Ve,Se,et){et=N({size:{width:100}},et);var bt=b.createText(Se||"",et);return Fe(bt).add("djs-label"),Ze(Ve,bt),bt}function Mt(Ve,Se,et){return qt(Ve,Ni(Se).name,{box:Se,align:et,padding:7,style:{fill:ic(Se,W,$)}})}function dt(Ve,Se,et){Op(qt(Ve,Se,{box:{height:30,width:et.height},align:"center-middle",style:{fill:ic(et,W,$)}}),0,1*et.height,270)}var Ot=this.handlers={"bpmn:Event":function(Ve,Se,et){return"fillOpacity"in et||(et.fillOpacity=Bo),we(Ve,Se.width,Se.height,et)},"bpmn:StartEvent":function(Ve,Se){var et={fill:Sn(Se,E),stroke:Ft(Se,$)};Ni(Se).isInterrupting||(et={strokeDasharray:"6",fill:Sn(Se,E),stroke:Ft(Se,$)});var bt=qe("bpmn:Event")(Ve,Se,et);return gt(Se,Ve),bt},"bpmn:MessageEventDefinition":function(Ve,Se,et){return He(Ve,l.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:Se.width,containerHeight:Se.height,position:{mx:.235,my:.315}}),{strokeWidth:1,fill:et?Ft(Se,$):Sn(Se,E),stroke:et?Sn(Se,E):Ft(Se,$)})},"bpmn:TimerEventDefinition":function(Ve,Se){var et=we(Ve,Se.width,Se.height,.2*Se.height,{strokeWidth:2,fill:Sn(Se,E),stroke:Ft(Se,$)});He(Ve,l.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:Se.width,containerHeight:Se.height,position:{mx:.5,my:.5}}),{strokeWidth:2,stroke:Ft(Se,$)});for(var bt=0;bt<12;bt++)He(Ve,l.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:Se.width,containerHeight:Se.height,position:{mx:.5,my:.5}}),{strokeWidth:1,transform:"rotate("+30*bt+","+Se.height/2+","+Se.width/2+")",stroke:Ft(Se,$)});return et},"bpmn:EscalationEventDefinition":function(Ve,Se,et){return He(Ve,l.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:Se.width,containerHeight:Se.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:et?Ft(Se,$):"none",stroke:Ft(Se,$)})},"bpmn:ConditionalEventDefinition":function(Ve,Se){return He(Ve,l.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:Se.width,containerHeight:Se.height,position:{mx:.5,my:.222}}),{strokeWidth:1,stroke:Ft(Se,$)})},"bpmn:LinkEventDefinition":function(Ve,Se,et){return He(Ve,l.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:Se.width,containerHeight:Se.height,position:{mx:.57,my:.263}}),{strokeWidth:1,fill:et?Ft(Se,$):"none",stroke:Ft(Se,$)})},"bpmn:ErrorEventDefinition":function(Ve,Se,et){return He(Ve,l.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:Se.width,containerHeight:Se.height,position:{mx:.2,my:.722}}),{strokeWidth:1,fill:et?Ft(Se,$):"none",stroke:Ft(Se,$)})},"bpmn:CancelEventDefinition":function(Ve,Se,et){var bt=He(Ve,l.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:Se.width,containerHeight:Se.height,position:{mx:.638,my:-.055}}),{strokeWidth:1,fill:et?Ft(Se,$):"none",stroke:Ft(Se,$)});return ey(bt,45),bt},"bpmn:CompensateEventDefinition":function(Ve,Se,et){return He(Ve,l.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:Se.width,containerHeight:Se.height,position:{mx:.22,my:.5}}),{strokeWidth:1,fill:et?Ft(Se,$):"none",stroke:Ft(Se,$)})},"bpmn:SignalEventDefinition":function(Ve,Se,et){return He(Ve,l.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:Se.width,containerHeight:Se.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:et?Ft(Se,$):"none",stroke:Ft(Se,$)})},"bpmn:MultipleEventDefinition":function(Ve,Se,et){return He(Ve,l.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:Se.width,containerHeight:Se.height,position:{mx:.222,my:.36}}),{strokeWidth:1,fill:et?Ft(Se,$):"none"})},"bpmn:ParallelMultipleEventDefinition":function(Ve,Se){return He(Ve,l.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:Se.width,containerHeight:Se.height,position:{mx:.458,my:.194}}),{strokeWidth:1,fill:Ft(Se,$),stroke:Ft(Se,$)})},"bpmn:EndEvent":function(Ve,Se){var et=qe("bpmn:Event")(Ve,Se,{strokeWidth:4,fill:Sn(Se,E),stroke:Ft(Se,$)});return gt(Se,Ve),et},"bpmn:TerminateEventDefinition":function(Ve,Se){return we(Ve,Se.width,Se.height,8,{strokeWidth:4,fill:Ft(Se,$),stroke:Ft(Se,$)})},"bpmn:IntermediateEvent":function(Ve,Se){var et=qe("bpmn:Event")(Ve,Se,{strokeWidth:1.5,fill:Sn(Se,E),stroke:Ft(Se,$)});return we(Ve,Se.width,Se.height,3,{strokeWidth:1.5,fill:Sn(Se,"none"),stroke:Ft(Se,$)}),gt(Se,Ve),et},"bpmn:IntermediateCatchEvent":nt("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":nt("bpmn:IntermediateEvent"),"bpmn:Activity":function(Ve,Se,et){return"fillOpacity"in(et=et||{})||(et.fillOpacity=Bo),Ee(Ve,Se.width,Se.height,10,et)},"bpmn:Task":function(Ve,Se){var et={fill:Sn(Se,E),stroke:Ft(Se,$)},bt=qe("bpmn:Activity")(Ve,Se,et);return Mt(Ve,Se,"center-middle"),un(Ve,Se),bt},"bpmn:ServiceTask":function(Ve,Se){var et=qe("bpmn:Task")(Ve,Se);return He(Ve,l.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}}),{strokeWidth:1,fill:Sn(Se,E),stroke:Ft(Se,$)}),He(Ve,l.getScaledPath("TASK_TYPE_SERVICE_FILL",{abspos:{x:17.2,y:18}}),{strokeWidth:0,fill:Sn(Se,E)}),He(Ve,l.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}}),{strokeWidth:1,fill:Sn(Se,E),stroke:Ft(Se,$)}),et},"bpmn:UserTask":function(Ve,Se){var et=qe("bpmn:Task")(Ve,Se);return He(Ve,l.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:Sn(Se,E),stroke:Ft(Se,$)}),He(Ve,l.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:Sn(Se,E),stroke:Ft(Se,$)}),He(Ve,l.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:Ft(Se,$),stroke:Ft(Se,$)}),et},"bpmn:ManualTask":function(Ve,Se){var et=qe("bpmn:Task")(Ve,Se);return He(Ve,l.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}}),{strokeWidth:.5,fill:Sn(Se,E),stroke:Ft(Se,$)}),et},"bpmn:SendTask":function(Ve,Se){var et=qe("bpmn:Task")(Ve,Se);return He(Ve,l.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}}),{strokeWidth:1,fill:Ft(Se,$),stroke:Sn(Se,E)}),et},"bpmn:ReceiveTask":function(Ve,Se){var et,bt=Ni(Se),Pt=qe("bpmn:Task")(Ve,Se);return bt.instantiate?(we(Ve,28,28,4.4,{strokeWidth:1}),et=l.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):et=l.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),He(Ve,et,{strokeWidth:1,fill:Sn(Se,E),stroke:Ft(Se,$)}),Pt},"bpmn:ScriptTask":function(Ve,Se){var et=qe("bpmn:Task")(Ve,Se);return He(Ve,l.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}}),{strokeWidth:1,stroke:Ft(Se,$)}),et},"bpmn:BusinessRuleTask":function(Ve,Se){var et=qe("bpmn:Task")(Ve,Se);return yt(He(Ve,l.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}})),{strokeWidth:1,fill:Sn(Se,"#aaaaaa"),stroke:Ft(Se,$)}),yt(He(Ve,l.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}})),{strokeWidth:1,stroke:Ft(Se,$)}),et},"bpmn:SubProcess":function(Ve,Se,et){et={fill:Sn(Se,E),stroke:Ft(Se,$),...et};var bt=qe("bpmn:Activity")(Ve,Se,et),Pt=kn(Se);return lr(Se)&&yt(bt,{strokeDasharray:"0, 5.5",strokeWidth:2.5}),Mt(Ve,Se,Pt?"center-top":"center-middle"),Pt?un(Ve,Se):un(Ve,Se,["SubProcessMarker"]),bt},"bpmn:AdHocSubProcess":function(Ve,Se){return qe("bpmn:SubProcess")(Ve,Se)},"bpmn:Transaction":function(Ve,Se){var et=qe("bpmn:SubProcess")(Ve,Se,{strokeWidth:1.5}),bt=a.style(["no-fill","no-events"],{stroke:Ft(Se,$),strokeWidth:1.5});return Ee(Ve,Se.width,Se.height,7,3,bt),et},"bpmn:CallActivity":function(Ve,Se){return qe("bpmn:SubProcess")(Ve,Se,{strokeWidth:5})},"bpmn:Participant":function(Ve,Se){var et={fillOpacity:Bo,fill:Sn(Se,E),stroke:Ft(Se,$),strokeWidth:1.5},bt=qe("bpmn:Lane")(Ve,Se,et);return kn(Se)?(De(Ve,[{x:30,y:0},{x:30,y:Se.height}],{stroke:Ft(Se,$),strokeWidth:1.5}),dt(Ve,Ni(Se).name,Se)):qt(Ve,Ni(Se).name,{box:Se,align:"center-middle",style:{fill:ic(Se,W,$)}}),Ni(Se).participantMultiplicity&&qe("ParticipantMultiplicityMarker")(Ve,Se),bt},"bpmn:Lane":function(Ve,Se,et){var bt=Ee(Ve,Se.width,Se.height,0,{fill:Sn(Se,E),fillOpacity:.35,stroke:Ft(Se,$),strokeWidth:1.5,...et}),Pt=Ni(Se);return"bpmn:Lane"===Pt.$type&&dt(Ve,Pt.name,Se),bt},"bpmn:InclusiveGateway":function(Ve,Se){var et=qe("bpmn:Gateway")(Ve,Se);return we(Ve,Se.width,Se.height,.24*Se.height,{strokeWidth:2.5,fill:Sn(Se,E),stroke:Ft(Se,$)}),et},"bpmn:ExclusiveGateway":function(Ve,Se){var et=qe("bpmn:Gateway")(Ve,Se),bt=l.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:Se.width,containerHeight:Se.height,position:{mx:.32,my:.3}});return Rn(Se).isMarkerVisible&&He(Ve,bt,{strokeWidth:1,fill:Ft(Se,$),stroke:Ft(Se,$)}),et},"bpmn:ComplexGateway":function(Ve,Se){var et=qe("bpmn:Gateway")(Ve,Se);return He(Ve,l.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:Se.width,containerHeight:Se.height,position:{mx:.46,my:.26}}),{strokeWidth:1,fill:Ft(Se,$),stroke:Ft(Se,$)}),et},"bpmn:ParallelGateway":function(Ve,Se){var et=qe("bpmn:Gateway")(Ve,Se);return He(Ve,l.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:Se.width,containerHeight:Se.height,position:{mx:.46,my:.2}}),{strokeWidth:1,fill:Ft(Se,$),stroke:Ft(Se,$)}),et},"bpmn:EventBasedGateway":function(Ve,Se){var et=Ni(Se),bt=qe("bpmn:Gateway")(Ve,Se);we(Ve,Se.width,Se.height,.2*Se.height,{strokeWidth:1,fill:"none",stroke:Ft(Se,$)});var Pt=et.eventGatewayType,Xt=!!et.instantiate;"Parallel"===Pt?He(Ve,l.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:Se.width,containerHeight:Se.height,position:{mx:.474,my:.296}}),{strokeWidth:1,fill:"none"}):"Exclusive"===Pt&&(Xt||we(Ve,Se.width,Se.height,.26*Se.height,{strokeWidth:1,fill:"none",stroke:Ft(Se,$)}),He(Ve,l.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:Se.width,containerHeight:Se.height,position:{mx:.36,my:.44}}),{strokeWidth:2,fill:Sn(Se,"none"),stroke:Ft(Se,$)}));return bt},"bpmn:Gateway":function(Ve,Se){return function(et,bt,Pt,Xt){var tn=bt/2,en=Pt/2,nn=[{x:tn,y:0},{x:bt,y:en},{x:tn,y:Pt},{x:0,y:en}].map(function(Xi){return Xi.x+","+Xi.y}).join(" ");Xt=le(Xt);var Hn=jt("polygon",{...Xt,points:nn});return Ze(et,Hn),Hn}(Ve,Se.width,Se.height,{fill:Sn(Se,E),fillOpacity:Bo,stroke:Ft(Se,$)})},"bpmn:SequenceFlow":function(Ve,Se){var et,bt=Sn(Se,E),Pt=Ft(Se,$),Xt=Be(Ve,Se.waypoints,{markerEnd:Pe("sequenceflow-end",bt,Pt),stroke:Ft(Se,$)}),tn=Ni(Se);return Se.source&&(et=Se.source.businessObject,tn.conditionExpression&&et.$instanceOf("bpmn:Activity")&&yt(Xt,{markerStart:Pe("conditional-flow-marker",bt,Pt)}),et.default&&(et.$instanceOf("bpmn:Gateway")||et.$instanceOf("bpmn:Activity"))&&et.default===tn&&yt(Xt,{markerStart:Pe("conditional-default-flow-marker",bt,Pt)})),Xt},"bpmn:Association":function(Ve,Se,et){var bt=Ni(Se),Pt=Sn(Se,E),Xt=Ft(Se,$);return et={strokeDasharray:"0, 5",stroke:Ft(Se,$),...et},"One"!==bt.associationDirection&&"Both"!==bt.associationDirection||(et.markerEnd=Pe("association-end",Pt,Xt)),"Both"===bt.associationDirection&&(et.markerStart=Pe("association-start",Pt,Xt)),Be(Ve,Se.waypoints,et)},"bpmn:DataInputAssociation":function(Ve,Se){var et=Sn(Se,E),bt=Ft(Se,$);return qe("bpmn:Association")(Ve,Se,{markerEnd:Pe("association-end",et,bt)})},"bpmn:DataOutputAssociation":function(Ve,Se){var et=Sn(Se,E),bt=Ft(Se,$);return qe("bpmn:Association")(Ve,Se,{markerEnd:Pe("association-end",et,bt)})},"bpmn:MessageFlow":function(Ve,Se){var et=Ni(Se),bt=Rn(Se),Pt=Sn(Se,E),Xt=Ft(Se,$),tn=Be(Ve,Se.waypoints,{markerEnd:Pe("messageflow-end",Pt,Xt),markerStart:Pe("messageflow-start",Pt,Xt),strokeDasharray:"10, 11",strokeWidth:1.5,stroke:Ft(Se,$)});if(et.messageRef){var en=tn.getPointAtLength(tn.getTotalLength()/2),nn=l.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:en.x,y:en.y}}),Hn={strokeWidth:1};"initiating"===bt.messageVisibleKind?(Hn.fill="white",Hn.stroke=aa):(Hn.fill="#888",Hn.stroke="white");var Xi=He(Ve,nn,Hn),Uo=qt(Ve,et.messageRef.name,{align:"center-top",fitBox:!0,style:{fill:Ft(Se,W)}}),Eo=Xi.getBBox(),li=Uo.getBBox();Op(Uo,en.x-li.width/2,en.y+Eo.height/2+10,0)}return tn},"bpmn:DataObject":function(Ve,Se){var bt,Pt,et=He(Ve,l.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:Se.width,containerHeight:Se.height,position:{mx:.474,my:.296}}),{fill:Sn(Se,E),fillOpacity:Bo,stroke:Ft(Se,$)});return Pt=(bt=Ni(Se)).dataObjectRef,(bt.isCollection||Pt&&Pt.isCollection)&&function(bt,Pt){He(bt,l.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:Pt.width,containerHeight:Pt.height,position:{mx:.33,my:(Pt.height-18)/Pt.height}}),{strokeWidth:2})}(Ve,Se),et},"bpmn:DataObjectReference":nt("bpmn:DataObject"),"bpmn:DataInput":function(Ve,Se){var et=l.getRawPath("DATA_ARROW"),bt=qe("bpmn:DataObject")(Ve,Se);return He(Ve,et,{strokeWidth:1}),bt},"bpmn:DataOutput":function(Ve,Se){var et=l.getRawPath("DATA_ARROW"),bt=qe("bpmn:DataObject")(Ve,Se);return He(Ve,et,{strokeWidth:1,fill:aa}),bt},"bpmn:DataStoreReference":function(Ve,Se){return He(Ve,l.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:Se.width,containerHeight:Se.height,position:{mx:0,my:.133}}),{strokeWidth:2,fill:Sn(Se,E),fillOpacity:Bo,stroke:Ft(Se,$)})},"bpmn:BoundaryEvent":function(Ve,Se){var et=Ni(Se).cancelActivity,bt={strokeWidth:1.5,fill:Sn(Se,E),stroke:Ft(Se,$)};et||(bt.strokeDasharray="6");var Pt={...bt,fillOpacity:1},Xt={...bt,fill:"none"},tn=qe("bpmn:Event")(Ve,Se,Pt);return we(Ve,Se.width,Se.height,3,Xt),gt(Se,Ve),tn},"bpmn:Group":function(Ve,Se){return Ee(Ve,Se.width,Se.height,10,{stroke:Ft(Se,$),strokeWidth:1.5,strokeDasharray:"10,6,0,6",fill:"none",pointerEvents:"none"})},label:function(Ve,Se){return Pt={width:90,height:30,x:(bt=Se).width/2+bt.x,y:bt.height/2+bt.y},qt(Ve,Dr(bt),{box:Pt,fitBox:!0,style:N({},b.getExternalStyle(),{fill:ic(bt,W,$)})});var bt,Pt},"bpmn:TextAnnotation":function(Ve,Se){var et=Ee(Ve,Se.width,Se.height,0,0,{fill:"none",stroke:"none"});return He(Ve,l.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:Se.width,containerHeight:Se.height,position:{mx:0,my:0}}),{stroke:Ft(Se,$)}),qt(Ve,Ni(Se).text||"",{box:Se,align:"left-top",padding:7,style:{fill:ic(Se,W,$)}}),et},ParticipantMultiplicityMarker:function(Ve,Se){rt("participant-multiplicity",Ve,l.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:Se.width,containerHeight:Se.height,position:{mx:Se.width/2/Se.width,my:(Se.height-15)/Se.height}}),{strokeWidth:2,fill:Sn(Se,E),stroke:Ft(Se,$)})},SubProcessMarker:function(Ve,Se){Br(Ee(Ve,14,14,0,{strokeWidth:1,fill:Sn(Se,E),stroke:Ft(Se,$)}),Se.width/2-7.5,Se.height-20),rt("sub-process",Ve,l.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:Se.width,containerHeight:Se.height,position:{mx:(Se.width/2-7.5)/Se.width,my:(Se.height-20)/Se.height}}),{fill:Sn(Se,E),stroke:Ft(Se,$)})},ParallelMarker:function(Ve,Se,et){rt("parallel",Ve,l.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:Se.width,containerHeight:Se.height,position:{mx:(Se.width/2+et.parallel)/Se.width,my:(Se.height-20)/Se.height}}),{fill:Sn(Se,E),stroke:Ft(Se,$)})},SequentialMarker:function(Ve,Se,et){rt("sequential",Ve,l.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:Se.width,containerHeight:Se.height,position:{mx:(Se.width/2+et.seq)/Se.width,my:(Se.height-19)/Se.height}}),{fill:Sn(Se,E),stroke:Ft(Se,$)})},CompensationMarker:function(Ve,Se,et){rt("compensation",Ve,l.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:Se.width,containerHeight:Se.height,position:{mx:(Se.width/2+et.compensation)/Se.width,my:(Se.height-13)/Se.height}}),{strokeWidth:1,fill:Sn(Se,E),stroke:Ft(Se,$)})},LoopMarker:function(Ve,Se,et){rt("loop",Ve,l.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:Se.width,containerHeight:Se.height,position:{mx:(Se.width/2+et.loop)/Se.width,my:(Se.height-7)/Se.height}}),{strokeWidth:1.5,fill:Sn(Se,E),stroke:Ft(Se,$),strokeMiterlimit:.5})},AdhocMarker:function(Ve,Se,et){rt("adhoc",Ve,l.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:Se.width,containerHeight:Se.height,position:{mx:(Se.width/2+et.adhoc)/Se.width,my:(Se.height-15)/Se.height}}),{strokeWidth:1,fill:Ft(Se,$),stroke:Ft(Se,$)})}};function un(Ve,Se,et){var bt,Pt=Ni(Se),Xt=et&&-1!==et.indexOf("SubProcessMarker");bt=Xt?{seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:{seq:-3,parallel:-6,compensation:-27,loop:0,adhoc:10},p(et,function(nn){qe(nn)(Ve,Se,bt)}),Pt.isForCompensation&&qe("CompensationMarker")(Ve,Se,bt),"bpmn:AdHocSubProcess"===Pt.$type&&qe("AdhocMarker")(Ve,Se,bt);var tn=Pt.loopCharacteristics,en=tn&&tn.isSequential;tn&&(void 0===en&&qe("LoopMarker")(Ve,Se,bt),!1===en&&qe("ParallelMarker")(Ve,Se,bt),!0===en&&qe("SequentialMarker")(Ve,Se,bt))}this._drawPath=He,this._renderer=qe}Ce(Ka,rr),Ka.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"],Ka.prototype.canRender=function(n){return Le(n,"bpmn:BaseElement")},Ka.prototype.drawShape=function(n,o){return this._renderer(o.type)(n,o)},Ka.prototype.drawConnection=function(n,o){return this._renderer(o.type)(n,o)},Ka.prototype.getShapePath=function(n){return Le(n,"bpmn:Event")?Ai([["M",(o=n).x+o.width/2,o.y+o.height/2],["m",0,-(d=o.width/2)],["a",d,d,0,1,1,0,2*d],["a",d,d,0,1,1,0,-2*d],["z"]]):Le(n,"bpmn:Activity")?Ai([["M",(b=n).x+(A=10),b.y],["l",(W=b.width)-20,0],["a",A,A,0,0,1,A,A],["l",0,(z=b.height)-20],["a",A,A,0,0,1,-A,A],["l",20-W,0],["a",A,A,0,0,1,-A,-A],["l",0,20-z],["a",A,A,0,0,1,A,-A],["z"]]):Le(n,"bpmn:Gateway")?function(b){var A=b.width/2,E=b.height/2;return Ai([["M",b.x+A,b.y],["l",A,E],["l",-A,E],["l",-A,-E],["z"]])}(n):function(b){var $=b.width;return Ai([["M",b.x,b.y],["l",$,0],["l",0,b.height],["l",-$,0],["z"]])}(n);var b,A,W,z,o,d};var Dp={width:150,height:50};function yu(n,o){var a;o.textContent=n;try{var l,d=""===n;return o.textContent=d?"dummy":n,l={width:(a=o.getBBox()).width+2*a.x,height:a.height},d&&(l.width=0),l}catch{return{width:0,height:0}}}function cd(n,o,a){for(var l,d=n.shift(),b=d;;){if((l=yu(b,a)).width=b?l.width:0," "===b||""===b||l.width<Math.round(o)||b.length<2)return Fp(n,b,d,l);b=uy(b,l.width,o)}}function Fp(n,o,a,l){if(o.length<a.length){var d=a.slice(o.length).trim();n.unshift(d)}return{width:l.width,height:l.height,text:o}}function uy(n,o,a){var l=Math.max(n.length*(a/o),1),d=function(b,A){var E,$=b.split(/(\s|-|\u00AD)/g),W=[],z=0;if($.length>1)for(;E=$.shift();){if(!(E.length+z<A)){"-"!==E&&"\xad"!==E||W.pop();break}W.push(E),z+=E.length}var te=W[W.length-1];return te&&"\xad"===te&&(W[W.length-1]="-"),W.join("")}(n,l);return d||(d=n.slice(0,Math.max(Math.round(l-1),1))),d}function Ya(n){this._config=N({},{size:Dp,padding:0,style:{},align:"center-top"},n||{})}function Wp(n){var o=N({fontFamily:"Arial, sans-serif",fontSize:12,fontWeight:"normal",lineHeight:1.2},n&&n.defaultStyle||{}),a=parseInt(o.fontSize,10)-1,l=N({},o,{fontSize:a},n&&n.externalStyle||{}),d=new Ya({style:o});this.getExternalLabelBounds=function(b,A){var E=d.getDimensions(A,{box:{width:90,height:30,x:b.width/2+b.x,y:b.height/2+b.y},style:l});return{x:Math.round(b.x+b.width/2-E.width/2),y:Math.round(b.y),width:Math.ceil(E.width),height:Math.ceil(E.height)}},this.getTextAnnotationBounds=function(b,A){var E=d.getDimensions(A,{box:b,style:o,align:"left-top",padding:5});return{x:b.x,y:b.y,width:b.width,height:Math.max(30,Math.round(E.height))}},this.createText=function(b,A){return d.createText(b,A||{})},this.getDefaultStyle=function(){return o},this.getExternalStyle=function(){return l}}Ya.prototype.createText=function(n,o){return this.layoutText(n,o).element},Ya.prototype.getDimensions=function(n,o){return this.layoutText(n,o).dimensions},Ya.prototype.layoutText=function(n,o){var we,Pe,a=N({},this._config.size,o.box),l=N({},this._config.style,o.style),d_horizontal=(we=(o.align||this._config.align).split("-"))[0]||"center",d_vertical=we[1]||"top",b=F(Pe=void 0!==o.padding?o.padding:this._config.padding)?N({top:0,left:0,right:0,bottom:0},Pe):{top:Pe,left:Pe,right:Pe,bottom:Pe},A=o.fitBox||!1,E=function(Pe){if("fontSize"in Pe&&"lineHeight"in Pe)return Pe.lineHeight*parseInt(Pe.fontSize,10)}(l),$=n.split(/\u00AD?\r?\n/),W=[],z=a.width-b.left-b.right,te=jt("text");for(yt(te,{x:0,y:0}),yt(te,l),Ze(function(){var Pe=document.getElementById("helper-svg");return Pe||(yt(Pe=jt("svg"),{id:"helper-svg"}),oe(Pe,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(Pe)),Pe}(),te);$.length;)W.push(cd($,z,te));"middle"===d_vertical&&(b.top=b.bottom=0);var le=m(W,function(Pe,we,Ee){return Pe+(E||we.height)},0)+b.top+b.bottom,he=m(W,function(Pe,we,Ee){return we.width>Pe?we.width:Pe},0),me=b.top;"middle"===d_vertical&&(me+=(a.height-le)/2),me-=(E||W[0].height)/4;var Oe=jt("text");return yt(Oe,l),p(W,function(Pe){var we;switch(me+=E||Pe.height,d_horizontal){case"left":we=b.left;break;case"right":we=(A?he:z)-b.right-Pe.width;break;default:we=Math.max(((A?he:z)-Pe.width)/2+b.left,0)}var Ee=jt("tspan");yt(Ee,{x:we,y:me}),Ee.textContent=Pe.text,Ze(Oe,Ee)}),ot(te),{dimensions:{width:he,height:le},element:Oe}},Wp.$inject=["config.textRenderer"];var ud=/\{([^{}]+)\}/g,RC=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,$C={__init__:["bpmnRenderer"],bpmnRenderer:["type",Ka],textRenderer:["type",Wp],pathMap:["type",function(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(n){return this.pathMap[n].d},this.getScaledPath=function(n,o){var a,l,d=this.pathMap[n];o.abspos?(a=o.abspos.x,l=o.abspos.y):(a=o.containerWidth*o.position.mx,l=o.containerHeight*o.position.my);var te,b={};if(o.position){for(var A=o.containerHeight/d.height*o.yScaleFactor,E=o.containerWidth/d.width*o.xScaleFactor,$=0;$<d.heightElements.length;$++)b["y"+$]=d.heightElements[$]*A;for(var W=0;W<d.widthElements.length;W++)b["x"+W]=d.widthElements[W]*E}return te={mx:a,my:l,e:b},String(d.d).replace(ud,function(he,me){return Oe=he,Ee=we=te,me.replace(RC,function(De,Be,He,rt,qe){Be=Be||rt,Ee&&(Be in Ee&&(Ee=Ee[Be]),"function"==typeof Ee&&qe&&(Ee=Ee()))}),Ee=(null==Ee||Ee==we?Oe:Ee)+"";var Oe,we,Ee})}}]},hd={translate:["value",function(n,o){return o=o||{},n.replace(/{([^}]+)}/g,function(a,l){return o[l]||"{"+l+"}"})}]},ns={width:90,height:20};function la(n){return Le(n,"bpmn:Event")||Le(n,"bpmn:Gateway")||Le(n,"bpmn:DataStoreReference")||Le(n,"bpmn:DataObjectReference")||Le(n,"bpmn:DataInput")||Le(n,"bpmn:DataOutput")||Le(n,"bpmn:SequenceFlow")||Le(n,"bpmn:MessageFlow")||Le(n,"bpmn:Group")}function bu(n){return Vi(n.label)}function ca(n){return n.waypoints?function Cu(n){var $,W,z,te,o=n.length/2-1,a=n[Math.floor(o)],l=n[Math.ceil(o+.01)],d=(W=($=n).length/2-1,z=$[Math.floor(W)],te=$[Math.ceil(W+.01)],{x:z.x+(te.x-z.x)/2,y:z.y+(te.y-z.y)/2}),b=Math.atan((l.y-a.y)/(l.x-a.x)),A=d.x,E=d.y;return Math.abs(b)<Math.PI/2?E-=15:A+=15,{x:A,y:E}}(n.waypoints):Le(n,"bpmn:Group")?{x:n.x+n.width/2,y:n.y+ns.height/2}:{x:n.x+n.width/2,y:n.y+n.height+ns.height/2}}function Vi(n){return n&&!!n.labelTarget}function wu(n,o,a){return N({id:n.id,type:n.$type,businessObject:n,di:o},a)}function cr(n,o,a){var l=n.waypoint;return!l||l.length<2?[on(o),on(a)]:l.map(function(d){return{x:d.x,y:d.y}})}function dd(n,o,a,l){return new Error(n("element {element} referenced by {referenced}#{property} not yet drawn",{element:er(a),referenced:er(o),property:l}))}function Xn(n,o,a,l,d,b){this._eventBus=n,this._canvas=o,this._elementFactory=a,this._elementRegistry=l,this._translate=d,this._textRenderer=b}Xn.$inject=["eventBus","canvas","elementFactory","elementRegistry","translate","textRenderer"],Xn.prototype.add=function(n,o,a){var l,b,he,me,Oe,Pe,A=this._translate;if(Le(o,"bpmndi:BPMNPlane")){var E=Le(n,"bpmn:SubProcess")?{id:n.id+"_plane"}:{};l=this._elementFactory.createRoot(wu(n,o,E)),this._canvas.addRootElement(l)}else if(Le(o,"bpmndi:BPMNShape")){var $=!kn(n,o),W=Le(n,"bpmn:Group"),z=o.bounds;l=this._elementFactory.createShape(wu(n,o,{collapsed:$,hidden:a&&(a.hidden||a.collapsed),x:Math.round(z.x),y:Math.round(z.y),width:Math.round(z.width),height:Math.round(z.height),isFrame:W})),Le(n,"bpmn:BoundaryEvent")&&this._attachBoundary(n,l),Le(n,"bpmn:Lane")&&(b=0),Le(n,"bpmn:DataStoreReference")&&(he=a,me=on(z),Pe=me.y,(Oe=me.x)>=he.x&&Oe<=he.x+he.width&&Pe>=he.y&&Pe<=he.y+he.height||(a=this._canvas.findRoot(a))),this._canvas.addShape(l,a,b)}else{if(!Le(o,"bpmndi:BPMNEdge"))throw new Error(A("unknown di {di} for element {semantic}",{di:er(o),semantic:er(n)}));var te=this._getSource(n),le=this._getTarget(n);l=this._elementFactory.createConnection(wu(n,o,{hidden:a&&(a.hidden||a.collapsed),source:te,target:le,waypoints:cr(o,te,le)})),Le(n,"bpmn:DataAssociation")&&(a=this._canvas.findRoot(a)),this._canvas.addConnection(l,a,b)}return la(n)&&Dr(l)&&this.addLabel(n,o,l),this._eventBus.fire("bpmnElement.added",{element:l}),l},Xn.prototype._attachBoundary=function(n,o){var a=this._translate,l=n.attachedToRef;if(!l)throw new Error(a("missing {semantic}#attachedToRef",{semantic:er(n)}));var d=this._elementRegistry.get(l.id),b=d&&d.attachers;if(!d)throw dd(a,n,l,"attachedToRef");o.host=d,b||(d.attachers=b=[]),-1===b.indexOf(o)&&b.push(o)},Xn.prototype.addLabel=function(n,o,a){var l,d,b,E,$,W,z,te;return E=a,(te=o.label)&&te.bounds?(z=te.bounds,W={width:Math.max(ns.width,z.width),height:z.height},$={x:z.x+z.width/2,y:z.y+z.height/2}):($=ca(E),W=ns),l=N({x:$.x-W.width/2,y:$.y-W.height/2},W),(d=Dr(a))&&(l=this._textRenderer.getExternalLabelBounds(l,d)),b=this._elementFactory.createLabel(wu(n,o,{id:n.id+"_label",labelTarget:a,type:"label",hidden:a.hidden||!Dr(a),x:Math.round(l.x),y:Math.round(l.y),width:Math.round(l.width),height:Math.round(l.height)})),this._canvas.addShape(b,a.parent)},Xn.prototype._getEnd=function(n,o){var a,l,d=n.$type,b=this._translate;if(l=n[o+"Ref"],"source"===o&&"bpmn:DataInputAssociation"===d&&(l=l&&l[0]),("source"===o&&"bpmn:DataOutputAssociation"===d||"target"===o&&"bpmn:DataInputAssociation"===d)&&(l=n.$parent),a=l&&this._getElement(l))return a;throw l?dd(b,n,l,o+"Ref"):new Error(b("{semantic}#{side} Ref not specified",{semantic:er(n),side:o}))},Xn.prototype._getSource=function(n){return this._getEnd(n,"source")},Xn.prototype._getTarget=function(n){return this._getEnd(n,"target")},Xn.prototype._getElement=function(n){return this._elementRegistry.get(n.id)};var hy={__depends__:[$C,{__depends__:[hd],bpmnImporter:["type",Xn]}]};function Gp(n){n&&"function"==typeof n.stopPropagation&&n.stopPropagation()}function qa(n){return n.originalEvent||n.srcEvent}function fd(n,o){Gp(n),Gp(qa(n))}function Li(n){return n.pointers&&n.pointers.length&&(n=n.pointers[0]),n.touches&&n.touches.length&&(n=n.touches[0]),n?{x:n.clientX,y:n.clientY}:null}function pd(n,o){return(qa(n)||n).button===o}function is(n){return pd(n,0)}function Ja(n){var o=qa(n)||n;return!!is(n)&&(/mac/i.test(navigator.platform)?o.metaKey:o.ctrlKey)}function md(n){var o=qa(n)||n;return is(n)&&o.shiftKey}function gd(n){return!0}function xu(n){return is(n)||function(o){return pd(o,1)}(n)}function vd(n,o,a){var l=this;function d(we,Ee,De){var Be,He;!($[we]||is)(Ee)||(De?He=o.getGraphics(De):(Be=Ee.delegateTarget||Ee.target)&&(De=o.get(He=Be)),He&&De&&!1===n.fire(we,{element:De,gfx:He,originalEvent:Ee})&&(Ee.stopPropagation(),Ee.preventDefault()))}var b={};function A(we){return b[we]}var E={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},$={"element.contextmenu":gd,"element.mousedown":xu,"element.mouseup":xu,"element.click":xu,"element.dblclick":xu};function W(we,Ee,De,Be){var He=b[De]=function(rt){d(De,rt)};Be&&($[De]=Be),He.$delegate=Et.bind(we,"svg, .djs-element",Ee,He)}function z(we,Ee,De){var Be=A(De);Be&&Et.unbind(we,Ee,Be.$delegate)}n.on("canvas.destroy",function(we){var Ee;Ee=we.svg,p(E,function(De,Be){z(Ee,Be,De)})}),n.on("canvas.init",function(we){var Ee;Ee=we.svg,p(E,function(De,Be){W(Ee,Be,De)})}),n.on(["shape.added","connection.added"],function(we){n.fire("interactionEvents.createHit",{element:we.element,gfx:we.gfx})}),n.on(["shape.changed","connection.changed"],500,function(we){n.fire("interactionEvents.updateHit",{element:we.element,gfx:we.gfx})}),n.on("interactionEvents.createHit",500,function(we){l.createDefaultHit(we.element,we.gfx)}),n.on("interactionEvents.updateHit",function(we){l.updateDefaultHit(we.element,we.gfx)});var te=me("djs-hit djs-hit-stroke"),le=me("djs-hit djs-hit-click-stroke"),he={all:me("djs-hit djs-hit-all"),"click-stroke":le,stroke:te,"no-move":me("djs-hit djs-hit-no-move")};function me(we,Ee){return Ee=N({stroke:"white",strokeWidth:15},Ee||{}),a.cls(we,["no-fill","no-border"],Ee)}function Oe(we,Ee){var De=he[Ee];if(!De)throw new Error("invalid hit type <"+Ee+">");return yt(we,De),we}function Pe(we,Ee){Ze(we,Ee)}this.removeHits=function(we){p(Gt(".djs-hit",we),ot)},this.createDefaultHit=function(we,Ee){var Be=we.waypoints,He=we.isFrame;return Be?this.createWaypointsHit(Ee,Be):this.createBoxHit(Ee,He?"stroke":"all",{width:we.width,height:we.height})},this.createWaypointsHit=function(we,Ee){var De=pr(Ee);return Oe(De,"stroke"),Pe(we,De),De},this.createBoxHit=function(we,Ee,De){De=N({x:0,y:0},De);var Be=jt("rect");return Oe(Be,Ee),yt(Be,De),Pe(we,Be),Be},this.updateDefaultHit=function(we,Ee){var De=wt(".djs-hit",Ee);if(De)return we.waypoints?Yo(De,we.waypoints):yt(De,{width:we.width,height:we.height}),De},this.fire=d,this.triggerMouseEvent=function(we,Ee,De){var Be=E[we];if(!Be)throw new Error("unmapped DOM event name <"+we+">");return d(Be,Ee,De)},this.mouseHandler=A,this.registerEvent=W,this.unregisterEvent=z}vd.$inject=["eventBus","elementRegistry","styles"];var rc={__init__:["interactionEvents"],interactionEvents:["type",vd]};function Au(n,o,a){this.offset=6;var l=o.cls("djs-outline",["no-fill"]),d=this;function b(A,E){var $=jt("rect");return yt($,N({x:10,y:10,rx:4,width:100,height:100},l)),Ze(A,$),$}n.on(["shape.added","shape.changed"],500,function(A){var E=A.element,$=A.gfx,W=wt(".djs-outline",$);W||(W=b($)),d.updateShapeOutline(W,E)}),n.on(["connection.added","connection.changed"],function(A){var E=A.element,$=A.gfx,W=wt(".djs-outline",$);W||(W=b($)),d.updateConnectionOutline(W,E)})}Au.prototype.updateShapeOutline=function(n,o){yt(n,{x:-this.offset,y:-this.offset,width:o.width+2*this.offset,height:o.height+2*this.offset})},Au.prototype.updateConnectionOutline=function(n,o){var a=qn(o);yt(n,{x:a.x-this.offset,y:a.y-this.offset,width:a.width+2*this.offset,height:a.height+2*this.offset})},Au.$inject=["eventBus","styles","elementRegistry"];var jp={__init__:["outline"],outline:["type",Au]};function rn(n,o){this._eventBus=n,this._canvas=o,this._selectedElements=[];var a=this;n.on(["shape.remove","connection.remove"],function(l){a.deselect(l.element)}),n.on(["diagram.clear","root.set"],function(l){a.select(null)})}rn.$inject=["eventBus","canvas"],rn.prototype.deselect=function(n){var o=this._selectedElements,a=o.indexOf(n);if(-1!==a){var l=o.slice();o.splice(a,1),this._eventBus.fire("selection.changed",{oldSelection:l,newSelection:o})}},rn.prototype.get=function(){return this._selectedElements},rn.prototype.isSelected=function(n){return-1!==this._selectedElements.indexOf(n)},rn.prototype.select=function(n,o){var a=this._selectedElements,l=a.slice();H(n)||(n=n?[n]:[]);var d=this._canvas,b=d.getRootElement();n=n.filter(function(A){var E=d.findRoot(A);return b===E}),o?p(n,function(A){-1===a.indexOf(A)&&a.push(A)}):this._selectedElements=a=n.slice(),this._eventBus.fire("selection.changed",{oldSelection:l,newSelection:a})};var _s="selected";function vo(n,o,a){this._canvas=n;var l=this;function d(A,E){n.addMarker(A,E)}function b(A,E){n.removeMarker(A,E)}this._multiSelectionBox=null,o.on("element.hover",function(A){d(A.element,"hover")}),o.on("element.out",function(A){b(A.element,"hover")}),o.on("selection.changed",function(A){var E=A.oldSelection,$=A.newSelection;p(E,function(W){-1===$.indexOf(W)&&b(W,_s)}),p($,function(W){-1===E.indexOf(W)&&d(W,_s)}),l._updateSelectionOutline($)}),o.on("element.changed",function(A){a.isSelected(A.element)&&l._updateSelectionOutline(a.get())})}function yd(n,o,a,l){n.on("create.end",500,function(d){var b=d.context,E=b.elements,$=(b.hints||{}).autoSelect;if(b.canExecute){if(!1===$)return;H($)?o.select($):o.select(E.filter(ua))}}),n.on("connect.end",500,function(d){var b=d.context.connection;b&&o.select(b)}),n.on("shape.move.end",500,function(d){var b=d.previousSelection||[],A=l.get(d.context.shape.id);S(b,function(E){return A.id===E.id})||o.select(A)}),n.on("element.click",function(d){if(is(d)){var b=d.element;b===a.getRootElement()&&(b=null);var A=o.isSelected(b),E=o.get().length>1,$=Ja(d)||md(d);if(A&&E)return $?o.deselect(b):o.select(b);A?o.deselect(b):o.select(b,$)}})}function ua(n){return!n.hidden}vo.$inject=["canvas","eventBus","selection"],vo.prototype._updateSelectionOutline=function(n){var o=this._canvas.getLayer("selectionOutline");It(o);var b,a=n.length>1;if(Fe(this._canvas.getContainer())[a?"add":"remove"]("djs-multi-select"),a){var l={x:(b=qn(n)).x-6,y:b.y-6,width:b.width+12,height:b.height+12},d=jt("rect");yt(d,N({rx:3},l)),Fe(d).add("djs-selection-outline"),Ze(o,d)}},yd.$inject=["eventBus","selection","canvas","elementRegistry"];var Do={__init__:["selectionVisuals","selectionBehavior"],__depends__:[rc,jp],selection:["type",rn],selectionVisuals:["type",vo],selectionBehavior:["type",yd]};function Ou(n){this._counter=0,this._prefix=(n?n+"-":"")+Math.floor(1e9*Math.random())+"-"}Ou.prototype.next=function(){return this._prefix+ ++this._counter};var fy=new Ou("ov");function vi(n,o,a,l){var d,b;this._eventBus=o,this._canvas=a,this._elementRegistry=l,this._ids=fy,this._overlayDefaults=N({show:null,scale:!0},n&&n.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=(d=a.getContainer(),oe(b=vt('<div class="djs-overlay-container" />'),{position:"absolute",width:0,height:0}),d.insertBefore(b,d.firstChild),b),this._init()}function py(n,o,a){oe(n,{left:o+"px",top:a+"px"})}function Iu(n,o){n.style.display=!1===o?"none":""}function Zp(n,o){n.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(a){n.style[a+"transform"]=o})}vi.$inject=["config.overlays","eventBus","canvas","elementRegistry"],vi.prototype.get=function(n){if(M(n)&&(n={id:n}),M(n.element)&&(n.element=this._elementRegistry.get(n.element)),n.element){var o=this._getOverlayContainer(n.element,!0);return o?n.type?w(o.overlays,V({type:n.type})):o.overlays.slice():[]}return n.type?w(this._overlays,V({type:n.type})):n.id?this._overlays[n.id]:null},vi.prototype.add=function(n,o,a){if(F(o)&&(a=o,o=null),n.id||(n=this._elementRegistry.get(n)),!a.position)throw new Error("must specifiy overlay position");if(!a.html)throw new Error("must specifiy overlay html");if(!n)throw new Error("invalid element specified");var l=this._ids.next();return a=N({},this._overlayDefaults,a,{id:l,type:o,element:n,html:a.html}),this._addOverlay(a),l},vi.prototype.remove=function(n){var o=this.get(n)||[];H(o)||(o=[o]);var a=this;p(o,function(l){var d=a._getOverlayContainer(l.element,!0);if(l&&(Wt(l.html),Wt(l.htmlContainer),delete l.htmlContainer,delete l.element,delete a._overlays[l.id]),d){var b=d.overlays.indexOf(l);-1!==b&&d.overlays.splice(b,1)}})},vi.prototype.isShown=function(){return"none"!==this._overlayRoot.style.display},vi.prototype.show=function(){Iu(this._overlayRoot)},vi.prototype.hide=function(){Iu(this._overlayRoot,!1)},vi.prototype.clear=function(){this._overlays={},this._overlayContainers=[],se(this._overlayRoot)},vi.prototype._updateOverlayContainer=function(n){var o=n.element,a=n.html,l=o.x,d=o.y;if(o.waypoints){var b=qn(o);l=b.x,d=b.y}py(a,l,d),pe(n.html,"data-container-id",o.id)},vi.prototype._updateOverlay=function(n){var o,a,l=n.position,d=n.htmlContainer,b=n.element,A=l.left,E=l.top;void 0!==l.right&&(o=b.waypoints?qn(b).width:b.width,A=-1*l.right+o),void 0!==l.bottom&&(a=b.waypoints?qn(b).height:b.height,E=-1*l.bottom+a),py(d,A||0,E||0),this._updateOverlayVisibilty(n,this._canvas.viewbox())},vi.prototype._createOverlayContainer=function(n){var o=vt('<div class="djs-overlays" />');oe(o,{position:"absolute"}),this._overlayRoot.appendChild(o);var a={html:o,element:n,overlays:[]};return this._updateOverlayContainer(a),this._overlayContainers.push(a),a},vi.prototype._updateRoot=function(n){var o=n.scale||1,a="matrix("+[o,0,0,o,-1*n.x*o,-1*n.y*o].join(",")+")";Zp(this._overlayRoot,a)},vi.prototype._getOverlayContainer=function(n,o){var a=S(this._overlayContainers,function(l){return l.element===n});return a||o?a:this._createOverlayContainer(n)},vi.prototype._addOverlay=function(n){var o,a,l=n.id,d=n.element,b=n.html;b.get&&b.constructor.prototype.jquery&&(b=b.get(0)),M(b)&&(b=vt(b)),a=this._getOverlayContainer(d),oe(o=vt('<div class="djs-overlay" data-overlay-id="'+l+'">'),{position:"absolute"}),o.appendChild(b),n.type&&be(o).add("djs-overlay-"+n.type),Iu(o,this._canvas.findRoot(d)===this._canvas.getRootElement()),n.htmlContainer=o,a.overlays.push(n),a.html.appendChild(o),this._overlays[l]=n,this._updateOverlay(n),this._updateOverlayVisibilty(n,this._canvas.viewbox())},vi.prototype._updateOverlayVisibilty=function(n,o){var a=n.show,l=this._canvas.findRoot(n.element),d=a&&a.minZoom,b=a&&a.maxZoom,A=n.htmlContainer,E=!0;(l!==this._canvas.getRootElement()||a&&(Z(d)&&d>o.scale||Z(b)&&b<o.scale))&&(E=!1),Iu(A,E),this._updateOverlayScale(n,o)},vi.prototype._updateOverlayScale=function(n,o){var a,l,d,b=n.scale,A=n.htmlContainer,E="";!0!==b&&(!1===b?(a=1,l=1):(a=b.min,l=b.max),Z(a)&&o.scale<a&&(d=(1/o.scale||1)*a),Z(l)&&o.scale>l&&(d=(1/o.scale||1)*l)),Z(d)&&(E="scale("+d+","+d+")"),Zp(A,E)},vi.prototype._updateOverlaysVisibilty=function(n){var o=this;p(this._overlays,function(a){o._updateOverlayVisibilty(a,n)})},vi.prototype._init=function(){var n=this._eventBus,o=this;n.on("canvas.viewbox.changing",function(a){o.hide()}),n.on("canvas.viewbox.changed",function(a){var l;o._updateRoot(l=a.viewbox),o._updateOverlaysVisibilty(l),o.show()}),n.on(["shape.remove","connection.remove"],function(a){var l=a.element;p(o.get({element:l}),function(A){o.remove(A.id)});var d=o._getOverlayContainer(l);if(d){Wt(d.html);var b=o._overlayContainers.indexOf(d);-1!==b&&o._overlayContainers.splice(b,1)}}),n.on("element.changed",500,function(a){var d=o._getOverlayContainer(a.element,!0);d&&(p(d.overlays,function(b){o._updateOverlay(b)}),o._updateOverlayContainer(d))}),n.on("element.marker.update",function(a){var l=o._getOverlayContainer(a.element,!0);l&&be(l.html)[a.add?"add":"remove"](a.marker)}),n.on("root.set",function(){o._updateOverlaysVisibilty(o._canvas.viewbox())}),n.on("diagram.clear",this.clear,this)};var _u={__init__:["overlays"],overlays:["type",vi]};function bd(n,o,a,l){n.on("element.changed",function(d){var b=d.element;(b.parent||b===o.getRootElement())&&(d.gfx=a.getGraphics(b)),d.gfx&&n.fire(Vr(b)+".changed",d)}),n.on("elements.changed",function(d){var b=d.elements;b.forEach(function(A){n.fire("element.changed",{element:A})}),l.updateContainments(b)}),n.on("shape.changed",function(d){l.update("shape",d.element,d.gfx)}),n.on("connection.changed",function(d){l.update("connection",d.element,d.gfx)})}bd.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];var Su={__init__:["changeSupport"],changeSupport:["type",bd]};function Lt(n){this._eventBus=n}function Fo(n,o){o.invoke(Lt,this),this.executed(function(a){var l=a.context;l.rootElement?n.setRootElement(l.rootElement):l.rootElement=n.getRootElement()}),this.revert(function(a){var l=a.context;l.rootElement&&n.setRootElement(l.rootElement)})}Lt.$inject=["eventBus"],Lt.prototype.on=function(n,o,a,l,d,b){if((_(o)||k(o))&&(b=d,d=l,l=a,a=o,o=null),_(a)&&(b=d,d=l,l=a,a=1e3),F(d)&&(b=d,d=!1),!_(l))throw new Error("handlerFn must be a function");H(n)||(n=[n]);var A=this._eventBus;p(n,function(E){var W,z,$=["commandStack",E,o].filter(function(W){return W}).join(".");A.on($,a,d?(W=l,z=b,function(te){return W.call(z||null,te.context,te.command,te)}):l,b)})},p(["canExecute","preExecute","preExecuted","execute","executed","postExecute","postExecuted","revert","reverted"],function(n){Lt.prototype[n]=function(o,a,l,d,b){(_(o)||k(o))&&(b=d,d=l,l=a,a=o,o=null),this.on(o,n,a,l,d,b)}}),Ce(Fo,Lt),Fo.$inject=["canvas","injector"];var si={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",Fo]},an={exports:{}};!function(n,o){n.exports=function(l){if(l.CSS&&l.CSS.escape)return l.CSS.escape;var d=function(b){if(0==arguments.length)throw new TypeError("`CSS.escape` requires an argument.");for(var A,E=String(b),$=E.length,W=-1,z="",te=E.charCodeAt(0);++W<$;)0!=(A=E.charCodeAt(W))?z+=A>=1&&A<=31||127==A||0==W&&A>=48&&A<=57||1==W&&A>=48&&A<=57&&45==te?"\\"+A.toString(16)+" ":0==W&&1==$&&45==A||!(A>=128||45==A||95==A||A>=48&&A<=57||A>=65&&A<=90||A>=97&&A<=122)?"\\"+E.charAt(W):E.charAt(W):z+="\ufffd";return z};return l.CSS||(l.CSS={}),l.CSS.escape=d,d}(To)}(an);var ha=an.exports,Eu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Ss(n){return(n=""+n)&&n.replace(/[&<>"']/g,function(o){return Eu[o]})}var my="_plane";function gy(n){return function(o){return o.replace(new RegExp("_plane$"),"")}(n.id)}function Wo(n){var o=n.id;return Le(n,"bpmn:SubProcess")?Cd(o):o}function ki(n){return Cd(n)}function Es(n){return Le(Rn(n),"bpmndi:BPMNPlane")}function Cd(n){return n+my}function ku(n,o,a,l){var d=vt('<ul class="bjs-breadcrumbs"></ul>'),b=l.getContainer(),A=be(b);b.appendChild(d);var E=[];function $(W){W&&(E=function(le){for(var me=[],Oe=Dt(le);Oe;Oe=Oe.$parent)(Le(Oe,"bpmn:SubProcess")||Le(Oe,"bpmn:Process"))&&me.push(Oe);return me.reverse()}(W));var z=E.map(function(le){var he=Ss(le.name||le.id),me=vt('<li><span class="bjs-crumb"><a title="'+he+'">'+he+"</a></span></li>"),Oe=l.findRoot(Wo(le))||l.findRoot(le.id);if(!Oe&&Le(le,"bpmn:Process")){var Pe=o.find(function(we){var Ee=Dt(we);return Ee&&Ee.processRef&&Ee.processRef===le});Oe=l.findRoot(Pe.id)}return me.addEventListener("click",function(){l.setRootElement(Oe)}),me});d.innerHTML="",A.toggle("bjs-breadcrumbs-shown",z.length>1),z.forEach(function(le){d.appendChild(le)})}n.on("element.changed",function(W){var z=Dt(W.element);S(E,function(te){return te===z})&&$()}),n.on("root.set",function(W){$(W.element)})}function Vp(n,o){var a=null,l=new vy;n.on("root.set",function(d){var b=d.element,A=o.viewbox(),E=l.get(b);if(l.set(a,{x:A.x,y:A.y,zoom:A.scale}),a=b,!Le(b,"bpmn:Collaboration")||E){var $=(A.x-(E=E||{x:0,y:0,zoom:1}).x)*A.scale,W=(A.y-E.y)*A.scale;0===$&&0===W||o.scroll({dx:$,dy:W}),E.zoom!==A.scale&&o.zoom(E.zoom,{x:0,y:0})}}),n.on("diagram.clear",function(){l.clear(),a=null})}function vy(){this._entries=[],this.set=function(n,o){var a=!1;for(var l in this._entries)if(this._entries[l][0]===n){this._entries[l][1]=o,a=!0;break}a||this._entries.push([n,o])},this.get=function(n){for(var o in this._entries)if(this._entries[o][0]===n)return this._entries[o][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(n){var o=-1;for(var a in this._entries)if(this._entries[a][0]===n){o=a;break}-1!==o&&this._entries.splice(o,1)}}ku.$inject=["eventBus","elementRegistry","overlays","canvas"],Vp.$inject=["eventBus","canvas"];function da(n,o){this._eventBus=n,this._moddle=o;var a=this;n.on("import.render.start",1500,function(l,d){a.handleImport(d.definitions)})}function wd(n){return Le(n,"bpmndi:BPMNDiagram")?n:wd(n.$parent)}da.prototype.handleImport=function(n){if(n.diagrams){var o=this;this._definitions=n,this._processToDiagramMap={},n.diagrams.forEach(function(l){l.plane&&l.plane.bpmnElement&&(o._processToDiagramMap[l.plane.bpmnElement.id]=l)});var a=[];n.diagrams.forEach(function(l){var d=o.createNewDiagrams(l.plane);Array.prototype.push.apply(a,d)}),a.forEach(function(l){o.movePlaneElementsToOrigin(l.plane)})}},da.prototype.createNewDiagrams=function(n){var o=this,a=[],l=[];n.get("planeElement").forEach(function(b){var $,W,z,A=b.bpmnElement;if(A){var E=A.$parent;Le(A,"bpmn:SubProcess")&&!b.isExpanded&&a.push(A),W=n,Le(z=($=A).$parent,"bpmn:SubProcess")&&z!==W.bpmnElement&&!wn($,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"])&&l.push({diElement:b,parent:E})}});var d=[];return a.forEach(function(b){if(!o._processToDiagramMap[b.id]){var A=o.createDiagram(b);o._processToDiagramMap[b.id]=A,d.push(A)}}),l.forEach(function(b){for(var A=b.diElement,E=b.parent;E&&-1===a.indexOf(E);)E=E.$parent;E&&o.moveToDiPlane(A,o._processToDiagramMap[E.id].plane)}),d},da.prototype.movePlaneElementsToOrigin=function(n){var A,o=n.get("planeElement"),a=(A={top:1/0,right:-1/0,bottom:-1/0,left:1/0},n.planeElement.forEach(function(E){if(E.bounds){var $=Yt(E.bounds);A.top=Math.min($.top,A.top),A.left=Math.min($.left,A.left)}}),ja(A)),l=a.x-180,d=a.y-160;o.forEach(function(b){b.waypoint?b.waypoint.forEach(function(A){A.x=A.x-l,A.y=A.y-d}):b.bounds&&(b.bounds.x=b.bounds.x-l,b.bounds.y=b.bounds.y-d)})},da.prototype.moveToDiPlane=function(n,o){var a=wd(n).plane.get("planeElement");a.splice(a.indexOf(n),1),o.get("planeElement").push(n)},da.prototype.createDiagram=function(n){var o=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:n}),a=this._moddle.create("bpmndi:BPMNDiagram",{plane:o});return o.$parent=a,o.bpmnElement=n,a.$parent=this._definitions,this._definitions.diagrams.push(a),a},da.$inject=["eventBus","moddle"];function ks(n,o,a,l){Lt.call(this,o),this._canvas=n,this._eventBus=o,this._elementRegistry=a,this._overlays=l;var d=this;this.executed("shape.toggleCollapse",250,function(b){var A=b.shape;d.canDrillDown(A)?d.addOverlay(A):d.removeOverlay(A)},!0),this.reverted("shape.toggleCollapse",250,function(b){var A=b.shape;d.canDrillDown(A)?d.addOverlay(A):d.removeOverlay(A)},!0),this.executed(["shape.create","shape.move","shape.delete"],250,function(b){var A=b.oldParent,E=b.newParent||b.parent,$=b.shape;d.canDrillDown($)&&d.addOverlay($),d.updateDrilldownOverlay(A),d.updateDrilldownOverlay(E),d.updateDrilldownOverlay($)},!0),this.reverted(["shape.create","shape.move","shape.delete"],250,function(b){var A=b.oldParent,E=b.newParent||b.parent,$=b.shape;d.canDrillDown($)&&d.addOverlay($),d.updateDrilldownOverlay(A),d.updateDrilldownOverlay(E),d.updateDrilldownOverlay($)},!0),o.on("import.render.complete",function(){a.filter(function(b){return d.canDrillDown(b)}).map(function(b){d.addOverlay(b)})})}Ce(ks,Lt),ks.prototype.updateDrilldownOverlay=function(n){if(n){var a=this._canvas.findRoot(n);a&&this.updateOverlayVisibility(a)}},ks.prototype.canDrillDown=function(n){var o=this._canvas;return Le(n,"bpmn:SubProcess")&&o.findRoot(Wo(n))},ks.prototype.updateOverlayVisibility=function(n){var a=n.businessObject,l=this._overlays.get({element:a.id,type:"drilldown"})[0];if(l){var d=a&&a.flowElements&&a.flowElements.length;be(l.html).toggle("bjs-drilldown-empty",!d)}},ks.prototype.addOverlay=function(n){var o=this._canvas,a=this._overlays;a.get({element:n,type:"drilldown"}).length&&this.removeOverlay(n);var l=vt('<button class="bjs-drilldown"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg></button>');l.addEventListener("click",function(){o.setRootElement(o.findRoot(Wo(n)))}),a.add(n,"drilldown",{position:{bottom:-7,right:-8},html:l}),this.updateOverlayVisibility(n)},ks.prototype.removeOverlay=function(n){this._overlays.remove({element:n,type:"drilldown"})},ks.$inject=["canvas","eventBus","elementRegistry","overlays"];var xd={__depends__:[_u,Su,si],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",ku],drilldownCentering:["type",Vp],drilldownOverlayBehavior:["type",ks],subprocessCompatibility:["type",da]};function Ts(n){di.call(this,n)}Ce(Ts,di),Ts.prototype._modules=[hy,hd,Do,_u,xd],Ts.prototype._moddleExtensions={};var Xr=["c","C"],Pu=["v","V"],MC=["y","Y"],oc=["z","Z"];function Gn(n){return!n.altKey&&(n.ctrlKey||n.metaKey)}function Ti(n,o){return-1!==(n=H(n)?n:[n]).indexOf(o.key)||-1!==n.indexOf(o.code)}function Ad(n){return n.shiftKey}var sc="keyboard.keydown";function Qi(n,o){var a=this;this._config=n||{},this._eventBus=o,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),o.on("diagram.destroy",function(){a._fire("destroy"),a.unbind()}),o.on("diagram.init",function(){a._fire("init")}),o.on("attach",function(){n&&n.bindTo&&a.bind(n.bindTo)}),o.on("detach",function(){a.unbind()})}function rs(n,o){var a=this;n.on("editorActions.init",500,function(l){a.registerBindings(o,l.editorActions)})}Qi.$inject=["config.keyboard","eventBus"],Qi.prototype._keydownHandler=function(n){this._keyHandler(n,sc)},Qi.prototype._keyupHandler=function(n){this._keyHandler(n,"keyboard.keyup")},Qi.prototype._keyHandler=function(n,o){this._isEventIgnored(n)||this._eventBus.fire(o||sc,{keyEvent:n})&&n.preventDefault()},Qi.prototype._isEventIgnored=function(n){return!!n.defaultPrevented||(o=n.target)&&(de(o,"input, textarea")||"true"===o.contentEditable)&&this._isModifiedKeyIgnored(n);var o},Qi.prototype._isModifiedKeyIgnored=function(n){return!Gn(n)||-1===this._getAllowedModifiers(n.target).indexOf(n.key)},Qi.prototype._getAllowedModifiers=function(n){var o=_e(n,"[input-handle-modified-keys]",!0);return!o||this._node&&!this._node.contains(o)?[]:o.getAttribute("input-handle-modified-keys").split(",")},Qi.prototype.bind=function(n){this.unbind(),this._node=n,ct.bind(n,"keydown",this._keydownHandler),ct.bind(n,"keyup",this._keyupHandler),this._fire("bind")},Qi.prototype.getBinding=function(){return this._node},Qi.prototype.unbind=function(){var n=this._node;n&&(this._fire("unbind"),ct.unbind(n,"keydown",this._keydownHandler),ct.unbind(n,"keyup",this._keyupHandler)),this._node=null},Qi.prototype._fire=function(n){this._eventBus.fire("keyboard."+n,{node:this._node})},Qi.prototype.addListener=function(n,o,a){_(n)&&(a=o,o=n,n=1e3),this._eventBus.on(a||sc,n,o)},Qi.prototype.removeListener=function(n,o){this._eventBus.off(o||sc,n)},Qi.prototype.hasModifier=function(n){return n.ctrlKey||n.metaKey||n.shiftKey||n.altKey},Qi.prototype.isCmd=Gn,Qi.prototype.isShift=Ad,Qi.prototype.isKey=Ti,rs.$inject=["eventBus","keyboard"],rs.prototype.registerBindings=function(n,o){function a(l,d){o.isRegistered(l)&&n.addListener(d)}a("undo",function(l){if(Gn(d=l.keyEvent)&&!Ad(d)&&Ti(oc,d))return o.trigger("undo"),!0;var d}),a("redo",function(l){if(Gn(d=l.keyEvent)&&(Ti(MC,d)||Ti(oc,d)&&Ad(d)))return o.trigger("redo"),!0;var d}),a("copy",function(l){if(Gn(d=l.keyEvent)&&Ti(Xr,d))return o.trigger("copy"),!0;var d}),a("paste",function(l){if(Gn(d=l.keyEvent)&&Ti(Pu,d))return o.trigger("paste"),!0;var d}),a("stepZoom",function(l){var d=l.keyEvent;if(Ti(["+","Add","="],d)&&Gn(d))return o.trigger("stepZoom",{value:1}),!0}),a("stepZoom",function(l){var d=l.keyEvent;if(Ti(["-","Subtract"],d)&&Gn(d))return o.trigger("stepZoom",{value:-1}),!0}),a("zoom",function(l){var d=l.keyEvent;if(Ti("0",d)&&Gn(d))return o.trigger("zoom",{value:1}),!0}),a("removeSelection",function(l){if(Ti(["Backspace","Delete","Del"],l.keyEvent))return o.trigger("removeSelection"),!0})};var el={__init__:["keyboard","keyboardBindings"],keyboard:["type",Qi],keyboardBindings:["type",rs]},os={moveSpeed:50,moveSpeedAccelerated:200};function $u(n,o,a){var l=this;this._config=N({},os,n||{}),o.addListener(function(d){var b=d.keyEvent,A=l._config;if(o.isCmd(b)&&o.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],b)){var E,$=o.isShift(b)?A.moveSpeedAccelerated:A.moveSpeed;switch(b.key){case"ArrowLeft":case"Left":E="left";break;case"ArrowUp":case"Up":E="up";break;case"ArrowRight":case"Right":E="right";break;case"ArrowDown":case"Down":E="down"}return l.moveCanvas({speed:$,direction:E}),!0}}),this.moveCanvas=function(d){var b=0,A=0,E=d.speed/Math.min(Math.sqrt(a.viewbox().scale),1);switch(d.direction){case"left":b=E;break;case"up":A=E;break;case"right":b=-E;break;case"down":A=-E}a.scroll({dx:b,dy:A})}}$u.$inject=["config.keyboardMove","keyboard","canvas"];var yi={__depends__:[el],__init__:["keyboardMove"],keyboardMove:["type",$u]},Qp=/^djs-cursor-.*$/;function Od(n){var o=be(document.body);o.removeMatching(Qp),n&&o.add("djs-cursor-"+n)}function Hp(){Od(null)}function Cy(n,o){function a(){return!1}return n.once(o=o||"element.click",5e3,a),function(){n.off(o,a)}}function Mu(n){return{x:n.x+n.width/2,y:n.y+n.height/2}}function Kr(n,o){return{x:n.x-o.x,y:n.y-o.y}}function Go(n,o){var a;function l(b){var A,E=a.start,$=a.button,W=Li(b),z=Kr(W,E);!a.dragging&&(A=z,Math.sqrt(Math.pow(A.x,2)+Math.pow(A.y,2))>15)&&(a.dragging=!0,0===$&&Cy(n),Od("grab")),a.dragging&&(z=Kr(W,a.last||a.start),o.scroll({dx:z.x,dy:z.y}),a.last=W),b.preventDefault()}function d(b){ct.unbind(document,"mousemove",l),ct.unbind(document,"mouseup",d),a=null,Hp()}n.on("element.mousedown",500,function(b){return function(A){if(!_e(A.target,".djs-draggable")){var E=A.button;if(!(E>=2||A.ctrlKey||A.shiftKey||A.altKey))return a={button:E,start:Li(A)},ct.bind(document,"mousemove",l),ct.bind(document,"mouseup",d),!0}}(b.originalEvent)}),this.isActive=function(){return!!a}}Go.$inject=["eventBus","canvas"];var wy={__init__:["moveCanvas"],moveCanvas:["type",Go]};function zp(n){return Math.log(n)/Math.log(10)}function tl(n,o){var a=zp(n.min),l=zp(n.max);return(Math.abs(a)+Math.abs(l))/o}var wi=Math.sign||function(n){return n>=0?1:-1},Id={min:.2,max:4};function jo(n,o,a){n=n||{},this._enabled=!1,this._canvas=a,this._container=a._container,this._handleWheel=D(this._handleWheel,this),this._totalDelta=0,this._scale=n.scale||.75;var l=this;o.on("canvas.init",function(d){l._init(!1!==n.enabled)})}jo.$inject=["config.zoomScroll","eventBus","canvas"],jo.prototype.scroll=function(n){this._canvas.scroll(n)},jo.prototype.reset=function(){this._canvas.zoom("fit-viewport")},jo.prototype.zoom=function(n,o){var a=tl(Id,20);this._totalDelta+=n,Math.abs(this._totalDelta)>.1&&(this._zoom(n,o,a),this._totalDelta=0)},jo.prototype._handleWheel=function(n){if(!_e(n.target,".djs-scrollable",!0)){var o=this._container;n.preventDefault();var a,l=n.ctrlKey,d=n.shiftKey,b=-1*this._scale;if(b*=l?0===n.deltaMode?.02:.32:0===n.deltaMode?1:16,l){var A=o.getBoundingClientRect(),E={x:n.clientX-A.left,y:n.clientY-A.top};a=Math.sqrt(Math.pow(n.deltaY,2)+Math.pow(n.deltaX,2))*wi(n.deltaY)*b,this.zoom(a,E)}else this.scroll(a=d?{dx:b*n.deltaY,dy:0}:{dx:b*n.deltaX,dy:b*n.deltaY})}},jo.prototype.stepZoom=function(n,o){var a=tl(Id,10);this._zoom(n,o,a)},jo.prototype._zoom=function(n,o,a){var E,l=this._canvas,d=n>0?1:-1,b=zp(l.zoom()),A=Math.round(b/a)*a,W=Math.pow(10,A+=a*d);l.zoom((E=Id,Math.max(E.min,Math.min(E.max,W))),o)},jo.prototype.toggle=function(n){var l=this._enabled;return void 0===n&&(n=!l),l!==n&&ct[n?"bind":"unbind"](this._container,"wheel",this._handleWheel,!1),this._enabled=n,n},jo.prototype._init=function(n){this.toggle(n)};var Up={__init__:["zoomScroll"],zoomScroll:["type",jo]};function ac(n){Ts.call(this,n)}Ce(ac,Ts),ac.prototype._modules=[].concat(Ts.prototype._modules,ac.prototype._navigationModules=[yi,wy,Up]);var Ps={exports:{}};!function(n){!function(o,a,l,d){var b,A=["","webkit","Moz","MS","ms","o"],E=a.createElement("div"),$=Math.round,W=Math.abs,z=Date.now;function te(We,Ue,at){return setTimeout(Ee(We,at),Ue)}function le(We,Ue,at){return!!Array.isArray(We)&&(he(We,at[Ue],at),!0)}function he(We,Ue,at){var xt;if(We)if(We.forEach)We.forEach(Ue,at);else if(We.length!==d)for(xt=0;xt<We.length;)Ue.call(at,We[xt],xt,We),xt++;else for(xt in We)We.hasOwnProperty(xt)&&Ue.call(at,We[xt],xt,We)}function me(We,Ue,at){var xt="DEPRECATED METHOD: "+Ue+"\n"+at+" AT \n";return function(){var $t=new Error("get-stack-trace"),On=$t&&$t.stack?$t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Jn=o.console&&(o.console.warn||o.console.log);return Jn&&Jn.call(o.console,xt,On),We.apply(this,arguments)}}b="function"!=typeof Object.assign?function(We){if(We===d||null===We)throw new TypeError("Cannot convert undefined or null to object");for(var Ue=Object(We),at=1;at<arguments.length;at++){var xt=arguments[at];if(xt!==d&&null!==xt)for(var $t in xt)xt.hasOwnProperty($t)&&(Ue[$t]=xt[$t])}return Ue}:Object.assign;var Oe=me(function(We,Ue,at){for(var xt=Object.keys(Ue),$t=0;$t<xt.length;)(!at||at&&We[xt[$t]]===d)&&(We[xt[$t]]=Ue[xt[$t]]),$t++;return We},"extend","Use `assign`."),Pe=me(function(We,Ue){return Oe(We,Ue,!0)},"merge","Use `assign`.");function we(We,Ue,at){var xt,$t=Ue.prototype;(xt=We.prototype=Object.create($t)).constructor=We,xt._super=$t,at&&b(xt,at)}function Ee(We,Ue){return function(){return We.apply(Ue,arguments)}}function De(We,Ue){return"function"==typeof We?We.apply(Ue&&Ue[0]||d,Ue):We}function Be(We,Ue){return We===d?Ue:We}function He(We,Ue,at){he(gt(Ue),function(xt){We.addEventListener(xt,at,!1)})}function rt(We,Ue,at){he(gt(Ue),function(xt){We.removeEventListener(xt,at,!1)})}function qe(We,Ue){for(;We;){if(We==Ue)return!0;We=We.parentNode}return!1}function nt(We,Ue){return We.indexOf(Ue)>-1}function gt(We){return We.trim().split(/\s+/g)}function qt(We,Ue,at){if(We.indexOf&&!at)return We.indexOf(Ue);for(var xt=0;xt<We.length;){if(at&&We[xt][at]==Ue||!at&&We[xt]===Ue)return xt;xt++}return-1}function Mt(We){return Array.prototype.slice.call(We,0)}function dt(We,Ue,at){for(var xt=[],$t=[],On=0;On<We.length;){var Jn=Ue?We[On][Ue]:We[On];qt($t,Jn)<0&&xt.push(We[On]),$t[On]=Jn,On++}return at&&(xt=Ue?xt.sort(function(fr,Wn){return fr[Ue]>Wn[Ue]}):xt.sort()),xt}function Ot(We,Ue){for(var at,xt,$t=Ue[0].toUpperCase()+Ue.slice(1),On=0;On<A.length;){if((xt=(at=A[On])?at+$t:Ue)in We)return xt;On++}return d}var un=1;function Ve(We){var Ue=We.ownerDocument||We;return Ue.defaultView||Ue.parentWindow||o}var Se="ontouchstart"in o,et=Ot(o,"PointerEvent")!==d,bt=Se&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Pt="touch",Xt="mouse",en=["x","y"],nn=["clientX","clientY"];function Hn(We,Ue){var at=this;this.manager=We,this.callback=Ue,this.element=We.element,this.target=We.options.inputTarget,this.domHandler=function(xt){De(We.options.enable,[We])&&at.handler(xt)},this.init()}function Xi(We,Ue,at){var xt=at.pointers.length,$t=at.changedPointers.length,On=1&Ue&&xt-$t==0,Jn=12&Ue&&xt-$t==0;at.isFirst=!!On,at.isFinal=!!Jn,On&&(We.session={}),at.eventType=Ue,function(fr,Wn){var xr=fr.session,gp=Wn.pointers,Sv=gp.length;xr.firstInput||(xr.firstInput=Uo(Wn)),Sv>1&&!xr.firstMultiple?xr.firstMultiple=Uo(Wn):1===Sv&&(xr.firstMultiple=!1);var Xo,Yi,Ma,Fl,Wl,Na,oC=xr.firstInput,Kc=xr.firstMultiple,sC=Kc?Kc.center:oC.center,aC=Wn.center=Eo(gp);Wn.timeStamp=z(),Wn.deltaTime=Wn.timeStamp-oC.timeStamp,Wn.angle=Di(sC,aC),Wn.distance=Fn(sC,aC),Ma=(Yi=Wn).center,Fl=(Xo=xr).offsetDelta||{},Wl=Xo.prevDelta||{},Na=Xo.prevInput||{},1!==Yi.eventType&&4!==Na.eventType||(Wl=Xo.prevDelta={x:Na.deltaX||0,y:Na.deltaY||0},Fl=Xo.offsetDelta={x:Ma.x,y:Ma.y}),Yi.deltaX=Wl.x+(Ma.x-Fl.x),Yi.deltaY=Wl.y+(Ma.y-Fl.y),Wn.offsetDirection=ci(Wn.deltaX,Wn.deltaY);var Yc=li(Wn.deltaTime,Wn.deltaX,Wn.deltaY);Wn.overallVelocityX=Yc.x,Wn.overallVelocityY=Yc.y,Wn.overallVelocity=W(Yc.x)>W(Yc.y)?Yc.x:Yc.y,Wn.scale=Kc?(Ev=Kc.pointers,Fn((kv=gp)[0],kv[1],nn)/Fn(Ev[0],Ev[1],nn)):1,Wn.rotation=Kc?function(Xo,Yi){return Di(Yi[1],Yi[0],nn)+Di(Xo[1],Xo[0],nn)}(Kc.pointers,gp):0,Wn.maxPointers=xr.prevInput?Wn.pointers.length>xr.prevInput.maxPointers?Wn.pointers.length:xr.prevInput.maxPointers:Wn.pointers.length,function(Xo,Yi){var Ma,Fl,Wl,Na,La=Xo.lastInterval||Yi,lC=Yi.timeStamp-La.timeStamp;if(8!=Yi.eventType&&(lC>25||La.velocity===d)){var cC=Yi.deltaX-La.deltaX,uC=Yi.deltaY-La.deltaY,qc=li(lC,cC,uC);Fl=qc.x,Wl=qc.y,Ma=W(qc.x)>W(qc.y)?qc.x:qc.y,Na=ci(cC,uC),Xo.lastInterval=Yi}else Ma=La.velocity,Fl=La.velocityX,Wl=La.velocityY,Na=La.direction;Yi.velocity=Ma,Yi.velocityX=Fl,Yi.velocityY=Wl,Yi.direction=Na}(xr,Wn);var Ev,kv,Tv=fr.element;qe(Wn.srcEvent.target,Tv)&&(Tv=Wn.srcEvent.target),Wn.target=Tv}(We,at),We.emit("hammer.input",at),We.recognize(at),We.session.prevInput=at}function Uo(We){for(var Ue=[],at=0;at<We.pointers.length;)Ue[at]={clientX:$(We.pointers[at].clientX),clientY:$(We.pointers[at].clientY)},at++;return{timeStamp:z(),pointers:Ue,center:Eo(Ue),deltaX:We.deltaX,deltaY:We.deltaY}}function Eo(We){var Ue=We.length;if(1===Ue)return{x:$(We[0].clientX),y:$(We[0].clientY)};for(var at=0,xt=0,$t=0;$t<Ue;)at+=We[$t].clientX,xt+=We[$t].clientY,$t++;return{x:$(at/Ue),y:$(xt/Ue)}}function li(We,Ue,at){return{x:Ue/We||0,y:at/We||0}}function ci(We,Ue){return We===Ue?1:W(We)>=W(Ue)?We<0?2:4:Ue<0?8:16}function Fn(We,Ue,at){at||(at=en);var xt=Ue[at[0]]-We[at[0]],$t=Ue[at[1]]-We[at[1]];return Math.sqrt(xt*xt+$t*$t)}function Di(We,Ue,at){return at||(at=en),180*Math.atan2(Ue[at[1]]-We[at[1]],Ue[at[0]]-We[at[0]])/Math.PI}Hn.prototype={handler:function(){},init:function(){this.evEl&&He(this.element,this.evEl,this.domHandler),this.evTarget&&He(this.target,this.evTarget,this.domHandler),this.evWin&&He(Ve(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&rt(this.element,this.evEl,this.domHandler),this.evTarget&&rt(this.target,this.evTarget,this.domHandler),this.evWin&&rt(Ve(this.element),this.evWin,this.domHandler)}};var Ki={mousedown:1,mousemove:2,mouseup:4},ii="mousedown",Rr="mousemove mouseup";function An(){this.evEl=ii,this.evWin=Rr,this.pressed=!1,Hn.apply(this,arguments)}we(An,Hn,{handler:function(We){var Ue=Ki[We.type];1&Ue&&0===We.button&&(this.pressed=!0),2&Ue&&1!==We.which&&(Ue=4),this.pressed&&(4&Ue&&(this.pressed=!1),this.callback(this.manager,Ue,{pointers:[We],changedPointers:[We],pointerType:Xt,srcEvent:We}))}});var Cr={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},gn={2:Pt,3:"pen",4:Xt,5:"kinect"},zn="pointerdown",$a="pointermove pointerup pointercancel";function ds(){this.evEl=zn,this.evWin=$a,Hn.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}o.MSPointerEvent&&!o.PointerEvent&&(zn="MSPointerDown",$a="MSPointerMove MSPointerUp MSPointerCancel"),we(ds,Hn,{handler:function(We){var Ue=this.store,at=!1,xt=We.type.toLowerCase().replace("ms",""),$t=Cr[xt],On=gn[We.pointerType]||We.pointerType,Jn=On==Pt,fr=qt(Ue,We.pointerId,"pointerId");1&$t&&(0===We.button||Jn)?fr<0&&(Ue.push(We),fr=Ue.length-1):12&$t&&(at=!0),fr<0||(Ue[fr]=We,this.callback(this.manager,$t,{pointers:Ue,changedPointers:[We],pointerType:On,srcEvent:We}),at&&Ue.splice(fr,1))}});var Ri={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function fs(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,Hn.apply(this,arguments)}function Zh(We,Ue){var at=Mt(We.touches),xt=Mt(We.changedTouches);return 12&Ue&&(at=dt(at.concat(xt),"identifier",!0)),[at,xt]}we(fs,Hn,{handler:function(We){var Ue=Ri[We.type];if(1===Ue&&(this.started=!0),this.started){var at=Zh.call(this,We,Ue);12&Ue&&at[0].length-at[1].length==0&&(this.started=!1),this.callback(this.manager,Ue,{pointers:at[0],changedPointers:at[1],pointerType:Pt,srcEvent:We})}}});var iw={touchstart:1,touchmove:2,touchend:4,touchcancel:8},dp="touchstart touchmove touchend touchcancel";function Xc(){this.evTarget=dp,this.targetIds={},Hn.apply(this,arguments)}function nC(We,Ue){var at=Mt(We.touches),xt=this.targetIds;if(3&Ue&&1===at.length)return xt[at[0].identifier]=!0,[at,at];var $t,On,Jn=Mt(We.changedTouches),fr=[],Wn=this.target;if(On=at.filter(function(xr){return qe(xr.target,Wn)}),1===Ue)for($t=0;$t<On.length;)xt[On[$t].identifier]=!0,$t++;for($t=0;$t<Jn.length;)xt[Jn[$t].identifier]&&fr.push(Jn[$t]),12&Ue&&delete xt[Jn[$t].identifier],$t++;return fr.length?[dt(On.concat(fr),"identifier",!0),fr]:void 0}function wr(){Hn.apply(this,arguments);var We=Ee(this.handler,this);this.touch=new Xc(this.manager,We),this.mouse=new An(this.manager,We),this.primaryTouch=null,this.lastTouches=[]}function jw(We,Ue){1&We?(this.primaryTouch=Ue.changedPointers[0].identifier,iC.call(this,Ue)):12&We&&iC.call(this,Ue)}function iC(We){var Ue=We.changedPointers[0];if(Ue.identifier===this.primaryTouch){var at={x:Ue.clientX,y:Ue.clientY};this.lastTouches.push(at);var xt=this.lastTouches;setTimeout(function(){var $t=xt.indexOf(at);$t>-1&&xt.splice($t,1)},2500)}}function rw(We){for(var Ue=We.srcEvent.clientX,at=We.srcEvent.clientY,xt=0;xt<this.lastTouches.length;xt++){var $t=this.lastTouches[xt],On=Math.abs(Ue-$t.x),Jn=Math.abs(at-$t.y);if(On<=25&&Jn<=25)return!0}return!1}we(Xc,Hn,{handler:function(We){var Ue=iw[We.type],at=nC.call(this,We,Ue);at&&this.callback(this.manager,Ue,{pointers:at[0],changedPointers:at[1],pointerType:Pt,srcEvent:We})}}),we(wr,Hn,{handler:function(We,Ue,at){var $t=at.pointerType==Xt;if(!($t&&at.sourceCapabilities&&at.sourceCapabilities.firesTouchEvents)){if(at.pointerType==Pt)jw.call(this,Ue,at);else if($t&&rw.call(this,at))return;this.callback(We,Ue,at)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var gv=Ot(E.style,"touchAction"),rC=gv!==d,vv="compute",yv="manipulation",Bl="none",ps="pan-x",bv="pan-y",Cv=function(){if(!rC)return!1;var We={},Ue=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(at){We[at]=!Ue||o.CSS.supports("touch-action",at)}),We}();function fp(We,Ue){this.manager=We,this.set(Ue)}fp.prototype={set:function(We){We==vv&&(We=this.compute()),rC&&this.manager.element.style&&Cv[We]&&(this.manager.element.style[gv]=We),this.actions=We.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var We=[];return he(this.manager.recognizers,function(Ue){De(Ue.options.enable,[Ue])&&(We=We.concat(Ue.getTouchAction()))}),function(Ue){if(nt(Ue,Bl))return Bl;var at=nt(Ue,ps),xt=nt(Ue,bv);return at&&xt?Bl:at||xt?at?ps:bv:nt(Ue,yv)?yv:"auto"}(We.join(" "))},preventDefaults:function(We){var Ue=We.srcEvent,at=We.offsetDirection;if(this.manager.session.prevented)Ue.preventDefault();else{var xt=this.actions,$t=nt(xt,Bl)&&!Cv.none,On=nt(xt,bv)&&!Cv["pan-y"],Jn=nt(xt,ps)&&!Cv["pan-x"];if($t&&1===We.pointers.length&&We.distance<2&&We.deltaTime<250)return;if(!Jn||!On)return $t||On&&6&at||Jn&&24&at?this.preventSrc(Ue):void 0}},preventSrc:function(We){this.manager.session.prevented=!0,We.preventDefault()}};function Hs(We){this.options=b({},this.defaults,We||{}),this.id=un++,this.manager=null,this.options.enable=Be(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function wv(We){return 16&We?"cancel":8&We?"end":4&We?"move":2&We?"start":""}function Vh(We){return 16==We?"down":8==We?"up":2==We?"left":4==We?"right":""}function Dl(We,Ue){var at=Ue.manager;return at?at.get(We):We}function ro(){Hs.apply(this,arguments)}function pp(){ro.apply(this,arguments),this.pX=null,this.pY=null}function xv(){ro.apply(this,arguments)}function Av(){Hs.apply(this,arguments),this._timer=null,this._input=null}function Ov(){ro.apply(this,arguments)}function Iv(){ro.apply(this,arguments)}function mp(){Hs.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function zs(We,Ue){return(Ue=Ue||{}).recognizers=Be(Ue.recognizers,zs.defaults.preset),new Qh(We,Ue)}function Qh(We,Ue){this.options=b({},zs.defaults,Ue||{}),this.options.inputTarget=this.options.inputTarget||We,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=We,this.input=new(this.options.inputClass||(et?ds:bt?Xc:Se?wr:An))(this,Xi),this.touchAction=new fp(this,this.options.touchAction),_v(this,!0),he(this.options.recognizers,function(xt){var $t=this.add(new xt[0](xt[1]));xt[2]&&$t.recognizeWith(xt[2]),xt[3]&&$t.requireFailure(xt[3])},this)}function _v(We,Ue){var at,xt=We.element;xt.style&&(he(We.options.cssProps,function($t,On){at=Ot(xt.style,On),Ue?(We.oldCssProps[at]=xt.style[at],xt.style[at]=$t):xt.style[at]=We.oldCssProps[at]||""}),Ue||(We.oldCssProps={}))}Hs.prototype={defaults:{},set:function(We){return b(this.options,We),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(We){if(le(We,"recognizeWith",this))return this;var Ue=this.simultaneous;return Ue[(We=Dl(We,this)).id]||(Ue[We.id]=We,We.recognizeWith(this)),this},dropRecognizeWith:function(We){return le(We,"dropRecognizeWith",this)||(We=Dl(We,this),delete this.simultaneous[We.id]),this},requireFailure:function(We){if(le(We,"requireFailure",this))return this;var Ue=this.requireFail;return-1===qt(Ue,We=Dl(We,this))&&(Ue.push(We),We.requireFailure(this)),this},dropRequireFailure:function(We){if(le(We,"dropRequireFailure",this))return this;We=Dl(We,this);var Ue=qt(this.requireFail,We);return Ue>-1&&this.requireFail.splice(Ue,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(We){return!!this.simultaneous[We.id]},emit:function(We){var Ue=this,at=this.state;function xt($t){Ue.manager.emit($t,We)}at<8&&xt(Ue.options.event+wv(at)),xt(Ue.options.event),We.additionalEvent&&xt(We.additionalEvent),at>=8&&xt(Ue.options.event+wv(at))},tryEmit:function(We){if(this.canEmit())return this.emit(We);this.state=32},canEmit:function(){for(var We=0;We<this.requireFail.length;){if(!(33&this.requireFail[We].state))return!1;We++}return!0},recognize:function(We){var Ue=b({},We);if(!De(this.options.enable,[this,Ue]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(Ue),30&this.state&&this.tryEmit(Ue)},process:function(We){},getTouchAction:function(){},reset:function(){}},we(ro,Hs,{defaults:{pointers:1},attrTest:function(We){var Ue=this.options.pointers;return 0===Ue||We.pointers.length===Ue},process:function(We){var Ue=this.state,at=We.eventType,xt=6&Ue,$t=this.attrTest(We);return xt&&(8&at||!$t)?16|Ue:xt||$t?4&at?8|Ue:2&Ue?4|Ue:2:32}}),we(pp,ro,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var We=this.options.direction,Ue=[];return 6&We&&Ue.push(bv),24&We&&Ue.push(ps),Ue},directionTest:function(We){var Ue=this.options,at=!0,xt=We.distance,$t=We.direction,On=We.deltaX,Jn=We.deltaY;return $t&Ue.direction||(6&Ue.direction?($t=0===On?1:On<0?2:4,at=On!=this.pX,xt=Math.abs(We.deltaX)):($t=0===Jn?1:Jn<0?8:16,at=Jn!=this.pY,xt=Math.abs(We.deltaY))),We.direction=$t,at&&xt>Ue.threshold&&$t&Ue.direction},attrTest:function(We){return ro.prototype.attrTest.call(this,We)&&(2&this.state||!(2&this.state)&&this.directionTest(We))},emit:function(We){this.pX=We.deltaX,this.pY=We.deltaY;var Ue=Vh(We.direction);Ue&&(We.additionalEvent=this.options.event+Ue),this._super.emit.call(this,We)}}),we(xv,ro,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Bl]},attrTest:function(We){return this._super.attrTest.call(this,We)&&(Math.abs(We.scale-1)>this.options.threshold||2&this.state)},emit:function(We){1!==We.scale&&(We.additionalEvent=this.options.event+(We.scale<1?"in":"out")),this._super.emit.call(this,We)}}),we(Av,Hs,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(We){var Ue=this.options,at=We.pointers.length===Ue.pointers,xt=We.distance<Ue.threshold,$t=We.deltaTime>Ue.time;if(this._input=We,!xt||!at||12&We.eventType&&!$t)this.reset();else if(1&We.eventType)this.reset(),this._timer=te(function(){this.state=8,this.tryEmit()},Ue.time,this);else if(4&We.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(We){8===this.state&&(We&&4&We.eventType?this.manager.emit(this.options.event+"up",We):(this._input.timeStamp=z(),this.manager.emit(this.options.event,this._input)))}}),we(Ov,ro,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Bl]},attrTest:function(We){return this._super.attrTest.call(this,We)&&(Math.abs(We.rotation)>this.options.threshold||2&this.state)}}),we(Iv,ro,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return pp.prototype.getTouchAction.call(this)},attrTest:function(We){var Ue,at=this.options.direction;return 30&at?Ue=We.overallVelocity:6&at?Ue=We.overallVelocityX:24&at&&(Ue=We.overallVelocityY),this._super.attrTest.call(this,We)&&at&We.offsetDirection&&We.distance>this.options.threshold&&We.maxPointers==this.options.pointers&&W(Ue)>this.options.velocity&&4&We.eventType},emit:function(We){var Ue=Vh(We.offsetDirection);Ue&&this.manager.emit(this.options.event+Ue,We),this.manager.emit(this.options.event,We)}}),we(mp,Hs,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[yv]},process:function(We){var Ue=this.options,at=We.pointers.length===Ue.pointers,xt=We.distance<Ue.threshold,$t=We.deltaTime<Ue.time;if(this.reset(),1&We.eventType&&0===this.count)return this.failTimeout();if(xt&&$t&&at){if(4!=We.eventType)return this.failTimeout();var On=!this.pTime||We.timeStamp-this.pTime<Ue.interval,Jn=!this.pCenter||Fn(this.pCenter,We.center)<Ue.posThreshold;if(this.pTime=We.timeStamp,this.pCenter=We.center,Jn&&On?this.count+=1:this.count=1,this._input=We,this.count%Ue.taps==0)return this.hasRequireFailures()?(this._timer=te(function(){this.state=8,this.tryEmit()},Ue.interval,this),2):8}return 32},failTimeout:function(){return this._timer=te(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),zs.VERSION="2.0.7",zs.defaults={domEvents:!1,touchAction:vv,enable:!0,inputTarget:null,inputClass:null,preset:[[Ov,{enable:!1}],[xv,{enable:!1},["rotate"]],[Iv,{direction:6}],[pp,{direction:6},["swipe"]],[mp],[mp,{event:"doubletap",taps:2},["tap"]],[Av]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Qh.prototype={set:function(We){return b(this.options,We),We.touchAction&&this.touchAction.update(),We.inputTarget&&(this.input.destroy(),this.input.target=We.inputTarget,this.input.init()),this},stop:function(We){this.session.stopped=We?2:1},recognize:function(We){var Ue=this.session;if(!Ue.stopped){var at;this.touchAction.preventDefaults(We);var xt=this.recognizers,$t=Ue.curRecognizer;(!$t||$t&&8&$t.state)&&($t=Ue.curRecognizer=null);for(var On=0;On<xt.length;)at=xt[On],2===Ue.stopped||$t&&at!=$t&&!at.canRecognizeWith($t)?at.reset():at.recognize(We),!$t&&14&at.state&&($t=Ue.curRecognizer=at),On++}},get:function(We){if(We instanceof Hs)return We;for(var Ue=this.recognizers,at=0;at<Ue.length;at++)if(Ue[at].options.event==We)return Ue[at];return null},add:function(We){if(le(We,"add",this))return this;var Ue=this.get(We.options.event);return Ue&&this.remove(Ue),this.recognizers.push(We),We.manager=this,this.touchAction.update(),We},remove:function(We){if(le(We,"remove",this))return this;if(We=this.get(We)){var Ue=this.recognizers,at=qt(Ue,We);-1!==at&&(Ue.splice(at,1),this.touchAction.update())}return this},on:function(We,Ue){if(We!==d&&Ue!==d){var at=this.handlers;return he(gt(We),function(xt){at[xt]=at[xt]||[],at[xt].push(Ue)}),this}},off:function(We,Ue){if(We!==d){var at=this.handlers;return he(gt(We),function(xt){Ue?at[xt]&&at[xt].splice(qt(at[xt],Ue),1):delete at[xt]}),this}},emit:function(We,Ue){var $t,On,Jn;this.options.domEvents&&($t=We,On=Ue,(Jn=a.createEvent("Event")).initEvent($t,!0,!0),Jn.gesture=On,On.target.dispatchEvent(Jn));var at=this.handlers[We]&&this.handlers[We].slice();if(at&&at.length){Ue.type=We,Ue.preventDefault=function(){Ue.srcEvent.preventDefault()};for(var xt=0;xt<at.length;)at[xt](Ue),xt++}},destroy:function(){this.element&&_v(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},b(zs,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Qh,Input:Hn,TouchAction:fp,TouchInput:Xc,MouseInput:An,PointerEventInput:ds,TouchMouseInput:wr,SingleTouchInput:fs,Recognizer:Hs,AttrRecognizer:ro,Tap:mp,Pan:pp,Swipe:Iv,Pinch:xv,Rotate:Ov,Press:Av,on:He,off:rt,each:he,merge:Pe,extend:Oe,assign:b,inherit:we,bindFn:Ee,prefixed:Ot}),(void 0!==o?o:typeof self<"u"?self:{}).Hammer=zs,n.exports?n.exports=zs:o.Hammer=zs}(window,document)}(Ps);var fa=Ps.exports,Xp=["mousedown","mouseup","mouseover","mouseout","click","dblclick"];function Nu(n,o){return o.get(n,!1)}function _d(n){n.preventDefault(),"function"==typeof n.stopPropagation?n.stopPropagation():n.srcEvent&&"function"==typeof n.srcEvent.stopPropagation&&n.srcEvent.stopPropagation(),"function"==typeof n.stopImmediatePropagation&&n.stopImmediatePropagation()}function Kp(n){function o($){setTimeout(function(){p(Xp,function(W){ct.unbind(n,W,_d,!0)})},500)}ct.bind(n,"touchstart",function($){p(Xp,function(W){ct.bind(n,W,_d,!0)})},!0),ct.bind(n,"touchend",o,!0),ct.bind(n,"touchcancel",o,!0);var a=new fa.Manager(n,{inputClass:fa.TouchInput,recognizers:[],domEvents:!0}),l=new fa.Tap,d=new fa.Pan({threshold:10}),b=new fa.Press,A=new fa.Pinch,E=new fa.Tap({event:"doubletap",taps:2});return A.requireFailure(d),A.requireFailure(b),a.add([d,b,A,E,l]),a.reset=function($){var W=this.recognizers,z=this.session;z.stopped||(a.stop($),setTimeout(function(){var te,le;for(te=0;le=W[te];te++)le.reset(),le.state=8;z.curRecognizer=null},0))},a.on("hammer.input",function($){$.srcEvent.defaultPrevented&&a.reset(!0)}),a}function Yp(n,o,a,l,d){var b,A=Nu("dragging",n),E=Nu("move",n),$=Nu("contextPad",n),W=Nu("palette",n);function z(he,me){return function(Oe){var Pe=te(Oe.target),we=Pe&&l.get(Pe);return me&&(Oe.srcEvent.button=me),d.fire(he,Oe,we)}}function te(he){return _e(he,"svg, .djs-element",!0)}A&&a.on("drag.move",function(he){var me=he.originalEvent;if(me&&!(me instanceof MouseEvent)){var Oe=Li(me),Pe=te(document.elementFromPoint(Oe.x,Oe.y)),we=Pe&&l.get(Pe);we!==he.hover&&(he.hover&&A.out(he),we&&(A.hover({element:we,gfx:Pe}),he.hover=we,he.hoverGfx=Pe))}}),$&&a.on("contextPad.create",function(he){var me=Kp(he.pad.html);me.on("panstart",function(Oe){$.trigger("dragstart",Oe,!0)}),me.on("press",function(Oe){$.trigger("dragstart",Oe,!0)}),me.on("tap",function(Oe){$.trigger("click",Oe)})}),W&&a.on("palette.create",function(he){var me=Kp(he.container);me.on("panstart",function(Oe){W.trigger("dragstart",Oe,!0)}),me.on("press",function(Oe){W.trigger("dragstart",Oe,!0)}),me.on("tap",function(Oe){W.trigger("click",Oe)})}),a.on("canvas.init",function(he){!function le(he){function me(Oe){var Pe=te(Oe.target),we=Pe&&l.get(Pe);if(E&&o.getRootElement()!==we)return E.start(Oe,we,!0);!function(Ee){var De=0,Be=0;function He(qe){o.scroll({dx:qe.deltaX-De,dy:qe.deltaY-Be}),De=qe.deltaX,Be=qe.deltaY}function rt(qe){b.off("panmove",He),b.off("panend",rt),b.off("pancancel",rt)}b.on("panmove",He),b.on("panend",rt),b.on("pancancel",rt)}()}(b=Kp(he)).on("tap",z("element.click")),b.on("doubletap",z("element.dblclick",1)),b.on("panstart",me),b.on("press",me),b.on("pinchstart",function(Oe){var Pe=o.zoom(),we=Oe.center;function Ee(Be){var rt=Math.max(.2,Math.min(4,(1-(1-Be.scale)/1.5)*Pe));o.zoom(rt,we),_d(Be)}function De(Be){b.off("pinchmove",Ee),b.off("pinchend",De),b.off("pinchcancel",De),b.reset(!0)}b.on("pinchmove",Ee),b.on("pinchend",De),b.on("pinchcancel",De)})}(he.svg)})}function Sd(n,o){var a=this;o.on("canvas.init",function(l){a.addBBoxMarker(l.svg)})}Yp.$inject=["injector","canvas","eventBus","elementRegistry","interactionEvents","touchFix"],Sd.$inject=["canvas","eventBus"],Sd.prototype.addBBoxMarker=function(n){var o={fill:"none",class:"outer-bound-marker"},a=jt("rect");yt(a,{x:-1e4,y:1e4,width:10,height:10}),yt(a,o),Ze(n,a);var l=jt("rect");yt(l,{x:1e4,y:1e4,width:10,height:10}),yt(l,o),Ze(n,l)};var NC={__depends__:[{__depends__:[rc],__init__:["touchInteractionEvents"],touchInteractionEvents:["type",Yp],touchFix:["type",Sd]}]};function qp(n){return n&&n[n.length-1]}function Jp(n){return n.y}function xy(n){return n.x}var LC={left:xy,center:xy,right:function(n){return n.x+n.width},top:Jp,middle:Jp,bottom:function(n){return n.y+n.height}};function lc(n,o){this._modeling=n,this._rules=o}lc.$inject=["modeling","rules"],lc.prototype._getOrientationDetails=function(n){var o="x",a="width";return-1!==["top","bottom","middle"].indexOf(n)&&(o="y",a="height"),{axis:o,dimension:a}},lc.prototype._isType=function(n,o){return-1!==o.indexOf(n)},lc.prototype._alignmentPosition=function(n,o){var a,l,d,le,b=this._getOrientationDetails(n),A=b.axis,E=b.dimension,$={},W={},z=!1;if(this._isType(n,["left","top"]))$[n]=o[0][A];else if(this._isType(n,["right","bottom"]))d=qp(o),$[n]=d[A]+d[E];else if(this._isType(n,["center","middle"])){if(p(o,function(te){var le=te[A]+Math.round(te[E]/2);W[le]?W[le].elements.push(te):W[le]={elements:[te],center:le}}),a=T(W,function(te){return te.elements.length>1&&(z=!0),te.elements.length}),z)return $[n]=qp(a).center,$;l=o[0],d=qp(o=T(o,function(te){return te[A]+te[E]})),$[n]=(le=d,Math.round((l[A]+le[A]+le[E])/2))}return $},lc.prototype.trigger=function(n,o){var a,l=this._modeling,d=w(n,function(E){return!(E.waypoints||E.host||E.labelTarget)});if(H(a=this._rules.allowed("elements.align",{elements:d}))&&(d=a),!(d.length<2)&&a){var b=T(d,LC[o]),A=this._alignmentPosition(o,b);l.alignElements(b,A)}};var BC={__init__:["alignElements"],alignElements:["type",lc]};function Er(n,o,a,l){this._canvas=n,this._eventBus=a,this._overlays=l;var d=Z(o&&o.scale)?o.scale:{min:1,max:1.5};this._overlaysConfig={scale:d},this._current=null,this._init()}function Oy(n,o){return-1!==n.indexOf(o)}Er.$inject=["canvas","config.contextPad","eventBus","overlays"],Er.prototype._init=function(){var n=this;this._eventBus.on("selection.changed",function(o){var a=o.newSelection,l=a.length?1===a.length?a[0]:a:null;l?n.open(l,!0):n.close()}),this._eventBus.on("elements.changed",function(o){var a=o.elements,l=n._current;if(l){var d=l.target;v(H(d)?d:[d],function(b){return Oy(a,b)})&&n.open(d,!0)}})},Er.prototype.registerProvider=function(n,o){o||(o=n,n=1e3),this._eventBus.on("contextPad.getProviders",n,function(a){a.providers.push(o)})},Er.prototype.getEntries=function(n){var o=this._getProviders(),a=H(n)?"getMultiElementContextPadEntries":"getContextPadEntries",l={};return p(o,function(d){if(_(d[a])){var b=d[a](n);_(b)?l=b(l):p(b,function(A,E){l[E]=A})}}),l},Er.prototype.trigger=function(n,o,a){var l,b=o.delegateTarget||o.target;return b?(l=pe(b,"data-action"),this.triggerEntry(l,n,o.originalEvent||o,a)):o.preventDefault()},Er.prototype.triggerEntry=function(n,o,a,l){if(this.isShown()){var d=this._current.target,b=this._current.entries[n];if(b){var A=b.action;if(_(A)){if("click"===o)return A(a,d,l)}else if(A[o])return A[o](a,d,l);a.preventDefault()}}},Er.prototype.open=function(n,o){!o&&this.isOpen(n)||(this.close(),this._updateAndOpen(n))},Er.prototype._getProviders=function(){var n=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(n),n.providers},Er.prototype._updateAndOpen=function(n){var o,a=this.getEntries(n),l=this.getPad(n),d=l.html;p(a,function(b,A){var E,te,le,$=b.group||"default",W=vt(b.html||'<div class="entry" draggable="true"></div>');pe(W,"data-action",A),(E=wt("[data-group="+ha($)+"]",d))||(pe(E=vt('<div class="group"></div>'),"data-group",$),d.appendChild(E)),E.appendChild(W),b.className&&(te=b.className,le=be(W),(te=H(te)?te:te.split(/\s+/g)).forEach(function(he){le.add(he)})),b.title&&pe(W,"title",b.title),b.imageUrl&&(pe(o=vt("<img>"),"src",b.imageUrl),o.style.width="100%",o.style.height="100%",W.appendChild(o))}),be(d).add("open"),this._current={target:n,entries:a,pad:l},this._eventBus.fire("contextPad.open",{current:this._current})},Er.prototype.getPad=function(n){if(this.isOpen())return this._current.pad;var o=this,a=this._overlays,l=vt('<div class="djs-context-pad"></div>'),d=this._getPosition(n),b=N({html:l},this._overlaysConfig,d);Et.bind(l,".entry","click",function($){o.trigger("click",$)}),Et.bind(l,".entry","dragstart",function($){o.trigger("dragstart",$)}),ct.bind(l,"mousedown",function($){$.stopPropagation()});var A=this._canvas.getRootElement();this._overlayId=a.add(A,"context-pad",b);var E=a.get(this._overlayId);return this._eventBus.fire("contextPad.create",{target:n,pad:E}),E},Er.prototype.close=function(){this.isOpen()&&(this._overlays.remove(this._overlayId),this._overlayId=null,this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)},Er.prototype.isOpen=function(n){var o=this._current;if(!o)return!1;if(!n)return!0;var a=o.target;return H(n)===H(a)&&(H(n)?n.length===a.length&&h(n,function(l){return Oy(a,l)}):a===n)},Er.prototype.isShown=function(){return this.isOpen()&&this._overlays.isShown()},Er.prototype._getPosition=function(n){var o=qn(H(n)?n:[n]);return{position:{left:o.x+o.width+12,top:o.y-6}}};var cc,In,em,nl,tm,Ed={__depends__:[rc,_u],contextPad:["type",Er]},Lu={},Iy=[],DC=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Rs(n,o){for(var a in o)n[a]=o[a];return n}function _y(n){var o=n.parentNode;o&&o.removeChild(n)}function Sy(n,o,a){var l,d,b,A={};for(b in o)"key"==b?l=o[b]:"ref"==b?d=o[b]:A[b]=o[b];if(arguments.length>2&&(A.children=arguments.length>3?cc.call(arguments,2):a),"function"==typeof n&&null!=n.defaultProps)for(b in n.defaultProps)void 0===A[b]&&(A[b]=n.defaultProps[b]);return uc(n,A,l,d,null)}function uc(n,o,a,l,d){var b={type:n,props:o,key:a,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:d??++em};return null==d&&null!=In.vnode&&In.vnode(b),b}function kd(n){return n.children}function Bu(n,o){this.props=n,this.context=o}function hc(n,o){if(null==o)return n.__?hc(n.__,n.__.__k.indexOf(n)+1):null;for(var a;o<n.__k.length;o++)if(null!=(a=n.__k[o])&&null!=a.__e)return a.__e;return"function"==typeof n.type?hc(n):null}function Ey(n){var o,a;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,o=0;o<n.__k.length;o++)if(null!=(a=n.__k[o])&&null!=a.__e){n.__e=n.__c.base=a.__e;break}return Ey(n)}}function ky(n){(!n.__d&&(n.__d=!0)&&nl.push(n)&&!Td.__r++||tm!==In.debounceRendering)&&((tm=In.debounceRendering)||setTimeout)(Td)}function Td(){for(var n;Td.__r=nl.length;)n=nl.sort(function(o,a){return o.__v.__b-a.__v.__b}),nl=[],n.some(function(o){var a,l,d,b,A,E;o.__d&&(A=(b=(a=o).__v).__e,(E=a.__P)&&(l=[],(d=Rs({},b)).__v=b.__v+1,Rd(E,b,d,a.__n,void 0!==E.ownerSVGElement,null!=b.__h?[A]:null,l,A??hc(b),b.__h),sm(l,b),b.__e!=A&&Ey(b)))})}function Ty(n,o,a,l,d,b,A,E,$,W){var z,te,le,he,me,Oe,Pe,we=l&&l.__k||Iy,Ee=we.length;for(a.__k=[],z=0;z<o.length;z++)if(null!=(he=a.__k[z]=null==(he=o[z])||"boolean"==typeof he?null:"string"==typeof he||"number"==typeof he||"bigint"==typeof he?uc(null,he,null,null,he):Array.isArray(he)?uc(kd,{children:he},null,null,null):he.__b>0?uc(he.type,he.props,he.key,he.ref?he.ref:null,he.__v):he)){if(he.__=a,he.__b=a.__b+1,null===(le=we[z])||le&&he.key==le.key&&he.type===le.type)we[z]=void 0;else for(te=0;te<Ee;te++){if((le=we[te])&&he.key==le.key&&he.type===le.type){we[te]=void 0;break}le=null}Rd(n,he,le=le||Lu,d,b,A,E,$,W),me=he.__e,(te=he.ref)&&le.ref!=te&&(Pe||(Pe=[]),le.ref&&Pe.push(le.ref,null,he),Pe.push(te,he.__c||me,he)),null!=me?(null==Oe&&(Oe=me),"function"==typeof he.type&&he.__k===le.__k?he.__d=$=nm(he,$,n):$=Hi(n,he,le,we,me,$),"function"==typeof a.type&&(a.__d=$)):$&&le.__e==$&&$.parentNode!=n&&($=hc(le))}for(a.__e=Oe,z=Ee;z--;)null!=we[z]&&am(we[z],we[z]);if(Pe)for(z=0;z<Pe.length;z++)Ry(Pe[z],Pe[++z],Pe[++z])}function nm(n,o,a){for(var l,d=n.__k,b=0;d&&b<d.length;b++)(l=d[b])&&(l.__=n,o="function"==typeof l.type?nm(l,o,a):Hi(a,l,l,d,l.__e,o));return o}function Hi(n,o,a,l,d,b){var A,E,$;if(void 0!==o.__d)A=o.__d,o.__d=void 0;else if(null==a||d!=b||null==d.parentNode)e:if(null==b||b.parentNode!==n)n.appendChild(d),A=null;else{for(E=b,$=0;(E=E.nextSibling)&&$<l.length;$+=1)if(E==d)break e;n.insertBefore(d,b),A=b}return void 0!==A?A:d.nextSibling}function im(n,o,a){"-"===o[0]?n.setProperty(o,a):n[o]=null==a?"":"number"!=typeof a||DC.test(o)?a:a+"px"}function Pd(n,o,a,l,d){var b;e:if("style"===o)if("string"==typeof a)n.style.cssText=a;else{if("string"==typeof l&&(n.style.cssText=l=""),l)for(o in l)a&&o in a||im(n.style,o,"");if(a)for(o in a)l&&a[o]===l[o]||im(n.style,o,a[o])}else if("o"===o[0]&&"n"===o[1])b=o!==(o=o.replace(/Capture$/,"")),o=o.toLowerCase()in n?o.toLowerCase().slice(2):o.slice(2),n.l||(n.l={}),n.l[o+b]=a,a?l||n.addEventListener(o,b?om:rm,b):n.removeEventListener(o,b?om:rm,b);else if("dangerouslySetInnerHTML"!==o){if(d)o=o.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==o&&"list"!==o&&"form"!==o&&"tabIndex"!==o&&"download"!==o&&o in n)try{n[o]=a??"";break e}catch{}"function"==typeof a||(null==a||!1===a&&-1==o.indexOf("-")?n.removeAttribute(o):n.setAttribute(o,a))}}function rm(n){this.l[n.type+!1](In.event?In.event(n):n)}function om(n){this.l[n.type+!0](In.event?In.event(n):n)}function Rd(n,o,a,l,d,b,A,E,$){var W,z,te,le,he,me,Oe,Pe,we,Ee,De,Be,He,rt,qe,nt=o.type;if(void 0!==o.constructor)return null;null!=a.__h&&($=a.__h,E=o.__e=a.__e,o.__h=null,b=[E]),(W=In.__b)&&W(o);try{e:if("function"==typeof nt){if(Pe=o.props,we=(W=nt.contextType)&&l[W.__c],Ee=W?we?we.props.value:W.__:l,a.__c?Oe=(z=o.__c=a.__c).__=z.__E:("prototype"in nt&&nt.prototype.render?o.__c=z=new nt(Pe,Ee):(o.__c=z=new Bu(Pe,Ee),z.constructor=nt,z.render=FC),we&&we.sub(z),z.props=Pe,z.state||(z.state={}),z.context=Ee,z.__n=l,te=z.__d=!0,z.__h=[],z._sb=[]),null==z.__s&&(z.__s=z.state),null!=nt.getDerivedStateFromProps&&(z.__s==z.state&&(z.__s=Rs({},z.__s)),Rs(z.__s,nt.getDerivedStateFromProps(Pe,z.__s))),le=z.props,he=z.state,te)null==nt.getDerivedStateFromProps&&null!=z.componentWillMount&&z.componentWillMount(),null!=z.componentDidMount&&z.__h.push(z.componentDidMount);else{if(null==nt.getDerivedStateFromProps&&Pe!==le&&null!=z.componentWillReceiveProps&&z.componentWillReceiveProps(Pe,Ee),!z.__e&&null!=z.shouldComponentUpdate&&!1===z.shouldComponentUpdate(Pe,z.__s,Ee)||o.__v===a.__v){for(z.props=Pe,z.state=z.__s,o.__v!==a.__v&&(z.__d=!1),z.__v=o,o.__e=a.__e,o.__k=a.__k,o.__k.forEach(function(gt){gt&&(gt.__=o)}),De=0;De<z._sb.length;De++)z.__h.push(z._sb[De]);z._sb=[],z.__h.length&&A.push(z);break e}null!=z.componentWillUpdate&&z.componentWillUpdate(Pe,z.__s,Ee),null!=z.componentDidUpdate&&z.__h.push(function(){z.componentDidUpdate(le,he,me)})}if(z.context=Ee,z.props=Pe,z.__v=o,z.__P=n,Be=In.__r,He=0,"prototype"in nt&&nt.prototype.render){for(z.state=z.__s,z.__d=!1,Be&&Be(o),W=z.render(z.props,z.state,z.context),rt=0;rt<z._sb.length;rt++)z.__h.push(z._sb[rt]);z._sb=[]}else do{z.__d=!1,Be&&Be(o),W=z.render(z.props,z.state,z.context),z.state=z.__s}while(z.__d&&++He<25);z.state=z.__s,null!=z.getChildContext&&(l=Rs(Rs({},l),z.getChildContext())),te||null==z.getSnapshotBeforeUpdate||(me=z.getSnapshotBeforeUpdate(le,he)),qe=null!=W&&W.type===kd&&null==W.key?W.props.children:W,Ty(n,Array.isArray(qe)?qe:[qe],o,a,l,d,b,A,E,$),z.base=o.__e,o.__h=null,z.__h.length&&A.push(z),Oe&&(z.__E=z.__=null),z.__e=!1}else null==b&&o.__v===a.__v?(o.__k=a.__k,o.__e=a.__e):o.__e=function Py(n,o,a,l,d,b,A,E){var $,W,z,te=a.props,le=o.props,he=o.type,me=0;if("svg"===he&&(d=!0),null!=b)for(;me<b.length;me++)if(($=b[me])&&"setAttribute"in $==!!he&&(he?$.localName===he:3===$.nodeType)){n=$,b[me]=null;break}if(null==n){if(null===he)return document.createTextNode(le);n=d?document.createElementNS("http://www.w3.org/2000/svg",he):document.createElement(he,le.is&&le),b=null,E=!1}if(null===he)te===le||E&&n.data===le||(n.data=le);else{if(b=b&&cc.call(n.childNodes),W=(te=a.props||Lu).dangerouslySetInnerHTML,z=le.dangerouslySetInnerHTML,!E){if(null!=b)for(te={},me=0;me<n.attributes.length;me++)te[n.attributes[me].name]=n.attributes[me].value;(z||W)&&(z&&(W&&z.__html==W.__html||z.__html===n.innerHTML)||(n.innerHTML=z&&z.__html||""))}if(function(Oe,Pe,we,Ee,De){var Be;for(Be in we)"children"===Be||"key"===Be||Be in Pe||Pd(Oe,Be,null,we[Be],Ee);for(Be in Pe)De&&"function"!=typeof Pe[Be]||"children"===Be||"key"===Be||"value"===Be||"checked"===Be||we[Be]===Pe[Be]||Pd(Oe,Be,Pe[Be],we[Be],Ee)}(n,le,te,d,E),z)o.__k=[];else if(me=o.props.children,Ty(n,Array.isArray(me)?me:[me],o,a,l,d&&"foreignObject"!==he,b,A,b?b[0]:a.__k&&hc(a,0),E),null!=b)for(me=b.length;me--;)null!=b[me]&&_y(b[me]);E||("value"in le&&void 0!==(me=le.value)&&(me!==n.value||"progress"===he&&!me||"option"===he&&me!==te.value)&&Pd(n,"value",me,te.value,!1),"checked"in le&&void 0!==(me=le.checked)&&me!==n.checked&&Pd(n,"checked",me,te.checked,!1))}return n}(a.__e,o,a,l,d,b,A,$);(W=In.diffed)&&W(o)}catch(gt){o.__v=null,($||null!=b)&&(o.__e=E,o.__h=!!$,b[b.indexOf(E)]=null),In.__e(gt,o,a)}}function sm(n,o){In.__c&&In.__c(o,n),n.some(function(a){try{n=a.__h,a.__h=[],n.some(function(l){l.call(a)})}catch(l){In.__e(l,a.__v)}})}function Ry(n,o,a){try{"function"==typeof n?n(o):n.current=o}catch(l){In.__e(l,a)}}function am(n,o,a){var l,d;if(In.unmount&&In.unmount(n),(l=n.ref)&&(l.current&&l.current!==n.__e||Ry(l,null,o)),null!=(l=n.__c)){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(b){In.__e(b,o)}l.base=l.__P=null,n.__c=void 0}if(l=n.__k)for(d=0;d<l.length;d++)l[d]&&am(l[d],o,a||"function"!=typeof n.type);a||null==n.__e||_y(n.__e),n.__=n.__e=n.__d=void 0}function FC(n,o,a){return this.constructor(n,a)}function lm(n,o,a){var l,d,b;In.__&&In.__(n,o),d=(l="function"==typeof a)?null:a&&a.__k||o.__k,b=[],Rd(o,n=(!l&&a||o).__k=Sy(kd,null,[n]),d||Lu,Lu,void 0!==o.ownerSVGElement,!l&&a?[a]:d?null:o.firstChild?cc.call(o.childNodes):null,b,!l&&a?a:d?d.__e:o.firstChild,l),sm(b,n)}cc=Iy.slice,In={__e:function(n,o,a,l){for(var d,b,A;o=o.__;)if((d=o.__c)&&!d.__)try{if((b=d.constructor)&&null!=b.getDerivedStateFromError&&(d.setState(b.getDerivedStateFromError(n)),A=d.__d),null!=d.componentDidCatch&&(d.componentDidCatch(n,l||{}),A=d.__d),A)return d.__E=d}catch(E){n=E}throw n}},em=0,Bu.prototype.setState=function(n,o){var a;a=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=Rs({},this.state),"function"==typeof n&&(n=n(Rs({},a),this.props)),n&&Rs(a,n),null!=n&&this.__v&&(o&&this._sb.push(o),ky(this))},Bu.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),ky(this))},Bu.prototype.render=kd,nl=[],Td.__r=0;var il,Bi,$d,$y,cm=function(n,o,a,l){var d;o[0]=0;for(var b=1;b<o.length;b++){var A=o[b++],E=o[b]?(o[0]|=A?1:2,a[o[b++]]):o[++b];3===A?l[0]=E:4===A?l[1]=Object.assign(l[1]||{},E):5===A?(l[1]=l[1]||{})[o[++b]]=E:6===A?l[1][o[++b]]+=E+"":A?(d=n.apply(E,cm(n,E,a,["",null])),l.push(d),E[0]?o[0]|=2:(o[b-2]=0,o[b]=d)):l.push(E)}return l},um=new Map,zi=function(n){var o=um.get(this);return o||um.set(this,o=new Map),(o=cm(this,o.get(n)||(o.set(n,o=function(a){for(var l,d,b=1,A="",E="",$=[0],W=function(le){1===b&&(le||(A=A.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?$.push(0,le,A):3===b&&(le||A)?($.push(3,le,A),b=2):2===b&&"..."===A&&le?$.push(4,le,0):2===b&&A&&!le?$.push(5,0,!0,A):b>=5&&((A||!le&&5===b)&&($.push(b,0,A,d),b=6),le&&($.push(b,le,0,d),b=6)),A=""},z=0;z<a.length;z++){z&&(1===b&&W(),W(z));for(var te=0;te<a[z].length;te++)l=a[z][te],1===b?"<"===l?(W(),$=[$],b=3):A+=l:4===b?"--"===A&&">"===l?(b=1,A=""):A=l+A[0]:E?l===E?E="":A+=l:'"'===l||"'"===l?E=l:">"===l?(W(),b=1):b&&("="===l?(b=5,d=A,A=""):"/"===l&&(b<5||">"===a[z][te+1])?(W(),3===b&&($=$[0]),b=$,($=$[0]).push(2,0,b),b=0):" "===l||"\t"===l||"\n"===l||"\r"===l?(W(),b=2):A+=l),3===b&&"!--"===A&&(b=4,$=$[0])}return W(),$}(n)),o),arguments,[])).length>1?o:o[0]}.bind(Sy),rl=0,hm=[],Du=[],dm=In.__b,fm=In.__r,pm=In.diffed,$s=In.__c,ti=In.unmount;function ol(n,o){In.__h&&In.__h(Bi,n,rl||o),rl=0;var a=Bi.__H||(Bi.__H={__:[],__h:[]});return n>=a.__.length&&a.__.push({__V:Du}),a.__[n]}function ur(n){return rl=1,function(o,a,l){var d=ol(il++,2);if(d.t=o,!d.__c&&(d.__=[Bd(void 0,a),function(A){var E=d.__N?d.__N[0]:d.__[0],$=d.t(E,A);E!==$&&(d.__N=[$,d.__[1]],d.__c.setState({}))}],d.__c=Bi,!Bi.u)){Bi.u=!0;var b=Bi.shouldComponentUpdate;Bi.shouldComponentUpdate=function(A,E,$){if(!d.__c.__H)return!0;var W=d.__c.__H.__.filter(function(te){return te.__c});if(W.every(function(te){return!te.__N}))return!b||b.call(this,A,E,$);var z=!1;return W.forEach(function(te){if(te.__N){var le=te.__[0];te.__=te.__N,te.__N=void 0,le!==te.__[0]&&(z=!0)}}),!(!z&&d.__c.props===A)&&(!b||b.call(this,A,E,$))}}return d.__N||d.__}(Bd,n)}function Md(n,o){var a=ol(il++,3);!In.__s&&gm(a.__H,o)&&(a.__=n,a.i=o,Bi.__H.__h.push(a))}function yr(n,o){var a=ol(il++,4);!In.__s&&gm(a.__H,o)&&(a.__=n,a.i=o,Bi.__h.push(a))}function Ui(n){return rl=5,Fu(function(){return{current:n}},[])}function Fu(n,o){var a=ol(il++,7);return gm(a.__H,o)?(a.__V=n(),a.i=o,a.__h=n,a.__V):a.__}function sl(n,o){return rl=8,Fu(function(){return n},o)}function WC(){for(var n;n=hm.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(Ld),n.__H.__h.forEach(mm),n.__H.__h=[]}catch(o){n.__H.__h=[],In.__e(o,n.__v)}}In.__b=function(n){Bi=null,dm&&dm(n)},In.__r=function(n){fm&&fm(n),il=0;var o=(Bi=n.__c).__H;o&&($d===Bi?(o.__h=[],Bi.__h=[],o.__.forEach(function(a){a.__N&&(a.__=a.__N),a.__V=Du,a.__N=a.i=void 0})):(o.__h.forEach(Ld),o.__h.forEach(mm),o.__h=[])),$d=Bi},In.diffed=function(n){pm&&pm(n);var o=n.__c;o&&o.__H&&(o.__H.__h.length&&(1!==hm.push(o)&&$y===In.requestAnimationFrame||(($y=In.requestAnimationFrame)||GC)(WC)),o.__H.__.forEach(function(a){a.i&&(a.__H=a.i),a.__V!==Du&&(a.__=a.__V),a.i=void 0,a.__V=Du})),$d=Bi=null},In.__c=function(n,o){o.some(function(a){try{a.__h.forEach(Ld),a.__h=a.__h.filter(function(l){return!l.__||mm(l)})}catch(l){o.some(function(d){d.__h&&(d.__h=[])}),o=[],In.__e(l,a.__v)}}),$s&&$s(n,o)},In.unmount=function(n){ti&&ti(n);var o,a=n.__c;a&&a.__H&&(a.__H.__.forEach(function(l){try{Ld(l)}catch(d){o=d}}),a.__H=void 0,o&&In.__e(o,a.__v))};var Nd="function"==typeof requestAnimationFrame;function GC(n){var o,a=function(){clearTimeout(l),Nd&&cancelAnimationFrame(o),setTimeout(n)},l=setTimeout(a,100);Nd&&(o=requestAnimationFrame(a))}function Ld(n){var o=Bi,a=n.__c;"function"==typeof a&&(n.__c=void 0,a()),Bi=o}function mm(n){var o=Bi;n.__c=n.__(),Bi=o}function gm(n,o){return!n||n.length!==o.length||o.some(function(a,l){return a!==n[l]})}function Bd(n,o){return"function"==typeof o?o(n):o}function My(n){var o,a,l="";if("string"==typeof n||"number"==typeof n)l+=n;else if("object"==typeof n)if(Array.isArray(n))for(o=0;o<n.length;o++)n[o]&&(a=My(n[o]))&&(l&&(l+=" "),l+=a);else for(o in n)n[o]&&(l&&(l+=" "),l+=o);return l}function Wu(){for(var n,o,a=0,l="";a<arguments.length;)(n=arguments[a++])&&(o=My(n))&&(l&&(l+=" "),l+=o);return l}function Dd(n){const{entry:o,selected:a,onMouseEnter:l,onMouseLeave:d,onAction:b}=n;return zi`
    <li
      class=${Wu("entry",{selected:a})}
      data-id=${o.id}
      title=${o.title||o.label}
      onClick=${b}
      onMouseEnter=${l}
      onMouseLeave=${d}
      onDragStart=${A=>b(A,o,"dragstart")}
      draggable=${!0}
    >
      <div class="djs-popup-entry-content">
        <span
          class=${Wu("djs-popup-entry-name",o.className)}
        >
          ${o.imageUrl?zi`
            <img class="djs-popup-entry-icon" src=${o.imageUrl} alt="" />
          `:null}

          ${o.label?zi`
            <span class="djs-popup-label">
              ${o.label}
            </span>
          `:null}
        </span>
        ${o.description&&zi`
          <span
            class="djs-popup-entry-description"
            title=${o.description}
          >
            ${o.description}
          </span>
        `}
      </div>
      ${o.documentationRef&&zi`
        <div class="djs-popup-entry-docs">
          <a
            href="${o.documentationRef}"
            onClick=${A=>A.stopPropagation()}
            title="Open element documentation"
            target="_blank"
            rel="noopener"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z" fill="#818798"/>
            </svg>
          </a>
        </div>
      `}
    </li>
  `}function jC(n){const{selectedEntry:o,setSelectedEntry:a,entries:l,...d}=n,b=Ui(),A=Fu(()=>function(E){const $=[],W=le=>$.find(he=>le.id===he.id);return E.forEach(le=>{const he=le.group?(le=>"string"==typeof le?{id:le}:le)(le.group):{id:"default"};(le=>!!W(le))(he)?W(he).entries.push(le):$.push({...he,entries:[le]})}),$}(l),[l]);return yr(()=>{const E=b.current;if(!E)return;const $=E.querySelector(".selected");var W;$&&("function"==typeof(W=$).scrollIntoViewIfNeeded?W.scrollIntoViewIfNeeded():W.scrollIntoView({scrollMode:"if-needed",block:"nearest"}))},[o]),zi`
    <div class="djs-popup-results" ref=${b}>
      ${A.map(E=>zi`
        ${E.name&&zi`
          <div key=${E.id} class="entry-header" title=${E.name}>
            ${E.name}
          </div>
        `}
        <ul class="djs-popup-group" data-group=${E.id}>
          ${E.entries.map($=>zi`
            <${Dd}
              key=${$.id}
              entry=${$}
              selected=${$===o}
              onMouseEnter=${()=>a($)}
              onMouseLeave=${()=>a(null)}
              ...${d}
            />
          `)}
        </ul>
      `)}
    </div>
  `}function Fd(n){const{onClose:o,onSelect:a,className:l,headerEntries:d,position:b,title:A,width:E,scale:$,search:W,entries:z,onOpened:te,onClosed:le}=n,he=Fu(()=>!!Z(W)&&z.length>5,[W,z]),me=Ui(),[Oe,Pe]=ur(""),we=sl((Mt,dt)=>he?Mt.filter(Ot=>{if(!dt)return(Ot.rank||0)>=0;const un=[Ot.description||"",Ot.label||"",Ot.search||""].join("---").toLowerCase();return dt.toLowerCase().split(/\s/g).every(Ve=>un.includes(Ve))}):Mt,[he]),[Ee,De]=ur(we(z,Oe)),[Be,He]=ur(Ee[0]),rt=sl(Mt=>{Be&&Mt.includes(Be)||He(Mt[0]),De(Mt)},[Be,De,He]);Md(()=>{rt(we(z,Oe))},[Oe,z]),Md(()=>{const Mt=dt=>{if("Escape"===dt.key)return dt.preventDefault(),o()};return document.documentElement.addEventListener("keydown",Mt),()=>{document.documentElement.removeEventListener("keydown",Mt)}},[]),yr(()=>{me.current&&me.current.focus()},[]);const qe=sl(Mt=>{let dt=Ee.indexOf(Be)+Mt;dt<0&&(dt=Ee.length-1),dt>=Ee.length&&(dt=0),He(Ee[dt])},[Ee,Be,He]),nt=sl(Mt=>"Enter"===Mt.key&&Be?a(Mt,Be):"ArrowUp"===Mt.key||"Tab"===Mt.key&&Mt.shiftKey?(qe(-1),Mt.preventDefault()):"ArrowDown"===Mt.key||"Tab"===Mt.key?(qe(1),Mt.preventDefault()):void 0,[a,o,Be,qe]),gt=sl(Mt=>{de(Mt.target,"input")&&Pe(()=>Mt.target.value)},[Pe]);Md(()=>(te(),()=>{le()}),[]);const qt=Fu(()=>A||d.length>0,[A,d]);return zi`
    <${vm}
      onClose=${o}
      onKeyup=${gt}
      onKeydown=${nt}
      className=${l}
      position=${b}
      width=${E}
      scale=${$}
    >
      ${qt&&zi`
        <div class="djs-popup-header">
          <h3 class="djs-popup-title" title=${A}>${A}</h3>
          ${d.map(Mt=>{return zi`
            <span
              class=${dt=Mt,Ot=Mt===Be,Wu("entry",dt.className,dt.active?"active":"",dt.disabled?"disabled":"",Ot?"selected":"")}
              onClick=${dt=>a(dt,Mt)}
              title=${Mt.title||Mt.label}
              data-id=${Mt.id}
              onMouseEnter=${()=>He(Mt)}
              onMouseLeave=${()=>He(null)}
            >
              ${Mt.imageUrl?zi`
                <img class="djs-popup-entry-icon" src=${Mt.imageUrl} alt="" />
              `:null}

              ${Mt.label?zi`
                <span class="djs-popup-label">${Mt.label}</span>
              `:null}
            </span>
          `;var dt,Ot})}
        </div>
      `}
      ${z.length>0&&zi`
        <div class="djs-popup-body">

          ${he&&zi`
          <div class="djs-popup-search">
            <svg class="djs-popup-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
            </svg>
            <input
                ref=${me}
                type="text"
              />
          </div>
          `}

          <${jC}
            entries=${Ee}
            selectedEntry=${Be}
            setSelectedEntry=${He}
            onAction=${a}
          />
        </div>
        ${0===Ee.length&&zi`
          <div class="djs-popup-no-results">No matching entries found.</div>
        `}
      `}
    </${vm}>
  `}function vm(n){const{onClose:o,onKeydown:a,onKeyup:l,className:d,children:b,position:A}=n,E=Ui(),$=sl(W=>{_e(W.target,".djs-popup",!0)||o()},[o]);return yr(()=>{if("function"!=typeof A)return;const W=E.current,z=A(W);W.style.left=`${z.x}px`,W.style.top=`${z.y}px`},[E.current,A]),yr(()=>{E.current&&E.current.focus()},[]),zi`
    <div
      class="djs-popup-backdrop"
      onClick=${$}
    >
      <div
        class=${Wu("djs-popup",d)}
        style=${W=n,{transform:`scale(${W.scale})`,width:`${W.width}px`}}
        onKeydown=${a}
        onKeyup=${l}
        ref=${E}
        tabIndex="-1"
      >
        ${b}
      </div>
    </div>
  `;var W}var ym=["contextPad.close","canvas.viewbox.changing","commandStack.changed"];function xi(n,o,a){this._eventBus=o,this._canvas=a,this._current=null;var l=Z(n&&n.scale)?n.scale:{min:1,max:1.5};this._config={scale:l},o.on("diagram.destroy",()=>{this.close()}),o.on("element.changed",d=>{const b=this.isOpen()&&this._current.element;d.element===b&&this._render()})}xi.$inject=["config.popupMenu","eventBus","canvas"],xi.prototype._render=function(){const{position:n,className:o,entries:a,headerEntries:l,options:d}=this._current,b=Object.entries(a).map(([W,z])=>({id:W,...z})),A=Object.entries(l).map(([W,z])=>({id:W,...z})),E=n&&(W=>this._ensureVisible(W,n)),$=this._updateScale(this._current.container);lm(zi`
      <${Fd}
        onClose=${W=>this.close(W)}
        onSelect=${(W,z,te)=>this.trigger(W,z,te)}
        position=${E}
        className=${o}
        entries=${b}
        headerEntries=${A}
        scale=${$}
        onOpened=${this._onOpened.bind(this)}
        onClosed=${this._onClosed.bind(this)}
        ...${{...d}}
      />
    `,this._current.container)},xi.prototype.open=function(n,o,a,l){if(!n)throw new Error("Element is missing");if(!o)throw new Error("No registered providers for: "+o);if(!a)throw new Error("the position argument is missing");this.isOpen()&&this.close();const{entries:d,headerEntries:b}=this._getContext(n,o);this._current={position:a,className:o,element:n,entries:d,headerEntries:b,container:this._createContainer({provider:o}),options:l},this._emit("open"),this._bindAutoClose(),this._render()},xi.prototype._getContext=function(n,o){const a=this._getProviders(o);if(!a||!a.length)throw new Error("No registered providers for: "+o);const l=this._getEntries(n,a),d=this._getHeaderEntries(n,a);return{entries:l,headerEntries:d,empty:!(Object.keys(l).length||Object.keys(d).length)}},xi.prototype.close=function(){this.isOpen()&&(this._emit("close"),this.reset(),this._current=null)},xi.prototype.reset=function(){const n=this._current.container;lm(null,n),Wt(n)},xi.prototype._emit=function(n,o){this._eventBus.fire(`popupMenu.${n}`,o)},xi.prototype._onOpened=function(){this._emit("opened")},xi.prototype._onClosed=function(){this._emit("closed")},xi.prototype._createContainer=function(n){var o=this._canvas.getContainer();const a=vt(`<div class="djs-popup-parent djs-scrollable" data-popup=${n.provider}></div>`);return o.appendChild(a),a},xi.prototype._bindAutoClose=function(){this._eventBus.once(ym,this.close,this)},xi.prototype._unbindAutoClose=function(){this._eventBus.off(ym,this.close,this)},xi.prototype._updateScale=function(n){var o,a,l=this._canvas.zoom(),d=this._config.scale,b=l;return!0!==d&&(!1===d?(o=1,a=1):(o=d.min,a=d.max),Z(o)&&l<o&&(b=o),Z(a)&&l>a&&(b=a)),b},xi.prototype._ensureVisible=function(n,o){var a=document.documentElement.getBoundingClientRect(),l=n.getBoundingClientRect(),d={},b=o.x,A=o.y;return o.x+l.width>a.width&&(d.x=!0),o.y+l.height>a.height&&(d.y=!0),d.x&&d.y?(b=o.x-l.width,A=o.y-l.height):d.x?(b=o.x-l.width,A=o.y):d.y&&o.y<l.height?(b=o.x,A=10):d.y&&(b=o.x,A=o.y-l.height),{x:b,y:A}},xi.prototype.isEmpty=function(n,o){if(!n)throw new Error("element parameter is missing");if(!o)throw new Error("providerId parameter is missing");const a=this._getProviders(o);return!a||!a.length||this._getContext(n,o).empty},xi.prototype.registerProvider=function(n,o,a){a||(a=o,o=1e3),this._eventBus.on("popupMenu.getProviders."+n,o,function(l){l.providers.push(a)})},xi.prototype._getProviders=function(n){var o=this._eventBus.createEvent({type:"popupMenu.getProviders."+n,providers:[]});return this._eventBus.fire(o),o.providers},xi.prototype._getEntries=function(n,o){var a={};return p(o,function(l){if(l.getPopupMenuEntries){var d=l.getPopupMenuEntries(n);_(d)?a=d(a):p(d,function(b,A){a[A]=b})}else p(l.getEntries(n),function(b){var A=b.id;if(!A)throw new Error("every entry must have the id property set");a[A]=ue(b,["id"])})}),a},xi.prototype._getHeaderEntries=function(n,o){var a={};return p(o,function(l){if(l.getPopupMenuHeaderEntries){var d=l.getPopupMenuHeaderEntries(n);_(d)?a=d(a):p(d,function(b,A){a[A]=b})}else{if(!l.getHeaderEntries)return;p(l.getHeaderEntries(n),function(b){var A=b.id;if(!A)throw new Error("every entry must have the id property set");a[A]=ue(b,["id"])})}}),a},xi.prototype.isOpen=function(){return!!this._current},xi.prototype.trigger=function(n,o,a="click"){if(n.preventDefault(),!o){let d=pe(_e(n.delegateTarget||n.target,".entry",!0),"data-id");o=this._getEntry(d)}const l=o.action;if(_(l)){if("click"===a)return l(n,o)}else if(l[a])return l[a](n,o)},xi.prototype._getEntry=function(n){var o=this._current.entries[n]||this._current.headerEntries[n];if(!o)throw new Error("entry not found");return o};var Gu={__init__:["popupMenu"],popupMenu:["type",xi]},Ny={align:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%202000%202000%22%3E%3Cpath%20style%3D%22stroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linecap%3Around%22%20d%3D%22M200%20150v1700%22%2F%3E%3Crect%20x%3D%22500%22%20y%3D%22150%22%20width%3D%221300%22%20height%3D%22700%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%22500%22%20y%3D%221150%22%20width%3D%22700%22%20height%3D%22700%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E",bottom:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201800%201800%22%3E%3Cpath%20style%3D%22stroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linecap%3Around%22%20d%3D%22M150%201650h1500%22%2F%3E%3Crect%20x%3D%22150%22%20y%3D%22350%22%20width%3D%22600%22%20height%3D%221300%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%221050%22%20y%3D%22850%22%20width%3D%22600%22%20height%3D%22800%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E",center:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201800%201800%22%3E%3Cpath%20style%3D%22stroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linecap%3Around%22%20d%3D%22M900%20150v1500%22%2F%3E%3Crect%20x%3D%22250%22%20y%3D%22150%22%20width%3D%221300%22%20height%3D%22600%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%22500%22%20y%3D%221050%22%20width%3D%22800%22%20height%3D%22600%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E",left:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201800%201800%22%3E%3Cpath%20style%3D%22stroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linecap%3Around%22%20d%3D%22M100%20150v1500%22%2F%3E%3Crect%20x%3D%22100%22%20y%3D%22150%22%20width%3D%221300%22%20height%3D%22600%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%22100%22%20y%3D%221050%22%20width%3D%22800%22%20height%3D%22600%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E",right:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201800%201800%22%3E%3Cpath%20style%3D%22stroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linecap%3Around%22%20d%3D%22M1650%20150v1500%22%2F%3E%3Crect%20x%3D%22350%22%20y%3D%22150%22%20width%3D%221300%22%20height%3D%22600%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%22850%22%20y%3D%221050%22%20width%3D%22800%22%20height%3D%22600%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E",top:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201800%201800%22%3E%3Cpath%20style%3D%22stroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linecap%3Around%22%20d%3D%22M150%20150h1500%22%2F%3E%3Crect%20x%3D%22150%22%20y%3D%22150%22%20width%3D%22600%22%20height%3D%221300%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%221050%22%20y%3D%22150%22%20width%3D%22600%22%20height%3D%22800%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E",middle:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201800%201800%22%3E%3Cpath%20style%3D%22stroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linecap%3Around%22%20d%3D%22M150%20900h1500%22%2F%3E%3Crect%20x%3D%22150%22%20y%3D%22250%22%20width%3D%22600%22%20height%3D%221300%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%221050%22%20y%3D%22500%22%20width%3D%22600%22%20height%3D%22800%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E"};function ss(n,o,a,l){n.registerProvider(900,this),this._contextPad=n,this._popupMenu=o,this._translate=a,this._canvas=l}ss.$inject=["contextPad","popupMenu","translate","canvas"],ss.prototype.getMultiElementContextPadEntries=function(n){var o={};return this._isAllowed(n)&&N(o,this._getEntries(n)),o},ss.prototype._isAllowed=function(n){return!this._popupMenu.isEmpty(n,"align-elements")},ss.prototype._getEntries=function(n){var o=this;return{"align-elements":{group:"align-elements",title:o._translate("Align elements"),imageUrl:Ny.align,action:{click:function(a,l){var d=o._getMenuPosition(l);N(d,{cursor:{x:a.x,y:a.y}}),o._popupMenu.open(l,"align-elements",d)}}}}},ss.prototype._getMenuPosition=function(n){var o=this._contextPad.getPad(n).html.getBoundingClientRect();return{x:o.left,y:o.bottom+5}};var Wd=["left","center","right","top","middle","bottom"];function al(n,o,a,l){this._alignElements=o,this._translate=a,this._popupMenu=n,this._rules=l,n.registerProvider("align-elements",this)}function br(n){Lt.call(this,n),this.init()}function ju(n){br.call(this,n)}al.$inject=["popupMenu","alignElements","translate","rules"],al.prototype.getPopupMenuEntries=function(n){var o={};return this._isAllowed(n)&&N(o,this._getEntries(n)),o},al.prototype._isAllowed=function(n){return this._rules.allowed("elements.align",{elements:n})},al.prototype._getEntries=function(n){var o=this._alignElements,a=this._translate,l=this._popupMenu,d={};return p(Wd,function(b){d["align-elements-"+b]={group:"align",title:a("Align elements "+b),className:"bjs-align-elements-menu-entry",imageUrl:Ny[b],action:function(A,E){o.trigger(n,b),l.close()}}}),d},br.$inject=["eventBus"],Ce(br,Lt),br.prototype.addRule=function(n,o,a){var l=this;"string"==typeof n&&(n=[n]),n.forEach(function(d){l.canExecute(d,o,function(b,A,E){return a(b)},!0)})},br.prototype.init=function(){},ju.$inject=["eventBus"],Ce(ju,br),ju.prototype.init=function(){this.addRule("elements.align",function(n){var o=w(n.elements,function(a){return!(a.waypoints||a.host||a.labelTarget)});return!((o=Zr(o)).length<2)&&o})};var Ly={__depends__:[BC,Ed,Gu],__init__:["alignElementsContextPadProvider","alignElementsMenuProvider","bpmnAlignElements"],alignElementsContextPadProvider:["type",ss],alignElementsMenuProvider:["type",al],bpmnAlignElements:["type",ju]};function Gd(n,o,a,l){for(var d;d=ZC(n,a,o);)a=l(o,a,d);return a}function Zu(n){return function(o,a,l){var d={x:a.x,y:a.y};return["x","y"].forEach(function(b){var A=n[b];if(A){var E="x"===b?"width":"height",$=A.margin,W=A.minDistance;d[b]=$<0?Math.min(l[b]+$-o[E]/2,a[b]-W+$):Math.max(l[b]+l[E]+$+o[E]/2,a[b]+W+$)}}),d}}function ZC(n,o,a){var b,A,l={x:o.x-a.width/2,y:o.y-a.height/2,width:a.width,height:a.height};return S((A=bm(b=n),b.host&&(A=A.concat(bm(b.host))),b.attachers&&(A=A.concat(b.attachers.reduce(function(E,$){return E.concat(bm($))},[]))),A),function(b){return b!==a&&"intersect"===bi(b,l,10)})}function bm(n){return(o=n,o.outgoing.map(function(a){return a.target})).concat(n.incoming.map(function(l){return l.source}));var o}function Cm(){return!0}function By(n,o,a){n.on("autoPlace",100,function(l){return function(b,A,E){E||(E={});var $=E.defaultDistance||50,W=on(b);return{x:Yt(b).right+$+A.width/2,y:W.y}}(l.source,l.shape)}),n.on("autoPlace.end",function(l){a.scrollToElement(l.shape)}),this.append=function(l,d,b){n.fire("autoPlace.start",{source:l,shape:d});var A=n.fire("autoPlace",{source:l,shape:d}),E=o.appendShape(l,d,A,l.parent,b);return n.fire("autoPlace.end",{source:l,shape:E}),E}}function wm(n,o){n.on("autoPlace.end",500,function(a){o.select(a.shape)})}By.$inject=["eventBus","modeling","canvas"],wm.$inject=["eventBus","selection"];var Dy={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",By],autoPlaceSelectionBehavior:["type",wm]};function jd(n,o){for("string"==typeof o&&(o=[o]);n=n.parent;)if(wn(n,o))return n;return null}function Fy(n,o){return Le(o,"bpmn:TextAnnotation")?(l=o,b={x:(d=Yt(a=n)).right+l.width/2,y:d.top-50-l.height/2},!!a.waypoints&&((b=on(a)).x+=100,b.y-=50),Gd(a,l,b,Zu({y:{margin:-30,minDistance:20}}))):wn(o,["bpmn:DataObjectReference","bpmn:DataStoreReference"])?function(a,l){var d=Yt(a);return Gd(a,l,{x:d.right-10+l.width/2,y:d.bottom+40+l.width/2},Zu({x:{margin:30,minDistance:30}}))}(n,o):Le(o,"bpmn:FlowNode")?function(a,l){var d=Yt(a),b=on(a),A=function(te,le){le||(le={});var he=le.defaultDistance||50,me=le.direction||"e",Oe=le.filter,Pe=le.getWeight||function(qe){return qe.source===te?1:-1},we=le.maxDistance||250,Ee=le.reference||"start";function De(qe,nt){return"n"===me?"start"===Ee?Yt(qe).top-Yt(nt).bottom:"center"===Ee?Yt(qe).top-on(nt).y:Yt(qe).top-Yt(nt).top:"w"===me?"start"===Ee?Yt(qe).left-Yt(nt).right:"center"===Ee?Yt(qe).left-on(nt).x:Yt(qe).left-Yt(nt).left:"s"===me?"start"===Ee?Yt(nt).top-Yt(qe).bottom:"center"===Ee?on(nt).y-Yt(qe).bottom:Yt(nt).bottom-Yt(qe).bottom:"start"===Ee?Yt(nt).left-Yt(qe).right:"center"===Ee?on(nt).x-Yt(qe).right:Yt(nt).right-Yt(qe).right}Oe||(Oe=Cm);var Be=te.incoming.filter(Oe).map(function(qe){var nt=Pe(qe),gt=nt<0?De(qe.source,te):De(te,qe.source);return{id:qe.source.id,distance:gt,weight:nt}}),He=te.outgoing.filter(Oe).map(function(qe){var nt=Pe(qe),gt=nt>0?De(te,qe.target):De(qe.target,te);return{id:qe.target.id,distance:gt,weight:nt}});return m(Be.concat(He).reduce(function(qe,nt){return qe[nt.id+"__weight_"+nt.weight]=nt,qe},{}),function(qe,nt){var gt=nt.distance,qt=nt.weight;return gt<0||gt>we||(qe[String(gt)]||(qe[String(gt)]=0),qe[String(gt)]+=1*qt,(!qe.distance||qe[qe.distance]<qe[String(gt)])&&(qe.distance=gt)),qe},{}).distance||he}(a,{filter:function(te){return Le(te,"bpmn:SequenceFlow")}}),E=30,W="left";return Le(a,"bpmn:BoundaryEvent")&&-1!==(W=bi(a,a.host,-25)).indexOf("top")&&(E*=-1),Gd(a,l,{x:d.right+A+l.width/2,y:b.y+VC(W,80)},Zu({y:{margin:E,minDistance:80}}))}(n,o):void 0;var a,l,d,b}function VC(n,o){return-1!=n.indexOf("top")?-1*o:-1!=n.indexOf("bottom")?o:0}function Wy(n){n.on("autoPlace",function(o){return Fy(o.source,o.shape)})}Wy.$inject=["eventBus"];var $n={__depends__:[Dy],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",Wy]};function Ms(n,o,a,l){Lt.call(this,n),this._elementRegistry=o,this._modeling=a,this._rules=l;var d=this;this.postExecuted(["shape.create"],function(b){var A=b.context;!1!==(A.hints||{}).autoResize&&d._expand([A.shape],A.parent||A.newParent)}),this.postExecuted(["elements.move"],function(b){var A=b.context,E=ce(x(A.closure.topLevel)),$=A.hints,W=!$||$.autoResize;!1!==W&&p(L(E,function(z){return z.parent.id}),function(z,te){H(W)&&(z=z.filter(function(le){return S(W,V({id:le.id}))})),d._expand(z,te)})}),this.postExecuted(["shape.toggleCollapse"],function(b){var A=b.context,E=A.hints,$=A.shape;E&&!1===E.autoResize||$.collapsed||d._expand($.children||[],$)}),this.postExecuted(["shape.resize"],function(b){var A=b.context,E=A.hints,$=A.shape,W=$.parent;E&&!1===E.autoResize||W&&d._expand([$],W)})}function Vu(n){n.invoke(Ms,this)}function pa(n){br.call(this,n);var o=this;this.addRule("element.autoResize",function(a){return o.canResize(a.elements,a.target)})}function Qu(n,o){pa.call(this,n),this._modeling=o}Ms.$inject=["eventBus","elementRegistry","modeling","rules"],Ce(Ms,Lt),Ms.prototype._getOptimalBounds=function(n,o){var a=this.getOffset(o),l=this.getPadding(o),d=Yt(qn(n)),b=Yt(o),A={};return d.top-b.top<l.top&&(A.top=d.top-a.top),d.left-b.left<l.left&&(A.left=d.left-a.left),b.right-d.right<l.right&&(A.right=d.right+a.right),b.bottom-d.bottom<l.bottom&&(A.bottom=d.bottom+a.bottom),ja(N({},b,A))},Ms.prototype._expand=function(n,o){if("string"==typeof o&&(o=this._elementRegistry.get(o)),this._rules.allowed("element.autoResize",{elements:n,target:o})){var a=this._getOptimalBounds(n,o);if((b=a).x!==(A=o).x||b.y!==A.y||b.width!==A.width||b.height!==A.height){var l=function(b,A){var E="";return b=Yt(b),A=Yt(A),b.top>A.top&&(E=E.concat("n")),b.right<A.right&&(E=E.concat("w")),b.bottom<A.bottom&&(E=E.concat("s")),b.left>A.left&&(E=E.concat("e")),E}(re(o,["x","y","width","height"]),a);this.resize(o,a,{autoResize:l});var d=o.parent;d&&this._expand([o],d)}}var b,A},Ms.prototype.getOffset=function(n){return{top:60,bottom:60,left:100,right:100}},Ms.prototype.getPadding=function(n){return{top:2,bottom:2,left:15,right:15}},Ms.prototype.resize=function(n,o,a){this._modeling.resizeShape(n,o,null,a)},Vu.$inject=["injector"],Ce(Vu,Ms),Vu.prototype.resize=function(n,o,a){Le(n,"bpmn:Participant")?this._modeling.resizeLane(n,o,null,a):this._modeling.resizeShape(n,o,null,a)},pa.$inject=["eventBus"],Ce(pa,br),pa.prototype.canResize=function(n,o){return!1},Ce(Qu,pa),Qu.$inject=["eventBus","modeling"],Qu.prototype.canResize=function(n,o){if(Le(o.di,"bpmndi:BPMNPlane")||!Le(o,"bpmn:Participant")&&!Le(o,"bpmn:Lane")&&!Le(o,"bpmn:SubProcess"))return!1;var a=!0;return p(n,function(l){(Le(l,"bpmn:Lane")||l.labelTarget)&&(a=!1)}),a};var QC={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",Vu],bpmnAutoResizeProvider:["type",Qu]};function Gy(n,o,a){var l,d,b=this,A=a.get("dragging",!1);A&&o.on("drag.start",function(E){o.once("drag.move",1500,function($){!function(W){if(!W.hover){var z=W.originalEvent,te=b._findTargetGfx(z),le=te&&n.get(te);te&&le&&(W.stopPropagation(),A.hover({element:le,gfx:te}),A.move(z))}}($)})}),o.on("element.hover",function(E){l=E.gfx,d=E.element}),o.on("element.hover",1500,function(E){d&&o.fire("element.out",{element:d,gfx:l})}),o.on("element.out",function(){l=null,d=null}),this._findTargetGfx=function(E){var $;if(E instanceof MouseEvent)return $=Li(E),_e(document.elementFromPoint($.x,$.y),"svg, .djs-element",!0)}}Gy.$inject=["elementRegistry","eventBus","injector"];var xm={__init__:["hoverFix"],hoverFix:["type",Gy]},dc=Math.round,Hu="djs-drag-active";function ma(n){n.preventDefault()}function Am(n,o,a,l){var d,b={threshold:5,trapClick:!0};function A(we){var Ee=o.viewbox(),De=o._container.getBoundingClientRect();return{x:Ee.x+(we.x-De.left)/Ee.scale,y:Ee.y+(we.y-De.top)/Ee.scale}}function E(we,Ee){var De=n.createEvent(N({},(Ee=Ee||d).payload,Ee.data,{isTouch:Ee.isTouch}));return!1!==n.fire("drag."+we,De)&&n.fire(Ee.prefix+"."+we,De)}function $(we,Ee){var De,Be=d.payload,He=d.displacement,rt=d.globalStart,qe=Li(we),nt=Kr(qe,rt),gt=d.localStart,qt=A(qe),Mt=Kr(qt,gt);if(!d.active&&(Ee||(De=nt,Math.sqrt(Math.pow(De.x,2)+Math.pow(De.y,2))>d.threshold))){if(N(Be,{x:dc(gt.x+He.x),y:dc(gt.y+He.y),dx:0,dy:0},{originalEvent:we}),!1===E("start"))return Oe();d.active=!0,d.keepSelection||(Be.previousSelection=a.get(),a.select(null)),d.cursor&&Od(d.cursor),o.addMarker(o.getRootElement(),Hu)}fd(we),d.active&&(N(Be,{x:dc(qt.x+He.x),y:dc(qt.y+He.y),dx:dc(Mt.x),dy:dc(Mt.y)},{originalEvent:we}),E("move"))}function W(we){var Ee=!0;d.active&&(we&&(d.payload.originalEvent=we,fd(we)),Ee=E("end")),!1===Ee&&E("rejected"),E("ended",Pe(!0!==Ee))}function z(we){Ti("Escape",we)&&(ma(we),Oe())}function te(we){var Ee;d.active&&(Ee=Cy(n),setTimeout(Ee,400),ma(we)),W(we)}function le(we){$(we)}function he(we){var Ee=d.payload;Ee.hoverGfx=we.gfx,Ee.hover=we.element,E("hover")}function me(we){E("out");var Ee=d.payload;Ee.hoverGfx=null,Ee.hover=null}function Oe(we){var Ee;if(d){var De=d.active;De&&E("cancel"),Ee=Pe(we),De&&E("canceled",Ee)}}function Pe(we){var Ee,De;E("cleanup"),Hp(),De=d.trapClick?te:W,ct.unbind(document,"mousemove",$),ct.unbind(document,"dragstart",ma),ct.unbind(document,"selectstart",ma),ct.unbind(document,"mousedown",De,!0),ct.unbind(document,"mouseup",De,!0),ct.unbind(document,"keyup",z),ct.unbind(document,"touchstart",le,!0),ct.unbind(document,"touchcancel",Oe,!0),ct.unbind(document,"touchmove",$,!0),ct.unbind(document,"touchend",W,!0),n.off("element.hover",he),n.off("element.out",me),o.removeMarker(o.getRootElement(),Hu);var rt,Be=d.payload.previousSelection;return!1!==we&&Be&&!a.get().length&&(rt=Be.filter(function(qe){return l.get(qe.id)})).length&&a.select(rt),Ee=d,d=null,Ee}n.on("diagram.destroy",Oe),this.init=function(we,Ee,De,Be){d&&Oe(!1),"string"==typeof Ee&&(Be=De,De=Ee,Ee=null);var He,rt,qe,nt,gt,qt=(Be=N({},b,Be||{})).data||{};nt=Be.trapClick?te:W,we?(He=qa(we)||we,rt=Li(we),fd(we),"dragstart"===He.type&&ma(He)):(He=null,rt={x:0,y:0}),qe=A(rt),Ee||(Ee=qe),gt=typeof TouchEvent<"u"&&He instanceof TouchEvent,d=N({prefix:De,data:qt,payload:{},globalStart:rt,displacement:Kr(Ee,qe),localStart:qe,isTouch:gt},Be),Be.manual||(gt?(ct.bind(document,"touchstart",le,!0),ct.bind(document,"touchcancel",Oe,!0),ct.bind(document,"touchmove",$,!0),ct.bind(document,"touchend",W,!0)):(ct.bind(document,"mousemove",$),ct.bind(document,"dragstart",ma),ct.bind(document,"selectstart",ma),ct.bind(document,"mousedown",nt,!0),ct.bind(document,"mouseup",nt,!0)),ct.bind(document,"keyup",z),n.on("element.hover",he),n.on("element.out",me)),E("init"),Be.autoActivate&&$(we,!0)},this.move=$,this.hover=he,this.out=me,this.end=W,this.cancel=Oe,this.context=function(){return d},this.setOptions=function(we){N(b,we)}}Am.$inject=["eventBus","canvas","selection","elementRegistry"];var Ns={__depends__:[xm,Do],dragging:["type",Am]};function Yr(n,o,a){this._canvas=a,this._opts=N({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},n);var l=this;o.on("drag.move",function(d){var b=l._toBorderPoint(d);l.startScroll(b)}),o.on(["drag.cleanup"],function(){l.stopScroll()})}function HC(n,o,a){return o<n&&n<a}Yr.$inject=["config.autoScroll","eventBus","canvas"],Yr.prototype.startScroll=function(n){var o=this._canvas,a=this._opts,l=this,d=o.getContainer().getBoundingClientRect(),b=[n.x,n.y,d.width-n.x,d.height-n.y];this.stopScroll();for(var A=0,E=0,$=0;$<4;$++)HC(b[$],a.scrollThresholdOut[$],a.scrollThresholdIn[$])&&(0===$?A=a.scrollStep:1==$?E=a.scrollStep:2==$?A=-a.scrollStep:3==$&&(E=-a.scrollStep));0===A&&0===E||(o.scroll({dx:A,dy:E}),this._scrolling=setTimeout(function(){l.startScroll(n)},a.scrollRepeatTimeout))},Yr.prototype.stopScroll=function(){clearTimeout(this._scrolling)},Yr.prototype.setOptions=function(n){this._opts=N({},this._opts,n)},Yr.prototype._toBorderPoint=function(n){var o=this._canvas._container.getBoundingClientRect(),a=Li(n.originalEvent);return{x:a.x-o.left,y:a.y-o.top}};var zC={__depends__:[Ns],__init__:["autoScroll"],autoScroll:["type",Yr]};function Zd(n){this._commandStack=n.get("commandStack",!1)}Zd.$inject=["injector"],Zd.prototype.allowed=function(n,o){var a=!0,l=this._commandStack;return l&&(a=l.canExecute(n,o)),void 0===a||a};var Zo={__init__:["rules"],rules:["type",Zd]},ga=Math.round,UC=Math.max;function Vd(n,o){return function(a,l){var d,b;for(d=0;b=a[d];d++)if(ho(b,l)<=10)return{point:a[d],bendpoint:!0,index:d};return null}(n,o)||($=(A=ys([["M",(W=o).x,W.y],["m",0,-(z=10)],["a",z,z,0,1,1,0,20],["a",z,z,0,1,1,0,-20],["z"]],(d=[],(a=n).forEach(function(W,z){d.push([0===z?"M":"L",W.x,W.y])}),d)))[A.length-1],(E=A[0])?E!==$?E.segment2!==$.segment2?{point:a[b=UC(E.segment2,$.segment2)-1],bendpoint:!0,index:b}:{point:{x:ga(E.x+$.x)/2,y:ga(E.y+$.y)/2},index:E.segment2}:{point:{x:ga(E.x),y:ga(E.y)},index:E.segment2}:null);var a,d,b,W,z,A,E,$}function jy(n){return Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2))}function Om(n){return Math.atan((n[1].y-n[0].y)/(n[1].x-n[0].x))}function Im(n,o){var A,E,$,W,a=o[0],l=o[1],d={x:l.x-a.x,y:l.y-a.y},b=-((W=[{n:(A=[a.x,a.y])[0]-($=[n.x,n.y])[0],lambda:(E=[d.x,d.y])[0]},{n:A[1]-$[1],lambda:E[1]}])[0].n*E[0]+W[1].n*E[1])/(W[0].lambda*E[0]+W[1].lambda*E[1]);return{x:a.x+b*d.x,y:a.y+b*d.y}}function _m(n,o){var a=Im(n,o);return jy({x:a.x-n.x,y:a.y-n.y})}function zu(n,o){return jy({x:n.x-o.x,y:n.y-o.y})}var Zy="djs-bendpoint",XC="djs-segment-dragger";function Sm(n,o,a){return Vd(o,function(d,b){var A,E=Li(b),$=d._container.getBoundingClientRect();A={x:$.left,y:$.top};var W=d.viewbox();return{x:W.x+(E.x-A.x)/W.scale,y:W.y+(E.y-A.y)/W.scale}}(n,a))}function Qd(n,o){var a=jt("g");Fe(a).add(Zy),Ze(n,a);var l=jt("circle");yt(l,{cx:0,cy:0,r:4}),Fe(l).add("djs-visual"),Ze(a,l);var d=jt("circle");return yt(d,{cx:0,cy:0,r:10}),Fe(d).add("djs-hit"),Ze(a,d),o&&Fe(a).add(o),a}function Vy(n,o,a){var l=jt("g"),d=Vl(o,a),b=Ar(o,a);return Ze(n,l),function Uu(n,o,a,l){var d=jt("g");Ze(n,d);var $,W,b=($=o,W=a,Qy("h"===l?W.x-$.x:W.y-$.y)),A=jt("rect");yt(A,{x:-9,y:-3,width:18,height:6}),Fe(A).add("djs-visual"),Ze(d,A);var E=jt("rect");return yt(E,{x:-b/2,y:-8.5,width:b,height:17}),Fe(E).add("djs-hit"),Ze(d,E),ey(d,"v"===l?90:0),d}(l,o,a,b),Fe(l).add(XC),Fe(l).add("h"===b?"horizontal":"vertical"),Br(l,d.x,d.y),l}function Qy(n){return Math.abs(Math.round(2*n/3))}function zy(n,o,a,l,d){function A(me,Oe,Pe){ct.bind(me,Oe,function(we){a.triggerMouseEvent(Oe,we,Pe),we.stopPropagation()})}function E(me,Oe){var Pe=o.getLayer("overlays"),we=wt('.djs-bendpoints[data-element-id="'+ha(me.id)+'"]',Pe);return!we&&Oe&&(yt(we=jt("g"),{"data-element-id":me.id}),Fe(we).add("djs-bendpoints"),Ze(Pe,we),A(we,"mousedown",me),A(we,"click",me),A(we,"dblclick",me)),we}function $(me,Oe){return wt('.djs-segment-dragger[data-segment-idx="'+me+'"]',Oe)}function W(me,Oe){Oe.waypoints.forEach(function(Pe,we){var Ee=Qd(me);Ze(me,Ee),Br(Ee,Pe.x,Pe.y)}),Qd(me,"floating")}function z(me,Oe){for(var Pe,we,Ee,De=Oe.waypoints,Be=1;Be<De.length;Be++)Ar(Pe=De[Be-1],we=De[Be])&&(yt(Ee=Vy(me,Pe,we),{"data-segment-idx":Be}),A(Ee,"mousemove",Oe))}function te(me){var Oe=E(me);return Oe||(W(Oe=E(me,!0),me),z(Oe,me)),Oe}function le(me){var Oe=E(me);Oe&&(p(Gt(".djs-segment-dragger",Oe),function(we){ot(we)}),p(Gt(".djs-bendpoint",Oe),function(we){ot(we)}),z(Oe,me),W(Oe,me))}n.on("connection.changed",function(me){le(me.element)}),n.on("connection.remove",function(me){var Oe=E(me.element);Oe&&ot(Oe)}),n.on("element.marker.update",function(me){var Oe,Pe=me.element;Pe.waypoints&&(Oe=te(Pe),me.add?Fe(Oe).add(me.marker):Fe(Oe).remove(me.marker))}),n.on("element.mousemove",function(me){var Oe,Pe,Be,He,rt,we=me.element,Ee=we.waypoints;if(Ee){if(Oe=E(we,!0),!(Pe=Sm(o,Ee,me.originalEvent)))return;Be=Pe,He=wt(".floating",Oe),rt=Be.point,He&&Br(He,rt.x,rt.y),Pe.bendpoint||function he(me,Oe,Pe){var we,Ee,De=$(Oe.index,me),Be=Pe[Oe.index-1],He=Pe[Oe.index],rt=Oe.point,qe=Vl(Be,He),nt=Ar(Be,He);De&&(we=wt(".djs-visual",De),Ee={x:rt.x-qe.x,y:rt.y-qe.y},"v"===nt&&(Ee={x:Ee.y,y:Ee.x}),Br(we,Ee.x,Ee.y))}(Oe,Pe,Ee)}}),n.on("element.mousedown",function(me){if(is(me)){var Pe=me.element;if(Pe.waypoints)return function b(me,Oe){var Be,He,rt,qe,we=Oe.waypoints,Ee=Sm(o,we,me);if(Ee)return qe=Oe.waypoints,function(De,Be,He){var rt,qe,nt,gt,qt,Mt,dt=De.index,Ot=De.point;return!(dt<=0||De.bendpoint)&&(nt=Vl(rt=Be[dt-1],qe=Be[dt]),gt=Ar(rt,qe),qt=Math.abs(Ot.x-nt.x),Mt=Math.abs(Ot.y-nt.y),gt&&qt<=He&&Mt<=He)}(Ee,we,(Be=Ee).index<=0||Be.bendpoint?null:(rt=Ar((He={start:qe[Be.index-1],end:qe[Be.index]}).start,He.end))?Qy("h"===rt?He.end.x-He.start.x:He.end.y-He.start.y)/2:null)?d.start(me,Oe,Ee.index):l.start(me,Oe,Ee.index,!Ee.bendpoint),!0}(me.originalEvent,Pe)}}),n.on("selection.changed",function(me){var Oe=me.newSelection[0];Oe&&Oe.waypoints&&te(Oe)}),n.on("element.hover",function(me){var Oe=me.element;Oe.waypoints&&(te(Oe),a.registerEvent(me.gfx,"mousemove","element.mousemove"))}),n.on("element.out",function(me){a.unregisterEvent(me.gfx,"mousemove","element.mousemove")}),n.on("element.updateId",function(me){var Oe=me.element,Pe=me.newId;if(Oe.waypoints){var we=E(Oe);we&&yt(we,{"data-element-id":Pe})}}),this.addHandles=te,this.updateHandles=le,this.getBendpointsContainer=E,this.getSegmentDragger=$}zy.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];var Uy=Math.round,Ls="reconnectStart",ll="reconnectEnd",Xu="updateWaypoints";function Ku(n,o,a,l,d,b){this._injector=n,this.start=function(A,E,$,W){var z,te=a.getGraphics(E),le=E.source,he=E.target,Oe=(z=W||0!==$?W||$!==E.waypoints.length-1?Xu:ll:Ls)===Xu?"connection.updateWaypoints":"connection.reconnect",Pe=d.allowed(Oe,{connection:E,source:le,target:he});!1===Pe&&(Pe=d.allowed(Oe,{connection:E,source:he,target:le})),!1!==Pe&&l.init(A,"bendpoint.move",{data:{connection:E,connectionGfx:te,context:{allowed:Pe,bendpointIndex:$,connection:E,source:le,target:he,insert:W,type:z}}})},o.on("bendpoint.move.hover",function(A){var E,$=A.context,W=$.connection,z=W.source,te=W.target,le=A.hover,he=$.type;if($.hover=le,le){var me=he===Xu?"connection.updateWaypoints":"connection.reconnect";if(E=$.allowed=d.allowed(me,{connection:W,source:he===Ls?le:z,target:he===ll?le:te}))return $.source=he===Ls?le:z,void($.target=he===ll?le:te);!1===E&&(E=$.allowed=d.allowed(me,{connection:W,source:he===ll?le:te,target:he===Ls?le:z})),E&&($.source=he===ll?le:te,$.target=he===Ls?le:z)}}),o.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(A){var E=A.context,$=E.type;E.hover=null,E.source=null,E.target=null,$!==Xu&&(E.allowed=!1)}),o.on("bendpoint.move.end",function(A){var E=A.context,$=E.allowed,W=E.bendpointIndex,z=E.connection,te=E.insert,le=z.waypoints.slice(),he=E.source,me=E.target,Oe=E.type,Pe=E.hints||{},we={x:Uy(A.x),y:Uy(A.y)};if(!$)return!1;Oe===Xu?(te?le.splice(W,0,we):le[W]=we,Pe.bendpointMove={insert:te,bendpointIndex:W},le=this.cropWaypoints(z,le),b.updateWaypoints(z,function(Ee){Ee=Ee.slice();for(var De,Be,He,rt=0;Ee[rt];)Be=Ee[rt-1],0===ho(De=Ee[rt],He=Ee[rt+1])||tu(Be,He,De)?Ee.splice(rt,1):rt++;return Ee}(le),Pe)):(Oe===Ls?(Pe.docking="source",Hd(E)&&(Pe.docking="target",Pe.newWaypoints=le.reverse())):Oe===ll&&(Pe.docking="target",Hd(E)&&(Pe.docking="source",Pe.newWaypoints=le.reverse())),b.reconnect(z,he,me,we,Pe))},this)}function Hd(n){var o=n.hover,a=n.source,l=n.target,d=n.type;return d===Ls?o&&l&&o===l&&a!==l:d===ll?o&&a&&o===a&&a!==l:void 0}Ku.$inject=["injector","eventBus","canvas","dragging","rules","modeling"],Ku.prototype.cropWaypoints=function(n,o){var a=this._injector.get("connectionDocking",!1);if(!a)return o;var l=n.waypoints;return n.waypoints=o,n.waypoints=a.getCroppedWaypoints(n),o=n.waypoints,n.waypoints=l,o};var Yu="updateWaypoints",qu="connect-ok",Ju="connect-not-ok",Xy="connect-hover",Ky="djs-updating",Yy="djs-element-hidden";function qy(n,o,a,l){this._injector=o;var d=o.get("connectionPreview",!1);a.on("bendpoint.move.start",function(b){var A=b.context,E=A.bendpointIndex,$=A.connection,W=A.insert,z=$.waypoints,te=z.slice();A.waypoints=z,W&&te.splice(E,0,{x:b.x,y:b.y}),$.waypoints=te,Fe(A.draggerGfx=Qd(l.getLayer("overlays"))).add("djs-dragging"),l.addMarker($,Yy),l.addMarker($,Ky)}),a.on("bendpoint.move.hover",function(b){var A=b.context,E=A.allowed,$=A.hover,W=A.type;if($){if(l.addMarker($,Xy),W===Yu)return;E?(l.removeMarker($,Ju),l.addMarker($,qu)):!1===E&&(l.removeMarker($,qu),l.addMarker($,Ju))}}),a.on(["bendpoint.move.out","bendpoint.move.cleanup"],1100,function(b){var A=b.context,E=A.hover,$=A.target;E&&(l.removeMarker(E,Xy),l.removeMarker(E,$?qu:Ju))}),a.on("bendpoint.move.move",function(b){var A=b.context,E=A.allowed,$=A.bendpointIndex,W=A.draggerGfx,z=A.hover,te=A.type,le=A.connection,he=le.source,me=le.target,Oe=le.waypoints.slice(),Pe={x:b.x,y:b.y},we=A.hints||{},Ee={};d&&(we.connectionStart&&(Ee.connectionStart=we.connectionStart),we.connectionEnd&&(Ee.connectionEnd=we.connectionEnd),"reconnectStart"===te?Hd(A)?(Ee.connectionEnd=Ee.connectionEnd||Pe,Ee.source=me,Ee.target=z||he,Oe=Oe.reverse()):(Ee.connectionStart=Ee.connectionStart||Pe,Ee.source=z||he,Ee.target=me):"reconnectEnd"===te?Hd(A)?(Ee.connectionStart=Ee.connectionStart||Pe,Ee.source=z||me,Ee.target=he,Oe=Oe.reverse()):(Ee.connectionEnd=Ee.connectionEnd||Pe,Ee.source=he,Ee.target=z||me):(Ee.noCropping=!0,Ee.noLayout=!0,Oe[$]=Pe),te===Yu&&(Oe=n.cropWaypoints(le,Oe)),Ee.waypoints=Oe,d.drawPreview(A,E,Ee)),Br(W,b.x,b.y)},this),a.on(["bendpoint.move.end","bendpoint.move.cancel"],1100,function(b){var A=b.context,E=A.connection,$=A.draggerGfx,W=A.hover,z=A.target;E.waypoints=A.waypoints,ot($),l.removeMarker(E,Ky),l.removeMarker(E,Yy),W&&(l.removeMarker(W,qu),l.removeMarker(W,z?qu:Ju)),d&&d.cleanUp(A)})}qy.$inject=["bendpointMove","injector","eventBus","canvas"];var Jy="connect-hover",Em="djs-updating";function KC(n,o,a){return km(n,o,n[o]+a)}function km(n,o,a){return{x:"x"===o?a:n.x,y:"y"===o?a:n.y}}function e0(n){return"x"===n?"y":"x"}function t0(n,o,a){var l,d;return n.original?n.original:(l=on(o),km(n,d=e0(a),l[d]))}function n0(n,o,a,l,d,b){var A=n.get("connectionDocking",!1);function E(z,te){if(!A)return te;var le,he=z.waypoints;return z.waypoints=te,le=A.getCroppedWaypoints(z),z.waypoints=he,le}function $(z){d.update("connection",z.connection,z.connectionGfx)}this.start=function(z,te,le){var he,me,Oe,Pe,we=a.getGraphics(te),Ee=le-1,De=le,Be=te.waypoints,He=Be[Ee],rt=Be[De],qe=Sm(a,Be,z);(me=Ar(He,rt))&&(Oe="v"===me?"x":"y",0===Ee&&(He=t0(He,te.source,Oe)),De===Be.length-1&&(rt=t0(rt,te.target,Oe)),he={connection:te,segmentStartIndex:Ee,segmentEndIndex:De,segmentStart:He,segmentEnd:rt,axis:Oe,dragPosition:Pe=qe?qe.point:{x:(He.x+rt.x)/2,y:(He.y+rt.y)/2}},l.init(z,Pe,"connectionSegment.move",{cursor:"x"===Oe?"resize-ew":"resize-ns",data:{connection:te,connectionGfx:we,context:he}}))},o.on("connectionSegment.move.start",function(z){var te=z.context,le=z.connection,he=a.getLayer("overlays");te.originalWaypoints=le.waypoints.slice(),te.draggerGfx=Vy(he,te.segmentStart,te.segmentEnd),Fe(te.draggerGfx).add("djs-dragging"),a.addMarker(le,Em)}),o.on("connectionSegment.move.move",function(z){var te,le,he=z.context,me=he.connection,Oe=he.segmentStartIndex,Pe=he.segmentEndIndex,we=he.segmentStart,Ee=he.segmentEnd,De=he.axis,Be=he.originalWaypoints.slice(),He=KC(we,De,z["d"+De]),rt=KC(Ee,De,z["d"+De]),qe=Be.length,nt=0;Be[Oe]=He,Be[Pe]=rt,Oe<2&&(te=bi(me.source,He),1===Oe?"intersect"===te&&(Be.shift(),Be[0]=He,nt--):"intersect"!==te&&(Be.unshift(we),nt++)),Pe>qe-3&&(le=bi(me.target,rt),Pe===qe-2?"intersect"===le&&(Be.pop(),Be[Be.length-1]=rt):"intersect"!==le&&Be.push(Ee)),he.newWaypoints=me.waypoints=E(me,Be),function W(z,te,le){var Oe,Pe,we,Ee,De,Be,he=z.newWaypoints,me=(Oe=le,Pe=he[z.segmentStartIndex+te],we=he[z.segmentEndIndex+te],Ee=e0(z.axis),De=Math.max(Pe[Ee],we[Ee]),Be=Math.min(Pe[Ee],we[Ee]),km(Pe,Ee,Math.min(Math.max(Be+20,Oe[Ee]),De-20)));Br(z.draggerGfx,me.x,me.y)}(he,nt,z),he.newSegmentStartIndex=Oe+nt,$(z)}),o.on("connectionSegment.move.hover",function(z){z.context.hover=z.hover,a.addMarker(z.hover,Jy)}),o.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(z){var te=z.context.hover;te&&a.removeMarker(te,Jy)}),o.on("connectionSegment.move.cleanup",function(z){var te=z.context,le=te.connection;te.draggerGfx&&ot(te.draggerGfx),a.removeMarker(le,Em)}),o.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(z){var te=z.context;te.connection.waypoints=te.originalWaypoints,$(z)}),o.on("connectionSegment.move.end",function(z){var te=z.context,le=te.connection,he=te.newWaypoints,me=te.newSegmentStartIndex;he=he.map(function(De){return{original:De.original,x:Math.round(De.x),y:Math.round(De.y)}});var De,Be,He,Oe=(Be=me,He=0,{waypoints:(De=he).filter(function(qe,nt){return!tu(De[nt-1],De[nt+1],qe)||(He=nt<=Be?He-1:He,!1)}),segmentOffset:He}),Pe=E(le,Oe.waypoints);b.updateWaypoints(le,Pe,{segmentMove:{segmentStartIndex:te.segmentStartIndex,newSegmentStartIndex:me+Oe.segmentOffset}})})}n0.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var Tw=Math.abs,zd=Math.round;function r0(n){return{x:n.x,y:n.y}}function o0(n){return{x:n.x+n.width,y:n.y+n.height}}function qr(n,o){return!n||isNaN(n.x)||isNaN(n.y)?o:{x:zd(n.x+n.width/2),y:zd(n.y+n.height/2)}}function fc(n,o){var a=n.snapped;return!!a&&("string"==typeof o?a[o]:a.x&&a.y)}function Ii(n,o,a){if("string"!=typeof o)throw new Error("axis must be in [x, y]");if("number"!=typeof a&&!1!==a)throw new Error("value must be Number or false");var l,d=n[o],b=n.snapped=n.snapped||{};return!1===a?b[o]=!1:(b[o]=!0,n[o]+=l=a-d,n["d"+o]+=l),d}function s0(n){return n.children||[]}var YC=Math.abs,a0=Math.round;function Ud(n){function o(l,d){if(H(l)){for(var b=l.length;b--;)if(YC(l[b]-d)<=10)return l[b]}else{var A=d%(l=+l);if(A<10)return d-A;if(A>l-10)return d-A+l}return d}function a(l,d){return l.waypoints?function Hy(n,o){return Im(n,function(l,d){for(var b,A=d.waypoints,E=1/0,$=0;$<A.length-1;$++){var W=_m(l,[A[$],A[$+1]]);W<E&&(E=W,b=$)}return[A[b],A[b+1]]}(n,o))}(d,l):l.width?{x:a0(l.width/2+l.x),y:a0(l.height/2+l.y)}:void 0}n.on("connectionSegment.move.move",1500,function(l){var d,b,A=function(te){var le=te.context,he=le.snapPoints,me=le.connection,Oe=me.waypoints,we=le.segmentStartIndex,De=le.segmentEndIndex,Be=le.axis;if(he)return he;var He=[Oe[we-1],le.segmentStart,le.segmentEnd,Oe[De+1]];return we<2&&He.unshift(a(me.source,te)),De>Oe.length-3&&He.unshift(a(me.target,te)),le.snapPoints=he={horizontal:[],vertical:[]},p(He,function(rt){rt&&(rt=rt.original||rt,"y"===Be&&he.horizontal.push(rt.y),"x"===Be&&he.vertical.push(rt.x))}),he}(l),E=l.x,$=l.y;if(A){var W=E-(d=o(A.vertical,E)),z=$-(b=o(A.horizontal,$));N(l,{dx:l.dx-W,dy:l.dy-z,x:d,y:b}),(W||-1!==A.vertical.indexOf(E))&&Ii(l,"x",d),(z||-1!==A.horizontal.indexOf($))&&Ii(l,"y",b)}}),n.on(["connect.hover","connect.move","connect.end"],1500,function(l){var d,b=l.context.hover,A=b&&a(b,l);(d=b)&&d.waypoints&&A&&A.x&&A.y&&(Ii(l,"x",A.x),Ii(l,"y",A.y))}),n.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(l){var d,b,A=l.context,E=function(me){var Oe=me.snapPoints,Pe=me.connection.waypoints,we=me.bendpointIndex;if(Oe)return Oe;var Ee=[Pe[we-1],Pe[we+1]];return me.snapPoints=Oe={horizontal:[],vertical:[]},p(Ee,function(De){De&&(Oe.horizontal.push((De=De.original||De).y),Oe.vertical.push(De.x))}),Oe}(A),$=A.hover,W=$&&a($,l),z=l.x,te=l.y;if(E){var le=z-(d=o(W?E.vertical.concat([W.x]):E.vertical,z)),he=te-(b=o(W?E.horizontal.concat([W.y]):E.horizontal,te));N(l,{dx:l.dx-le,dy:l.dy-he,x:l.x-le,y:l.y-he}),(le||-1!==E.vertical.indexOf(z))&&Ii(l,"x",d),(he||-1!==E.horizontal.indexOf(te))&&Ii(l,"y",b)}})}Ud.$inject=["eventBus"];var l0={__depends__:[Ns,Zo],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",zy],bendpointMove:["type",Ku],bendpointMovePreview:["type",qy],connectionSegmentMove:["type",n0],bendpointSnapping:["type",Ud]};function qC(n,o,a,l){function d(b,A){return l.allowed("connection.create",{source:b,target:A})}n.on("connect.hover",function(b){var A,E=b.context,$=E.start,W=b.hover;if(E.hover=W,!Y(A=E.canExecute=d($,W))){if(!1!==A)return E.source=$,void(E.target=W);Y(A=E.canExecute=d(W,$))||!1!==A&&(E.source=W,E.target=$)}}),n.on(["connect.out","connect.cleanup"],function(b){var A=b.context;A.hover=null,A.source=null,A.target=null,A.canExecute=!1}),n.on("connect.end",function(b){var A=b.context,E=A.canExecute,$=A.connectionStart,W={x:b.x,y:b.y},z=A.source,te=A.target;if(!E)return!1;var le=null,he={connectionStart:Tm(A)?W:$,connectionEnd:Tm(A)?$:W};F(E)&&(le=E),A.connection=a.connect(z,te,le,he)}),this.start=function(b,A,E,$){F(E)||($=E,E=on(A)),o.init(b,"connect",{autoActivate:$,data:{shape:A,context:{start:A,connectionStart:E}}})}}function Tm(n){var o=n.hover,a=n.source;return o&&a&&o===a&&a!==n.target}qC.$inject=["eventBus","dragging","modeling","rules"];var eh="connect-ok",Xd="connect-not-ok";function c0(n,o,a){var l=n.get("connectionPreview",!1);l&&o.on("connect.move",function(d){var b=d.context,A=b.canExecute,E=b.hover,$=b.source,W=b.start,te=b.target,le=b.connectionStart||b.startPosition,he=b.connectionEnd||{x:d.x,y:d.y},me=le,Oe=he;Tm(b)&&(me=he,Oe=le),l.drawPreview(b,A,{source:$||W,target:te||E,connectionStart:me,connectionEnd:Oe})}),o.on("connect.hover",900,function(d){var E=d.context.canExecute;null!==E&&a.addMarker(d.hover,E?eh:Xd)}),o.on(["connect.out","connect.cleanup"],1100,function(d){var b=d.hover;b&&(a.removeMarker(b,eh),a.removeMarker(b,Xd))}),l&&o.on("connect.cleanup",function(d){l.cleanUp(d.context)})}c0.$inject=["injector","eventBus","canvas"];var Pm={__depends__:[Do,Zo,Ns],__init__:["connectPreview"],connect:["type",qC],connectPreview:["type",c0]};function yo(n,o,a,l){this._canvas=o,this._graphicsFactory=a,this._elementFactory=l,this._connectionDocking=n.get("connectionDocking",!1),this._layouter=n.get("layouter",!1)}yo.$inject=["injector","canvas","graphicsFactory","elementFactory"],yo.prototype.drawPreview=function(n,o,a){var l,d,b,A=n.connectionPreviewGfx,E=n.getConnection,$=(a=a||{}).source,W=a.target,z=a.waypoints,te=a.connectionStart,le=a.connectionEnd,he=a.noLayout,me=a.noCropping,Oe=a.noNoop,Pe=this;A||(A=n.connectionPreviewGfx=this.createConnectionPreviewGfx()),It(A),E||(E=n.getConnection=(d=function(we,Ee,De){return Pe.getConnection(we,Ee,De)},b={},function(we){var Ee=JSON.stringify(we),De=b[Ee];return De||(De=b[Ee]=d.apply(null,arguments)),De})),o&&(l=E(o,$,W)),l?(l.waypoints=z||[],this._layouter&&!he&&(l.waypoints=this._layouter.layoutConnection(l,{source:$,target:W,connectionStart:te,connectionEnd:le,waypoints:a.waypoints||l.waypoints})),l.waypoints&&l.waypoints.length||(l.waypoints=[$?on($):te,W?on(W):le]),this._connectionDocking&&($||W)&&!me&&(l.waypoints=this._connectionDocking.getCroppedWaypoints(l,$,W)),this._graphicsFactory.drawConnection(A,l)):!Oe&&this.drawNoopPreview(A,a)},yo.prototype.drawNoopPreview=function(n,o){var a=o.source,l=o.target,d=o.connectionStart||on(a),b=o.connectionEnd||on(l),A=this.cropWaypoints(d,b,a,l);Ze(n,this.createNoopConnection(A[0],A[1]))},yo.prototype.cropWaypoints=function(n,o,a,l){var d=this._graphicsFactory,b=a&&d.getShapePath(a),A=l&&d.getShapePath(l),E=d.getConnectionPath({waypoints:[n,o]});return[n=a&&fo(b,E,!0)||n,o=l&&fo(A,E,!1)||o]},yo.prototype.cleanUp=function(n){n&&n.connectionPreviewGfx&&ot(n.connectionPreviewGfx)},yo.prototype.getConnection=function(n){var a,o=F(a=n)?a:{};return this._elementFactory.createConnection(o)},yo.prototype.createConnectionPreviewGfx=function(){var n=jt("g");return yt(n,{pointerEvents:"none"}),Fe(n).add("djs-connection-preview"),Ze(this._canvas.getActiveLayer(),n),n},yo.prototype.createNoopConnection=function(n,o){return pr([n,o],{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"})};var th={__init__:["connectionPreview"],connectionPreview:["type",yo]},Kd=Math.min,u0=Math.max;function Rm(n){n.preventDefault()}function nh(n){n.stopPropagation()}function Vo(n){this.container=n.container,this.parent=vt('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=wt("[contenteditable]",this.parent),this.keyHandler=n.keyHandler||function(){},this.resizeHandler=n.resizeHandler||function(){},this.autoResize=D(this.autoResize,this),this.handlePaste=D(this.handlePaste,this)}function bo(n,o){this._eventBus=n,this._providers=[],this._textbox=new Vo({container:o.getContainer(),keyHandler:D(this._handleKey,this),resizeHandler:D(this._handleResize,this)})}Vo.prototype.create=function(n,o,a,l){var d=this.parent,b=this.content,A=this.container;l=this.options=l||{};var E=re(o=this.style=o||{},["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);N(d.style,{width:n.width+"px",height:n.height+"px",maxWidth:n.maxWidth+"px",maxHeight:n.maxHeight+"px",minWidth:n.minWidth+"px",minHeight:n.minHeight+"px",left:n.x+"px",top:n.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},E);var $=re(o,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return N(b.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},$),l.centerVertically&&N(b.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},$),b.innerText=a,ct.bind(b,"keydown",this.keyHandler),ct.bind(b,"mousedown",nh),ct.bind(b,"paste",this.handlePaste),l.autoResize&&ct.bind(b,"input",this.autoResize),l.resizable&&this.resizable(o),A.appendChild(d),this.setSelection(b.lastChild,b.lastChild&&b.lastChild.length),d},Vo.prototype.handlePaste=function(n){var o,a=this.options,l=this.style;if(n.preventDefault(),o=n.clipboardData?n.clipboardData.getData("text/plain"):window.clipboardData.getData("Text"),this.insertText(o),a.autoResize){var d=this.autoResize(l);d&&this.resizeHandler(d)}},Vo.prototype.insertText=function(n){n=n.replace(/\r\n|\r|\n/g,"\n"),document.execCommand("insertText",!1,n)||this._insertTextIE(n)},Vo.prototype._insertTextIE=function(n){var a,l,d=this.getSelection(),b=d.startContainer,A=d.endContainer,E=d.startOffset,$=d.endOffset,W=d.commonAncestorContainer,z=[].slice.call(W.childNodes);if(W.nodeType===Node.TEXT_NODE){var te=b.textContent;b.textContent=te.substring(0,E)+n+te.substring($),a=b,l=E+n.length}else if(b===this.content&&A===this.content){var le=document.createTextNode(n);this.content.insertBefore(le,z[E]),a=le,l=le.textContent.length}else{var he=z.indexOf(b),me=z.indexOf(A);z.forEach(function(Oe,Pe){Pe===he?Oe.textContent=b.textContent.substring(0,E)+n+A.textContent.substring($):Pe>he&&Pe<=me&&Wt(Oe)}),a=b,l=E+n.length}a&&void 0!==l&&setTimeout(function(){self.setSelection(a,l)})},Vo.prototype.autoResize=function(){var n=this.parent,o=this.content,a=parseInt(this.style.fontSize)||12;if(o.scrollHeight>n.offsetHeight||o.scrollHeight<n.offsetHeight-a){var l=n.getBoundingClientRect(),d=o.scrollHeight;n.style.height=d+"px",this.resizeHandler({width:l.width,height:l.height,dx:0,dy:d-l.height})}},Vo.prototype.resizable=function(){var n=this,o=this.parent,a=this.resizeHandle,l=parseInt(this.style.minWidth)||0,d=parseInt(this.style.minHeight)||0,b=parseInt(this.style.maxWidth)||1/0,A=parseInt(this.style.maxHeight)||1/0;if(!a){var E,$,W,z;a=this.resizeHandle=vt('<div class="djs-direct-editing-resize-handle"></div>');var te=function(he){Rm(he),nh(he);var me=Kd(u0(W+he.clientX-E,l),b),Oe=Kd(u0(z+he.clientY-$,d),A);o.style.width=me+"px",o.style.height=Oe+"px",n.resizeHandler({width:W,height:z,dx:he.clientX-E,dy:he.clientY-$})},le=function(he){Rm(he),nh(he),ct.unbind(document,"mousemove",te,!1),ct.unbind(document,"mouseup",le,!1)};ct.bind(a,"mousedown",function(he){Rm(he),nh(he),E=he.clientX,$=he.clientY;var me=o.getBoundingClientRect();W=me.width,z=me.height,ct.bind(document,"mousemove",te),ct.bind(document,"mouseup",le)})}N(a.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),o.appendChild(a)},Vo.prototype.destroy=function(){var n=this.parent,o=this.content,a=this.resizeHandle;o.innerText="",n.removeAttribute("style"),o.removeAttribute("style"),ct.unbind(o,"keydown",this.keyHandler),ct.unbind(o,"mousedown",nh),ct.unbind(o,"input",this.autoResize),ct.unbind(o,"paste",this.handlePaste),a&&(a.removeAttribute("style"),Wt(a)),Wt(n)},Vo.prototype.getValue=function(){return this.content.innerText.trim()},Vo.prototype.getSelection=function(){return window.getSelection().getRangeAt(0)},Vo.prototype.setSelection=function(n,o){var a=document.createRange();null===n?a.selectNodeContents(this.content):(a.setStart(n,o),a.setEnd(n,o));var l=window.getSelection();l.removeAllRanges(),l.addRange(a)},bo.$inject=["eventBus","canvas"],bo.prototype.registerProvider=function(n){this._providers.push(n)},bo.prototype.isActive=function(n){return!(!this._active||n&&this._active.element!==n)},bo.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())},bo.prototype._fire=function(n,o){this._eventBus.fire("directEditing."+n,o||{active:this._active})},bo.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0},bo.prototype.complete=function(){var n=this._active;if(n){var o,a=n.context.bounds,l=this.$textbox.getBoundingClientRect(),d=this.getValue();d===n.context.text&&l.height===a.height&&l.width===a.width||(o=this._textbox.container.getBoundingClientRect(),n.provider.update(n.element,d,n.context.text,{x:l.left-o.left,y:l.top-o.top,width:l.width,height:l.height})),this._fire("complete"),this.close()}},bo.prototype.getValue=function(){return this._textbox.getValue()},bo.prototype._handleKey=function(n){n.stopPropagation();var o=n.keyCode||n.charCode;return 27===o?(n.preventDefault(),this.cancel()):13!==o||n.shiftKey?void 0:(n.preventDefault(),this.complete())},bo.prototype._handleResize=function(n){this._fire("resize",n)},bo.prototype.activate=function(n){var o;this.isActive()&&this.cancel();var a=S(this._providers,function(l){return(o=l.activate(n))?l:null});return o&&(this.$textbox=this._textbox.create(o.bounds,o.style,o.text,o.options),this._active={element:n,context:o,provider:a},o.options&&o.options.resizable&&(this.resizable=!0),this._fire("activate")),!!o};var h0={__depends__:[rc],__init__:["directEditing"],directEditing:["type",bo]},Pw=["marker-start","marker-mid","marker-end"],JC=["circle","ellipse","line","path","polygon","polyline","path","rect"];function pc(n,o,a,l){this._elementRegistry=n,this._canvas=a,this._styles=l,this._clonedMarkers={};var d=this;o.on("drag.cleanup",function(){p(d._clonedMarkers,function(b){ot(b)}),d._clonedMarkers={}})}pc.$inject=["elementRegistry","eventBus","canvas","styles"],pc.prototype.getGfx=function(n){return this._elementRegistry.getGraphics(n)},pc.prototype.addDragger=function(n,o,a){var l=Ut(a=a||this.getGfx(n)),d=a.getBoundingClientRect();return this._cloneMarkers(td(l)),yt(l,this._styles.cls("djs-dragger",[],{x:d.top,y:d.left})),Ze(o,l),l},pc.prototype.addFrame=function(n,o){var a=jt("rect",{class:"djs-resize-overlay",width:n.width,height:n.height,x:n.x,y:n.y});return Ze(o,a),a},pc.prototype._cloneMarkers=function(n){var o=this;if(n.childNodes)for(var a=0;a<n.childNodes.length;a++)o._cloneMarkers(n.childNodes[a]);-1!==JC.indexOf(n.nodeName)&&Pw.forEach(function(l){if(yt(n,l)){var d=(b=n,A=l,E=o._canvas.getContainer(),wt("marker#"+yt(b,A).match(/url\(['"]?#([^'"]*)['"]?\)/)[1],E||document));o._cloneMarker(n,d,l)}var b,A,E})},pc.prototype._cloneMarker=function(n,o,a){var l=o.id,d=this._clonedMarkers[l];if(!d){var b=l+"-clone";(d=Ut(o)).id=b,Fe(d).add("djs-dragger").add("djs-dragger-marker"),this._clonedMarkers[l]=d;var A=wt("defs",this._canvas._svg);A||(A=jt("defs"),Ze(this._canvas._svg,A)),Ze(A,d)}yt(n,a,"url(#"+this._clonedMarkers[l].id+")")};var Yd={__init__:["previewSupport"],previewSupport:["type",pc]},$m="drop-ok",e1="drop-not-ok",mc="attach-ok",Mm="new-parent";function Nm(n,o,a,l,d){function b(E,$){[mc,$m,e1,Mm].forEach(function(W){W===$?n.addMarker(E,W):n.removeMarker(E,W)})}function A(){var E=o.context();E&&"create"===E.prefix&&o.cancel()}a.on(["create.move","create.hover"],function(E){var $=E.context,W=$.elements,z=E.hover,te=$.source,le=$.hints||{};if(!z)return $.canExecute=!1,void($.target=null);gc(E);var me=$.canExecute=z&&function(Oe,Pe,we,Ee,De){if(!Pe)return!1;var Be=S(Oe=w(Oe,function(gt){var Mt;return!(gt.parent||(Mt=gt,Mt.labelTarget&&-1!==Oe.indexOf(gt.labelTarget)))}),function(gt){return!Fr(gt)}),He=!1,rt=!1,qe=!1;rh(Oe)&&(He=d.allowed("shape.attach",{position:we,shape:Be,target:Pe})),He||(qe=rh(Oe)?d.allowed("shape.create",{position:we,shape:Be,source:Ee,target:Pe}):d.allowed("elements.create",{elements:Oe,position:we,target:Pe}));var nt=De.connectionTarget;return qe||He?(Be&&Ee&&(rt=d.allowed("connection.create",{source:nt===Ee?Be:Ee,target:nt===Ee?Ee:Be,hints:{targetParent:Pe,targetAttach:He}})),{attach:He,connect:rt}):(null===qe||null===He)&&null}(W,z,{x:E.x,y:E.y},te,le);z&&null!==me&&($.target=z,b(z,me&&me.attach?mc:me?Mm:e1))}),a.on(["create.end","create.out","create.cleanup"],function(E){var $=E.hover;$&&b($,null)}),a.on("create.end",function(E){var $=E.context,W=$.source,z=$.shape,te=$.elements,le=$.target,he=$.canExecute,me=he&&he.attach,Oe=he&&he.connect,Pe=$.hints||{};if(!1===he||!le)return!1;gc(E);var we={x:E.x,y:E.y};z=Oe?l.appendShape(W,z,we,le,{attach:me,connection:!0===Oe?{}:Oe,connectionTarget:Pe.connectionTarget}):S(te=l.createElements(te,we,le,N({},Pe,{attach:me})),function(Ee){return!Fr(Ee)}),N($,{elements:te,shape:z}),N(E,{elements:te,shape:z})}),a.on("create.init",function(){a.on("elements.changed",A),a.once(["create.cancel","create.end"],2e3,function(){a.off("elements.changed",A)})}),this.start=function(E,$,W){H($)||($=[$]);var z=S($,function(le){return!Fr(le)});if(z){W=N({elements:$,hints:{},shape:z},W||{}),p($,function(le){k(le.x)||(le.x=0),k(le.y)||(le.y=0)});var te=qn(w($,function(le){return!le.hidden}));p($,function(le){Fr(le)&&(le.waypoints=O(le.waypoints,function(he){return{x:he.x-te.x-te.width/2,y:he.y-te.y-te.height/2}})),N(le,{x:le.x-te.x-te.width/2,y:le.y-te.y-te.height/2})}),o.init(E,"create",{cursor:"grabbing",autoActivate:!0,data:{shape:z,elements:$,context:W}})}}}function gc(n){var o=n.context.createConstraints;o&&(o.left&&(n.x=Math.max(n.x,o.left)),o.right&&(n.x=Math.min(n.x,o.right)),o.top&&(n.y=Math.max(n.y,o.top)),o.bottom&&(n.y=Math.min(n.y,o.bottom)))}function Fr(n){return!!n.waypoints}function rh(n){return n&&1===n.length&&!Fr(n[0])}function d0(n,o,a,l,d){o.on("create.move",750,function(b){var A=b.hover,E=b.context,W=E.dragGroup;W||(W=E.dragGroup=function(z){var te=jt("g");yt(te,d.cls("djs-drag-group",["no-events"]));var le=jt("g");return z.forEach(function(he){var me;he.hidden||(he.waypoints?(me=a._createContainer("connection",le),a.drawConnection(td(me),he)):(me=a._createContainer("shape",le),a.drawShape(td(me),he),Br(me,he.x,he.y)),l.addDragger(he,te,me))}),te}(E.elements)),A?(W.parentNode||Ze(n.getActiveLayer(),W),Br(W,b.x,b.y)):ot(W)}),o.on("create.cleanup",function(b){var A=b.context.dragGroup;A&&ot(A)})}Nm.$inject=["canvas","dragging","eventBus","modeling","rules"],d0.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];var va={__depends__:[Ns,Yd,Zo,Do],__init__:["create","createPreview"],create:["type",Nm],createPreview:["type",d0]};function vc(){}vc.prototype.get=function(){return this._data},vc.prototype.set=function(n){this._data=n},vc.prototype.clear=function(){var n=this._data;return delete this._data,n},vc.prototype.isEmpty=function(){return!this._data};var Lm={clipboard:["type",vc]};function qd(n){var o=this;function a(l){o._lastMoveEvent=l}this._lastMoveEvent=null,n.on("canvas.init",function(l){(o._svg=l.svg).addEventListener("mousemove",a)}),n.on("canvas.destroy",function(){o._lastMouseEvent=null,o._svg.removeEventListener("mousemove",a)})}qd.$inject=["eventBus"],qd.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||((a=document.createEvent("MouseEvent")).initMouseEvent&&a.initMouseEvent("mousemove",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a);var a};var oh={__init__:["mouse"],mouse:["type",qd]};function Co(n,o,a,l,d,b,A,E){this._canvas=n,this._create=o,this._clipboard=a,this._elementFactory=l,this._eventBus=d,this._modeling=b,this._mouse=A,this._rules=E,d.on("copyPaste.copyElement",function($){var W=$.descriptor,z=$.element,te=$.elements;W.priority=1,W.id=z.id;var le=S(te,function(he){return he===z.parent});le&&(W.parent=z.parent.id),!!z.host&&(W.priority=2,W.host=z.host.id),sh(z)&&(W.priority=3,W.source=z.source.id,W.target=z.target.id,W.waypoints=O(z.waypoints,function(me){return(me=Bm(me)).original&&(me.original=Bm(me.original)),me})),Jd(z)&&(W.priority=4,W.labelTarget=z.labelTarget.id),p(["x","y","width","height"],function(he){k(z[he])&&(W[he]=z[he])}),W.hidden=z.hidden,W.collapsed=z.collapsed}),d.on("copyPaste.pasteElements",function($){N($.hints,{createElementsBehavior:!1})})}function sh(n){return!!n.waypoints}function Jd(n){return!!n.labelTarget}function Bm(n){return N({},n)}Co.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"],Co.prototype.copy=function(n){var o,a;return H(n)||(n=n?[n]:[]),a=!1===(o=this._eventBus.fire("copyPaste.canCopyElements",{elements:n}))?{}:this.createTree(H(o)?o:n),this._clipboard.set(a),this._eventBus.fire("copyPaste.elementsCopied",{elements:n,tree:a}),a},Co.prototype.paste=function(n){var o=this._clipboard.get();if(!this._clipboard.isEmpty()){var a=n&&n.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:a});var l=this._createElements(o);if(n&&n.element&&n.point)return this._paste(l,n.element,n.point,a);this._create.start(this._mouse.getLastMoveEvent(),l,{hints:a||{}})}},Co.prototype._paste=function(n,o,a,l){p(n,function(b){k(b.x)||(b.x=0),k(b.y)||(b.y=0)});var d=qn(n);return p(n,function(b){sh(b)&&(b.waypoints=O(b.waypoints,function(A){return{x:A.x-d.x-d.width/2,y:A.y-d.y-d.height/2}})),N(b,{x:b.x-d.x-d.width/2,y:b.y-d.y-d.height/2})}),this._modeling.createElements(n,a,o,N({},l))},Co.prototype._createElements=function(n){var o=this,a=this._eventBus,l={},d=[];return p(n,function(b,A){p(b=T(b,"priority"),function(E){var $,W=N({},ue(E,["priority"]));return l[E.parent]?W.parent=l[E.parent]:delete W.parent,a.fire("copyPaste.pasteElement",{cache:l,descriptor:W}),sh(W)?(W.source=l[E.source],W.target=l[E.target],$=l[E.id]=o.createConnection(W),void d.push($)):Jd(W)?(W.labelTarget=l[W.labelTarget],$=l[E.id]=o.createLabel(W),void d.push($)):(W.host&&(W.host=l[W.host]),$=l[E.id]=o.createShape(W),void d.push($))})}),d},Co.prototype.createConnection=function(n){return this._elementFactory.createConnection(ue(n,["id"]))},Co.prototype.createLabel=function(n){return this._elementFactory.createLabel(ue(n,["id"]))},Co.prototype.createShape=function(n){return this._elementFactory.createShape(ue(n,["id"]))},Co.prototype.hasRelations=function(n,o){var a,l;return!(sh(n)&&(a=S(o,V({id:n.source.id})),l=S(o,V({id:n.target.id})),!a||!l)||Jd(n)&&!S(o,V({id:n.labelTarget.id})))},Co.prototype.createTree=function(n){var o=this._rules,a=this,l={},d=[];function b(A,E){var z,te,$=S(d,function(W){return A===W.element});$?$.depth<E&&(-1!==(te=(z=d).indexOf($))&&z.splice(te,1),(d=z).push({element:$.element,depth:E})):d.push({element:A,depth:E})}return Mr(Zr(n),function(A,E,$){if(!Jd(A)){p(A.labels,function(z){b(z,$)}),p([A.attachers,A.incoming,A.outgoing],function(z){z&&z.length&&p(z,function(te){p(te.labels,function(le){b(le,$)}),b(te,$)})}),b(A,$);var W=[];return A.children&&(W=A.children.slice()),a._eventBus.fire("copyPaste.createTree",{element:A,children:W}),W}}),n=O(d,function(A){return A.element}),d=T(d=O(d,function(A){return A.descriptor={},a._eventBus.fire("copyPaste.copyElement",{descriptor:A.descriptor,element:A.element,elements:n}),A}),function(A){return A.descriptor.priority}),n=O(d,function(A){return A.element}),p(d,function(A){var E=A.depth;a.hasRelations(A.element,n)&&o.allowed("element.copy",{element:A.element,elements:n})?(l[E]||(l[E]=[]),l[E].push(A.descriptor)):function Dm(n,o){var a=o.indexOf(n);return-1===a?o:o.splice(a,1)}(A.element,n)}),l};var t1={__depends__:[Lm,va,oh,Zo],__init__:["copyPaste"],copyPaste:["type",Co]};function Fm(n,o,a){H(a)||(a=[a]),p(a,function(l){U(n[l])||(o[l]=n[l])})}function cl(n,o,a){function l(b,A){var E=n.create(b.$type);return a.copyElement(b,E,null,A)}o.on("copyPaste.copyElement",750,function(b){var A=b.descriptor,E=b.element,$=Dt(E);if(ef(E))return A;var W=A.businessObject=l($,!0),z=A.di=l(Rn(E),!0);z.bpmnElement=W,Fm(W,A,"name"),Fm(z,A,"isExpanded"),$.default&&(A.default=$.default.id)});var d="-bpmn-js-refs";o.on("copyPaste.pasteElement",function(b){var A=b.cache,E=b.descriptor,$=E.businessObject,W=E.di;if(ef(E))return E.businessObject=Dt(A[E.labelTarget]),void(E.di=Rn(A[E.labelTarget]));$=E.businessObject=l($),(W=E.di=l(W)).bpmnElement=$,Fm(E,$,["isExpanded","name"]),E.type=$.$type}),o.on("copyPaste.copyElement",750,function(b){var A=b.descriptor,E=b.element;if(Le(E,"bpmn:Participant")){var $=Dt(E);$.processRef&&(A.processRef=l($.processRef,!0))}}),o.on("copyPaste.pasteElement",function(b){var A=b.descriptor,E=A.processRef;E&&(A.processRef=l(E))}),o.on("copyPaste.pasteElement",750,function(b){var E,A=b.cache;!function(E,$){E[d]=$}(A,function(E,$,W){var z=Dt(E);return E.default&&(W[E.default]={element:z,property:"default"}),E.host&&(Dt(E).attachedToRef=Dt($[E.host])),ue(W,m(W,function(te,le,he){return he===E.id&&(le.element[le.property]=z,te.push(E.id)),te},[]))}(b.descriptor,A,(E=A,E[d]=E[d]||{})))})}function ef(n){return!!n.labelTarget}cl.$inject=["bpmnFactory","eventBus","moddleCopy"];var Wm=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing","categoryValue"];function ah(n,o,a){this._bpmnFactory=o,this._eventBus=n,this._moddle=a,n.on("moddleCopy.canCopyProperties",function(l){var d=l.propertyNames;if(d&&d.length)return T(d,function(b){return"extensionElements"===b})}),n.on("moddleCopy.canCopyProperty",function(l){var d=l.parent,b=F(d)&&d.$descriptor,A=l.propertyName;return(!A||-1===Wm.indexOf(A))&&!(A&&b&&!S(b.properties,V({name:A})))&&void 0}),n.on("moddleCopy.canSetCopiedProperty",function(l){var d,A=l.property;if((d=A)&&"function"==typeof d.$instanceOf&&d.$instanceOf("bpmn:ExtensionElements")&&(!A.values||!A.values.length))return!1})}function Gm(n,o){return m(n.properties,function(a,l){return o&&l.default?a:a.concat(l.name)},[])}ah.$inject=["eventBus","bpmnFactory","moddle"],ah.prototype.copyElement=function(n,o,a,l){var d=this;a&&!H(a)&&(a=[a]),a=a||Gm(n.$descriptor);var b=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:a,sourceElement:n,targetElement:o,clone:l});return!1===b||(H(b)&&(a=b),p(a,function(A){var E;R(n,A)&&(E=n.get(A));var $=d.copyProperty(E,o,A,l);Z($)&&!1!==d._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:o,property:$,propertyName:A})&&o.set(A,$)})),o},ah.prototype.copyProperty=function(n,o,a,l){var d=this,b=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:o,property:n,propertyName:a,clone:l});if(!1!==b){if(b)return F(b)&&b.$type&&!b.$parent&&(b.$parent=o),b;var A=this._moddle.getPropertyDescriptor(o,a);if(!A.isReference)return A.isId?n&&this._copyId(n,o,l):H(n)?m(n,function(E,$){return(b=d.copyProperty($,o,a,l))?E.concat(b):E},[]):F(n)&&n.$type?this._moddle.getElementDescriptor(n).isGeneric?void 0:((b=d._bpmnFactory.create(n.$type)).$parent=o,b=d.copyElement(n,b,null,l)):n}},ah.prototype._copyId=function(n,o,a){return a?n:this._moddle.ids.assigned(n)?void 0:(this._moddle.ids.claim(n,o),n)};var jm={__depends__:[t1],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",cl],moddleCopy:["type",ah]},f0=Math.round;function Zm(n){this._modeling=n}Zm.$inject=["modeling"],Zm.prototype.replaceElement=function(n,o,a){if(n.waypoints)return null;var l=this._modeling,d=o.width||n.width,b=o.height||n.height,E=o.y||n.y,$=f0((o.x||n.x)+d/2),W=f0(E+b/2);return l.replaceShape(n,N({},o,{x:$,y:W,width:d,height:b}),a)};var n1={__init__:["replace"],replace:["type",Zm]},Rw=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function tf(n,o,a,l,d,b,A){this.replaceElement=function(E,$,W){W=W||{};var Be,He,rt,z=$.type,te=E.businessObject;if(Bs(te)&&"bpmn:SubProcess"===z&&(He=$,(rt=(Be=E)&&R(Be,"collapsed")?Be.collapsed:!kn(Be))!==(He&&(R(He,"collapsed")||R(He,"isExpanded"))?R(He,"collapsed")?He.collapsed:!He.isExpanded:rt)))return l.toggleCollapse(E),E;var le=n.create(z),he={type:z,businessObject:le,di:{}};!function(Be,He,rt){H(rt)||(rt=[rt]),p(rt,function(qe){U(Be[qe])||(He[qe]=Be[qe])})}(E.di,he.di,["fill","stroke","background-color","border-color","color"]);var me,Oe=Gm(te.$descriptor),Pe=Gm(le.$descriptor,!0),we=(me=Pe,Oe.filter(function(Be){return-1!==me.indexOf(Be)}));N(le,re($,Rw));var Ee=w(we,function(Be){return"eventDefinitions"===Be?Vm(E,$.eventDefinitionType):"loopCharacteristics"===Be?!lr(le):!R(le,Be)&&("processRef"!==Be||!1!==$.isExpanded)&&"triggeredByEvent"!==Be});if(le=a.copyElement(te,le,Ee),$.eventDefinitionType&&(Vm(le,$.eventDefinitionType)||(he.eventDefinitionType=$.eventDefinitionType,he.eventDefinitionAttrs=$.eventDefinitionAttrs)),Le(te,"bpmn:Activity")){if(Bs(te))he.isExpanded=kn(E);else if($&&R($,"isExpanded")){he.isExpanded=$.isExpanded;var De=o.getDefaultSize(le,{isExpanded:he.isExpanded});he.width=De.width,he.height=De.height,he.x=E.x-(he.width-E.width)/2,he.y=E.y-(he.height-E.height)/2}kn(E)&&!Le(te,"bpmn:Task")&&he.isExpanded&&(he.width=E.width,he.height=E.height)}return Bs(te)&&!Bs(le)&&(W.moveChildren=!1),Le(te,"bpmn:Participant")&&(!0===$.isExpanded?le.processRef=n.create("bpmn:Process"):W.moveChildren=!1,he.width=E.width,he.height=o.getDefaultSize(he).height),b.allowed("shape.resize",{shape:le})||(he.height=o.getDefaultSize(he).height,he.width=o.getDefaultSize(he).width),le.name=te.name,wn(te,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&wn(le,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(le.default=te.default),$.host&&!Le(te,"bpmn:BoundaryEvent")&&Le(le,"bpmn:BoundaryEvent")&&(he.host=$.host),"bpmn:DataStoreReference"!==he.type&&"bpmn:DataObjectReference"!==he.type||(he.x=E.x+(E.width-he.width)/2),he=d.replaceElement(E,he,W),!1!==W.select&&A.select(he),he}}function Bs(n){return Le(n,"bpmn:SubProcess")}function Vm(n,o){var a=Dt(n);return o&&a.get("eventDefinitions").some(function(l){return Le(l,o)})}tf.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","rules","selection"];var Jr={__depends__:[jm,n1,Do],bpmnReplace:["type",tf]};function Qm(n){return function(o){var a=o.target,l=Dt(n),d=l.eventDefinitions&&l.eventDefinitions[0],b=l.$type===a.type,A=(d&&d.$type)===a.eventDefinitionType,E=!!a.triggeredByEvent==!!l.triggeredByEvent,$=void 0===a.isExpanded||a.isExpanded===kn(n);return!(b&&A&&E&&$)}}var nf=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],ni=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],i1=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Intermediate Catch Event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message Intermediate Throw Event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Intermediate Catch Event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Intermediate Throw Event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Intermediate Catch Event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link Intermediate Catch Event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link Intermediate Throw Event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation Intermediate Throw Event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal Intermediate Catch Event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal Intermediate Throw Event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],$w=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message End Event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation End Event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error End Event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel End Event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation End Event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal End Event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate End Event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],Mw=[{label:"Exclusive Gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel Gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive Gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex Gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event based Gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],Nw=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],p0=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Sub Process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],lh=p0,ul=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"User Task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Service Task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Send Task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive Task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"Manual Task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business Rule Task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Script Task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call Activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub Process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}}],m0=[{label:"Data Store Reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],yc=[{label:"Data Object Reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],g0=[{label:"Message Boundary Event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Boundary Event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Boundary Event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Boundary Event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Error Boundary Event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel Boundary Event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Signal Boundary Event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Compensation Boundary Event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],Hm=[{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Error Start Event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Escalation Start Event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Compensation Start Event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],v0=[{label:"Sequence Flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default Flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional Flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],ya=[{label:"Expanded Pool",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(n){var o="Empty Pool";return n.children&&n.children.length&&(o+=" (removes content)"),o},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}];function wo(n,o,a,l,d,b,A){this._bpmnFactory=n,this._popupMenu=o,this._modeling=a,this._moddle=l,this._bpmnReplace=d,this._rules=b,this._translate=A,this.register()}wo.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate"],wo.prototype.register=function(){this._popupMenu.registerProvider("bpmn-replace",this)},wo.prototype.getEntries=function(n){var o,a=n.businessObject;if(!this._rules.allowed("shape.replace",{element:n}))return[];var l=Qm(n);return Le(a,"bpmn:DataObjectReference")?this._createEntries(n,m0):Le(a,"bpmn:DataStoreReference")&&!Le(n.parent,"bpmn:Collaboration")?this._createEntries(n,yc):Le(a,"bpmn:StartEvent")&&!Le(a.$parent,"bpmn:SubProcess")?(o=w(nf,l),this._createEntries(n,o)):Le(a,"bpmn:Participant")?(o=w(ya,function(d){return kn(n)!==d.target.isExpanded}),this._createEntries(n,o)):Le(a,"bpmn:StartEvent")&&lr(a.$parent)?(o=w(Hm,function(d){var b=!1!==d.target.isInterrupting,A=Dt(n).isInterrupting===b;return l(d)||!l(d)&&!A}),this._createEntries(n,o)):Le(a,"bpmn:StartEvent")&&!lr(a.$parent)&&Le(a.$parent,"bpmn:SubProcess")?(o=w(ni,l),this._createEntries(n,o)):Le(a,"bpmn:EndEvent")?(o=w($w,function(d){return!("bpmn:CancelEventDefinition"==d.target.eventDefinitionType&&!Le(a.$parent,"bpmn:Transaction"))&&l(d)}),this._createEntries(n,o)):Le(a,"bpmn:BoundaryEvent")?(o=w(g0,function(d){var b=d.target;if("bpmn:CancelEventDefinition"==b.eventDefinitionType&&!Le(a.attachedToRef,"bpmn:Transaction"))return!1;var E=a.cancelActivity==(!1!==b.cancelActivity);return l(d)||!l(d)&&!E}),this._createEntries(n,o)):Le(a,"bpmn:IntermediateCatchEvent")||Le(a,"bpmn:IntermediateThrowEvent")?(o=w(i1,l),this._createEntries(n,o)):Le(a,"bpmn:Gateway")?(o=w(Mw,l),this._createEntries(n,o)):Le(a,"bpmn:Transaction")?(o=w(p0,l),this._createEntries(n,o)):lr(a)&&kn(n)?(o=w(lh,l),this._createEntries(n,o)):Le(a,"bpmn:SubProcess")&&kn(n)?(o=w(Nw,l),this._createEntries(n,o)):Le(a,"bpmn:AdHocSubProcess")&&!kn(n)?(o=w(ul,function(d){var b=d.target,A="bpmn:SubProcess"===b.type,E=!0===b.isExpanded;return Qm(n)&&(!A||E)}),this._createEntries(n,o)):Le(a,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(n,v0):Le(a,"bpmn:FlowNode")?(o=w(ul,l),Le(a,"bpmn:SubProcess")&&!kn(n)&&(o=w(o,function(d){return"Sub Process (collapsed)"!==d.label})),this._createEntries(n,o)):[]},wo.prototype.getHeaderEntries=function(n){var o=[];return Le(n,"bpmn:Activity")&&!lr(n)&&(o=o.concat(this._getLoopEntries(n))),Le(n,"bpmn:DataObjectReference")&&(o=o.concat(this._getDataObjectIsCollection(n))),Le(n,"bpmn:Participant")&&(o=o.concat(this._getParticipantMultiplicity(n))),!Le(n,"bpmn:SubProcess")||Le(n,"bpmn:Transaction")||lr(n)||o.push(this._getAdHocEntry(n)),o},wo.prototype._createEntries=function(n,o){var a=[],l=this;return p(o,function(d){var b=l._createMenuEntry(d,n);a.push(b)}),a},wo.prototype._createSequenceFlowEntries=function(n,o){var a=Dt(n),l=[],d=this._modeling,b=this._moddle,A=this;return p(o,function(E){switch(E.actionName){case"replace-with-default-flow":a.sourceRef.default!==a&&(Le(a.sourceRef,"bpmn:ExclusiveGateway")||Le(a.sourceRef,"bpmn:InclusiveGateway")||Le(a.sourceRef,"bpmn:ComplexGateway")||Le(a.sourceRef,"bpmn:Activity"))&&l.push(A._createMenuEntry(E,n,function(){d.updateProperties(n.source,{default:a})}));break;case"replace-with-conditional-flow":!a.conditionExpression&&Le(a.sourceRef,"bpmn:Activity")&&l.push(A._createMenuEntry(E,n,function(){var $=b.create("bpmn:FormalExpression",{body:""});d.updateProperties(n,{conditionExpression:$})}));break;default:if(Le(a.sourceRef,"bpmn:Activity")&&a.conditionExpression)return l.push(A._createMenuEntry(E,n,function(){d.updateProperties(n,{conditionExpression:void 0})}));if((Le(a.sourceRef,"bpmn:ExclusiveGateway")||Le(a.sourceRef,"bpmn:InclusiveGateway")||Le(a.sourceRef,"bpmn:ComplexGateway")||Le(a.sourceRef,"bpmn:Activity"))&&a.sourceRef.default===a)return l.push(A._createMenuEntry(E,n,function(){d.updateProperties(n.source,{default:void 0})}))}}),l},wo.prototype._createMenuEntry=function(n,o,a){var l=this._translate,d=this._bpmnReplace.replaceElement,b=n.label;return b&&"function"==typeof b&&(b=b(o)),a=a||function(){return d(o,n.target)},{label:l(b),className:n.className,id:n.actionName,action:a}},wo.prototype._getLoopEntries=function(n){var o=this,a=this._translate;function l($,W){var z=Dt(n).loopCharacteristics;W.active?z=void 0:(!U(W.options.isSequential)&&z&&Le(z,W.options.loopCharacteristics)||(z=o._moddle.create(W.options.loopCharacteristics)),z.isSequential=W.options.isSequential),o._modeling.updateProperties(n,{loopCharacteristics:z})}var d,b,A,E=Dt(n).loopCharacteristics;return E&&(d=E.isSequential,b=void 0===E.isSequential,A=void 0!==E.isSequential&&!E.isSequential),[{id:"toggle-parallel-mi",className:"bpmn-icon-parallel-mi-marker",title:a("Parallel Multi Instance"),active:A,action:l,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},{id:"toggle-sequential-mi",className:"bpmn-icon-sequential-mi-marker",title:a("Sequential Multi Instance"),active:d,action:l,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},{id:"toggle-loop",className:"bpmn-icon-loop-marker",title:a("Loop"),active:b,action:l,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}]},wo.prototype._getDataObjectIsCollection=function(n){var o=this,l=n.businessObject.dataObjectRef;if(!l)return[];var d=l.isCollection;return[{id:"toggle-is-collection",className:"bpmn-icon-parallel-mi-marker",title:(0,this._translate)("Collection"),active:d,action:function(b,A){o._modeling.updateModdleProperties(n,l,{isCollection:!A.active})}}]},wo.prototype._getParticipantMultiplicity=function(n){var o=this,a=this._bpmnFactory,d=n.businessObject.participantMultiplicity;return[{id:"toggle-participant-multiplicity",className:"bpmn-icon-parallel-mi-marker",title:(0,this._translate)("Participant Multiplicity"),active:!!d,action:function(A,E){var $;E.active||($=a.create("bpmn:ParticipantMultiplicity")),o._modeling.updateProperties(n,{participantMultiplicity:$})}}]},wo.prototype._getAdHocEntry=function(n){var o=this._translate,a=Le(Dt(n),"bpmn:AdHocSubProcess"),l=this._bpmnReplace.replaceElement;return{id:"toggle-adhoc",className:"bpmn-icon-ad-hoc-marker",title:o("Ad-hoc"),active:a,action:function(d,b){return l(n,a?{type:"bpmn:SubProcess"}:{type:"bpmn:AdHocSubProcess"},{autoResize:!1,layoutConnection:!1})}}};var y0={__depends__:[Gu,Jr,$n],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",wo]},ch=Math.max,hl=Math.min;function ba(n,o){return{top:n.top-o.top,right:n.right-o.right,bottom:n.bottom-o.bottom,left:n.left-o.left}}function Ca(n,o,a){var l=o[n],d=a.min&&a.min[n],b=a.max&&a.max[n];return k(d)&&(l=(/top|left/.test(n)?hl:ch)(l,d)),k(b)&&(l=(/top|left/.test(n)?ch:hl)(l,b)),l}function dl(n,o){return void 0!==n?n:20}function rf(n){return!n.waypoints&&"label"!==n.type}function zm(n,o){var a,l,d,b,A,E,$;if((a=void 0===n.length?w(n.children,rf):n).length)return l=qn(a),"object"==typeof(d=o)?(b=dl(d.left),A=dl(d.right),E=dl(d.top),$=dl(d.bottom)):b=A=E=$=dl(d),{x:l.x-b,y:l.y-E,width:l.width+b+A,height:l.height+E+$}}var of=Math.abs,r1=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"];function uh(n,o){return o=o||[],n.children.filter(function(a){Le(a,"bpmn:Lane")&&(uh(a,o),o.push(a))}),o}function fl(n){return n.children.filter(function(o){return Le(o,"bpmn:Lane")})}function eo(n){return jd(n,r1)||n}function hh(n,o,a,l,d,b,A,E,$,W,z,te){n=n||{},l.registerProvider(this),this._contextPad=l,this._modeling=d,this._elementFactory=b,this._connect=A,this._create=E,this._popupMenu=$,this._canvas=W,this._rules=z,this._translate=te,!1!==n.autoPlace&&(this._autoPlace=o.get("autoPlace",!1)),a.on("create.end",250,function(le){var he=le.context.shape;if(Ja(le)&&l.isOpen(he)){var me=l.getEntries(he);me.replace&&me.replace.action.click(le,he)}})}function b0(n,o,a){var l=n.$instanceOf(o),d=!1;return p(n.eventDefinitions||[],function(b){b.$type===a&&(d=!0)}),l&&d}hh.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate"],hh.prototype.getMultiElementContextPadEntries=function(n){var o=this._modeling,a={};return this._isDeleteAllowed(n)&&N(a,{delete:{group:"edit",className:"bpmn-icon-trash",title:this._translate("Remove"),action:{click:function(l,d){o.removeElements(d.slice())}}}}),a},hh.prototype._isDeleteAllowed=function(n){var o=this._rules.allowed("elements.delete",{elements:n});return H(o)?h(o,function(a){return-1!==o.indexOf(a)}):o},hh.prototype.getContextPadEntries=function(n){var o=this._contextPad,a=this._modeling,l=this._elementFactory,d=this._connect,b=this._create,A=this._popupMenu,E=this._rules,$=this._autoPlace,W=this._translate,z={};if("label"===n.type)return z;var te=n.businessObject;function le(we,Ee){d.start(we,Ee)}function he(we,Ee,De,Be){function He(qe,nt){var gt=l.createShape(N({type:we},Be));b.start(qe,gt,{source:nt})}return"string"!=typeof De&&(Be=De,De=W("Append {type}",{type:we.replace(/^bpmn:/,"")})),{group:"model",className:Ee,title:De,action:{dragstart:He,click:$?function(qe,nt){var gt=l.createShape(N({type:we},Be));$.append(nt,gt)}:He}}}function me(we){return function(Ee,De){a.splitLane(De,we),o.open(De,!0)}}if(wn(te,["bpmn:Lane","bpmn:Participant"])&&kn(n)){var Oe=fl(n);N(z,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:W("Add Lane above"),action:{click:function(we,Ee){a.addLane(Ee,"top")}}}}),Oe.length<2&&(n.height>=120&&N(z,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:W("Divide into two Lanes"),action:{click:me(2)}}}),n.height>=180&&N(z,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:W("Divide into three Lanes"),action:{click:me(3)}}})),N(z,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:W("Add Lane below"),action:{click:function(we,Ee){a.addLane(Ee,"bottom")}}}})}Le(te,"bpmn:FlowNode")&&(Le(te,"bpmn:EventBasedGateway")?N(z,{"append.receive-task":he("bpmn:ReceiveTask","bpmn-icon-receive-task",W("Append ReceiveTask")),"append.message-intermediate-event":he("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",W("Append MessageIntermediateCatchEvent"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":he("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",W("Append TimerIntermediateCatchEvent"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":he("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",W("Append ConditionIntermediateCatchEvent"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":he("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",W("Append SignalIntermediateCatchEvent"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):b0(te,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?N(z,{"append.compensation-activity":he("bpmn:Task","bpmn-icon-task",W("Append compensation activity"),{isForCompensation:!0})}):Le(te,"bpmn:EndEvent")||te.isForCompensation||b0(te,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")||lr(te)||N(z,{"append.end-event":he("bpmn:EndEvent","bpmn-icon-end-event-none",W("Append EndEvent")),"append.gateway":he("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",W("Append Gateway")),"append.append-task":he("bpmn:Task","bpmn-icon-task",W("Append Task")),"append.intermediate-event":he("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",W("Append Intermediate/Boundary Event"))})),A.isEmpty(n,"bpmn-replace")||N(z,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:W("Change type"),action:{click:function(we,Ee){var He,De=N({x:(He=o.getPad(Ee).html.getBoundingClientRect()).left,y:He.bottom+5},{cursor:{x:we.x,y:we.y}});A.open(Ee,"bpmn-replace",De,{title:W("Change element"),width:300,search:!0})}}}}),Le(te,"bpmn:SequenceFlow")&&N(z,{"append.text-annotation":he("bpmn:TextAnnotation","bpmn-icon-text-annotation")}),wn(te,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&N(z,{"append.text-annotation":he("bpmn:TextAnnotation","bpmn-icon-text-annotation"),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:W("Connect using "+(te.isForCompensation?"":"Sequence/MessageFlow or ")+"Association"),action:{click:le,dragstart:le}}}),Le(te,"bpmn:TextAnnotation")&&N(z,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:W("Connect using Association"),action:{click:le,dragstart:le}}}),wn(te,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&N(z,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:W("Connect using DataInputAssociation"),action:{click:le,dragstart:le}}}),Le(te,"bpmn:Group")&&N(z,{"append.text-annotation":he("bpmn:TextAnnotation","bpmn-icon-text-annotation")});var Pe=E.allowed("elements.delete",{elements:[n]});return H(Pe)&&(Pe=Pe[0]===n),Pe&&N(z,{delete:{group:"edit",className:"bpmn-icon-trash",title:W("Remove"),action:{click:function(we,Ee){a.removeElements([Ee])}}}}),z};var C0={__depends__:[h0,Ed,Do,Pm,va,y0],__init__:["contextPadProvider"],contextPadProvider:["type",hh]};function _i(n,o){this._eventBus=n,this._canvas=o;var a=this;n.on("tool-manager.update",function(l){a.updateToolHighlight(l.tool)}),n.on("i18n.changed",function(){a._update()}),n.on("diagram.init",function(){a._diagramInitialized=!0,a._rebuild()})}function x0(n,o){var a=o.getPaletteEntries();return _(a)?a(n):(p(a,function(l,d){n[d]=l}),n)}_i.$inject=["eventBus","canvas"],_i.prototype.registerProvider=function(n,o){o||(o=n,n=1e3),this._eventBus.on("palette.getProviders",n,function(a){a.providers.push(o)}),this._rebuild()},_i.prototype.getEntries=function(){return this._getProviders().reduce(x0,{})},_i.prototype._rebuild=function(){this._diagramInitialized&&this._getProviders().length&&(this._container||this._init(),this._update())},_i.prototype._init=function(){var n=this,o=this._eventBus,a=this._getParentContainer(),l=this._container=vt(_i.HTML_MARKUP);a.appendChild(l),be(a).add("djs-palette-shown"),Et.bind(l,".djs-palette-toggle, .entry","click",function(d){if(de(d.delegateTarget,".djs-palette-toggle"))return n.toggle();n.trigger("click",d)}),ct.bind(l,"mousedown",function(d){d.stopPropagation()}),Et.bind(l,".entry","dragstart",function(d){n.trigger("dragstart",d)}),o.on("canvas.resized",this._layoutChanged,this),o.fire("palette.create",{container:l})},_i.prototype._getProviders=function(n){var o=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(o),o.providers},_i.prototype._toggleState=function(n){n=n||{};var o,a=this._getParentContainer(),d=this._eventBus,b=be(this._container),A=be(a);o="twoColumn"in n?n.twoColumn:this._needsCollapse(a.clientHeight,this._entries||{}),b.toggle("two-column",o),A.toggle("djs-palette-two-column",o),"open"in n&&(b.toggle("open",n.open),A.toggle("djs-palette-open",n.open)),d.fire("palette.changed",{twoColumn:o,open:this.isOpen()})},_i.prototype._update=function(){var n=wt(".djs-palette-entries",this._container),o=this._entries=this.getEntries();se(n),p(o,function(a,l){var d=a.group||"default",b=wt("[data-group="+ha(d)+"]",n);b||(pe(b=vt('<div class="group"></div>'),"data-group",d),n.appendChild(b));var z,te,E=vt(a.html||(a.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'));if(b.appendChild(E),!a.separator&&(pe(E,"data-action",l),a.title&&pe(E,"title",a.title),a.className&&(z=a.className,te=be(E),(H(z)?z:z.split(/\s+/g)).forEach(function(le){te.add(le)})),a.imageUrl)){var $=vt("<img>");pe($,"src",a.imageUrl),E.appendChild($)}}),this.open()},_i.prototype.trigger=function(n,o,a){var l,b=o.delegateTarget||o.target;return b?(l=pe(b,"data-action"),this.triggerEntry(l,n,o.originalEvent||o,a)):o.preventDefault()},_i.prototype.triggerEntry=function(n,o,a,l){var d,b;if(d=this._entries[n]){if(_(b=d.action)){if("click"===o)return b(a,l)}else if(b[o])return b[o](a,l);a.preventDefault()}},_i.prototype._layoutChanged=function(){this._toggleState({})},_i.prototype._needsCollapse=function(n,o){return n<46*Object.keys(o).length+50},_i.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})},_i.prototype.open=function(){this._toggleState({open:!0})},_i.prototype.toggle=function(n){this.isOpen()?this.close():this.open()},_i.prototype.isActiveTool=function(n){return n&&this._activeTool===n},_i.prototype.updateToolHighlight=function(n){var o;this._toolsContainer||(o=wt(".djs-palette-entries",this._container),this._toolsContainer=wt("[data-group=tools]",o)),p(this._toolsContainer.children,function(a){var l=a.getAttribute("data-action");if(l){var d=be(a);l=l.replace("-tool",""),d.contains("entry")&&l===n?d.add("highlighted-entry"):d.remove("highlighted-entry")}})},_i.prototype.isOpen=function(){return be(this._container).has("open")},_i.prototype._getParentContainer=function(){return this._canvas.getContainer()},_i.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';var A0={__init__:["palette"],palette:["type",_i]},dh={id:"events",name:"Events"},l1={id:"tasks",name:"Tasks"},sf={id:"data",name:"Data"},O0={id:"participants",name:"Participants"},af={id:"subprocess",name:"Sub Processes"},fh={id:"gateways",name:"Gateways"},I0=[{label:"Start Event",actionName:"none-start-event",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"Boundary Event",actionName:"none-boundary-event",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:BoundaryEvent"}},{label:"End Event",actionName:"none-end-event",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}].map(n=>({...n,group:dh})),wa=[{label:"Message Start Event",actionName:"message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}].map(n=>({...n,group:dh})),Lw=[{label:"Message Intermediate Catch Event",actionName:"message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message Intermediate Throw Event",actionName:"message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Intermediate Catch Event",actionName:"timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Intermediate Throw Event",actionName:"escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Intermediate Catch Event",actionName:"conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link Intermediate Catch Event",actionName:"link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link Intermediate Throw Event",actionName:"link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation Intermediate Throw Event",actionName:"compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal Intermediate Catch Event",actionName:"signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal Intermediate Throw Event",actionName:"signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}].map(n=>({...n,group:dh})),lf=[{label:"Message Boundary Event",actionName:"message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Boundary Event",actionName:"timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Boundary Event",actionName:"escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Boundary Event",actionName:"conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Error Boundary Event",actionName:"error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel Boundary Event",actionName:"cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Signal Boundary Event",actionName:"signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Compensation Boundary Event",actionName:"compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Boundary Event (non-interrupting)",actionName:"non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer Boundary Event (non-interrupting)",actionName:"non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation Boundary Event (non-interrupting)",actionName:"non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional Boundary Event (non-interrupting)",actionName:"non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal Boundary Event (non-interrupting)",actionName:"non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}].map(n=>({...n,group:dh})),c1=[{label:"Message End Event",actionName:"message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation End Event",actionName:"escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error End Event",actionName:"error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel End Event",actionName:"cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation End Event",actionName:"compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal End Event",actionName:"signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate End Event",actionName:"terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}].map(n=>({...n,group:dh})),_0=[{label:"Exclusive Gateway",actionName:"exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel Gateway",actionName:"parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive Gateway",search:"or",actionName:"inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"},rank:-1},{label:"Complex Gateway",actionName:"complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"},rank:-1},{label:"Event based Gateway",actionName:"event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}].map(n=>({...n,group:fh})),u1=[{label:"Transaction",actionName:"transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event Sub Process",search:"subprocess",actionName:"event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub Process (collapsed)",search:"subprocess",actionName:"collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub Process (expanded)",search:"subprocess",actionName:"expanded-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!0}}].map(n=>({...n,group:af})),S0=[..._0,...[{label:"Task",actionName:"task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"User Task",actionName:"user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Service Task",actionName:"service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Send Task",actionName:"send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"},rank:-1},{label:"Receive Task",actionName:"receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"},rank:-1},{label:"Manual Task",actionName:"manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"},rank:-1},{label:"Business Rule Task",actionName:"rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Script Task",actionName:"script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call Activity",actionName:"call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}}].map(n=>({...n,group:l1})),...u1,...I0,...wa,...Lw,...c1,...lf,...[{label:"Data Store Reference",actionName:"data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}},{label:"Data Object Reference",actionName:"data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}].map(n=>({...n,group:sf})),...[{label:"Expanded Pool",search:"Participant",actionName:"expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:"Empty Pool",search:"Collapsed Participant",actionName:"collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}].map(n=>({...n,group:O0}))];function Cc(n,o,a,l,d,b){this._elementFactory=n,this._popupMenu=o,this._create=a,this._autoPlace=l,this._mouse=d,this._translate=b,this.register()}function E0(n,o,a,l,d){this._translate=o,this._popupMenu=a,this._canvas=l,this._mouse=d,n.registerProvider(800,this)}function k0(n){this._injector=n,this.registerActions()}function cf(n){this._injector=n,this._keyboard=this._injector.get("keyboard",!1),this._editorActions=this._injector.get("editorActions",!1),this._keyboard&&this._injector.invoke(rs,this)}function pl(n,o,a,l,d,b,A){this._elementFactory=n,this._popupMenu=o,this._create=a,this._autoPlace=l,this._rules=d,this._create=a,this._mouse=b,this._translate=A,this.register()}function ph(n,o,a,l){n.registerProvider(900,this),this._contextPad=n,this._popupMenu=o,this._translate=a,this._canvas=l}function mh(n){br.call(this,n)}Cc.$inject=["elementFactory","popupMenu","create","autoPlace","mouse","translate"],Cc.prototype.register=function(){this._popupMenu.registerProvider("bpmn-create",this)},Cc.prototype.getPopupMenuEntries=function(){const n={};return S0.forEach(o=>{const{actionName:a,className:l,label:d,target:b,description:A,group:E,search:$,rank:W}=o,z=this._createEntryAction(b);n[`create-${a}`]={label:d&&this._translate(d),className:l,description:A,group:E&&{...E,name:this._translate(E.name)},search:$,rank:W,action:{click:z,dragstart:z}}}),n},Cc.prototype._createEntryAction=function(n){const o=this._create,a=this._mouse,l=this._popupMenu,d=this._elementFactory;let b;return A=>(l.close(),b="bpmn:Participant"===n.type?d.createParticipantShape(n):d.create("shape",n),A instanceof KeyboardEvent&&(A=a.getLastMoveEvent()),o.start(A,b))},E0.$inject=["palette","translate","popupMenu","canvas","mouse"],E0.prototype.getPaletteEntries=function(n){const o=this._translate,a=this._popupMenu,l=this._canvas,d=this._mouse;return{create:{group:"create",imageUrl:"data:image/svg+xml,%3Csvg%20width%3D%2246%22%20height%3D%2246%22%20viewBox%3D%22-2%20-2%209.82%209.82%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cpath%20d%3D%22M1.3%203.4c.3%200%20.5-.2.5-.5s-.2-.4-.5-.4c-.2%200-.4.1-.4.4%200%20.3.2.5.4.5zM3%203.4c.2%200%20.4-.2.4-.5s-.2-.4-.4-.4c-.3%200-.5.1-.5.4%200%20.3.2.5.5.5zM4.6%203.4c.2%200%20.4-.2.4-.5s-.2-.4-.4-.4c-.3%200-.5.1-.5.4%200%20.3.2.5.5.5z%22%2F%3E%0A%3C%2Fsvg%3E",title:o("Create element"),action:{click:function(b){const A=($=>{if($ instanceof KeyboardEvent)return{x:($=d.getLastMoveEvent()).x,y:$.y};const W=$&&$.target||wt('.djs-palette [data-action="create"]'),z=W.getBoundingClientRect();return W&&{x:z.left+z.width/2+35,y:z.top+z.height/2+10}})(b),E=l.getRootElement();a.open(E,"bpmn-create",A,{title:o("Create element"),width:300,search:!0})}}}}},k0.$inject=["injector"],k0.prototype.registerActions=function(){var n=this._injector.get("editorActions",!1),o=this._injector.get("selection",!1),a=this._injector.get("contextPad",!1),l=this._injector.get("palette",!1),d=this._injector.get("popupMenu",!1);const b={};o&&a&&l&&d&&l&&N(b,{appendElement:function(A){const E=o&&o.get();1!=E.length||d.isEmpty(E[0],"bpmn-append")?l.triggerEntry("create","click",A):a.triggerEntry("append","click",A)}}),l&&N(b,{createElement:function(A){l.triggerEntry("create","click",A)}}),n&&n.register(b)},Ce(cf,rs),cf.$inject=["injector"],cf.prototype.registerBindings=function(){var n=this._keyboard,o=this._editorActions;function a(l,d){o&&o.isRegistered(l)&&n&&n.addListener(d)}rs.prototype.registerBindings.call(this,n,o),a("appendElement",function(l){var d=l.keyEvent;if(!n||!n.hasModifier(d))return n&&n.isKey(["a","A"],d)?(o&&o.trigger("appendElement",d),!0):void 0}),a("createElement",function(l){var d=l.keyEvent;if(!n||!n.hasModifier(d))return n&&n.isKey(["n","N"],d)?(o&&o.trigger("createElement",d),!0):void 0})},pl.$inject=["elementFactory","popupMenu","create","autoPlace","rules","mouse","translate"],pl.prototype.register=function(){this._popupMenu.registerProvider("bpmn-append",this)},pl.prototype.getPopupMenuEntries=function(n){const a=this._translate,l={};return this._rules.allowed("shape.append",{element:n})?(this._filterEntries(S0).forEach(d=>{const{actionName:b,className:A,label:E,target:$,description:W,group:z,search:te,rank:le}=d;l[`append-${b}`]={label:E&&a(E),className:A,description:W,group:z&&{...z,name:a(z.name)},search:te,rank:le,action:this._createEntryAction(n,$)}}),l):[]},pl.prototype._filterEntries=function(n){return n.filter(o=>{const a=o.target,{type:l,eventDefinitionType:d}=a;return!(["bpmn:StartEvent","bpmn:Participant"].includes(l)||"bpmn:BoundaryEvent"===l&&U(d))})},pl.prototype._createEntryAction=function(n,o){const a=this._elementFactory,l=this._autoPlace,d=this._create,b=this._mouse,A=E=>{const $=a.create("shape",o);return E instanceof KeyboardEvent&&(E=b.getLastMoveEvent()),d.start(E,$,{source:n})};return{click:this._canAutoPlaceElement(o)?()=>{const E=a.create("shape",o);l.append(n,E)}:A,dragstart:A}},pl.prototype._canAutoPlaceElement=n=>{const{type:o}=n;return!("bpmn:BoundaryEvent"===o||"bpmn:SubProcess"===o&&n.triggeredByEvent||"bpmn:IntermediateCatchEvent"===o&&"bpmn:LinkEventDefinition"===n.eventDefinitionType)},ph.$inject=["contextPad","popupMenu","translate","canvas"],ph.prototype.getContextPadEntries=function(n){const o=this._popupMenu,a=this._translate,l=this._getAppendMenuPosition.bind(this);if(!o.isEmpty(n,"bpmn-append"))return{append:{group:"model",imageUrl:"data:image/svg+xml,%3Csvg%20width%3D%2222%22%20height%3D%2222%22%20viewBox%3D%220%200%205.82%205.82%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%20%20%3Cpath%20d%3D%22M1.3%203.4c.3%200%20.5-.2.5-.5s-.2-.4-.5-.4c-.2%200-.4.1-.4.4%200%20.3.2.5.4.5zM3%203.4c.2%200%20.4-.2.4-.5s-.2-.4-.4-.4c-.3%200-.5.1-.5.4%200%20.3.2.5.5.5zM4.6%203.4c.2%200%20.4-.2.4-.5s-.2-.4-.4-.4c-.3%200-.5.1-.5.4%200%20.3.2.5.5.5z%22%2F%3E%0A%3C%2Fsvg%3E",title:a("Append element"),action:{click:function(d,b){var A=N(l(b),{cursor:{x:d.x,y:d.y}});o.open(b,"bpmn-append",A,{title:a("Append element"),width:300,search:!0})}}}}},ph.prototype._getAppendMenuPosition=function(n){const o=this._contextPad.getPad(n).html.getBoundingClientRect();return{x:o.right+5,y:o.top}},Ce(mh,br),mh.$inject=["eventBus"],mh.prototype.init=function(){this.addRule("shape.append",function(n){var o=n.element;const a=Dt(o);return!Vi(o)&&!wn(o,["bpmn:EndEvent","bpmn:Group","bpmn:TextAnnotation","bpmn:Lane","bpmn:Participant","bpmn:DataStoreReference","bpmn:DataObjectReference"])&&!o.waypoints&&(!Le(o,"bpmn:IntermediateThrowEvent")||("bpmn:LinkEventDefinition",!S(Dt(o).eventDefinitions||[],function(b){return Le(b,"bpmn:LinkEventDefinition")})))&&(!Le(o,"bpmn:SubProcess")||!a.triggeredByEvent)&&void 0})};var h1={__depends__:[A0,Gu,Dy,Ed],__init__:["createMenuProvider","createPaletteProvider","createAppendEditorActions","createAppendKeyboardBindings","appendMenuProvider","appendContextPadProvider","appendRules"],createMenuProvider:["type",Cc],createPaletteProvider:["type",E0],createAppendEditorActions:["type",k0],createAppendKeyboardBindings:["type",cf],appendMenuProvider:["type",pl],appendContextPadProvider:["type",ph],appendRules:["type",mh]},d1={horizontal:["x","width"],vertical:["y","height"]};function Qo(n,o){this._modeling=n,this._filters=[],this.registerFilter(function(a){var l=o.allowed("elements.distribute",{elements:a});return H(l)?l:l?a:[]})}Qo.$inject=["modeling","rules"],Qo.prototype.registerFilter=function(n){if("function"!=typeof n)throw new Error("the filter has to be a function");this._filters.push(n)},Qo.prototype.trigger=function(n,o){var a,l,d=this._modeling;if(!(n.length<3||(this._setOrientation(o),l=this._filterElements(n),(a=this._createGroups(l)).length<=2)))return d.distributeElements(a,this._axis,this._dimension),a},Qo.prototype._filterElements=function(n){var o=this._filters,a=this._axis,l=this._dimension,d=[].concat(n);return o.length?(p(o,function(b){d=b(d,a,l)}),d):n},Qo.prototype._createGroups=function(n){var o=[],a=this,l=this._axis,d=this._dimension;if(!l)throw new Error('must have a defined "axis" and "dimension"');return p(T(n,l),function(b,A){var $=a._findRange(b,l,d),W=o[o.length-1];W&&a._hasIntersection(W.range,$)?o[o.length-1].elements.push(b):o.push({range:$,elements:[b]})}),o},Qo.prototype._setOrientation=function(n){var o=d1[n];this._axis=o[0],this._dimension=o[1]},Qo.prototype._hasIntersection=function(n,o){return Math.max(n.min,n.max)>=Math.min(o.min,o.max)&&Math.min(n.min,n.max)<=Math.max(o.min,o.max)},Qo.prototype._findRange=function(n){var o=n[this._axis];return{min:o+5,max:o+n[this._dimension]-5}};var f1={__init__:["distributeElements"],distributeElements:["type",Qo]};function uf(n,o,a){br.call(this,o)}uf.$inject=["distributeElements","eventBus","rules"],Ce(uf,br),uf.prototype.init=function(){this.addRule("elements.distribute",function(n){var o=n.elements;return!((o=Zr(o=w(o,function(a){var l=wn(a,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(a.labelTarget||l)}))).length<3)&&o})};var gh_horizontal="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201800%201800%22%3E%3Cpath%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linejoin%3Around%22%20d%3D%22M450%20400V150h900v250%22%2F%3E%3Crect%20x%3D%22150%22%20y%3D%22450%22%20width%3D%22600%22%20height%3D%221200%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%221050%22%20y%3D%22450%22%20width%3D%22600%22%20height%3D%22800%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E",gh_vertical="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%201800%201800%22%3E%3Cpath%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bstroke-linejoin%3Around%22%20d%3D%22M400%201350H150V450h250%22%2F%3E%3Crect%20x%3D%22450%22%20y%3D%22150%22%20width%3D%221200%22%20height%3D%22600%22%20rx%3D%221%22%20style%3D%22fill%3Anone%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%22%2F%3E%3Crect%20x%3D%22450%22%20y%3D%221050%22%20width%3D%22800%22%20height%3D%22600%22%20rx%3D%221%22%20style%3D%22fill%3AcurrentColor%3Bstroke%3AcurrentColor%3Bstroke-width%3A100%3Bopacity%3A.5%22%2F%3E%3C%2Fsvg%3E";function ml(n,o,a,l){this._distributeElements=o,this._translate=a,this._popupMenu=n,this._rules=l,n.registerProvider("align-elements",900,this)}ml.$inject=["popupMenu","distributeElements","translate","rules"],ml.prototype.getPopupMenuEntries=function(n){var o={};return this._isAllowed(n)&&N(o,this._getEntries(n)),o},ml.prototype._isAllowed=function(n){return this._rules.allowed("elements.distribute",{elements:n})},ml.prototype._getEntries=function(n){var o=this._distributeElements,a=this._translate,l=this._popupMenu;return{"distribute-elements-horizontal":{group:"distribute",title:a("Distribute elements horizontally"),className:"bjs-align-elements-menu-entry",imageUrl:gh_horizontal,action:function(d,b){o.trigger(n,"horizontal"),l.close()}},"distribute-elements-vertical":{group:"distribute",title:a("Distribute elements vertically"),imageUrl:gh_vertical,action:function(d,b){o.trigger(n,"vertical"),l.close()}}}};var T0={__depends__:[Gu,f1],__init__:["bpmnDistributeElements","distributeElementsMenuProvider"],bpmnDistributeElements:["type",uf],distributeElementsMenuProvider:["type",ml]},vh="is not a registered action";function xo(n,o){this._actions={};var a=this;n.on("diagram.init",function(){a._registerDefaultActions(o),n.fire("editorActions.init",{editorActions:a})})}function P0(n,o){return new Error(n+" "+o)}xo.$inject=["eventBus","injector"],xo.prototype._registerDefaultActions=function(n){var o=n.get("commandStack",!1),a=n.get("modeling",!1),l=n.get("selection",!1),d=n.get("zoomScroll",!1),b=n.get("copyPaste",!1),A=n.get("canvas",!1),E=n.get("rules",!1),$=n.get("keyboardMove",!1),W=n.get("keyboardMoveSelection",!1);o&&(this.register("undo",function(){o.undo()}),this.register("redo",function(){o.redo()})),b&&l&&this.register("copy",function(){var z=l.get();if(z.length)return b.copy(z)}),b&&this.register("paste",function(){b.paste()}),d&&this.register("stepZoom",function(z){d.stepZoom(z.value)}),A&&this.register("zoom",function(z){A.zoom(z.value)}),a&&l&&E&&this.register("removeSelection",function(){var z=l.get();if(z.length){var te,le=E.allowed("elements.delete",{elements:z});!1!==le&&(te=H(le)?le:z).length&&a.removeElements(te.slice())}}),$&&this.register("moveCanvas",function(z){$.moveCanvas(z)}),W&&this.register("moveSelection",function(z){W.moveSelection(z.direction,z.accelerated)})},xo.prototype.trigger=function(n,o){if(!this._actions[n])throw P0(n,vh);return this._actions[n](o)},xo.prototype.register=function(n,o){var a=this;if("string"==typeof n)return this._registerAction(n,o);p(n,function(l,d){a._registerAction(d,l)})},xo.prototype._registerAction=function(n,o){if(this.isRegistered(n))throw P0(n,"is already registered");this._actions[n]=o},xo.prototype.unregister=function(n){if(!this.isRegistered(n))throw P0(n,vh);this._actions[n]=void 0},xo.prototype.getActions=function(){return Object.keys(this._actions)},xo.prototype.isRegistered=function(n){return!!this._actions[n]};var p1={__init__:["editorActions"],editorActions:["type",xo]};function hf(n){n.invoke(xo,this)}Ce(hf,xo),hf.$inject=["injector"],hf.prototype._registerDefaultActions=function(n){xo.prototype._registerDefaultActions.call(this,n);var o=n.get("canvas",!1),a=n.get("elementRegistry",!1),l=n.get("selection",!1),d=n.get("spaceTool",!1),b=n.get("lassoTool",!1),A=n.get("handTool",!1),E=n.get("globalConnect",!1),$=n.get("distributeElements",!1),W=n.get("alignElements",!1),z=n.get("directEditing",!1),te=n.get("searchPad",!1),le=n.get("modeling",!1),he=n.get("contextPad",!1);o&&a&&l&&this._registerAction("selectElements",function(){var me=o.getRootElement(),Oe=a.filter(function(Pe){return Pe!==me});return l.select(Oe),Oe}),d&&this._registerAction("spaceTool",function(){d.toggle()}),b&&this._registerAction("lassoTool",function(){b.toggle()}),A&&this._registerAction("handTool",function(){A.toggle()}),E&&this._registerAction("globalConnectTool",function(){E.toggle()}),l&&$&&this._registerAction("distributeElements",function(me){var Oe=l.get();Oe.length&&$.trigger(Oe,me.type)}),l&&W&&this._registerAction("alignElements",function(me){var Oe=l.get(),Pe=[],we=me.type;Oe.length&&(Pe=w(Oe,function(Ee){return!Le(Ee,"bpmn:Lane")}),W.trigger(Pe,we))}),l&&le&&this._registerAction("setColor",function(me){var Oe=l.get();Oe.length&&le.setColor(Oe,me)}),l&&z&&this._registerAction("directEditing",function(){var me=l.get();me.length&&z.activate(me[0])}),te&&this._registerAction("find",function(){te.toggle()}),o&&le&&this._registerAction("moveToOrigin",function(){var me,Oe,Pe=o.getRootElement();me=qn(Oe=Le(Pe,"bpmn:Collaboration")?a.filter(function(we){return Le(we.parent,"bpmn:Collaboration")}):a.filter(function(we){return we!==Pe&&!Le(we.parent,"bpmn:SubProcess")})),le.moveElements(Oe,{x:-me.x,y:-me.y},Pe)}),l&&he&&this._registerAction("replaceElement",function(me){he.triggerEntry("replace","click",me)})};var m1={__depends__:[p1],editorActions:["type",hf]};function R0(n){n.on(["create.init","shape.move.init"],function(o){var a=o.context;wn(o.shape,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(a.gridSnappingContext||(a.gridSnappingContext={}),a.gridSnappingContext.snapLocation="top-left")})}function df(n,o,a){return a||(a="round"),Math[a](n/o)*o}function Ds(n,o,a){var l=!a||!1!==a.active;this._eventBus=o;var d=this;o.on("diagram.init",800,function(){d.setActive(l)}),o.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],1200,function(b){var A=b.originalEvent;if(!(!d.active||A&&Gn(A))){var E=b.context,$=E.gridSnappingContext;$||($=E.gridSnappingContext={}),["x","y"].forEach(function(W){var he,me,Oe,we,Ee,De,Be,z={},te=(me=W,Oe=n,we=(he=b).shape,De=(Ee=he.context.gridSnappingContext).snapLocation,(Be=Ee.snapOffset)&&k(Be[me])||(Be||(Be=Ee.snapOffset={}),k(Be[me])||(Be[me]=0),!we)||(Oe.get(we.id)||(yh(me)?Be[me]+=we[me]+we.width/2:Be[me]+=we[me]+we.height/2),!De)||("x"===me?/left/.test(De)?Be[me]-=we.width/2:/right/.test(De)&&(Be[me]+=we.width/2):/top/.test(De)?Be[me]-=we.height/2:/bottom/.test(De)&&(Be[me]+=we.height/2)),Be[me]);te&&(z.offset=te);var le=function(he,me){var Oe=he.context,Pe=Oe.createConstraints,we=Oe.resizeConstraints||{},Ee=Oe.gridSnappingContext,De=Ee.snapConstraints;if(De&&De[me])return De[me];De||(De=Ee.snapConstraints={}),De[me]||(De[me]={});var Be=Oe.direction;Pe&&(yh(me)?(De.x.min=Pe.left,De.x.max=Pe.right):(De.y.min=Pe.top,De.y.max=Pe.bottom));var He=we.min,rt=we.max;return He&&(yh(me)?M0(Be)?De.x.max=He.left:De.x.min=He.right:$0(Be)?De.y.max=He.top:De.y.min=He.bottom),rt&&(yh(me)?M0(Be)?De.x.min=rt.left:De.x.max=rt.right:$0(Be)?De.y.min=rt.top:De.y.max=rt.bottom),De[me]}(b,W);le&&N(z,le),fc(b,W)||d.snapEvent(b,W,z)})}})}function yh(n){return"x"===n}function $0(n){return-1!==n.indexOf("n")}function M0(n){return-1!==n.indexOf("w")}function gl(n,o){Lt.call(this,n),this._gridSnapping=o;var a=this;this.preExecute("shape.resize",function(l){var d=l.context,b=(d.hints||{}).autoResize;if(b){var A=d.shape,E=d.newBounds;d.newBounds=M(b)?a.snapComplex(E,b):a.snapSimple(A,E)}})}function g1(n,o){n.on(["spaceTool.move","spaceTool.end"],2e3,function(a){var l,d=a.context;d.initialized&&("x"===d.axis?(l=o.snapValue(a.dx),a.x=a.x+l-a.dx,a.dx=l):(l=o.snapValue(a.dy),a.y=a.y+l-a.dy,a.dy=l))})}R0.$inject=["eventBus"],Ds.prototype.snapEvent=function(n,o,a){Ii(n,o,this.snapValue(n[o],a))},Ds.prototype.getGridSpacing=function(){return 10},Ds.prototype.snapValue=function(n,o){var a,l,d=0;return o&&o.offset&&(d=o.offset),n=df(n+=d,10),o&&o.min&&k(a=o.min)&&(a=df(a+d,10,"ceil"),n=Math.max(n,a)),o&&o.max&&k(l=o.max)&&(l=df(l+d,10,"floor"),n=Math.min(n,l)),n-d},Ds.prototype.isActive=function(){return this.active},Ds.prototype.setActive=function(n){this.active=n,this._eventBus.fire("gridSnapping.toggle",{active:n})},Ds.prototype.toggleActive=function(){this.setActive(!this.active)},Ds.$inject=["elementRegistry","eventBus","config.gridSnapping"],gl.$inject=["eventBus","gridSnapping","modeling"],Ce(gl,Lt),gl.prototype.snapSimple=function(n,o){var a=this._gridSnapping;return o.width=a.snapValue(o.width,{min:o.width}),o.height=a.snapValue(o.height,{min:o.height}),o.x=n.x+n.width/2-o.width/2,o.y=n.y+n.height/2-o.height/2,o},gl.prototype.snapComplex=function(n,o){return/w|e/.test(o)&&(n=this.snapHorizontally(n,o)),/n|s/.test(o)&&(n=this.snapVertically(n,o)),n},gl.prototype.snapHorizontally=function(n,o){var a=this._gridSnapping,l=/w/.test(o),d=/e/.test(o),b={};return b.width=a.snapValue(n.width,{min:n.width}),d&&(l?(b.x=a.snapValue(n.x,{max:n.x}),b.width+=a.snapValue(n.x-b.x,{min:n.x-b.x})):n.x=n.x+n.width-b.width),N(n,b),n},gl.prototype.snapVertically=function(n,o){var a=this._gridSnapping,l=/n/.test(o),d=/s/.test(o),b={};return b.height=a.snapValue(n.height,{min:n.height}),l&&(d?(b.y=a.snapValue(n.y,{max:n.y}),b.height+=a.snapValue(n.y-b.y,{min:n.y-b.y})):n.y=n.y+n.height-b.height),N(n,b),n},g1.$inject=["eventBus","gridSnapping"];var v1={__depends__:[{__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",gl],gridSnappingSpaceToolBehavior:["type",g1]}],__init__:["gridSnapping"],gridSnapping:["type",Ds]};function N0(n,o){n.on("autoPlace",2e3,function(a){var l=a.source,d=on(l),b=a.shape,A=Fy(l,b);return["x","y"].forEach(function(E){var $={};A[E]!==d[E]&&(A[E]>d[E]?$.min=A[E]:$.max=A[E],Le(b,"bpmn:TextAnnotation")&&($.offset="x"===E?-b.width/2:-b.height/2),A[E]=o.snapValue(A[E],$))}),A})}function ff(n,o,a){o.on(["create.start","shape.move.start"],1750,function(l){var d=l.context,b=d.shape,A=n.getRootElement();Le(b,"bpmn:Participant")&&Le(A,"bpmn:Process")&&A.children.length&&d.createConstraints&&(b.width=a.snapValue(b.width,{min:b.width}),b.height=a.snapValue(b.height,{min:b.height}))})}function to(n,o,a){Lt.call(this,n),this._gridSnapping=o;var l=this;this.postExecuted(["connection.create","connection.layout"],3e3,function(d){var b=d.context,A=b.connection,E=b.hints||{},$=A.waypoints;E.connectionStart||E.connectionEnd||!1===E.createElementsBehavior||$.length>3&&a.updateWaypoints(A,l.snapMiddleSegments($))})}function y1(n,o,a){var l=Ar(o,a),d={};return"h"===l&&(d.y=n.snapValue(o.y)),"v"===l&&(d.x=n.snapValue(o.x)),("x"in d||"y"in d)&&(o=N({},o,d),a=N({},a,d)),[o,a]}N0.$inject=["eventBus","gridSnapping"],ff.$inject=["canvas","eventBus","gridSnapping"],to.$inject=["eventBus","gridSnapping","modeling"],Ce(to,Lt),to.prototype.snapMiddleSegments=function(n){var o,a=this._gridSnapping;n=n.slice();for(var l=1;l<n.length-2;l++)o=y1(a,n[l],n[l+1]),n[l]=o[0],n[l+1]=o[1];return n};var b1={__depends__:[v1,{__init__:["gridSnappingAutoPlaceBehavior","gridSnappingParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",N0],gridSnappingParticipantBehavior:["type",ff],gridSnappingLayoutConnectionBehavior:["type",to]}],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",R0]};function wc(n,o){this._interactionEvents=o;var a=this;n.on(["interactionEvents.createHit","interactionEvents.updateHit"],function(l){var d=l.element,b=l.gfx;return Le(d,"bpmn:Lane")?a.createParticipantHit(d,b):Le(d,"bpmn:Participant")?kn(d)?a.createParticipantHit(d,b):a.createDefaultHit(d,b):Le(d,"bpmn:SubProcess")?kn(d)?a.createSubProcessHit(d,b):a.createDefaultHit(d,b):void 0})}wc.$inject=["eventBus","interactionEvents"],wc.prototype.createDefaultHit=function(n,o){return this._interactionEvents.removeHits(o),this._interactionEvents.createDefaultHit(n,o),!0},wc.prototype.createParticipantHit=function(n,o){return this._interactionEvents.removeHits(o),this._interactionEvents.createBoxHit(o,"no-move",{width:n.width,height:n.height}),this._interactionEvents.createBoxHit(o,"click-stroke",{width:n.width,height:n.height}),this._interactionEvents.createBoxHit(o,"all",{width:30,height:n.height}),!0},wc.prototype.createSubProcessHit=function(n,o){return this._interactionEvents.removeHits(o),this._interactionEvents.createBoxHit(o,"no-move",{width:n.width,height:n.height}),this._interactionEvents.createBoxHit(o,"click-stroke",{width:n.width,height:n.height}),this._interactionEvents.createBoxHit(o,"all",{width:n.width,height:30}),!0};var L0={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",wc]};function pf(n){n.invoke(rs,this)}Ce(pf,rs),pf.$inject=["injector"],pf.prototype.registerBindings=function(n,o){function a(l,d){o.isRegistered(l)&&n.addListener(d)}rs.prototype.registerBindings.call(this,n,o),a("selectElements",function(l){var d=l.keyEvent;if(n.isKey(["a","A"],d)&&n.isCmd(d))return o.trigger("selectElements"),!0}),a("find",function(l){var d=l.keyEvent;if(n.isKey(["f","F"],d)&&n.isCmd(d))return o.trigger("find"),!0}),a("spaceTool",function(l){var d=l.keyEvent;if(!n.hasModifier(d))return n.isKey(["s","S"],d)?(o.trigger("spaceTool"),!0):void 0}),a("lassoTool",function(l){var d=l.keyEvent;if(!n.hasModifier(d))return n.isKey(["l","L"],d)?(o.trigger("lassoTool"),!0):void 0}),a("handTool",function(l){var d=l.keyEvent;if(!n.hasModifier(d))return n.isKey(["h","H"],d)?(o.trigger("handTool"),!0):void 0}),a("globalConnectTool",function(l){var d=l.keyEvent;if(!n.hasModifier(d))return n.isKey(["c","C"],d)?(o.trigger("globalConnectTool"),!0):void 0}),a("directEditing",function(l){var d=l.keyEvent;if(!n.hasModifier(d))return n.isKey(["e","E"],d)?(o.trigger("directEditing"),!0):void 0}),a("replaceElement",function(l){var d=l.keyEvent;if(!n.hasModifier(d))return n.isKey(["r","R"],d)?(o.trigger("replaceElement",d),!0):void 0})};var C1={__depends__:[el],__init__:["keyboardBindings"],keyboardBindings:["type",pf]},B0={moveSpeed:1,moveSpeedAccelerated:10},w1={ArrowLeft:"left",Left:"left",ArrowUp:"up",Up:"up",ArrowRight:"right",Right:"right",ArrowDown:"down",Down:"down"},F0={left:function(n){return{x:-n,y:0}},up:function(n){return{x:0,y:-n}},right:function(n){return{x:n,y:0}},down:function(n){return{x:0,y:n}}};function gf(n,o,a,l,d){var b=this;this._config=N({},B0,n||{}),o.addListener(1500,function(A){var E=A.keyEvent,$=w1[E.key];if($&&!o.isCmd(E)){var W=o.isShift(E);return b.moveSelection($,W),!0}}),this.moveSelection=function(A,E){var $=d.get();if($.length){var z=F0[A](this._config[E?"moveSpeedAccelerated":"moveSpeed"]);l.allowed("elements.move",{shapes:$})&&a.moveElements($,z)}}}gf.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];var bh={__depends__:[el,Do],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",gf]};function Ch(n,o,a,l){this._dragging=l,this._rules=o;var d=this;n.on("resize.start",function(A){var E,W;W=(E=A.context).minBounds,void 0===E.resizeConstraints&&(void 0===W&&(W=d.computeMinResizeBox(E)),E.resizeConstraints={min:Yt(W)})}),n.on("resize.move",function(A){!function b(A,E){var le,he,me,Oe,Pe,we,W=A.shape,z=A.direction,te=A.resizeConstraints;A.delta=E,Oe=(me=E).x,Pe=me.y,we={x:(le=W).x,y:le.y,width:le.width,height:le.height},-1!==(he=z).indexOf("n")?(we.y=le.y+Pe,we.height=le.height-Pe):-1!==he.indexOf("s")&&(we.height=le.height+Pe),-1!==he.indexOf("e")?we.width=le.width+Oe:-1!==he.indexOf("w")&&(we.x=le.x+Oe,we.width=le.width-Oe),A.newBounds=function(le,he){if(!he)return le;var me=Yt(le);return ja({top:Ca("top",me,he),right:Ca("right",me,he),bottom:Ca("bottom",me,he),left:Ca("left",me,he)})}(we,te),A.canExecute=d.canResize(A)}(A.context,{x:A.dx,y:A.dy})}),n.on("resize.end",function(A){!function(E){var te,le,$=E.shape,z=E.newBounds;if(E.canExecute){if(te=$,le=z=xp(z),te.x===le.x&&te.y===le.y&&te.width===le.width&&te.height===le.height)return;a.resizeShape($,z)}}(A.context)})}function Km(n,o){var a=on(n),l=Yt(n),d={x:a.x,y:a.y};return-1!==o.indexOf("n")?d.y=l.top:-1!==o.indexOf("s")&&(d.y=l.bottom),-1!==o.indexOf("e")?d.x=l.right:-1!==o.indexOf("w")&&(d.x=l.left),d}function W0(n){return"n"===n||"s"===n?"resize-ns":"e"===n||"w"===n?"resize-ew":"nw"===n||"se"===n?"resize-nwse":"resize-nesw"}Ch.prototype.canResize=function(n){var o=this._rules,a=re(n,["newBounds","shape","delta","direction"]);return o.allowed("shape.resize",a)},Ch.prototype.activate=function(n,o,a){var l,d,b=this._dragging;if("string"==typeof a&&(a={direction:a}),!(d=(l=N({shape:o},a)).direction))throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");b.init(n,Km(o,d),"resize",{autoActivate:!0,cursor:W0(d),data:{shape:o,context:l}})},Ch.prototype.computeMinResizeBox=function(n){var a,l,d,b,A,E,$,o=n.shape;return a=n.direction,l=o,d=n.minDimensions||{width:10,height:10},b=zm(o,n.childrenBoxPadding),A=Yt(l),E={top:/n/.test(a)?A.bottom-d.height:A.top,left:/w/.test(a)?A.right-d.width:A.left,bottom:/s/.test(a)?A.top+d.height:A.bottom,right:/e/.test(a)?A.left+d.width:A.right},$=b?Yt(b):E,ja({top:hl(E.top,$.top),left:hl(E.left,$.left),bottom:ch(E.bottom,$.bottom),right:ch(E.right,$.right)})},Ch.$inject=["eventBus","rules","modeling","dragging"];var Ym="djs-resizing",G0="resize-not-ok";function vf(n,o,a){n.on("resize.move",500,function(l){var d,b,A,E;b=(d=l.context).shape,A=d.newBounds,(E=d.frame)||(E=d.frame=a.addFrame(b,o.getActiveLayer()),o.addMarker(b,Ym)),A.width>5&&yt(E,{x:A.x,width:A.width}),A.height>5&&yt(E,{y:A.y,height:A.height}),d.canExecute?Fe(E).remove(G0):Fe(E).add(G0)}),n.on("resize.cleanup",function(l){var d,b;b=(d=l.context).shape,d.frame&&ot(d.frame),o.removeMarker(b,Ym)})}vf.$inject=["eventBus","canvas","previewSupport"];var j0=["n","w","s","e","nw","ne","se","sw"];function Fs(n,o,a,l){this._resize=l,this._canvas=o;var d=this;n.on("selection.changed",function(b){var A=b.newSelection;d.removeResizers(),1===A.length&&p(A,D(d.addResizer,d))}),n.on("shape.changed",function(b){var A=b.element;a.isSelected(A)&&(d.removeResizers(),d.addResizer(A))})}Fs.prototype.makeDraggable=function(n,o,a){var l=this._resize;function d(b){is(b)&&l.activate(b,n,a)}ct.bind(o,"mousedown",d),ct.bind(o,"touchstart",d)},Fs.prototype._createResizer=function(n,o,a,l){var W,z,d=this._getResizersParent(),b=(z={x:0,y:0},-1!==(W=l).indexOf("e")?z.x=6:-1!==W.indexOf("w")&&(z.x=-6),-1!==W.indexOf("s")?z.y=6:-1!==W.indexOf("n")&&(z.y=-6),z),A=jt("g");Fe(A).add("djs-resizer"),Fe(A).add("djs-resizer-"+n.id),Fe(A).add("djs-resizer-"+l),Ze(d,A);var E=jt("rect");yt(E,{x:-4+b.x,y:-4+b.y,width:8,height:8}),Fe(E).add("djs-resizer-visual"),Ze(A,E);var $=jt("rect");return yt($,{x:-10+b.x,y:-10+b.y,width:20,height:20}),Fe($).add("djs-resizer-hit"),Ze(A,$),Op(A,o,a),A},Fs.prototype.createResizer=function(n,o){var a=Km(n,o),l=this._createResizer(n,a.x,a.y,o);this.makeDraggable(n,l,o)},Fs.prototype.addResizer=function(n){var o=this;!n.waypoints&&this._resize.canResize({shape:n})&&p(j0,function(a){o.createResizer(n,a)})},Fs.prototype.removeResizers=function(){It(this._getResizersParent())},Fs.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")},Fs.$inject=["eventBus","canvas","selection","resize"];var Z0={__depends__:[Zo,Ns,Yd],__init__:["resize","resizePreview","resizeHandles"],resize:["type",Ch],resizePreview:["type",vf],resizeHandles:["type",Fs]};function xc(n,o,a,l,d,b,A){function E($,W){(W||wn($,["bpmn:Task","bpmn:TextAnnotation","bpmn:Participant"])||V0($))&&l.activate($)}this._bpmnFactory=o,this._canvas=a,this._modeling=d,this._textRenderer=A,l.registerProvider(this),n.on("element.dblclick",function($){E($.element,!0)}),n.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open","root.set","selection.changed"],function($){l.isActive()&&l.complete()}),n.on(["shape.remove","connection.remove"],2e3,function($){l.isActive($.element)&&l.cancel()}),n.on(["commandStack.changed"],function($){l.isActive()&&l.cancel()}),n.on("directEditing.activate",function($){b.removeResizers()}),n.on("create.end",500,function($){var W=$.context;$.isTouch||$.context.canExecute&&(W.hints&&!1===W.hints.createElementsBehavior||E(W.shape))}),n.on("autoPlace.end",500,function($){E($.shape)})}function V0(n){return Le(n,"bpmn:SubProcess")&&!kn(n)}xc.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"],xc.prototype.activate=function(n){var o=Dr(n);if(void 0!==o){var a={text:o};N(a,this.getEditingBBox(n));var l={};return(wn(n,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||V0(n))&&N(l,{centerVertically:!0}),la(n)&&N(l,{autoResize:!0}),Le(n,"bpmn:TextAnnotation")&&N(l,{resizable:!0,autoResize:!0}),N(a,{options:l}),a}},xc.prototype.getEditingBBox=function(n){var He,o=this._canvas,a=n.label||n,l=o.getAbsoluteBBox(a),d=l.x+l.width/2,b=l.y+l.height/2,A={x:l.x,y:l.y},E=o.zoom(),$=this._textRenderer.getDefaultStyle(),W=this._textRenderer.getExternalStyle(),z=W.fontSize*E,te=W.lineHeight,le=$.fontSize*E,he=$.lineHeight,me={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};(Le(n,"bpmn:Lane")||Le(He=n,"bpmn:Participant")&&kn(He))&&(N(A,{width:l.height,height:30*E,x:l.x-l.height/2+15*E,y:b-30*E/2}),N(me,{fontSize:le+"px",lineHeight:he,paddingTop:7*E+"px",paddingBottom:7*E+"px",paddingLeft:5*E+"px",paddingRight:5*E+"px",transform:"rotate(-90deg)"})),(wn(n,["bpmn:Task","bpmn:CallActivity"])||function(He){return Le(He,"bpmn:Participant")&&!kn(He)}(n)||V0(n))&&(N(A,{width:l.width,height:l.height}),N(me,{fontSize:le+"px",lineHeight:he,paddingTop:7*E+"px",paddingBottom:7*E+"px",paddingLeft:5*E+"px",paddingRight:5*E+"px"})),function(He){return Le(He,"bpmn:SubProcess")&&kn(He)}(n)&&(N(A,{width:l.width,x:l.x}),N(me,{fontSize:le+"px",lineHeight:he,paddingTop:7*E+"px",paddingBottom:7*E+"px",paddingLeft:5*E+"px",paddingRight:5*E+"px"}));var Oe=90*E,Pe=7*E,we=4*E;if(a.labelTarget&&(N(A,{width:Oe,height:l.height+Pe+we,x:d-Oe/2,y:l.y-Pe}),N(me,{fontSize:z+"px",lineHeight:te,paddingTop:Pe+"px",paddingBottom:we+"px"})),la(a)&&!bu(a)&&!Vi(a)){var Ee=ca(n),De=o.getAbsoluteBBox({x:Ee.x,y:Ee.y,width:0,height:0}),Be=z+Pe+we;N(A,{width:Oe,height:Be,x:De.x-Oe/2,y:De.y-Be/2}),N(me,{fontSize:z+"px",lineHeight:te,paddingTop:Pe+"px",paddingBottom:we+"px"})}return Le(n,"bpmn:TextAnnotation")&&(N(A,{width:l.width,height:l.height,minWidth:30*E,minHeight:10*E}),N(me,{textAlign:"left",paddingTop:5*E+"px",paddingBottom:7*E+"px",paddingLeft:7*E+"px",paddingRight:5*E+"px",fontSize:le+"px",lineHeight:he})),{bounds:A,style:me}},xc.prototype.update=function(n,o,a,l){var d,b,A;Le(n,"bpmn:TextAnnotation")&&(b=this._canvas.getAbsoluteBBox(n),d={x:n.x,y:n.y,width:n.width/b.width*l.width,height:n.height/b.height*l.height}),(A=o)&&A.trim()||(o=null),this._modeling.updateLabel(n,o,d)};var Q0="djs-element-hidden",Jm="djs-label-hidden";function Ws(n,o,a,l){var d,b,A,E=this,$=o.getDefaultLayer();n.on("directEditing.activate",function(W){var z=W.active;if(Le(d=z.element.label||z.element,"bpmn:TextAnnotation")){b=o.getAbsoluteBBox(d),A=jt("g");var te=l.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:d.width,containerHeight:d.height,position:{mx:0,my:0}}),le=E.path=jt("path");yt(le,{d:te,strokeWidth:2,stroke:H0(d)}),Ze(A,le),Ze($,A),Br(A,d.x,d.y)}Le(d,"bpmn:TextAnnotation")||d.labelTarget?o.addMarker(d,Q0):(Le(d,"bpmn:Task")||Le(d,"bpmn:CallActivity")||Le(d,"bpmn:SubProcess")||Le(d,"bpmn:Participant"))&&o.addMarker(d,Jm)}),n.on("directEditing.resize",function(W){if(Le(d,"bpmn:TextAnnotation")){var le=Math.max(d.height/b.height*(W.height+W.dy),0),he=l.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:d.width,containerHeight:le,position:{mx:0,my:0}});yt(E.path,{d:he})}}),n.on(["directEditing.complete","directEditing.cancel"],function(W){var z=W.active;z&&(o.removeMarker(z.element.label||z.element,Q0),o.removeMarker(d,Jm)),d=void 0,b=void 0,A&&(ot(A),A=void 0)})}function H0(n,o){return Rn(n).get("stroke")||o||"black"}Ws.$inject=["eventBus","canvas","elementRegistry","pathMap"];var Bw={__depends__:[Su,Z0,h0],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",xc],labelEditingPreview:["type",Ws]},eg=["top","bottom","left","right"];function yf(n,o){function a(l){if(bu(l)){var d=function(b){var le,he,A=on(b.label),E=z0(on(b),A);if(-1!==eg.indexOf(E)){var W=(he=on(le=b),[].concat(le.incoming.map(function(Oe){return Oe.waypoints[Oe.waypoints.length-2]}),le.outgoing.map(function(Oe){return Oe.waypoints[1]})).map(function(Oe){return z0(he,Oe)}));if(b.host){var z=function(le){var he,me=le.host,Oe=bi(on(le),me);return he=Oe.indexOf("-")>=0?Oe.split("-"):[Oe],eg.filter(function(Pe){return-1===he.indexOf(Pe)})}(b);W=W.concat(z)}var te=eg.filter(function(le){return-1===W.indexOf(le)});if(-1===te.indexOf(E))return te[0]}}(l);d&&function(b,A){var E=on(b),$=b.label,W=on($);if($.parent){var z,te=Yt(b);switch(A){case"top":z={x:E.x,y:te.top-10-$.height/2};break;case"left":z={x:te.left-10-$.width/2,y:E.y};break;case"bottom":z={x:E.x,y:te.bottom+10+$.height/2};break;case"right":z={x:te.right+10+$.width/2,y:E.y}}var le=Kr(z,W);o.moveShape($,le)}}(l,d)}}Lt.call(this,n),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],function(l){var d=l.context,b=d.connection,E=b.target;!1!==(d.hints||{}).createElementsBehavior&&(a(b.source),a(E))}),this.postExecuted(["label.create"],function(l){var d=l.context;!1!==(d.hints||{}).createElementsBehavior&&a(d.shape.labelTarget)}),this.postExecuted(["elements.create"],function(l){var d=l.context;!1!==(d.hints||{}).createElementsBehavior&&d.elements.forEach(function(A){a(A)})})}function z0(n,o){return bi(o,n,5)}function tg(n,o,a){Lt.call(this,n),this.preExecute("shape.append",function(l){var d=l.source,b=l.shape;l.position||(l.position=Le(b,"bpmn:TextAnnotation")?{x:d.x+d.width/2+75,y:d.y-50-b.height/2}:{x:d.x+d.width+80+b.width/2,y:d.y+d.height/2})},!0)}function as(n,o){n.invoke(Lt,this),this.postExecute("shape.move",function(a){var l=a.newParent,d=a.shape;p(w(d.incoming.concat(d.outgoing),function(b){return Le(b,"bpmn:Association")}),function(b){o.moveConnection(b,{x:0,y:0},l)})},!0)}function bf(n,o){o.invoke(Lt,this),this._bpmnReplace=n;var a=this;this.postExecuted("elements.create",500,function(l){var d=l.elements;1===(d=d.filter(function(b){return U0(b,b.host)})).length&&d.map(function(b){return d.indexOf(b)}).forEach(function(b){l.elements[b]=a.replaceShape(d[b],d[b])})},!0),this.preExecute("elements.move",500,function(l){var d=l.shapes,b=l.newHost;if(1===d.length){var A=d[0];U0(A,b)&&(l.shapes=[a.replaceShape(A,b)])}},!0)}function U0(n,o){return!Vi(n)&&wn(n,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!o}function Cf(n,o){function a(l){return w(l.attachers,function(d){return Le(d,"bpmn:BoundaryEvent")})}Lt.call(this,n),this.postExecute("connection.create",function(l){var d=l.context.source,b=l.context.target,A=a(b);Le(d,"bpmn:EventBasedGateway")&&Le(b,"bpmn:ReceiveTask")&&A.length>0&&o.removeElements(A)}),this.postExecute("connection.reconnect",function(l){var b=l.context.newSource;Le(l.context.oldSource,"bpmn:Gateway")&&Le(b,"bpmn:EventBasedGateway")&&p(b.outgoing,function(A){var E=A.target,$=a(E);Le(E,"bpmn:ReceiveTask")&&$.length>0&&o.removeElements($)})})}function ng(n){n.invoke(Lt,this),this.preExecute("shape.create",1500,function(o){var a=o.context,l=a.parent,d=a.shape;Le(l,"bpmn:Lane")&&!Le(d,"bpmn:Lane")&&(a.parent=jd(l,"bpmn:Participant"))})}function ig(n,o,a){Lt.call(this,n),this.preExecute("shape.create",function(l){var d=l.context.shape;if(Le(d,"bpmn:DataObjectReference")&&"label"!==d.type){var b=o.create("bpmn:DataObject");d.businessObject.dataObjectRef=b}})}Ce(yf,Lt),yf.$inject=["eventBus","modeling"],Ce(tg,Lt),tg.$inject=["eventBus","elementFactory","bpmnRules"],Ce(as,Lt),as.$inject=["injector","modeling"],bf.$inject=["bpmnReplace","injector"],Ce(bf,Lt),bf.prototype.replaceShape=function(n,o){var a,l=(a=Dt(n).eventDefinitions)&&a[0],d={type:"bpmn:BoundaryEvent",host:o};return l&&(d.eventDefinitionType=l.$type),this._bpmnReplace.replaceElement(n,d,{layoutConnection:!1})},Cf.$inject=["eventBus","modeling"],Ce(Cf,Lt),ng.$inject=["injector"],Ce(ng,Lt),ig.$inject=["eventBus","bpmnFactory","moddle"],Ce(ig,Lt);function vl(n,o,a){function l(){var d=n.getRootElement();return Le(d,"bpmn:Collaboration")?d:a.makeCollaboration()}Lt.call(this,o),o.on(["create.start","shape.move.start"],2e3,function(d){var te,le,b=d.context,A=b.shape,E=n.getRootElement();if(Le(A,"bpmn:Participant")&&Le(E,"bpmn:Process")&&E.children.length){var $=E.children.filter(function(te){return!Le(te,"bpmn:Group")&&!Vi(te)&&!te.waypoints});if($.length){var W=qn($),z=function(te,le){le={width:le.width+40+30,height:le.height+40};var he=Math.max(te.width,le.width),me=Math.max(te.height,le.height);return{x:-he/2,y:-me/2,width:he,height:me}}(A,W);N(A,z),b.createConstraints=(te=A,{bottom:(le=Yt(le=W)).top+te.height/2-20,left:le.right-te.width/2+20,top:le.bottom-te.height/2+20,right:le.left+te.width/2-20-30})}}}),o.on("create.start",2e3,function(d){var b=d.context.shape,A=n.getRootElement(),E=n.getGraphics(A);function $(W){W.element=A,W.gfx=E}Le(b,"bpmn:Participant")&&Le(A,"bpmn:Process")&&(o.on("element.hover",2e3,$),o.once("create.cleanup",function(){o.off("element.hover",$)}))}),this.preExecute("elements.create",2e3,function(d){var b,E=d.parent,$=S(d.elements,function(z){return Le(z,"bpmn:Participant")});$&&Le(E,"bpmn:Process")&&(d.parent=l(),(b=d.hints=d.hints||{}).participant=$,b.process=E,b.processRef=Dt($).get("processRef"))},!0),this.preExecute("shape.create",function(d){var b=d.parent,A=d.shape;Le(A,"bpmn:Participant")&&Le(b,"bpmn:Process")&&(d.parent=l(),d.process=b,d.processRef=Dt(A).get("processRef"))},!0),this.execute("shape.create",function(d){var b=d.hints||{},A=d.process||b.process,E=d.shape,$=b.participant;!A||$&&E!==$||Dt(E).set("processRef",Dt(A))},!0),this.revert("shape.create",function(d){var b=d.hints||{},E=d.processRef||b.processRef,$=d.shape,W=b.participant;!d.process&&!b.process||W&&$!==W||Dt($).set("processRef",E)},!0),this.postExecute("shape.create",function(d){var A=d.process||d.hints.process,E=d.shape,$=(d.hints||{}).participant;if(A){var W=A.children.slice();$?E===$&&a.moveElements(W,{x:0,y:0},$):a.moveElements(W,{x:0,y:0},E)}},!0)}vl.$inject=["canvas","eventBus","modeling"],Ce(vl,Lt);var xh="__targetRef_placeholder";function og(n,o){function a(b,A){var E=b.get("properties"),$=S(E,function(W){return W.name===xh});return!$&&A&&hi(E,$=o.create("bpmn:Property",{name:xh})),$}function l(b,A){var W,z,E=a(b);E&&(W=E,z=A,S(b.get("dataInputAssociations"),function(te){return te!==z&&te.targetRef===W})||gi(b.get("properties"),E))}function d(b){var A,E=b.context,$=E.connection,W=$.businessObject,z=$.target,te=z&&z.businessObject,le=E.newTarget,he=le&&le.businessObject,me=E.oldTarget||E.target,Oe=me&&me.businessObject,Pe=$.businessObject;Oe&&Oe!==te&&l(Oe,W),he&&he!==te&&l(he,W),te?(A=a(te,!0),Pe.targetRef=A):Pe.targetRef=null}Lt.call(this,n),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],K0(d)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],K0(d))}function K0(n){return function(o){if(Le(o.context.connection,"bpmn:DataInputAssociation"))return n(o)}}function Ah(n){this._bpmnUpdater=n}function sg(n,o,a,l){function d(A){return A.children.filter(function(E){return Le(E,"bpmn:DataStoreReference")&&!E.labelTarget})}function b(A,E){var $=A.businessObject||A;if(E=E||a.filter(function(z){return Le(z,"bpmn:Participant")&&Dt(z).processRef})[0]){var W=E.businessObject||E;o.execute("dataStore.updateContainment",{dataStoreBo:$,dataStoreDi:Rn(A),newSemanticParent:W.processRef||W,newDiParent:Rn(E)})}}Lt.call(this,l),o.registerHandler("dataStore.updateContainment",Ah),this.preExecute("shape.create",function(A){var E=A.context,$=E.shape;Le($,"bpmn:DataStoreReference")&&"label"!==$.type&&(E.hints||(E.hints={}),E.hints.autoResize=!1)}),this.preExecute("elements.move",function(A){var E=A.context,$=E.shapes;$.filter(function(W){return Le(W,"bpmn:DataStoreReference")}).length&&(E.hints||(E.hints={}),E.hints.autoResize=$.filter(function(W){return!Le(W,"bpmn:DataStoreReference")}))}),this.postExecute("shape.create",function(A){var E=A.context.shape,$=E.parent;Le(E,"bpmn:DataStoreReference")&&"label"!==E.type&&Le($,"bpmn:Collaboration")&&b(E)}),this.postExecute("shape.move",function(A){var E=A.context,$=E.shape,W=E.oldParent,z=$.parent;Le(W,"bpmn:Collaboration")||Le($,"bpmn:DataStoreReference")&&"label"!==$.type&&Le(z,"bpmn:Collaboration")&&b($,Le(W,"bpmn:Participant")?W:function(te,le){for(;te.parent;){if(Le(te.parent,"bpmn:Participant"))return te.parent;te=te.parent}}(W))}),this.postExecute("shape.delete",function(A){var E=A.context.shape,$=n.getRootElement();wn(E,["bpmn:Participant","bpmn:SubProcess"])&&Le($,"bpmn:Collaboration")&&d($).filter(function(W){return function(z,te){for(var le=z.businessObject||z,he=te.businessObject||te;le.$parent;){if(le.$parent===he.processRef||he)return!0;le=le.$parent}return!1}(W,E)}).forEach(function(W){b(W)})}),this.postExecute("canvas.updateRoot",function(A){var E=A.context,W=E.newRoot;d(E.oldRoot).forEach(function(z){Le(W,"bpmn:Process")&&b(z,W)})})}function ag(n,o,a){Lt.call(this,n),this.postExecuted("shape.delete",500,function(l){var $,z,te,le,he,me,Oe,d=l.context,b=d.hints,A=d.shape,E=d.oldParent;Le(A,"bpmn:Lane")&&(b&&b.nested||($=A,he=fl(E),me=[],Oe=[],Mr(he,function(Pe){return Pe.y>$.y?Oe.push(Pe):me.push(Pe),Pe.children}),he.length&&(z=Oe.length&&me.length?$.height/2:$.height,me.length&&(te=a.calculateAdjustments(me,"y",z,$.y-10),a.makeSpace(te.movingShapes,te.resizingShapes,{x:0,y:z},"s")),Oe.length&&(le=a.calculateAdjustments(Oe,"y",-z,$.y+$.height+10),a.makeSpace(le.movingShapes,le.resizingShapes,{x:0,y:-z},"n")))))})}function Ac(n,o){o.invoke(Lt,this),this._bpmnReplace=n;var a=this;this.postExecuted("elements.create",500,function(l){var d=l.elements;d.filter(function(b){return kr(b,b.host)}).map(function(b){return d.indexOf(b)}).forEach(function(b){l.elements[b]=a.replaceShape(d[b])})},!0),this.preExecute("elements.move",500,function(l){var d=l.shapes,b=l.newHost;d.forEach(function(A,E){var W=A.host;kr(A,-1!==d.indexOf(W)?W:b)&&(d[E]=a.replaceShape(A))})},!0)}function kr(n,o){return!Vi(n)&&Le(n,"bpmn:BoundaryEvent")&&!o}function yl(n,o,a){function l(d,b,A){var E,$,W,te,le,he,me,Oe=b.waypoints,Pe=d.outgoing.slice(),we=d.incoming.slice(),Ee=Vd(Oe,me=k(A.width)?on(A):A);if(Ee){if(E=Oe.slice(0,Ee.index),$=Oe.slice(Ee.index+(Ee.bendpoint?1:0)),!E.length||!$.length)return;W=Ee.bendpoint?Oe[Ee.index]:me,1!==E.length&&Y0(d,E[E.length-1])||E.push(xf(W)),1!==$.length&&Y0(d,$[0])||$.unshift(xf(W))}te=b.target,o.canConnect(b.source,d,b)&&(a.reconnectEnd(b,d,E||me),le=b),o.canConnect(d,te,b)&&(le?he=a.connect(d,te,{type:b.type,waypoints:$}):(a.reconnectStart(b,d,$||me),he=b));var De=[].concat(le&&w(we,function(Be){return Be.source===le.source})||[],he&&w(Pe,function(Be){return Be.target===he.target})||[]);De.length&&a.removeElements(De)}Lt.call(this,n),this.preExecute("elements.move",function(d){var b=d.newParent,A=d.shapes,E=d.delta,$=A[0];if($&&b){b&&b.waypoints&&(d.newParent=b=b.parent);var W=on($),z={x:W.x+E.x,y:W.y+E.y},te=S(b.children,function(le){return o.canInsert(A,le)&&Vd(le.waypoints,z)});te&&(d.targetFlow=te,d.position=z)}},!0),this.postExecuted("elements.move",function(d){var A=d.targetFlow;A&&l(d.shapes[0],A,d.position)},!0),this.preExecute("shape.create",function(d){var b=d.parent;o.canInsert(d.shape,b)&&(d.targetFlow=b,d.parent=b.parent)},!0),this.postExecuted("shape.create",function(d){var A=d.targetFlow;A&&l(d.shape,A,d.position)},!0)}function Y0(n,o){var a=o.x,l=o.y;return a>=n.x&&a<=n.x+n.width&&l>=n.y&&l<=n.y+n.height}function xf(n){return N({},n)}function Oc(n,o){Lt.call(this,n),this.preExecuted("connection.create",function(a){var l=a.context,b=l.source,A=l.target,E=l.hints;E&&!1===E.createElementsBehavior||!bl(l.connection)||(Le(b,"bpmn:EventBasedGateway")?A.incoming.filter(bl):A.incoming.filter(function(W){return bl(W)&&Le(W.source,"bpmn:EventBasedGateway")})).forEach(function(W){o.removeConnection(W)})}),this.preExecuted("shape.replace",function(a){var l=a.context.newShape;Le(l,"bpmn:EventBasedGateway")&&l.outgoing.filter(bl).reduce(function(d,b){return d.includes(b.target)?d:d.concat(b.target)},[]).forEach(function(d){d.incoming.filter(bl).forEach(function(b){const A=d.incoming.filter(bl).filter(function(E){return E.source===l});(b.source!==l||A.length>1)&&o.removeConnection(b)})})})}function bl(n){return Le(n,"bpmn:SequenceFlow")}og.$inject=["eventBus","bpmnFactory"],Ce(og,Lt),Ah.$inject=["bpmnUpdater"],Ah.prototype.execute=function(n){var o=n.dataStoreBo,a=n.dataStoreDi,l=n.newSemanticParent,d=n.newDiParent;n.oldSemanticParent=o.$parent,n.oldDiParent=a.$parent,this._bpmnUpdater.updateSemanticParent(o,l),this._bpmnUpdater.updateDiParent(a,d)},Ah.prototype.revert=function(n){var a=n.dataStoreDi,d=n.oldDiParent;this._bpmnUpdater.updateSemanticParent(n.dataStoreBo,n.oldSemanticParent),this._bpmnUpdater.updateDiParent(a,d)},sg.$inject=["canvas","commandStack","elementRegistry","eventBus"],Ce(sg,Lt),ag.$inject=["eventBus","modeling","spaceTool"],Ce(ag,Lt),Ac.$inject=["bpmnReplace","injector"],Ce(Ac,Lt),Ac.prototype.replaceShape=function(n){var a,l=(a=Dt(n).eventDefinitions)&&a[0];return this._bpmnReplace.replaceElement(n,l?{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:l.$type}:{type:"bpmn:IntermediateThrowEvent"},{layoutConnection:!1})},Ce(yl,Lt),yl.$inject=["eventBus","bpmnRules","modeling"],Oc.$inject=["eventBus","modeling"],Ce(Oc,Lt);function hr(n,o,a){o.on(["create.hover","create.move","create.out","create.end","shape.move.hover","shape.move.move","shape.move.out","shape.move.end"],1500,function(l){var d=l.context.shape||l.shape,b=l.hover;Le(b,"bpmn:Lane")&&!wn(d,["bpmn:Lane","bpmn:Participant"])&&(l.hover=eo(b),l.hoverGfx=n.getGraphics(l.hover));var A=a.getRootElement();b!==A&&(d.labelTarget||Le(d,"bpmn:Group"))&&(l.hover=A,l.hoverGfx=n.getGraphics(l.hover))}),o.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],1500,function(l){var d=l.hover;Le(d,"bpmn:Lane")&&(l.hover=eo(d)||d,l.hoverGfx=n.getGraphics(l.hover))}),o.on(["bendpoint.move.hover"],1500,function(l){var b=l.hover,A=l.context.type;Le(b,"bpmn:Lane")&&/reconnect/.test(A)&&(l.hover=eo(b)||b,l.hoverGfx=n.getGraphics(l.hover))}),o.on(["connect.start"],1500,function(l){var d=l.context,b=d.start;Le(b,"bpmn:Lane")&&(d.start=eo(b)||b)}),o.on("shape.move.start",2e3,function(l){var d=l.shape;Le(d,"bpmn:Lane")&&(l.shape=eo(d)||d)})}function Af(n,o,a,l,d,b){function A(te,le,he){var Pe,me=a.filter(function(Oe){return Le(Oe,"bpmn:Group")}).filter(function(Oe){return Oe.businessObject!==he});le&&(Pe=le,!me.some(function(we){var Ee=Dt(we);return(Ee.categoryValueRef&&Ee.categoryValueRef.$parent)===Pe}))&&function(Oe){var Pe=Oe.$parent;Pe&&(gi(Pe.get("rootElements"),Oe),Oe.$parent=null)}(le),te&&!function(Oe,Pe){return Oe.some(function(we){return Dt(we).categoryValueRef===Pe})}(me,te)&&function(Oe){var Pe=Oe.$parent;Pe&&(gi(Pe.get("categoryValue"),Oe),Oe.$parent=null)}(te)}function E(te,le){return he=te,me=le,Oe=o.getDefinitions(),hi(me.get("categoryValue"),he),he.$parent=me,hi(Oe.get("rootElements"),me),me.$parent=Oe,he;var he,me,Oe}function $(te,le){var he=Dt(te),me=he.categoryValueRef;me||(me=he.categoryValueRef=le.categoryValue=le.categoryValue||n.create("bpmn:CategoryValue"));var Oe=me.$parent;Oe||(Oe=me.$parent=le.category=le.category||n.create("bpmn:Category")),E(me,Oe,o.getDefinitions())}function W(te,le){var he=le.category,me=le.categoryValue,Oe=Dt(te);me?(Oe.categoryValueRef=null,A(me,he,Oe)):A(null,Oe.categoryValueRef.$parent,Oe)}function z(te,le){var he=n.create(te.$type);return b.copyElement(te,he,null,le)}d.invoke(Lt,this),this.execute("label.create",function(te){var le=te.context,he=le.labelTarget;Le(he,"bpmn:Group")&&$(he,le)}),this.revert("label.create",function(te){var le=te.context,he=le.labelTarget;Le(he,"bpmn:Group")&&W(he,le)}),this.execute("shape.delete",function(te){var le=te.context,he=le.shape,me=Dt(he);if(Le(he,"bpmn:Group")&&!he.labelTarget){var Oe=le.categoryValue=me.categoryValueRef;Oe&&(A(Oe,le.category=Oe.$parent,me),me.categoryValueRef=null)}}),this.reverted("shape.delete",function(te){var le=te.context,he=le.shape;if(Le(he,"bpmn:Group")&&!he.labelTarget){var me=le.category,Oe=le.categoryValue,Pe=Dt(he);Oe&&(Pe.categoryValueRef=Oe,E(Oe,me))}}),this.execute("shape.create",function(te){var le=te.context,he=le.shape;Le(he,"bpmn:Group")&&!he.labelTarget&&Dt(he).categoryValueRef&&$(he,le)}),this.reverted("shape.create",function(te){var le=te.context,he=le.shape;Le(he,"bpmn:Group")&&!he.labelTarget&&Dt(he).categoryValueRef&&W(he,le)}),l.on("copyPaste.copyElement",770,function(te){var le=te.descriptor,he=te.element;if(Le(he,"bpmn:Group")&&!he.labelTarget){var me=Dt(he);if(me.categoryValueRef){var Oe=me.categoryValueRef;le.categoryValue=z(Oe,!0),Oe.$parent&&(le.category=z(Oe.$parent,!0))}}}),l.on("copyPaste.pasteElement",770,function(te){var le=te.descriptor,me=le.categoryValue,Oe=le.category;me&&(me=le.businessObject.categoryValueRef=z(me)),Oe&&(me.$parent=z(Oe)),delete le.category,delete le.categoryValue})}function _c(n,o,a,l){var d,E;return 0==(d=(l.y-a.y)*(o.x-n.x)-(l.x-a.x)*(o.y-n.y))?null:(E=((l.x-a.x)*(n.y-a.y)-(l.y-a.y)*(n.x-a.x))/d,{x:Math.round(n.x+E*(o.x-n.x)),y:Math.round(n.y+E*(o.y-n.y))})}function q0(n){function o(a,l,d){var b,E={x:d.x-50,y:d.y},$=_c(a,l,d,{x:d.x,y:d.y-50}),W=_c(a,l,d,E);b=$&&W?J0($,d)>J0(W,d)?W:$:$||W,a.original=b}n.on("bpmnElement.added",function(a){var l,d,b=a.element;b.waypoints&&(o((d=(l=b).waypoints)[0],d[1],on(l.source)),o(d[d.length-1],d[d.length-2],on(l.target)))})}function J0(n,o){return Math.sqrt(Math.pow(n.x-o.x,2)+Math.pow(n.y-o.y,2))}function lg(n){Lt.call(this,n);var o=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],function(a){var l=a.context.shape,d=Dt(l),b=Rn(l);wn(d,o)&&!b.get("isHorizontal")&&b.set("isHorizontal",!0)})}hr.$inject=["elementRegistry","eventBus","canvas"],Af.$inject=["bpmnFactory","bpmnjs","elementRegistry","eventBus","injector","moddleCopy"],Ce(Af,Lt),q0.$inject=["eventBus"],lg.$inject=["eventBus"],Ce(lg,Lt);var eb=Math.sqrt,cg=Math.min,A1=Math.max,tb=Math.abs;function nb(n){return Math.pow(n,2)}function Sc(n,o){return eb(nb(n.x-o.x)+nb(n.y-o.y))}function O1(n,o,a,l){var d=o.x-n.x,b=o.y-n.y,A=a.x-n.x,E=a.y-n.y,$=d*d+b*b,W=(d*A+b*E)/$,z=W*W-(A*A+E*E-l*l)/$;if(z<0&&z>-1e-6&&(z=0),z<0)return[];var te=eb(z),le=-W+te,he=-W-te,me={x:n.x-d*le,y:n.y-b*le};return 0===z?[me]:[me,{x:n.x-d*he,y:n.y-b*he}].filter(function(Oe){return Of((Pe=Oe).x,(we=n).x,(Ee=o).x)&&Of(Pe.y,we.y,Ee.y);var Pe,we,Ee})}function Of(n,o,a){return n>=cg(o,a)-Ec&&n<=A1(o,a)+Ec}var Ec=.1;function ib(n,o){return tb(n.x-o.x)<=Ec&&tb(n.y-o.y)<=Ec}function rb(n,o,a,l){var d=0,b=0,A={point:n,delta:{x:0,y:0}},E=function(gt,qt){var Mt,dt,Ot,un,Ve,Se,et,bt,Pt,Xt,tn,en,nn=0;for(nn=0;nn<qt.length-1;nn++){if(ib(Mt=qt[nn],dt=qt[nn+1])?Se=[Mt]:(Ot=Sc(gt,Mt),un=Sc(gt,dt),Se=O1(Mt,dt,gt,cg(Ot,un))),Se.length<1)throw new Error("expected between [1, 2] circle -> line intersections");1===Se.length&&(et={type:"bendpoint",position:Se[0],segmentIndex:nn,bendpointIndex:ib(Mt,Se[0])?nn:nn+1}),2===Se.length&&(et={type:"segment",position:Ve={x:((tn=Se[0]).x+(en=Se[1]).x)/2,y:(tn.y+en.y)/2},segmentIndex:nn,relativeLocation:Sc(Mt,Ve)/Sc(Mt,dt)}),bt=Sc(et.position,gt),(!Xt||Pt>bt)&&(Xt=et,Pt=bt)}return Xt}(n,a),$=E.segmentIndex,W=function(gt,qt,Mt,dt){var Ot=Mt.segmentIndex,un=qt.length-gt.length;if(dt.segmentMove){var Se=dt.segmentMove.newSegmentStartIndex;return Ot===dt.segmentMove.segmentStartIndex?Se:Ot>=Se?Ot+un<Se?Se:Ot+un:Ot}if(dt.bendpointMove){var et,bt=dt.bendpointMove.insert,Pt=dt.bendpointMove.bendpointIndex;return 0===un?Ot:(Ot>=Pt&&(et=bt?Ot+1:Ot-1),Ot<Pt&&(et=Ot,bt&&"bendpoint"!==Mt.type&&Pt-1===Ot&&Cl(qt,Pt)<Mt.relativeLocation&&et++),et)}return 0===un?Ot:dt.connectionStart&&0===Ot?0:dt.connectionEnd&&Ot===gt.length-2?qt.length-2:Math.floor((qt.length-2)/2)}(a,o,E,l);if(W<0||W>o.length-2||null===W)return A;var z,te,gt,qt,Mt,dt,le=kc(a,$),he=kc(o,W),me=E.position,Oe=(qt=me,Mt=zu((gt=le)[0],gt[1]),dt=zu(gt[0],qt),0===Mt?0:dt/Mt),Pe=(z=he,te=Om(le),Om(z)-te);if("bendpoint"===E.type){var we=o.length-a.length,Ee=E.bendpointIndex;if(-1!==o.indexOf(a[Ee]))return A;if(0===we){var Be=o[Ee];return{delta:{x:d=Be.x-E.position.x,y:b=Be.y-E.position.y},point:{x:n.x+d,y:n.y+b}}}we<0&&0!==Ee&&Ee<a.length-1&&(Oe=Cl(a,Ee))}var He,rt,qe={x:(he[1].x-he[0].x)*Oe+he[0].x,y:(he[1].y-he[0].y)*Oe+he[0].y},nt=(He={x:n.x-me.x,y:n.y-me.y},(rt=Pe)?{x:Math.cos(rt)*He.x-Math.sin(rt)*He.y,y:Math.sin(rt)*He.x+Math.cos(rt)*He.y}:He);return d=qe.x+nt.x-n.x,b=qe.y+nt.y-n.y,{point:bs(qe),delta:bs({x:d,y:b})}}function Cl(n,o){var a=zu(n[o-1],n[o]);return a/(a+zu(n[o],n[o+1]))}function kc(n,o){return[n[o],n[o+1]]}function Oh(n,o,a){var l=Mu(o),d=Mu(a),b=Kr(n,l);return bs({x:d.x+b.x*(a.width/o.width),y:d.y+b.y*(a.height/o.height)})}function Tc(n,o,a){var l=Mu(n),d=Mu(o),b=Mu(a),A=Kr(n,l),E=Kr(l,d);return function(he,me,Oe){var He,rt,qe,nt,Pe=Yt(me),we=Yt(Oe);if((qe=He=Pe).right!==(nt=rt=we).right&&qe.left!==nt.left||function(qe,nt){return qe.top!==nt.top&&qe.bottom!==nt.bottom}(He,rt))return null;var Ee,Be=bi(me,he);if("top"===Be)Ee={x:0,y:we.bottom-Pe.bottom};else if("bottom"===Be)Ee={x:0,y:we.top-Pe.top};else if("right"===Be)Ee={x:we.left-Pe.left,y:0};else{if("left"!==Be)return null;Ee={x:we.right-Pe.right,y:0}}return bi(Oe,{x:he.x+Ee.x,y:he.y+Ee.y})!==Be?null:Ee}(l,o,a)||bs({x:b.x+E.x*(a.width/o.width)+A.x-n.x,y:b.y+E.y*(a.height/o.height)+A.y-n.y})}var ug={width:90,height:20};function sb(n,o,a,l){Lt.call(this,n),this.postExecute("element.updateProperties",function(b){var A=b.context,E=A.element,$=A.properties;if("name"in $&&o.updateLabel(E,$.name),"text"in $&&Le(E,"bpmn:TextAnnotation")){var W=l.getTextAnnotationBounds({x:E.x,y:E.y,width:E.width,height:E.height},$.text||"");o.updateLabel(E,$.text,W)}}),this.postExecute(["shape.create","connection.create"],function(b){var A=b.context;if(!1!==(A.hints||{}).createElementsBehavior){var E=A.shape||A.connection,$=E.businessObject;if(!Vi(E)&&la(E)&&Dr(E)){var W=ca(E),z=l.getExternalLabelBounds(ug,Dr(E));o.createLabel(E,W,{id:$.id+"_label",businessObject:$,width:z.width,height:z.height})}}}),this.postExecute("shape.delete",function(b){var A=b.context,E=A.labelTarget;E&&!1!==(A.hints||{}).unsetLabel&&o.updateLabel(E,null,null,{removeShape:!1})}),this.postExecute(["label.create"],function(b){var A,E=b.context,$=E.shape,W=E.labelTarget;W&&Le(W,"bpmn:BaseElement")&&((A=Rn(W)).label||(A.label=a.create("bpmndi:BPMNLabel",{bounds:a.create("dc:Bounds")}),$.di=A),N(A.label.bounds,{x:$.x,y:$.y,width:$.width,height:$.height}))}),this.postExecute(["connection.layout","connection.updateWaypoints"],function(b){var A=b.context;if(!1!==(A.hints||{}).labelBehavior){var E,$=A.connection.label;$&&$.parent&&(E=function d(b){var we,A=b.context,E=A.connection,$=E.label,W=N({},A.hints),z=A.newWaypoints||E.waypoints,te=A.oldWaypoints;return void 0===W.startChanged&&(W.startChanged=!!W.connectionStart),void 0===W.endChanged&&(W.endChanged=!!W.connectionEnd),rb({x:(we=$).x+we.width/2,y:we.y+we.height/2},z,te,W).delta}(b),o.moveShape($,E))}}),this.postExecute(["shape.replace"],function(b){var A=b.context,E=A.newShape,$=A.oldShape,W=Dt(E);W&&la(W)&&$.label&&E.label&&(E.label.x=$.label.x,E.label.y=$.label.y)}),this.postExecute("shape.resize",function(b){var A,E=b.context,$=E.shape,W=E.newBounds,z=E.oldBounds;if(bu($)){var te=$.label,he=function Dw(n,o,a){return bs(Kr(Oh(n,o,a),n))}(function(me,Oe){var we;if(Oe.length)return Im(me,(we=me,T(Oe.map(function(Be){return{line:Be,distance:_m(we,Be)}}),"distance")[0].line))}(on(te),[[{x:(A=z).x,y:A.y},{x:A.x+(A.width||0),y:A.y}],[{x:A.x+(A.width||0),y:A.y},{x:A.x+(A.width||0),y:A.y+(A.height||0)}],[{x:A.x,y:A.y+(A.height||0)},{x:A.x+(A.width||0),y:A.y+(A.height||0)}],[{x:A.x,y:A.y},{x:A.x,y:A.y+(A.height||0)}]]),z,W);o.moveShape(te,he)}})}function ab(n,o){function a(l,d){var b=l.context,A=b.connection,E=N({},b.hints),$=b.newWaypoints||A.waypoints,W=b.oldWaypoints;return void 0===E.startChanged&&(E.startChanged=!!E.connectionStart),void 0===E.endChanged&&(E.endChanged=!!E.connectionEnd),rb(d,$,W,E).point}Lt.call(this,n),this.postExecute(["connection.layout","connection.updateWaypoints"],function(l){var d=l.context.connection,b=d.outgoing;d.incoming.forEach(function(A){var $=a(l,A.waypoints[A.waypoints.length-1]),W=[].concat(A.waypoints.slice(0,-1),[$]);o.updateWaypoints(A,W)}),b.forEach(function(A){var $=a(l,A.waypoints[0]),W=[].concat([$],A.waypoints.slice(1));o.updateWaypoints(A,W)})}),this.postExecute(["connection.move"],function(l){var d=l.context,b=d.connection,A=b.outgoing,$=d.delta;b.incoming.forEach(function(W){var z=W.waypoints[W.waypoints.length-1],te={x:z.x+$.x,y:z.y+$.y},le=[].concat(W.waypoints.slice(0,-1),[te]);o.updateWaypoints(W,le)}),A.forEach(function(W){var z=W.waypoints[0],le=[].concat([{x:z.x+$.x,y:z.y+$.y}],W.waypoints.slice(1));o.updateWaypoints(W,le)})})}function If(n,o,a){var l=_f(n),d=dg(l,o),b=l[0];return d.length?d[d.length-1]:Oh(b.original||b,a,o)}function Ih(n,o,a){var l=_f(n),d=dg(l,o),b=l[l.length-1];return d.length?d[0]:Oh(b.original||b,a,o)}function hg(n,o,a){var l=_f(n),d=lb(o,a),b=l[0];return Oh(b.original||b,d,o)}function Gs(n,o,a){var l=_f(n),d=lb(o,a),b=l[l.length-1];return Oh(b.original||b,d,o)}function lb(n,o){return{x:n.x-o.x,y:n.y-o.y,width:n.width,height:n.height}}function _f(n){var o=n.waypoints;if(!o.length)throw new Error("connection#"+n.id+": no waypoints");return o}function dg(n,o){return w(O(n,cb),function(a){return"intersect"===bi(o,a,1)})}function cb(n){return n.original||n}function fg(n,o){Lt.call(this,n),this.postExecute("shape.replace",function(a){var z,te,l=a.oldShape,d=a.newShape;if(te=d,Le(z=l,"bpmn:Participant")&&kn(z)&&Le(te,"bpmn:Participant")&&!kn(te)){var b,A,E,$,W=(A=co([b=l],!1),E=[],$=[],A.forEach(function(z){z!==b&&(z.incoming.forEach(function(te){Le(te,"bpmn:MessageFlow")&&E.push(te)}),z.outgoing.forEach(function(te){Le(te,"bpmn:MessageFlow")&&$.push(te)}))},[]),{incoming:E,outgoing:$});W.incoming.forEach(function(z){var te=Ih(z,d,l);o.reconnectEnd(z,d,te)}),W.outgoing.forEach(function(z){var te=If(z,d,l);o.reconnectStart(z,d,te)})}},!0)}function pg(n,o,a){n.on(["shape.move.rejected","create.rejected"],function(l){var d,b,E=l.context,$=E.shape;Le(E.target,"bpmn:Collaboration")&&Le($,"bpmn:FlowNode")&&(d=l,b=a("flow elements must be children of pools/participants"),o.add({position:{x:d.x+5,y:d.y+5},type:"error",timeout:2e3,html:"<div>"+b+"</div>"}))})}function Sf(n,o){Lt.call(this,n),this.preExecute("shape.resize",function(a){var l=a.shape,d=Rn(l),b=d&&d.get("label");b&&b.get("bounds")&&o.updateModdleProperties(l,b,{bounds:void 0})},!0)}function ub(n,o,a){Lt.call(this,n),this.preExecute("shape.delete",function(l){var $,W,z,d=l.context.shape;if(1===d.incoming.length&&1===d.outgoing.length){var b=d.incoming[0],A=d.outgoing[0];if(Le(b,"bpmn:SequenceFlow")&&Le(A,"bpmn:SequenceFlow")&&o.canConnect(b.source,A.target,b)){var E=(W=A.waypoints,(z=_c(js(($=b.waypoints)[$.length-2]),js($[$.length-1]),js(W[1]),js(W[0])))?[].concat($.slice(0,$.length-1),[z],W.slice(1)):[js($[0]),js(W[W.length-1])]);a.reconnectEnd(b,A.target,E)}}})}function js(n){return n.original||n}function Zs(n,o){Lt.call(this,n),this.preExecute("shape.delete",function(a){var l=a.shape,d=l.parent;Le(l,"bpmn:Participant")&&(a.collaborationRoot=d)},!0),this.postExecute("shape.delete",function(a){var l=a.collaborationRoot;l&&!l.businessObject.participants.length&&o.makeProcess()},!0)}function _h(n,o,a,l){Lt.call(this,n);var d=l.get("dragging",!1);function b(A){var E,$,W=A.source,z=A.target;A.parent&&(Le(A,"bpmn:SequenceFlow")&&(a.canConnectSequenceFlow(W,z)||($=!0),a.canConnectMessageFlow(W,z)&&(E="bpmn:MessageFlow")),Le(A,"bpmn:MessageFlow")&&(a.canConnectMessageFlow(W,z)||($=!0),a.canConnectSequenceFlow(W,z)&&(E="bpmn:SequenceFlow")),Le(A,"bpmn:Association")&&!a.canConnectAssociation(W,z)&&($=!0),$&&o.removeConnection(A),E&&o.connect(W,z,{type:E,waypoints:A.waypoints.slice()}))}this.postExecuted("elements.move",function(A){p(A.closure.allConnections,b)},!0),this.preExecute("connection.reconnect",function(A){var E,$,he,me,Oe,Pe,we,W=A.context,z=W.connection,te=W.newSource||z.source,le=W.newTarget||z.target;(E=a.canConnect(te,le))&&E.type!==z.type&&($=o.connect(te,le,{type:E.type,waypoints:z.waypoints.slice()}),o.removeConnection(z),W.connection=$,d&&(he=z,me=$,!(we=(Pe=d.context())&&Pe.payload.previousSelection)||!we.length||-1!==(Oe=we.indexOf(he))&&we.splice(Oe,1,me)))}),this.postExecuted("element.updateProperties",function(A){var E,$=A.context,W=$.properties,z=$.element,te=z.businessObject;W.default&&(E=S(z.outgoing,V({id:z.businessObject.default.id})))&&o.updateProperties(E,{conditionExpression:void 0}),W.conditionExpression&&te.sourceRef.default===te&&o.updateProperties(z.source,{default:void 0})})}function Pc(n,o,a,l,d,b){l.invoke(Lt,this),this._bpmnReplace=n,this._elementRegistry=a,this._selection=b,this.postExecuted(["elements.create"],500,function(A){var E=A.context,$=E.parent,W=E.elements,z=m(W,function(te,le){var he=o.canReplace([le],le.host||le.parent||$);return he?te.concat(he.replacements):te},[]);z.length&&this.replaceElements(W,z)},this),this.postExecuted(["elements.move"],500,function(A){var E=A.context,$=E.newParent,W=E.newHost,z=[];p(E.closure.topLevel,function(le){z=lr(le)?z.concat(le.children):z.concat(le)}),1===z.length&&W&&($=W);var te=o.canReplace(z,$);te&&this.replaceElements(z,te.replacements,W)},this),this.postExecute(["shape.replace"],1500,function(A){var E,$=A.context,te=$.oldShape.attachers;te&&te.length&&(E=o.canReplace(te,$.newShape),this.replaceElements(te,E.replacements))},this),this.postExecuted(["shape.replace"],1500,function(A){var E=A.context,$=E.oldShape,W=E.newShape;d.unclaimId($.businessObject.id,$.businessObject),d.updateProperties(W,{id:$.id})})}Ce(sb,Lt),sb.$inject=["eventBus","modeling","bpmnFactory","textRenderer"],Ce(ab,Lt),ab.$inject=["eventBus","modeling"],fg.$inject=["eventBus","modeling"],Ce(fg,Lt),pg.$inject=["eventBus","tooltips","translate"],Ce(Sf,Lt),Sf.$inject=["eventBus","modeling"],Ce(ub,Lt),ub.$inject=["eventBus","bpmnRules","modeling"],Zs.$inject=["eventBus","modeling"],Ce(Zs,Lt),Ce(_h,Lt),_h.$inject=["eventBus","modeling","bpmnRules","injector"],Ce(Pc,Lt),Pc.prototype.replaceElements=function(n,o){var a=this._elementRegistry,l=this._bpmnReplace,d=this._selection;p(o,function(b){var A={type:b.newElementType},E=a.get(b.oldElementId),$=n.indexOf(E);n[$]=l.replaceElement(E,A,{select:!1})}),o&&d.select(n)},Pc.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var hb={width:140,height:120},wl=60,Rc={width:300,height:150},mg={width:140,height:120},fb={width:50,height:30};function pb(n){n.on("resize.start",1500,function(o){var A,E,$,W,z,te,le,he,me,Oe,a=o.context,l=a.shape,d=a.direction,b=a.balanced;(Le(l,"bpmn:Lane")||Le(l,"bpmn:Participant"))&&(a.resizeConstraints=(E=d,$=b,W=eo(A=l),z=!0,te=!0,le=uh(W,[W]),he=Yt(A),me={},Oe={},/e/.test(E)?Oe.right=he.left+300:/w/.test(E)&&(Oe.left=he.right-300),le.forEach(function(we){var Ee=Yt(we);/n/.test(E)&&(Ee.top<he.top-10&&(z=!1),$&&gg(he.top-Ee.bottom)<10&&Ef(me,"top",Ee.top+wl),gg(he.top-Ee.top)<5&&xl(Oe,"top",Ee.bottom-wl)),/s/.test(E)&&(Ee.bottom>he.bottom+10&&(te=!1),$&&gg(he.bottom-Ee.top)<10&&xl(me,"bottom",Ee.bottom-wl),gg(he.bottom-Ee.bottom)<5&&Ef(Oe,"bottom",Ee.top+wl))}),W.children.filter(function(we){return!we.hidden&&!we.waypoints&&(Le(we,"bpmn:FlowElement")||Le(we,"bpmn:Artifact"))}).forEach(function(we){var Ee=Yt(we);z&&/n/.test(E)&&xl(Oe,"top",Ee.top-20),/e/.test(E)&&Ef(Oe,"right",Ee.right+20),te&&/s/.test(E)&&Ef(Oe,"bottom",Ee.bottom+20),/w/.test(E)&&xl(Oe,"left",Ee.left-50)}),{min:Oe,max:me})),Le(l,"bpmn:Participant")&&(a.minDimensions=Rc),Le(l,"bpmn:SubProcess")&&kn(l)&&(a.minDimensions=mg),Le(l,"bpmn:TextAnnotation")&&(a.minDimensions=fb)})}pb.$inject=["eventBus"];var gg=Math.abs,_1=Math.min,S1=Math.max;function vg(n,o,a,l){var d=n[o];n[o]=void 0===d?a:l(a,d)}function xl(n,o,a){return vg(n,o,a,_1)}function Ef(n,o,a){return vg(n,o,a,S1)}function mb(n,o){n.on("resize.start",1501,function(a){var l=a.context,d=l.shape;(Le(d,"bpmn:Lane")||Le(d,"bpmn:Participant"))&&(l.balanced=!Ja(a))}),n.on("resize.end",1001,function(a){var l=a.context,d=l.shape,b=l.canExecute,A=l.newBounds;if(Le(d,"bpmn:Lane")||Le(d,"bpmn:Participant"))return b&&(A=xp(A),o.resizeLane(d,A,l.balanced)),!1})}function yg(n,o,a,l,d){function b(W){return wn(W,["bpmn:ReceiveTask","bpmn:SendTask"])||(z=W,H(te=["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])||(te=[te]),v(te,function(le){return vu(z,le)}));var z,te}function A(W){return!!S(n.getDefinitions().get("rootElements"),V({id:W.id}))}function E(W){return Le(W,"bpmn:ErrorEventDefinition")?"errorRef":Le(W,"bpmn:EscalationEventDefinition")?"escalationRef":Le(W,"bpmn:MessageEventDefinition")?"messageRef":Le(W,"bpmn:SignalEventDefinition")?"signalRef":void 0}function $(W){if(wn(W,["bpmn:ReceiveTask","bpmn:SendTask"]))return W.get("messageRef");var z=W.get("eventDefinitions")[0];return z.get(E(z))}a.invoke(Lt,this),this.executed(["shape.create","element.updateProperties","element.updateModdleProperties"],function(W){var z=W.shape||W.element;if(b(z)){var te=$(Dt(z));te&&!A(te)&&(hi(n.getDefinitions().get("rootElements"),te),W.addedRootElement=te)}},!0),this.reverted(["shape.create","element.updateProperties","element.updateModdleProperties"],function(W){var z=W.addedRootElement;z&&gi(n.getDefinitions().get("rootElements"),z)},!0),o.on("copyPaste.copyElement",function(W){var z=W.descriptor,te=W.element;if(!te.labelTarget&&b(te)){var le=$(Dt(te));le&&(z.referencedRootElement=le)}}),o.on("copyPaste.pasteElement",500,function(W){var z=W.descriptor,te=z.businessObject,le=z.referencedRootElement;le&&(A(le)||(le=l.copyElement(le,d.create(le.$type))),function(he,me){if(wn(he,["bpmn:ReceiveTask","bpmn:SendTask"]))return he.set("messageRef",me);var Oe=he.get("eventDefinitions")[0];Oe.set(E(Oe),me)}(te,le),delete z.referencedRootElement)})}mb.$inject=["eventBus","modeling"],yg.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"],Ce(yg,Lt);var E1=Math.max;function bg(n){n.on("spaceTool.getMinDimensions",function(o){var l=o.axis,d=o.start,b={};return p(o.shapes,function(A){var E=A.id;Le(A,"bpmn:Participant")&&(b[E]="x"===l?Rc:{width:Rc.width,height:k1(A,d)}),Le(A,"bpmn:SubProcess")&&kn(A)&&(b[E]=mg),Le(A,"bpmn:TextAnnotation")&&(b[E]=fb),Le(A,"bpmn:Group")&&(b[E]=hb)}),b})}function k1(n,o){var l,d,b;return fl(n).length?(d=o,b=Cg(fl(l=n),d),E1(Rc.height,l.height-b.height+wl)):Rc.height}function Cg(n,o){var a,l,d;for(a=0;a<n.length;a++)if(o>=(l=n[a]).y&&o<=l.y+l.height)return(d=fl(l)).length?Cg(d,o):l}bg.$inject=["eventBus"];function Al(n,o,a,l,d,b,A){Lt.call(this,o),this._canvas=n,this._eventBus=o,this._modeling=a,this._elementFactory=l,this._bpmnFactory=d,this._bpmnjs=b,this._elementRegistry=A;var E=this;function $(te){return Le(te,"bpmn:SubProcess")&&!kn(te)}function W(te){var he=te.newRootElement,me=Dt(te.shape);he=E._addDiagram(he||me),te.newRootElement=n.addRootElement(he)}function z(te){var le=Dt(te.shape);E._removeDiagram(le);var he=te.newRootElement=A.get(Wo(le));n.removeRootElement(he)}this.executed("shape.create",function(te){$(te.shape)&&W(te)},!0),this.postExecuted("shape.create",function(te){var le=te.shape,he=te.newRootElement;he&&le.children&&(E._showRecursively(le.children),E._moveChildrenToShape(le,he))},!0),this.reverted("shape.create",function(te){$(te.shape)&&z(te)},!0),this.preExecuted("shape.delete",function(te){var le=te.shape;if($(le)){var he=A.get(Wo(le));he&&a.removeElements(he.children.slice())}},!0),this.executed("shape.delete",function(te){$(te.shape)&&z(te)},!0),this.reverted("shape.delete",function(te){$(te.shape)&&W(te)},!0),this.preExecuted("shape.replace",function(te){var le=te.oldShape,he=te.newShape;$(le)&&$(he)&&(te.oldRoot=n.removeRootElement(Wo(le)))},!0),this.postExecuted("shape.replace",function(te){var he=te.oldRoot,me=n.findRoot(Wo(te.newShape));he&&me&&a.moveElements(he.children,{x:0,y:0},me)},!0),this.executed("element.updateProperties",function(te){var le=te.element;if(Le(le,"bpmn:SubProcess")){var me=te.oldProperties.id,Oe=te.properties.id;if(me!==Oe){if(Es(le))return A.updateId(le,ki(Oe)),void A.updateId(me,Oe);A.get(ki(me))&&A.updateId(ki(me),ki(Oe))}}},!0),this.reverted("element.updateProperties",function(te){var le=te.element;if(Le(le,"bpmn:SubProcess")){var me=te.oldProperties.id,Oe=te.properties.id;if(me!==Oe){if(Es(le))return A.updateId(le,ki(me)),void A.updateId(Oe,me);var Pe=A.get(ki(Oe));Pe&&A.updateId(Pe,ki(me))}}},!0),o.on("element.changed",function(te){var le=te.element;if(Es(le)){var he=le,me=A.get(gy(he));me&&me!==he&&o.fire("element.changed",{element:me})}}),this.executed("shape.toggleCollapse",400,function(te){var le=te.shape;Le(le,"bpmn:SubProcess")&&(kn(le)?z(te):(W(te),E._showRecursively(le.children)))},!0),this.reverted("shape.toggleCollapse",400,function(te){var le=te.shape;Le(le,"bpmn:SubProcess")&&(kn(le)?z(te):(W(te),E._showRecursively(le.children)))},!0),this.postExecuted("shape.toggleCollapse",600,function(te){var le=te.shape;if(Le(le,"bpmn:SubProcess")){var he=te.newRootElement;he&&(kn(le)?E._moveChildrenToShape(he,le):E._moveChildrenToShape(le,he))}},!0),o.on("copyPaste.createTree",function(te){var le=te.element,he=te.children;if($(le)){var me=Wo(le),Oe=A.get(me);Oe&&he.push.apply(he,Oe.children)}}),o.on("copyPaste.copyElement",function(te){var le=te.descriptor,me=te.elements,Oe=te.element.parent;if(Le(Rn(Oe),"bpmndi:BPMNPlane")){var Pe=gy(Oe),we=S(me,function(Ee){return Ee.id===Pe});we&&(le.parent=we.id)}}),o.on("copyPaste.pasteElement",function(te){var le=te.descriptor;le.parent&&($(le.parent)||le.parent.hidden)&&(le.hidden=!0)})}function kf(n,o){n.invoke(Lt,this),this.postExecuted("shape.replace",function(a){var l=a.context.oldShape,d=a.context.newShape;if(Le(d,"bpmn:SubProcess")&&(Le(l,"bpmn:Task")||Le(l,"bpmn:CallActivity"))&&kn(d)){var b,A={x:(b=d).x+b.width/6,y:b.y+b.height/2};o.createShape({type:"bpmn:StartEvent"},A,d)}})}function vb(n,o){Lt.call(this,n),this.postExecuted("shape.toggleCollapse",1500,function(a){var l=a.shape;if(!kn(l)){var d=co(l);d.forEach(function(A){var E=A.incoming.slice(),$=A.outgoing.slice();p(E,function(W){b(W,!0)}),p($,function(W){b(W,!1)})})}function b(A,E){-1!==d.indexOf(A.source)&&-1!==d.indexOf(A.target)||(E?o.reconnectEnd(A,l,on(l)):o.reconnectStart(A,l,on(l)))}},!0)}function yb(n,o,a,l){Lt.call(this,n),this.executed(["shape.toggleCollapse"],500,function(d){var b,A=d.context.shape;Le(A,"bpmn:SubProcess")&&(A.collapsed?Rn(A).isExpanded=!1:((b=A.children).length&&b.forEach(function(E){"label"!==E.type||E.businessObject.name||(E.hidden=!0)}),Rn(A).isExpanded=!0))}),this.reverted(["shape.toggleCollapse"],500,function(d){var b=d.context.shape;Rn(b).isExpanded=!b.collapsed}),this.postExecuted(["shape.toggleCollapse"],500,function(d){var b,$,W,A=d.context.shape,E=o.getDefaultSize(A);b=A.collapsed?{x:($=A).x+($.width-(W=E).width)/2,y:$.y+($.height-W.height)/2,width:W.width,height:W.height}:function($,W){var te,le,me=W;return(te=zm((le=$.children,le.filter(function(Oe){return!Oe.hidden})).concat([$])))?(me.width=Math.max(te.width,me.width),me.height=Math.max(te.height,me.height),me.x=te.x+(te.width-me.width)/2,me.y=te.y+(te.height-me.height)/2):(me.x=$.x+($.width-me.width)/2,me.y=$.y+($.height-me.height)/2),me}(A,E),a.resizeShape(A,b,null,{autoResize:!A.collapsed&&"nwse"})})}function bb(n,o,a,l){o.invoke(Lt,this),this.preExecute("shape.delete",function(d){var b=d.context.shape,A=b.businessObject;Vi(b)||(Le(b,"bpmn:Participant")&&kn(b)&&a.ids.unclaim(A.processRef.id),l.unclaimId(A.id,A))}),this.preExecute("connection.delete",function(d){var b=d.context.connection.businessObject;l.unclaimId(b.id,b)}),this.preExecute("canvas.updateRoot",function(){var d=n.getRootElement(),b=d.businessObject;Le(d,"bpmn:Collaboration")&&a.ids.unclaim(b.id)})}function Cb(n,o){Lt.call(this,n),this.preExecute("connection.delete",function(a){var l=a.context.connection,d=l.source;(function(b,A){if(!Le(b,"bpmn:SequenceFlow"))return!1;var E=Dt(A),$=Dt(b);return E.get("default")===$})(l,d)&&o.updateProperties(d,{default:null})})}function wg(n,o,a){var l;Lt.call(this,n);var b=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(b,5e3,function(A){(l=l||new wb).enter()}),this.postExecuted(b,500,function(A){!function(){if(!l)throw new Error(a("out of bounds release"));l.leave()&&(o.updateLaneRefs(l.flowNodes,l.lanes),l=null)}()}),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(A){var E=A.context.shape,$=function d(){if(!l)throw new Error(a("out of bounds release"));return l}();E.labelTarget||(Le(E,"bpmn:Lane")&&$.addLane(E),Le(E,"bpmn:FlowNode")&&$.addFlowNode(E))})}function wb(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(n){this.lanes.push(n)},this.addFlowNode=function(n){this.flowNodes.push(n)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}Ce(Al,Lt),Al.prototype._moveChildrenToShape=function(n,o){var a,l=this._modeling,d=n.children;if(d){var b=(d=d.concat(d.reduce(function(W,z){return z.label&&z.label.parent!==n?W.concat(z.label):W},[]))).filter(function(W){return!W.hidden});if(b.length){var A=qn(b);if(o.x){var E=on(o),$=on(A);a={x:E.x-$.x,y:E.y-$.y}}else a={x:180-A.x,y:160-A.y};l.moveElements(d,a,o,{autoResize:!1})}else l.moveElements(d,{x:0,y:0},o,{autoResize:!1})}},Al.prototype._showRecursively=function(n,o){var a=this,l=[];return n.forEach(function(d){d.hidden=!!o,l=l.concat(d),d.children&&(l=l.concat(a._showRecursively(d.children,d.collapsed||o)))}),l},Al.prototype._addDiagram=function(n){var o=this._bpmnjs.getDefinitions().diagrams;return n.businessObject||(n=this._createNewDiagram(n)),o.push(n.di.$parent),n},Al.prototype._createNewDiagram=function(n){var o=this._bpmnFactory,a=this._elementFactory,l=o.create("bpmndi:BPMNPlane",{bpmnElement:n}),d=o.create("bpmndi:BPMNDiagram",{plane:l});return l.$parent=d,a.createRoot({id:Wo(n),type:n.$type,di:l,businessObject:n,collapsed:!0})},Al.prototype._removeDiagram=function(n){var o=this._bpmnjs.getDefinitions().diagrams,a=S(o,function(l){return l.plane.bpmnElement.id===n.id});return o.splice(o.indexOf(a),1),a},Al.$inject=["canvas","eventBus","modeling","elementFactory","bpmnFactory","bpmnjs","elementRegistry"],kf.$inject=["injector","modeling"],Ce(kf,Lt),Ce(vb,Lt),vb.$inject=["eventBus","modeling"],Ce(yb,Lt),yb.$inject=["eventBus","elementFactory","modeling"],Ce(bb,Lt),bb.$inject=["canvas","injector","moddle","modeling"],Ce(Cb,Lt),Cb.$inject=["eventBus","modeling"],wg.$inject=["eventBus","modeling","translate"],Ce(wg,Lt);var xb={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","createBehavior","createDataObjectBehavior","createParticipantBehavior","dataInputAssociationBehavior","dataStoreBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","fixHoverBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","layoutConnectionBehavior","messageFlowBehavior","modelingFeedback","removeElementBehavior","removeEmbeddedLabelBoundsBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","rootElementReferenceBehavior","spaceToolBehavior","subProcessPlaneBehavior","subProcessStartEventBehavior","toggleCollapseConnectionBehaviour","toggleElementCollapseBehaviour","unclaimIdBehavior","updateFlowNodeRefsBehavior","unsetDefaultFlowBehavior"],adaptiveLabelPositioningBehavior:["type",yf],appendBehavior:["type",tg],associationBehavior:["type",as],attachEventBehavior:["type",bf],boundaryEventBehavior:["type",Cf],createBehavior:["type",ng],createDataObjectBehavior:["type",ig],createParticipantBehavior:["type",vl],dataInputAssociationBehavior:["type",og],dataStoreBehavior:["type",sg],deleteLaneBehavior:["type",ag],detachEventBehavior:["type",Ac],dropOnFlowBehavior:["type",yl],eventBasedGatewayBehavior:["type",Oc],fixHoverBehavior:["type",hr],groupBehavior:["type",Af],importDockingFix:["type",q0],isHorizontalFix:["type",lg],labelBehavior:["type",sb],layoutConnectionBehavior:["type",ab],messageFlowBehavior:["type",fg],modelingFeedback:["type",pg],removeElementBehavior:["type",ub],removeEmbeddedLabelBoundsBehavior:["type",Sf],removeParticipantBehavior:["type",Zs],replaceConnectionBehavior:["type",_h],replaceElementBehaviour:["type",Pc],resizeBehavior:["type",pb],resizeLaneBehavior:["type",mb],rootElementReferenceBehavior:["type",yg],spaceToolBehavior:["type",bg],subProcessPlaneBehavior:["type",Al],subProcessStartEventBehavior:["type",kf],toggleCollapseConnectionBehaviour:["type",vb],toggleElementCollapseBehaviour:["type",yb],unclaimIdBehavior:["type",bb],unsetDefaultFlowBehavior:["type",Cb],updateFlowNodeRefsBehavior:["type",wg]};function $c(n,o){var a=bi(n,o,-15);return"intersect"!==a?a:null}function dr(n){br.call(this,n)}function xg(n){return!n||Vi(n)}function Ag(n){do{if(Le(n,"bpmn:Process"))return Dt(n);if(Le(n,"bpmn:Participant"))return Dt(n).processRef||Dt(n)}while(n=n.parent)}function Tf(n){return Le(n,"bpmn:TextAnnotation")}function Og(n){return Le(n,"bpmn:Group")&&!n.labelTarget}function ls(n){return Le(n,"bpmn:BoundaryEvent")&&cs(n,"bpmn:CompensateEventDefinition")}function Mc(n){return Dt(n).isForCompensation}function Ab(n){for(var o=n;o=o.parent;){if(Le(o,"bpmn:FlowElementsContainer"))return Dt(o);if(Le(o,"bpmn:Participant"))return Dt(o).processRef}return null}function cs(n,o){return!!S(Dt(n).eventDefinitions||[],function(a){return Le(a,o)})}function Sh(n,o){return(Dt(n).eventDefinitions||[]).every(function(a){return Le(a,o)})}function Ig(n){return n.waypoints}function _g(n,o){return-1!==function(l){for(var d=[];l;)(l=l.parent)&&d.push(l);return d}(o).indexOf(n)}function Pf(n,o,a){if(xg(n)||xg(o))return null;if(!Le(a,"bpmn:DataAssociation")){if(cn(n,o))return{type:"bpmn:MessageFlow"};if(Pi(n,o))return{type:"bpmn:SequenceFlow"}}return kh(n,o)||(ls(n)&&Mc(o)?{type:"bpmn:Association",associationDirection:"One"}:!!xa(n,o)&&{type:"bpmn:Association"})}function Eh(n,o,a){return!(!Vi(n)&&!Og(n))||!(Le(o,"bpmn:Participant")&&!kn(o))&&(Le(n,"bpmn:Participant")?Le(o,"bpmn:Process")||Le(o,"bpmn:Collaboration"):wn(n,["bpmn:DataInput","bpmn:DataOutput"])&&n.parent?o===n.parent:Le(n,"bpmn:Lane")?Le(o,"bpmn:Participant")||Le(o,"bpmn:Lane"):!(Le(n,"bpmn:BoundaryEvent")&&(l=n,!Dt(l).cancelActivity||!En(l)&&!Ho(l)))&&(Le(n,"bpmn:FlowElement")&&!Le(n,"bpmn:DataStoreReference")?Le(o,"bpmn:FlowElementsContainer")?kn(o):wn(o,["bpmn:Participant","bpmn:Lane"]):Le(n,"bpmn:DataStoreReference")&&Le(o,"bpmn:Collaboration")?v(Dt(o).get("participants"),function(l){return!!l.get("processRef")}):wn(n,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?wn(o,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):!!Le(n,"bpmn:MessageFlow")&&(Le(o,"bpmn:Collaboration")||n.source.parent==o||n.target.parent==o)));var l}function Ob(n){return Le(n,"bpmn:Lane")}function En(n){var o=Dt(n);return o&&!(o.eventDefinitions&&o.eventDefinitions.length)}function Ho(n){return Rf(n,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function Rf(n,o){return o.some(function(a){return cs(n,a)})}function Nc(n,o,a,l){if(Array.isArray(n)||(n=[n]),1!==n.length)return!1;var b,d=n[0];return!Vi(d)&&!!function P1(n){return!!function(o){return!Vi(o)&&Le(o,"bpmn:BoundaryEvent")}(n)||!(!Le(n,"bpmn:IntermediateThrowEvent")||!En(n))||Le(n,"bpmn:IntermediateCatchEvent")&&Ho(n)}(d)&&!lr(o)&&!(!Le(o,"bpmn:Activity")||Mc(o))&&!(l&&!$c(l,o))&&!(Le(b=o,"bpmn:ReceiveTask")&&S(b.incoming,function(A){return Le(A.source,"bpmn:EventBasedGateway")}))&&"attach"}function Ib(n,o,a){if(!o)return!1;var l={replacements:[]};return p(n,function(d){var b;lr(o)||Le(d,"bpmn:StartEvent")&&"label"!==d.type&&Eh(d,o)&&((b=d)&&!1!==Dt(b).isInterrupting||l.replacements.push({oldElementId:d.id,newElementType:"bpmn:StartEvent"}),(function(b){return vu(b,"bpmn:ErrorEventDefinition")}(d)||function(b){return vu(b,"bpmn:EscalationEventDefinition")}(d)||function(b){return vu(b,"bpmn:CompensateEventDefinition")}(d))&&l.replacements.push({oldElementId:d.id,newElementType:"bpmn:StartEvent"}),Rf(d,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])&&Le(o,"bpmn:SubProcess")&&l.replacements.push({oldElementId:d.id,newElementType:"bpmn:StartEvent"})),Le(o,"bpmn:Transaction")||cs(d,"bpmn:CancelEventDefinition")&&"label"!==d.type&&(Le(d,"bpmn:EndEvent")&&Eh(d,o)&&l.replacements.push({oldElementId:d.id,newElementType:"bpmn:EndEvent"}),Le(d,"bpmn:BoundaryEvent")&&Nc(d,o,0,a)&&l.replacements.push({oldElementId:d.id,newElementType:"bpmn:BoundaryEvent"}))}),!!l.replacements.length&&l}function _b(n,o){return!v(n,Ob)&&(!o||n.every(function(a){return Eh(a,o)}))}function Sg(n,o,a,l){return!!o&&(!(!Vi(n)&&!Og(n))||!(a===o||a&&_g(a,o))&&(Eh(n,o)||Th(n,o)))}function Tr(n,o){return Le(n,"bpmn:SubProcess")?kn(n)&&(!o||o.width>=100&&o.height>=80):Le(n,"bpmn:Lane")?!o||o.width>=130&&o.height>=60:Le(n,"bpmn:Participant")?!o||o.width>=250&&o.height>=50:!!Tf(n)||!!Og(n)}function xa(n,o){return!(!ls(n)||!Mc(o))||!_g(o,n)&&!_g(n,o)&&(l=o,d=Tf(n),b=Tf(l),!(!d&&!b||d===b)||!!kh(n,o));var l,d,b}function cn(n,o){return!($f(n)&&!$f(o))&&Le(a=n,"bpmn:InteractionNode")&&!Le(a,"bpmn:BoundaryEvent")&&(!Le(a,"bpmn:Event")||Le(a,"bpmn:ThrowEvent")&&Sh(a,"bpmn:MessageEventDefinition"))&&Le(l=o,"bpmn:InteractionNode")&&!Mc(l)&&(!Le(l,"bpmn:Event")||Le(l,"bpmn:CatchEvent")&&Sh(l,"bpmn:MessageEventDefinition"))&&!(Le(l,"bpmn:BoundaryEvent")&&!cs(l,"bpmn:MessageEventDefinition"))&&!function(l,d){return Ag(l)===Ag(d)}(n,o);var l,a}function Pi(n,o){return Le(a=n,"bpmn:FlowNode")&&!Le(a,"bpmn:EndEvent")&&!lr(a)&&!(Le(a,"bpmn:IntermediateThrowEvent")&&cs(a,"bpmn:LinkEventDefinition"))&&!ls(a)&&!Mc(a)&&Le(l=o,"bpmn:FlowNode")&&!Le(l,"bpmn:StartEvent")&&!Le(l,"bpmn:BoundaryEvent")&&!lr(l)&&!(Le(l,"bpmn:IntermediateCatchEvent")&&cs(l,"bpmn:LinkEventDefinition"))&&!Mc(l)&&function(l,d){return Ab(l)===Ab(d)}(n,o)&&!(Le(n,"bpmn:EventBasedGateway")&&!function(l){return Le(l,"bpmn:ReceiveTask")||Le(l,"bpmn:IntermediateCatchEvent")&&(cs(l,"bpmn:MessageEventDefinition")||cs(l,"bpmn:TimerEventDefinition")||cs(l,"bpmn:ConditionalEventDefinition")||cs(l,"bpmn:SignalEventDefinition"))}(o));var l,a}function kh(n,o){return wn(n,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&wn(o,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:!(!wn(o,["bpmn:DataObjectReference","bpmn:DataStoreReference"])||!wn(n,["bpmn:Activity","bpmn:CatchEvent"]))&&{type:"bpmn:DataOutputAssociation"}}function Th(n,o,a){if(!o)return!1;if(Array.isArray(n)){if(1!==n.length)return!1;n=n[0]}return o.source!==n&&o.target!==n&&wn(o,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!Vi(o)&&Le(n,"bpmn:FlowNode")&&!Le(n,"bpmn:BoundaryEvent")&&Eh(n,o.parent)}function Eg(n,o){return!!Vi(o)||!(Le(o,"bpmn:Lane")&&(a=n,l=o.parent,!a||!l||-1===a.indexOf(l)));var a,l}function $f(n){return jd(n,"bpmn:Process")||jd(n,"bpmn:Collaboration")}Ce(dr,br),dr.$inject=["eventBus"],dr.prototype.init=function(){this.addRule("connection.start",function(n){return function(o){return xg(o)?null:wn(o,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference","bpmn:Group","bpmn:TextAnnotation"])}(n.source)}),this.addRule("connection.create",function(n){var o=n.source,a=n.target,l=n.hints||{},d=l.targetParent;if(l.targetAttach)return!1;d&&(a.parent=d);try{return Pf(o,a)}finally{d&&(a.parent=null)}}),this.addRule("connection.reconnect",function(n){return Pf(n.source,n.target,n.connection)}),this.addRule("connection.updateWaypoints",function(n){return{type:n.connection.type}}),this.addRule("shape.resize",function(n){return Tr(n.shape,n.newBounds)}),this.addRule("elements.create",function(n){var o=n.elements,a=n.position,l=n.target;return!(Ig(l)&&!Th(o,l))&&h(o,function(d){return Ig(d)?Pf(d.source,d.target,d):d.host?Nc(d,d.host,0,a):Sg(d,l,null)})}),this.addRule("elements.move",function(n){var o=n.target,a=n.shapes,l=n.position;return Nc(a,o,0,l)||Ib(a,o,l)||_b(a,o)||Th(a,o)}),this.addRule("shape.create",function(n){return Sg(n.shape,n.target,n.source)}),this.addRule("shape.attach",function(n){return Nc(n.shape,n.target,0,n.position)}),this.addRule("element.copy",function(n){return Eg(n.elements,n.element)})},dr.prototype.canConnectMessageFlow=cn,dr.prototype.canConnectSequenceFlow=Pi,dr.prototype.canConnectDataAssociation=kh,dr.prototype.canConnectAssociation=xa,dr.prototype.canMove=_b,dr.prototype.canAttach=Nc,dr.prototype.canReplace=Ib,dr.prototype.canDrop=Eh,dr.prototype.canInsert=Th,dr.prototype.canCreate=Sg,dr.prototype.canConnect=Pf,dr.prototype.canResize=Tr,dr.prototype.canCopy=Eg;var R1={__depends__:[Zo],__init__:["bpmnRules"],bpmnRules:["type",dr]};function kg(n,o){n.on("saveXML.start",2e3,function(){p(o.getRootElements(),function(a){var l,d=Rn(a);l=O(w(co([a],!1),function(b){return b!==a&&!b.labelTarget}),Rn),d.set("planeElement",l)})})}kg.$inject=["eventBus","canvas"];var $1={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",kg]};function Ol(n){Lt.call(this,n);var o=this;this.preExecute(["shape.create","connection.create"],function(a){var l=a.context,A=o.getOrdering(l.shape||l.connection,l.parent);A&&(void 0!==A.parent&&(l.parent=A.parent),l.parentIndex=A.index)}),this.preExecute(["shape.move","connection.move"],function(a){var l=a.context,d=l.shape||l.connection,A=o.getOrdering(d,l.newParent||d.parent);A&&(void 0!==A.parent&&(l.newParent=A.parent),l.newParentIndex=A.index)})}function Il(n,o,a){Ol.call(this,n);var l=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:9,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function d(b){var A=b.order;if(A||(b.order=A=function(E){if(E.labelTarget)return{level:10};var $=S(l,function(W){return wn(E,[W.type])});return $&&$.order||{level:1}}(b)),!A)throw new Error("no order for <"+b.id+">");return A}this.getOrdering=function(b,A){if(b.labelTarget)return{parent:o.findRoot(A)||o.getRootElement(),index:-1};var E=d(b);E.containers&&(A=function(z,te,le){for(var he=te;he&&!wn(he,le);)he=he.parent;if(!he)throw new Error("no parent for <"+z.id+"> in <"+(te&&te.id)+">");return he}(b,A,E.containers));var $=A.children.indexOf(b),W=y(A.children,function(z){return!(!b.labelTarget&&z.labelTarget)&&E.level<d(z).level});return-1!==W&&-1!==$&&$<W&&(W-=1),{index:W,parent:A}}}Ol.prototype.getOrdering=function(n,o){return null},Ce(Ol,Lt),Il.$inject=["eventBus","canvas","translate"],Ce(Il,Ol);var M1={__depends__:[hd],__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",Il]};function _l(n,o){this._eventBus=n,this._dragging=o,this._tools=[],this._active=null}_l.$inject=["eventBus","dragging"],_l.prototype.registerTool=function(n,o){var a=this._tools;if(!o)throw new Error('A tool has to be registered with it\'s "events"');a.push(n),this.bindEvents(n,o)},_l.prototype.isActive=function(n){return n&&this._active===n},_l.prototype.length=function(n){return this._tools.length},_l.prototype.setActive=function(n){var o=this._eventBus;this._active!==n&&(this._active=n,o.fire("tool-manager.update",{tool:n}))},_l.prototype.bindEvents=function(n,o){var a=this._eventBus,l=this._dragging,d=[];a.on(o.tool+".init",function(b){if(!b.context.reactivate&&this.isActive(n))return this.setActive(null),void l.cancel();this.setActive(n)},this),p(o,function(b){d.push(b+".ended"),d.push(b+".canceled")}),a.on(d,250,function(b){var A,E;this._active&&((E=(A=b).originalEvent&&A.originalEvent.target)&&_e(E,'.group[data-group="tools"]')||this.setActive(null))},this)};var Mf={__depends__:[Ns],__init__:["toolManager"],toolManager:["type",_l]};function Ph(n,o){return-1!==n.indexOf(o)}var Tg=Math.abs,N1=Math.round,us={x:"width",y:"height"},Sb="crosshair",Aa={n:"top",w:"left",s:"bottom",e:"right"},Nf={n:"s",w:"e",s:"n",e:"w"};function Ao(n,o,a,l,d,b,A){this._canvas=n,this._dragging=o,this._eventBus=a,this._modeling=l,this._rules=d,this._toolManager=b,this._mouse=A;var E=this;b.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),a.on("spaceTool.selection.end",function($){a.once("spaceTool.selection.ended",function(){E.activateMakeSpace($.originalEvent)})}),a.on("spaceTool.move",1500,function($){var W=$.context,z=W.initialized;z||(z=W.initialized=E.init($,W)),z&&Pg($)}),a.on("spaceTool.end",function($){var W=$.context,z=W.axis,te=W.direction,le=W.movingShapes,he=W.resizingShapes,me=W.start;if(W.initialized){Pg($);var Oe={x:0,y:0};Oe[z]=N1($["d"+z]),E.makeSpace(le,he,Oe,te,me),a.once("spaceTool.ended",function(Pe){E.activateSelection(Pe.originalEvent,!0,!0)})}})}function Lf(n){return{top:n.top-20,right:n.right+20,bottom:n.bottom+20,left:n.left-20}}function Pg(n){var o,a,l=n.context.spaceToolConstraints;l&&(k(l.left)&&(o=Math.max(n.x,l.left),n.dx=n.dx+o-n.x,n.x=o),k(l.right)&&(o=Math.min(n.x,l.right),n.dx=n.dx+o-n.x,n.x=o),k(l.top)&&(a=Math.max(n.y,l.top),n.dy=n.dy+a-n.y,n.y=a),k(l.bottom)&&(a=Math.min(n.y,l.bottom),n.dy=n.dy+a-n.y,n.y=a))}function Sl(n,o){return-1!==n.indexOf(o)}function Bf(n){return!!n.waypoints}function Df(n){return!!n.labelTarget}Ao.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"],Ao.prototype.activateSelection=function(n,o,a){this._dragging.init(n,"spaceTool.selection",{autoActivate:o,cursor:Sb,data:{context:{reactivate:a}},trapClick:!1})},Ao.prototype.activateMakeSpace=function(n){this._dragging.init(n,"spaceTool",{autoActivate:!0,cursor:Sb,data:{context:{}}})},Ao.prototype.makeSpace=function(n,o,a,l,d){return this._modeling.createSpace(n,o,a,l,d)},Ao.prototype.init=function(n,o){var a=Tg(n.dx)>Tg(n.dy)?"x":"y",l=n["d"+a],d=n[a]-l;if(Tg(l)<5)return!1;l<0&&(l*=-1),Ja(n)&&(l*=-1);var b=function(W,z){if("x"===W){if(z>0)return"e";if(z<0)return"w"}if("y"===W){if(z>0)return"s";if(z<0)return"n"}return null}(a,l),A=co(this._canvas.getRootElement(),!0),E=this.calculateAdjustments(A,a,l,d);return N(o,E,{axis:a,direction:b,spaceToolConstraints:function(W,z,te,le,he){var me=W.movingShapes,Oe=W.resizingShapes;if(Oe.length){var Pe,we,Ee={};return p(Oe,function(De){var Be,He,rt,qe,nt,gt,qt=De.attachers,Mt=De.children,dt=Yt(De),Ot=w(Mt,function(bt){return!(Bf(bt)||Df(bt)||Sl(me,bt)||Sl(Oe,bt))}),un=w(Mt,function(bt){return!Bf(bt)&&!Df(bt)&&Sl(me,bt)}),Ve=[],Se=[];Ot.length&&(He=Lf(Yt(qn(Ot))),Be=le-dt[Aa[te]]+He[Aa[te]],"n"===te?Ee.bottom=we=k(we)?Math.min(we,Be):Be:"w"===te?Ee.right=we=k(we)?Math.min(we,Be):Be:"s"===te?Ee.top=Pe=k(Pe)?Math.max(Pe,Be):Be:"e"===te&&(Ee.left=Pe=k(Pe)?Math.max(Pe,Be):Be)),un.length&&(rt=Lf(Yt(qn(un))),Be=le-rt[Aa[Nf[te]]]+dt[Aa[Nf[te]]],"n"===te?Ee.bottom=we=k(we)?Math.min(we,Be):Be:"w"===te?Ee.right=we=k(we)?Math.min(we,Be):Be:"s"===te?Ee.top=Pe=k(Pe)?Math.max(Pe,Be):Be:"e"===te&&(Ee.left=Pe=k(Pe)?Math.max(Pe,Be):Be)),qt&&qt.length&&(qt.forEach(function(bt){Sl(me,bt)?Ve.push(bt):Se.push(bt)}),Ve.length&&(qe=Yt(qn(Ve.map(on))),nt=dt[Aa[Nf[te]]]-(qe[Aa[Nf[te]]]-le)),Se.length&&(gt=Yt(qn(Se.map(on)))[Aa[te]]-(dt[Aa[te]]-le)),"n"===te?(Be=Math.min(nt||1/0,gt||1/0),Ee.bottom=we=k(we)?Math.min(we,Be):Be):"w"===te?(Be=Math.min(nt||1/0,gt||1/0),Ee.right=we=k(we)?Math.min(we,Be):Be):"s"===te?(Be=Math.max(nt||-1/0,gt||-1/0),Ee.top=Pe=k(Pe)?Math.max(Pe,Be):Be):"e"===te&&(Be=Math.max(nt||-1/0,gt||-1/0),Ee.left=Pe=k(Pe)?Math.max(Pe,Be):Be));var et=he&&he[De.id];et&&("n"===te?(Be=le+De[us[z]]-et[us[z]],Ee.bottom=we=k(we)?Math.min(we,Be):Be):"w"===te?(Be=le+De[us[z]]-et[us[z]],Ee.right=we=k(we)?Math.min(we,Be):Be):"s"===te?(Be=le-De[us[z]]+et[us[z]],Ee.top=Pe=k(Pe)?Math.max(Pe,Be):Be):"e"===te&&(Be=le-De[us[z]]+et[us[z]],Ee.left=Pe=k(Pe)?Math.max(Pe,Be):Be))}),Ee}}(E,a,b,d,this._eventBus.fire("spaceTool.getMinDimensions",{axis:a,direction:b,shapes:E.resizingShapes,start:d})),start:d}),Od("resize-"+("x"===a?"ew":"ns")),!0},Ao.prototype.calculateAdjustments=function(n,o,a,l){var d=this._rules,b=[],A=[],E=[],$=[];function W(te){b.includes(te)||b.push(te);var le=te.label;le&&!b.includes(le)&&b.push(le)}p(n,function(te){if(te.parent&&!Df(te))if(Bf(te))$.push(te);else{var le=te[o],he=le+te[us[o]];if(te.host&&(a>0&&on(te)[o]>l||a<0&&on(te)[o]<l))E.push(te);else{var me;if(!(a>0&&le>l||a<0&&he<l))return le<l&&he>l&&d.allowed("shape.resize",{shape:te})?void(A.includes(me=te)||A.push(me)):void 0;W(te)}}}),p(b,function(te){var le=te.attachers;le&&p(le,function(he){W(he)})});var z=b.concat(A);return p(E,function(te){Sl(z,te.host)&&W(te)}),z=b.concat(A),p($,function(te){var he=te.target,me=te.label;Sl(z,te.source)&&Sl(z,he)&&me&&W(me)}),{movingShapes:b,resizingShapes:A}},Ao.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var n=this._mouse.getLastMoveEvent();this.activateSelection(n,!!n)},Ao.prototype.isActive=function(){var n=this._dragging.context();return!!n&&/^spaceTool/.test(n.prefix)};var Rg="djs-dragging",Rh="djs-resizing",El=Math.max;function Lc(n,o,a,l,d){function b(A,E){p(A,function($){d.addDragger($,E),a.addMarker($,Rg)})}n.on("spaceTool.selection.start",function(A){var E=a.getLayer("space"),$=A.context,te=jt("g");yt(te,l.cls("djs-crosshair-group",["no-events"])),Ze(E,te);var le=jt("path");yt(le,"d","M 0,-10000 L 0,10000"),Fe(le).add("djs-crosshair"),Ze(te,le);var he=jt("path");yt(he,"d","M -10000,0 L 10000,0"),Fe(he).add("djs-crosshair"),Ze(te,he),$.crosshairGroup=te}),n.on("spaceTool.selection.move",function(A){Br(A.context.crosshairGroup,A.x,A.y)}),n.on("spaceTool.selection.cleanup",function(A){var E=A.context.crosshairGroup;E&&ot(E)}),n.on("spaceTool.move",250,function(A){var E=A.context,$=E.line,W=E.axis,z=E.movingShapes,te=E.resizingShapes;if(E.initialized){if(!E.dragGroup){var le=a.getLayer("space");yt($=jt("path"),"d","M0,0 L0,0"),Fe($).add("djs-crosshair"),Ze(le,$),E.line=$;var he=jt("g");yt(he,l.cls("djs-drag-group",["no-events"])),Ze(a.getActiveLayer(),he),b(z,he),b(E.movingConnections=o.filter(function(we){var Ee=!1;p(z,function(rt){p(rt.outgoing,function(qe){we===qe&&(Ee=!0)})});var De=!1;p(z,function(rt){p(rt.incoming,function(qe){we===qe&&(De=!0)})});var Be=!1;p(te,function(rt){p(rt.outgoing,function(qe){we===qe&&(Be=!0)})});var He=!1;return p(te,function(rt){p(rt.incoming,function(qe){we===qe&&(He=!0)})}),we.waypoints&&(Ee||Be)&&(De||He)}),he),E.dragGroup=he}if(!E.frameGroup){var me=jt("g");yt(me,l.cls("djs-frame-group",["no-events"])),Ze(a.getActiveLayer(),me);var Oe=[];p(te,function(we){var Ee=d.addFrame(we,me),De=Ee.getBBox();Oe.push({element:Ee,initialBounds:De}),a.addMarker(we,Rh)}),E.frameGroup=me,E.frames=Oe}yt($,{d:{x:"M"+A.x+", -10000 L"+A.x+", 10000",y:"M -10000, "+A.y+" L 10000, "+A.y}[W]});var Pe={x:A.dx,y:A.dy};Pe[{x:"y",y:"x"}[E.axis]]=0,Br(E.dragGroup,Pe.x,Pe.y),p(E.frames,function(we){var Ee,De,Be=we.element,He=we.initialBounds;yt(Be,"e"===E.direction?{width:El(He.width+Pe.x,5)}:{width:Ee=El(He.width-Pe.x,5),x:He.x+He.width-Ee}),yt(Be,"s"===E.direction?{height:El(He.height+Pe.y,5)}:{height:De=El(He.height-Pe.y,5),y:He.y+He.height-De})})}}),n.on("spaceTool.cleanup",function(A){var E=A.context,W=E.movingConnections,z=E.resizingShapes,te=E.line,le=E.dragGroup,he=E.frameGroup;p(E.movingShapes,function(me){a.removeMarker(me,Rg)}),p(W,function(me){a.removeMarker(me,Rg)}),le&&(ot(te),ot(le)),p(z,function(me){a.removeMarker(me,Rh)}),he&&ot(he)})}Lc.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];var $g={__init__:["spaceToolPreview"],__depends__:[Ns,Zo,Mf,Yd,oh],spaceTool:["type",Ao],spaceToolPreview:["type",Lc]};function Ff(n){n.invoke(Ao,this)}Ff.$inject=["injector"],Ce(Ff,Ao),Ff.prototype.calculateAdjustments=function(n,o,a,l){var d=Ao.prototype.calculateAdjustments.call(this,n,o,a,l);return d.resizingShapes=d.resizingShapes.filter(function(b){return!Le(b,"bpmn:TextAnnotation")}),d};var Mg={__depends__:[$g],spaceTool:["type",Ff]};function fi(n,o){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=o,this._eventBus=n,this._uid=1,n.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}fi.$inject=["eventBus","injector"],fi.prototype.execute=function(n,o){if(!n)throw new Error("command required");this._currentExecution.trigger="execute";const a={command:n,context:o};this._pushAction(a),this._internalExecute(a),this._popAction(a)},fi.prototype.canExecute=function(n,o){const a={command:n,context:o},l=this._getHandler(n);let d=this._fire(n,"canExecute",a);if(void 0===d){if(!l)return!1;l.canExecute&&(d=l.canExecute(o))}return d},fi.prototype.clear=function(n){this._stack.length=0,this._stackIdx=-1,!1!==n&&this._fire("changed",{trigger:"clear"})},fi.prototype.undo=function(){let n,o=this._getUndoAction();if(o){for(this._currentExecution.trigger="undo",this._pushAction(o);o&&(this._internalUndo(o),n=this._getUndoAction(),n&&n.id===o.id);)o=n;this._popAction()}},fi.prototype.redo=function(){let n,o=this._getRedoAction();if(o){for(this._currentExecution.trigger="redo",this._pushAction(o);o&&(this._internalExecute(o,!0),n=this._getRedoAction(),n&&n.id===o.id);)o=n;this._popAction()}},fi.prototype.register=function(n,o){this._setHandler(n,o)},fi.prototype.registerHandler=function(n,o){if(!n||!o)throw new Error("command and handlerCls must be defined");const a=this._injector.instantiate(o);this.register(n,a)},fi.prototype.canUndo=function(){return!!this._getUndoAction()},fi.prototype.canRedo=function(){return!!this._getRedoAction()},fi.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},fi.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},fi.prototype._internalUndo=function(n){const o=n.command,a=n.context,l=this._getHandler(o);this._atomicDo(()=>{this._fire(o,"revert",n),l.revert&&this._markDirty(l.revert(a)),this._revertedAction(n),this._fire(o,"reverted",n)})},fi.prototype._fire=function(n,o,a){arguments.length<3&&(a=o,o=null);const l=o?[n+"."+o,o]:[n];let d;a=this._eventBus.createEvent(a);for(const b of l)if(d=this._eventBus.fire("commandStack."+b,a),a.cancelBubble)break;return d},fi.prototype._createId=function(){return this._uid++},fi.prototype._atomicDo=function(n){const o=this._currentExecution;o.atomic=!0;try{n()}finally{o.atomic=!1}},fi.prototype._internalExecute=function(n,o){const a=n.command,l=n.context,d=this._getHandler(a);if(!d)throw new Error("no command handler registered for <"+a+">");this._pushAction(n),o||(this._fire(a,"preExecute",n),d.preExecute&&d.preExecute(l),this._fire(a,"preExecuted",n)),this._atomicDo(()=>{this._fire(a,"execute",n),d.execute&&this._markDirty(d.execute(l)),this._executedAction(n,o),this._fire(a,"executed",n)}),o||(this._fire(a,"postExecute",n),d.postExecute&&d.postExecute(l),this._fire(a,"postExecuted",n)),this._popAction(n)},fi.prototype._pushAction=function(n){const o=this._currentExecution,a=o.actions,l=a[0];if(o.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+n.command+")");n.id||(n.id=l&&l.id||this._createId()),a.push(n)},fi.prototype._popAction=function(){const n=this._currentExecution,o=n.trigger,a=n.actions,l=n.dirty;a.pop(),a.length||(this._eventBus.fire("elements.changed",{elements:Q("id",l.reverse())}),l.length=0,this._fire("changed",{trigger:o}),n.trigger=null)},fi.prototype._markDirty=function(n){const o=this._currentExecution;n&&(n=H(n)?n:[n],o.dirty=o.dirty.concat(n))},fi.prototype._executedAction=function(n,o){const a=++this._stackIdx;o||this._stack.splice(a,this._stack.length,n)},fi.prototype._revertedAction=function(n){this._stackIdx--},fi.prototype._getHandler=function(n){return this._handlerMap[n]},fi.prototype._setHandler=function(n,o){if(!n||!o)throw new Error("command and handler required");if(this._handlerMap[n])throw new Error("overriding handler for command <"+n+">");this._handlerMap[n]=o};var L1={commandStack:["type",fi]},B1=new Ou("tt");function Ng(n,o){n.style.display=!1===o?"none":""}var Wf=".djs-tooltip";function Pr(n,o){var a,l;this._eventBus=n,this._canvas=o,this._ids=B1,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=(a=o.getContainer(),oe(l=vt('<div class="djs-tooltip-container" />'),{position:"absolute",width:"0",height:"0"}),a.insertBefore(l,a.firstChild),l);var d=this;Et.bind(this._tooltipRoot,Wf,"mousedown",function(b){b.stopPropagation()}),Et.bind(this._tooltipRoot,Wf,"mouseover",function(b){d.trigger("mouseover",b)}),Et.bind(this._tooltipRoot,Wf,"mouseout",function(b){d.trigger("mouseout",b)}),this._init()}Pr.$inject=["eventBus","canvas"],Pr.prototype.add=function(n){if(!n.position)throw new Error("must specifiy tooltip position");if(!n.html)throw new Error("must specifiy tooltip html");var o=this._ids.next();return n=N({},this._tooltipDefaults,n,{id:o}),this._addTooltip(n),n.timeout&&this.setTimeout(n),o},Pr.prototype.trigger=function(n,o){var l=this.get(pe(o.delegateTarget||o.target,"data-tooltip-id"));l&&("mouseover"===n&&l.timeout&&this.clearTimeout(l),"mouseout"===n&&l.timeout&&(l.timeout=1e3,this.setTimeout(l)))},Pr.prototype.get=function(n){return"string"!=typeof n&&(n=n.id),this._tooltips[n]},Pr.prototype.clearTimeout=function(n){if(n=this.get(n)){var o=n.removeTimer;o&&(clearTimeout(o),n.removeTimer=null)}},Pr.prototype.setTimeout=function(n){if(n=this.get(n)){this.clearTimeout(n);var o=this;n.removeTimer=setTimeout(function(){o.remove(n)},n.timeout)}},Pr.prototype.remove=function(n){var o=this.get(n);o&&(Wt(o.html),Wt(o.htmlContainer),delete o.htmlContainer,delete this._tooltips[o.id])},Pr.prototype.show=function(){Ng(this._tooltipRoot)},Pr.prototype.hide=function(){Ng(this._tooltipRoot,!1)},Pr.prototype._updateRoot=function(n){var o=n.scale||1,a=n.scale||1,l="matrix("+o+",0,0,"+a+","+-1*n.x*o+","+-1*n.y*a+")";this._tooltipRoot.style.transform=l,this._tooltipRoot.style["-ms-transform"]=l},Pr.prototype._addTooltip=function(n){var o,a=n.id,l=n.html,d=this._tooltipRoot;l.get&&l.constructor.prototype.jquery&&(l=l.get(0)),M(l)&&(l=vt(l)),oe(o=vt('<div data-tooltip-id="'+a+'" class="djs-tooltip">'),{position:"absolute"}),o.appendChild(l),n.type&&be(o).add("djs-tooltip-"+n.type),n.className&&be(o).add(n.className),n.htmlContainer=o,d.appendChild(o),this._tooltips[a]=n,this._updateTooltip(n)},Pr.prototype._updateTooltip=function(n){var o=n.position;oe(n.htmlContainer,{left:o.x+"px",top:o.y+"px"})},Pr.prototype._updateTooltipVisibilty=function(n){p(this._tooltips,function(o){var a=o.show,d=!0;a&&((a.minZoom>n.scale||a.maxZoom<n.scale)&&(d=!1),Ng(o.htmlContainer,d))})},Pr.prototype._init=function(){var n=this;this._eventBus.on("canvas.viewbox.changing",function(o){n.hide()}),this._eventBus.on("canvas.viewbox.changed",function(o){var a;n._updateRoot(a=o.viewbox),n._updateTooltipVisibilty(a),n.show()})};var D1={__init__:["tooltips"],tooltips:["type",Pr]};function Oa(n,o){if("function"!=typeof o)throw new Error("removeFn iterator must be a function");if(n){for(var a;a=n[0];)o(a);return n}}function Gf(n,o,a){Lt.call(this,o);var l=n.get("movePreview",!1);o.on("shape.move.start",1400,function(d){var b=d.context,E=b.validatedShapes;b.shapes=Eb(b.shapes),b.validatedShapes=Eb(E)}),l&&o.on("shape.move.start",250,function(d){var b=d.context,E=[];p(b.shapes,function($){p($.labels,function(W){W.hidden||-1!==b.shapes.indexOf(W)||E.push(W),$.labelTarget&&E.push($)})}),p(E,function($){l.makeDraggable(b,$,!0)})}),this.preExecuted("elements.move",1400,function(d){var b=d.context.closure,A=b.enclosedElements,E=[];p(A,function($){p($.labels,function(W){A[W.id]||E.push(W)})}),b.addAll(E)}),this.preExecute(["connection.delete","shape.delete"],function(d){var b=d.context;Oa((b.connection||b.shape).labels,function(A){a.removeShape(A,{nested:!0})})}),this.execute("shape.delete",function(d){var b=d.context,A=b.shape,E=A.labelTarget;E&&(b.labelTargetIndex=uo(E.labels,A),b.labelTarget=E,A.labelTarget=null)}),this.revert("shape.delete",function(d){var b=d.context,A=b.shape,E=b.labelTarget;E&&(hi(E.labels,A,b.labelTargetIndex),A.labelTarget=E)})}function Eb(n){return w(n,function(o){return-1===n.indexOf(o.labelTarget)})}Ce(Gf,Lt),Gf.$inject=["injector","eventBus","modeling"];var F1={__init__:["labelSupport"],labelSupport:["type",Gf]},Lg="attach-ok";function $h(n,o,a,l,d){Lt.call(this,o);var b=n.get("movePreview",!1);o.on("shape.move.start",1401,function(A){var E,$,le,he,W=A.context,te=W.validatedShapes;W.shapes=($=Bg(E=W.shapes),G("id",E,$)),W.validatedShapes=(he=L(le=te,"id"),w(le,function(me){for(;me;){if(me.host&&he[me.host.id])return!1;me=me.parent}return!0}))}),b&&o.on("shape.move.start",251,function(A){var E=A.context;p(Bg(E.shapes),function($){b.makeDraggable(E,$,!0),p($.labels,function(W){b.makeDraggable(E,W,!0)})})}),b&&o.on("shape.move.start",function(A){var E=A.context.shapes;if(1===E.length){var $=E[0].host;$&&(a.addMarker($,Lg),o.once(["shape.move.out","shape.move.cleanup"],function(){a.removeMarker($,Lg)}))}}),this.preExecuted("elements.move",1401,function(A){var E=A.context,$=E.closure;p(Bg(E.shapes),function(W){$.add(W,$.topLevel[W.host.id])})}),this.postExecuted("elements.move",function(A){var E=A.context,$=E.shapes,W=E.newHost;W&&1!==$.length||p(W?$:w($,function(z){return!!z.host&&-1===$.indexOf(z.host)}),function(z){d.updateAttachment(z,W)})}),this.postExecuted("elements.move",function(A){p(A.context.shapes,function(E){p(E.attachers,function($){p($.outgoing.slice(),function(W){l.allowed("connection.reconnect",{connection:W,source:W.source,target:W.target})||d.removeConnection(W)}),p($.incoming.slice(),function(W){l.allowed("connection.reconnect",{connection:W,source:W.source,target:W.target})||d.removeConnection(W)})})})}),this.postExecute("shape.create",function(A){var E=A.context,W=E.host;W&&d.updateAttachment(E.shape,W)}),this.postExecute("shape.replace",function(A){var E=A.context,$=E.oldShape,W=E.newShape;Oa($.attachers,function(z){"attach"===l.allowed("elements.move",{target:W,shapes:[z]})?d.updateAttachment(z,W):d.removeShape(z)}),W.attachers.length&&p(W.attachers,function(z){var te=Tc(z,$,W);d.moveShape(z,te,z.parent)})}),this.postExecute("shape.resize",function(A){var E=A.context,W=E.oldBounds,z=E.newBounds;!1!==(E.hints||{}).attachSupport&&p(E.shape.attachers,function(le){var he=Tc(le,W,z);d.moveShape(le,he,le.parent),p(le.labels,function(me){d.moveShape(me,he,me.parent)})})}),this.preExecute("shape.delete",function(A){var E=A.context.shape;Oa(E.attachers,function($){d.removeShape($)}),E.host&&d.updateAttachment(E,null)})}function Bg(n){return ce(O(n,function(o){return o.attachers||[]}))}Ce($h,Lt),$h.$inject=["injector","eventBus","canvas","rules","modeling"];var Dg={__depends__:[Zo],__init__:["attachSupport"],attachSupport:["type",$h]};function Oo(n){this._model=n}function no(n,o,a,l){Lt.call(this,n),this._bpmnFactory=o,this._translate=l;var d=this;function b(z){p(z.context.oldRoot.children,function(te){Le(te,"bpmn:BaseElement")&&d.updateParent(te)})}function A(z){var te=z.context.shape;Le(te,"bpmn:BaseElement")&&d.updateBounds(te)}function E(z){d.updateConnection(z.context)}function $(z){d.updateConnectionWaypoints(z.context.connection)}function W(z){d.updateAttachment(z.context)}this.executed(["connection.layout","connection.create"],function(z){var te,le=z.context;le.cropped||!1===(le.hints||{}).createElementsBehavior||((te=le.connection).waypoints=a.getCroppedWaypoints(te),le.cropped=!0)}),this.reverted(["connection.layout"],function(z){delete z.context.cropped}),this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],zo(function(z){var te=z.context;d.updateParent(te.shape||te.connection,te.oldParent)})),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],zo(function(z){var te=z.context;d.updateParent(te.shape||te.connection,te.parent||te.newParent)})),this.executed(["canvas.updateRoot"],b),this.reverted(["canvas.updateRoot"],b),this.executed(["shape.move","shape.create","shape.resize"],zo(function(z){"label"!==z.context.shape.type&&A(z)})),this.reverted(["shape.move","shape.create","shape.resize"],zo(function(z){"label"!==z.context.shape.type&&A(z)})),n.on("shape.changed",function(z){"label"===z.element.type&&A({context:{shape:z.element}})}),this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],zo(E)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],zo(E)),this.executed(["connection.layout","connection.move","connection.updateWaypoints"],zo($)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],zo($)),this.executed("connection.reconnect",zo(function(z){var te=z.context,he=te.oldSource,me=te.newSource,Oe=Dt(te.connection),Pe=Dt(he),we=Dt(me);Oe.conditionExpression&&!wn(we,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(te.oldConditionExpression=Oe.conditionExpression,delete Oe.conditionExpression),he!==me&&Pe.default===Oe&&(te.oldDefault=Pe.default,delete Pe.default)})),this.reverted("connection.reconnect",zo(function(z){var te=z.context,he=te.oldSource,me=te.newSource,Oe=Dt(te.connection),Pe=Dt(he),we=Dt(me);te.oldConditionExpression&&(Oe.conditionExpression=te.oldConditionExpression),te.oldDefault&&(Pe.default=te.oldDefault,delete we.default)})),this.executed(["element.updateAttachment"],zo(W)),this.reverted(["element.updateAttachment"],zo(W))}function zo(n){return function(o){var a=o.context;Le(a.shape||a.connection,"bpmn:BaseElement")&&n(o)}}function Ia(n,o,a){ws.call(this),this._bpmnFactory=n,this._moddle=o,this._translate=a}function W1(n,o,a){return void 0===o[a]?o:(n[a]=o[a],ue(o,[a]))}function Fg(n,o){this._modeling=n,this._canvas=o}function jf(n){this._modeling=n}function Bc(n,o){this._canvas=n,this._layouter=o}Oo.$inject=["moddle"],Oo.prototype._needsId=function(n){return wn(n,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])},Oo.prototype._ensureId=function(n){var o;n.id?this._model.ids.claim(n.id,n):(o=Le(n,"bpmn:Activity")?"Activity":Le(n,"bpmn:Event")?"Event":Le(n,"bpmn:Gateway")?"Gateway":wn(n,["bpmn:SequenceFlow","bpmn:MessageFlow"])?"Flow":(n.$type||"").replace(/^[^:]*:/g,""),o+="_",!n.id&&this._needsId(n)&&(n.id=this._model.ids.nextPrefixed(o,n)))},Oo.prototype.create=function(n,o){var a=this._model.create(n,o||{});return this._ensureId(a),a},Oo.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})},Oo.prototype.createDiShape=function(n,o){return this.create("bpmndi:BPMNShape",N({bpmnElement:n,bounds:this.createDiBounds()},o))},Oo.prototype.createDiBounds=function(n){return this.create("dc:Bounds",n)},Oo.prototype.createDiWaypoints=function(n){var o=this;return O(n,function(a){return o.createDiWaypoint(a)})},Oo.prototype.createDiWaypoint=function(n){return this.create("dc:Point",re(n,["x","y"]))},Oo.prototype.createDiEdge=function(n,o){return this.create("bpmndi:BPMNEdge",N({bpmnElement:n,waypoint:this.createDiWaypoints([])},o))},Oo.prototype.createDiPlane=function(n,o){return this.create("bpmndi:BPMNPlane",N({bpmnElement:n},o))},Ce(no,Lt),no.$inject=["eventBus","bpmnFactory","connectionDocking","translate"],no.prototype.updateAttachment=function(n){var o=n.shape,l=o.host;o.businessObject.attachedToRef=l&&l.businessObject},no.prototype.updateParent=function(n,o){if(!(n instanceof cu||Le(n,"bpmn:DataStoreReference")&&n.parent&&Le(n.parent,"bpmn:Collaboration"))){var a=n.parent,l=n.businessObject,d=Rn(n),b=a&&a.businessObject,A=Rn(a);Le(n,"bpmn:FlowNode")&&this.updateFlowNodeRefs(l,b,o&&o.businessObject),Le(n,"bpmn:DataOutputAssociation")&&(b=n.source?n.source.businessObject:null),Le(n,"bpmn:DataInputAssociation")&&(b=n.target?n.target.businessObject:null),this.updateSemanticParent(l,b),Le(n,"bpmn:DataObjectReference")&&l.dataObjectRef&&this.updateSemanticParent(l.dataObjectRef,b),this.updateDiParent(d,A)}},no.prototype.updateBounds=function(n){var o=Rn(n),a=function(A){if(Le(A,"bpmn:Activity")){var E=Rn(A);if(E){var $=E.get("label");if($)return $.get("bounds")}}}(n);if(a){var l=Kr(a,o.get("bounds"));N(a,{x:n.x+l.x,y:n.y+l.y})}var d=n instanceof cu?this._getLabel(o):o,b=d.bounds;b||(b=this._bpmnFactory.createDiBounds(),d.set("bounds",b)),N(b,{x:n.x,y:n.y,width:n.width,height:n.height})},no.prototype.updateFlowNodeRefs=function(n,o,a){a!==o&&(Le(a,"bpmn:Lane")&&gi(a.get("flowNodeRef"),n),Le(o,"bpmn:Lane")&&hi(o.get("flowNodeRef"),n))},no.prototype.updateDiConnection=function(n,o,a){var l=Rn(n),d=Rn(o),b=Rn(a);l.sourceElement&&l.sourceElement.bpmnElement!==Dt(o)&&(l.sourceElement=o&&d),l.targetElement&&l.targetElement.bpmnElement!==Dt(a)&&(l.targetElement=a&&b)},no.prototype.updateDiParent=function(n,o){if(o&&!Le(o,"bpmndi:BPMNPlane")&&(o=o.$parent),n.$parent!==o){var a=(o||n.$parent).get("planeElement");o?(a.push(n),n.$parent=o):(gi(a,n),n.$parent=null)}},no.prototype.getLaneSet=function(n){var o,a;return Le(n,"bpmn:Lane")?((o=n.childLaneSet)||(o=this._bpmnFactory.create("bpmn:LaneSet"),n.childLaneSet=o,o.$parent=n),o):(Le(n,"bpmn:Participant")&&(n=n.processRef),(o=(a=n.get("laneSets"))[0])||((o=this._bpmnFactory.create("bpmn:LaneSet")).$parent=n,a.push(o)),o)},no.prototype.updateSemanticParent=function(n,o,a){var l,d=this._translate;if(n.$parent!==o&&(!Le(n,"bpmn:DataInput")&&!Le(n,"bpmn:DataOutput")||(Le(o,"bpmn:Participant")&&"processRef"in o&&(o=o.processRef),!("ioSpecification"in o)||o.ioSpecification!==n.$parent))){if(Le(n,"bpmn:Lane"))o&&(o=this.getLaneSet(o)),l="lanes";else if(Le(n,"bpmn:FlowElement")){if(o)if(Le(o,"bpmn:Participant"))o=o.processRef;else if(Le(o,"bpmn:Lane"))do{o=o.$parent.$parent}while(Le(o,"bpmn:Lane"));l="flowElements"}else if(Le(n,"bpmn:Artifact")){for(;o&&!Le(o,"bpmn:Process")&&!Le(o,"bpmn:SubProcess")&&!Le(o,"bpmn:Collaboration");){if(Le(o,"bpmn:Participant")){o=o.processRef;break}o=o.$parent}l="artifacts"}else if(Le(n,"bpmn:MessageFlow"))l="messageFlows";else if(Le(n,"bpmn:Participant")){l="participants";var b,A=n.processRef;A&&(b=function(W){for(;W&&!Le(W,"bpmn:Definitions");)W=W.$parent;return W}(n.$parent||o),n.$parent&&(gi(b.get("rootElements"),A),A.$parent=null),o&&(hi(b.get("rootElements"),A),A.$parent=b))}else Le(n,"bpmn:DataOutputAssociation")?l="dataOutputAssociations":Le(n,"bpmn:DataInputAssociation")&&(l="dataInputAssociations");if(!l)throw new Error(d("no parent for {element} in {parent}",{element:n.id,parent:o.id}));var E;if(n.$parent&&gi(E=n.$parent.get(l),n),o?((E=o.get(l)).push(n),n.$parent=o):n.$parent=null,a){var $=a.get(l);gi(E,n),o&&($||o.set(l,$=[]),$.push(n))}}},no.prototype.updateConnectionWaypoints=function(n){Rn(n).set("waypoint",this._bpmnFactory.createDiWaypoints(n.waypoints))},no.prototype.updateConnection=function(n){var a=n.connection,l=Dt(a),d=a.source,b=Dt(d),A=a.target,E=Dt(a.target);if(Le(l,"bpmn:DataAssociation"))Le(l,"bpmn:DataInputAssociation")?(l.get("sourceRef")[0]=b,this.updateSemanticParent(l,E,n.parent||n.newParent||E)):Le(l,"bpmn:DataOutputAssociation")&&(this.updateSemanticParent(l,b,n.parent||n.newParent||b),l.targetRef=E);else{var $=Le(l,"bpmn:SequenceFlow");l.sourceRef!==b&&($&&(gi(l.sourceRef&&l.sourceRef.get("outgoing"),l),b&&b.get("outgoing")&&b.get("outgoing").push(l)),l.sourceRef=b),l.targetRef!==E&&($&&(gi(l.targetRef&&l.targetRef.get("incoming"),l),E&&E.get("incoming")&&E.get("incoming").push(l)),l.targetRef=E)}this.updateConnectionWaypoints(a),this.updateDiConnection(a,d,A)},no.prototype._getLabel=function(n){return n.label||(n.label=this._bpmnFactory.createDiLabel()),n.label},Ce(Ia,ws),Ia.$inject=["bpmnFactory","moddle","translate"],Ia.prototype.baseCreate=ws.prototype.create,Ia.prototype.create=function(n,o){if("label"===n){var a=o.di||this._bpmnFactory.createDiLabel();return this.baseCreate(n,N({type:"label",di:a},ns,o))}return this.createBpmnElement(n,o)},Ia.prototype.createBpmnElement=function(n,o){var a,l,d,W,z,b=this._translate,A=(o=N({},o||{})).businessObject,E=o.di;if(!A){if(!o.type)throw new Error(b("no shape type specified"));$p(A=this._bpmnFactory.create(o.type))}if(!wn(E,["bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane"])){var $=N({},E||{},{id:A.id+"_di"});E="root"===n?this._bpmnFactory.createDiPlane(A,$):"connection"===n?this._bpmnFactory.createDiEdge(A,$):this._bpmnFactory.createDiShape(A,$)}return Le(A,"bpmn:Group")&&(o=N({isFrame:!0},o)),W=A,z=o,p(["processRef","isInterrupting","associationDirection","isForCompensation"],function(le){z=W1(W,z,le)}),(o=z).isExpanded&&(o=W1(E,o,"isExpanded")),Le(A,"bpmn:SubProcess")&&(o.collapsed=!kn(A,E)),Le(A,"bpmn:ExclusiveGateway")&&(E.isMarkerVisible=!0),Z(o.triggeredByEvent)&&(A.triggeredByEvent=o.triggeredByEvent,delete o.triggeredByEvent),Z(o.cancelActivity)&&(A.cancelActivity=o.cancelActivity,delete o.cancelActivity),o.eventDefinitionType&&(l=A.get("eventDefinitions")||[],d=this._bpmnFactory.create(o.eventDefinitionType,o.eventDefinitionAttrs),"bpmn:ConditionalEventDefinition"===o.eventDefinitionType&&(d.condition=this._bpmnFactory.create("bpmn:FormalExpression")),l.push(d),d.$parent=A,A.eventDefinitions=l,delete o.eventDefinitionType),a=this.getDefaultSize(A,E),o=N({id:A.id},a,o,{businessObject:A,di:E}),this.baseCreate(n,o)},Ia.prototype.getDefaultSize=function(n,o){var a=Dt(n);return o=o||Rn(n),Le(a,"bpmn:SubProcess")?kn(a,o)?{width:350,height:200}:{width:100,height:80}:Le(a,"bpmn:Task")?{width:100,height:80}:Le(a,"bpmn:Gateway")?{width:50,height:50}:Le(a,"bpmn:Event")?{width:36,height:36}:Le(a,"bpmn:Participant")?kn(a,o)?{width:600,height:250}:{width:400,height:60}:Le(a,"bpmn:Lane")?{width:400,height:100}:Le(a,"bpmn:DataObjectReference")?{width:36,height:50}:Le(a,"bpmn:DataStoreReference")?{width:50,height:50}:Le(a,"bpmn:TextAnnotation")?{width:100,height:30}:Le(a,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}},Ia.prototype.createParticipantShape=function(n){return F(n)||(n={isExpanded:n}),!1!==(n=N({type:"bpmn:Participant"},n||{})).isExpanded&&(n.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(n)},Fg.$inject=["modeling","canvas"],Fg.prototype.preExecute=function(n){var o=this._modeling,l=n.alignment;p(n.elements,function(d){var b={x:0,y:0};Z(l.left)?b.x=l.left-d.x:Z(l.right)?b.x=l.right-d.width-d.x:Z(l.center)?b.x=l.center-Math.round(d.width/2)-d.x:Z(l.top)?b.y=l.top-d.y:Z(l.bottom)?b.y=l.bottom-d.height-d.y:Z(l.middle)&&(b.y=l.middle-Math.round(d.height/2)-d.y),o.moveElements([d],b,d.parent)})},Fg.prototype.postExecute=function(n){},jf.$inject=["modeling"],jf.prototype.preExecute=function(n){var o=n.source;if(!o)throw new Error("source required");var l=n.shape;l=n.shape=this._modeling.createShape(l,n.position,n.target||o.parent,{attach:(n.hints||{}).attach}),n.shape=l},jf.prototype.postExecute=function(n){var a,l=n.hints||{};a=n.shape,v(n.source.outgoing,function(d){return d.target===a})||(l.connectionTarget===n.source?this._modeling.connect(n.shape,n.source,n.connection):this._modeling.connect(n.source,n.shape,n.connection))},Bc.$inject=["canvas","layouter"],Bc.prototype.execute=function(n){var o=n.connection,a=n.source,l=n.target,d=n.parent,b=n.parentIndex,A=n.hints;if(!a||!l)throw new Error("source and target required");if(!d)throw new Error("parent required");return o.source=a,o.target=l,o.waypoints||(o.waypoints=this._layouter.layoutConnection(o,A)),this._canvas.addConnection(o,d,b),o},Bc.prototype.revert=function(n){var o=n.connection;return this._canvas.removeConnection(o),o.source=null,o.target=null,o};var _a=Math.round;function Wg(n){this._modeling=n}function kb(n){return!!n.waypoints}Wg.$inject=["modeling"],Wg.prototype.preExecute=function(n){var o=n.elements,a=n.parent,l=n.parentIndex,d=n.position,b=n.hints,A=this._modeling;p(o,function(z){k(z.x)||(z.x=0),k(z.y)||(z.y=0)});var E=qn(w(o,function(z){return!z.hidden}));p(o,function(z){kb(z)&&(z.waypoints=O(z.waypoints,function(te){return{x:_a(te.x-E.x-E.width/2+d.x),y:_a(te.y-E.y-E.height/2+d.y)}})),N(z,{x:_a(z.x-E.x-E.width/2+d.x),y:_a(z.y-E.y-E.height/2+d.y)})});var $=Zr(o),W={};p(o,function(z){if(kb(z))W[z.id]=k(l)?A.createConnection(W[z.source.id],W[z.target.id],l,z,z.parent||a,b):A.createConnection(W[z.source.id],W[z.target.id],z,z.parent||a,b);else{var te=N({},b);-1===$.indexOf(z)&&(te.autoResize=!1),W[z.id]=k(l)?A.createShape(z,re(z,["x","y","width","height"]),z.parent||a,l,te):A.createShape(z,re(z,["x","y","width","height"]),z.parent||a,te)}}),n.elements=x(W)};var Gg=Math.round;function Sa(n){this._canvas=n}function kl(n){Sa.call(this,n)}Sa.$inject=["canvas"],Sa.prototype.execute=function(n){var o=n.shape,a=n.position,l=n.parent,d=n.parentIndex;if(!l)throw new Error("parent required");if(!a)throw new Error("position required");return N(o,void 0!==a.width?a:{x:a.x-Gg(o.width/2),y:a.y-Gg(o.height/2)}),this._canvas.addShape(o,l,d),o},Sa.prototype.revert=function(n){var o=n.shape;return this._canvas.removeShape(o),o},Ce(kl,Sa),kl.$inject=["canvas"];var G1=Sa.prototype.execute;kl.prototype.execute=function(n){var a,o=n.shape;return a=o,["width","height"].forEach(function(l){void 0===a[l]&&(a[l]=0)}),o.labelTarget=n.labelTarget,G1.call(this,n)};var j1=Sa.prototype.revert;function Dc(n,o){this._canvas=n,this._modeling=o}function jg(n,o){this._modeling=n,this._elementRegistry=o}function Tl(n,o){this._canvas=n,this._modeling=o}function Zf(n){this._modeling=n}kl.prototype.revert=function(n){return n.shape.labelTarget=null,j1.call(this,n)},Dc.$inject=["canvas","modeling"],Dc.prototype.preExecute=function(n){var o=this._modeling,a=n.connection;Oa(a.incoming,function(l){o.removeConnection(l,{nested:!0})}),Oa(a.outgoing,function(l){o.removeConnection(l,{nested:!0})})},Dc.prototype.execute=function(n){var o=n.connection,a=o.parent;return n.parent=a,n.parentIndex=uo(a.children,o),n.source=o.source,n.target=o.target,this._canvas.removeConnection(o),o.source=null,o.target=null,o},Dc.prototype.revert=function(n){var o=n.connection,a=n.parent,l=n.parentIndex;return o.source=n.source,o.target=n.target,hi(a.children,o,l),this._canvas.addConnection(o,a),o},jg.$inject=["modeling","elementRegistry"],jg.prototype.postExecute=function(n){var o=this._modeling,a=this._elementRegistry;p(n.elements,function(l){a.get(l.id)&&(l.waypoints?o.removeConnection(l):o.removeShape(l))})},Tl.$inject=["canvas","modeling"],Tl.prototype.preExecute=function(n){var o=this._modeling,a=n.shape;Oa(a.incoming,function(l){o.removeConnection(l,{nested:!0})}),Oa(a.outgoing,function(l){o.removeConnection(l,{nested:!0})}),Oa(a.children,function(l){l.waypoints?o.removeConnection(l,{nested:!0}):o.removeShape(l,{nested:!0})})},Tl.prototype.execute=function(n){var o=this._canvas,a=n.shape,l=a.parent;return n.oldParent=l,n.oldParentIndex=uo(l.children,a),o.removeShape(a),a},Tl.prototype.revert=function(n){var o=this._canvas,a=n.shape,l=n.oldParent;return hi(l.children,a,n.oldParentIndex),o.addShape(a,l),a},Zf.$inject=["modeling"];var Z1={x:"y",y:"x"};function Pl(n,o){this._layouter=n,this._canvas=o}function Vf(){}function Qf(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}function Mh(n){this._modeling=n}function Hf(n){this._helper=new Mh(n)}function Fc(n){this._modeling=n,this._helper=new Mh(n)}function zf(n){this._modeling=n}function V1(n){return n.original||n}function Si(n,o){this._modeling=n,this._rules=o}function Ea(n){this._modeling=n}function ka(n){this._modeling=n}function Tb(n){return N({},n)}function Zg(n){switch(n){case"n":case"s":return"y";case"w":case"e":return"x"}}function io(n,o,a){var l=Zg(a);return/e|s/.test(a)?n[l]>o:/n|w/.test(a)?n[l]<o:void 0}function Ta(n,o){return-1!==n.indexOf(o)}function Nh(n){this._modeling=n}function Pb(n){var o={};return p(n,function(a){o[a.id]=a.hidden,a.children&&(o=N({},o,Pb(a.children)))}),o}function Uf(n,o){var a=[];return p(n,function(l){l.hidden=o,a=a.concat(l),l.children&&(a=a.concat(Uf(l.children,l.collapsed||o)))}),a}function Rb(n,o){var a=[];return p(n,function(l){l.hidden=o[l.id],a=a.concat(l),l.children&&(a=a.concat(Rb(l.children,o)))}),a}function Xf(n){this._modeling=n}function Kf(n,o){return gi(n&&n.attachers,o)}function $b(n,o,a){if(n){var l=n.attachers;l||(n.attachers=l=[]),hi(l,o,a)}}function Pa(){}function Tn(n,o,a){this._eventBus=n,this._elementFactory=o,this._commandStack=a;var l=this;n.on("diagram.init",function(){l.registerHandlers(a)})}function Wr(n){this._elementRegistry=n}function Wc(n,o){p(o,function(a,l){n.set(l,a)})}Zf.prototype.preExecute=function(n){var o=this._modeling,a=n.groups,l=n.axis,d=n.dimension;function b(Oe,Pe){Oe.range.min=Math.min(Pe[l],Oe.range.min),Oe.range.max=Math.max(Pe[l]+Pe[d],Oe.range.max)}function A(Oe){return Oe[l]+Oe[d]/2}function E(Oe){return Oe.length-1}function $(Oe){return Oe.max-Oe.min}var W,z,te=a[0],le=E(a),he=a[le],me=0;p(a,function(Oe,Pe){var we,Ee,De;Oe.elements.length<2?Pe&&Pe!==a.length-1&&(b(Oe,Oe.elements[0]),me+=$(Oe.range)):(Ee=(we=T(Oe.elements,l))[0],Pe===le&&(Ee=we[E(we)]),De=A(Ee),Oe.range=null,p(we,function(Be){var rt,qe;(qe={y:0})[l]=De-A(rt=Be),qe[l]&&(qe[Z1[l]]=0,o.moveElements([rt],qe,rt.parent)),null!==Oe.range?b(Oe,Be):Oe.range={min:Be[l],max:Be[l]+Be[d]}}),Pe&&Pe!==a.length-1&&(me+=$(Oe.range)))}),z=Math.abs(he.range.min-te.range.max),(W=Math.round((z-me)/(a.length-1)))<a.length-1||p(a,function(Oe,Pe){var we,Ee={};Oe!==te&&Oe!==he&&(we=a[Pe-1],Oe.range.max=0,p(Oe.elements,function(De,Be){Ee[Z1[l]]=0,Ee[l]=we.range.max-De[l]+W,Oe.range.min!==De[l]&&(Ee[l]+=De[l]-Oe.range.min),Ee[l]&&o.moveElements([De],Ee,De.parent),Oe.range.max=Math.max(De[l]+De[d],Be?Oe.range.max:0)}))})},Zf.prototype.postExecute=function(n){},Pl.$inject=["layouter","canvas"],Pl.prototype.execute=function(n){var o=n.connection;return N(n,{oldWaypoints:o.waypoints}),o.waypoints=this._layouter.layoutConnection(o,n.hints),o},Pl.prototype.revert=function(n){var o=n.connection;return o.waypoints=n.oldWaypoints,o},Vf.prototype.execute=function(n){var o=n.connection,a=n.delta,l=n.newParent||o.parent,d=n.newParentIndex,b=o.parent;return n.oldParent=b,n.oldParentIndex=gi(b.children,o),hi(l.children,o,d),o.parent=l,p(o.waypoints,function(A){A.x+=a.x,A.y+=a.y,A.original&&(A.original.x+=a.x,A.original.y+=a.y)}),o},Vf.prototype.revert=function(n){var o=n.connection,l=n.oldParent,d=n.oldParentIndex,b=n.delta;return gi(o.parent.children,o),hi(l.children,o,d),o.parent=l,p(o.waypoints,function(A){A.x-=b.x,A.y-=b.y,A.original&&(A.original.x-=b.x,A.original.y-=b.y)}),o},Qf.prototype.add=function(n,o){return this.addAll([n],o)},Qf.prototype.addAll=function(n,o){return N(this,function(l,d,b){U(d)&&(d=!0),F(d)&&(b=d,d=!0);var A=qo((b=b||{}).allShapes),E=qo(b.allConnections),$=qo(b.enclosedElements),W=qo(b.enclosedConnections),z=qo(b.topLevel,d&&L(l,function(le){return le.id}));function te(le){z[le.source.id]&&z[le.target.id]&&(z[le.id]=[le]),A[le.source.id]&&A[le.target.id]&&(W[le.id]=$[le.id]=le),E[le.id]=le}return Mr(l,function(le){if($[le.id]=le,!le.waypoints)return A[le.id]=le,p(le.incoming,te),p(le.outgoing,te),le.children;W[le.id]=E[le.id]=le}),{allShapes:A,allConnections:E,topLevel:z,enclosedConnections:W,enclosedElements:$}}(n,!!o,this)),this},Mh.prototype.moveRecursive=function(n,o,a){return n?this.moveClosure(this.getClosure(n),o,a):[]},Mh.prototype.moveClosure=function(n,o,a,l,d){var b=this._modeling,A=n.allShapes,E=n.allConnections,$=n.enclosedConnections,W=n.topLevel,z=!1;d&&d.parent===a&&(z=!0),p(A,function(te){b.moveShape(te,o,W[te.id]&&!z&&a,{recurse:!1,layout:!1})}),p(E,function(te){var le=!!A[te.source.id],he=!!A[te.target.id];$[te.id]&&le&&he?b.moveConnection(te,o,W[te.id]&&!z&&a):b.layoutConnection(te,{connectionStart:le&&hg(te,te.source,o),connectionEnd:he&&Gs(te,te.target,o)})})},Mh.prototype.getClosure=function(n){return(new Qf).addAll(n,!0)},Hf.$inject=["modeling"],Hf.prototype.preExecute=function(n){n.closure=this._helper.getClosure(n.shapes)},Hf.prototype.postExecute=function(n){var o,a=n.hints;a&&a.primaryShape&&(a.oldParent=(o=a.primaryShape).parent),this._helper.moveClosure(n.closure,n.delta,n.newParent,n.newHost,o)},Fc.$inject=["modeling"],Fc.prototype.execute=function(n){var o=n.shape,a=n.delta,l=n.newParent||o.parent,d=n.newParentIndex,b=o.parent;return n.oldBounds=re(o,["x","y","width","height"]),n.oldParent=b,n.oldParentIndex=gi(b.children,o),hi(l.children,o,d),N(o,{parent:l,x:o.x+a.x,y:o.y+a.y}),o},Fc.prototype.postExecute=function(n){var o=n.shape,a=n.delta,l=n.hints,d=this._modeling;!1!==l.layout&&(p(o.incoming,function(b){d.layoutConnection(b,{connectionEnd:Gs(b,o,a)})}),p(o.outgoing,function(b){d.layoutConnection(b,{connectionStart:hg(b,o,a)})})),!1!==l.recurse&&this.moveChildren(n)},Fc.prototype.revert=function(n){var o=n.shape,a=n.oldParent,d=n.delta;return hi(a.children,o,n.oldParentIndex),N(o,{parent:a,x:o.x-d.x,y:o.y-d.y}),o},Fc.prototype.moveChildren=function(n){this._helper.moveRecursive(n.shape.children,n.delta,null)},Fc.prototype.getNewParent=function(n){return n.newParent||n.shape.parent},zf.$inject=["modeling"],zf.prototype.execute=function(n){var o=n.newSource,a=n.newTarget,l=n.connection,d=n.dockingOrPoints;if(!o&&!a)throw new Error("newSource or newTarget required");return H(d)&&(n.oldWaypoints=l.waypoints,l.waypoints=d),o&&(n.oldSource=l.source,l.source=o),a&&(n.oldTarget=l.target,l.target=a),l},zf.prototype.postExecute=function(n){var o=n.connection,a=n.newSource,l=n.newTarget,d=n.dockingOrPoints,b=n.hints||{},A={};b.connectionStart&&(A.connectionStart=b.connectionStart),b.connectionEnd&&(A.connectionEnd=b.connectionEnd),!1!==b.layoutConnection&&(!a||l&&"source"!==b.docking||(A.connectionStart=A.connectionStart||V1(H(d)?d[0]:d)),!l||a&&"target"!==b.docking||(A.connectionEnd=A.connectionEnd||V1(H(d)?d[d.length-1]:d)),b.newWaypoints&&(A.waypoints=b.newWaypoints),this._modeling.layoutConnection(o,A))},zf.prototype.revert=function(n){var o=n.oldSource,a=n.oldTarget,l=n.oldWaypoints,d=n.connection;return o&&(d.source=o),a&&(d.target=a),l&&(d.waypoints=l),d},Si.$inject=["modeling","rules"],Si.prototype.preExecute=function(n){var o,a=this,l=this._modeling,d=this._rules,b=n.oldShape,A=n.newData,E=n.hints||{};function $(me,Oe,Pe){return d.allowed("connection.reconnect",{connection:Pe,source:me,target:Oe})}var W,te={x:b.x,y:b.y,width:b.width,height:b.height};o=n.newShape=n.newShape||a.createShape(A,{x:A.x,y:A.y},b.parent,E),b.host&&l.updateAttachment(o,b.host),!1!==E.moveChildren&&(W=b.children.slice(),l.moveElements(W,{x:0,y:0},o,E));var le=b.incoming.slice(),he=b.outgoing.slice();p(le,function(me){$(me.source,o,me)&&a.reconnectEnd(me,o,Ih(me,o,te),E)}),p(he,function(me){$(o,me.target,me)&&a.reconnectStart(me,o,If(me,o,te),E)})},Si.prototype.postExecute=function(n){this._modeling.removeShape(n.oldShape)},Si.prototype.execute=function(n){},Si.prototype.revert=function(n){},Si.prototype.createShape=function(n,o,a,l){return this._modeling.createShape(n,o,a,l)},Si.prototype.reconnectStart=function(n,o,a,l){this._modeling.reconnectStart(n,o,a,l)},Si.prototype.reconnectEnd=function(n,o,a,l){this._modeling.reconnectEnd(n,o,a,l)},Ea.$inject=["modeling"],Ea.prototype.execute=function(n){var o=n.shape,a=n.newBounds,l=n.minBounds;if(void 0===a.x||void 0===a.y||void 0===a.width||void 0===a.height)throw new Error("newBounds must have {x, y, width, height} properties");if(l&&(a.width<l.width||a.height<l.height))throw new Error("width and height cannot be less than minimum height and width");if(!l&&a.width<10||a.height<10)throw new Error("width and height cannot be less than 10px");return n.oldBounds={width:o.width,height:o.height,x:o.x,y:o.y},N(o,{width:a.width,height:a.height,x:a.x,y:a.y}),o},Ea.prototype.postExecute=function(n){var o=this._modeling,a=n.shape,l=n.oldBounds;!1!==(n.hints||{}).layout&&(p(a.incoming,function(d){o.layoutConnection(d,{connectionEnd:Ih(d,a,l)})}),p(a.outgoing,function(d){o.layoutConnection(d,{connectionStart:If(d,a,l)})}))},Ea.prototype.revert=function(n){var o=n.shape,a=n.oldBounds;return N(o,{width:a.width,height:a.height,x:a.x,y:a.y}),o},ka.$inject=["modeling"],ka.prototype.preExecute=function(n){var E,$,W,o=n.delta,a=n.direction,l=n.movingShapes,d=n.resizingShapes,b=n.start,A={};this.moveShapes(l,o),p(d,function(E){var $;A[E.id]={x:($=E).x,y:$.y,height:$.height,width:$.width}}),this.resizeShapes(d,o,a),this.updateConnectionWaypoints((W=[],p((E=l).concat($=d),function(z){p(z.incoming.concat(z.outgoing),function(he){var me=he.source,Oe=he.target;(Ph(E,me)||Ph(E,Oe)||Ph($,me)||Ph($,Oe))&&(Ph(W,he)||W.push(he))})}),W),o,a,b,l,d,A)},ka.prototype.execute=function(){},ka.prototype.revert=function(){},ka.prototype.moveShapes=function(n,o){var a=this;p(n,function(l){a._modeling.moveShape(l,o,null,{autoResize:!1,layout:!1,recurse:!1})})},ka.prototype.resizeShapes=function(n,o,a){var l=this;p(n,function(d){var b=function(A,E,$){var W=A.x,z=A.y,te=A.width,le=A.height,he=$.x,me=$.y;switch(E){case"n":return{x:W,y:z+me,width:te,height:le-me};case"s":return{x:W,y:z,width:te,height:le+me};case"w":return{x:W+he,y:z,width:te-he,height:le};case"e":return{x:W,y:z,width:te+he,height:le};default:throw new Error("unknown direction: "+E)}}(d,a,o);l._modeling.resizeShape(d,b,null,{attachSupport:!1,autoResize:!1,layout:!1})})},ka.prototype.updateConnectionWaypoints=function(n,o,a,l,d,b,A){var E=this,$=d.concat(b);p(n,function(W){var z=W.source,te=W.target,le=O(W.waypoints,function(Pe){return(Pe=Tb(Pe)).original&&(Pe.original=Tb(Pe.original)),Pe}),he=Zg(a),me={};Ta($,z)&&Ta($,te)?(le=O(le,function(Oe){return io(Oe,l,a)&&(Oe[he]=Oe[he]+o[he]),Oe.original&&io(Oe.original,l,a)&&(Oe.original[he]=Oe.original[he]+o[he]),Oe}),E._modeling.updateWaypoints(W,le,{labelBehavior:!1})):(Ta($,z)||Ta($,te))&&(Ta(d,z)?me.connectionStart=hg(W,z,o):Ta(d,te)?me.connectionEnd=Gs(W,te,o):Ta(b,z)?me.connectionStart=If(W,z,A[z.id]):Ta(b,te)&&(me.connectionEnd=Ih(W,te,A[te.id])),E._modeling.layoutConnection(W,me))})},Nh.$inject=["modeling"],Nh.prototype.execute=function(n){var o=n.shape,a=o.children;n.oldChildrenVisibility=Pb(a),o.collapsed=!o.collapsed;var l=Uf(a,o.collapsed);return[o].concat(l)},Nh.prototype.revert=function(n){var o=n.shape,l=Rb(o.children,n.oldChildrenVisibility);return o.collapsed=!o.collapsed,[o].concat(l)},Xf.$inject=["modeling"],Xf.prototype.execute=function(n){var o=n.shape,a=n.newHost,l=o.host;return n.oldHost=l,n.attacherIdx=Kf(l,o),$b(a,o),o.host=a,o},Xf.prototype.revert=function(n){var o=n.shape,a=n.newHost,l=n.oldHost,d=n.attacherIdx;return o.host=l,Kf(a,o),$b(l,o,d),o},Pa.prototype.execute=function(n){var o=n.connection,a=n.newWaypoints;return n.oldWaypoints=o.waypoints,o.waypoints=a,o},Pa.prototype.revert=function(n){var o=n.connection;return o.waypoints=n.oldWaypoints,o},Tn.$inject=["eventBus","elementFactory","commandStack"],Tn.prototype.getHandlers=function(){return{"shape.append":jf,"shape.create":Sa,"shape.delete":Tl,"shape.move":Fc,"shape.resize":Ea,"shape.replace":Si,"shape.toggleCollapse":Nh,spaceTool:ka,"label.create":kl,"connection.create":Bc,"connection.delete":Dc,"connection.move":Vf,"connection.layout":Pl,"connection.updateWaypoints":Pa,"connection.reconnect":zf,"elements.create":Wg,"elements.move":Hf,"elements.delete":jg,"elements.distribute":Zf,"elements.align":Fg,"element.updateAttachment":Xf}},Tn.prototype.registerHandlers=function(n){p(this.getHandlers(),function(o,a){n.registerHandler(a,o)})},Tn.prototype.moveShape=function(n,o,a,l,d){"object"==typeof l&&(d=l,l=null),this._commandStack.execute("shape.move",{shape:n,delta:o,newParent:a,newParentIndex:l,hints:d||{}})},Tn.prototype.updateAttachment=function(n,o){this._commandStack.execute("element.updateAttachment",{shape:n,newHost:o})},Tn.prototype.moveElements=function(n,o,a,l){var d,b=(l=l||{}).attach,A=a;!0===b?(d=a,A=a.parent):!1===b&&(d=null),this._commandStack.execute("elements.move",{shapes:n,delta:o,newParent:A,newHost:d,hints:l})},Tn.prototype.moveConnection=function(n,o,a,l,d){"object"==typeof l&&(d=l,l=void 0),this._commandStack.execute("connection.move",{connection:n,delta:o,newParent:a,newParentIndex:l,hints:d||{}})},Tn.prototype.layoutConnection=function(n,o){this._commandStack.execute("connection.layout",{connection:n,hints:o||{}})},Tn.prototype.createConnection=function(n,o,a,l,d,b){"object"==typeof a&&(b=d,d=l,l=a,a=void 0);var A={source:n,target:o,parent:d,parentIndex:a,connection:l=this._create("connection",l),hints:b};return this._commandStack.execute("connection.create",A),A.connection},Tn.prototype.createShape=function(n,o,a,l,d){"number"!=typeof l&&(d=l,l=void 0);var b,A,E=(d=d||{}).attach;n=this._create("shape",n),E?(b=a.parent,A=a):b=a;var $={position:o,shape:n,parent:b,parentIndex:l,host:A,hints:d};return this._commandStack.execute("shape.create",$),$.shape},Tn.prototype.createElements=function(n,o,a,l,d){H(n)||(n=[n]),"number"!=typeof l&&(d=l,l=void 0);var b={position:o,elements:n,parent:a,parentIndex:l,hints:d=d||{}};return this._commandStack.execute("elements.create",b),b.elements},Tn.prototype.createLabel=function(n,o,a,l){a=this._create("label",a);var d={labelTarget:n,position:o,parent:l||n.parent,shape:a};return this._commandStack.execute("label.create",d),d.shape},Tn.prototype.appendShape=function(n,o,a,l,d){d=d||{};var b={source:n,position:a,target:l,shape:o=this._create("shape",o),connection:d.connection,connectionParent:d.connectionParent,hints:d};return this._commandStack.execute("shape.append",b),b.shape},Tn.prototype.removeElements=function(n){this._commandStack.execute("elements.delete",{elements:n})},Tn.prototype.distributeElements=function(n,o,a){this._commandStack.execute("elements.distribute",{groups:n,axis:o,dimension:a})},Tn.prototype.removeShape=function(n,o){this._commandStack.execute("shape.delete",{shape:n,hints:o||{}})},Tn.prototype.removeConnection=function(n,o){this._commandStack.execute("connection.delete",{connection:n,hints:o||{}})},Tn.prototype.replaceShape=function(n,o,a){var l={oldShape:n,newData:o,hints:a||{}};return this._commandStack.execute("shape.replace",l),l.newShape},Tn.prototype.alignElements=function(n,o){this._commandStack.execute("elements.align",{elements:n,alignment:o})},Tn.prototype.resizeShape=function(n,o,a,l){this._commandStack.execute("shape.resize",{shape:n,newBounds:o,minBounds:a,hints:l})},Tn.prototype.createSpace=function(n,o,a,l,d){this._commandStack.execute("spaceTool",{delta:a,direction:l,movingShapes:n,resizingShapes:o,start:d})},Tn.prototype.updateWaypoints=function(n,o,a){this._commandStack.execute("connection.updateWaypoints",{connection:n,newWaypoints:o,hints:a||{}})},Tn.prototype.reconnect=function(n,o,a,l,d){this._commandStack.execute("connection.reconnect",{connection:n,newSource:o,newTarget:a,dockingOrPoints:l,hints:d||{}})},Tn.prototype.reconnectStart=function(n,o,a,l){l||(l={}),this.reconnect(n,o,n.target,a,N(l,{docking:"source"}))},Tn.prototype.reconnectEnd=function(n,o,a,l){l||(l={}),this.reconnect(n,n.source,o,a,N(l,{docking:"target"}))},Tn.prototype.connect=function(n,o,a,l){return this.createConnection(n,o,a||{},n.parent,l)},Tn.prototype._create=function(n,o){return o instanceof Ul?o:this._elementFactory.create(n,o)},Tn.prototype.toggleCollapse=function(n,o){this._commandStack.execute("shape.toggleCollapse",{shape:n,hints:o||{}})},Wr.$inject=["elementRegistry"],Wr.prototype.execute=function(n){var o=n.element,a=n.moddleElement,l=n.properties;if(!a)throw new Error("<moddleElement> required");var A,d=n.changed||this.getVisualReferences(a).concat(o),b=n.oldProperties||(A=a,m(C(l),function($,W){return $[W]=A.get(W),$},{}));return Wc(a,l),n.oldProperties=b,n.changed=d,d},Wr.prototype.revert=function(n){var l=n.changed;return Wc(n.moddleElement,n.oldProperties),l},Wr.prototype.getVisualReferences=function(n){var a,o=this._elementRegistry;return Le(n,"bpmn:DataObject")?(a=n,o.filter(function(d){return Le(d,"bpmn:DataObjectReference")&&Dt(d).dataObjectRef===a})):[]};var Mb={width:0,height:0};function qf(n,o,a,l,d){this._elementRegistry=n,this._moddle=o,this._translate=a,this._modeling=l,this._textRenderer=d}function Q1(n,o){return"id"in n&&n.id!==o.id}function Lh(n,o){var a=n.businessObject,l=Rn(n);p(o,function(d,b){var A;"di"!==b?a.set(b,d):l&&(A=l,p(d,function($,W){A.set(W,$)}))})}qf.$inject=["elementRegistry","moddle","translate","modeling","textRenderer"],qf.prototype.execute=function(n){var o=n.element,a=[o];if(!o)throw new Error((0,this._translate)("element required"));var W,z,d=this._elementRegistry,b=this._moddle.ids,A=o.businessObject,E=(z=N({},W=n.properties),H1.forEach(function(te){te in W&&(z[te]=Dt(z[te]))}),z),$=n.oldProperties||function(W,z){var te=C(z),le=W.businessObject,he=Rn(W);return m(te,function(me,Oe){return me[Oe]="di"!==Oe?le.get(Oe):(Pe=he,m(C(z.di),function(Ee,De){return Ee[De]=Pe&&Pe.get(De),Ee},{})),me;var Pe},{})}(o,E);return Q1(E,A)&&(b.unclaim(A.id),d.updateId(o,E.id),b.claim(E.id,A)),"default"in E&&(E.default&&a.push(d.get(E.default.id)),A.default&&a.push(d.get(A.default.id))),Lh(o,E),n.oldProperties=$,n.changed=a,a},qf.prototype.postExecute=function(n){var o=n.element.label,a=o&&Dt(o).name;if(a){var l=this._textRenderer.getExternalLabelBounds(o,a);this._modeling.resizeShape(o,l,Mb)}},qf.prototype.revert=function(n){var o=n.element,a=n.properties,l=n.oldProperties,d=o.businessObject,b=this._elementRegistry,A=this._moddle.ids;return Lh(o,l),Q1(a,d)&&(A.unclaim(a.id),b.updateId(o,l.id),A.claim(l.id,d)),n.changed};var H1=["default"];function Jf(n,o){this._canvas=n,this._modeling=o}function Nb(n,o){this._modeling=n,this._spaceTool=o}function Lb(n,o){this._modeling=n,this._translate=o}function Gc(n,o){this._modeling=n,this._spaceTool=o}Jf.$inject=["canvas","modeling"],Jf.prototype.execute=function(n){var o=this._canvas,a=n.newRoot,l=a.businessObject,d=o.getRootElement(),b=d.businessObject,A=b.$parent,E=Rn(d);o.setRootElement(a),o.removeRootElement(d),hi(A.rootElements,l),l.$parent=A,gi(A.rootElements,b),b.$parent=null,d.di=null,E.bpmnElement=l,a.di=E,n.oldRoot=d},Jf.prototype.revert=function(n){var o=this._canvas,a=n.newRoot,l=a.businessObject,d=n.oldRoot,b=d.businessObject,A=l.$parent,E=Rn(a);o.setRootElement(d),o.removeRootElement(a),gi(A.rootElements,l),l.$parent=null,hi(A.rootElements,b),b.$parent=A,a.di=null,E.bpmnElement=b,d.di=E},Nb.$inject=["modeling","spaceTool"],Nb.prototype.preExecute=function(n){var o=this._spaceTool,a=this._modeling,l=n.shape,d=n.location,b=eo(l),A=b===l,E=A?l:l.parent;fl(E).length||a.createShape({type:"bpmn:Lane"},{x:l.x+30,y:l.y,width:l.width-30,height:l.height},E);var $=[];Mr(b,function(me){return $.push(me),me.label&&$.push(me.label),me===l?[]:w(me.children,function(Oe){return Oe!==l})});var W="top"===d?-120:120,z="top"===d?l.y:l.y+l.height,te=z+("top"===d?10:-10),le="top"===d?"n":"s",he=o.calculateAdjustments($,"y",W,te);o.makeSpace(he.movingShapes,he.resizingShapes,{x:0,y:W},le,te),n.newLane=a.createShape({type:"bpmn:Lane"},{x:l.x+(A?30:0),y:z-("top"===d?120:0),width:l.width-(A?30:0),height:120},E)},Lb.$inject=["modeling","translate"],Lb.prototype.preExecute=function(n){var o=this._modeling,a=this._translate,l=n.shape,d=n.count,b=fl(l),A=b.length;if(A>d)throw new Error(a("more than {count} child lanes",{count:d}));var W,te,le=Math.round(l.height/d);for(te=0;te<d;te++)W={x:l.x+30,y:l.y+te*le,width:l.width-30,height:te===d-1?l.height-le*te:le},te<A?o.resizeShape(b[te],W):o.createShape({type:"bpmn:Lane"},W,l)},Gc.$inject=["modeling","spaceTool"],Gc.prototype.preExecute=function(n){var o=n.shape,a=n.newBounds;!1!==n.balanced?this.resizeBalanced(o,a):this.resizeSpace(o,a)},Gc.prototype.resizeBalanced=function(n,o){var a=this._modeling,l=function o1(n,o){var $,a=eo(n),l=uh(a,Le(a,"bpmn:Process")?[]:[a]),d=Yt(n),b=Yt(o),A=($=n,ba(Yt(o),Yt($))),E=[];return l.forEach(function($){if($!==n){var W,z,te=0,le=A.right,he=0,me=A.left,Oe=Yt($);A.top&&(of(Oe.bottom-d.top)<10&&(he=b.top-Oe.bottom),of(Oe.top-d.top)<5&&(te=b.top-Oe.top)),A.bottom&&(of(Oe.top-d.bottom)<10&&(te=b.bottom-Oe.top),of(Oe.bottom-d.bottom)<5&&(he=b.bottom-Oe.bottom)),(te||le||he||me)&&E.push({shape:$,newBounds:(W=$,z={top:te,right:le,bottom:he,left:me},{x:W.x+(z.left||0),y:W.y+(z.top||0),width:W.width-(z.left||0)+(z.right||0),height:W.height-(z.top||0)+(z.bottom||0)})})}}),E}(n,o);a.resizeShape(n,o),l.forEach(function(d){a.resizeShape(d.shape,d.newBounds)})},Gc.prototype.resizeSpace=function(n,o){var a,d,A,E=this._spaceTool,$=Yt(n),W=ba(Yt(o),$),z=eo(n),te=[],le=[];Mr(z,function(he){return te.push(he),(Le(he,"bpmn:Lane")||Le(he,"bpmn:Participant"))&&le.push(he),he.children}),(W.bottom||W.top)&&(a=W.bottom||W.top,d=W.bottom?"s":"n",A=E.calculateAdjustments(te,"y",W.top>0||W.bottom<0?-a:a,n.y+(W.bottom?n.height:0)+(W.bottom?-10:10)),E.makeSpace(A.movingShapes,A.resizingShapes,{x:0,y:a},d)),(W.left||W.right)&&(a=W.right||W.left,d=W.right?"e":"w",A=E.calculateAdjustments(le,"x",W.left>0||W.right<0?-a:a,n.x+(W.right?n.width:0)+(W.right?-10:100)),E.makeSpace(A.movingShapes,A.resizingShapes,{x:a,y:0},d))};var jc="flowNodeRef",Bb="lanes";function ep(n){this._elementRegistry=n}function tp(n){this._moddle=n}ep.$inject=["elementRegistry"],ep.prototype.computeUpdates=function(n,o){var a=[],l=[],d={},b=[];function A($){-1===a.indexOf($)&&(b.push($),a.push($))}return o.forEach(function($){var W=eo($);W&&-1===a.indexOf(W)&&(W.children.filter(function(te){return Le(te,"bpmn:FlowNode")}).forEach(A),a.push(W))}),n.forEach(A),b.forEach(function($){var W=$.businessObject,z=W.get(Bb).slice(),te=function E($){return $.parent?(te=eo($),d[te.id]||(d[te.id]=uh(te)),d[te.id]).filter(function(z){return te=$,le=Yt(z),me=te.y+te.height/2,(he=te.x+te.width/2)>le.left&&he<le.right&&me>le.top&&me<le.bottom;var te,le,he,me}).map(function(z){return z.businessObject}):[];var te}($);l.push({flowNode:W,remove:z,add:te})}),o.forEach(function($){var W=$.businessObject;$.parent||W.get(jc).forEach(function(z){l.push({flowNode:z,remove:[W],add:[]})})}),l},ep.prototype.execute=function(n){var o=n.updates;o||(o=n.updates=this.computeUpdates(n.flowNodeShapes,n.laneShapes)),o.forEach(function(a){var l=a.flowNode,d=l.get(Bb);a.remove.forEach(function(b){gi(d,b),gi(b.get(jc),l)}),a.add.forEach(function(b){hi(d,b),hi(b.get(jc),l)})})},ep.prototype.revert=function(n){n.updates.forEach(function(o){var a=o.flowNode,l=a.get(Bb);o.add.forEach(function(d){gi(l,d),gi(d.get(jc),a)}),o.remove.forEach(function(d){hi(l,d),hi(d.get(jc),a)})})},tp.$inject=["moddle"],tp.prototype.execute=function(n){var o=this._moddle.ids,a=n.id;n.claiming?o.claim(a,n.element):o.unclaim(a)},tp.prototype.revert=function(n){var o=this._moddle.ids,a=n.id,l=n.element;n.claiming?o.unclaim(a):o.claim(a,l)};var np={fill:void 0,stroke:void 0};function Qg(n){this._commandStack=n,this._normalizeColor=function(o){if(o){if(M(o)){var a=(l=o,(d=document.createElement("canvas").getContext("2d")).fillStyle="transparent",d.fillStyle=l,/^#[0-9a-fA-F]{6}$/.test(d.fillStyle)?d.fillStyle:null);if(a)return a}throw new Error("invalid color value: "+o)}var l,d}}Qg.$inject=["commandStack"],Qg.prototype.postExecute=function(n){var o=n.elements,a=n.colors||np,l=this,d={};"fill"in a&&N(d,{"background-color":this._normalizeColor(a.fill)}),"stroke"in a&&N(d,{"border-color":this._normalizeColor(a.stroke)}),p(o,function(b){var $,A=b.waypoints?re(d,["border-color"]):d,E=Rn(b);if("border-color"in($=A)&&($.stroke=$["border-color"]),"background-color"in $&&($.fill=$["background-color"]),Vi(b))l._commandStack.execute("element.updateModdleProperties",{element:b,moddleElement:E.label,properties:{color:d["border-color"]}});else{if(!wn(E,["bpmndi:BPMNEdge","bpmndi:BPMNShape"]))return;l._commandStack.execute("element.updateProperties",{element:b,properties:{di:A}})}})};var z1={width:0,height:0};function Hg(n,o,a){function l(d,b){var W,te,le,A=d.label||d,E=d.labelTarget||d;return W=b,(le=ad(te=A.businessObject))&&("categoryValueRef"===le?te.categoryValueRef.value=W:te[le]=W),function($,W){if(!la($)){var z=Rn($);W&&!z.label&&(z.label=a.create("bpmndi:BPMNLabel")),!W&&z.label&&delete z.label}}(d,b),[A,E]}this.preExecute=function(d){var b=d.element,A=b.businessObject,E=d.newLabel;if(!Vi(b)&&la(b)&&!bu(b)&&!zg(E)){var $=ca(b);n.createLabel(b,$={x:$.x,y:$.y+7},{id:A.id+"_label",businessObject:A,di:b.di})}},this.execute=function(d){return d.oldLabel=Dr(d.element),l(d.element,d.newLabel)},this.revert=function(d){return l(d.element,d.oldLabel)},this.postExecute=function(d){var b=d.element,A=b.label||b,E=d.newLabel,$=d.newBounds,W=d.hints||{};if(Vi(A)||Le(A,"bpmn:TextAnnotation"))if(Vi(A)&&zg(E))!1!==W.removeShape&&n.removeShape(A,{unsetLabel:!1});else{var z=Dr(A);void 0===$&&($=o.getExternalLabelBounds(A,z)),$&&n.resizeShape(A,$,z1)}}}function zg(n){return!n||!n.trim()}function tr(n,o,a,l){Tn.call(this,n,o,a),this._bpmnRules=l}function Ug(){}Hg.$inject=["modeling","textRenderer","bpmnFactory"],Ce(tr,Tn),tr.$inject=["eventBus","elementFactory","commandStack","bpmnRules"],tr.prototype.getHandlers=function(){var n=Tn.prototype.getHandlers.call(this);return n["element.updateModdleProperties"]=Wr,n["element.updateProperties"]=qf,n["canvas.updateRoot"]=Jf,n["lane.add"]=Nb,n["lane.resize"]=Gc,n["lane.split"]=Lb,n["lane.updateRefs"]=ep,n["id.updateClaim"]=tp,n["element.setColor"]=Qg,n["element.updateLabel"]=Hg,n},tr.prototype.updateLabel=function(n,o,a,l){this._commandStack.execute("element.updateLabel",{element:n,newLabel:o,newBounds:a,hints:l||{}})},tr.prototype.connect=function(n,o,a,l){if(a||(a=this._bpmnRules.canConnect(n,o)),a)return this.createConnection(n,o,a,n.parent,l)},tr.prototype.updateModdleProperties=function(n,o,a){this._commandStack.execute("element.updateModdleProperties",{element:n,moddleElement:o,properties:a})},tr.prototype.updateProperties=function(n,o){this._commandStack.execute("element.updateProperties",{element:n,properties:o})},tr.prototype.resizeLane=function(n,o,a){this._commandStack.execute("lane.resize",{shape:n,newBounds:o,balanced:a})},tr.prototype.addLane=function(n,o){var a={shape:n,location:o};return this._commandStack.execute("lane.add",a),a.newLane},tr.prototype.splitLane=function(n,o){this._commandStack.execute("lane.split",{shape:n,count:o})},tr.prototype.makeCollaboration=function(){var n=this._create("root",{type:"bpmn:Collaboration"});return this._commandStack.execute("canvas.updateRoot",{newRoot:n}),n},tr.prototype.updateLaneRefs=function(n,o){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:n,laneShapes:o})},tr.prototype.makeProcess=function(){var n={newRoot:this._create("root",{type:"bpmn:Process"})};this._commandStack.execute("canvas.updateRoot",n)},tr.prototype.claimId=function(n,o){this._commandStack.execute("id.updateClaim",{id:n,element:o,claiming:!0})},tr.prototype.unclaimId=function(n,o){this._commandStack.execute("id.updateClaim",{id:n,element:o})},tr.prototype.setColor=function(n,o){n.length||(n=[n]),this._commandStack.execute("element.setColor",{elements:n,colors:o})},Ug.prototype.layoutConnection=function(n,o){return[(o=o||{}).connectionStart||on(o.source||n.source),o.connectionEnd||on(o.target||n.target)]};var Bh=Math.round,Xg={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function Dh(n,o,a){var l,d,A=bi(o,n,5),E=a.split(":")[0],$=Bh((o.x-n.x)/2+n.x),W=Bh((o.y-n.y)/2+n.y),z={t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[E].test(A),te=/h|r|l/.test(E),he=!1;return z?(l=te?{x:$,y:n.y}:{x:n.x,y:W},d=te?"h:h":"v:v"):(d=te?"h:v":"v:h",{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[E].test(A)?l={x:$,y:W}:te?(he=W===n.y,l={x:n.x+20*(/l/.test(E)?-1:1),y:he?W+20:W}):l={x:(he=$===n.x)?$+20:$,y:n.y+20*(/t/.test(E)?-1:1)}),{waypoints:ip(n,l,d).concat(l),directions:d,turnNextDirections:he}}function Kg(n){return n.split(":").reverse().join(":")}function ip(n,o,a){if(!(A=a=a||"h:h")||!/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(A))throw new Error("unknown directions: <"+a+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");var A;if(K1(a)){var l=function(A,E,$){return Dh(A,E,$)}(n,o,a),d=function(A,E,$){var W=Dh(E,A,Kg($));return{waypoints:W.waypoints.slice().reverse(),directions:Kg(W.directions),turnNextDirections:W.turnNextDirections}}(n,o,a),b=function(A,E){var $=A.directions.split(":")[1],W=E.directions.split(":")[0];A.turnNextDirections&&($="h"==$?"v":"h"),E.turnNextDirections&&(W="h"==W?"v":"h");var z=$+":"+W;return{waypoints:ip(A.waypoints[A.waypoints.length-1],E.waypoints[0],z),directions:z}}(l,d);return[].concat(l.waypoints,b.waypoints,d.waypoints)}return function(A,E,$){var W=Bh((E.x-A.x)/2+A.x),z=Bh((E.y-A.y)/2+A.y);if("h:v"===$)return[{x:E.x,y:A.y}];if("v:h"===$)return[{x:A.x,y:E.y}];if("h:h"===$)return[{x:W,y:A.y},{x:W,y:E.y}];if("v:v"===$)return[{x:A.x,y:z},{x:E.x,y:z}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}(n,o,a)}function U1(n,o,a,l,d){var b=function f(n,o){return U(n)?[]:(function(a){if(!H(a))throw new Error("must supply array")}(n),o=X(o),n.filter(function(a,l){return!o(a,l)}))}(d&&d.preferredLayouts||[],"straight")[0]||"h:h",A=bi(n,o,Xg[b]||0),E=function(z,te){if(K1(te))return te;switch(z){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return te}}(A,b);a=a||on(n),l=l||on(o);var z,te,he,$=E.split(":");return z=_o(a,n,$[0],{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[A]),te=_o(l,o,$[1],A),(he=ip(z,te,E)).unshift(z),he.push(te),Fh(he)}function Yg(n,o,a){return(l=o[n])>=a[n]&&l<=a[n]+a[{x:"width",y:"height"}[n]];var l}function qg(n,o,a,l){if((E=l).length<3||!(E.length>4)&&S(E,function($,W){var z=E[W-1];return z&&ho($,z)<3}))return null;var E,d,b=l[0],A=l.slice();return A[0]=a,A[1]=function(E,$,W){switch(Ar($,E)){case"v":return{x:W.x,y:E.y};case"h":return{x:E.x,y:W.y}}return{x:E.x,y:E.y}}(A[1],b,a),d=function(E,$,W){var z;for(z=E.length-2;0!==z;z--)if(Ks(E[z],$,20)||Ks(E[z],W,20))return E.slice(z);return E}(A,n,o),d!==A&&(A=qg(n,o,a,d)),A&&Ar(A)?null:A}function K1(n){return n&&/t|r|b|l/.test(n)}function _o(n,o,a,l){if("h"===a&&(a=/left/.test(l)?"l":"r"),"v"===a&&(a=/top/.test(l)?"t":"b"),"t"===a)return{original:n,x:n.x,y:o.y};if("r"===a)return{original:n,x:o.x+o.width,y:n.y};if("b"===a)return{original:n,x:n.x,y:o.y+o.height};if("l"===a)return{original:n,x:o.x,y:n.y};throw new Error("unexpected dockingDirection: <"+a+">")}function Fh(n){return n.reduce(function(o,a,l){return tu(o[o.length-1],n[l+1],a,0)||o.push(a),o},[])}var rp={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},Wh={top:"t",right:"r",bottom:"b",left:"l"};function Db(){}function Fw(n,o){return Le(o,"bpmn:Participant")?"source":Le(n,"bpmn:Participant")?"target":sp(o)?"source":sp(n)||Le(o,"bpmn:Event")?"target":Le(n,"bpmn:Event")?"source":null}function op(n){return sp(n)?"target":"source"}function Fb(n,o){return n?n.original||n:on(o)}function Wb(n,o){return Le(o,"bpmn:Activity")&&Le(n,"bpmn:BoundaryEvent")&&o.businessObject.isForCompensation}function sp(n){return Le(n,"bpmn:SubProcess")&&kn(n)}function ap(n,o){return n===o}function Zc(n){var o=/right|left/.exec(n);return o&&o[0]}function Vc(n){var o=/top|bottom/.exec(n);return o&&o[0]}function Gb(n){return"right"===n||"left"===n}function Y1(n,o){var a=o.waypoints,l=a&&a.length&&bi(a[0],n);return"top"===l?["t:r"]:"right"===l?["r:b"]:"left"===l?["l:t"]:["b:l"]}function q1(n,o,a){var l,d,b,A,he,me,Oe,Pe,we,De,E=on(n),$=on(o),W=(A=(b=n).host,bi(on(b),A,-10)),z=ap(n.host,o),te=-1!==["top","right","bottom","left"].indexOf(W),le=bi($,E,{x:n.width/2+o.width/2,y:n.height/2+o.height/2});return z?(he=W,Oe=n,Pe=o,we=a,De=(me=te)?he:Vc(he),[Wh[De]+":"+(me?Gb(he)?Jg("y",Oe,Pe,we)?"h":"b":Jg("x",Oe,Pe,we)?"v":"l":"v")]):(l=function(he,me,Oe){return Oe?Wh[he]:ap(Vc(he),Vc(me))||function(Pe,we){return rp[Pe]===we}(Zc(he),Zc(me))?Wh[Vc(he)]:Wh[Zc(he)]}(W,le,te),d=function(he,me,Oe){return Oe?Gb(he)?function(Pe,we){var Ee=Zc(Pe);return-1!==we.indexOf(rp[Ee])}(he,me)||ap(he,me)?"h":"v":function(Pe,we){var Ee=Vc(Pe);return-1!==we.indexOf(rp[Ee])}(he,me)||ap(he,me)?"v":"h":Gb(me)||ap(Vc(he),Vc(me))&&Zc(me)?"h":"v"}(W,le,te),[l+":"+d])}function Jg(n,o,a,l){return!(lp(n,l,a,40)||lp(n,l,{x:a.x+a.width,y:a.y+a.height},40)||lp(n,l,on(o),40))}function lp(n,o,a,l){return Math.abs(o[n]-a[n])<l}function ev(n){return N({original:n.point.original||n.point},n.actual)}function Vs(n,o){this._elementRegistry=n,this._graphicsFactory=o}Ce(Db,Ug),Db.prototype.layoutConnection=function(n,o){o||(o={});var a,l,d=o.source||n.source,b=o.target||n.target,A=o.waypoints||n.waypoints,E=o.connectionStart,$=o.connectionEnd;return E||(E=Fb(A&&A[0],d)),$||($=Fb(A&&A[A.length-1],b)),(Le(n,"bpmn:Association")||Le(n,"bpmn:DataAssociation"))&&A&&!Wb(d,b)?[].concat([E],A.slice(1,-1),[$]):(Le(n,"bpmn:MessageFlow")?a={preferredLayouts:["straight","v:v"],preserveDocking:Fw(d,b)}:(Le(n,"bpmn:SequenceFlow")||Wb(d,b))&&(a=d===b?{preferredLayouts:Y1(d,n)}:Le(d,"bpmn:BoundaryEvent")?{preferredLayouts:q1(d,b,$)}:sp(d)||sp(b)?{preferredLayouts:["straight","h:h"],preserveDocking:op(d)}:Le(d,"bpmn:Gateway")?{preferredLayouts:["v:h"]}:Le(b,"bpmn:Gateway")?{preferredLayouts:["h:v"]}:{preferredLayouts:["h:h"]}),a&&(l=Fh(function X1(n,o,a,l,d,b){var A,E,$,W,z,te,le,he,me;return H(a)&&(d=a,b=l,a=on(n),l=on(o)),d=d||[],(A=-1!==(b=N({preferredLayouts:[]},b)).preferredLayouts.indexOf("straight")&&(W=a,z=l,te=b,me={},he=bi(E=n,$=o),/^(top|bottom|left|right)$/.test(he)?(/top|bottom/.test(he)&&(le="x"),/left|right/.test(he)&&(le="y"),"target"===te.preserveDocking?Yg(le,z,E)?(me[le]=z[le],[{x:void 0!==me.x?me.x:W.x,y:void 0!==me.y?me.y:W.y,original:{x:void 0!==me.x?me.x:W.x,y:void 0!==me.y?me.y:W.y}},{x:z.x,y:z.y}]):null:Yg(le,W,$)?(me[le]=W[le],[{x:W.x,y:W.y},{x:void 0!==me.x?me.x:z.x,y:void 0!==me.y?me.y:z.y,original:{x:void 0!==me.x?me.x:z.x,y:void 0!==me.y?me.y:z.y}}]):null):null))||(A=b.connectionEnd&&function(E,$,W,z){var te=z.slice().reverse();return(te=qg(E,$,W,te))?te.reverse():null}(o,n,l,d),A||(A=b.connectionStart&&qg(n,o,a,d))||(!b.connectionStart&&!b.connectionEnd&&d&&d.length?d:U1(n,o,a,l,b)))}(d,b,E,$,A,a=N(a,o)))),l||[E,$])},Vs.$inject=["elementRegistry","graphicsFactory"],Vs.prototype.getCroppedWaypoints=function(n,o,a){a=a||n.target;var l=this.getDockingPoint(n,o=o||n.source,!0),d=this.getDockingPoint(n,a),b=n.waypoints.slice(l.idx+1,d.idx);return b.unshift(ev(l)),b.push(ev(d)),b},Vs.prototype.getDockingPoint=function(n,o,a){var l,d,b=n.waypoints;return{point:d=b[l=a?0:b.length-1],actual:this._getIntersection(o,n,a)||d,idx:l}},Vs.prototype._getIntersection=function(n,o,a){return fo(this._getShapePath(n),this._getConnectionPath(o),a)},Vs.prototype._getConnectionPath=function(n){return this._graphicsFactory.getConnectionPath(n)},Vs.prototype._getShapePath=function(n){return this._graphicsFactory.getShapePath(n)},Vs.prototype._getGfx=function(n){return this._elementRegistry.getGraphics(n)};var jb={__init__:["modeling","bpmnUpdater"],__depends__:[xb,R1,$1,M1,Jr,L1,D1,F1,Dg,Do,Su,Mg],bpmnFactory:["type",Oo],bpmnUpdater:["type",no],elementFactory:["type",Ia],modeling:["type",tr],layouter:["type",Db],connectionDocking:["type",Vs]},Gh=Math.round;function tv(n,o,a,l,d){function b(E,$,W,z){return d.allowed("elements.move",{shapes:E,delta:$,position:W,target:z})}function A(E,$,W,z){if(F(W)&&(z=W,W=!1),!$.waypoints&&$.parent&&!Fe(E.target).has("djs-hit-no-move")){var te={x:(le=$).x+Gh(le.width/2),y:le.y+Gh(le.height/2)};return o.init(E,te,"shape.move",{cursor:"grabbing",autoActivate:W,data:{shape:$,context:z||{}}}),!0}var le}n.on("shape.move.start",1500,function(E){var te,le,$=E.context,W=E.shape,z=l.get().slice();-1===z.indexOf(W)&&(z=[W]),le=L(te=z,"id"),N($,{shapes:z=w(te,function(he){for(;he=he.parent;)if(le[he.id])return!1;return!0}),validatedShapes:z,shape:W})}),n.on("shape.move.start",1250,function(E){var $=E.context;if(!($.canExecute=b($.validatedShapes)))return!1}),n.on("shape.move.move",500,function(E){var $,W=E.context,te=E.hover,le={x:E.dx,y:E.dy};$=b(W.validatedShapes,le,{x:E.x,y:E.y},te),W.delta=le,W.canExecute=$,W.target=null!==$?te:null}),n.on("shape.move.end",function(E){var $=E.context,W=$.delta,z=$.canExecute,te="attach"===z,le=$.shapes;if(!1===z)return!1;W.x=Gh(W.x),W.y=Gh(W.y),0===W.x&&0===W.y||a.moveElements(le,W,$.target,{primaryShape:$.shape,attach:te})}),n.on("element.mousedown",function(E){if(is(E)){var $=qa(E);if(!$)throw new Error("must supply DOM mousedown event");return A($,E.element)}}),this.start=A}tv.$inject=["eventBus","dragging","modeling","selection","rules"];var cp="djs-dragging",Zb="drop-ok",Vb="drop-not-ok",nv="new-parent",iv="attach-ok";function rv(n,o,a,l){function b(E){var $=co(E,!0),W=O($,function(z){return(z.incoming||[]).concat(z.outgoing||[])});return ce($.concat(W))}function A(E,$){[iv,Zb,Vb,nv].forEach(function(W){W===$?o.addMarker(E,W):o.removeMarker(E,W)})}n.on("shape.move.start",499,function(E){var $=E.context,W=$.shapes,z=$.allDraggedElements,te=function d(E){var W;return w(W=b(E),function(z){return!z.waypoints||S(W,V({id:z.source.id}))&&S(W,V({id:z.target.id}))})}(W);if(!$.dragGroup){var le=jt("g");yt(le,a.cls("djs-drag-group",["no-events"])),Ze(o.getActiveLayer(),le),$.dragGroup=le}te.forEach(function(he){l.addDragger(he,$.dragGroup)}),p(z=z?ce([z,b(W)]):b(W),function(he){o.addMarker(he,cp)}),$.allDraggedElements=z,$.differentParents=1!==C(L(W,function(he){return he.parent&&he.parent.id})).length}),n.on("shape.move.move",499,function(E){var $=E.context,W=$.dragGroup,z=$.target;z&&A(z,"attach"===$.canExecute?iv:$.canExecute&&z&&z.id!==$.shape.parent.id?nv:$.canExecute?Zb:Vb),Br(W,E.dx,E.dy)}),n.on(["shape.move.out","shape.move.cleanup"],function(E){var $=E.context.target;$&&A($,null)}),n.on("shape.move.cleanup",function(E){var $=E.context,z=$.dragGroup;p($.allDraggedElements,function(te){o.removeMarker(te,cp)}),z&&ot(z)}),this.makeDraggable=function(E,$,W){l.addDragger($,E.dragGroup),W&&o.addMarker($,cp),E.allDraggedElements?E.allDraggedElements.push($):E.allDraggedElements=[$]}}rv.$inject=["eventBus","canvas","styles","previewSupport"];var Qb={__depends__:[rc,Do,jp,Zo,Ns,Yd],__init__:["move","movePreview"],move:["type",tv],movePreview:["type",rv]},Hb="crosshair";function Rl(n,o,a,l,d,b,A){this._selection=d,this._dragging=a,this._mouse=A;var E=this;b.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),n.on("lasso.selection.end",function(te){(te.hover||te.originalEvent.target instanceof SVGElement)&&n.once("lasso.selection.ended",function(){E.activateLasso(te.originalEvent,!0)})}),n.on("lasso.end",function(te){var le=ov(te),he=l.filter(function(me){return me});E.select(he,le)}),n.on("lasso.start",function(te){var le=te.context;le.bbox=ov(te),function(te){var le,he=o.getActiveLayer();yt(le=te.frame=jt("rect"),{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),Ze(he,le)}(le)}),n.on("lasso.move",function(te){var le=te.context;le.bbox=ov(te),function(te){var he=te.bbox;yt(te.frame,{x:he.x,y:he.y,width:he.width,height:he.height})}(le)}),n.on("lasso.cleanup",function(te){!function(te){te.frame&&ot(te.frame)}(te.context)}),n.on("element.mousedown",1500,function(te){if(md(te))return E.activateLasso(te.originalEvent),!0})}function ov(n){var o={x:n.x-n.dx,y:n.y-n.dy},a={x:n.x,y:n.y};return o.x<=a.x&&o.y<a.y||o.x<a.x&&o.y<=a.y?{x:o.x,y:o.y,width:a.x-o.x,height:a.y-o.y}:o.x>=a.x&&o.y<a.y||o.x>a.x&&o.y<=a.y?{x:a.x,y:o.y,width:o.x-a.x,height:a.y-o.y}:o.x<=a.x&&o.y>a.y||o.x<a.x&&o.y>=a.y?{x:o.x,y:a.y,width:a.x-o.x,height:o.y-a.y}:o.x>=a.x&&o.y>a.y||o.x>a.x&&o.y>=a.y?{x:a.x,y:a.y,width:o.x-a.x,height:o.y-a.y}:{x:a.x,y:a.y,width:0,height:0}}Rl.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"],Rl.prototype.activateLasso=function(n,o){this._dragging.init(n,"lasso",{autoActivate:o,cursor:Hb,data:{context:{}}})},Rl.prototype.activateSelection=function(n,o){this._dragging.init(n,"lasso.selection",{trapClick:!1,autoActivate:o,cursor:Hb,data:{context:{}}})},Rl.prototype.select=function(n,o){var d,b,a=(d=o,b={},p(n,function(A){var E=A;E.waypoints&&(E=qn(E)),!k(d.y)&&E.x>d.x&&(b[A.id]=A),!k(d.x)&&E.y>d.y&&(b[A.id]=A),E.x>d.x&&E.y>d.y&&(k(d.width)&&k(d.height)&&E.width+E.x<d.width+d.x&&E.height+E.y<d.height+d.y?b[A.id]=A:k(d.width)&&k(d.height)||(b[A.id]=A))}),b);this._selection.select(x(a))},Rl.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var n=this._mouse.getLastMoveEvent();this.activateSelection(n,!!n)},Rl.prototype.isActive=function(){var n=this._dragging.context();return n&&/^lasso/.test(n.prefix)};var J1={__depends__:[Mf,oh],__init__:["lassoTool"],lassoTool:["type",Rl]};function $l(n,o,a,l,d,b){this._dragging=a,this._mouse=b;var A=this,E=l.get("keyboard",!1);d.registerTool("hand",{tool:"hand",dragging:"hand.move"}),n.on("element.mousedown",1500,function($){if(Ja($))return A.activateMove($.originalEvent,!0),!1}),E&&E.addListener(1500,function($){if(up($.keyEvent)&&!A.isActive()){var W=A._mouse.getLastMoveEvent();A.activateMove(W,!!W)}},"keyboard.keydown"),E&&E.addListener(1500,function($){up($.keyEvent)&&A.isActive()&&A.toggle()},"keyboard.keyup"),n.on("hand.end",function($){if(!($.hover||$.originalEvent.target instanceof SVGElement))return!1;n.once("hand.ended",function(){A.activateMove($.originalEvent,{reactivate:!0})})}),n.on("hand.move.move",function($){var W=o.viewbox().scale;o.scroll({dx:$.dx*W,dy:$.dy*W})}),n.on("hand.move.end",function($){var W=$.context.reactivate;return!Ja($)&&W&&n.once("hand.move.ended",function(z){A.activateHand(z.originalEvent,!0,!0)}),!1})}function up(n){return Ti("Space",n)}$l.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"],$l.prototype.activateMove=function(n,o,a){"object"==typeof o&&(a=o,o=!1),this._dragging.init(n,"hand.move",{autoActivate:o,cursor:"grab",data:{context:a||{}}})},$l.prototype.activateHand=function(n,o,a){this._dragging.init(n,"hand",{trapClick:!1,autoActivate:o,cursor:"grab",data:{context:{reactivate:a}}})},$l.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var n=this._mouse.getLastMoveEvent();this.activateHand(n,!!n)},$l.prototype.isActive=function(){var n=this._dragging.context();return!!n&&/^(hand|hand\.move)$/.test(n.prefix)};var zb={__depends__:[Mf,oh],__init__:["handTool"],handTool:["type",$l]},sv="connect-ok",av="connect-not-ok";function Hc(n,o,a,l,d,b,A){var E=this;this._dragging=o,this._rules=b,this._mouse=A,d.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),n.on("global-connect.hover",function($){var W=$.context,z=$.hover,te=W.canStartConnect=E.canStartConnect(z);null!==te&&(W.startTarget=z,l.addMarker(z,te?sv:av))}),n.on(["global-connect.out","global-connect.cleanup"],function($){var W=$.context.startTarget;W&&l.removeMarker(W,$.context.canStartConnect?sv:av)}),n.on(["global-connect.ended"],function($){var W=$.context.startTarget,z={x:$.x,y:$.y};if(E.canStartConnect(W))return n.once("element.out",function(){n.once(["connect.ended","connect.canceled"],function(){n.fire("global-connect.drag.ended")}),a.start(null,W,z)}),!1})}Hc.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"],Hc.prototype.start=function(n,o){this._dragging.init(n,"global-connect",{autoActivate:o,trapClick:!1,data:{context:{}}})},Hc.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var n=this._mouse.getLastMoveEvent();return this.start(n,!!n)},Hc.prototype.isActive=function(){var n=this._dragging.context();return n&&/^global-connect/.test(n.prefix)},Hc.prototype.canStartConnect=function(n){return this._rules.allowed("connection.start",{source:n})};var Ub={__depends__:[Pm,Zo,Ns,Mf,oh],globalConnect:["type",Hc]};function lv(n,o,a,l,d,b,A,E){this._palette=n,this._create=o,this._elementFactory=a,this._spaceTool=l,this._lassoTool=d,this._handTool=b,this._globalConnect=A,this._translate=E,n.registerProvider(this)}lv.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"],lv.prototype.getPaletteEntries=function(n){var o={},a=this._create,l=this._elementFactory,d=this._spaceTool,b=this._lassoTool,A=this._handTool,E=this._globalConnect,$=this._translate;function W(le,he,me,Oe,Pe){function we(De){var Be=l.createShape(N({type:le},Pe));Pe&&(Rn(Be).isExpanded=Pe.isExpanded),a.start(De,Be)}var Ee=le.replace(/^bpmn:/,"");return{group:he,className:me,title:Oe||$("Create {type}",{type:Ee}),action:{dragstart:we,click:we}}}function z(le){var he=l.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),me=l.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:he});a.start(le,[he,me],{hints:{autoSelect:[he]}})}function te(le){a.start(le,l.createParticipantShape())}return N(o,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:$("Activate the hand tool"),action:{click:function(le){A.activateHand(le)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:$("Activate the lasso tool"),action:{click:function(le){b.activateSelection(le)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:$("Activate the create/remove space tool"),action:{click:function(le){d.activateSelection(le)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:$("Activate the global connect tool"),action:{click:function(le){E.start(le)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":W("bpmn:StartEvent","event","bpmn-icon-start-event-none",$("Create StartEvent")),"create.intermediate-event":W("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",$("Create Intermediate/Boundary Event")),"create.end-event":W("bpmn:EndEvent","event","bpmn-icon-end-event-none",$("Create EndEvent")),"create.exclusive-gateway":W("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",$("Create Gateway")),"create.task":W("bpmn:Task","activity","bpmn-icon-task",$("Create Task")),"create.data-object":W("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",$("Create DataObjectReference")),"create.data-store":W("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",$("Create DataStoreReference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:$("Create expanded SubProcess"),action:{dragstart:z,click:z}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:$("Create Pool/Participant"),action:{dragstart:te,click:te}},"create.group":W("bpmn:Group","artifact","bpmn-icon-group",$("Create Group"))}),o};var Ww={__depends__:[A0,va,Mg,J1,zb,Ub,hd],__init__:["paletteProvider"],paletteProvider:["type",lv]};function cv(n,o,a,l,d){Lt.call(this,n),n.on("shape.move.move",250,function(b){var $,A=b.context,E=A.canExecute;A.visualReplacements||(A.visualReplacements={}),E&&E.replacements?p(($=A).canExecute.replacements,function(W){var z=W.oldElementId,te={type:W.newElementType};if(!$.visualReplacements[z]){var le=o.get(z);N(te,{x:le.x,y:le.y});var he=a.createShape(te);l.addShape(he,le.parent);var me=wt('[data-element-id="'+ha(le.id)+'"]',$.dragGroup);me&&yt(me,{display:"none"});var Oe=d.addDragger(he,$.dragGroup);$.visualReplacements[z]=Oe,l.removeShape(he)}}):function($){var W=$.visualReplacements;p(W,function(z,te){var le=wt('[data-element-id="'+ha(te)+'"]',$.dragGroup);le&&yt(le,{display:"inline"}),z.remove(),W[te]&&delete W[te]})}(A)})}cv.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"],Ce(cv,Lt);var ew={__depends__:[Yd],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",cv]},uv=["x","y"],tw=Math.abs;function Xb(n){n.on(["connect.hover","connect.move","connect.end"],1250,function(o){var $,W,z,a=o.context,l=a.canExecute,d=a.start,b=a.hover,A=a.source,E=a.target;o.originalEvent&&Gn(o.originalEvent)||(a.initialConnectionStart||(a.initialConnectionStart=a.connectionStart),l&&b&&($=o,W=b,z=Le(b,"bpmn:Task")?10:20,uv.forEach(function(te){var le=Yb(te,W);$[te]<W[te]+z?Ii($,te,W[te]+z):$[te]>W[te]+le-z&&Ii($,te,W[te]+le-z)})),b&&function($,W){return v(["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"],function(z){return Kb($,z)})}(l)?(a.connectionStart=qr(d),wn(b,["bpmn:Event","bpmn:Gateway"])&&hv(o,qr(b)),wn(b,["bpmn:Task","bpmn:SubProcess"])&&function($,W){var z=qr(W);uv.forEach(function(te){var le,he,me;(le=$)[me=te]>(he=W)[me]+20&&le[me]<he[me]+Yb(me,he)-20&&Ii($,te,z[te])})}(o,b),Le(A,"bpmn:BoundaryEvent")&&E===A.host&&function($){var Oe,Pe,we,W=$.context,te=W.target;if(we=(Oe=W).source,!(Pe=Oe.hover)||!we||Pe!==we){var le=qr(W.source),he=bi(le,te,-10),me=[];/top|bottom/.test(he)&&me.push("x"),/left|right/.test(he)&&me.push("y"),me.forEach(function(Oe){var we=$[Oe];tw(we-le[Oe])<40&&Ii($,Oe,we>le[Oe]?le[Oe]+40:le[Oe]-40)})}}(o)):Kb(l,"bpmn:MessageFlow")?(Le(d,"bpmn:Event")&&(a.connectionStart=qr(d)),Le(b,"bpmn:Event")&&hv(o,qr(b))):a.connectionStart=a.initialConnectionStart)})}function hv(n,o){Ii(n,"x",o.x),Ii(n,"y",o.y)}function Kb(n,o){return n&&n.type===o}function Yb(n,o){return"x"===n?o.width:o.height}function Ra(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}function dv(n){this._snapValues={}}function hs(n,o,a){var l=this;this._elementRegistry=n,o.on(["create.start","shape.move.start"],function(d){l.initSnap(d)}),o.on(["create.move","create.end","shape.move.move","shape.move.end"],1250,function(d){var b=d.context,A=b.shape,E=b.snapContext,$=b.target;if((!d.originalEvent||!Gn(d.originalEvent))&&!fc(d)&&$){var W=E.pointsForTarget($);W.initialized||((W=l.addSnapTargetPoints(W,A,$)).initialized=!0),a.snap(d,W)}}),o.on(["create.cleanup","shape.move.cleanup"],function(){a.hide()})}function fv(n){return!!n.labelTarget}function Uc(n,o){o.invoke(hs,this),n.on(["create.move","create.end"],1500,qb),n.on(["create.move","create.end","shape.move.move","shape.move.end"],1500,function(a){var A,E,$,W,z,te,l=a.context,d=l.canExecute,b=l.target;d&&("attach"===d||d.attach)&&!fc(a)&&(A=a,W=Yt(E=b),z=$c(A,E),$=(te=A.context.shape).parent?{x:0,y:0}:on(te),/top/.test(z)?Ii(A,"y",W.top-$.y):/bottom/.test(z)&&Ii(A,"y",W.bottom-$.y),/left/.test(z)?Ii(A,"x",W.left-$.x):/right/.test(z)&&Ii(A,"x",W.right-$.x))})}function qb(n){var o=n.context.createConstraints;if(o){var a=o.top,l=o.right,d=o.bottom,b=o.left;(b&&b>=n.x||l&&l<=n.x)&&Ii(n,"x",n.x),(a&&a>=n.y||d&&d<=n.y)&&Ii(n,"y",n.y)}}function hp(n,o){return-1!==n.indexOf(o)}function Jb(n,o,a){return o?{x:n.x-a.x,y:n.y-a.y}:{x:n.x,y:n.y}}function Ml(n,o){var a=this;n.on(["resize.start"],function(l){a.initSnap(l)}),n.on(["resize.move","resize.end"],1250,function(l){var z,d=l.context,b=d.shape,A=b.parent,E=d.direction,$=d.snapContext;if(!(l.originalEvent&&Gn(l.originalEvent)||fc(l))){var W=$.pointsForTarget(A);W.initialized||((W=a.addSnapTargetPoints(W,b,A,E)).initialized=!0),("n"===(z=E)||"s"===z)&&Ii(l,"x",l.x),function(z){return"e"===z||"w"===z}(E)&&Ii(l,"y",l.y),o.snap(l,W)}}),n.on(["resize.cleanup"],function(){o.hide()})}function pv(n,o){var a=on(n),l=Yt(n),d={x:a.x,y:a.y};return-1!==o.indexOf("n")?d.y=l.top:-1!==o.indexOf("s")&&(d.y=l.bottom),-1!==o.indexOf("e")?d.x=l.right:-1!==o.indexOf("w")&&(d.x=l.left),d}function Nl(n){this._canvas=n,this._asyncHide=j(D(this.hide,this),1e3)}Xb.$inject=["eventBus"],Ra.prototype.getSnapOrigin=function(n){return this._snapOrigins[n]},Ra.prototype.setSnapOrigin=function(n,o){this._snapOrigins[n]=o,-1===this._snapLocations.indexOf(n)&&this._snapLocations.push(n)},Ra.prototype.addDefaultSnap=function(n,o){var a=this._defaultSnaps[n];a||(a=this._defaultSnaps[n]=[]),a.push(o)},Ra.prototype.getSnapLocations=function(){return this._snapLocations},Ra.prototype.setSnapLocations=function(n){this._snapLocations=n},Ra.prototype.pointsForTarget=function(n){var o=n.id||n,a=this._targets[o];return a||(a=this._targets[o]=new dv).initDefaults(this._defaultSnaps),a},dv.prototype.add=function(n,o){var a=this._snapValues[n];a||(a=this._snapValues[n]={x:[],y:[]}),-1===a.x.indexOf(o.x)&&a.x.push(o.x),-1===a.y.indexOf(o.y)&&a.y.push(o.y)},dv.prototype.snap=function(n,o,a,l){var d=this._snapValues[o];return d&&function(b,A,E){var $,W;for(E=void 0===E?10:E,$=0;$<A.length;$++)if(Tw((W=A[$])-b)<=E)return W}(n[a],d[a],l)},dv.prototype.initDefaults=function(n){var o=this;p(n||{},function(a,l){p(a,function(d){o.add(l,d)})})},hs.$inject=["elementRegistry","eventBus","snapping"],hs.prototype.initSnap=function(n){var o,a=this._elementRegistry,l=n.context,d=l.shape,b=l.snapContext;b||(b=l.snapContext=new Ra);var A=(o=a.get(d.id)?qr(d,n):{x:n.x+qr(d).x,y:n.y+qr(d).y}).x-d.width/2,E=o.y-d.height/2,$=o.x+d.width/2,W=o.y+d.height/2;return b.setSnapOrigin("mid",{x:o.x-n.x,y:o.y-n.y}),fv(d)||(b.setSnapOrigin("top-left",{x:A-n.x,y:E-n.y}),b.setSnapOrigin("bottom-right",{x:$-n.x,y:W-n.y})),b},hs.prototype.addSnapTargetPoints=function(n,o,a){return p(this.getSnapTargets(o,a),function(l){if(fv(l))fv(o)&&n.add("mid",qr(l));else if(l.waypoints){if(l.waypoints.length<3)return;p(l.waypoints.slice(1,-1),function(d){n.add("mid",d)})}else n.add("mid",qr(l))}),k(o.x)&&k(o.y)&&this._elementRegistry.get(o.id)&&n.add("mid",qr(o)),n},hs.prototype.getSnapTargets=function(n,o){return s0(o).filter(function(a){return!a.hidden})},Ce(Uc,hs),Uc.$inject=["eventBus","injector"],Uc.prototype.initSnap=function(n){var o=hs.prototype.initSnap.call(this,n),a=n.shape,l=!!this._elementRegistry.get(a.id);return p(a.outgoing,function(d){var b=d.waypoints[0];o.setSnapOrigin(d.id+"-docking",Jb(b=b.original||b,l,n))}),p(a.incoming,function(d){var b=d.waypoints[d.waypoints.length-1];o.setSnapOrigin(d.id+"-docking",Jb(b=b.original||b,l,n))}),Le(a,"bpmn:Participant")&&o.setSnapLocations(["top-left","bottom-right","mid"]),o},Uc.prototype.addSnapTargetPoints=function(n,o,a){hs.prototype.addSnapTargetPoints.call(this,n,o,a);var l=this.getSnapTargets(o,a);p(l,function(b){var E;(Le(E=b,"bpmn:SubProcess")&&kn(E)||Le(E,"bpmn:Participant")||("bpmn:TextAnnotation",[o,b].every(function(E){return Le(E,"bpmn:TextAnnotation")})))&&(n.add("top-left",r0(b)),n.add("bottom-right",o0(b)))});var d=this._elementRegistry;return p(o.incoming,function(b){if(d.get(o.id)){hp(l,b.source)||n.add("mid",on(b.source));var A=b.waypoints[0];n.add(b.id+"-docking",A.original||A)}}),p(o.outgoing,function(b){if(d.get(o.id)){hp(l,b.target)||n.add("mid",on(b.target));var A=b.waypoints[b.waypoints.length-1];n.add(b.id+"-docking",A.original||A)}}),Le(a,"bpmn:SequenceFlow")&&(n=this.addSnapTargetPoints(n,o,a.parent)),n},Uc.prototype.getSnapTargets=function(n,o){return hs.prototype.getSnapTargets.call(this,n,o).filter(function(a){return!Le(a,"bpmn:Lane")})},Ml.prototype.initSnap=function(n){var o=n.context,a=o.shape,l=o.direction,d=o.snapContext;d||(d=o.snapContext=new Ra);var b=pv(a,l);return d.setSnapOrigin("corner",{x:b.x-n.x,y:b.y-n.y}),d},Ml.prototype.addSnapTargetPoints=function(n,o,a,l){return p(this.getSnapTargets(o,a),function(d){n.add("corner",o0(d)),n.add("corner",r0(d))}),n.add("corner",pv(o,l)),n},Ml.$inject=["eventBus","snapping"],Ml.prototype.getSnapTargets=function(n,o){return s0(o).filter(function(a){return!(a.host===n||(b=a,b.waypoints)||function(b){return!!b.hidden}(a)||function(b){return!!b.labelTarget}(a));var b})},Nl.$inject=["canvas"],Nl.prototype.snap=function(n,o){var a=n.context.snapContext,l=a.getSnapLocations(),d={x:fc(n,"x"),y:fc(n,"y")};p(l,function(b){var A=a.getSnapOrigin(b),E={x:n.x+A.x,y:n.y+A.y};if(p(["x","y"],function($){var W;d[$]||void 0!==(W=o.snap(E,b,$,7))&&(d[$]={value:W,originValue:W-A[$]})}),d.x&&d.y)return!1}),this.showSnapLine("vertical",d.x&&d.x.value),this.showSnapLine("horizontal",d.y&&d.y.value),p(["x","y"],function(b){var A=d[b];F(A)&&Ii(n,b,A.originValue)})},Nl.prototype._createLine=function(n){var o=this._canvas.getLayer("snap"),a=jt("path");return yt(a,{d:"M0,0 L0,0"}),Fe(a).add("djs-snap-line"),Ze(o,a),{update:function(l){k(l)?yt(a,"horizontal"===n?{d:"M-100000,"+l+" L+100000,"+l,display:""}:{d:"M "+l+",-100000 L "+l+", +100000",display:""}):yt(a,{display:"none"})}}},Nl.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}},Nl.prototype.showSnapLine=function(n,o){var a=this.getSnapLine(n);a&&a.update(o),this._asyncHide()},Nl.prototype.getSnapLine=function(n){return this._snapLines||this._createSnapLines(),this._snapLines[n]},Nl.prototype.hide=function(){p(this._snapLines,function(n){n.update()})};var nw={__depends__:[{__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",hs],resizeSnapping:["type",Ml],snapping:["type",Nl]}],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",Xb],createMoveSnapping:["type",Uc]};function mn(n,o,a,l){this._open=!1,this._results=[],this._eventMaps=[],this._canvas=n,this._eventBus=o,this._overlays=a,this._selection=l,this._container=vt(mn.BOX_HTML),this._searchInput=wt(mn.INPUT_SELECTOR,this._container),this._resultsContainer=wt(mn.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),o.on(["canvas.destroy","diagram.destroy"],this.close,this)}function eC(n,o,a){var A,l=(A="",o.forEach(function(E){A+=E.matched?'<strong class="'+mn.RESULT_HIGHLIGHT_CLASS+'">'+Ss(E.matched)+"</strong>":Ss(E.normal)}),""!==A?A:null),d=vt(a);d.innerHTML=l,n.appendChild(d)}mn.$inject=["canvas","eventBus","overlays","selection"],mn.prototype._bindEvents=function(){var n=this;function o(a,l,d,b){n._eventMaps.push({el:a,type:d,listener:Et.bind(a,l,d,b)})}o(document,"html","click",function(a){n.close()}),o(this._container,mn.INPUT_SELECTOR,"click",function(a){a.stopPropagation(),a.delegateTarget.focus()}),o(this._container,mn.RESULT_SELECTOR,"mouseover",function(a){a.stopPropagation(),n._scrollToNode(a.delegateTarget),n._preselect(a.delegateTarget)}),o(this._container,mn.RESULT_SELECTOR,"click",function(a){a.stopPropagation(),n._select(a.delegateTarget)}),o(this._container,mn.INPUT_SELECTOR,"keydown",function(a){Ti("ArrowUp",a)&&a.preventDefault(),Ti("ArrowDown",a)&&a.preventDefault()}),o(this._container,mn.INPUT_SELECTOR,"keyup",function(a){if(Ti("Escape",a))return n.close();if(Ti("Enter",a)){var l=n._getCurrentResult();return l?n._select(l):n.close()}return Ti("ArrowUp",a)?n._scrollToDirection(!0):Ti("ArrowDown",a)?n._scrollToDirection():void(Ti(["ArrowLeft","ArrowRight"],a)||n._search(a.delegateTarget.value))})},mn.prototype._unbindEvents=function(){this._eventMaps.forEach(function(n){Et.unbind(n.el,n.type,n.listener)})},mn.prototype._search=function(n){var o=this;if(this._clearResults(),n&&""!==n){var a=this._searchProvider.find(n);if(a.length){a.forEach(function(d){var b=d.element.id,A=o._createResultNode(d,b);o._results[b]={element:d.element,node:A}});var l=wt(mn.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(l),this._preselect(l)}}},mn.prototype._scrollToDirection=function(n){var o=this._getCurrentResult();if(o){var a=n?o.previousElementSibling:o.nextElementSibling;a&&(this._scrollToNode(a),this._preselect(a))}},mn.prototype._scrollToNode=function(n){if(n&&n!==this._getCurrentResult()){var o=n.offsetTop,a=this._resultsContainer.scrollTop,l=o-this._resultsContainer.clientHeight+n.clientHeight;o<a?this._resultsContainer.scrollTop=o:a<l&&(this._resultsContainer.scrollTop=l)}},mn.prototype._clearResults=function(){se(this._resultsContainer),this._results=[],this._resetOverlay(),this._eventBus.fire("searchPad.cleared")},mn.prototype._getCurrentResult=function(){return wt(mn.RESULT_SELECTED_SELECTOR,this._resultsContainer)},mn.prototype._createResultNode=function(n,o){var a=vt(mn.RESULT_HTML);return n.primaryTokens.length>0&&eC(a,n.primaryTokens,mn.RESULT_PRIMARY_HTML),eC(a,n.secondaryTokens,mn.RESULT_SECONDARY_HTML),pe(a,mn.RESULT_ID_ATTRIBUTE,o),this._resultsContainer.appendChild(a),a},mn.prototype.registerProvider=function(n){this._searchProvider=n},mn.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._bindEvents(),this._open=!0,be(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))},mn.prototype.close=function(){this.isOpen()&&(this._unbindEvents(),this._open=!1,be(this._container).remove("open"),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._resetOverlay(),this._eventBus.fire("searchPad.closed"))},mn.prototype.toggle=function(){this.isOpen()?this.close():this.open()},mn.prototype.isOpen=function(){return this._open},mn.prototype._preselect=function(n){var o=this._getCurrentResult();if(n!==o){o&&be(o).remove(mn.RESULT_SELECTED_CLASS);var a=pe(n,mn.RESULT_ID_ATTRIBUTE),l=this._results[a].element;be(n).add(mn.RESULT_SELECTED_CLASS),this._resetOverlay(l),this._canvas.scrollToElement(l,{top:400}),this._selection.select(l),this._eventBus.fire("searchPad.preselected",l)}},mn.prototype._select=function(n){var o=pe(n,mn.RESULT_ID_ATTRIBUTE),a=this._results[o].element;this.close(),this._resetOverlay(),this._canvas.scrollToElement(a,{top:400}),this._selection.select(a),this._eventBus.fire("searchPad.selected",a)},mn.prototype._resetOverlay=function(n){if(this._overlayId&&this._overlays.remove(this._overlayId),n){var o=(A={width:(d=(a=qn(n)).width+2*6)+"px",height:(b=a.height+12)+"px"},oe(E=vt('<div class="'+mn.OVERLAY_CLASS+'"></div>'),A),{position:{bottom:b-6,right:d-6},show:!0,html:E});this._overlayId=this._overlays.add(n,o)}var a,d,b,A,E},mn.CONTAINER_SELECTOR=".djs-search-container",mn.INPUT_SELECTOR=".djs-search-input input",mn.RESULTS_CONTAINER_SELECTOR=".djs-search-results",mn.RESULT_SELECTOR=".djs-search-result",mn.RESULT_SELECTED_SELECTOR="."+(mn.RESULT_SELECTED_CLASS="djs-search-result-selected"),mn.RESULT_ID_ATTRIBUTE="data-result-id",mn.RESULT_HIGHLIGHT_CLASS="djs-search-highlight",mn.OVERLAY_CLASS="djs-search-overlay",mn.BOX_HTML='<div class="djs-search-container djs-draggable djs-scrollable"><div class="djs-search-input"><input type="text"/></div><div class="djs-search-results"></div></div>',mn.RESULT_HTML='<div class="djs-search-result"></div>',mn.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>',mn.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';var Gw={__depends__:[_u,Do],searchPad:["type",mn]};function ai(n,o,a){this._elementRegistry=n,this._canvas=a,o.registerProvider(this)}function mv(n){return w(n,function(a){return!!a.matched}).length>0}function Ll(n,o){var a=[],l=n;if(!n)return a;n=n.toLowerCase(),o=o.toLowerCase();var d=n.indexOf(o);return d>-1?(0!==d&&a.push({normal:l.substr(0,d)}),a.push({matched:l.substr(d,o.length)}),o.length+d<n.length&&a.push({normal:l.substr(o.length+d,n.length)})):a.push({normal:l}),a}ai.$inject=["elementRegistry","searchPad","canvas"],ai.prototype.find=function(n){var o=this._canvas.getRootElement(),a=this._elementRegistry.filter(function(l){return!l.labelTarget});return a=w(a,function(l){return l!==o}),T(a=w(a=O(a,function(l){return{primaryTokens:Ll(Dr(l),n),secondaryTokens:Ll(l.id,n),element:l}}),function(l){return mv(l.primaryTokens)||mv(l.secondaryTokens)}),function(l){return Dr(l.element)+l.element.id})};var tC={__depends__:[Gw],__init__:["bpmnSearch"],bpmnSearch:["type",ai]};function So(n){Is.call(this,n)}return Ce(So,Is),So.Viewer=Ts,So.NavigatedViewer=ac,So.prototype.createDiagram=oa(function(){return this.importXML('<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>')}),So.prototype._modules=[].concat(Ts.prototype._modules,So.prototype._interactionModules=[yi,wy,NC,Up],So.prototype._modelingModules=[Ly,$n,zC,QC,l0,Pm,th,C0,jm,va,h1,T0,m1,b1,L0,C1,bh,Bw,jb,Qb,Ww,ew,Z0,nw,tC]),So}()},8150:Cn=>{self,Cn.exports=function(){return xe={897:function(Ce,P,ae){"use strict";ae.d(P,{x:function(){return Y}});var ce=ae(2602),c=ae(9791),K=ae(7907);function U(H){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(F){return typeof F}:function(F){return F&&"function"==typeof Symbol&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F})(H)}function Z(H,F){for(var k=0;k<F.length;k++){var _=F[k];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(H,(M=function(R,S){if("object"!==U(R)||null===R)return R;var y=R[Symbol.toPrimitive];if(void 0===y)return String(R);if("object"!==U(y=y.call(R,"string")))return y;throw new TypeError("@@toPrimitive must return a primitive value.")}(M=_.key),"symbol"===U(M)?M:String(M)),_)}var M}var Y=function(){function H(M,y){if(!(this instanceof H))throw new TypeError("Cannot call a class as a function");this.dom={};var S=this,p=this.dom,w=((this.anchor=void 0,this.items=M,this.eventListeners={},this.selection=void 0,this.onClose=y?y.close:void 0,this.limitHeight=!!y&&y.limitHeight,y=document.createElement("div")).className="jsoneditor-contextmenu-root",p.root=y,document.createElement("div"));(w.className="jsoneditor-contextmenu",p.menu=w,y.appendChild(w),y=document.createElement("ul")).className="jsoneditor-menu",w.appendChild(y),p.list=y,p.items=[],((w=document.createElement("button")).type="button",p.focusButton=w,p=document.createElement("li")).style.overflow="hidden",p.style.height="0",p.appendChild(w),y.appendChild(p),function f(m,h,v){v.forEach(function(O){var C,x,L,Q,G,T;"separator"===O.type?((G=document.createElement("div")).className="jsoneditor-separator",(x=document.createElement("li")).appendChild(G),m.appendChild(x)):(C={},G=document.createElement("li"),m.appendChild(G),(x=document.createElement("button")).type="button",x.className=O.className,C.button=x,O.title&&(x.title=O.title),O.click&&(x.onclick=function(V){V.preventDefault(),S.hide(),O.click()}),G.appendChild(x),O.submenu?((Q=document.createElement("div")).className="jsoneditor-icon",x.appendChild(Q),(Q=document.createElement("div")).className="jsoneditor-text"+(O.click?"":" jsoneditor-right-margin"),Q.appendChild(document.createTextNode(O.text)),x.appendChild(Q),(L=O.click?(x.className+=" jsoneditor-default",(Q=document.createElement("button")).type="button",(C.buttonExpand=Q).className="jsoneditor-expand",(T=document.createElement("div")).className="jsoneditor-expand",Q.appendChild(T),G.appendChild(Q),O.submenuTitle&&(Q.title=O.submenuTitle),Q):((T=document.createElement("div")).className="jsoneditor-expand",x.appendChild(T),x)).onclick=function(V){V.preventDefault(),S._onExpandItem(C),L.focus()},C.subItems=Q=[],T=document.createElement("ul"),(C.ul=T).className="jsoneditor-menu",T.style.height="0",G.appendChild(T),f(T,Q,O.submenu)):((G=document.createElement("div")).className="jsoneditor-icon",x.appendChild(G),(T=document.createElement("div")).className="jsoneditor-text",T.appendChild(document.createTextNode((0,K.Iu)(O.text))),x.appendChild(T)),h.push(C))})}(y,this.dom.items,M),this.maxHeight=0,M.forEach(function(f){f=24*(M.length+(f.submenu?f.submenu.length:0)),S.maxHeight=Math.max(S.maxHeight,f)})}var F,k;return F=H,(k=[{key:"_getVisibleButtons",value:function(){var M=[],R=this;return this.dom.items.forEach(function(S){M.push(S.button),S.buttonExpand&&M.push(S.buttonExpand),S.subItems&&S===R.expandedItem&&S.subItems.forEach(function(y){M.push(y.button),y.buttonExpand&&M.push(y.buttonExpand)})}),M}},{key:"show",value:function(M,h,S){this.hide();var y=!0,p=M.parentNode,w=M.getBoundingClientRect(),f=(p=p.getBoundingClientRect(),h.getBoundingClientRect()),m=this;this.dom.absoluteAnchor=(0,ce.w)(M,h,function(){m.hide()}),w.bottom+this.maxHeight<f.bottom||w.top-this.maxHeight>f.top&&(y=!1),h=S?0:w.top-p.top,y?(S=M.offsetHeight,this.dom.menu.style.left="0",this.dom.menu.style.top=h+S+"px",this.dom.menu.style.bottom=""):(this.dom.menu.style.left="0",this.dom.menu.style.top="",this.dom.menu.style.bottom="0px"),this.limitHeight&&(this.dom.list.style.maxHeight=(p=y?f.bottom-w.bottom-10:w.top-f.top-10)+"px",this.dom.list.style.overflowY="auto"),this.dom.absoluteAnchor.appendChild(this.dom.root),this.selection=(0,c.getSelection)(),this.anchor=M,setTimeout(function(){m.dom.focusButton.focus()},0),H.visibleMenu&&H.visibleMenu.hide(),H.visibleMenu=this}},{key:"hide",value:function(){this.dom.absoluteAnchor&&(this.dom.absoluteAnchor.destroy(),delete this.dom.absoluteAnchor),this.dom.root.parentNode&&(this.dom.root.parentNode.removeChild(this.dom.root),this.onClose)&&this.onClose(),H.visibleMenu===this&&(H.visibleMenu=void 0)}},{key:"_onExpandItem",value:function(M){var R,S=this,y=M===this.expandedItem,w=this.expandedItem;w&&(w.ul.style.height="0",w.ul.style.padding="",setTimeout(function(){S.expandedItem!==w&&(w.ul.style.display="",c.removeClassName)(w.ul.parentNode,"jsoneditor-selected")},300),this.expandedItem=void 0),y||((R=M.ul).style.display="block",setTimeout(function(){if(S.expandedItem===M){for(var p=0,f=0;f<R.childNodes.length;f++)p+=R.childNodes[f].clientHeight;R.style.height=p+"px",R.style.padding="5px 10px"}},0),(0,c.addClassName)(R.parentNode,"jsoneditor-selected"),this.expandedItem=M)}},{key:"_onKeyDown",value:function(M){var R,S,y,w,p=M.target,f=M.which,m=!1;27===f?(this.selection&&(0,c.setSelection)(this.selection),this.anchor&&this.anchor.focus(),this.hide(),m=!0):9===f?M.shiftKey?0===(S=(R=this._getVisibleButtons()).indexOf(p))&&(R[R.length-1].focus(),m=!0):(S=(R=this._getVisibleButtons()).indexOf(p))===R.length-1&&(R[0].focus(),m=!0):37===f?("jsoneditor-expand"===p.className&&(S=(R=this._getVisibleButtons()).indexOf(p),y=R[S-1])&&y.focus(),m=!0):38===f?(S=(R=this._getVisibleButtons()).indexOf(p),(y=(y=(y=R[S-1])&&"jsoneditor-expand"===y.className?R[S-2]:y)||R[R.length-1])&&y.focus(),m=!0):39===f?(S=(R=this._getVisibleButtons()).indexOf(p),(w=R[S+1])&&"jsoneditor-expand"===w.className&&w.focus(),m=!0):40===f&&(S=(R=this._getVisibleButtons()).indexOf(p),(w=(w=(w=R[S+1])&&"jsoneditor-expand"===w.className?R[S+2]:w)||R[0])&&(w.focus(),m=!0),m=!0),m&&(M.stopPropagation(),M.preventDefault())}}])&&Z(F.prototype,k),Object.defineProperty(F,"prototype",{writable:!1}),H}();Y.visibleMenu=void 0},6436:function(Ce,P,ae){"use strict";function ce(U){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Z){return typeof Z}:function(Z){return Z&&"function"==typeof Symbol&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z})(U)}function c(U,Z){for(var Y=0;Y<Z.length;Y++){var H=Z[Y];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(U,(F=function(k,_){if("object"!==ce(k)||null===k)return k;var M=k[Symbol.toPrimitive];if(void 0===M)return String(k);if("object"!==ce(M=M.call(k,"string")))return M;throw new TypeError("@@toPrimitive must return a primitive value.")}(F=H.key),"symbol"===ce(F)?F:String(F)),H)}var F}ae.d(P,{Q:function(){return K}});var K=function(){function U(k){if(!(this instanceof U))throw new TypeError("Cannot call a class as a function");var _;this.errorTableVisible=k.errorTableVisible,this.onToggleVisibility=k.onToggleVisibility,this.onFocusLine=k.onFocusLine||function(){},this.onChangeHeight=k.onChangeHeight,this.dom={},((k=document.createElement("div")).className="jsoneditor-validation-errors-container",this.dom.validationErrorsContainer=k,_=document.createElement("div")).style.display="none",_.className="jsoneditor-additional-errors fadein",_.textContent="Scroll for more \u25bf",this.dom.additionalErrorsIndication=_,k.appendChild(_),((k=document.createElement("span")).className="jsoneditor-validation-error-icon",k.style.display="none",this.dom.validationErrorIcon=k,_=document.createElement("span")).className="jsoneditor-validation-error-count",_.style.display="none",this.dom.validationErrorCount=_,this.dom.parseErrorIndication=document.createElement("span"),this.dom.parseErrorIndication.className="jsoneditor-parse-error-icon",this.dom.parseErrorIndication.style.display="none"}var Z,Y;return Z=U,(Y=[{key:"getErrorTable",value:function(){return this.dom.validationErrorsContainer}},{key:"getErrorCounter",value:function(){return this.dom.validationErrorCount}},{key:"getWarningIcon",value:function(){return this.dom.validationErrorIcon}},{key:"getErrorIcon",value:function(){return this.dom.parseErrorIndication}},{key:"toggleTableVisibility",value:function(){this.errorTableVisible=!this.errorTableVisible,this.onToggleVisibility(this.errorTableVisible)}},{key:"setErrors",value:function(F,k){var _,M,R=this,S=(this.dom.validationErrors&&(this.dom.validationErrors.parentNode.removeChild(this.dom.validationErrors),this.dom.validationErrors=null,this.dom.additionalErrorsIndication.style.display="none"),this.errorTableVisible&&0<F.length?((S=document.createElement("div")).className="jsoneditor-validation-errors",(M=document.createElement("table")).className="jsoneditor-text-errors",S.appendChild(M),_=document.createElement("tbody"),M.appendChild(_),F.forEach(function(y){isNaN(y.line)?y.dataPath&&(p=k.find(function(h){return h.path===y.dataPath}))&&(w=p.line+1):w=y.line;var w,m,p=document.createElement("tr"),f=(p.className=isNaN(w)?"":"jump-to-line",p.className+="error"===y.type?" parse-error":" validation-error",document.createElement("td"));((m=document.createElement("button")).className="jsoneditor-schema-error",f.appendChild(m),p.appendChild(f),m=document.createElement("td")).style="white-space: nowrap;",m.textContent=isNaN(w)?"":"Ln "+w,p.appendChild(m),"string"==typeof y?((f=document.createElement("td")).colSpan=2,(m=document.createElement("pre")).appendChild(document.createTextNode(y)),f.appendChild(m),p.appendChild(f)):((m=document.createElement("td")).appendChild(document.createTextNode(y.dataPath||"")),p.appendChild(m),f=document.createElement("td"),(m=document.createElement("pre")).appendChild(document.createTextNode(y.message.replace(/<br>/gi,"\n"))),f.appendChild(m),p.appendChild(f)),p.onclick=function(){R.onFocusLine(w)},_.appendChild(p)}),this.dom.validationErrors=S,this.dom.validationErrorsContainer.appendChild(S),this.dom.additionalErrorsIndication.title=F.length+" errors total",this.dom.validationErrorsContainer.clientHeight<this.dom.validationErrorsContainer.scrollHeight?(this.dom.additionalErrorsIndication.style.display="block",this.dom.validationErrorsContainer.onscroll=function(){R.dom.additionalErrorsIndication.style.display=0<R.dom.validationErrorsContainer.clientHeight&&0===R.dom.validationErrorsContainer.scrollTop?"block":"none"}):this.dom.validationErrorsContainer.onscroll=void 0,this.onChangeHeight(M=this.dom.validationErrorsContainer.clientHeight+(this.dom.statusBar?this.dom.statusBar.clientHeight:0))):this.onChangeHeight(0),F.filter(function(y){return"error"!==y.type}).length);0<S?(this.dom.validationErrorCount.style.display="inline",this.dom.validationErrorCount.innerText=S,this.dom.validationErrorCount.onclick=this.toggleTableVisibility.bind(this),this.dom.validationErrorIcon.style.display="inline",this.dom.validationErrorIcon.title=S+" schema validation error(s) found",this.dom.validationErrorIcon.onclick=this.toggleTableVisibility.bind(this)):(this.dom.validationErrorCount.style.display="none",this.dom.validationErrorIcon.style.display="none"),F.some(function(y){return"error"===y.type})?(M=F[0].line,this.dom.parseErrorIndication.style.display="block",this.dom.parseErrorIndication.title=isNaN(M)?"parse error - check that the json is valid":"parse error on line "+M,this.dom.parseErrorIndication.onclick=this.toggleTableVisibility.bind(this)):this.dom.parseErrorIndication.style.display="none"}}])&&c(Z.prototype,Y),Object.defineProperty(Z,"prototype",{writable:!1}),U}()},2474:function(Ce,P,ae){"use strict";function ce(U){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Z){return typeof Z}:function(Z){return Z&&"function"==typeof Symbol&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z})(U)}function c(U,Z){for(var Y=0;Y<Z.length;Y++){var H=Z[Y];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(U,(F=function(k,_){if("object"!==ce(k)||null===k)return k;var M=k[Symbol.toPrimitive];if(void 0===M)return String(k);if("object"!==ce(M=M.call(k,"string")))return M;throw new TypeError("@@toPrimitive must return a primitive value.")}(F=H.key),"symbol"===ce(F)?F:String(F)),H)}var F}ae.d(P,{R:function(){return K}});var K=function(){function U(F){if(!(this instanceof U))throw new TypeError("Cannot call a class as a function");if(this.target=F.target||null,!this.target)throw new Error('FocusTracker constructor called without a "target" to track.');this.onFocus="function"==typeof F.onFocus?F.onFocus:null,this.onBlur="function"==typeof F.onBlur?F.onBlur:null,this._onClick=this._onEvent.bind(this),this._onKeyUp=function(k){9!==k.which&&9!==k.keyCode||this._onEvent(k)}.bind(this),this._onBlur=this._onEvent.bind(this),this.focusFlag=!1,this.firstEventFlag=!0,(this.onFocus||this.onBlur)&&(document.addEventListener("click",this._onClick),document.addEventListener("keyup",this._onKeyUp),document.addEventListener("blur",this._onBlur))}var Z,Y;return Z=U,(Y=[{key:"destroy",value:function(){document.removeEventListener("click",this._onClick),document.removeEventListener("keyup",this._onKeyUp),document.removeEventListener("blur",this._onBlur),this._onEvent({target:document.body})}},{key:"_onEvent",value:function(F){(F=(F=F.target)===this.target||!(!this.target.contains(F)&&!this.target.contains(document.activeElement)))?this.focusFlag||(this.onFocus&&this.onFocus({type:"focus",target:this.target}),this.focusFlag=!0):(this.focusFlag||this.firstEventFlag)&&(this.onBlur&&this.onBlur({type:"blur",target:this.target}),this.focusFlag=!1,this.firstEventFlag)&&(this.firstEventFlag=!1)}}])&&c(Z.prototype,Y),Object.defineProperty(Z,"prototype",{writable:!1}),U}()},3161:function(Ce,P,ae){"use strict";var ce=ae(8170),c=ae(8037),K=ae(8038).treeModeMixins,U=ae(8458).textModeMixins,Z=ae(341).previewModeMixins,Y=(M=ae(9791)).clear,H=M.extend,F=M.getInnerText,k=M.getInternetExplorerVersion,_=M.parse,M=ae(2744).tryRequireAjv,R=ae(2558).showTransformModal,S=ae(6210).showSortModal,y=M();function w(p,f,m){if(!(this instanceof w))throw new Error('JSONEditor constructor called without "new".');var h=k();if(-1!==h&&h<9)throw new Error("Unsupported browser, IE9 or newer required. Please install the newest version of your browser.");f&&(f.error&&(console.warn('Option "error" has been renamed to "onError"'),f.onError=f.error,delete f.error),f.change&&(console.warn('Option "change" has been renamed to "onChange"'),f.onChange=f.change,delete f.change),f.editable&&(console.warn('Option "editable" has been renamed to "onEditable"'),f.onEditable=f.editable,delete f.editable),f.onChangeJSON&&("text"===f.mode||"code"===f.mode||f.modes&&(-1!==f.modes.indexOf("text")||-1!==f.modes.indexOf("code")))&&console.warn('Option "onChangeJSON" is not applicable to modes "text" and "code". Use "onChangeText" or "onChange" instead.'),f)&&Object.keys(f).forEach(function(v){-1===w.VALID_OPTIONS.indexOf(v)&&console.warn('Unknown option "'+v+'". This option will be ignored')}),arguments.length&&this._create(p,f,m)}typeof Promise>"u"&&console.error("Promise undefined. Please load a Promise polyfill in the browser in order to use JSONEditor"),w.modes={},w.prototype.DEBOUNCE_INTERVAL=150,w.VALID_OPTIONS=["ajv","schema","schemaRefs","templates","ace","theme","autocomplete","onChange","onChangeJSON","onChangeText","onExpand","onEditable","onError","onEvent","onModeChange","onNodeName","onValidate","onCreateMenu","onSelectionChange","onTextSelectionChange","onClassName","onFocus","onBlur","colorPicker","onColorPicker","timestampTag","timestampFormat","escapeUnicode","history","search","mode","modes","name","indentation","sortObjectKeys","navigationBar","statusBar","mainMenuBar","languages","language","enableSort","enableTransform","limitDragging","maxVisibleChilds","onValidationError","modalAnchor","popupAnchor","createQuery","executeQuery","queryDescription","allowSchemaSuggestions"],w.prototype._create=function(p,f,m){this.container=p,this.options=f||{},this.json=m||{},this.setMode(p=this.options.mode||this.options.modes&&this.options.modes[0]||"tree")},w.prototype.destroy=function(){},w.prototype.set=function(p){this.json=p},w.prototype.get=function(){return this.json},w.prototype.setText=function(p){this.json=_(p)},w.prototype.getText=function(){return JSON.stringify(this.json)},w.prototype.setName=function(p){this.options||(this.options={}),this.options.name=p},w.prototype.getName=function(){return this.options&&this.options.name},w.prototype.setMode=function(p){if(p!==this.options.mode||!this.create){var f=this.container,m=H({},this.options),h=m.mode,v=(m.mode=p,w.modes[p]);if(!v)throw new Error('Unknown mode "'+m.mode+'"');var O="text"===v.data,C=this.getName(),x=this[O?"getText":"get"]();if(this.destroy(),Y(this),H(this,v.mixin),this.create(f,m),this.setName(C),this[O?"setText":"set"](x),"function"==typeof v.load)try{v.load.call(this)}catch(L){console.error(L)}if("function"==typeof m.onModeChange&&p!==h)try{m.onModeChange(p,h)}catch(L){console.error(L)}}},w.prototype.getMode=function(){return this.options.mode},w.prototype._onError=function(p){this.options&&"function"==typeof this.options.onError?this.options.onError(p):window.alert(p.toString())},w.prototype.setSchema=function(p,f){if(p){var m;try{this.options.ajv?m=this.options.ajv:((m=y({allErrors:!0,verbose:!0,schemaId:"auto",$data:!0})).addMetaSchema(ae(7171)),m.addMetaSchema(ae(6273)))}catch{console.warn("Failed to create an instance of Ajv, JSON Schema validation is not available. Please use a JSONEditor bundle including Ajv, or pass an instance of Ajv as via the configuration option `ajv`.")}if(m){if(f){for(var h in f)m.removeSchema(h),f[h]&&m.addSchema(f[h],h);this.options.schemaRefs=f}this.validateSchema=m.compile(p),this.options.schema=p,this.options.schemaRefs=f,this.validate()}}else this.validateSchema=null,this.options.schema=null,this.options.schemaRefs=null,this.validate();this.refresh(),"function"==typeof this._onSchemaChange&&this._onSchemaChange(p,f)},w.prototype.validate=function(){},w.prototype.refresh=function(){},(w.registerMode=function(p){var f;if(Array.isArray(p))for(v=0;v<p.length;v++)w.registerMode(p[v]);else{if(!("mode"in p))throw new Error('Property "mode" missing');if(!("mixin"in p))throw new Error('Property "mixin" missing');if(!("data"in p))throw new Error('Property "data" missing');var m=p.mode;if(m in w.modes)throw new Error('Mode "'+m+'" already registered');if("function"!=typeof p.mixin.create)throw new Error('Required function "create" missing on mixin');for(var h=["setMode","registerMode","modes"],v=0;v<h.length;v++)if((f=h[v])in p.mixin)throw new Error('Reserved property "'+f+'" not allowed in mixin');w.modes[m]=p}})(K),w.registerMode(U),w.registerMode(Z),w.ace=ce,w.Ajv=y,w.VanillaPicker=c,w.showTransformModal=R,w.showSortModal=S,w.getInnerText=F,Ce.exports=w.default=w},6617:function(Ce,P,ae){"use strict";ae.d(P,{x:function(){return Z}});var ce=ae(897),c=ae(7907);function K(Y){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(H){return typeof H}:function(H){return H&&"function"==typeof Symbol&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H})(Y)}function U(Y,H){for(var F=0;F<H.length;F++){var k=H[F];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(Y,(_=function(M,R){if("object"!==K(M)||null===M)return M;var S=M[Symbol.toPrimitive];if(void 0===S)return String(M);if("object"!==K(S=S.call(M,"string")))return S;throw new TypeError("@@toPrimitive must return a primitive value.")}(_=k.key),"symbol"===K(_)?_:String(_)),k)}var _}var Z=function(){function Y(_,M,R,S){if(!(this instanceof Y))throw new TypeError("Cannot call a class as a function");for(var y={code:{text:(0,c.Iu)("modeCodeText"),title:(0,c.Iu)("modeCodeTitle"),click:function(){S("code")}},form:{text:(0,c.Iu)("modeFormText"),title:(0,c.Iu)("modeFormTitle"),click:function(){S("form")}},text:{text:(0,c.Iu)("modeTextText"),title:(0,c.Iu)("modeTextTitle"),click:function(){S("text")}},tree:{text:(0,c.Iu)("modeTreeText"),title:(0,c.Iu)("modeTreeTitle"),click:function(){S("tree")}},view:{text:(0,c.Iu)("modeViewText"),title:(0,c.Iu)("modeViewTitle"),click:function(){S("view")}},preview:{text:(0,c.Iu)("modePreviewText"),title:(0,c.Iu)("modePreviewTitle"),click:function(){S("preview")}}},w=[],p=0;p<M.length;p++){var f=M[p],m=y[f];if(!m)throw new Error('Unknown mode "'+f+'"');m.className="jsoneditor-type-modes"+(R===f?" jsoneditor-selected":""),w.push(m)}if(!(v=y[R]))throw new Error('Unknown mode "'+R+'"');var v=v.text,h=document.createElement("button");(h.type="button",h.className="jsoneditor-modes jsoneditor-separator",h.textContent=v+" \u25be",h.title=(0,c.Iu)("modeEditorTitle"),h.onclick=function(){new ce.x(w).show(h,_)},v=document.createElement("div")).className="jsoneditor-modes",v.style.position="relative",v.appendChild(h),_.appendChild(v),this.dom={container:_,box:h,frame:v}}var H,F;return H=Y,(F=[{key:"focus",value:function(){this.dom.box.focus()}},{key:"destroy",value:function(){this.dom&&this.dom.frame&&this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom=null}}])&&U(H.prototype,F),Object.defineProperty(H,"prototype",{writable:!1}),Y}()},8170:function(Ce,P,ae){var ce;if(window.ace)ce=window.ace;else try{ce=ae(6225),ae(4091),ae(3330),ae(4317);var c=ae(7923);ce.config.setModuleUrl("ace/mode/json_worker",c)}catch{}Ce.exports=ce},4864:function(){window.ace.define("ace/theme/jsoneditor",["require","exports","module","ace/lib/dom"],function(Ce,P,ae){P.isDark=!1,P.cssClass="ace-jsoneditor",P.cssText='.ace-jsoneditor .ace_gutter {\nbackground: #ebebeb;\ncolor: #333\n}\n\n.ace-jsoneditor.ace_editor {\nline-height: 1.3;\nbackground-color: #fff;\n}\n.ace-jsoneditor .ace_print-margin {\nwidth: 1px;\nbackground: #e8e8e8\n}\n.ace-jsoneditor .ace_scroller {\nbackground-color: #FFFFFF\n}\n.ace-jsoneditor .ace_text-layer {\ncolor: gray\n}\n.ace-jsoneditor .ace_variable {\ncolor: #1a1a1a\n}\n.ace-jsoneditor .ace_cursor {\nborder-left: 2px solid #000000\n}\n.ace-jsoneditor .ace_overwrite-cursors .ace_cursor {\nborder-left: 0px;\nborder-bottom: 1px solid #000000\n}\n.ace-jsoneditor .ace_marker-layer .ace_selection {\nbackground: lightgray\n}\n.ace-jsoneditor.ace_multiselect .ace_selection.ace_start {\nbox-shadow: 0 0 3px 0px #FFFFFF;\nborder-radius: 2px\n}\n.ace-jsoneditor .ace_marker-layer .ace_step {\nbackground: rgb(255, 255, 0)\n}\n.ace-jsoneditor .ace_marker-layer .ace_bracket {\nmargin: -1px 0 0 -1px;\nborder: 1px solid #BFBFBF\n}\n.ace-jsoneditor .ace_marker-layer .ace_active-line {\nbackground: #FFFBD1\n}\n.ace-jsoneditor .ace_gutter-active-line {\nbackground-color : #dcdcdc\n}\n.ace-jsoneditor .ace_marker-layer .ace_selected-word {\nborder: 1px solid lightgray\n}\n.ace-jsoneditor .ace_invisible {\ncolor: #BFBFBF\n}\n.ace-jsoneditor .ace_keyword,\n.ace-jsoneditor .ace_meta,\n.ace-jsoneditor .ace_support.ace_constant.ace_property-value {\ncolor: #AF956F\n}\n.ace-jsoneditor .ace_keyword.ace_operator {\ncolor: #484848\n}\n.ace-jsoneditor .ace_keyword.ace_other.ace_unit {\ncolor: #96DC5F\n}\n.ace-jsoneditor .ace_constant.ace_language {\ncolor: darkorange\n}\n.ace-jsoneditor .ace_constant.ace_numeric {\ncolor: red\n}\n.ace-jsoneditor .ace_constant.ace_character.ace_entity {\ncolor: #BF78CC\n}\n.ace-jsoneditor .ace_invalid {\ncolor: #FFFFFF;\nbackground-color: #FF002A;\n}\n.ace-jsoneditor .ace_fold {\nbackground-color: #AF956F;\nborder-color: #000000\n}\n.ace-jsoneditor .ace_storage,\n.ace-jsoneditor .ace_support.ace_class,\n.ace-jsoneditor .ace_support.ace_function,\n.ace-jsoneditor .ace_support.ace_other,\n.ace-jsoneditor .ace_support.ace_type {\ncolor: #C52727\n}\n.ace-jsoneditor .ace_string {\ncolor: green\n}\n.ace-jsoneditor .ace_comment {\ncolor: #BCC8BA\n}\n.ace-jsoneditor .ace_entity.ace_name.ace_tag,\n.ace-jsoneditor .ace_entity.ace_other.ace_attribute-name {\ncolor: #606060\n}\n.ace-jsoneditor .ace_markup.ace_underline {\ntext-decoration: underline\n}\n.ace-jsoneditor .ace_indent-guide {\nbackground: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y\n}',Ce("../lib/dom").importCssString(P.cssText,P.cssClass)})},6589:function(Ce,P){var ae;(ae={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(ce,c,K,U,Z,Y,H){var F=Y.length-1;switch(Z){case 1:this.$=ce.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(ce);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=Y[F-1];case 13:this.$={};break;case 14:case 19:this.$=Y[F-1];break;case 15:this.$=[Y[F-2],Y[F]];break;case 16:this.$={},this.$[Y[F][0]]=Y[F][1];break;case 17:this.$=Y[F-2],Y[F-2][Y[F][0]]=Y[F][1];break;case 18:this.$=[];break;case 20:this.$=[Y[F]];break;case 21:this.$=Y[F-2],Y[F-2].push(Y[F])}},table:[{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],defaultActions:{16:[2,6]},parseError:function(ce,c){throw new Error(ce)},parse:function(ce){var c=this,K=[0],U=[null],Z=[],Y=this.table,H="",F=0,k=0,_=0,M=(this.lexer.setInput(ce),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,void 0===this.lexer.yylloc&&(this.lexer.yylloc={}),this.lexer.yylloc);function R(){var L=c.lexer.lex()||1;return"number"!=typeof L&&c.symbols_[L]||L}Z.push(M),"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var S,y,w,p,f,m,h,v,C={};;){if(void 0===(p=this.defaultActions[w=K[K.length-1]]||(null==S&&(S=R()),Y[w]&&Y[w][S]))||!p.length||!p[0]){if(!_){for(f in v=[],Y[w])this.terminals_[f]&&2<f&&v.push("'"+this.terminals_[f]+"'");var x="";x=this.lexer.showPosition?"Parse error on line "+(F+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+this.terminals_[S]+"'":"Parse error on line "+(F+1)+": Unexpected "+(1==S?"end of input":"'"+(this.terminals_[S]||S)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[S]||S,line:this.lexer.yylineno,loc:M,expected:v})}if(3==_){if(1==S)throw new Error(x||"Parsing halted.");k=this.lexer.yyleng,H=this.lexer.yytext,F=this.lexer.yylineno,M=this.lexer.yylloc,S=R()}for(;!(2..toString()in Y[w]);){if(0==w)throw new Error(x||"Parsing halted.");K.length=K.length-2*1,U.length=U.length-1,Z.length=Z.length-1,w=K[K.length-1]}y=S,S=2,p=Y[w=K[K.length-1]]&&Y[w][2],_=3}if(p[0]instanceof Array&&1<p.length)throw new Error("Parse Error: multiple actions possible at state: "+w+", token: "+S);switch(p[0]){case 1:K.push(S),U.push(this.lexer.yytext),Z.push(this.lexer.yylloc),K.push(p[1]),S=null,y?(S=y,y=null):(k=this.lexer.yyleng,H=this.lexer.yytext,F=this.lexer.yylineno,M=this.lexer.yylloc,0<_&&_--);break;case 2:if(C.$=U[U.length-(m=this.productions_[p[1]][1])],C._$={first_line:Z[Z.length-(m||1)].first_line,last_line:Z[Z.length-1].last_line,first_column:Z[Z.length-(m||1)].first_column,last_column:Z[Z.length-1].last_column},void 0!==(h=this.performAction.call(C,H,k,F,this.yy,p[1],U,Z)))return h;m&&(K=K.slice(0,-1*m*2),U=U.slice(0,-1*m),Z=Z.slice(0,-1*m)),K.push(this.productions_[p[1]][0]),U.push(C.$),Z.push(C._$),K.push(h=Y[K[K.length-2]][K[K.length-1]]);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(ce,c){if(!this.yy.parseError)throw new Error(ce);this.yy.parseError(ce,c)},setInput:function(ce){return this._input=ce,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var ce=this._input[0];return this.yytext+=ce,this.yyleng++,this.match+=ce,this.matched+=ce,ce.match(/\n/)&&this.yylineno++,this._input=this._input.slice(1),ce},unput:function(ce){return this._input=ce+this._input,this},more:function(){return this._more=!0,this},less:function(ce){this._input=this.match.slice(ce)+this._input},pastInput:function(){var ce=this.matched.substr(0,this.matched.length-this.match.length);return(20<ce.length?"...":"")+ce.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var ce=this.match;return ce.length<20&&(ce+=this._input.substr(0,20-ce.length)),(ce.substr(0,20)+(20<ce.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var ce=this.pastInput(),c=new Array(ce.length+1).join("-");return ce+this.upcomingInput()+"\n"+c+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var ce,c,K,U,Z=this._currentRules(),Y=0;Y<Z.length&&(!(c=this._input.match(this.rules[Z[Y]]))||ce&&!(c[0].length>ce[0].length)||(ce=c,K=Y,this.options.flex));Y++);return ce?((U=ce[0].match(/\n.*/g))&&(this.yylineno+=U.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:U?U[U.length-1].length-1:this.yylloc.last_column+ce[0].length},this.yytext+=ce[0],this.match+=ce[0],this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(ce[0].length),this.matched+=ce[0],U=this.performAction.call(this,this.yy,this,Z[K],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),U||void 0):""===this._input?this.EOF:void this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var ce=this.next();return void 0!==ce?ce:this.lex()},begin:function(ce){this.conditionStack.push(ce)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(ce){this.begin(ce)},options:{},performAction:function(ce,c,K,U){switch(K){case 0:break;case 1:return 6;case 2:return c.yytext=c.yytext.substr(1,c.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}},P.parser=ae,P.parse=ae.parse.bind(ae)},3879:function(Ce){"use strict";function P(){}P.prototype={on:function(F,k){this._events=this._events||{},this._events[F]=this._events[F]||[],this._events[F].push(k)},off:function(F,k){this._events=this._events||{},F in this._events&&this._events[F].splice(this._events[F].indexOf(k),1)},emit:function(F){if(this._events=this._events||{},F in this._events)for(var k=0;k<this._events[F].length;k++)this._events[F][k].apply(this,Array.prototype.slice.call(arguments,1))}},P.mixin=function(F){for(var k=["on","off","emit"],_=0;_<k.length;_++)"function"==typeof F?F.prototype[k[_]]=P.prototype[k[_]]:F[k[_]]=P.prototype[k[_]];return F};var ae={escapeRegExp:function(F){var k=/[\\^$.*+?()[\]{}|]/g,_=new RegExp(k.source);return F&&_.test(F)?F.replace(k,"\\$&"):F},extend:function(F,k){for(var _ in k){var M;k.hasOwnProperty(_)&&((M=k[_])&&"[object Object]"===Object.prototype.toString.call(M)?(F[_]=F[_]||{},ae.extend(F[_],M)):F[_]=M)}return F},each:function(F,k,_){if("[object Object]"===Object.prototype.toString.call(F))for(var M in F)Object.prototype.hasOwnProperty.call(F,M)&&k.call(_,M,F[M],F);else for(var R=0,S=F.length;R<S;R++)k.call(_,R,F[R],F)},createElement:function(F,k){var _,M=document.createElement(F);if(k&&"[object Object]"===Object.prototype.toString.call(k))for(_ in k)_ in M?M[_]=k[_]:"html"===_?M.innerHTML=k[_]:M.setAttribute(_,k[_]);return M},hasClass:function(F,k){if(F)return F.classList?F.classList.contains(k):!!F.className&&!!F.className.match(new RegExp("(\\s|^)"+k+"(\\s|$)"))},addClass:function(F,k){ae.hasClass(F,k)||(F.classList?F.classList.add(k):F.className=F.className.trim()+" "+k)},removeClass:function(F,k){ae.hasClass(F,k)&&(F.classList?F.classList.remove(k):F.className=F.className.replace(new RegExp("(^|\\s)"+k.split(" ").join("|")+"(\\s|$)","gi")," "))},closest:function(F,k){return F&&F!==document.body&&(k(F)?F:ae.closest(F.parentNode,k))},isInt:function(F){return"number"==typeof F&&isFinite(F)&&Math.floor(F)===F},debounce:function(F,k,_){var M;return function(){var R=this,S=arguments,y=_&&!M;clearTimeout(M),M=setTimeout(function(){M=null,_||F.apply(R,S)},k),y&&F.apply(R,S)}},rect:function(M,S){var _=window,R=(M=M.getBoundingClientRect(),S?_.pageXOffset:0);return{bottom:M.bottom+(S=S?_.pageYOffset:0),height:M.height,left:M.left+R,right:M.right+R,top:M.top+S,width:M.width}},includes:function(F,k){return-1<F.indexOf(k)},startsWith:function(F,k){return F.substr(0,k.length)===k},truncate:function(F){for(;F.firstChild;)F.removeChild(F.firstChild)}};function ce(F,k){return F.hasOwnProperty(k)&&(!0===F[k]||F[k].length)}function c(F,k,_){F.parentNode?F.parentNode.parentNode||k.appendChild(F.parentNode):k.appendChild(F),ae.removeClass(F,"excluded"),_||(F.textContent=F.textContent)}function K(){var F,k;this.items.length&&(F=document.createDocumentFragment(),this.config.pagination?(k=this.pages.slice(0,this.pageIndex),ae.each(k,function(_,M){ae.each(M,function(R,S){c(S,F,this.customOption)},this)},this)):ae.each(this.items,function(_,M){c(M,F,this.customOption)},this),F.childElementCount&&(ae.removeClass(this.items[this.navIndex],"active"),this.navIndex=(F.querySelector(".selectr-option.selected")||F.querySelector(".selectr-option")).idx,ae.addClass(this.items[this.navIndex],"active")),this.tree.appendChild(F))}function U(F,k){k=k||F;var _={class:"selectr-option",role:"treeitem","aria-selected":!1};return this.customOption?_.html=this.config.renderOption(k):_.textContent=F.textContent,(k=ae.createElement("li",_)).idx=F.idx,this.items.push(k),F.defaultSelected&&this.defaultSelected.push(F.idx),F.disabled&&(k.disabled=!0,ae.addClass(k,"disabled")),k}function Z(){var F,k=this.tree;k.scrollHeight-k.offsetHeight<=k.scrollTop&&this.pageIndex<this.pages.length&&(F=document.createDocumentFragment(),ae.each(this.pages[this.pageIndex],function(M,R){c(R,F,this.customOption)},this),k.appendChild(F),this.pageIndex++,this.emit("selectr.paginate",{items:this.items.length,total:this.data.length,page:this.pageIndex,pages:this.pages.length}))}function Y(){(this.config.searchable||this.config.taggable)&&(this.input.value=null,this.searching=!1,this.config.searchable&&ae.removeClass(this.inputContainer,"active"),ae.hasClass(this.container,"notice")&&(ae.removeClass(this.container,"notice"),ae.addClass(this.container,"open"),this.input.focus()),ae.each(this.items,function(F,k){ae.removeClass(k,"excluded"),this.customOption||(k.textContent=k.textContent)},this))}function H(F,k){if(!F)throw new Error("You must supply either a HTMLSelectElement or a CSS3 selector string.");if("string"==typeof(this.el=F)&&(this.el=document.querySelector(F)),null===this.el)throw new Error("The element you passed to Selectr can not be found.");if("select"!==this.el.nodeName.toLowerCase())throw new Error("The element you passed to Selectr is not a HTMLSelectElement.");this.render(k)}H.prototype.render=function(F){var k;this.rendered||((this.el.selectr=this).config=ae.extend({defaultSelected:!0,width:"auto",disabled:!1,disabledMobile:!1,searchable:!0,clearable:!1,sortSelected:!1,allowDeselect:!1,closeOnScroll:!1,nativeDropdown:!1,nativeKeyboard:!1,placeholder:"Select an option...",taggable:!1,tagPlaceholder:"Enter a tag...",messages:{noResults:"No results.",noOptions:"No options available.",maxSelections:"A maximum of {max} items can be selected.",tagDuplicate:"That tag is already in use.",searchPlaceholder:"Search options..."}},F),this.originalType=this.el.type,this.originalIndex=this.el.tabIndex,this.defaultSelected=[],this.originalOptionCount=this.el.options.length,(this.config.multiple||this.config.taggable)&&(this.el.multiple=!0),this.disabled=ce(this.config,"disabled"),this.opened=!1,this.config.taggable&&(this.config.searchable=!1),this.navigating=!1,this.mobileDevice=!1,!this.config.disabledMobile&&/Android|webOS|iPhone|iPad|BlackBerry|Windows Phone|Opera Mini|IEMobile|Mobile/i.test(navigator.userAgent)&&(this.mobileDevice=!0),this.customOption=this.config.hasOwnProperty("renderOption")&&"function"==typeof this.config.renderOption,this.customSelected=this.config.hasOwnProperty("renderSelection")&&"function"==typeof this.config.renderSelection,this.supportsEventPassiveOption=this.detectEventPassiveOption(),P.mixin(this),function(){this.requiresPagination=this.config.pagination&&0<this.config.pagination,ce(this.config,"width")&&(ae.isInt(this.config.width)?this.width=this.config.width+"px":"auto"===this.config.width?this.width="100%":ae.includes(this.config.width,"%")&&(this.width=this.config.width)),this.container=ae.createElement("div",{class:"selectr-container"}),this.config.customClass&&ae.addClass(this.container,this.config.customClass),ae.addClass(this.container,this.mobileDevice?"selectr-mobile":"selectr-desktop"),this.el.tabIndex=-1,ae.addClass(this.el,this.config.nativeDropdown||this.mobileDevice?"selectr-visible":"selectr-hidden"),this.selected=ae.createElement("div",{class:"selectr-selected",disabled:this.disabled,tabIndex:0,"aria-expanded":!1}),this.label=ae.createElement(this.el.multiple?"ul":"span",{class:"selectr-label"});var _=ae.createElement("div",{class:"selectr-options-container"});if(this.tree=ae.createElement("ul",{class:"selectr-options",role:"tree","aria-hidden":!0,"aria-expanded":!1}),this.notice=ae.createElement("div",{class:"selectr-notice"}),this.el.setAttribute("aria-hidden",!0),this.disabled&&(this.el.disabled=!0),this.el.multiple?(ae.addClass(this.label,"selectr-tags"),ae.addClass(this.container,"multiple"),this.tags=[],this.selectedValues=this.config.defaultSelected?this.getSelectedProperties("value"):[],this.selectedIndexes=this.getSelectedProperties("idx")):(this.selectedValue=null,this.selectedIndex=-1),this.selected.appendChild(this.label),this.config.clearable&&(this.selectClear=ae.createElement("button",{class:"selectr-clear",type:"button"}),this.container.appendChild(this.selectClear),ae.addClass(this.container,"clearable")),this.config.taggable){var M=ae.createElement("li",{class:"input-tag"});if(this.input=ae.createElement("input",{class:"selectr-tag-input",placeholder:this.config.tagPlaceholder,tagIndex:0,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",role:"textbox",type:"search"}),M.appendChild(this.input),this.label.appendChild(M),ae.addClass(this.container,"taggable"),this.tagSeperators=[","],this.config.tagSeperators){this.tagSeperators=this.tagSeperators.concat(this.config.tagSeperators);for(var R=[],S=0;S<this.tagSeperators.length;S++)R.push(ae.escapeRegExp(this.tagSeperators[S]));this.tagSeperatorsRegex=new RegExp(R.join("|"),"i")}else this.tagSeperatorsRegex=new RegExp(",","i")}this.config.searchable&&(this.input=ae.createElement("input",{class:"selectr-input",tagIndex:-1,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",role:"textbox",type:"search",placeholder:this.config.messages.searchPlaceholder}),this.inputClear=ae.createElement("button",{class:"selectr-input-clear",type:"button"}),this.inputContainer=ae.createElement("div",{class:"selectr-input-container"}),this.inputContainer.appendChild(this.input),this.inputContainer.appendChild(this.inputClear),_.appendChild(this.inputContainer)),_.appendChild(this.notice),_.appendChild(this.tree),this.items=[],this.options=[],this.el.options.length&&(this.options=[].slice.call(this.el.options));var y,w,p,f=!1,m=0;this.el.children.length&&ae.each(this.el.children,function(v,O){"OPTGROUP"===O.nodeName?(f=ae.createElement("ul",{class:"selectr-optgroup",role:"group",html:"<li class='selectr-optgroup--label'>"+O.label+"</li>"}),ae.each(O.children,function(C,x){x.idx=m,f.appendChild(U.call(this,x,f)),m++},this)):(O.idx=m,U.call(this,O),m++)},this),this.config.data&&Array.isArray(this.config.data)&&(y=!(this.data=[]),f=!1,m=0,ae.each(this.config.data,function(v,O){ce(O,"children")?(y=ae.createElement("optgroup",{label:O.text}),f=ae.createElement("ul",{class:"selectr-optgroup",role:"group",html:"<li class='selectr-optgroup--label'>"+O.text+"</li>"}),ae.each(O.children,function(C,x){(w=new Option(x.text,x.value,!1,x.hasOwnProperty("selected")&&!0===x.selected)).disabled=ce(x,"disabled"),this.options.push(w),y.appendChild(w),w.idx=m,f.appendChild(U.call(this,w,x)),this.data[m]=x,m++},this),this.el.appendChild(y)):((w=new Option(O.text,O.value,!1,O.hasOwnProperty("selected")&&!0===O.selected)).disabled=ce(O,"disabled"),this.options.push(w),w.idx=m,U.call(this,w,O),this.data[m]=O,m++)},this)),this.setSelected(!0);for(var h=this.navIndex=0;h<this.items.length;h++)if(!ae.hasClass(p=this.items[h],"disabled")){ae.addClass(p,"active"),this.navIndex=h;break}this.requiresPagination&&(this.pageIndex=1,this.paginate()),this.container.appendChild(this.selected),this.container.appendChild(_),this.placeEl=ae.createElement("div",{class:"selectr-placeholder"}),this.setPlaceholder(),this.selected.appendChild(this.placeEl),this.disabled&&this.disable(),this.el.parentNode.insertBefore(this.container,this.el),this.container.appendChild(this.el)}.call(this),this.bindEvents(),this.update(),this.optsRect=ae.rect(this.tree),this.rendered=!0,this.el.multiple||(this.el.selectedIndex=this.selectedIndex),k=this,setTimeout(function(){k.emit("selectr.init")},20))},H.prototype.getSelected=function(){return this.el.querySelectorAll("option:checked")},H.prototype.getSelectedProperties=function(F){var k=this.getSelected();return[].slice.call(k).map(function(_){return _[F]}).filter(function(_){return null!=_})},H.prototype.detectEventPassiveOption=function(){var F=!1;try{var k=Object.defineProperty({},"passive",{get:function(){F=!0}});window.addEventListener("test",null,k)}catch{}return F},H.prototype.bindEvents=function(){var F,k=this;this.events={},this.events.dismiss=function(_){this.container.contains(_=_.target)||!this.opened&&!ae.hasClass(this.container,"notice")||this.close()}.bind(this),this.events.navigate=function(_){if(_=_||window.event,this.items.length&&this.opened&&ae.includes([13,38,40],_.which)){if(_.preventDefault(),13===_.which)return!(this.noResults||this.config.taggable&&0<this.input.value.length)&&this.change(this.navIndex);var M,R=this.items[this.navIndex],S=this.navIndex;switch(_.which){case 38:(M=0)<this.navIndex&&this.navIndex--;break;case 40:this.navIndex<this.items.length-(M=1)&&this.navIndex++}for(this.navigating=!0;ae.hasClass(this.items[this.navIndex],"disabled")||ae.hasClass(this.items[this.navIndex],"excluded");){if(!(0<this.navIndex&&this.navIndex<this.items.length-1)){this.navIndex=S;break}if(M?this.navIndex++:this.navIndex--,this.searching){if(this.navIndex>this.tree.lastElementChild.idx){this.navIndex=this.tree.lastElementChild.idx;break}if(this.navIndex<this.tree.firstElementChild.idx){this.navIndex=this.tree.firstElementChild.idx;break}}}_=ae.rect(this.items[this.navIndex]),M?(0===this.navIndex?this.tree.scrollTop=0:_.top+_.height>this.optsRect.top+this.optsRect.height&&(this.tree.scrollTop=this.tree.scrollTop+(_.top+_.height-(this.optsRect.top+this.optsRect.height))),this.navIndex===this.tree.childElementCount-1&&this.requiresPagination&&Z.call(this)):0===this.navIndex?this.tree.scrollTop=0:_.top-this.optsRect.top<0&&(this.tree.scrollTop=this.tree.scrollTop+(_.top-this.optsRect.top)),R&&ae.removeClass(R,"active"),ae.addClass(this.items[this.navIndex],"active")}else this.navigating=!1}.bind(this),this.events.reset=this.reset.bind(this),(this.config.nativeDropdown||this.mobileDevice)&&(this.container.addEventListener("touchstart",function(_){_.changedTouches[0].target===k.el&&k.toggle()},!!this.supportsEventPassiveOption&&{passive:!0}),this.container.addEventListener("click",function(_){_.target===k.el&&k.toggle()}),this.el.addEventListener("change",function(_){_.__selfTriggered||(k.el.multiple?(_=k.getSelectedProperties("idx"),_=function(M,R){for(var S,y=[],w=M.slice(0),p=0;p<R.length;p++)-1<(S=w.indexOf(R[p]))?w.splice(S,1):y.push(R[p]);return[y,w]}(k.selectedIndexes,_),ae.each(_[0],function(M,R){k.select(R)},k),ae.each(_[1],function(M,R){k.deselect(R)},k)):-1<k.el.selectedIndex&&k.select(k.el.selectedIndex))})),this.config.nativeDropdown&&this.container.addEventListener("keydown",function(_){"Enter"===_.key&&k.selected===document.activeElement&&(k.toggle(),setTimeout(function(){k.el.focus()},200))}),this.selected.addEventListener("click",function(_){k.disabled||k.toggle(),_.preventDefault()}),this.config.nativeKeyboard&&(F="",this.selected.addEventListener("keydown",function(_){var M;k.disabled||k.selected!==document.activeElement||_.altKey||_.ctrlKey||_.metaKey||(" "===_.key||!k.opened&&-1<["Enter","ArrowUp","ArrowDown"].indexOf(_.key)?(k.toggle(),_.preventDefault(),_.stopPropagation()):_.key.length<=2&&String[String.fromCodePoint?"fromCodePoint":"fromCharCode"](_.key[String.codePointAt?"codePointAt":"charCodeAt"](0))===_.key&&(k.config.multiple?(k.open(),k.config.searchable&&(k.input.value=_.key,k.input.focus(),k.search(null,!0))):((M=k.search(F+=_.key,!0))&&M.length&&(k.clear(),k.setValue(M[0].value)),setTimeout(function(){F=""},1e3)),_.preventDefault(),_.stopPropagation()))}),this.container.addEventListener("keyup",function(_){k.opened&&"Escape"===_.key&&(k.close(),_.stopPropagation(),k.selected.focus())})),this.label.addEventListener("click",function(_){ae.hasClass(_.target,"selectr-tag-remove")&&k.deselect(_.target.parentNode.idx)}),this.selectClear&&this.selectClear.addEventListener("click",this.clear.bind(this)),this.tree.addEventListener("mousedown",function(_){_.preventDefault()}),this.tree.addEventListener("click",function(_){var M=ae.closest(_.target,function(R){return R&&ae.hasClass(R,"selectr-option")});M&&!ae.hasClass(M,"disabled")&&(ae.hasClass(M,"selected")?(k.el.multiple||!k.el.multiple&&k.config.allowDeselect)&&k.deselect(M.idx):k.select(M.idx),k.opened&&!k.el.multiple)&&k.close(),_.preventDefault(),_.stopPropagation()}),this.tree.addEventListener("mouseover",function(_){!ae.hasClass(_.target,"selectr-option")||ae.hasClass(_.target,"disabled")||(ae.removeClass(k.items[k.navIndex],"active"),ae.addClass(_.target,"active"),k.navIndex=[].slice.call(k.items).indexOf(_.target))}),this.config.searchable&&(this.input.addEventListener("focus",function(_){k.searching=!0}),this.input.addEventListener("blur",function(_){k.searching=!1}),this.input.addEventListener("keyup",function(_){k.search(),k.config.taggable||(this.value.length?ae.addClass(this.parentNode,"active"):ae.removeClass(this.parentNode,"active"))}),this.inputClear.addEventListener("click",function(_){k.input.value=null,Y.call(k),k.tree.childElementCount||K.call(k)})),this.config.taggable&&this.input.addEventListener("keyup",function(_){var M,R;k.search(),k.config.taggable&&this.value.length&&(M=this.value.trim()).length&&(13===_.which||k.tagSeperatorsRegex.test(M))&&(_=M.replace(k.tagSeperatorsRegex,""),(R=(_=(_=ae.escapeRegExp(_)).trim()).length?k.add({value:_,textContent:_,selected:!0},!0):R)?(k.close(),Y.call(k)):(this.value="",k.setMessage(k.config.messages.tagDuplicate)))}),this.update=ae.debounce(function(){k.opened&&k.config.closeOnScroll&&k.close(),k.width&&(k.container.style.width=k.width),k.invert()},50),this.requiresPagination&&(this.paginateItems=ae.debounce(function(){Z.call(this)},50),this.tree.addEventListener("scroll",this.paginateItems.bind(this))),document.addEventListener("click",this.events.dismiss),window.addEventListener("keydown",this.events.navigate),window.addEventListener("resize",this.update),window.addEventListener("scroll",this.update),this.on("selectr.destroy",function(){document.removeEventListener("click",this.events.dismiss),window.removeEventListener("keydown",this.events.navigate),window.removeEventListener("resize",this.update),window.removeEventListener("scroll",this.update)}),this.el.form&&(this.el.form.addEventListener("reset",this.events.reset),this.on("selectr.destroy",function(){this.el.form.removeEventListener("reset",this.events.reset)}))},H.prototype.setSelected=function(F){var k;this.config.data||this.el.multiple||!this.el.options.length||(0!==this.el.selectedIndex||this.el.options[0].defaultSelected||this.config.defaultSelected||(this.el.selectedIndex=-1),this.selectedIndex=this.el.selectedIndex,-1<this.selectedIndex&&this.select(this.selectedIndex)),this.config.multiple&&"select-one"===this.originalType&&!this.config.data&&this.el.options[0].selected&&!this.el.options[0].defaultSelected&&(this.el.options[0].selected=!1),ae.each(this.options,function(_,M){M.selected&&M.defaultSelected&&this.select(M.idx)},this),this.config.selectedValue&&this.setValue(this.config.selectedValue),this.config.data&&(!this.el.multiple&&this.config.defaultSelected&&this.el.selectedIndex<0&&0<this.config.data.length&&this.select(0),k=0,ae.each(this.config.data,function(_,M){ce(M,"children")?ae.each(M.children,function(R,S){S.hasOwnProperty("selected")&&!0===S.selected&&this.select(k),k++},this):(M.hasOwnProperty("selected")&&!0===M.selected&&this.select(k),k++)},this))},H.prototype.destroy=function(){this.rendered&&(this.emit("selectr.destroy"),"select-one"===this.originalType&&(this.el.multiple=!1),this.config.data&&(this.el.innerHTML=""),ae.removeClass(this.el,"selectr-hidden"),this.container.parentNode.replaceChild(this.el,this.container),this.rendered=!1,delete this.el.selectr)},H.prototype.change=function(F){var _=this.options[F];_.disabled||(_.selected&&ae.hasClass(this.items[F],"selected")?this.deselect(F):this.select(F),this.opened&&!this.el.multiple&&this.close())},H.prototype.select=function(F){var k=this.items[F],_=[].slice.call(this.el.options),M=this.options[F];if(this.el.multiple){if(ae.includes(this.selectedIndexes,F))return!1;if(this.config.maxSelections&&this.tags.length===this.config.maxSelections)return this.setMessage(this.config.messages.maxSelections.replace("{max}",this.config.maxSelections),!0),!1;this.selectedValues.push(M.value),this.selectedIndexes.push(F),function(S){var y,w=this,p=document.createDocumentFragment(),f=this.options[S.idx],m=this.data?this.data[S.idx]:f,h={class:"selectr-tag"};this.customSelected?h.html=this.config.renderSelection(m):h.textContent=f.textContent,m=ae.createElement("li",h),h=ae.createElement("button",{class:"selectr-tag-remove",type:"button"}),m.appendChild(h),m.idx=S.idx,m.tag=f.value,this.tags.push(m),this.config.sortSelected?(h=this.tags.slice(),y=function(v,O){v.replace(/(\d+)|(\D+)/g,function(C,x,L){O.push([x||1/0,L||""])})},h.sort(function(v,O){var C,x,L=[],Q=[];for(!0===w.config.sortSelected?(C=v.tag,x=O.tag):"text"===w.config.sortSelected&&(C=v.textContent,x=O.textContent),y(C,L),y(x,Q);L.length&&Q.length;){var T=L.shift(),G=Q.shift();if(T=T[0]-G[0]||T[1].localeCompare(G[1]))return T}return L.length-Q.length}),ae.each(h,function(v,O){p.appendChild(O)}),this.label.innerHTML=""):p.appendChild(m),this.config.taggable?this.label.insertBefore(p,this.input.parentNode):this.label.appendChild(p)}.call(this,k)}else{var R=this.data?this.data[F]:M;this.customSelected?this.label.innerHTML=this.config.renderSelection(R):this.label.textContent=M.textContent,this.selectedValue=M.value,this.selectedIndex=F,ae.each(this.options,function(S,y){var w=this.items[S];S!==F&&(w&&ae.removeClass(w,"selected"),y.selected=!1,y.removeAttribute("selected"))},this)}ae.includes(_,M)||this.el.add(M),k.setAttribute("aria-selected",!0),ae.addClass(k,"selected"),ae.addClass(this.container,"has-selected"),M.selected=!0,M.setAttribute("selected",""),this.emit("selectr.change",M),this.emit("selectr.select",M),"createEvent"in document?((R=document.createEvent("HTMLEvents")).initEvent("change",!0,!0),R.__selfTriggered=!0,this.el.dispatchEvent(R)):this.el.fireEvent("onchange")},H.prototype.deselect=function(F,k){var _=this.items[F],M=this.options[F];if(this.el.multiple){var R=this.selectedIndexes.indexOf(F);this.selectedIndexes.splice(R,1),R=this.selectedValues.indexOf(M.value),this.selectedValues.splice(R,1),function(S){var y=!1;ae.each(this.tags,function(w,p){p.idx===S.idx&&(y=p)},this),y&&(this.label.removeChild(y),this.tags.splice(this.tags.indexOf(y),1))}.call(this,_),this.tags.length||ae.removeClass(this.container,"has-selected")}else{if(!k&&!this.config.clearable&&!this.config.allowDeselect)return!1;this.label.innerHTML="",this.selectedValue=null,this.el.selectedIndex=this.selectedIndex=-1,ae.removeClass(this.container,"has-selected")}this.items[F].setAttribute("aria-selected",!1),ae.removeClass(this.items[F],"selected"),M.selected=!1,M.removeAttribute("selected"),this.emit("selectr.change",null),this.emit("selectr.deselect",M),"createEvent"in document?((R=document.createEvent("HTMLEvents")).initEvent("change",!0,!0),R.__selfTriggered=!0,this.el.dispatchEvent(R)):this.el.fireEvent("onchange")},H.prototype.setValue=function(F){var k=Array.isArray(F);if(k||(F=F.toString().trim()),!this.el.multiple&&k)return!1;ae.each(this.options,function(_,M){(k&&-1<F.indexOf(M.value)||M.value===F)&&this.change(M.idx)},this)},H.prototype.getValue=function(F,k){var _,M;return this.el.multiple?F?this.selectedIndexes.length&&(M={values:[]},ae.each(this.selectedIndexes,function(R,S){M.values[R]={value:(S=this.options[S]).value,text:S.textContent}},this)):M=this.selectedValues.slice():M=F?{value:(_=this.options[this.selectedIndex]).value,text:_.textContent}:this.selectedValue,M=F&&k?JSON.stringify(M):M},H.prototype.add=function(F,k){if(F){if(this.data=this.data||[],this.items=this.items||[],this.options=this.options||[],Array.isArray(F))ae.each(F,function(R,S){this.add(S,k)},this);else if("[object Object]"===Object.prototype.toString.call(F)){if(k){var _=!1;if(ae.each(this.options,function(R,S){S.value.toLowerCase()===F.value.toLowerCase()&&(_=!0)}),_)return!1}var M=ae.createElement("option",F);return this.data.push(F),this.mobileDevice&&this.el.add(M),this.options.push(M),M.idx=0<this.options.length?this.options.length-1:0,U.call(this,M),F.selected&&this.select(M.idx),this.setPlaceholder(),M}return this.config.pagination&&this.paginate(),!0}},H.prototype.remove=function(F){var k,_=[];Array.isArray(F)?ae.each(F,function(M,R){ae.isInt(R)?_.push(this.getOptionByIndex(R)):"string"==typeof R&&_.push(this.getOptionByValue(R))},this):ae.isInt(F)?_.push(this.getOptionByIndex(F)):"string"==typeof F&&_.push(this.getOptionByValue(F)),_.length&&(ae.each(_,function(M,R){k=R.idx,this.el.remove(R),this.options.splice(k,1),(R=this.items[k].parentNode)&&R.removeChild(this.items[k]),this.items.splice(k,1),ae.each(this.options,function(S,y){y.idx=S,this.items[S].idx=S},this)},this),this.setPlaceholder(),this.config.pagination)&&this.paginate()},H.prototype.removeAll=function(){this.clear(!0),ae.each(this.el.options,function(F,k){this.el.remove(k)},this),ae.truncate(this.tree),this.items=[],this.options=[],this.data=[],this.navIndex=0,this.requiresPagination&&(this.requiresPagination=!1,this.pageIndex=1,this.pages=[]),this.setPlaceholder()},H.prototype.search=function(F,k){var _,M,R,S,y;if(!this.navigating)return _=!1,F||(F=this.input.value,_=!0,this.removeMessage(),ae.truncate(this.tree)),M=[],R=document.createDocumentFragment(),0<(F=F.trim().toLowerCase()).length?(S=k?ae.startsWith:ae.includes,ae.each(this.options,function(w,p){var f,m,h,v,O=this.items[p.idx];S(p.textContent.trim().toLowerCase(),F)&&!p.disabled?(M.push({text:p.textContent,value:p.value}),_&&(c(O,R,this.customOption),ae.removeClass(O,"excluded"),!this.customOption)&&(f=F,h=p.textContent,v=(f=new RegExp(f,"ig")).exec(h))&&(p.innerHTML="",(m=document.createElement("span")).classList.add("selectr-match"),m.textContent=v[0],p.appendChild(document.createTextNode(h.substring(0,v.index))),p.appendChild(m),p.appendChild(document.createTextNode(h.substring(f.lastIndex))))):_&&ae.addClass(O,"excluded")},this),_&&(R.childElementCount?(k=this.items[this.navIndex],y=R.querySelector(".selectr-option:not(.excluded)"),this.noResults=!1,ae.removeClass(k,"active"),this.navIndex=y.idx,ae.addClass(y,"active")):this.config.taggable||(this.noResults=!0,this.setMessage(this.config.messages.noResults)),this.tree.appendChild(R))):K.call(this),M},H.prototype.toggle=function(){this.disabled||(this.opened?this.close():this.open())},H.prototype.open=function(){var F=this;if(!this.options.length)return!1;this.opened||this.emit("selectr.open"),this.opened=!0,this.mobileDevice||this.config.nativeDropdown?(ae.addClass(this.container,"native-open"),this.config.data&&ae.each(this.options,function(k,_){this.el.add(_)},this)):(ae.addClass(this.container,"open"),K.call(this),this.invert(),this.tree.scrollTop=0,ae.removeClass(this.container,"notice"),this.selected.setAttribute("aria-expanded",!0),this.tree.setAttribute("aria-hidden",!1),this.tree.setAttribute("aria-expanded",!0),this.config.searchable&&!this.config.taggable&&setTimeout(function(){F.input.focus(),F.input.tabIndex=0},10))},H.prototype.close=function(){var F;this.opened&&this.emit("selectr.close"),this.opened=!1,this.navigating=!1,this.mobileDevice||this.config.nativeDropdown?ae.removeClass(this.container,"native-open"):(F=ae.hasClass(this.container,"notice"),this.config.searchable&&!F&&(this.input.blur(),this.input.tabIndex=-1,this.searching=!1),F&&(ae.removeClass(this.container,"notice"),this.notice.textContent=""),ae.removeClass(this.container,"open"),ae.removeClass(this.container,"native-open"),this.selected.setAttribute("aria-expanded",!1),this.tree.setAttribute("aria-hidden",!0),this.tree.setAttribute("aria-expanded",!1),ae.truncate(this.tree),Y.call(this))},H.prototype.enable=function(){this.disabled=!1,this.el.disabled=!1,this.selected.tabIndex=this.originalIndex,this.el.multiple&&ae.each(this.tags,function(F,k){k.lastElementChild.tabIndex=0}),ae.removeClass(this.container,"selectr-disabled")},H.prototype.disable=function(F){F||(this.el.disabled=!0),this.selected.tabIndex=-1,this.el.multiple&&ae.each(this.tags,function(k,_){_.lastElementChild.tabIndex=-1}),this.disabled=!0,ae.addClass(this.container,"selectr-disabled")},H.prototype.reset=function(){this.disabled||(this.clear(),this.setSelected(!0),ae.each(this.defaultSelected,function(F,k){this.select(k)},this),this.emit("selectr.reset"))},H.prototype.clear=function(F,k){var _;this.el.multiple?this.selectedIndexes.length&&(_=this.selectedIndexes.slice(),k?this.deselect(_.slice(-1)[0]):ae.each(_,function(M,R){this.deselect(R)},this)):-1<this.selectedIndex&&this.deselect(this.selectedIndex,F),this.emit("selectr.clear")},H.prototype.serialise=function(F){var k=[];return ae.each(this.options,function(_,M){var R={value:M.value,text:M.textContent};M.selected&&(R.selected=!0),M.disabled&&(R.disabled=!0),k[_]=R}),F?JSON.stringify(k):k},H.prototype.serialize=function(F){return this.serialise(F)},H.prototype.setPlaceholder=function(F){F=F||this.config.placeholder||this.el.getAttribute("placeholder"),this.options.length||(F=this.config.messages.noOptions),this.placeEl.innerHTML=F},H.prototype.paginate=function(){var F;if(this.items.length)return(F=this).pages=this.items.map(function(k,_){return _%F.config.pagination==0?F.items.slice(_,_+F.config.pagination):null}).filter(function(k){return k}),this.pages},H.prototype.setMessage=function(F,k){k&&this.close(),ae.addClass(this.container,"notice"),this.notice.textContent=F},H.prototype.removeMessage=function(){ae.removeClass(this.container,"notice"),this.notice.innerHTML=""},H.prototype.invert=function(){var F=ae.rect(this.selected),_=window.innerHeight;F.top+F.height+this.tree.parentNode.offsetHeight>_?(ae.addClass(this.container,"inverted"),this.isInverted=!0):(ae.removeClass(this.container,"inverted"),this.isInverted=!1),this.optsRect=ae.rect(this.tree)},H.prototype.getOptionByIndex=function(F){return this.options[F]},H.prototype.getOptionByValue=function(F){for(var k=!1,_=0,M=this.options.length;_<M;_++)if(this.options[_].value.trim()===F.toString().trim()){k=this.options[_];break}return k},Ce.exports=H},4188:function(Ce,P,ae){"use strict";ae.d(P,{EX:function(){return c},WF:function(){return K},oW:function(){return U},qD:function(){return ce}});var ce=document.body,c=10485760,K=2e4,U=2147483648},2602:function(Ce,P,ae){"use strict";ae.d(P,{w:function(){return c}});var ce=ae(9791);function c(K,U,Z){var Y,H=3<arguments.length&&void 0!==arguments[3]&&arguments[3],F="function"==typeof(_=K).getRootNode?_.getRootNode():window,k={},_=K.getBoundingClientRect(),M=U.getBoundingClientRect(),R=document.createElement("div");function S(){if(R&&R.parentNode){for(var w in R.parentNode.removeChild(R),k)p=w,Object.prototype.hasOwnProperty.call(k,p)&&((p=k[w])&&(0,ce.removeEventListener)(F,w,p),delete k[w]);"function"==typeof Z&&Z(K)}var p}function y(w){(w=w.target)===R||(0,ce.isChildOf)(w,R)||S()}return R.className="jsoneditor-anchor",R.style.position="absolute",R.style.left=_.left-M.left+"px",R.style.top=_.top-M.top+"px",R.style.width=_.width-2+"px",R.style.height=_.height-2+"px",R.style.boxSizing="border-box",U.appendChild(R),k.mousedown=(0,ce.addEventListener)(F,"mousedown",y),k.mousewheel=(0,ce.addEventListener)(F,"mousewheel",y),H&&(Y=null,R.onmouseover=function(){clearTimeout(Y),Y=null},R.onmouseout=function(){Y=Y||setTimeout(S,200)}),R.destroy=S,R}},7923:function(Ce){Ce.exports="data:application/javascript;base64,Im5vIHVzZSBzdHJpY3QiOwohKGZ1bmN0aW9uKHdpbmRvdykgewppZiAodHlwZW9mIHdpbmRvdy53aW5kb3cgIT0gInVuZGVmaW5lZCIgJiYgd2luZG93LmRvY3VtZW50KQogICAgcmV0dXJuOwppZiAod2luZG93LnJlcXVpcmUgJiYgd2luZG93LmRlZmluZSkKICAgIHJldHVybjsKCmlmICghd2luZG93LmNvbnNvbGUpIHsKICAgIHdpbmRvdy5jb25zb2xlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgdmFyIG1zZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApOwogICAgICAgIHBvc3RNZXNzYWdlKHt0eXBlOiAibG9nIiwgZGF0YTogbXNnc30pOwogICAgfTsKICAgIHdpbmRvdy5jb25zb2xlLmVycm9yID0KICAgIHdpbmRvdy5jb25zb2xlLndhcm4gPSAKICAgIHdpbmRvdy5jb25zb2xlLmxvZyA9CiAgICB3aW5kb3cuY29uc29sZS50cmFjZSA9IHdpbmRvdy5jb25zb2xlOwp9CndpbmRvdy53aW5kb3cgPSB3aW5kb3c7CndpbmRvdy5hY2UgPSB3aW5kb3c7Cgp3aW5kb3cub25lcnJvciA9IGZ1bmN0aW9uKG1lc3NhZ2UsIGZpbGUsIGxpbmUsIGNvbCwgZXJyKSB7CiAgICBwb3N0TWVzc2FnZSh7dHlwZTogImVycm9yIiwgZGF0YTogewogICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsCiAgICAgICAgZGF0YTogZXJyICYmIGVyci5kYXRhLAogICAgICAgIGZpbGU6IGZpbGUsCiAgICAgICAgbGluZTogbGluZSwgCiAgICAgICAgY29sOiBjb2wsCiAgICAgICAgc3RhY2s6IGVyciAmJiBlcnIuc3RhY2sKICAgIH19KTsKfTsKCndpbmRvdy5ub3JtYWxpemVNb2R1bGUgPSBmdW5jdGlvbihwYXJlbnRJZCwgbW9kdWxlTmFtZSkgewogICAgLy8gbm9ybWFsaXplIHBsdWdpbiByZXF1aXJlcwogICAgaWYgKG1vZHVsZU5hbWUuaW5kZXhPZigiISIpICE9PSAtMSkgewogICAgICAgIHZhciBjaHVua3MgPSBtb2R1bGVOYW1lLnNwbGl0KCIhIik7CiAgICAgICAgcmV0dXJuIHdpbmRvdy5ub3JtYWxpemVNb2R1bGUocGFyZW50SWQsIGNodW5rc1swXSkgKyAiISIgKyB3aW5kb3cubm9ybWFsaXplTW9kdWxlKHBhcmVudElkLCBjaHVua3NbMV0pOwogICAgfQogICAgLy8gbm9ybWFsaXplIHJlbGF0aXZlIHJlcXVpcmVzCiAgICBpZiAobW9kdWxlTmFtZS5jaGFyQXQoMCkgPT0gIi4iKSB7CiAgICAgICAgdmFyIGJhc2UgPSBwYXJlbnRJZC5zcGxpdCgiLyIpLnNsaWNlKDAsIC0xKS5qb2luKCIvIik7CiAgICAgICAgbW9kdWxlTmFtZSA9IChiYXNlID8gYmFzZSArICIvIiA6ICIiKSArIG1vZHVsZU5hbWU7CiAgICAgICAgCiAgICAgICAgd2hpbGUgKG1vZHVsZU5hbWUuaW5kZXhPZigiLiIpICE9PSAtMSAmJiBwcmV2aW91cyAhPSBtb2R1bGVOYW1lKSB7CiAgICAgICAgICAgIHZhciBwcmV2aW91cyA9IG1vZHVsZU5hbWU7CiAgICAgICAgICAgIG1vZHVsZU5hbWUgPSBtb2R1bGVOYW1lLnJlcGxhY2UoL15cLlwvLywgIiIpLnJlcGxhY2UoL1wvXC5cLy8sICIvIikucmVwbGFjZSgvW15cL10rXC9cLlwuXC8vLCAiIik7CiAgICAgICAgfQogICAgfQogICAgCiAgICByZXR1cm4gbW9kdWxlTmFtZTsKfTsKCndpbmRvdy5yZXF1aXJlID0gZnVuY3Rpb24gcmVxdWlyZShwYXJlbnRJZCwgaWQpIHsKICAgIGlmICghaWQpIHsKICAgICAgICBpZCA9IHBhcmVudElkOwogICAgICAgIHBhcmVudElkID0gbnVsbDsKICAgIH0KICAgIGlmICghaWQuY2hhckF0KQogICAgICAgIHRocm93IG5ldyBFcnJvcigid29ya2VyLmpzIHJlcXVpcmUoKSBhY2NlcHRzIG9ubHkgKHBhcmVudElkLCBpZCkgYXMgYXJndW1lbnRzIik7CgogICAgaWQgPSB3aW5kb3cubm9ybWFsaXplTW9kdWxlKHBhcmVudElkLCBpZCk7CgogICAgdmFyIG1vZHVsZSA9IHdpbmRvdy5yZXF1aXJlLm1vZHVsZXNbaWRdOwogICAgaWYgKG1vZHVsZSkgewogICAgICAgIGlmICghbW9kdWxlLmluaXRpYWxpemVkKSB7CiAgICAgICAgICAgIG1vZHVsZS5pbml0aWFsaXplZCA9IHRydWU7CiAgICAgICAgICAgIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmZhY3RvcnkoKS5leHBvcnRzOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbW9kdWxlLmV4cG9ydHM7CiAgICB9CiAgIAogICAgaWYgKCF3aW5kb3cucmVxdWlyZS50bG5zKQogICAgICAgIHJldHVybiBjb25zb2xlLmxvZygidW5hYmxlIHRvIGxvYWQgIiArIGlkKTsKICAgIAogICAgdmFyIHBhdGggPSByZXNvbHZlTW9kdWxlSWQoaWQsIHdpbmRvdy5yZXF1aXJlLnRsbnMpOwogICAgaWYgKHBhdGguc2xpY2UoLTMpICE9ICIuanMiKSBwYXRoICs9ICIuanMiOwogICAgCiAgICB3aW5kb3cucmVxdWlyZS5pZCA9IGlkOwogICAgd2luZG93LnJlcXVpcmUubW9kdWxlc1tpZF0gPSB7fTsgLy8gcHJldmVudCBpbmZpbml0ZSBsb29wIG9uIGJyb2tlbiBtb2R1bGVzCiAgICBpbXBvcnRTY3JpcHRzKHBhdGgpOwogICAgcmV0dXJuIHdpbmRvdy5yZXF1aXJlKHBhcmVudElkLCBpZCk7Cn07CmZ1bmN0aW9uIHJlc29sdmVNb2R1bGVJZChpZCwgcGF0aHMpIHsKICAgIHZhciB0ZXN0UGF0aCA9IGlkLCB0YWlsID0gIiI7CiAgICB3aGlsZSAodGVzdFBhdGgpIHsKICAgICAgICB2YXIgYWxpYXMgPSBwYXRoc1t0ZXN0UGF0aF07CiAgICAgICAgaWYgKHR5cGVvZiBhbGlhcyA9PSAic3RyaW5nIikgewogICAgICAgICAgICByZXR1cm4gYWxpYXMgKyB0YWlsOwogICAgICAgIH0gZWxzZSBpZiAoYWxpYXMpIHsKICAgICAgICAgICAgcmV0dXJuICBhbGlhcy5sb2NhdGlvbi5yZXBsYWNlKC9cLyokLywgIi8iKSArICh0YWlsIHx8IGFsaWFzLm1haW4gfHwgYWxpYXMubmFtZSk7CiAgICAgICAgfSBlbHNlIGlmIChhbGlhcyA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgIH0KICAgICAgICB2YXIgaSA9IHRlc3RQYXRoLmxhc3RJbmRleE9mKCIvIik7CiAgICAgICAgaWYgKGkgPT09IC0xKSBicmVhazsKICAgICAgICB0YWlsID0gdGVzdFBhdGguc3Vic3RyKGkpICsgdGFpbDsKICAgICAgICB0ZXN0UGF0aCA9IHRlc3RQYXRoLnNsaWNlKDAsIGkpOwogICAgfQogICAgcmV0dXJuIGlkOwp9CndpbmRvdy5yZXF1aXJlLm1vZHVsZXMgPSB7fTsKd2luZG93LnJlcXVpcmUudGxucyA9IHt9OwoKd2luZG93LmRlZmluZSA9IGZ1bmN0aW9uKGlkLCBkZXBzLCBmYWN0b3J5KSB7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAyKSB7CiAgICAgICAgZmFjdG9yeSA9IGRlcHM7CiAgICAgICAgaWYgKHR5cGVvZiBpZCAhPSAic3RyaW5nIikgewogICAgICAgICAgICBkZXBzID0gaWQ7CiAgICAgICAgICAgIGlkID0gd2luZG93LnJlcXVpcmUuaWQ7CiAgICAgICAgfQogICAgfSBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDEpIHsKICAgICAgICBmYWN0b3J5ID0gaWQ7CiAgICAgICAgZGVwcyA9IFtdOwogICAgICAgIGlkID0gd2luZG93LnJlcXVpcmUuaWQ7CiAgICB9CiAgICAKICAgIGlmICh0eXBlb2YgZmFjdG9yeSAhPSAiZnVuY3Rpb24iKSB7CiAgICAgICAgd2luZG93LnJlcXVpcmUubW9kdWxlc1tpZF0gPSB7CiAgICAgICAgICAgIGV4cG9ydHM6IGZhY3RvcnksCiAgICAgICAgICAgIGluaXRpYWxpemVkOiB0cnVlCiAgICAgICAgfTsKICAgICAgICByZXR1cm47CiAgICB9CgogICAgaWYgKCFkZXBzLmxlbmd0aCkKICAgICAgICAvLyBJZiB0aGVyZSBpcyBubyBkZXBlbmRlbmNpZXMsIHdlIGluamVjdCAicmVxdWlyZSIsICJleHBvcnRzIiBhbmQKICAgICAgICAvLyAibW9kdWxlIiBhcyBkZXBlbmRlbmNpZXMsIHRvIHByb3ZpZGUgQ29tbW9uSlMgY29tcGF0aWJpbGl0eS4KICAgICAgICBkZXBzID0gWyJyZXF1aXJlIiwgImV4cG9ydHMiLCAibW9kdWxlIl07CgogICAgdmFyIHJlcSA9IGZ1bmN0aW9uKGNoaWxkSWQpIHsKICAgICAgICByZXR1cm4gd2luZG93LnJlcXVpcmUoaWQsIGNoaWxkSWQpOwogICAgfTsKCiAgICB3aW5kb3cucmVxdWlyZS5tb2R1bGVzW2lkXSA9IHsKICAgICAgICBleHBvcnRzOiB7fSwKICAgICAgICBmYWN0b3J5OiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdmFyIG1vZHVsZSA9IHRoaXM7CiAgICAgICAgICAgIHZhciByZXR1cm5FeHBvcnRzID0gZmFjdG9yeS5hcHBseSh0aGlzLCBkZXBzLnNsaWNlKDAsIGZhY3RvcnkubGVuZ3RoKS5tYXAoZnVuY3Rpb24oZGVwKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKGRlcCkgewogICAgICAgICAgICAgICAgICAgIC8vIEJlY2F1c2UgInJlcXVpcmUiLCAiZXhwb3J0cyIgYW5kICJtb2R1bGUiIGFyZW4ndCBhY3R1YWwKICAgICAgICAgICAgICAgICAgICAvLyBkZXBlbmRlbmNpZXMsIHdlIG11c3QgaGFuZGxlIHRoZW0gc2VwZXJhdGVseS4KICAgICAgICAgICAgICAgICAgICBjYXNlICJyZXF1aXJlIjogcmV0dXJuIHJlcTsKICAgICAgICAgICAgICAgICAgICBjYXNlICJleHBvcnRzIjogcmV0dXJuIG1vZHVsZS5leHBvcnRzOwogICAgICAgICAgICAgICAgICAgIGNhc2UgIm1vZHVsZSI6ICByZXR1cm4gbW9kdWxlOwogICAgICAgICAgICAgICAgICAgIC8vIEJ1dCBmb3IgYWxsIG90aGVyIGRlcGVuZGVuY2llcywgd2UgY2FuIGp1c3QgZ28gYWhlYWQgYW5kCiAgICAgICAgICAgICAgICAgICAgLy8gcmVxdWlyZSB0aGVtLgogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICAgICAgICByZXR1cm4gcmVxKGRlcCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgaWYgKHJldHVybkV4cG9ydHMpCiAgICAgICAgICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IHJldHVybkV4cG9ydHM7CiAgICAgICAgICAgIHJldHVybiBtb2R1bGU7CiAgICAgICAgfQogICAgfTsKfTsKd2luZG93LmRlZmluZS5hbWQgPSB7fTsKd2luZG93LnJlcXVpcmUudGxucyA9IHt9Owp3aW5kb3cuaW5pdEJhc2VVcmxzICA9IGZ1bmN0aW9uIGluaXRCYXNlVXJscyh0b3BMZXZlbE5hbWVzcGFjZXMpIHsKICAgIGZvciAodmFyIGkgaW4gdG9wTGV2ZWxOYW1lc3BhY2VzKQogICAgICAgIHRoaXMucmVxdWlyZS50bG5zW2ldID0gdG9wTGV2ZWxOYW1lc3BhY2VzW2ldOwp9OwoKd2luZG93LmluaXRTZW5kZXIgPSBmdW5jdGlvbiBpbml0U2VuZGVyKCkgewoKICAgIHZhciBFdmVudEVtaXR0ZXIgPSB3aW5kb3cucmVxdWlyZSgiYWNlL2xpYi9ldmVudF9lbWl0dGVyIikuRXZlbnRFbWl0dGVyOwogICAgdmFyIG9vcCA9IHdpbmRvdy5yZXF1aXJlKCJhY2UvbGliL29vcCIpOwogICAgCiAgICB2YXIgU2VuZGVyID0gZnVuY3Rpb24oKSB7fTsKICAgIAogICAgKGZ1bmN0aW9uKCkgewogICAgICAgIAogICAgICAgIG9vcC5pbXBsZW1lbnQodGhpcywgRXZlbnRFbWl0dGVyKTsKICAgICAgICAgICAgICAgIAogICAgICAgIHRoaXMuY2FsbGJhY2sgPSBmdW5jdGlvbihkYXRhLCBjYWxsYmFja0lkKSB7CiAgICAgICAgICAgIHBvc3RNZXNzYWdlKHsKICAgICAgICAgICAgICAgIHR5cGU6ICJjYWxsIiwKICAgICAgICAgICAgICAgIGlkOiBjYWxsYmFja0lkLAogICAgICAgICAgICAgICAgZGF0YTogZGF0YQogICAgICAgICAgICB9KTsKICAgICAgICB9OwogICAgCiAgICAgICAgdGhpcy5lbWl0ID0gZnVuY3Rpb24obmFtZSwgZGF0YSkgewogICAgICAgICAgICBwb3N0TWVzc2FnZSh7CiAgICAgICAgICAgICAgICB0eXBlOiAiZXZlbnQiLAogICAgICAgICAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICAKICAgIH0pLmNhbGwoU2VuZGVyLnByb3RvdHlwZSk7CiAgICAKICAgIHJldHVybiBuZXcgU2VuZGVyKCk7Cn07Cgp2YXIgbWFpbiA9IHdpbmRvdy5tYWluID0gbnVsbDsKdmFyIHNlbmRlciA9IHdpbmRvdy5zZW5kZXIgPSBudWxsOwoKd2luZG93Lm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGUpIHsKICAgIHZhciBtc2cgPSBlLmRhdGE7CiAgICBpZiAobXNnLmV2ZW50ICYmIHNlbmRlcikgewogICAgICAgIHNlbmRlci5fc2lnbmFsKG1zZy5ldmVudCwgbXNnLmRhdGEpOwogICAgfQogICAgZWxzZSBpZiAobXNnLmNvbW1hbmQpIHsKICAgICAgICBpZiAobWFpblttc2cuY29tbWFuZF0pCiAgICAgICAgICAgIG1haW5bbXNnLmNvbW1hbmRdLmFwcGx5KG1haW4sIG1zZy5hcmdzKTsKICAgICAgICBlbHNlIGlmICh3aW5kb3dbbXNnLmNvbW1hbmRdKQogICAgICAgICAgICB3aW5kb3dbbXNnLmNvbW1hbmRdLmFwcGx5KHdpbmRvdywgbXNnLmFyZ3MpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJVbmtub3duIGNvbW1hbmQ6IiArIG1zZy5jb21tYW5kKTsKICAgIH0KICAgIGVsc2UgaWYgKG1zZy5pbml0KSB7CiAgICAgICAgd2luZG93LmluaXRCYXNlVXJscyhtc2cudGxucyk7CiAgICAgICAgc2VuZGVyID0gd2luZG93LnNlbmRlciA9IHdpbmRvdy5pbml0U2VuZGVyKCk7CiAgICAgICAgdmFyIGNsYXp6ID0gdGhpcy5yZXF1aXJlKG1zZy5tb2R1bGUpW21zZy5jbGFzc25hbWVdOwogICAgICAgIG1haW4gPSB3aW5kb3cubWFpbiA9IG5ldyBjbGF6eihzZW5kZXIpOwogICAgfQp9Owp9KSh0aGlzKTsKCmFjZS5kZWZpbmUoImFjZS9saWIvb29wIixbXSwgZnVuY3Rpb24ocmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlKXsidXNlIHN0cmljdCI7CmV4cG9ydHMuaW5oZXJpdHMgPSBmdW5jdGlvbiAoY3Rvciwgc3VwZXJDdG9yKSB7CiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvcjsKICAgIGN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckN0b3IucHJvdG90eXBlLCB7CiAgICAgICAgY29uc3RydWN0b3I6IHsKICAgICAgICAgICAgdmFsdWU6IGN0b3IsCiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLAogICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICAgICAgfQogICAgfSk7Cn07CmV4cG9ydHMubWl4aW4gPSBmdW5jdGlvbiAob2JqLCBtaXhpbikgewogICAgZm9yICh2YXIga2V5IGluIG1peGluKSB7CiAgICAgICAgb2JqW2tleV0gPSBtaXhpbltrZXldOwogICAgfQogICAgcmV0dXJuIG9iajsKfTsKZXhwb3J0cy5pbXBsZW1lbnQgPSBmdW5jdGlvbiAocHJvdG8sIG1peGluKSB7CiAgICBleHBvcnRzLm1peGluKHByb3RvLCBtaXhpbik7Cn07Cgp9KTsKCmFjZS5kZWZpbmUoImFjZS9hcHBseV9kZWx0YSIsW10sIGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSl7InVzZSBzdHJpY3QiOwpmdW5jdGlvbiB0aHJvd0RlbHRhRXJyb3IoZGVsdGEsIGVycm9yVGV4dCkgewogICAgY29uc29sZS5sb2coIkludmFsaWQgRGVsdGE6IiwgZGVsdGEpOwogICAgdGhyb3cgIkludmFsaWQgRGVsdGE6ICIgKyBlcnJvclRleHQ7Cn0KZnVuY3Rpb24gcG9zaXRpb25JbkRvY3VtZW50KGRvY0xpbmVzLCBwb3NpdGlvbikgewogICAgcmV0dXJuIHBvc2l0aW9uLnJvdyA+PSAwICYmIHBvc2l0aW9uLnJvdyA8IGRvY0xpbmVzLmxlbmd0aCAmJgogICAgICAgIHBvc2l0aW9uLmNvbHVtbiA+PSAwICYmIHBvc2l0aW9uLmNvbHVtbiA8PSBkb2NMaW5lc1twb3NpdGlvbi5yb3ddLmxlbmd0aDsKfQpmdW5jdGlvbiB2YWxpZGF0ZURlbHRhKGRvY0xpbmVzLCBkZWx0YSkgewogICAgaWYgKGRlbHRhLmFjdGlvbiAhPSAiaW5zZXJ0IiAmJiBkZWx0YS5hY3Rpb24gIT0gInJlbW92ZSIpCiAgICAgICAgdGhyb3dEZWx0YUVycm9yKGRlbHRhLCAiZGVsdGEuYWN0aW9uIG11c3QgYmUgJ2luc2VydCcgb3IgJ3JlbW92ZSciKTsKICAgIGlmICghKGRlbHRhLmxpbmVzIGluc3RhbmNlb2YgQXJyYXkpKQogICAgICAgIHRocm93RGVsdGFFcnJvcihkZWx0YSwgImRlbHRhLmxpbmVzIG11c3QgYmUgYW4gQXJyYXkiKTsKICAgIGlmICghZGVsdGEuc3RhcnQgfHwgIWRlbHRhLmVuZCkKICAgICAgICB0aHJvd0RlbHRhRXJyb3IoZGVsdGEsICJkZWx0YS5zdGFydC9lbmQgbXVzdCBiZSBhbiBwcmVzZW50Iik7CiAgICB2YXIgc3RhcnQgPSBkZWx0YS5zdGFydDsKICAgIGlmICghcG9zaXRpb25JbkRvY3VtZW50KGRvY0xpbmVzLCBkZWx0YS5zdGFydCkpCiAgICAgICAgdGhyb3dEZWx0YUVycm9yKGRlbHRhLCAiZGVsdGEuc3RhcnQgbXVzdCBiZSBjb250YWluZWQgaW4gZG9jdW1lbnQiKTsKICAgIHZhciBlbmQgPSBkZWx0YS5lbmQ7CiAgICBpZiAoZGVsdGEuYWN0aW9uID09ICJyZW1vdmUiICYmICFwb3NpdGlvbkluRG9jdW1lbnQoZG9jTGluZXMsIGVuZCkpCiAgICAgICAgdGhyb3dEZWx0YUVycm9yKGRlbHRhLCAiZGVsdGEuZW5kIG11c3QgY29udGFpbmVkIGluIGRvY3VtZW50IGZvciAncmVtb3ZlJyBhY3Rpb25zIik7CiAgICB2YXIgbnVtUmFuZ2VSb3dzID0gZW5kLnJvdyAtIHN0YXJ0LnJvdzsKICAgIHZhciBudW1SYW5nZUxhc3RMaW5lQ2hhcnMgPSAoZW5kLmNvbHVtbiAtIChudW1SYW5nZVJvd3MgPT0gMCA/IHN0YXJ0LmNvbHVtbiA6IDApKTsKICAgIGlmIChudW1SYW5nZVJvd3MgIT0gZGVsdGEubGluZXMubGVuZ3RoIC0gMSB8fCBkZWx0YS5saW5lc1tudW1SYW5nZVJvd3NdLmxlbmd0aCAhPSBudW1SYW5nZUxhc3RMaW5lQ2hhcnMpCiAgICAgICAgdGhyb3dEZWx0YUVycm9yKGRlbHRhLCAiZGVsdGEucmFuZ2UgbXVzdCBtYXRjaCBkZWx0YSBsaW5lcyIpOwp9CmV4cG9ydHMuYXBwbHlEZWx0YSA9IGZ1bmN0aW9uIChkb2NMaW5lcywgZGVsdGEsIGRvTm90VmFsaWRhdGUpIHsKICAgIHZhciByb3cgPSBkZWx0YS5zdGFydC5yb3c7CiAgICB2YXIgc3RhcnRDb2x1bW4gPSBkZWx0YS5zdGFydC5jb2x1bW47CiAgICB2YXIgbGluZSA9IGRvY0xpbmVzW3Jvd10gfHwgIiI7CiAgICBzd2l0Y2ggKGRlbHRhLmFjdGlvbikgewogICAgICAgIGNhc2UgImluc2VydCI6CiAgICAgICAgICAgIHZhciBsaW5lcyA9IGRlbHRhLmxpbmVzOwogICAgICAgICAgICBpZiAobGluZXMubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICAgICAgICBkb2NMaW5lc1tyb3ddID0gbGluZS5zdWJzdHJpbmcoMCwgc3RhcnRDb2x1bW4pICsgZGVsdGEubGluZXNbMF0gKyBsaW5lLnN1YnN0cmluZyhzdGFydENvbHVtbik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IFtyb3csIDFdLmNvbmNhdChkZWx0YS5saW5lcyk7CiAgICAgICAgICAgICAgICBkb2NMaW5lcy5zcGxpY2UuYXBwbHkoZG9jTGluZXMsIGFyZ3MpOwogICAgICAgICAgICAgICAgZG9jTGluZXNbcm93XSA9IGxpbmUuc3Vic3RyaW5nKDAsIHN0YXJ0Q29sdW1uKSArIGRvY0xpbmVzW3Jvd107CiAgICAgICAgICAgICAgICBkb2NMaW5lc1tyb3cgKyBkZWx0YS5saW5lcy5sZW5ndGggLSAxXSArPSBsaW5lLnN1YnN0cmluZyhzdGFydENvbHVtbik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAicmVtb3ZlIjoKICAgICAgICAgICAgdmFyIGVuZENvbHVtbiA9IGRlbHRhLmVuZC5jb2x1bW47CiAgICAgICAgICAgIHZhciBlbmRSb3cgPSBkZWx0YS5lbmQucm93OwogICAgICAgICAgICBpZiAocm93ID09PSBlbmRSb3cpIHsKICAgICAgICAgICAgICAgIGRvY0xpbmVzW3Jvd10gPSBsaW5lLnN1YnN0cmluZygwLCBzdGFydENvbHVtbikgKyBsaW5lLnN1YnN0cmluZyhlbmRDb2x1bW4pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgZG9jTGluZXMuc3BsaWNlKHJvdywgZW5kUm93IC0gcm93ICsgMSwgbGluZS5zdWJzdHJpbmcoMCwgc3RhcnRDb2x1bW4pICsgZG9jTGluZXNbZW5kUm93XS5zdWJzdHJpbmcoZW5kQ29sdW1uKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICB9Cn07Cgp9KTsKCmFjZS5kZWZpbmUoImFjZS9saWIvZXZlbnRfZW1pdHRlciIsW10sIGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSl7InVzZSBzdHJpY3QiOwp2YXIgRXZlbnRFbWl0dGVyID0ge307CnZhciBzdG9wUHJvcGFnYXRpb24gPSBmdW5jdGlvbiAoKSB7IHRoaXMucHJvcGFnYXRpb25TdG9wcGVkID0gdHJ1ZTsgfTsKdmFyIHByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gKCkgeyB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQgPSB0cnVlOyB9OwpFdmVudEVtaXR0ZXIuX2VtaXQgPQogICAgRXZlbnRFbWl0dGVyLl9kaXNwYXRjaEV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZSkgewogICAgICAgIHRoaXMuX2V2ZW50UmVnaXN0cnkgfHwgKHRoaXMuX2V2ZW50UmVnaXN0cnkgPSB7fSk7CiAgICAgICAgdGhpcy5fZGVmYXVsdEhhbmRsZXJzIHx8ICh0aGlzLl9kZWZhdWx0SGFuZGxlcnMgPSB7fSk7CiAgICAgICAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50UmVnaXN0cnlbZXZlbnROYW1lXSB8fCBbXTsKICAgICAgICB2YXIgZGVmYXVsdEhhbmRsZXIgPSB0aGlzLl9kZWZhdWx0SGFuZGxlcnNbZXZlbnROYW1lXTsKICAgICAgICBpZiAoIWxpc3RlbmVycy5sZW5ndGggJiYgIWRlZmF1bHRIYW5kbGVyKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgaWYgKHR5cGVvZiBlICE9ICJvYmplY3QiIHx8ICFlKQogICAgICAgICAgICBlID0ge307CiAgICAgICAgaWYgKCFlLnR5cGUpCiAgICAgICAgICAgIGUudHlwZSA9IGV2ZW50TmFtZTsKICAgICAgICBpZiAoIWUuc3RvcFByb3BhZ2F0aW9uKQogICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbiA9IHN0b3BQcm9wYWdhdGlvbjsKICAgICAgICBpZiAoIWUucHJldmVudERlZmF1bHQpCiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQgPSBwcmV2ZW50RGVmYXVsdDsKICAgICAgICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMuc2xpY2UoKTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBsaXN0ZW5lcnNbaV0oZSwgdGhpcyk7CiAgICAgICAgICAgIGlmIChlLnByb3BhZ2F0aW9uU3RvcHBlZCkKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICBpZiAoZGVmYXVsdEhhbmRsZXIgJiYgIWUuZGVmYXVsdFByZXZlbnRlZCkKICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRIYW5kbGVyKGUsIHRoaXMpOwogICAgfTsKRXZlbnRFbWl0dGVyLl9zaWduYWwgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBlKSB7CiAgICB2YXIgbGlzdGVuZXJzID0gKHRoaXMuX2V2ZW50UmVnaXN0cnkgfHwge30pW2V2ZW50TmFtZV07CiAgICBpZiAoIWxpc3RlbmVycykKICAgICAgICByZXR1cm47CiAgICBsaXN0ZW5lcnMgPSBsaXN0ZW5lcnMuc2xpY2UoKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdGVuZXJzLmxlbmd0aDsgaSsrKQogICAgICAgIGxpc3RlbmVyc1tpXShlLCB0aGlzKTsKfTsKRXZlbnRFbWl0dGVyLm9uY2UgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBjYWxsYmFjaykgewogICAgdmFyIF9zZWxmID0gdGhpczsKICAgIHRoaXMub24oZXZlbnROYW1lLCBmdW5jdGlvbiBuZXdDYWxsYmFjaygpIHsKICAgICAgICBfc2VsZi5vZmYoZXZlbnROYW1lLCBuZXdDYWxsYmFjayk7CiAgICAgICAgY2FsbGJhY2suYXBwbHkobnVsbCwgYXJndW1lbnRzKTsKICAgIH0pOwogICAgaWYgKCFjYWxsYmFjaykgewogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICBjYWxsYmFjayA9IHJlc29sdmU7CiAgICAgICAgfSk7CiAgICB9Cn07CkV2ZW50RW1pdHRlci5zZXREZWZhdWx0SGFuZGxlciA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGNhbGxiYWNrKSB7CiAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLl9kZWZhdWx0SGFuZGxlcnM7CiAgICBpZiAoIWhhbmRsZXJzKQogICAgICAgIGhhbmRsZXJzID0gdGhpcy5fZGVmYXVsdEhhbmRsZXJzID0geyBfZGlzYWJsZWRfOiB7fSB9OwogICAgaWYgKGhhbmRsZXJzW2V2ZW50TmFtZV0pIHsKICAgICAgICB2YXIgb2xkID0gaGFuZGxlcnNbZXZlbnROYW1lXTsKICAgICAgICB2YXIgZGlzYWJsZWQgPSBoYW5kbGVycy5fZGlzYWJsZWRfW2V2ZW50TmFtZV07CiAgICAgICAgaWYgKCFkaXNhYmxlZCkKICAgICAgICAgICAgaGFuZGxlcnMuX2Rpc2FibGVkX1tldmVudE5hbWVdID0gZGlzYWJsZWQgPSBbXTsKICAgICAgICBkaXNhYmxlZC5wdXNoKG9sZCk7CiAgICAgICAgdmFyIGkgPSBkaXNhYmxlZC5pbmRleE9mKGNhbGxiYWNrKTsKICAgICAgICBpZiAoaSAhPSAtMSkKICAgICAgICAgICAgZGlzYWJsZWQuc3BsaWNlKGksIDEpOwogICAgfQogICAgaGFuZGxlcnNbZXZlbnROYW1lXSA9IGNhbGxiYWNrOwp9OwpFdmVudEVtaXR0ZXIucmVtb3ZlRGVmYXVsdEhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBjYWxsYmFjaykgewogICAgdmFyIGhhbmRsZXJzID0gdGhpcy5fZGVmYXVsdEhhbmRsZXJzOwogICAgaWYgKCFoYW5kbGVycykKICAgICAgICByZXR1cm47CiAgICB2YXIgZGlzYWJsZWQgPSBoYW5kbGVycy5fZGlzYWJsZWRfW2V2ZW50TmFtZV07CiAgICBpZiAoaGFuZGxlcnNbZXZlbnROYW1lXSA9PSBjYWxsYmFjaykgewogICAgICAgIGlmIChkaXNhYmxlZCkKICAgICAgICAgICAgdGhpcy5zZXREZWZhdWx0SGFuZGxlcihldmVudE5hbWUsIGRpc2FibGVkLnBvcCgpKTsKICAgIH0KICAgIGVsc2UgaWYgKGRpc2FibGVkKSB7CiAgICAgICAgdmFyIGkgPSBkaXNhYmxlZC5pbmRleE9mKGNhbGxiYWNrKTsKICAgICAgICBpZiAoaSAhPSAtMSkKICAgICAgICAgICAgZGlzYWJsZWQuc3BsaWNlKGksIDEpOwogICAgfQp9OwpFdmVudEVtaXR0ZXIub24gPQogICAgRXZlbnRFbWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBjYWxsYmFjaywgY2FwdHVyaW5nKSB7CiAgICAgICAgdGhpcy5fZXZlbnRSZWdpc3RyeSA9IHRoaXMuX2V2ZW50UmVnaXN0cnkgfHwge307CiAgICAgICAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50UmVnaXN0cnlbZXZlbnROYW1lXTsKICAgICAgICBpZiAoIWxpc3RlbmVycykKICAgICAgICAgICAgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRSZWdpc3RyeVtldmVudE5hbWVdID0gW107CiAgICAgICAgaWYgKGxpc3RlbmVycy5pbmRleE9mKGNhbGxiYWNrKSA9PSAtMSkKICAgICAgICAgICAgbGlzdGVuZXJzW2NhcHR1cmluZyA/ICJ1bnNoaWZ0IiA6ICJwdXNoIl0oY2FsbGJhY2spOwogICAgICAgIHJldHVybiBjYWxsYmFjazsKICAgIH07CkV2ZW50RW1pdHRlci5vZmYgPQogICAgRXZlbnRFbWl0dGVyLnJlbW92ZUxpc3RlbmVyID0KICAgICAgICBFdmVudEVtaXR0ZXIucmVtb3ZlRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgIHRoaXMuX2V2ZW50UmVnaXN0cnkgPSB0aGlzLl9ldmVudFJlZ2lzdHJ5IHx8IHt9OwogICAgICAgICAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRSZWdpc3RyeVtldmVudE5hbWVdOwogICAgICAgICAgICBpZiAoIWxpc3RlbmVycykKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgdmFyIGluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2YoY2FsbGJhY2spOwogICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKQogICAgICAgICAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgfTsKRXZlbnRFbWl0dGVyLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uIChldmVudE5hbWUpIHsKICAgIGlmICghZXZlbnROYW1lKQogICAgICAgIHRoaXMuX2V2ZW50UmVnaXN0cnkgPSB0aGlzLl9kZWZhdWx0SGFuZGxlcnMgPSB1bmRlZmluZWQ7CiAgICBpZiAodGhpcy5fZXZlbnRSZWdpc3RyeSkKICAgICAgICB0aGlzLl9ldmVudFJlZ2lzdHJ5W2V2ZW50TmFtZV0gPSB1bmRlZmluZWQ7CiAgICBpZiAodGhpcy5fZGVmYXVsdEhhbmRsZXJzKQogICAgICAgIHRoaXMuX2RlZmF1bHRIYW5kbGVyc1tldmVudE5hbWVdID0gdW5kZWZpbmVkOwp9OwpleHBvcnRzLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjsKCn0pOwoKYWNlLmRlZmluZSgiYWNlL3JhbmdlIixbXSwgZnVuY3Rpb24ocmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlKXsidXNlIHN0cmljdCI7CnZhciBjb21wYXJlUG9pbnRzID0gZnVuY3Rpb24gKHAxLCBwMikgewogICAgcmV0dXJuIHAxLnJvdyAtIHAyLnJvdyB8fCBwMS5jb2x1bW4gLSBwMi5jb2x1bW47Cn07CnZhciBSYW5nZSA9IGZ1bmN0aW9uIChzdGFydFJvdywgc3RhcnRDb2x1bW4sIGVuZFJvdywgZW5kQ29sdW1uKSB7CiAgICB0aGlzLnN0YXJ0ID0gewogICAgICAgIHJvdzogc3RhcnRSb3csCiAgICAgICAgY29sdW1uOiBzdGFydENvbHVtbgogICAgfTsKICAgIHRoaXMuZW5kID0gewogICAgICAgIHJvdzogZW5kUm93LAogICAgICAgIGNvbHVtbjogZW5kQ29sdW1uCiAgICB9Owp9OwooZnVuY3Rpb24gKCkgewogICAgdGhpcy5pc0VxdWFsID0gZnVuY3Rpb24gKHJhbmdlKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnQucm93ID09PSByYW5nZS5zdGFydC5yb3cgJiYKICAgICAgICAgICAgdGhpcy5lbmQucm93ID09PSByYW5nZS5lbmQucm93ICYmCiAgICAgICAgICAgIHRoaXMuc3RhcnQuY29sdW1uID09PSByYW5nZS5zdGFydC5jb2x1bW4gJiYKICAgICAgICAgICAgdGhpcy5lbmQuY29sdW1uID09PSByYW5nZS5lbmQuY29sdW1uOwogICAgfTsKICAgIHRoaXMudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuICgiUmFuZ2U6IFsiICsgdGhpcy5zdGFydC5yb3cgKyAiLyIgKyB0aGlzLnN0YXJ0LmNvbHVtbiArCiAgICAgICAgICAgICJdIC0+IFsiICsgdGhpcy5lbmQucm93ICsgIi8iICsgdGhpcy5lbmQuY29sdW1uICsgIl0iKTsKICAgIH07CiAgICB0aGlzLmNvbnRhaW5zID0gZnVuY3Rpb24gKHJvdywgY29sdW1uKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZShyb3csIGNvbHVtbikgPT0gMDsKICAgIH07CiAgICB0aGlzLmNvbXBhcmVSYW5nZSA9IGZ1bmN0aW9uIChyYW5nZSkgewogICAgICAgIHZhciBjbXAsIGVuZCA9IHJhbmdlLmVuZCwgc3RhcnQgPSByYW5nZS5zdGFydDsKICAgICAgICBjbXAgPSB0aGlzLmNvbXBhcmUoZW5kLnJvdywgZW5kLmNvbHVtbik7CiAgICAgICAgaWYgKGNtcCA9PSAxKSB7CiAgICAgICAgICAgIGNtcCA9IHRoaXMuY29tcGFyZShzdGFydC5yb3csIHN0YXJ0LmNvbHVtbik7CiAgICAgICAgICAgIGlmIChjbXAgPT0gMSkgewogICAgICAgICAgICAgICAgcmV0dXJuIDI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoY21wID09IDApIHsKICAgICAgICAgICAgICAgIHJldHVybiAxOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAoY21wID09IC0xKSB7CiAgICAgICAgICAgIHJldHVybiAtMjsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGNtcCA9IHRoaXMuY29tcGFyZShzdGFydC5yb3csIHN0YXJ0LmNvbHVtbik7CiAgICAgICAgICAgIGlmIChjbXAgPT0gLTEpIHsKICAgICAgICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChjbXAgPT0gMSkgewogICAgICAgICAgICAgICAgcmV0dXJuIDQyOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgdGhpcy5jb21wYXJlUG9pbnQgPSBmdW5jdGlvbiAocCkgewogICAgICAgIHJldHVybiB0aGlzLmNvbXBhcmUocC5yb3csIHAuY29sdW1uKTsKICAgIH07CiAgICB0aGlzLmNvbnRhaW5zUmFuZ2UgPSBmdW5jdGlvbiAocmFuZ2UpIHsKICAgICAgICByZXR1cm4gdGhpcy5jb21wYXJlUG9pbnQocmFuZ2Uuc3RhcnQpID09IDAgJiYgdGhpcy5jb21wYXJlUG9pbnQocmFuZ2UuZW5kKSA9PSAwOwogICAgfTsKICAgIHRoaXMuaW50ZXJzZWN0cyA9IGZ1bmN0aW9uIChyYW5nZSkgewogICAgICAgIHZhciBjbXAgPSB0aGlzLmNvbXBhcmVSYW5nZShyYW5nZSk7CiAgICAgICAgcmV0dXJuIChjbXAgPT0gLTEgfHwgY21wID09IDAgfHwgY21wID09IDEpOwogICAgfTsKICAgIHRoaXMuaXNFbmQgPSBmdW5jdGlvbiAocm93LCBjb2x1bW4pIHsKICAgICAgICByZXR1cm4gdGhpcy5lbmQucm93ID09IHJvdyAmJiB0aGlzLmVuZC5jb2x1bW4gPT0gY29sdW1uOwogICAgfTsKICAgIHRoaXMuaXNTdGFydCA9IGZ1bmN0aW9uIChyb3csIGNvbHVtbikgewogICAgICAgIHJldHVybiB0aGlzLnN0YXJ0LnJvdyA9PSByb3cgJiYgdGhpcy5zdGFydC5jb2x1bW4gPT0gY29sdW1uOwogICAgfTsKICAgIHRoaXMuc2V0U3RhcnQgPSBmdW5jdGlvbiAocm93LCBjb2x1bW4pIHsKICAgICAgICBpZiAodHlwZW9mIHJvdyA9PSAib2JqZWN0IikgewogICAgICAgICAgICB0aGlzLnN0YXJ0LmNvbHVtbiA9IHJvdy5jb2x1bW47CiAgICAgICAgICAgIHRoaXMuc3RhcnQucm93ID0gcm93LnJvdzsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHRoaXMuc3RhcnQucm93ID0gcm93OwogICAgICAgICAgICB0aGlzLnN0YXJ0LmNvbHVtbiA9IGNvbHVtbjsKICAgICAgICB9CiAgICB9OwogICAgdGhpcy5zZXRFbmQgPSBmdW5jdGlvbiAocm93LCBjb2x1bW4pIHsKICAgICAgICBpZiAodHlwZW9mIHJvdyA9PSAib2JqZWN0IikgewogICAgICAgICAgICB0aGlzLmVuZC5jb2x1bW4gPSByb3cuY29sdW1uOwogICAgICAgICAgICB0aGlzLmVuZC5yb3cgPSByb3cucm93OwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgdGhpcy5lbmQucm93ID0gcm93OwogICAgICAgICAgICB0aGlzLmVuZC5jb2x1bW4gPSBjb2x1bW47CiAgICAgICAgfQogICAgfTsKICAgIHRoaXMuaW5zaWRlID0gZnVuY3Rpb24gKHJvdywgY29sdW1uKSB7CiAgICAgICAgaWYgKHRoaXMuY29tcGFyZShyb3csIGNvbHVtbikgPT0gMCkgewogICAgICAgICAgICBpZiAodGhpcy5pc0VuZChyb3csIGNvbHVtbikgfHwgdGhpcy5pc1N0YXJ0KHJvdywgY29sdW1uKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfTsKICAgIHRoaXMuaW5zaWRlU3RhcnQgPSBmdW5jdGlvbiAocm93LCBjb2x1bW4pIHsKICAgICAgICBpZiAodGhpcy5jb21wYXJlKHJvdywgY29sdW1uKSA9PSAwKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmlzRW5kKHJvdywgY29sdW1uKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfTsKICAgIHRoaXMuaW5zaWRlRW5kID0gZnVuY3Rpb24gKHJvdywgY29sdW1uKSB7CiAgICAgICAgaWYgKHRoaXMuY29tcGFyZShyb3csIGNvbHVtbikgPT0gMCkgewogICAgICAgICAgICBpZiAodGhpcy5pc1N0YXJ0KHJvdywgY29sdW1uKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfTsKICAgIHRoaXMuY29tcGFyZSA9IGZ1bmN0aW9uIChyb3csIGNvbHVtbikgewogICAgICAgIGlmICghdGhpcy5pc011bHRpTGluZSgpKSB7CiAgICAgICAgICAgIGlmIChyb3cgPT09IHRoaXMuc3RhcnQucm93KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gY29sdW1uIDwgdGhpcy5zdGFydC5jb2x1bW4gPyAtMSA6IChjb2x1bW4gPiB0aGlzLmVuZC5jb2x1bW4gPyAxIDogMCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHJvdyA8IHRoaXMuc3RhcnQucm93KQogICAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgaWYgKHJvdyA+IHRoaXMuZW5kLnJvdykKICAgICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgaWYgKHRoaXMuc3RhcnQucm93ID09PSByb3cpCiAgICAgICAgICAgIHJldHVybiBjb2x1bW4gPj0gdGhpcy5zdGFydC5jb2x1bW4gPyAwIDogLTE7CiAgICAgICAgaWYgKHRoaXMuZW5kLnJvdyA9PT0gcm93KQogICAgICAgICAgICByZXR1cm4gY29sdW1uIDw9IHRoaXMuZW5kLmNvbHVtbiA/IDAgOiAxOwogICAgICAgIHJldHVybiAwOwogICAgfTsKICAgIHRoaXMuY29tcGFyZVN0YXJ0ID0gZnVuY3Rpb24gKHJvdywgY29sdW1uKSB7CiAgICAgICAgaWYgKHRoaXMuc3RhcnQucm93ID09IHJvdyAmJiB0aGlzLnN0YXJ0LmNvbHVtbiA9PSBjb2x1bW4pIHsKICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZShyb3csIGNvbHVtbik7CiAgICAgICAgfQogICAgfTsKICAgIHRoaXMuY29tcGFyZUVuZCA9IGZ1bmN0aW9uIChyb3csIGNvbHVtbikgewogICAgICAgIGlmICh0aGlzLmVuZC5yb3cgPT0gcm93ICYmIHRoaXMuZW5kLmNvbHVtbiA9PSBjb2x1bW4pIHsKICAgICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wYXJlKHJvdywgY29sdW1uKTsKICAgICAgICB9CiAgICB9OwogICAgdGhpcy5jb21wYXJlSW5zaWRlID0gZnVuY3Rpb24gKHJvdywgY29sdW1uKSB7CiAgICAgICAgaWYgKHRoaXMuZW5kLnJvdyA9PSByb3cgJiYgdGhpcy5lbmQuY29sdW1uID09IGNvbHVtbikgewogICAgICAgICAgICByZXR1cm4gMTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAodGhpcy5zdGFydC5yb3cgPT0gcm93ICYmIHRoaXMuc3RhcnQuY29sdW1uID09IGNvbHVtbikgewogICAgICAgICAgICByZXR1cm4gLTE7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wYXJlKHJvdywgY29sdW1uKTsKICAgICAgICB9CiAgICB9OwogICAgdGhpcy5jbGlwUm93cyA9IGZ1bmN0aW9uIChmaXJzdFJvdywgbGFzdFJvdykgewogICAgICAgIGlmICh0aGlzLmVuZC5yb3cgPiBsYXN0Um93KQogICAgICAgICAgICB2YXIgZW5kID0geyByb3c6IGxhc3RSb3cgKyAxLCBjb2x1bW46IDAgfTsKICAgICAgICBlbHNlIGlmICh0aGlzLmVuZC5yb3cgPCBmaXJzdFJvdykKICAgICAgICAgICAgdmFyIGVuZCA9IHsgcm93OiBmaXJzdFJvdywgY29sdW1uOiAwIH07CiAgICAgICAgaWYgKHRoaXMuc3RhcnQucm93ID4gbGFzdFJvdykKICAgICAgICAgICAgdmFyIHN0YXJ0ID0geyByb3c6IGxhc3RSb3cgKyAxLCBjb2x1bW46IDAgfTsKICAgICAgICBlbHNlIGlmICh0aGlzLnN0YXJ0LnJvdyA8IGZpcnN0Um93KQogICAgICAgICAgICB2YXIgc3RhcnQgPSB7IHJvdzogZmlyc3RSb3csIGNvbHVtbjogMCB9OwogICAgICAgIHJldHVybiBSYW5nZS5mcm9tUG9pbnRzKHN0YXJ0IHx8IHRoaXMuc3RhcnQsIGVuZCB8fCB0aGlzLmVuZCk7CiAgICB9OwogICAgdGhpcy5leHRlbmQgPSBmdW5jdGlvbiAocm93LCBjb2x1bW4pIHsKICAgICAgICB2YXIgY21wID0gdGhpcy5jb21wYXJlKHJvdywgY29sdW1uKTsKICAgICAgICBpZiAoY21wID09IDApCiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIGVsc2UgaWYgKGNtcCA9PSAtMSkKICAgICAgICAgICAgdmFyIHN0YXJ0ID0geyByb3c6IHJvdywgY29sdW1uOiBjb2x1bW4gfTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIHZhciBlbmQgPSB7IHJvdzogcm93LCBjb2x1bW46IGNvbHVtbiB9OwogICAgICAgIHJldHVybiBSYW5nZS5mcm9tUG9pbnRzKHN0YXJ0IHx8IHRoaXMuc3RhcnQsIGVuZCB8fCB0aGlzLmVuZCk7CiAgICB9OwogICAgdGhpcy5pc0VtcHR5ID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAodGhpcy5zdGFydC5yb3cgPT09IHRoaXMuZW5kLnJvdyAmJiB0aGlzLnN0YXJ0LmNvbHVtbiA9PT0gdGhpcy5lbmQuY29sdW1uKTsKICAgIH07CiAgICB0aGlzLmlzTXVsdGlMaW5lID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAodGhpcy5zdGFydC5yb3cgIT09IHRoaXMuZW5kLnJvdyk7CiAgICB9OwogICAgdGhpcy5jbG9uZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gUmFuZ2UuZnJvbVBvaW50cyh0aGlzLnN0YXJ0LCB0aGlzLmVuZCk7CiAgICB9OwogICAgdGhpcy5jb2xsYXBzZVJvd3MgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHRoaXMuZW5kLmNvbHVtbiA9PSAwKQogICAgICAgICAgICByZXR1cm4gbmV3IFJhbmdlKHRoaXMuc3RhcnQucm93LCAwLCBNYXRoLm1heCh0aGlzLnN0YXJ0LnJvdywgdGhpcy5lbmQucm93IC0gMSksIDApOwogICAgICAgIGVsc2UKICAgICAgICAgICAgcmV0dXJuIG5ldyBSYW5nZSh0aGlzLnN0YXJ0LnJvdywgMCwgdGhpcy5lbmQucm93LCAwKTsKICAgIH07CiAgICB0aGlzLnRvU2NyZWVuUmFuZ2UgPSBmdW5jdGlvbiAoc2Vzc2lvbikgewogICAgICAgIHZhciBzY3JlZW5Qb3NTdGFydCA9IHNlc3Npb24uZG9jdW1lbnRUb1NjcmVlblBvc2l0aW9uKHRoaXMuc3RhcnQpOwogICAgICAgIHZhciBzY3JlZW5Qb3NFbmQgPSBzZXNzaW9uLmRvY3VtZW50VG9TY3JlZW5Qb3NpdGlvbih0aGlzLmVuZCk7CiAgICAgICAgcmV0dXJuIG5ldyBSYW5nZShzY3JlZW5Qb3NTdGFydC5yb3csIHNjcmVlblBvc1N0YXJ0LmNvbHVtbiwgc2NyZWVuUG9zRW5kLnJvdywgc2NyZWVuUG9zRW5kLmNvbHVtbik7CiAgICB9OwogICAgdGhpcy5tb3ZlQnkgPSBmdW5jdGlvbiAocm93LCBjb2x1bW4pIHsKICAgICAgICB0aGlzLnN0YXJ0LnJvdyArPSByb3c7CiAgICAgICAgdGhpcy5zdGFydC5jb2x1bW4gKz0gY29sdW1uOwogICAgICAgIHRoaXMuZW5kLnJvdyArPSByb3c7CiAgICAgICAgdGhpcy5lbmQuY29sdW1uICs9IGNvbHVtbjsKICAgIH07Cn0pLmNhbGwoUmFuZ2UucHJvdG90eXBlKTsKUmFuZ2UuZnJvbVBvaW50cyA9IGZ1bmN0aW9uIChzdGFydCwgZW5kKSB7CiAgICByZXR1cm4gbmV3IFJhbmdlKHN0YXJ0LnJvdywgc3RhcnQuY29sdW1uLCBlbmQucm93LCBlbmQuY29sdW1uKTsKfTsKUmFuZ2UuY29tcGFyZVBvaW50cyA9IGNvbXBhcmVQb2ludHM7ClJhbmdlLmNvbXBhcmVQb2ludHMgPSBmdW5jdGlvbiAocDEsIHAyKSB7CiAgICByZXR1cm4gcDEucm93IC0gcDIucm93IHx8IHAxLmNvbHVtbiAtIHAyLmNvbHVtbjsKfTsKZXhwb3J0cy5SYW5nZSA9IFJhbmdlOwoKfSk7CgphY2UuZGVmaW5lKCJhY2UvYW5jaG9yIixbXSwgZnVuY3Rpb24ocmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlKXsidXNlIHN0cmljdCI7CnZhciBvb3AgPSByZXF1aXJlKCIuL2xpYi9vb3AiKTsKdmFyIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoIi4vbGliL2V2ZW50X2VtaXR0ZXIiKS5FdmVudEVtaXR0ZXI7CnZhciBBbmNob3IgPSBleHBvcnRzLkFuY2hvciA9IGZ1bmN0aW9uIChkb2MsIHJvdywgY29sdW1uKSB7CiAgICB0aGlzLiRvbkNoYW5nZSA9IHRoaXMub25DaGFuZ2UuYmluZCh0aGlzKTsKICAgIHRoaXMuYXR0YWNoKGRvYyk7CiAgICBpZiAodHlwZW9mIGNvbHVtbiA9PSAidW5kZWZpbmVkIikKICAgICAgICB0aGlzLnNldFBvc2l0aW9uKHJvdy5yb3csIHJvdy5jb2x1bW4pOwogICAgZWxzZQogICAgICAgIHRoaXMuc2V0UG9zaXRpb24ocm93LCBjb2x1bW4pOwp9OwooZnVuY3Rpb24gKCkgewogICAgb29wLmltcGxlbWVudCh0aGlzLCBFdmVudEVtaXR0ZXIpOwogICAgdGhpcy5nZXRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kY2xpcFBvc2l0aW9uVG9Eb2N1bWVudCh0aGlzLnJvdywgdGhpcy5jb2x1bW4pOwogICAgfTsKICAgIHRoaXMuZ2V0RG9jdW1lbnQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnQ7CiAgICB9OwogICAgdGhpcy4kaW5zZXJ0UmlnaHQgPSBmYWxzZTsKICAgIHRoaXMub25DaGFuZ2UgPSBmdW5jdGlvbiAoZGVsdGEpIHsKICAgICAgICBpZiAoZGVsdGEuc3RhcnQucm93ID09IGRlbHRhLmVuZC5yb3cgJiYgZGVsdGEuc3RhcnQucm93ICE9IHRoaXMucm93KQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgaWYgKGRlbHRhLnN0YXJ0LnJvdyA+IHRoaXMucm93KQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgdmFyIHBvaW50ID0gJGdldFRyYW5zZm9ybWVkUG9pbnQoZGVsdGEsIHsgcm93OiB0aGlzLnJvdywgY29sdW1uOiB0aGlzLmNvbHVtbiB9LCB0aGlzLiRpbnNlcnRSaWdodCk7CiAgICAgICAgdGhpcy5zZXRQb3NpdGlvbihwb2ludC5yb3csIHBvaW50LmNvbHVtbiwgdHJ1ZSk7CiAgICB9OwogICAgZnVuY3Rpb24gJHBvaW50c0luT3JkZXIocG9pbnQxLCBwb2ludDIsIGVxdWFsUG9pbnRzSW5PcmRlcikgewogICAgICAgIHZhciBiQ29sSXNBZnRlciA9IGVxdWFsUG9pbnRzSW5PcmRlciA/IHBvaW50MS5jb2x1bW4gPD0gcG9pbnQyLmNvbHVtbiA6IHBvaW50MS5jb2x1bW4gPCBwb2ludDIuY29sdW1uOwogICAgICAgIHJldHVybiAocG9pbnQxLnJvdyA8IHBvaW50Mi5yb3cpIHx8IChwb2ludDEucm93ID09IHBvaW50Mi5yb3cgJiYgYkNvbElzQWZ0ZXIpOwogICAgfQogICAgZnVuY3Rpb24gJGdldFRyYW5zZm9ybWVkUG9pbnQoZGVsdGEsIHBvaW50LCBtb3ZlSWZFcXVhbCkgewogICAgICAgIHZhciBkZWx0YUlzSW5zZXJ0ID0gZGVsdGEuYWN0aW9uID09ICJpbnNlcnQiOwogICAgICAgIHZhciBkZWx0YVJvd1NoaWZ0ID0gKGRlbHRhSXNJbnNlcnQgPyAxIDogLTEpICogKGRlbHRhLmVuZC5yb3cgLSBkZWx0YS5zdGFydC5yb3cpOwogICAgICAgIHZhciBkZWx0YUNvbFNoaWZ0ID0gKGRlbHRhSXNJbnNlcnQgPyAxIDogLTEpICogKGRlbHRhLmVuZC5jb2x1bW4gLSBkZWx0YS5zdGFydC5jb2x1bW4pOwogICAgICAgIHZhciBkZWx0YVN0YXJ0ID0gZGVsdGEuc3RhcnQ7CiAgICAgICAgdmFyIGRlbHRhRW5kID0gZGVsdGFJc0luc2VydCA/IGRlbHRhU3RhcnQgOiBkZWx0YS5lbmQ7IC8vIENvbGxhcHNlIGluc2VydCByYW5nZS4KICAgICAgICBpZiAoJHBvaW50c0luT3JkZXIocG9pbnQsIGRlbHRhU3RhcnQsIG1vdmVJZkVxdWFsKSkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgcm93OiBwb2ludC5yb3csCiAgICAgICAgICAgICAgICBjb2x1bW46IHBvaW50LmNvbHVtbgogICAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICBpZiAoJHBvaW50c0luT3JkZXIoZGVsdGFFbmQsIHBvaW50LCAhbW92ZUlmRXF1YWwpKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICByb3c6IHBvaW50LnJvdyArIGRlbHRhUm93U2hpZnQsCiAgICAgICAgICAgICAgICBjb2x1bW46IHBvaW50LmNvbHVtbiArIChwb2ludC5yb3cgPT0gZGVsdGFFbmQucm93ID8gZGVsdGFDb2xTaGlmdCA6IDApCiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHJvdzogZGVsdGFTdGFydC5yb3csCiAgICAgICAgICAgIGNvbHVtbjogZGVsdGFTdGFydC5jb2x1bW4KICAgICAgICB9OwogICAgfQogICAgdGhpcy5zZXRQb3NpdGlvbiA9IGZ1bmN0aW9uIChyb3csIGNvbHVtbiwgbm9DbGlwKSB7CiAgICAgICAgdmFyIHBvczsKICAgICAgICBpZiAobm9DbGlwKSB7CiAgICAgICAgICAgIHBvcyA9IHsKICAgICAgICAgICAgICAgIHJvdzogcm93LAogICAgICAgICAgICAgICAgY29sdW1uOiBjb2x1bW4KICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHBvcyA9IHRoaXMuJGNsaXBQb3NpdGlvblRvRG9jdW1lbnQocm93LCBjb2x1bW4pOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5yb3cgPT0gcG9zLnJvdyAmJiB0aGlzLmNvbHVtbiA9PSBwb3MuY29sdW1uKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgdmFyIG9sZCA9IHsKICAgICAgICAgICAgcm93OiB0aGlzLnJvdywKICAgICAgICAgICAgY29sdW1uOiB0aGlzLmNvbHVtbgogICAgICAgIH07CiAgICAgICAgdGhpcy5yb3cgPSBwb3Mucm93OwogICAgICAgIHRoaXMuY29sdW1uID0gcG9zLmNvbHVtbjsKICAgICAgICB0aGlzLl9zaWduYWwoImNoYW5nZSIsIHsKICAgICAgICAgICAgb2xkOiBvbGQsCiAgICAgICAgICAgIHZhbHVlOiBwb3MKICAgICAgICB9KTsKICAgIH07CiAgICB0aGlzLmRldGFjaCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLmRvY3VtZW50Lm9mZigiY2hhbmdlIiwgdGhpcy4kb25DaGFuZ2UpOwogICAgfTsKICAgIHRoaXMuYXR0YWNoID0gZnVuY3Rpb24gKGRvYykgewogICAgICAgIHRoaXMuZG9jdW1lbnQgPSBkb2MgfHwgdGhpcy5kb2N1bWVudDsKICAgICAgICB0aGlzLmRvY3VtZW50Lm9uKCJjaGFuZ2UiLCB0aGlzLiRvbkNoYW5nZSk7CiAgICB9OwogICAgdGhpcy4kY2xpcFBvc2l0aW9uVG9Eb2N1bWVudCA9IGZ1bmN0aW9uIChyb3csIGNvbHVtbikgewogICAgICAgIHZhciBwb3MgPSB7fTsKICAgICAgICBpZiAocm93ID49IHRoaXMuZG9jdW1lbnQuZ2V0TGVuZ3RoKCkpIHsKICAgICAgICAgICAgcG9zLnJvdyA9IE1hdGgubWF4KDAsIHRoaXMuZG9jdW1lbnQuZ2V0TGVuZ3RoKCkgLSAxKTsKICAgICAgICAgICAgcG9zLmNvbHVtbiA9IHRoaXMuZG9jdW1lbnQuZ2V0TGluZShwb3Mucm93KS5sZW5ndGg7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHJvdyA8IDApIHsKICAgICAgICAgICAgcG9zLnJvdyA9IDA7CiAgICAgICAgICAgIHBvcy5jb2x1bW4gPSAwOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgcG9zLnJvdyA9IHJvdzsKICAgICAgICAgICAgcG9zLmNvbHVtbiA9IE1hdGgubWluKHRoaXMuZG9jdW1lbnQuZ2V0TGluZShwb3Mucm93KS5sZW5ndGgsIE1hdGgubWF4KDAsIGNvbHVtbikpOwogICAgICAgIH0KICAgICAgICBpZiAoY29sdW1uIDwgMCkKICAgICAgICAgICAgcG9zLmNvbHVtbiA9IDA7CiAgICAgICAgcmV0dXJuIHBvczsKICAgIH07Cn0pLmNhbGwoQW5jaG9yLnByb3RvdHlwZSk7Cgp9KTsKCmFjZS5kZWZpbmUoImFjZS9kb2N1bWVudCIsW10sIGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSl7InVzZSBzdHJpY3QiOwp2YXIgb29wID0gcmVxdWlyZSgiLi9saWIvb29wIik7CnZhciBhcHBseURlbHRhID0gcmVxdWlyZSgiLi9hcHBseV9kZWx0YSIpLmFwcGx5RGVsdGE7CnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCIuL2xpYi9ldmVudF9lbWl0dGVyIikuRXZlbnRFbWl0dGVyOwp2YXIgUmFuZ2UgPSByZXF1aXJlKCIuL3JhbmdlIikuUmFuZ2U7CnZhciBBbmNob3IgPSByZXF1aXJlKCIuL2FuY2hvciIpLkFuY2hvcjsKdmFyIERvY3VtZW50ID0gZnVuY3Rpb24gKHRleHRPckxpbmVzKSB7CiAgICB0aGlzLiRsaW5lcyA9IFsiIl07CiAgICBpZiAodGV4dE9yTGluZXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy4kbGluZXMgPSBbIiJdOwogICAgfQogICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh0ZXh0T3JMaW5lcykpIHsKICAgICAgICB0aGlzLmluc2VydE1lcmdlZExpbmVzKHsgcm93OiAwLCBjb2x1bW46IDAgfSwgdGV4dE9yTGluZXMpOwogICAgfQogICAgZWxzZSB7CiAgICAgICAgdGhpcy5pbnNlcnQoeyByb3c6IDAsIGNvbHVtbjogMCB9LCB0ZXh0T3JMaW5lcyk7CiAgICB9Cn07CihmdW5jdGlvbiAoKSB7CiAgICBvb3AuaW1wbGVtZW50KHRoaXMsIEV2ZW50RW1pdHRlcik7CiAgICB0aGlzLnNldFZhbHVlID0gZnVuY3Rpb24gKHRleHQpIHsKICAgICAgICB2YXIgbGVuID0gdGhpcy5nZXRMZW5ndGgoKSAtIDE7CiAgICAgICAgdGhpcy5yZW1vdmUobmV3IFJhbmdlKDAsIDAsIGxlbiwgdGhpcy5nZXRMaW5lKGxlbikubGVuZ3RoKSk7CiAgICAgICAgdGhpcy5pbnNlcnQoeyByb3c6IDAsIGNvbHVtbjogMCB9LCB0ZXh0IHx8ICIiKTsKICAgIH07CiAgICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLmdldEFsbExpbmVzKCkuam9pbih0aGlzLmdldE5ld0xpbmVDaGFyYWN0ZXIoKSk7CiAgICB9OwogICAgdGhpcy5jcmVhdGVBbmNob3IgPSBmdW5jdGlvbiAocm93LCBjb2x1bW4pIHsKICAgICAgICByZXR1cm4gbmV3IEFuY2hvcih0aGlzLCByb3csIGNvbHVtbik7CiAgICB9OwogICAgaWYgKCJhYWEiLnNwbGl0KC9hLykubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy4kc3BsaXQgPSBmdW5jdGlvbiAodGV4dCkgewogICAgICAgICAgICByZXR1cm4gdGV4dC5yZXBsYWNlKC9cclxufFxyL2csICJcbiIpLnNwbGl0KCJcbiIpOwogICAgICAgIH07CiAgICB9CiAgICBlbHNlIHsKICAgICAgICB0aGlzLiRzcGxpdCA9IGZ1bmN0aW9uICh0ZXh0KSB7CiAgICAgICAgICAgIHJldHVybiB0ZXh0LnNwbGl0KC9cclxufFxyfFxuLyk7CiAgICAgICAgfTsKICAgIH0KICAgIHRoaXMuJGRldGVjdE5ld0xpbmUgPSBmdW5jdGlvbiAodGV4dCkgewogICAgICAgIHZhciBtYXRjaCA9IHRleHQubWF0Y2goL14uKj8oXHJcbnxccnxcbikvbSk7CiAgICAgICAgdGhpcy4kYXV0b05ld0xpbmUgPSBtYXRjaCA/IG1hdGNoWzFdIDogIlxuIjsKICAgICAgICB0aGlzLl9zaWduYWwoImNoYW5nZU5ld0xpbmVNb2RlIik7CiAgICB9OwogICAgdGhpcy5nZXROZXdMaW5lQ2hhcmFjdGVyID0gZnVuY3Rpb24gKCkgewogICAgICAgIHN3aXRjaCAodGhpcy4kbmV3TGluZU1vZGUpIHsKICAgICAgICAgICAgY2FzZSAid2luZG93cyI6CiAgICAgICAgICAgICAgICByZXR1cm4gIlxyXG4iOwogICAgICAgICAgICBjYXNlICJ1bml4IjoKICAgICAgICAgICAgICAgIHJldHVybiAiXG4iOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGF1dG9OZXdMaW5lIHx8ICJcbiI7CiAgICAgICAgfQogICAgfTsKICAgIHRoaXMuJGF1dG9OZXdMaW5lID0gIiI7CiAgICB0aGlzLiRuZXdMaW5lTW9kZSA9ICJhdXRvIjsKICAgIHRoaXMuc2V0TmV3TGluZU1vZGUgPSBmdW5jdGlvbiAobmV3TGluZU1vZGUpIHsKICAgICAgICBpZiAodGhpcy4kbmV3TGluZU1vZGUgPT09IG5ld0xpbmVNb2RlKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgdGhpcy4kbmV3TGluZU1vZGUgPSBuZXdMaW5lTW9kZTsKICAgICAgICB0aGlzLl9zaWduYWwoImNoYW5nZU5ld0xpbmVNb2RlIik7CiAgICB9OwogICAgdGhpcy5nZXROZXdMaW5lTW9kZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kbmV3TGluZU1vZGU7CiAgICB9OwogICAgdGhpcy5pc05ld0xpbmUgPSBmdW5jdGlvbiAodGV4dCkgewogICAgICAgIHJldHVybiAodGV4dCA9PSAiXHJcbiIgfHwgdGV4dCA9PSAiXHIiIHx8IHRleHQgPT0gIlxuIik7CiAgICB9OwogICAgdGhpcy5nZXRMaW5lID0gZnVuY3Rpb24gKHJvdykgewogICAgICAgIHJldHVybiB0aGlzLiRsaW5lc1tyb3ddIHx8ICIiOwogICAgfTsKICAgIHRoaXMuZ2V0TGluZXMgPSBmdW5jdGlvbiAoZmlyc3RSb3csIGxhc3RSb3cpIHsKICAgICAgICByZXR1cm4gdGhpcy4kbGluZXMuc2xpY2UoZmlyc3RSb3csIGxhc3RSb3cgKyAxKTsKICAgIH07CiAgICB0aGlzLmdldEFsbExpbmVzID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLmdldExpbmVzKDAsIHRoaXMuZ2V0TGVuZ3RoKCkpOwogICAgfTsKICAgIHRoaXMuZ2V0TGVuZ3RoID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLiRsaW5lcy5sZW5ndGg7CiAgICB9OwogICAgdGhpcy5nZXRUZXh0UmFuZ2UgPSBmdW5jdGlvbiAocmFuZ2UpIHsKICAgICAgICByZXR1cm4gdGhpcy5nZXRMaW5lc0ZvclJhbmdlKHJhbmdlKS5qb2luKHRoaXMuZ2V0TmV3TGluZUNoYXJhY3RlcigpKTsKICAgIH07CiAgICB0aGlzLmdldExpbmVzRm9yUmFuZ2UgPSBmdW5jdGlvbiAocmFuZ2UpIHsKICAgICAgICB2YXIgbGluZXM7CiAgICAgICAgaWYgKHJhbmdlLnN0YXJ0LnJvdyA9PT0gcmFuZ2UuZW5kLnJvdykgewogICAgICAgICAgICBsaW5lcyA9IFt0aGlzLmdldExpbmUocmFuZ2Uuc3RhcnQucm93KS5zdWJzdHJpbmcocmFuZ2Uuc3RhcnQuY29sdW1uLCByYW5nZS5lbmQuY29sdW1uKV07CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBsaW5lcyA9IHRoaXMuZ2V0TGluZXMocmFuZ2Uuc3RhcnQucm93LCByYW5nZS5lbmQucm93KTsKICAgICAgICAgICAgbGluZXNbMF0gPSAobGluZXNbMF0gfHwgIiIpLnN1YnN0cmluZyhyYW5nZS5zdGFydC5jb2x1bW4pOwogICAgICAgICAgICB2YXIgbCA9IGxpbmVzLmxlbmd0aCAtIDE7CiAgICAgICAgICAgIGlmIChyYW5nZS5lbmQucm93IC0gcmFuZ2Uuc3RhcnQucm93ID09IGwpCiAgICAgICAgICAgICAgICBsaW5lc1tsXSA9IGxpbmVzW2xdLnN1YnN0cmluZygwLCByYW5nZS5lbmQuY29sdW1uKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGxpbmVzOwogICAgfTsKICAgIHRoaXMuaW5zZXJ0TGluZXMgPSBmdW5jdGlvbiAocm93LCBsaW5lcykgewogICAgICAgIGNvbnNvbGUud2FybigiVXNlIG9mIGRvY3VtZW50Lmluc2VydExpbmVzIGlzIGRlcHJlY2F0ZWQuIFVzZSB0aGUgaW5zZXJ0RnVsbExpbmVzIG1ldGhvZCBpbnN0ZWFkLiIpOwogICAgICAgIHJldHVybiB0aGlzLmluc2VydEZ1bGxMaW5lcyhyb3csIGxpbmVzKTsKICAgIH07CiAgICB0aGlzLnJlbW92ZUxpbmVzID0gZnVuY3Rpb24gKGZpcnN0Um93LCBsYXN0Um93KSB7CiAgICAgICAgY29uc29sZS53YXJuKCJVc2Ugb2YgZG9jdW1lbnQucmVtb3ZlTGluZXMgaXMgZGVwcmVjYXRlZC4gVXNlIHRoZSByZW1vdmVGdWxsTGluZXMgbWV0aG9kIGluc3RlYWQuIik7CiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlRnVsbExpbmVzKGZpcnN0Um93LCBsYXN0Um93KTsKICAgIH07CiAgICB0aGlzLmluc2VydE5ld0xpbmUgPSBmdW5jdGlvbiAocG9zaXRpb24pIHsKICAgICAgICBjb25zb2xlLndhcm4oIlVzZSBvZiBkb2N1bWVudC5pbnNlcnROZXdMaW5lIGlzIGRlcHJlY2F0ZWQuIFVzZSBpbnNlcnRNZXJnZWRMaW5lcyhwb3NpdGlvbiwgWycnLCAnJ10pIGluc3RlYWQuIik7CiAgICAgICAgcmV0dXJuIHRoaXMuaW5zZXJ0TWVyZ2VkTGluZXMocG9zaXRpb24sIFsiIiwgIiJdKTsKICAgIH07CiAgICB0aGlzLmluc2VydCA9IGZ1bmN0aW9uIChwb3NpdGlvbiwgdGV4dCkgewogICAgICAgIGlmICh0aGlzLmdldExlbmd0aCgpIDw9IDEpCiAgICAgICAgICAgIHRoaXMuJGRldGVjdE5ld0xpbmUodGV4dCk7CiAgICAgICAgcmV0dXJuIHRoaXMuaW5zZXJ0TWVyZ2VkTGluZXMocG9zaXRpb24sIHRoaXMuJHNwbGl0KHRleHQpKTsKICAgIH07CiAgICB0aGlzLmluc2VydEluTGluZSA9IGZ1bmN0aW9uIChwb3NpdGlvbiwgdGV4dCkgewogICAgICAgIHZhciBzdGFydCA9IHRoaXMuY2xpcHBlZFBvcyhwb3NpdGlvbi5yb3csIHBvc2l0aW9uLmNvbHVtbik7CiAgICAgICAgdmFyIGVuZCA9IHRoaXMucG9zKHBvc2l0aW9uLnJvdywgcG9zaXRpb24uY29sdW1uICsgdGV4dC5sZW5ndGgpOwogICAgICAgIHRoaXMuYXBwbHlEZWx0YSh7CiAgICAgICAgICAgIHN0YXJ0OiBzdGFydCwKICAgICAgICAgICAgZW5kOiBlbmQsCiAgICAgICAgICAgIGFjdGlvbjogImluc2VydCIsCiAgICAgICAgICAgIGxpbmVzOiBbdGV4dF0KICAgICAgICB9LCB0cnVlKTsKICAgICAgICByZXR1cm4gdGhpcy5jbG9uZVBvcyhlbmQpOwogICAgfTsKICAgIHRoaXMuY2xpcHBlZFBvcyA9IGZ1bmN0aW9uIChyb3csIGNvbHVtbikgewogICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldExlbmd0aCgpOwogICAgICAgIGlmIChyb3cgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICByb3cgPSBsZW5ndGg7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKHJvdyA8IDApIHsKICAgICAgICAgICAgcm93ID0gMDsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAocm93ID49IGxlbmd0aCkgewogICAgICAgICAgICByb3cgPSBsZW5ndGggLSAxOwogICAgICAgICAgICBjb2x1bW4gPSB1bmRlZmluZWQ7CiAgICAgICAgfQogICAgICAgIHZhciBsaW5lID0gdGhpcy5nZXRMaW5lKHJvdyk7CiAgICAgICAgaWYgKGNvbHVtbiA9PSB1bmRlZmluZWQpCiAgICAgICAgICAgIGNvbHVtbiA9IGxpbmUubGVuZ3RoOwogICAgICAgIGNvbHVtbiA9IE1hdGgubWluKE1hdGgubWF4KGNvbHVtbiwgMCksIGxpbmUubGVuZ3RoKTsKICAgICAgICByZXR1cm4geyByb3c6IHJvdywgY29sdW1uOiBjb2x1bW4gfTsKICAgIH07CiAgICB0aGlzLmNsb25lUG9zID0gZnVuY3Rpb24gKHBvcykgewogICAgICAgIHJldHVybiB7IHJvdzogcG9zLnJvdywgY29sdW1uOiBwb3MuY29sdW1uIH07CiAgICB9OwogICAgdGhpcy5wb3MgPSBmdW5jdGlvbiAocm93LCBjb2x1bW4pIHsKICAgICAgICByZXR1cm4geyByb3c6IHJvdywgY29sdW1uOiBjb2x1bW4gfTsKICAgIH07CiAgICB0aGlzLiRjbGlwUG9zaXRpb24gPSBmdW5jdGlvbiAocG9zaXRpb24pIHsKICAgICAgICB2YXIgbGVuZ3RoID0gdGhpcy5nZXRMZW5ndGgoKTsKICAgICAgICBpZiAocG9zaXRpb24ucm93ID49IGxlbmd0aCkgewogICAgICAgICAgICBwb3NpdGlvbi5yb3cgPSBNYXRoLm1heCgwLCBsZW5ndGggLSAxKTsKICAgICAgICAgICAgcG9zaXRpb24uY29sdW1uID0gdGhpcy5nZXRMaW5lKGxlbmd0aCAtIDEpLmxlbmd0aDsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHBvc2l0aW9uLnJvdyA9IE1hdGgubWF4KDAsIHBvc2l0aW9uLnJvdyk7CiAgICAgICAgICAgIHBvc2l0aW9uLmNvbHVtbiA9IE1hdGgubWluKE1hdGgubWF4KHBvc2l0aW9uLmNvbHVtbiwgMCksIHRoaXMuZ2V0TGluZShwb3NpdGlvbi5yb3cpLmxlbmd0aCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBwb3NpdGlvbjsKICAgIH07CiAgICB0aGlzLmluc2VydEZ1bGxMaW5lcyA9IGZ1bmN0aW9uIChyb3csIGxpbmVzKSB7CiAgICAgICAgcm93ID0gTWF0aC5taW4oTWF0aC5tYXgocm93LCAwKSwgdGhpcy5nZXRMZW5ndGgoKSk7CiAgICAgICAgdmFyIGNvbHVtbiA9IDA7CiAgICAgICAgaWYgKHJvdyA8IHRoaXMuZ2V0TGVuZ3RoKCkpIHsKICAgICAgICAgICAgbGluZXMgPSBsaW5lcy5jb25jYXQoWyIiXSk7CiAgICAgICAgICAgIGNvbHVtbiA9IDA7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBsaW5lcyA9IFsiIl0uY29uY2F0KGxpbmVzKTsKICAgICAgICAgICAgcm93LS07CiAgICAgICAgICAgIGNvbHVtbiA9IHRoaXMuJGxpbmVzW3Jvd10ubGVuZ3RoOwogICAgICAgIH0KICAgICAgICB0aGlzLmluc2VydE1lcmdlZExpbmVzKHsgcm93OiByb3csIGNvbHVtbjogY29sdW1uIH0sIGxpbmVzKTsKICAgIH07CiAgICB0aGlzLmluc2VydE1lcmdlZExpbmVzID0gZnVuY3Rpb24gKHBvc2l0aW9uLCBsaW5lcykgewogICAgICAgIHZhciBzdGFydCA9IHRoaXMuY2xpcHBlZFBvcyhwb3NpdGlvbi5yb3csIHBvc2l0aW9uLmNvbHVtbik7CiAgICAgICAgdmFyIGVuZCA9IHsKICAgICAgICAgICAgcm93OiBzdGFydC5yb3cgKyBsaW5lcy5sZW5ndGggLSAxLAogICAgICAgICAgICBjb2x1bW46IChsaW5lcy5sZW5ndGggPT0gMSA/IHN0YXJ0LmNvbHVtbiA6IDApICsgbGluZXNbbGluZXMubGVuZ3RoIC0gMV0ubGVuZ3RoCiAgICAgICAgfTsKICAgICAgICB0aGlzLmFwcGx5RGVsdGEoewogICAgICAgICAgICBzdGFydDogc3RhcnQsCiAgICAgICAgICAgIGVuZDogZW5kLAogICAgICAgICAgICBhY3Rpb246ICJpbnNlcnQiLAogICAgICAgICAgICBsaW5lczogbGluZXMKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gdGhpcy5jbG9uZVBvcyhlbmQpOwogICAgfTsKICAgIHRoaXMucmVtb3ZlID0gZnVuY3Rpb24gKHJhbmdlKSB7CiAgICAgICAgdmFyIHN0YXJ0ID0gdGhpcy5jbGlwcGVkUG9zKHJhbmdlLnN0YXJ0LnJvdywgcmFuZ2Uuc3RhcnQuY29sdW1uKTsKICAgICAgICB2YXIgZW5kID0gdGhpcy5jbGlwcGVkUG9zKHJhbmdlLmVuZC5yb3csIHJhbmdlLmVuZC5jb2x1bW4pOwogICAgICAgIHRoaXMuYXBwbHlEZWx0YSh7CiAgICAgICAgICAgIHN0YXJ0OiBzdGFydCwKICAgICAgICAgICAgZW5kOiBlbmQsCiAgICAgICAgICAgIGFjdGlvbjogInJlbW92ZSIsCiAgICAgICAgICAgIGxpbmVzOiB0aGlzLmdldExpbmVzRm9yUmFuZ2UoeyBzdGFydDogc3RhcnQsIGVuZDogZW5kIH0pCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHRoaXMuY2xvbmVQb3Moc3RhcnQpOwogICAgfTsKICAgIHRoaXMucmVtb3ZlSW5MaW5lID0gZnVuY3Rpb24gKHJvdywgc3RhcnRDb2x1bW4sIGVuZENvbHVtbikgewogICAgICAgIHZhciBzdGFydCA9IHRoaXMuY2xpcHBlZFBvcyhyb3csIHN0YXJ0Q29sdW1uKTsKICAgICAgICB2YXIgZW5kID0gdGhpcy5jbGlwcGVkUG9zKHJvdywgZW5kQ29sdW1uKTsKICAgICAgICB0aGlzLmFwcGx5RGVsdGEoewogICAgICAgICAgICBzdGFydDogc3RhcnQsCiAgICAgICAgICAgIGVuZDogZW5kLAogICAgICAgICAgICBhY3Rpb246ICJyZW1vdmUiLAogICAgICAgICAgICBsaW5lczogdGhpcy5nZXRMaW5lc0ZvclJhbmdlKHsgc3RhcnQ6IHN0YXJ0LCBlbmQ6IGVuZCB9KQogICAgICAgIH0sIHRydWUpOwogICAgICAgIHJldHVybiB0aGlzLmNsb25lUG9zKHN0YXJ0KTsKICAgIH07CiAgICB0aGlzLnJlbW92ZUZ1bGxMaW5lcyA9IGZ1bmN0aW9uIChmaXJzdFJvdywgbGFzdFJvdykgewogICAgICAgIGZpcnN0Um93ID0gTWF0aC5taW4oTWF0aC5tYXgoMCwgZmlyc3RSb3cpLCB0aGlzLmdldExlbmd0aCgpIC0gMSk7CiAgICAgICAgbGFzdFJvdyA9IE1hdGgubWluKE1hdGgubWF4KDAsIGxhc3RSb3cpLCB0aGlzLmdldExlbmd0aCgpIC0gMSk7CiAgICAgICAgdmFyIGRlbGV0ZUZpcnN0TmV3TGluZSA9IGxhc3RSb3cgPT0gdGhpcy5nZXRMZW5ndGgoKSAtIDEgJiYgZmlyc3RSb3cgPiAwOwogICAgICAgIHZhciBkZWxldGVMYXN0TmV3TGluZSA9IGxhc3RSb3cgPCB0aGlzLmdldExlbmd0aCgpIC0gMTsKICAgICAgICB2YXIgc3RhcnRSb3cgPSAoZGVsZXRlRmlyc3ROZXdMaW5lID8gZmlyc3RSb3cgLSAxIDogZmlyc3RSb3cpOwogICAgICAgIHZhciBzdGFydENvbCA9IChkZWxldGVGaXJzdE5ld0xpbmUgPyB0aGlzLmdldExpbmUoc3RhcnRSb3cpLmxlbmd0aCA6IDApOwogICAgICAgIHZhciBlbmRSb3cgPSAoZGVsZXRlTGFzdE5ld0xpbmUgPyBsYXN0Um93ICsgMSA6IGxhc3RSb3cpOwogICAgICAgIHZhciBlbmRDb2wgPSAoZGVsZXRlTGFzdE5ld0xpbmUgPyAwIDogdGhpcy5nZXRMaW5lKGVuZFJvdykubGVuZ3RoKTsKICAgICAgICB2YXIgcmFuZ2UgPSBuZXcgUmFuZ2Uoc3RhcnRSb3csIHN0YXJ0Q29sLCBlbmRSb3csIGVuZENvbCk7CiAgICAgICAgdmFyIGRlbGV0ZWRMaW5lcyA9IHRoaXMuJGxpbmVzLnNsaWNlKGZpcnN0Um93LCBsYXN0Um93ICsgMSk7CiAgICAgICAgdGhpcy5hcHBseURlbHRhKHsKICAgICAgICAgICAgc3RhcnQ6IHJhbmdlLnN0YXJ0LAogICAgICAgICAgICBlbmQ6IHJhbmdlLmVuZCwKICAgICAgICAgICAgYWN0aW9uOiAicmVtb3ZlIiwKICAgICAgICAgICAgbGluZXM6IHRoaXMuZ2V0TGluZXNGb3JSYW5nZShyYW5nZSkKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gZGVsZXRlZExpbmVzOwogICAgfTsKICAgIHRoaXMucmVtb3ZlTmV3TGluZSA9IGZ1bmN0aW9uIChyb3cpIHsKICAgICAgICBpZiAocm93IDwgdGhpcy5nZXRMZW5ndGgoKSAtIDEgJiYgcm93ID49IDApIHsKICAgICAgICAgICAgdGhpcy5hcHBseURlbHRhKHsKICAgICAgICAgICAgICAgIHN0YXJ0OiB0aGlzLnBvcyhyb3csIHRoaXMuZ2V0TGluZShyb3cpLmxlbmd0aCksCiAgICAgICAgICAgICAgICBlbmQ6IHRoaXMucG9zKHJvdyArIDEsIDApLAogICAgICAgICAgICAgICAgYWN0aW9uOiAicmVtb3ZlIiwKICAgICAgICAgICAgICAgIGxpbmVzOiBbIiIsICIiXQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9OwogICAgdGhpcy5yZXBsYWNlID0gZnVuY3Rpb24gKHJhbmdlLCB0ZXh0KSB7CiAgICAgICAgaWYgKCEocmFuZ2UgaW5zdGFuY2VvZiBSYW5nZSkpCiAgICAgICAgICAgIHJhbmdlID0gUmFuZ2UuZnJvbVBvaW50cyhyYW5nZS5zdGFydCwgcmFuZ2UuZW5kKTsKICAgICAgICBpZiAodGV4dC5sZW5ndGggPT09IDAgJiYgcmFuZ2UuaXNFbXB0eSgpKQogICAgICAgICAgICByZXR1cm4gcmFuZ2Uuc3RhcnQ7CiAgICAgICAgaWYgKHRleHQgPT0gdGhpcy5nZXRUZXh0UmFuZ2UocmFuZ2UpKQogICAgICAgICAgICByZXR1cm4gcmFuZ2UuZW5kOwogICAgICAgIHRoaXMucmVtb3ZlKHJhbmdlKTsKICAgICAgICB2YXIgZW5kOwogICAgICAgIGlmICh0ZXh0KSB7CiAgICAgICAgICAgIGVuZCA9IHRoaXMuaW5zZXJ0KHJhbmdlLnN0YXJ0LCB0ZXh0KTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGVuZCA9IHJhbmdlLnN0YXJ0OwogICAgICAgIH0KICAgICAgICByZXR1cm4gZW5kOwogICAgfTsKICAgIHRoaXMuYXBwbHlEZWx0YXMgPSBmdW5jdGlvbiAoZGVsdGFzKSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkZWx0YXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdGhpcy5hcHBseURlbHRhKGRlbHRhc1tpXSk7CiAgICAgICAgfQogICAgfTsKICAgIHRoaXMucmV2ZXJ0RGVsdGFzID0gZnVuY3Rpb24gKGRlbHRhcykgewogICAgICAgIGZvciAodmFyIGkgPSBkZWx0YXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICAgICAgdGhpcy5yZXZlcnREZWx0YShkZWx0YXNbaV0pOwogICAgICAgIH0KICAgIH07CiAgICB0aGlzLmFwcGx5RGVsdGEgPSBmdW5jdGlvbiAoZGVsdGEsIGRvTm90VmFsaWRhdGUpIHsKICAgICAgICB2YXIgaXNJbnNlcnQgPSBkZWx0YS5hY3Rpb24gPT0gImluc2VydCI7CiAgICAgICAgaWYgKGlzSW5zZXJ0ID8gZGVsdGEubGluZXMubGVuZ3RoIDw9IDEgJiYgIWRlbHRhLmxpbmVzWzBdCiAgICAgICAgICAgIDogIVJhbmdlLmNvbXBhcmVQb2ludHMoZGVsdGEuc3RhcnQsIGRlbHRhLmVuZCkpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBpZiAoaXNJbnNlcnQgJiYgZGVsdGEubGluZXMubGVuZ3RoID4gMjAwMDApIHsKICAgICAgICAgICAgdGhpcy4kc3BsaXRBbmRhcHBseUxhcmdlRGVsdGEoZGVsdGEsIDIwMDAwKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGFwcGx5RGVsdGEodGhpcy4kbGluZXMsIGRlbHRhLCBkb05vdFZhbGlkYXRlKTsKICAgICAgICAgICAgdGhpcy5fc2lnbmFsKCJjaGFuZ2UiLCBkZWx0YSk7CiAgICAgICAgfQogICAgfTsKICAgIHRoaXMuJHNhZmVBcHBseURlbHRhID0gZnVuY3Rpb24gKGRlbHRhKSB7CiAgICAgICAgdmFyIGRvY0xlbmd0aCA9IHRoaXMuJGxpbmVzLmxlbmd0aDsKICAgICAgICBpZiAoZGVsdGEuYWN0aW9uID09ICJyZW1vdmUiICYmIGRlbHRhLnN0YXJ0LnJvdyA8IGRvY0xlbmd0aCAmJiBkZWx0YS5lbmQucm93IDwgZG9jTGVuZ3RoCiAgICAgICAgICAgIHx8IGRlbHRhLmFjdGlvbiA9PSAiaW5zZXJ0IiAmJiBkZWx0YS5zdGFydC5yb3cgPD0gZG9jTGVuZ3RoKSB7CiAgICAgICAgICAgIHRoaXMuYXBwbHlEZWx0YShkZWx0YSk7CiAgICAgICAgfQogICAgfTsKICAgIHRoaXMuJHNwbGl0QW5kYXBwbHlMYXJnZURlbHRhID0gZnVuY3Rpb24gKGRlbHRhLCBNQVgpIHsKICAgICAgICB2YXIgbGluZXMgPSBkZWx0YS5saW5lczsKICAgICAgICB2YXIgbCA9IGxpbmVzLmxlbmd0aCAtIE1BWCArIDE7CiAgICAgICAgdmFyIHJvdyA9IGRlbHRhLnN0YXJ0LnJvdzsKICAgICAgICB2YXIgY29sdW1uID0gZGVsdGEuc3RhcnQuY29sdW1uOwogICAgICAgIGZvciAodmFyIGZyb20gPSAwLCB0byA9IDA7IGZyb20gPCBsOyBmcm9tID0gdG8pIHsKICAgICAgICAgICAgdG8gKz0gTUFYIC0gMTsKICAgICAgICAgICAgdmFyIGNodW5rID0gbGluZXMuc2xpY2UoZnJvbSwgdG8pOwogICAgICAgICAgICBjaHVuay5wdXNoKCIiKTsKICAgICAgICAgICAgdGhpcy5hcHBseURlbHRhKHsKICAgICAgICAgICAgICAgIHN0YXJ0OiB0aGlzLnBvcyhyb3cgKyBmcm9tLCBjb2x1bW4pLAogICAgICAgICAgICAgICAgZW5kOiB0aGlzLnBvcyhyb3cgKyB0bywgY29sdW1uID0gMCksCiAgICAgICAgICAgICAgICBhY3Rpb246IGRlbHRhLmFjdGlvbiwKICAgICAgICAgICAgICAgIGxpbmVzOiBjaHVuawogICAgICAgICAgICB9LCB0cnVlKTsKICAgICAgICB9CiAgICAgICAgZGVsdGEubGluZXMgPSBsaW5lcy5zbGljZShmcm9tKTsKICAgICAgICBkZWx0YS5zdGFydC5yb3cgPSByb3cgKyBmcm9tOwogICAgICAgIGRlbHRhLnN0YXJ0LmNvbHVtbiA9IGNvbHVtbjsKICAgICAgICB0aGlzLmFwcGx5RGVsdGEoZGVsdGEsIHRydWUpOwogICAgfTsKICAgIHRoaXMucmV2ZXJ0RGVsdGEgPSBmdW5jdGlvbiAoZGVsdGEpIHsKICAgICAgICB0aGlzLiRzYWZlQXBwbHlEZWx0YSh7CiAgICAgICAgICAgIHN0YXJ0OiB0aGlzLmNsb25lUG9zKGRlbHRhLnN0YXJ0KSwKICAgICAgICAgICAgZW5kOiB0aGlzLmNsb25lUG9zKGRlbHRhLmVuZCksCiAgICAgICAgICAgIGFjdGlvbjogKGRlbHRhLmFjdGlvbiA9PSAiaW5zZXJ0IiA/ICJyZW1vdmUiIDogImluc2VydCIpLAogICAgICAgICAgICBsaW5lczogZGVsdGEubGluZXMuc2xpY2UoKQogICAgICAgIH0pOwogICAgfTsKICAgIHRoaXMuaW5kZXhUb1Bvc2l0aW9uID0gZnVuY3Rpb24gKGluZGV4LCBzdGFydFJvdykgewogICAgICAgIHZhciBsaW5lcyA9IHRoaXMuJGxpbmVzIHx8IHRoaXMuZ2V0QWxsTGluZXMoKTsKICAgICAgICB2YXIgbmV3bGluZUxlbmd0aCA9IHRoaXMuZ2V0TmV3TGluZUNoYXJhY3RlcigpLmxlbmd0aDsKICAgICAgICBmb3IgKHZhciBpID0gc3RhcnRSb3cgfHwgMCwgbCA9IGxpbmVzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgICAgICBpbmRleCAtPSBsaW5lc1tpXS5sZW5ndGggKyBuZXdsaW5lTGVuZ3RoOwogICAgICAgICAgICBpZiAoaW5kZXggPCAwKQogICAgICAgICAgICAgICAgcmV0dXJuIHsgcm93OiBpLCBjb2x1bW46IGluZGV4ICsgbGluZXNbaV0ubGVuZ3RoICsgbmV3bGluZUxlbmd0aCB9OwogICAgICAgIH0KICAgICAgICByZXR1cm4geyByb3c6IGwgLSAxLCBjb2x1bW46IGluZGV4ICsgbGluZXNbbCAtIDFdLmxlbmd0aCArIG5ld2xpbmVMZW5ndGggfTsKICAgIH07CiAgICB0aGlzLnBvc2l0aW9uVG9JbmRleCA9IGZ1bmN0aW9uIChwb3MsIHN0YXJ0Um93KSB7CiAgICAgICAgdmFyIGxpbmVzID0gdGhpcy4kbGluZXMgfHwgdGhpcy5nZXRBbGxMaW5lcygpOwogICAgICAgIHZhciBuZXdsaW5lTGVuZ3RoID0gdGhpcy5nZXROZXdMaW5lQ2hhcmFjdGVyKCkubGVuZ3RoOwogICAgICAgIHZhciBpbmRleCA9IDA7CiAgICAgICAgdmFyIHJvdyA9IE1hdGgubWluKHBvcy5yb3csIGxpbmVzLmxlbmd0aCk7CiAgICAgICAgZm9yICh2YXIgaSA9IHN0YXJ0Um93IHx8IDA7IGkgPCByb3c7ICsraSkKICAgICAgICAgICAgaW5kZXggKz0gbGluZXNbaV0ubGVuZ3RoICsgbmV3bGluZUxlbmd0aDsKICAgICAgICByZXR1cm4gaW5kZXggKyBwb3MuY29sdW1uOwogICAgfTsKfSkuY2FsbChEb2N1bWVudC5wcm90b3R5cGUpOwpleHBvcnRzLkRvY3VtZW50ID0gRG9jdW1lbnQ7Cgp9KTsKCmFjZS5kZWZpbmUoImFjZS9saWIvbGFuZyIsW10sIGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSl7InVzZSBzdHJpY3QiOwpleHBvcnRzLmxhc3QgPSBmdW5jdGlvbiAoYSkgewogICAgcmV0dXJuIGFbYS5sZW5ndGggLSAxXTsKfTsKZXhwb3J0cy5zdHJpbmdSZXZlcnNlID0gZnVuY3Rpb24gKHN0cmluZykgewogICAgcmV0dXJuIHN0cmluZy5zcGxpdCgiIikucmV2ZXJzZSgpLmpvaW4oIiIpOwp9OwpleHBvcnRzLnN0cmluZ1JlcGVhdCA9IGZ1bmN0aW9uIChzdHJpbmcsIGNvdW50KSB7CiAgICB2YXIgcmVzdWx0ID0gJyc7CiAgICB3aGlsZSAoY291bnQgPiAwKSB7CiAgICAgICAgaWYgKGNvdW50ICYgMSkKICAgICAgICAgICAgcmVzdWx0ICs9IHN0cmluZzsKICAgICAgICBpZiAoY291bnQgPj49IDEpCiAgICAgICAgICAgIHN0cmluZyArPSBzdHJpbmc7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0Owp9Owp2YXIgdHJpbUJlZ2luUmVnZXhwID0gL15cc1xzKi87CnZhciB0cmltRW5kUmVnZXhwID0gL1xzXHMqJC87CmV4cG9ydHMuc3RyaW5nVHJpbUxlZnQgPSBmdW5jdGlvbiAoc3RyaW5nKSB7CiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UodHJpbUJlZ2luUmVnZXhwLCAnJyk7Cn07CmV4cG9ydHMuc3RyaW5nVHJpbVJpZ2h0ID0gZnVuY3Rpb24gKHN0cmluZykgewogICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKHRyaW1FbmRSZWdleHAsICcnKTsKfTsKZXhwb3J0cy5jb3B5T2JqZWN0ID0gZnVuY3Rpb24gKG9iaikgewogICAgdmFyIGNvcHkgPSB7fTsKICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBjb3B5W2tleV0gPSBvYmpba2V5XTsKICAgIH0KICAgIHJldHVybiBjb3B5Owp9OwpleHBvcnRzLmNvcHlBcnJheSA9IGZ1bmN0aW9uIChhcnJheSkgewogICAgdmFyIGNvcHkgPSBbXTsKICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXJyYXkubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgaWYgKGFycmF5W2ldICYmIHR5cGVvZiBhcnJheVtpXSA9PSAib2JqZWN0IikKICAgICAgICAgICAgY29weVtpXSA9IHRoaXMuY29weU9iamVjdChhcnJheVtpXSk7CiAgICAgICAgZWxzZQogICAgICAgICAgICBjb3B5W2ldID0gYXJyYXlbaV07CiAgICB9CiAgICByZXR1cm4gY29weTsKfTsKZXhwb3J0cy5kZWVwQ29weSA9IGZ1bmN0aW9uIGRlZXBDb3B5KG9iaikgewogICAgaWYgKHR5cGVvZiBvYmogIT09ICJvYmplY3QiIHx8ICFvYmopCiAgICAgICAgcmV0dXJuIG9iajsKICAgIHZhciBjb3B5OwogICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkgewogICAgICAgIGNvcHkgPSBbXTsKICAgICAgICBmb3IgKHZhciBrZXkgPSAwOyBrZXkgPCBvYmoubGVuZ3RoOyBrZXkrKykgewogICAgICAgICAgICBjb3B5W2tleV0gPSBkZWVwQ29weShvYmpba2V5XSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBjb3B5OwogICAgfQogICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopICE9PSAiW29iamVjdCBPYmplY3RdIikKICAgICAgICByZXR1cm4gb2JqOwogICAgY29weSA9IHt9OwogICAgZm9yICh2YXIga2V5IGluIG9iaikKICAgICAgICBjb3B5W2tleV0gPSBkZWVwQ29weShvYmpba2V5XSk7CiAgICByZXR1cm4gY29weTsKfTsKZXhwb3J0cy5hcnJheVRvTWFwID0gZnVuY3Rpb24gKGFycikgewogICAgdmFyIG1hcCA9IHt9OwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICBtYXBbYXJyW2ldXSA9IDE7CiAgICB9CiAgICByZXR1cm4gbWFwOwp9OwpleHBvcnRzLmNyZWF0ZU1hcCA9IGZ1bmN0aW9uIChwcm9wcykgewogICAgdmFyIG1hcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICBmb3IgKHZhciBpIGluIHByb3BzKSB7CiAgICAgICAgbWFwW2ldID0gcHJvcHNbaV07CiAgICB9CiAgICByZXR1cm4gbWFwOwp9OwpleHBvcnRzLmFycmF5UmVtb3ZlID0gZnVuY3Rpb24gKGFycmF5LCB2YWx1ZSkgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gYXJyYXkubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAodmFsdWUgPT09IGFycmF5W2ldKSB7CiAgICAgICAgICAgIGFycmF5LnNwbGljZShpLCAxKTsKICAgICAgICB9CiAgICB9Cn07CmV4cG9ydHMuZXNjYXBlUmVnRXhwID0gZnVuY3Rpb24gKHN0cikgewogICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oWy4qKz9eJHt9KCl8W1xdXC9cXF0pL2csICdcXCQxJyk7Cn07CmV4cG9ydHMuZXNjYXBlSFRNTCA9IGZ1bmN0aW9uIChzdHIpIHsKICAgIHJldHVybiAoIiIgKyBzdHIpLnJlcGxhY2UoLyYvZywgIiYjMzg7IikucmVwbGFjZSgvIi9nLCAiJiMzNDsiKS5yZXBsYWNlKC8nL2csICImIzM5OyIpLnJlcGxhY2UoLzwvZywgIiYjNjA7Iik7Cn07CmV4cG9ydHMuZ2V0TWF0Y2hPZmZzZXRzID0gZnVuY3Rpb24gKHN0cmluZywgcmVnRXhwKSB7CiAgICB2YXIgbWF0Y2hlcyA9IFtdOwogICAgc3RyaW5nLnJlcGxhY2UocmVnRXhwLCBmdW5jdGlvbiAoc3RyKSB7CiAgICAgICAgbWF0Y2hlcy5wdXNoKHsKICAgICAgICAgICAgb2Zmc2V0OiBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDJdLAogICAgICAgICAgICBsZW5ndGg6IHN0ci5sZW5ndGgKICAgICAgICB9KTsKICAgIH0pOwogICAgcmV0dXJuIG1hdGNoZXM7Cn07CmV4cG9ydHMuZGVmZXJyZWRDYWxsID0gZnVuY3Rpb24gKGZjbikgewogICAgdmFyIHRpbWVyID0gbnVsbDsKICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aW1lciA9IG51bGw7CiAgICAgICAgZmNuKCk7CiAgICB9OwogICAgdmFyIGRlZmVycmVkID0gZnVuY3Rpb24gKHRpbWVvdXQpIHsKICAgICAgICBkZWZlcnJlZC5jYW5jZWwoKTsKICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoY2FsbGJhY2ssIHRpbWVvdXQgfHwgMCk7CiAgICAgICAgcmV0dXJuIGRlZmVycmVkOwogICAgfTsKICAgIGRlZmVycmVkLnNjaGVkdWxlID0gZGVmZXJyZWQ7CiAgICBkZWZlcnJlZC5jYWxsID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuY2FuY2VsKCk7CiAgICAgICAgZmNuKCk7CiAgICAgICAgcmV0dXJuIGRlZmVycmVkOwogICAgfTsKICAgIGRlZmVycmVkLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpOwogICAgICAgIHRpbWVyID0gbnVsbDsKICAgICAgICByZXR1cm4gZGVmZXJyZWQ7CiAgICB9OwogICAgZGVmZXJyZWQuaXNQZW5kaW5nID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aW1lcjsKICAgIH07CiAgICByZXR1cm4gZGVmZXJyZWQ7Cn07CmV4cG9ydHMuZGVsYXllZENhbGwgPSBmdW5jdGlvbiAoZmNuLCBkZWZhdWx0VGltZW91dCkgewogICAgdmFyIHRpbWVyID0gbnVsbDsKICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aW1lciA9IG51bGw7CiAgICAgICAgZmNuKCk7CiAgICB9OwogICAgdmFyIF9zZWxmID0gZnVuY3Rpb24gKHRpbWVvdXQpIHsKICAgICAgICBpZiAodGltZXIgPT0gbnVsbCkKICAgICAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KGNhbGxiYWNrLCB0aW1lb3V0IHx8IGRlZmF1bHRUaW1lb3V0KTsKICAgIH07CiAgICBfc2VsZi5kZWxheSA9IGZ1bmN0aW9uICh0aW1lb3V0KSB7CiAgICAgICAgdGltZXIgJiYgY2xlYXJUaW1lb3V0KHRpbWVyKTsKICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoY2FsbGJhY2ssIHRpbWVvdXQgfHwgZGVmYXVsdFRpbWVvdXQpOwogICAgfTsKICAgIF9zZWxmLnNjaGVkdWxlID0gX3NlbGY7CiAgICBfc2VsZi5jYWxsID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuY2FuY2VsKCk7CiAgICAgICAgZmNuKCk7CiAgICB9OwogICAgX3NlbGYuY2FuY2VsID0gZnVuY3Rpb24gKCkgewogICAgICAgIHRpbWVyICYmIGNsZWFyVGltZW91dCh0aW1lcik7CiAgICAgICAgdGltZXIgPSBudWxsOwogICAgfTsKICAgIF9zZWxmLmlzUGVuZGluZyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdGltZXI7CiAgICB9OwogICAgcmV0dXJuIF9zZWxmOwp9OwoKfSk7CgphY2UuZGVmaW5lKCJhY2Uvd29ya2VyL21pcnJvciIsW10sIGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSkgewoidXNlIHN0cmljdCI7Cgp2YXIgRG9jdW1lbnQgPSByZXF1aXJlKCIuLi9kb2N1bWVudCIpLkRvY3VtZW50Owp2YXIgbGFuZyA9IHJlcXVpcmUoIi4uL2xpYi9sYW5nIik7CiAgICAKdmFyIE1pcnJvciA9IGV4cG9ydHMuTWlycm9yID0gZnVuY3Rpb24oc2VuZGVyKSB7CiAgICB0aGlzLnNlbmRlciA9IHNlbmRlcjsKICAgIHZhciBkb2MgPSB0aGlzLmRvYyA9IG5ldyBEb2N1bWVudCgiIik7CiAgICAKICAgIHZhciBkZWZlcnJlZFVwZGF0ZSA9IHRoaXMuZGVmZXJyZWRVcGRhdGUgPSBsYW5nLmRlbGF5ZWRDYWxsKHRoaXMub25VcGRhdGUuYmluZCh0aGlzKSk7CiAgICAKICAgIHZhciBfc2VsZiA9IHRoaXM7CiAgICBzZW5kZXIub24oImNoYW5nZSIsIGZ1bmN0aW9uKGUpIHsKICAgICAgICB2YXIgZGF0YSA9IGUuZGF0YTsKICAgICAgICBpZiAoZGF0YVswXS5zdGFydCkgewogICAgICAgICAgICBkb2MuYXBwbHlEZWx0YXMoZGF0YSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSArPSAyKSB7CiAgICAgICAgICAgICAgICB2YXIgZCwgZXJyOyAKICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGFbaSsxXSkpIHsKICAgICAgICAgICAgICAgICAgICBkID0ge2FjdGlvbjogImluc2VydCIsIHN0YXJ0OiBkYXRhW2ldLCBsaW5lczogZGF0YVtpKzFdfTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZCA9IHthY3Rpb246ICJyZW1vdmUiLCBzdGFydDogZGF0YVtpXSwgZW5kOiBkYXRhW2krMV19OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiAoKGQuYWN0aW9uID09ICJpbnNlcnQiID8gZC5zdGFydCA6IGQuZW5kKS5yb3cgPj0gZG9jLiRsaW5lcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICBlcnIgPSBuZXcgRXJyb3IoIkludmFsaWQgZGVsdGEiKTsKICAgICAgICAgICAgICAgICAgICBlcnIuZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogX3NlbGYuJHBhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVzTGVuZ3RoOiBkb2MuJGxpbmVzLmxlbmd0aCwKICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IGQuc3RhcnQsCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogZC5lbmQKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIHRocm93IGVycjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBkb2MuYXBwbHlEZWx0YShkLCB0cnVlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoX3NlbGYuJHRpbWVvdXQpCiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZFVwZGF0ZS5zY2hlZHVsZShfc2VsZi4kdGltZW91dCk7CiAgICAgICAgX3NlbGYub25VcGRhdGUoKTsKICAgIH0pOwp9OwoKKGZ1bmN0aW9uKCkgewogICAgCiAgICB0aGlzLiR0aW1lb3V0ID0gNTAwOwogICAgCiAgICB0aGlzLnNldFRpbWVvdXQgPSBmdW5jdGlvbih0aW1lb3V0KSB7CiAgICAgICAgdGhpcy4kdGltZW91dCA9IHRpbWVvdXQ7CiAgICB9OwogICAgCiAgICB0aGlzLnNldFZhbHVlID0gZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICB0aGlzLmRvYy5zZXRWYWx1ZSh2YWx1ZSk7CiAgICAgICAgdGhpcy5kZWZlcnJlZFVwZGF0ZS5zY2hlZHVsZSh0aGlzLiR0aW1lb3V0KTsKICAgIH07CiAgICAKICAgIHRoaXMuZ2V0VmFsdWUgPSBmdW5jdGlvbihjYWxsYmFja0lkKSB7CiAgICAgICAgdGhpcy5zZW5kZXIuY2FsbGJhY2sodGhpcy5kb2MuZ2V0VmFsdWUoKSwgY2FsbGJhY2tJZCk7CiAgICB9OwogICAgCiAgICB0aGlzLm9uVXBkYXRlID0gZnVuY3Rpb24oKSB7CiAgICB9OwogICAgCiAgICB0aGlzLmlzUGVuZGluZyA9IGZ1bmN0aW9uKCkgewogICAgICAgIHJldHVybiB0aGlzLmRlZmVycmVkVXBkYXRlLmlzUGVuZGluZygpOwogICAgfTsKICAgIAp9KS5jYWxsKE1pcnJvci5wcm90b3R5cGUpOwoKfSk7CgphY2UuZGVmaW5lKCJhY2UvbW9kZS9qc29uL2pzb25fcGFyc2UiLFtdLCBmdW5jdGlvbihyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpIHsKInVzZSBzdHJpY3QiOwoKICAgIHZhciBhdCwgICAgIC8vIFRoZSBpbmRleCBvZiB0aGUgY3VycmVudCBjaGFyYWN0ZXIKICAgICAgICBjaCwgICAgIC8vIFRoZSBjdXJyZW50IGNoYXJhY3RlcgogICAgICAgIGVzY2FwZWUgPSB7CiAgICAgICAgICAgICciJzogICciJywKICAgICAgICAgICAgJ1xcJzogJ1xcJywKICAgICAgICAgICAgJy8nOiAgJy8nLAogICAgICAgICAgICBiOiAgICAnXGInLAogICAgICAgICAgICBmOiAgICAnXGYnLAogICAgICAgICAgICBuOiAgICAnXG4nLAogICAgICAgICAgICByOiAgICAnXHInLAogICAgICAgICAgICB0OiAgICAnXHQnCiAgICAgICAgfSwKICAgICAgICB0ZXh0LAoKICAgICAgICBlcnJvciA9IGZ1bmN0aW9uIChtKSB7CgogICAgICAgICAgICB0aHJvdyB7CiAgICAgICAgICAgICAgICBuYW1lOiAgICAnU3ludGF4RXJyb3InLAogICAgICAgICAgICAgICAgbWVzc2FnZTogbSwKICAgICAgICAgICAgICAgIGF0OiAgICAgIGF0LAogICAgICAgICAgICAgICAgdGV4dDogICAgdGV4dAogICAgICAgICAgICB9OwogICAgICAgIH0sCgogICAgICAgIG5leHQgPSBmdW5jdGlvbiAoYykgewoKICAgICAgICAgICAgaWYgKGMgJiYgYyAhPT0gY2gpIHsKICAgICAgICAgICAgICAgIGVycm9yKCJFeHBlY3RlZCAnIiArIGMgKyAiJyBpbnN0ZWFkIG9mICciICsgY2ggKyAiJyIpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBjaCA9IHRleHQuY2hhckF0KGF0KTsKICAgICAgICAgICAgYXQgKz0gMTsKICAgICAgICAgICAgcmV0dXJuIGNoOwogICAgICAgIH0sCgogICAgICAgIG51bWJlciA9IGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICAgIHZhciBudW1iZXIsCiAgICAgICAgICAgICAgICBzdHJpbmcgPSAnJzsKCiAgICAgICAgICAgIGlmIChjaCA9PT0gJy0nKSB7CiAgICAgICAgICAgICAgICBzdHJpbmcgPSAnLSc7CiAgICAgICAgICAgICAgICBuZXh0KCctJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgd2hpbGUgKGNoID49ICcwJyAmJiBjaCA8PSAnOScpIHsKICAgICAgICAgICAgICAgIHN0cmluZyArPSBjaDsKICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoY2ggPT09ICcuJykgewogICAgICAgICAgICAgICAgc3RyaW5nICs9ICcuJzsKICAgICAgICAgICAgICAgIHdoaWxlIChuZXh0KCkgJiYgY2ggPj0gJzAnICYmIGNoIDw9ICc5JykgewogICAgICAgICAgICAgICAgICAgIHN0cmluZyArPSBjaDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoY2ggPT09ICdlJyB8fCBjaCA9PT0gJ0UnKSB7CiAgICAgICAgICAgICAgICBzdHJpbmcgKz0gY2g7CiAgICAgICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgICAgICBpZiAoY2ggPT09ICctJyB8fCBjaCA9PT0gJysnKSB7CiAgICAgICAgICAgICAgICAgICAgc3RyaW5nICs9IGNoOwogICAgICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHdoaWxlIChjaCA+PSAnMCcgJiYgY2ggPD0gJzknKSB7CiAgICAgICAgICAgICAgICAgICAgc3RyaW5nICs9IGNoOwogICAgICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBudW1iZXIgPSArc3RyaW5nOwogICAgICAgICAgICBpZiAoaXNOYU4obnVtYmVyKSkgewogICAgICAgICAgICAgICAgZXJyb3IoIkJhZCBudW1iZXIiKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBudW1iZXI7CiAgICAgICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICBzdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICB2YXIgaGV4LAogICAgICAgICAgICAgICAgaSwKICAgICAgICAgICAgICAgIHN0cmluZyA9ICcnLAogICAgICAgICAgICAgICAgdWZmZmY7CgogICAgICAgICAgICBpZiAoY2ggPT09ICciJykgewogICAgICAgICAgICAgICAgd2hpbGUgKG5leHQoKSkgewogICAgICAgICAgICAgICAgICAgIGlmIChjaCA9PT0gJyInKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZzsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNoID09PSAnXFwnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoID09PSAndScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVmZmZmID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCA0OyBpICs9IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZXggPSBwYXJzZUludChuZXh0KCksIDE2KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzRmluaXRlKGhleCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVmZmZmID0gdWZmZmYgKiAxNiArIGhleDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHVmZmZmKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZXNjYXBlZVtjaF0gPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmcgKz0gZXNjYXBlZVtjaF07CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2ggPT0gIlxuIiB8fCBjaCA9PSAiXHIiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyArPSBjaDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZXJyb3IoIkJhZCBzdHJpbmciKTsKICAgICAgICB9LAoKICAgICAgICB3aGl0ZSA9IGZ1bmN0aW9uICgpIHsKCiAgICAgICAgICAgIHdoaWxlIChjaCAmJiBjaCA8PSAnICcpIHsKICAgICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCgogICAgICAgIHdvcmQgPSBmdW5jdGlvbiAoKSB7CgogICAgICAgICAgICBzd2l0Y2ggKGNoKSB7CiAgICAgICAgICAgIGNhc2UgJ3QnOgogICAgICAgICAgICAgICAgbmV4dCgndCcpOwogICAgICAgICAgICAgICAgbmV4dCgncicpOwogICAgICAgICAgICAgICAgbmV4dCgndScpOwogICAgICAgICAgICAgICAgbmV4dCgnZScpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIGNhc2UgJ2YnOgogICAgICAgICAgICAgICAgbmV4dCgnZicpOwogICAgICAgICAgICAgICAgbmV4dCgnYScpOwogICAgICAgICAgICAgICAgbmV4dCgnbCcpOwogICAgICAgICAgICAgICAgbmV4dCgncycpOwogICAgICAgICAgICAgICAgbmV4dCgnZScpOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICBjYXNlICduJzoKICAgICAgICAgICAgICAgIG5leHQoJ24nKTsKICAgICAgICAgICAgICAgIG5leHQoJ3UnKTsKICAgICAgICAgICAgICAgIG5leHQoJ2wnKTsKICAgICAgICAgICAgICAgIG5leHQoJ2wnKTsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVycm9yKCJVbmV4cGVjdGVkICciICsgY2ggKyAiJyIpOwogICAgICAgIH0sCgogICAgICAgIHZhbHVlLCAgLy8gUGxhY2UgaG9sZGVyIGZvciB0aGUgdmFsdWUgZnVuY3Rpb24uCgogICAgICAgIGFycmF5ID0gZnVuY3Rpb24gKCkgewoKICAgICAgICAgICAgdmFyIGFycmF5ID0gW107CgogICAgICAgICAgICBpZiAoY2ggPT09ICdbJykgewogICAgICAgICAgICAgICAgbmV4dCgnWycpOwogICAgICAgICAgICAgICAgd2hpdGUoKTsKICAgICAgICAgICAgICAgIGlmIChjaCA9PT0gJ10nKSB7CiAgICAgICAgICAgICAgICAgICAgbmV4dCgnXScpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBhcnJheTsgICAvLyBlbXB0eSBhcnJheQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgd2hpbGUgKGNoKSB7CiAgICAgICAgICAgICAgICAgICAgYXJyYXkucHVzaCh2YWx1ZSgpKTsKICAgICAgICAgICAgICAgICAgICB3aGl0ZSgpOwogICAgICAgICAgICAgICAgICAgIGlmIChjaCA9PT0gJ10nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoJ10nKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFycmF5OwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBuZXh0KCcsJyk7CiAgICAgICAgICAgICAgICAgICAgd2hpdGUoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlcnJvcigiQmFkIGFycmF5Iik7CiAgICAgICAgfSwKCiAgICAgICAgb2JqZWN0ID0gZnVuY3Rpb24gKCkgewoKICAgICAgICAgICAgdmFyIGtleSwKICAgICAgICAgICAgICAgIG9iamVjdCA9IHt9OwoKICAgICAgICAgICAgaWYgKGNoID09PSAneycpIHsKICAgICAgICAgICAgICAgIG5leHQoJ3snKTsKICAgICAgICAgICAgICAgIHdoaXRlKCk7CiAgICAgICAgICAgICAgICBpZiAoY2ggPT09ICd9JykgewogICAgICAgICAgICAgICAgICAgIG5leHQoJ30nKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0OyAgIC8vIGVtcHR5IG9iamVjdAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgd2hpbGUgKGNoKSB7CiAgICAgICAgICAgICAgICAgICAga2V5ID0gc3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgICAgd2hpdGUoKTsKICAgICAgICAgICAgICAgICAgICBuZXh0KCc6Jyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkgewogICAgICAgICAgICAgICAgICAgICAgICBlcnJvcignRHVwbGljYXRlIGtleSAiJyArIGtleSArICciJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIG9iamVjdFtrZXldID0gdmFsdWUoKTsKICAgICAgICAgICAgICAgICAgICB3aGl0ZSgpOwogICAgICAgICAgICAgICAgICAgIGlmIChjaCA9PT0gJ30nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5leHQoJ30nKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iamVjdDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgbmV4dCgnLCcpOwogICAgICAgICAgICAgICAgICAgIHdoaXRlKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZXJyb3IoIkJhZCBvYmplY3QiKTsKICAgICAgICB9OwoKICAgIHZhbHVlID0gZnVuY3Rpb24gKCkgewoKICAgICAgICB3aGl0ZSgpOwogICAgICAgIHN3aXRjaCAoY2gpIHsKICAgICAgICBjYXNlICd7JzoKICAgICAgICAgICAgcmV0dXJuIG9iamVjdCgpOwogICAgICAgIGNhc2UgJ1snOgogICAgICAgICAgICByZXR1cm4gYXJyYXkoKTsKICAgICAgICBjYXNlICciJzoKICAgICAgICAgICAgcmV0dXJuIHN0cmluZygpOwogICAgICAgIGNhc2UgJy0nOgogICAgICAgICAgICByZXR1cm4gbnVtYmVyKCk7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgcmV0dXJuIGNoID49ICcwJyAmJiBjaCA8PSAnOScgPyBudW1iZXIoKSA6IHdvcmQoKTsKICAgICAgICB9CiAgICB9OwoKICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlLCByZXZpdmVyKSB7CiAgICAgICAgdmFyIHJlc3VsdDsKCiAgICAgICAgdGV4dCA9IHNvdXJjZTsKICAgICAgICBhdCA9IDA7CiAgICAgICAgY2ggPSAnICc7CiAgICAgICAgcmVzdWx0ID0gdmFsdWUoKTsKICAgICAgICB3aGl0ZSgpOwogICAgICAgIGlmIChjaCkgewogICAgICAgICAgICBlcnJvcigiU3ludGF4IGVycm9yIik7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdHlwZW9mIHJldml2ZXIgPT09ICdmdW5jdGlvbicgPyBmdW5jdGlvbiB3YWxrKGhvbGRlciwga2V5KSB7CiAgICAgICAgICAgIHZhciBrLCB2LCB2YWx1ZSA9IGhvbGRlcltrZXldOwogICAgICAgICAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JykgewogICAgICAgICAgICAgICAgZm9yIChrIGluIHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCBrKSkgewogICAgICAgICAgICAgICAgICAgICAgICB2ID0gd2Fsayh2YWx1ZSwgayk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlW2tdID0gdjsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB2YWx1ZVtrXTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcmV2aXZlci5jYWxsKGhvbGRlciwga2V5LCB2YWx1ZSk7CiAgICAgICAgfSh7Jyc6IHJlc3VsdH0sICcnKSA6IHJlc3VsdDsKICAgIH07Cn0pOwoKYWNlLmRlZmluZSgiYWNlL21vZGUvanNvbl93b3JrZXIiLFtdLCBmdW5jdGlvbihyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpIHsKInVzZSBzdHJpY3QiOwoKdmFyIG9vcCA9IHJlcXVpcmUoIi4uL2xpYi9vb3AiKTsKdmFyIE1pcnJvciA9IHJlcXVpcmUoIi4uL3dvcmtlci9taXJyb3IiKS5NaXJyb3I7CnZhciBwYXJzZSA9IHJlcXVpcmUoIi4vanNvbi9qc29uX3BhcnNlIik7Cgp2YXIgSnNvbldvcmtlciA9IGV4cG9ydHMuSnNvbldvcmtlciA9IGZ1bmN0aW9uKHNlbmRlcikgewogICAgTWlycm9yLmNhbGwodGhpcywgc2VuZGVyKTsKICAgIHRoaXMuc2V0VGltZW91dCgyMDApOwp9OwoKb29wLmluaGVyaXRzKEpzb25Xb3JrZXIsIE1pcnJvcik7CgooZnVuY3Rpb24oKSB7CgogICAgdGhpcy5vblVwZGF0ZSA9IGZ1bmN0aW9uKCkgewogICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuZG9jLmdldFZhbHVlKCk7CiAgICAgICAgdmFyIGVycm9ycyA9IFtdOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmICh2YWx1ZSkKICAgICAgICAgICAgICAgIHBhcnNlKHZhbHVlKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHZhciBwb3MgPSB0aGlzLmRvYy5pbmRleFRvUG9zaXRpb24oZS5hdC0xKTsKICAgICAgICAgICAgZXJyb3JzLnB1c2goewogICAgICAgICAgICAgICAgcm93OiBwb3Mucm93LAogICAgICAgICAgICAgICAgY29sdW1uOiBwb3MuY29sdW1uLAogICAgICAgICAgICAgICAgdGV4dDogZS5tZXNzYWdlLAogICAgICAgICAgICAgICAgdHlwZTogImVycm9yIgogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgdGhpcy5zZW5kZXIuZW1pdCgiYW5ub3RhdGUiLCBlcnJvcnMpOwogICAgfTsKCn0pLmNhbGwoSnNvbldvcmtlci5wcm90b3R5cGUpOwoKfSk7Cg=="},7907:function(Ce,P,ae){"use strict";ae.d(P,{Iu:function(){return F},cC:function(){return H},m0:function(){return Y}}),ae(4987);var ce={en:{array:"Array",auto:"Auto",appendText:"Append",appendTitle:"Append a new field with type 'auto' after this field (Ctrl+Shift+Ins)",appendSubmenuTitle:"Select the type of the field to be appended",appendTitleAuto:"Append a new field with type 'auto' (Ctrl+Shift+Ins)",ascending:"Ascending",ascendingTitle:"Sort the childs of this ${type} in ascending order",actionsMenu:"Click to open the actions menu (Ctrl+M)",cannotParseFieldError:"Cannot parse field into JSON",cannotParseValueError:"Cannot parse value into JSON",collapseAll:"Collapse all fields",compactTitle:"Compact JSON data, remove all whitespaces (Ctrl+Shift+I)",descending:"Descending",descendingTitle:"Sort the childs of this ${type} in descending order",drag:"Drag to move this field (Alt+Shift+Arrows)",duplicateKey:"duplicate key",duplicateText:"Duplicate",duplicateTitle:"Duplicate selected fields (Ctrl+D)",duplicateField:"Duplicate this field (Ctrl+D)",duplicateFieldError:"Duplicate field name",empty:"empty",expandAll:"Expand all fields",expandTitle:"Click to expand/collapse this field (Ctrl+E). \nCtrl+Click to expand/collapse including all childs.",formatTitle:"Format JSON data, with proper indentation and line feeds (Ctrl+I)",insert:"Insert",insertTitle:"Insert a new field with type 'auto' before this field (Ctrl+Ins)",insertSub:"Select the type of the field to be inserted",object:"Object",ok:"Ok",redo:"Redo (Ctrl+Shift+Z)",removeText:"Remove",removeTitle:"Remove selected fields (Ctrl+Del)",removeField:"Remove this field (Ctrl+Del)",repairTitle:"Repair JSON: fix quotes and escape characters, remove comments and JSONP notation, turn JavaScript objects into JSON.",searchTitle:"Search fields and values",searchNextResultTitle:"Next result (Enter)",searchPreviousResultTitle:"Previous result (Shift + Enter)",selectNode:"Select a node...",showAll:"show all",showMore:"show more",showMoreStatus:"displaying ${visibleChilds} of ${totalChilds} items.",sort:"Sort",sortTitle:"Sort the childs of this ${type}",sortTitleShort:"Sort contents",sortFieldLabel:"Field:",sortDirectionLabel:"Direction:",sortFieldTitle:"Select the nested field by which to sort the array or object",sortAscending:"Ascending",sortAscendingTitle:"Sort the selected field in ascending order",sortDescending:"Descending",sortDescendingTitle:"Sort the selected field in descending order",string:"String",transform:"Transform",transformTitle:"Filter, sort, or transform the childs of this ${type}",transformTitleShort:"Filter, sort, or transform contents",extract:"Extract",extractTitle:"Extract this ${type}",transformQueryTitle:"Enter a JMESPath query",transformWizardLabel:"Wizard",transformWizardFilter:"Filter",transformWizardSortBy:"Sort by",transformWizardSelectFields:"Select fields",transformQueryLabel:"Query",transformPreviewLabel:"Preview",type:"Type",typeTitle:"Change the type of this field",openUrl:"Ctrl+Click or Ctrl+Enter to open url in new window",undo:"Undo last action (Ctrl+Z)",validationCannotMove:"Cannot move a field into a child of itself",autoType:'Field type "auto". The field type is automatically determined from the value and can be a string, number, boolean, or null.',objectType:'Field type "object". An object contains an unordered set of key/value pairs.',arrayType:'Field type "array". An array contains an ordered collection of values.',stringType:'Field type "string". Field type is not determined from the value, but always returned as string.',modeEditorTitle:"Switch Editor Mode",modeCodeText:"Code",modeCodeTitle:"Switch to code highlighter",modeFormText:"Form",modeFormTitle:"Switch to form editor",modeTextText:"Text",modeTextTitle:"Switch to plain text editor",modeTreeText:"Tree",modeTreeTitle:"Switch to tree editor",modeViewText:"View",modeViewTitle:"Switch to tree view",modePreviewText:"Preview",modePreviewTitle:"Switch to preview mode",examples:"Examples",default:"Default",containsInvalidProperties:"Contains invalid properties",containsInvalidItems:"Contains invalid items"},es:{array:"Matriz",auto:"Auto",appendText:"Agregar",appendTitle:"Agregue un nuevo campo con el tipo 'auto' despu\xe9s de este campo (Ctrl + Shift + Ins)",appendSubmenuTitle:"Seleccione el tipo de campo que se agregar\xe1",appendTitleAuto:"Agregue un nuevo campo con el tipo 'auto' (Ctrl + Shift + Ins)",ascending:"Ascendente",ascendingTitle:"Ordene los elementos secundarios de este ${type} en orden ascendente",actionsMenu:"Haga clic para abrir el men\xfa de acciones (Ctrl + M)",cannotParseFieldError:"No se puede parsear el campo en JSON",cannotParseValueError:"No se puede parsear el valor en JSON",collapseAll:"Contraer todos los campos",compactTitle:"Compactar datos JSON, eliminar todos los espacios en blanco (Ctrl + Shift + I)",descending:"Descendente",descendingTitle:"Ordene los hijos de este ${type} en orden descendente",drag:"Arrastre para mover este campo (Alt + May\xfas + Flechas)",duplicateKey:"llave duplicada",duplicateText:"Duplicar",duplicateTitle:"Duplicar campos seleccionados (Ctrl + D)",duplicateField:"Duplicar este campo (Ctrl + D)",duplicateFieldError:"Nombre de campo duplicado",empty:"vacio",expandAll:"Expandir todos los campos",expandTitle:"Haga clic para expandir/contraer este campo (Ctrl + E). \n  Ctrl+Clic para expandir/contraer incluyendo todos los ni\xf1os.",formatTitle:"Formatee los datos JSON, con la sangr\xeda y los avances de l\xednea adecuados (Ctrl + I)",insert:"Insertar",insertTitle:"Inserte un nuevo campo con el tipo 'auto' antes de este campo (Ctrl + Ins)",insertSub:"Seleccione el tipo de campo a insertar",object:"Objeto",ok:"Ok",redo:"Rehacer (Ctrl+May\xfas+Z)",removeText:"Eliminar",removeTitle:"Eliminar campos seleccionados (Ctrl+Supr)",removeField:"Eliminar este campo (Ctrl+Supr)",repairTitle:"Reparar JSON: corrija comillas y caracteres de escape, elimine comentarios y notaci\xf3n JSONP, convierta objetos JavaScript en JSON.",searchTitle:"Campos de b\xfasqueda y valores",searchNextResultTitle:"Siguiente resultado (Entrar)",searchPreviousResultTitle:"Resultado anterior (Shift + Enter)",selectNode:"Seleccione un nodo...",showAll:"mostrar todo",showMore:"mostrar m\xe1s",showMoreStatus:"mostrando ${visibleChilds} de ${totalChilds} elementos.",sort:"Ordenar",sortTitle:"Ordene los hijos de este ${type}",sortTitleShort:"Ordenar contenidos",sortFieldLabel:"Campo:",sortDirectionLabel:"Direcci\xf3n:",sortFieldTitle:"Seleccione el campo anidado por el cual ordenar la matriz u objeto",sortAscending:"Ascendente",sortAscendingTitle:"Ordenar el campo seleccionado en orden ascendente",sortDescending:"Descendente",sortDescendingTitle:"Ordenar por el campo seleccionado, en orden descendente",string:"Texto",transform:"Transformar",transformTitle:"Filtrar, ordenar o transformar los hijos de este ${type}",transformTitleShort:"Filtrar, ordenar o transformar contenidos",extract:"Extraer",extractTitle:"Extrae este ${type}",transformQueryTitle:"Ingrese una consulta JMESPath",transformWizardLabel:"Wizard",transformWizardFilter:"Filtro",transformWizardSortBy:"Ordenar por",transformWizardSelectFields:"Seleccione un campo",transformQueryLabel:"Consulta",transformPreviewLabel:"Vista Previa",type:"Tipo",typeTitle:"Cambiar el tipo de campo",openUrl:"Ctrl+Click o Ctrl+Enter para abrir la URL en una nueva ventana",undo:"Deshacer la \xfaltima acci\xf3n (Ctrl+Z)",validationCannotMove:"No se puede mover un campo a un hijo de s\xed mismo.",autoType:'Field type "auto". The field type is automatically determined from the value and can be a string, number, boolean, or null.',objectType:'Tipo de campo "objeto".  Un objeto contiene un conjunto desordenado de pares clave/valor.',arrayType:'Tipo de campo "matriz".  Una matriz contiene una colecci\xf3n ordenada de valores.',stringType:'Tipo de campo "cadena".  El tipo de campo no se determina a partir del valor,  pero siempre se devuelve como una cadena.',modeEditorTitle:"Cambiar modo de editor",modeCodeText:"Codigo",modeCodeTitle:"Cambiar al resaltador de c\xf3digo",modeFormText:"Formulario",modeFormTitle:"Cambiar al editor de formularios",modeTextText:"Texto",modeTextTitle:"Cambiar al editor de texto sin formato",modeTreeText:"Arbol",modeTreeTitle:"Cambiar al editor de \xe1rbol",modeViewText:"Vista",modeViewTitle:"Cambiar a la vista de \xe1rbol",modePreviewText:"Vista Previa",modePreviewTitle:"Cambiar al modo de vista previa",examples:"Ejemplos",default:"Predeterminado",containsInvalidProperties:"Contiene propiedades no validas",containsInvalidItems:"Contiene items no validos"},"zh-CN":{array:"\u6570\u7ec4",auto:"\u81ea\u52a8",appendText:"\u8ffd\u52a0",appendTitle:"\u5728\u6b64\u5b57\u6bb5\u540e\u8ffd\u52a0\u4e00\u4e2a\u7c7b\u578b\u4e3a\u201cauto\u201d\u7684\u65b0\u5b57\u6bb5 (Ctrl+Shift+Ins)",appendSubmenuTitle:"\u9009\u62e9\u8981\u8ffd\u52a0\u7684\u5b57\u6bb5\u7c7b\u578b",appendTitleAuto:"\u8ffd\u52a0\u7c7b\u578b\u4e3a\u201cauto\u201d\u7684\u65b0\u5b57\u6bb5 (Ctrl+Shift+Ins)",ascending:"\u5347\u5e8f",ascendingTitle:"\u5347\u5e8f\u6392\u5217${type}\u7684\u5b50\u8282\u70b9",actionsMenu:"\u70b9\u51fb\u6253\u5f00\u52a8\u4f5c\u83dc\u5355(Ctrl+M)",cannotParseFieldError:"\u65e0\u6cd5\u5c06\u5b57\u6bb5\u89e3\u6790\u4e3aJSON",cannotParseValueError:"\u65e0\u6cd5\u5c06\u503c\u89e3\u6790\u4e3aJSON",collapseAll:"\u7f29\u8fdb\u6240\u6709\u5b57\u6bb5",compactTitle:"\u538b\u7f29JSON\u6570\u636e\uff0c\u5220\u9664\u6240\u6709\u7a7a\u683c (Ctrl+Shift+I)",descending:"\u964d\u5e8f",descendingTitle:"\u964d\u5e8f\u6392\u5217${type}\u7684\u5b50\u8282\u70b9",drag:"\u62d6\u62fd\u79fb\u52a8\u8be5\u8282\u70b9(Alt+Shift+Arrows)",duplicateKey:"\u91cd\u590d\u952e",duplicateText:"\u590d\u5236",duplicateTitle:"\u590d\u5236\u9009\u4e2d\u5b57\u6bb5(Ctrl+D)",duplicateField:"\u590d\u5236\u8be5\u5b57\u6bb5(Ctrl+D)",duplicateFieldError:"\u91cd\u590d\u7684\u5b57\u6bb5\u540d\u79f0",empty:"\u6e05\u7a7a",expandAll:"\u5c55\u5f00\u6240\u6709\u5b57\u6bb5",expandTitle:"\u70b9\u51fb \u5c55\u5f00/\u6536\u7f29 \u8be5\u5b57\u6bb5(Ctrl+E). \nCtrl+Click \u5c55\u5f00/\u6536\u7f29 \u5305\u542b\u6240\u6709\u5b50\u8282\u70b9.",formatTitle:"\u4f7f\u7528\u9002\u5f53\u7684\u7f29\u8fdb\u548c\u6362\u884c\u7b26\u683c\u5f0f\u5316JSON\u6570\u636e (Ctrl+I)",insert:"\u63d2\u5165",insertTitle:"\u5728\u6b64\u5b57\u6bb5\u524d\u63d2\u5165\u7c7b\u578b\u4e3a\u201cauto\u201d\u7684\u65b0\u5b57\u6bb5 (Ctrl+Ins)",insertSub:"\u9009\u62e9\u8981\u63d2\u5165\u7684\u5b57\u6bb5\u7c7b\u578b",object:"\u5bf9\u8c61",ok:"Ok",redo:"\u91cd\u505a (Ctrl+Shift+Z)",removeText:"\u79fb\u9664",removeTitle:"\u79fb\u9664\u9009\u4e2d\u5b57\u6bb5 (Ctrl+Del)",removeField:"\u79fb\u9664\u8be5\u5b57\u6bb5 (Ctrl+Del)",repairTitle:"\u4fee\u590dJSON\uff1a\u4fee\u590d\u5f15\u53f7\u548c\u8f6c\u4e49\u7b26\uff0c\u5220\u9664\u6ce8\u91ca\u548cJSONP\u8868\u793a\u6cd5\uff0c\u5c06JavaScript\u5bf9\u8c61\u8f6c\u6362\u4e3aJSON\u3002",selectNode:"\u9009\u62e9\u4e00\u4e2a\u8282\u70b9...",showAll:"\u5c55\u793a\u5168\u90e8",showMore:"\u5c55\u793a\u66f4\u591a",showMoreStatus:"\u663e\u793a${totalChilds}\u7684${visibleChilds}\u9879\u76ee.",sort:"\u6392\u5e8f",sortTitle:"\u6392\u5e8f${type}\u7684\u5b50\u8282\u70b9",sortTitleShort:"\u5185\u5bb9\u6392\u5e8f",sortFieldLabel:"\u5b57\u6bb5\uff1a",sortDirectionLabel:"\u65b9\u5411\uff1a",sortFieldTitle:"\u9009\u62e9\u7528\u4e8e\u5bf9\u6570\u7ec4\u6216\u5bf9\u8c61\u6392\u5e8f\u7684\u5d4c\u5957\u5b57\u6bb5",sortAscending:"\u5347\u5e8f\u6392\u5e8f",sortAscendingTitle:"\u6309\u7167\u8be5\u5b57\u6bb5\u5347\u5e8f\u6392\u5e8f",sortDescending:"\u964d\u5e8f\u6392\u5e8f",sortDescendingTitle:"\u6309\u7167\u8be5\u5b57\u6bb5\u964d\u5e8f\u6392\u5e8f",string:"\u5b57\u7b26\u4e32",transform:"\u53d8\u6362",transformTitle:"\u7b5b\u9009\uff0c\u6392\u5e8f\uff0c\u6216\u8005\u8f6c\u6362${type}\u7684\u5b50\u8282\u70b9",transformTitleShort:"\u7b5b\u9009\uff0c\u6392\u5e8f\uff0c\u6216\u8005\u8f6c\u6362\u5185\u5bb9",extract:"\u63d0\u53d6",extractTitle:"\u63d0\u53d6\u8fd9\u4e2a ${type}",transformQueryTitle:"\u8f93\u5165JMESPath\u67e5\u8be2",transformWizardLabel:"\u5411\u5bfc",transformWizardFilter:"\u7b5b\u9009",transformWizardSortBy:"\u6392\u5e8f",transformWizardSelectFields:"\u9009\u62e9\u5b57\u6bb5",transformQueryLabel:"\u67e5\u8be2",transformPreviewLabel:"\u9884\u89c8",type:"\u7c7b\u578b",typeTitle:"\u66f4\u6539\u5b57\u6bb5\u7c7b\u578b",openUrl:"Ctrl+Click \u6216\u8005 Ctrl+Enter \u5728\u65b0\u7a97\u53e3\u6253\u5f00\u94fe\u63a5",undo:"\u64a4\u9500\u4e0a\u6b21\u52a8\u4f5c (Ctrl+Z)",validationCannotMove:"\u65e0\u6cd5\u5c06\u5b57\u6bb5\u79fb\u5165\u5176\u5b50\u8282\u70b9",autoType:'\u5b57\u6bb5\u7c7b\u578b "auto". \u5b57\u6bb5\u7c7b\u578b\u7531\u503c\u81ea\u52a8\u786e\u5b9a \u53ef\u4ee5\u4e3a string\uff0cnumber\uff0cboolean\uff0c\u6216\u8005 null.',objectType:'\u5b57\u6bb5\u7c7b\u578b "object". \u5bf9\u8c61\u5305\u542b\u4e00\u7ec4\u65e0\u5e8f\u7684\u952e/\u503c\u5bf9.',arrayType:'\u5b57\u6bb5\u7c7b\u578b "array". \u6570\u7ec4\u5305\u542b\u503c\u7684\u6709\u5e8f\u96c6\u5408.',stringType:'\u5b57\u6bb5\u7c7b\u578b "string". \u5b57\u6bb5\u7c7b\u578b\u7531\u503c\u81ea\u52a8\u786e\u5b9a\uff0c\u4f46\u59cb\u7ec8\u4f5c\u4e3a\u5b57\u7b26\u4e32\u8fd4\u56de.',modeCodeText:"\u4ee3\u7801",modeCodeTitle:"\u5207\u6362\u81f3\u4ee3\u7801\u9ad8\u4eae",modeFormText:"\u8868\u5355",modeFormTitle:"\u5207\u6362\u81f3\u8868\u5355\u7f16\u8f91",modeTextText:"\u6587\u672c",modeTextTitle:"\u5207\u6362\u81f3\u6587\u672c\u7f16\u8f91",modeTreeText:"\u6811",modeTreeTitle:"\u5207\u6362\u81f3\u6811\u7f16\u8f91",modeViewText:"\u89c6\u56fe",modeViewTitle:"\u5207\u6362\u81f3\u6811\u89c6\u56fe",modePreviewText:"\u9884\u89c8",modePreviewTitle:"\u5207\u6362\u81f3\u9884\u89c8\u6a21\u5f0f",examples:"\u4f8b\u5b50",default:"\u7f3a\u7701",containsInvalidProperties:"\u5305\u542b\u65e0\u6548\u7684\u5c5e\u6027",containsInvalidItems:"\u5305\u542b\u65e0\u6548\u9879\u76ee"},"pt-BR":{array:"Lista",auto:"Automatico",appendText:"Adicionar",appendTitle:"Adicionar novo campo com tipo 'auto' depois deste campo (Ctrl+Shift+Ins)",appendSubmenuTitle:"Selecione o tipo do campo a ser adicionado",appendTitleAuto:"Adicionar novo campo com tipo 'auto' (Ctrl+Shift+Ins)",ascending:"Ascendente",ascendingTitle:"Organizar filhor do tipo ${type} em crescente",actionsMenu:"Clique para abrir o menu de a\xe7\xf5es (Ctrl+M)",cannotParseFieldError:"N\xe3o \xe9 poss\xedvel analisar o campo no JSON",cannotParseValueError:"N\xe3o \xe9 poss\xedvel analisar o valor em JSON",collapseAll:"Fechar todos campos",compactTitle:"Dados JSON compactos, remova todos os espa\xe7os em branco (Ctrl+Shift+I)",descending:"Descendente",descendingTitle:"Organizar o filhos do tipo ${type} em decrescente",duplicateKey:"chave duplicada",drag:"Arraste para mover este campo (Alt+Shift+Arrows)",duplicateText:"Duplicar",duplicateTitle:"Duplicar campos selecionados (Ctrl+D)",duplicateField:"Duplicar este campo (Ctrl+D)",duplicateFieldError:"Nome do campo duplicado",empty:"vazio",expandAll:"Expandir todos campos",expandTitle:"Clique para expandir/encolher este campo (Ctrl+E). \nCtrl+Click para expandir/encolher incluindo todos os filhos.",formatTitle:"Formate dados JSON, com recuo e feeds de linha adequados (Ctrl+I)",insert:"Inserir",insertTitle:"Inserir um novo campo do tipo 'auto' antes deste campo (Ctrl+Ins)",insertSub:"Selecionar o tipo de campo a ser inserido",object:"Objeto",ok:"Ok",redo:"Refazer (Ctrl+Shift+Z)",removeText:"Remover",removeTitle:"Remover campos selecionados (Ctrl+Del)",removeField:"Remover este campo (Ctrl+Del)",repairTitle:"Repare JSON: corrija aspas e caracteres de escape, remova coment\xe1rios e nota\xe7\xe3o JSONP, transforme objetos JavaScript em JSON.",selectNode:"Selecione um n\xf3dulo...",showAll:"mostrar todos",showMore:"mostrar mais",showMoreStatus:"exibindo ${visibleChilds} de ${totalChilds} itens.",sort:"Organizar",sortTitle:"Organizar os filhos deste ${type}",sortTitleShort:"Organizar os filhos",sortFieldLabel:"Campo:",sortDirectionLabel:"Dire\xe7\xe3o:",sortFieldTitle:"Selecione um campo filho pelo qual ordenar o array ou objeto",sortAscending:"Ascendente",sortAscendingTitle:"Ordenar o campo selecionado por ordem ascendente",sortDescending:"Descendente",sortDescendingTitle:"Ordenar o campo selecionado por ordem descendente",string:"Texto",transform:"Transformar",transformTitle:"Filtrar, ordenar ou transformar os filhos deste ${type}",transformTitleShort:"Filtrar, ordenar ou transformar conte\xfados",transformQueryTitle:"Insira uma express\xe3o JMESPath",transformWizardLabel:"Assistente",transformWizardFilter:"Filtro",transformWizardSortBy:"Ordenar por",transformWizardSelectFields:"Selecionar campos",transformQueryLabel:"Express\xe3o",transformPreviewLabel:"Visualizar",type:"Tipo",typeTitle:"Mudar o tipo deste campo",openUrl:"Ctrl+Click ou Ctrl+Enter para abrir link em nova janela",undo:"Desfazer \xfaltimo a\xe7\xe3o (Ctrl+Z)",validationCannotMove:"N\xe3o pode mover um campo como filho dele mesmo",autoType:'Campo do tipo "auto". O tipo do campo \xe9 determinao automaticamente a partir do seu valor e pode ser texto, n\xfamero, verdade/falso ou nulo.',objectType:'Campo do tipo "objeto". Um objeto cont\xe9m uma lista de pares com chave e valor.',arrayType:'Campo do tipo "lista". Uma lista contem uma cole\xe7\xe3o de valores ordenados.',stringType:'Campo do tipo "string". Campo do tipo nao \xe9 determinado atrav\xe9s do seu valor, mas sempre retornara um texto.',examples:"Exemplos",default:"Revelia",containsInvalidProperties:"Cont\xe9m propriedades inv\xe1lidas",containsInvalidItems:"Cont\xe9m itens inv\xe1lidos"},tr:{array:"Dizin",auto:"Otomatik",appendText:"Ekle",appendTitle:"Bu alan\u0131n alt\u0131na 'otomatik' tipinde yeni bir alan ekle (Ctrl+Shift+Ins)",appendSubmenuTitle:"Eklenecek alan\u0131n tipini se\xe7",appendTitleAuto:"'Otomatik' tipinde yeni bir alan ekle (Ctrl+Shift+Ins)",ascending:"Artan",ascendingTitle:"${type}'\u0131n alt tiplerini artan d\xfczende s\u0131rala",actionsMenu:"Aksiyon men\xfcs\xfcn\xfc a\xe7mak i\xe7in t\u0131klay\u0131n (Ctrl+M)",collapseAll:"T\xfcm alanlar\u0131 kapat",descending:"Azalan",descendingTitle:"${type}'\u0131n alt tiplerini azalan d\xfczende s\u0131rala",drag:"Bu alan\u0131 ta\u015f\u0131mak i\xe7in s\xfcr\xfckleyin (Alt+Shift+Arrows)",duplicateKey:"Var olan anahtar",duplicateText:"A\u015fa\u011f\u0131ya kopyala",duplicateTitle:"Se\xe7ili alanlardan bir daha olu\u015ftur (Ctrl+D)",duplicateField:"Bu alandan bir daha olu\u015ftur (Ctrl+D)",duplicateFieldError:"Duplicate field name",cannotParseFieldError:"Alan JSON'a ayr\u0131\u015ft\u0131r\u0131lam\u0131yor",cannotParseValueError:"JSON'a de\u011fer ayr\u0131\u015ft\u0131r\u0131lam\u0131yor",empty:"bo\u015f",expandAll:"T\xfcm alanlar\u0131 a\xe7",expandTitle:"Bu alan\u0131 a\xe7mak/kapatmak i\xe7in t\u0131kla (Ctrl+E). \nAlt alanlarda dahil t\xfcm alanlar\u0131 a\xe7mak i\xe7in Ctrl+Click ",insert:"Ekle",insertTitle:"Bu alan\u0131n \xfcst\xfcne 'otomatik' tipinde yeni bir alan ekle (Ctrl+Ins)",insertSub:"Araya eklenecek alan\u0131n tipini se\xe7",object:"Nesne",ok:"Tamam",redo:"Yeniden yap (Ctrl+Shift+Z)",removeText:"Kald\u0131r",removeTitle:"Se\xe7ilen alanlar\u0131 kald\u0131r (Ctrl+Del)",removeField:"Bu alan\u0131 kald\u0131r (Ctrl+Del)",selectNode:"Bir nesne se\xe7...",showAll:"t\xfcm\xfcn\xfc g\xf6ster",showMore:"daha fazla g\xf6ster",showMoreStatus:"${totalChilds} alan\u0131n ${visibleChilds} alt alanlar\u0131 g\xf6steriliyor",sort:"S\u0131rala",sortTitle:"${type}'\u0131n alt alanlar\u0131n\u0131 s\u0131rala",sortTitleShort:"\u0130\xe7erikleri s\u0131rala",sortFieldLabel:"Alan:",sortDirectionLabel:"Y\xf6n:",sortFieldTitle:"Diziyi veya nesneyi s\u0131ralamak i\xe7in i\xe7 i\xe7e ge\xe7mi\u015f alan\u0131 se\xe7in",sortAscending:"Artan",sortAscendingTitle:"Se\xe7ili alan\u0131 artan d\xfczende s\u0131rala",sortDescending:"Azalan",sortDescendingTitle:"Se\xe7ili alan\u0131 azalan d\xfczende s\u0131rala",string:"Karakter Dizisi",transform:"D\xf6n\xfc\u015ft\xfcr",transformTitle:"${type}'\u0131n alt alanlar\u0131n\u0131 filtrele, s\u0131rala veya d\xf6n\xfc\u015ft\xfcr",transformTitleShort:"\u0130\xe7erikleri filterele, s\u0131rala veya d\xf6n\xfc\u015ft\xfcr",transformQueryTitle:"JMESPath sorgusu gir",transformWizardLabel:"Sihirbaz",transformWizardFilter:"Filtre",transformWizardSortBy:"S\u0131rala",transformWizardSelectFields:"Alanlar\u0131 se\xe7",transformQueryLabel:"Sorgu",transformPreviewLabel:"\xd6nizleme",type:"Tip",typeTitle:"Bu alan\u0131n tipini de\u011fi\u015ftir",openUrl:"URL'i yeni bir pencerede a\xe7mak i\xe7in Ctrl+Click veya Ctrl+Enter",undo:"Son de\u011fi\u015fikli\u011fi geri al (Ctrl+Z)",validationCannotMove:"Alt alan olarak ta\u015f\u0131nam\u0131yor",autoType:'Alan tipi "otomatik". Alan t\xfcr\xfc otomatik olarak de\u011ferden belirlenirve bir dize, say\u0131, boolean veya null olabilir.',objectType:'Alan tipi "nesne". Bir nesne, s\u0131ralanmam\u0131\u015f bir anahtar / de\u011fer \xe7ifti k\xfcmesi i\xe7erir.',arrayType:'Alan tipi "dizi". Bir dizi, d\xfczenli de\u011ferler koleksiyonu i\xe7erir.',stringType:'Alan tipi "karakter dizisi". Alan t\xfcr\xfc de\u011ferden belirlenmez,ancak her zaman karakter dizisi olarak d\xf6nd\xfcr\xfcl\xfcr.',modeCodeText:"Kod",modeCodeTitle:"Kod vurgulay\u0131c\u0131ya ge\xe7",modeFormText:"Form",modeFormTitle:"Form d\xfczenleyiciye ge\xe7",modeTextText:"Metin",modeTextTitle:"D\xfcz metin d\xfczenleyiciye ge\xe7",modeTreeText:"A\u011fa\xe7",modeTreeTitle:"A\u011fa\xe7 d\xfczenleyiciye ge\xe7",modeViewText:"G\xf6r\xfcn\xfcm",modeViewTitle:"A\u011fa\xe7 g\xf6r\xfcn\xfcm\xfcne ge\xe7",examples:"\xd6rnekler",default:"Varsay\u0131lan",containsInvalidProperties:"Ge\xe7ersiz \xf6zellikler i\xe7eriyor",containsInvalidItems:"Ge\xe7ersiz \xf6\u011feler i\xe7eriyor"},ja:{array:"\u914d\u5217",auto:"\u30aa\u30fc\u30c8",appendText:"\u8ffd\u52a0",appendTitle:'\u6b21\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306b"\u30aa\u30fc\u30c8"\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0 (Ctrl+Shift+Ins)',appendSubmenuTitle:"\u8ffd\u52a0\u3059\u308b\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u578b\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044",appendTitleAuto:'"\u30aa\u30fc\u30c8"\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8ffd\u52a0 (Ctrl+Shift+Ins)',ascending:"\u6607\u9806",ascendingTitle:"${type}\u306e\u5b50\u8981\u7d20\u3092\u6607\u9806\u306b\u4e26\u3079\u66ff\u3048",actionsMenu:"\u30af\u30ea\u30c3\u30af\u3057\u3066\u30a2\u30af\u30b7\u30e7\u30f3\u30e1\u30cb\u30e5\u30fc\u3092\u958b\u304f (Ctrl+M)",collapseAll:"\u3059\u3079\u3066\u3092\u6298\u308a\u305f\u305f\u3080",descending:"\u964d\u9806",descendingTitle:"${type}\u306e\u5b50\u8981\u7d20\u3092\u964d\u9806\u306b\u4e26\u3079\u66ff\u3048",drag:"\u30c9\u30e9\u30c3\u30b0\u3057\u3066\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u79fb\u52d5 (Alt+Shift+Arrows)",duplicateKey:"\u8907\u88fd\u30ad\u30fc",duplicateText:"\u8907\u88fd",duplicateTitle:"\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8907\u88fd (Ctrl+D)",duplicateField:"\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u8907\u88fd (Ctrl+D)",duplicateFieldError:"\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u304c\u91cd\u8907\u3057\u3066\u3044\u307e\u3059",cannotParseFieldError:"JSON\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u89e3\u6790\u3067\u304d\u307e\u305b\u3093",cannotParseValueError:"JSON\u306e\u5024\u3092\u89e3\u6790\u3067\u304d\u307e\u305b\u3093",empty:"\u7a7a",expandAll:"\u3059\u3079\u3066\u3092\u5c55\u958b",expandTitle:"\u30af\u30ea\u30c3\u30af\u3057\u3066\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u5c55\u958b/\u6298\u308a\u305f\u305f\u3080 (Ctrl+E). \nCtrl+Click \u3067\u3059\u3079\u3066\u306e\u5b50\u8981\u7d20\u3092\u5c55\u958b/\u6298\u308a\u305f\u305f\u3080",insert:"\u633f\u5165",insertTitle:"\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u524d\u306b\u65b0\u3057\u3044\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u633f\u5165 (Ctrl+Ins)",insertSub:"\u633f\u5165\u3059\u308b\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u578b\u3092\u9078\u629e",object:"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8",ok:"\u5b9f\u884c",redo:"\u3084\u308a\u76f4\u3059 (Ctrl+Shift+Z)",removeText:"\u524a\u9664",removeTitle:"\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u524a\u9664 (Ctrl+Del)",removeField:"\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u524a\u9664 (Ctrl+Del)",selectNode:"\u30ce\u30fc\u30c9\u3092\u9078\u629e...",showAll:"\u3059\u3079\u3066\u3092\u8868\u793a",showMore:"\u3082\u3063\u3068\u898b\u308b",showMoreStatus:"${totalChilds}\u500b\u306e\u30a2\u30a4\u30c6\u30e0\u306e\u3046\u3061 ${visibleChilds}\u500b\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059\u3002",sort:"\u4e26\u3079\u66ff\u3048",sortTitle:"${type}\u306e\u5b50\u8981\u7d20\u3092\u4e26\u3079\u66ff\u3048",sortTitleShort:"\u4e26\u3079\u66ff\u3048",sortFieldLabel:"\u30d5\u30a3\u30fc\u30eb\u30c9:",sortDirectionLabel:"\u9806\u5e8f:",sortFieldTitle:"\u914d\u5217\u307e\u305f\u306f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4e26\u3073\u66ff\u3048\u308b\u305f\u3081\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u9078\u629e",sortAscending:"\u6607\u9806",sortAscendingTitle:"\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u6607\u9806\u306b\u4e26\u3073\u66ff\u3048",sortDescending:"\u964d\u9806",sortDescendingTitle:"\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u964d\u9806\u306b\u4e26\u3073\u66ff\u3048",string:"\u6587\u5b57\u5217",transform:"\u5909\u63db",transformTitle:"${type}\u306e\u5b50\u8981\u7d20\u3092\u30d5\u30a3\u30eb\u30bf\u30fc\u30fb\u4e26\u3073\u66ff\u3048\u30fb\u5909\u63db\u3059\u308b",transformTitleShort:"\u5185\u5bb9\u3092\u30d5\u30a3\u30eb\u30bf\u30fc\u30fb\u4e26\u3073\u66ff\u3048\u30fb\u5909\u63db\u3059\u308b",extract:"\u62bd\u51fa",extractTitle:"${type}\u3092\u62bd\u51fa",transformQueryTitle:"JMESPath\u30af\u30a8\u30ea\u3092\u5165\u529b",transformWizardLabel:"\u30a6\u30a3\u30b6\u30fc\u30c9",transformWizardFilter:"\u30d5\u30a3\u30eb\u30bf\u30fc",transformWizardSortBy:"\u4e26\u3073\u66ff\u3048",transformWizardSelectFields:"\u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u9078\u629e",transformQueryLabel:"\u30af\u30a8\u30ea",transformPreviewLabel:"\u30d7\u30ec\u30d3\u30e5\u30fc",type:"\u578b",typeTitle:"\u9078\u629e\u4e2d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u578b\u3092\u5909\u66f4",openUrl:"Ctrl+Click \u307e\u305f\u306f Ctrl+Enter \u3067 \u65b0\u898f\u30a6\u30a3\u30f3\u30c9\u30a6\u3067URL\u3092\u958b\u304f",undo:"\u5143\u306b\u623b\u3059 (Ctrl+Z)",validationCannotMove:"\u5b50\u8981\u7d20\u306b\u79fb\u52d5\u3067\u304d\u307e\u305b\u3093 ",autoType:"\u30aa\u30fc\u30c8\uff1a \u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u578b\u306f\u5024\u304b\u3089\u81ea\u52d5\u7684\u306b\u6c7a\u5b9a\u3055\u308c\u307e\u3059\u3002 (\u6587\u5b57\u5217\u30fb\u6570\u5024\u30fb\u30d6\u30fc\u30eb\u30fbnull)",objectType:"\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff1a \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u9806\u5e8f\u304c\u6c7a\u307e\u3063\u3066\u3044\u306a\u3044\u30ad\u30fc\u3068\u5024\u306e\u30da\u30a2\u7d44\u307f\u5408\u308f\u305b\u3067\u3059\u3002",arrayType:"\u914d\u5217\uff1a \u914d\u5217\u306f\u9806\u5e8f\u304c\u6c7a\u307e\u3063\u3066\u3044\u308b\u5024\u306e\u96c6\u5408\u4f53\u3067\u3059\u3002",stringType:"\u6587\u5b57\u5217\uff1a \u30d5\u30a3\u30fc\u30eb\u30c9\u578b\u306f\u5024\u304b\u3089\u6c7a\u5b9a\u3055\u308c\u307e\u305b\u3093\u304c\u3001\u5e38\u306b\u6587\u5b57\u5217\u3068\u3057\u3066\u8fd4\u3055\u308c\u307e\u3059\u3002",modeCodeText:"\u30b3\u30fc\u30c9\u30e2\u30fc\u30c9",modeCodeTitle:"\u30cf\u30a4\u30e9\u30a4\u30c8\u30e2\u30fc\u30c9\u306b\u5207\u308a\u66ff\u3048",modeFormText:"\u30d5\u30a9\u30fc\u30e0\u30e2\u30fc\u30c9",modeFormTitle:"\u30d5\u30a9\u30fc\u30e0\u30e2\u30fc\u30c9\u306b\u5207\u308a\u66ff\u3048",modeTextText:"\u30c6\u30ad\u30b9\u30c8\u30e2\u30fc\u30c9",modeTextTitle:"\u30c6\u30ad\u30b9\u30c8\u30e2\u30fc\u30c9\u306b\u5207\u308a\u66ff\u3048",modeTreeText:"\u30c4\u30ea\u30fc\u30e2\u30fc\u30c9",modeTreeTitle:"\u30c4\u30ea\u30fc\u30e2\u30fc\u30c9\u306b\u5207\u308a\u66ff\u3048",modeViewText:"\u30d3\u30e5\u30fc\u30e2\u30fc\u30c9",modeViewTitle:"\u30d3\u30e5\u30fc\u30e2\u30fc\u30c9\u306b\u5207\u308a\u66ff\u3048",modePreviewText:"\u30d7\u30ec\u30d3\u30e5\u30fc",modePreviewTitle:"\u30d7\u30ec\u30d3\u30e5\u30fc\u306b\u5207\u308a\u66ff\u3048",examples:"\u4f8b",default:"\u30c7\u30d5\u30a9\u30eb\u30c8",containsInvalidProperties:"\u7121\u52b9\u306a\u30d7\u30ed\u30d1\u30c6\u30a3\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059",containsInvalidItems:"\u7121\u52b9\u306a\u30a2\u30a4\u30c6\u30e0\u304c\u542b\u307e\u308c\u3066\u3044\u307e\u3059"},"fr-FR":{array:"Liste",auto:"Auto",appendText:"Ajouter",appendTitle:"Ajouter un champ de type 'auto' apr\xe8s ce champ (Ctrl+Shift+Ins)",appendSubmenuTitle:"S\xe9lectionner le type du champ \xe0 ajouter",appendTitleAuto:"Ajouter un champ de type 'auto' (Ctrl+Shift+Ins)",ascending:"Ascendant",ascendingTitle:"Trier les enfants de ce ${type} par ordre ascendant",actionsMenu:"Ouvrir le menu des actions (Ctrl+M)",collapseAll:"Regrouper",descending:"Descendant",descendingTitle:"Trier les enfants de ce ${type} par ordre descendant",drag:"D\xe9placer (Alt+Shift+Arrows)",duplicateKey:"Dupliquer la cl\xe9",duplicateText:"Dupliquer",duplicateTitle:"Dupliquer les champs s\xe9lectionn\xe9s (Ctrl+D)",duplicateField:"Dupliquer ce champ (Ctrl+D)",duplicateFieldError:"Dupliquer le nom de champ",cannotParseFieldError:"Champ impossible \xe0 parser en JSON",cannotParseValueError:"Valeur impossible \xe0 parser en JSON",empty:"vide",expandAll:"\xc9tendre",expandTitle:"\xc9tendre/regrouper ce champ (Ctrl+E). \nCtrl+Click pour \xe9tendre/regrouper avec tous les champs.",insert:"Ins\xe9rer",insertTitle:"Ins\xe9rer un champ de type 'auto' avant ce champ (Ctrl+Ins)",insertSub:"S\xe9lectionner le type de champ \xe0 ins\xe9rer",object:"Objet",ok:"Ok",redo:"Rejouer (Ctrl+Shift+Z)",removeText:"Supprimer",removeTitle:"Supprimer les champs s\xe9lectionn\xe9s (Ctrl+Del)",removeField:"Supprimer ce champ (Ctrl+Del)",searchTitle:"Rechercher champs et valeurs",searchNextResultTitle:"R\xe9sultat suivant (Enter)",searchPreviousResultTitle:"R\xe9sultat pr\xe9c\xe9dent (Shift + Enter)",selectNode:"S\xe9lectionner un n\u0153ud...",showAll:"voir tout",showMore:"voir plus",showMoreStatus:"${visibleChilds} \xe9l\xe9ments affich\xe9s de ${totalChilds}.",sort:"Trier",sortTitle:"Trier les champs de ce ${type}",sortTitleShort:"Trier",sortFieldLabel:"Champ:",sortDirectionLabel:"Direction:",sortFieldTitle:"S\xe9lectionner les champs permettant de trier les listes et objet",sortAscending:"Ascendant",sortAscendingTitle:"Trier les champs s\xe9lectionn\xe9s par ordre ascendant",sortDescending:"Descendant",sortDescendingTitle:"Trier les champs s\xe9lectionn\xe9s par ordre descendant",string:"Cha\xeene",transform:"Transformer",transformTitle:"Filtrer, trier, or transformer les enfants de ce ${type}",transformTitleShort:"Filtrer, trier ou transformer le contenu",extract:"Extraire",extractTitle:"Extraire ce ${type}",transformQueryTitle:"Saisir une requ\xeate JMESPath",transformWizardLabel:"Assistant",transformWizardFilter:"Filtrer",transformWizardSortBy:"Trier par",transformWizardSelectFields:"S\xe9lectionner les champs",transformQueryLabel:"Requ\xeate",transformPreviewLabel:"Pr\xe9visualisation",type:"Type",typeTitle:"Changer le type de ce champ",openUrl:"Ctrl+Click ou Ctrl+Enter pour ouvrir l'url dans une autre fen\xeatre",undo:"Annuler la derni\xe8re action (Ctrl+Z)",validationCannotMove:"Cannot move a field into a child of itself",autoType:'Champe de type "auto". Ce type de champ est automatiquement d\xe9termin\xe9 en fonction de la valeur et peut \xeatre de type "cha\xeene", "nombre", "bool\xe9en" ou null.',objectType:'Champ de type "objet". Un objet contient un ensemble non ordonn\xe9 de paires cl\xe9/valeur.',arrayType:'Champ de type "liste". Une liste contient une collection ordonn\xe9e de valeurs.',stringType:'Champ de type "cha\xeene". Ce type de champ n\'est pas d\xe9termin\xe9 en fonction de la valeur, mais retourne syst\xe9matiquement une cha\xeene de caract\xe8res.',modeEditorTitle:"Changer mode d'\xe9dition",modeCodeText:"Code",modeCodeTitle:"Activer surlignage code",modeFormText:"Formulaire",modeFormTitle:"Activer formulaire",modeTextText:"Texte",modeTextTitle:"Activer \xe9diteur texte",modeTreeText:"Arbre",modeTreeTitle:"Activer \xe9diteur arbre",modeViewText:"Lecture seule",modeViewTitle:"Activer vue arbre",modePreviewText:"Pr\xe9visualisation",modePreviewTitle:"Activer mode pr\xe9visualiser",examples:"Exemples",default:"D\xe9faut",containsInvalidProperties:"Contient des propri\xe9t\xe9s non valides",containsInvalidItems:"Contient des \xe9l\xe9ments invalides"},de:{array:"Auflistung",auto:"Auto",appendText:"anh\xe4ngen",appendTitle:"F\xfcgen Sie nach diesem Feld ein neues Feld mit dem Typ 'auto' ein (Strg+Umschalt+Ein)",appendSubmenuTitle:"W\xe4hlen Sie den Typ des neuen Feldes",appendTitleAuto:"Ein neues Feld vom Typ 'auto' hinzuf\xfcgen (Strg+Umschalt+Ein)",ascending:"Aufsteigend",ascendingTitle:"Sortieren Sie die Elemente dieses ${type} in aufsteigender Reihenfolge",actionsMenu:"Klicken Sie zum \xd6ffnen des Aktionsmen\xfcs (Strg+M)",cannotParseFieldError:"Feld kann nicht in JSON geparst werden",cannotParseValueError:"Wert kann nicht in JSON geparst werden",collapseAll:"Alle Felder zuklappen",compactTitle:"JSON-Daten verdichten, alle Leerzeichen entfernen (Strg+Umschalt+\\)",descending:"Absteigend",descendingTitle:"Sortieren Sie die Elemente dieses ${type} in absteigender Reihenfolge",drag:"Ziehen, um dieses Feld zu verschieben (Alt+Umschalt+Pfeile)",duplicateKey:"Doppelter Schl\xfcssel",duplicateText:"Duplikat",duplicateTitle:"Ausgew\xe4hlte Felder duplizieren (Strg+D)",duplicateField:"Dieses Feld duplizieren (Strg+D)",duplicateFieldError:"Doppelter Feldname",empty:"leer",expandAll:"Alle Felder anzeigen",expandTitle:"Klicken Sie, um dieses Feld zu erweitern/zu kollabieren (Strg+E). \nStrg+Klicken Sie, um dieses Feld einschlie\xdflich aller Elemente zu erweitern/zu kollabieren.",formatTitle:"JSON-Daten mit korrekter Einr\xfcckung und Zeilenvorsch\xfcben formatieren (Strg+\\)",insert:"einf\xfcgen",insertTitle:"F\xfcgen Sie vor diesem Feld ein neues Feld mit dem Typ 'auto' ein (Strg+Einfg)",insertSub:"W\xe4hlen Sie den Typ des neuen Feldes",object:"Objekt",ok:"Ok",redo:"Wiederholen (Strg+Umschalt+Z)",removeText:"entfernen",removeTitle:"Ausgew\xe4hlte Felder entfernen (Strg+Entf)",removeField:"Dieses Feld entfernen (Strg+Entf)",repairTitle:"JSON reparieren: Anf\xfchrungszeichen und Escape-Zeichen korrigieren, Kommentare und JSONP-Notation entfernen, JavaScript-Objekte in JSON umwandeln.",searchTitle:"Suchfelder und Werte",searchNextResultTitle:"N\xe4chstes Ergebnis (Enter)",searchPreviousResultTitle:"Vorheriges Ergebnis (Umschalt + Eingabe)",selectNode:"W\xe4hlen Sie einen Knoten aus...",showAll:"alle anzeigen",showMore:"mehr anzeigen",showMoreStatus:"Anzeige von ${visibleChilds} von ${totalChilds}-Elementen.",sort:"Sortieren",sortTitle:"Sortieren Sie die Elemente dieses ${type}",sortTitleShort:"Inhalt sortieren",sortFieldLabel:"Feld:",sortDirectionLabel:"Richtung:",sortFieldTitle:"W\xe4hlen Sie das verschachtelte Feld, nach dem das Array oder Objekt sortiert werden soll.",sortAscending:"Aufsteigend",sortAscendingTitle:"Sortieren Sie das ausgew\xe4hlte Feld in aufsteigender Reihenfolge",sortDescending:"Absteigend",sortDescendingTitle:"Sortieren Sie das ausgew\xe4hlte Feld in absteigender Reihenfolge",string:"Zeichenfolge",transform:"Verwandeln",transformTitle:"Die Elemente dieses ${type} filtern, sortieren oder transformieren",transformTitleShort:"Inhalte filtern, sortieren oder transformieren",extract:"Auszug",extractTitle:"Extrahieren Sie diesen ${type}",transformQueryTitle:"Eine JMESPath-Abfrage eingeben",transformWizardLabel:"Zauberer",transformWizardFilter:"Filter",transformWizardSortBy:"Sortieren nach",transformWizardSelectFields:"Felder ausw\xe4hlen",transformQueryLabel:"Anfrage",transformPreviewLabel:"Vorschau",type:"Geben Sie  ein.",typeTitle:"\xc4ndern Sie den Typ dieses Feldes",openUrl:"Strg+Klicken oder Strg+Eingabe, um die URL in einem neuen Fenster zu \xf6ffnen",undo:"Letzte Aktion r\xfcckg\xe4ngig machen (Strg+Z)",validationCannotMove:"Kann ein Feld nicht in ein Kind seiner selbst verschieben",autoType:'Feldtyp "auto". Der Feldtyp wird automatisch aus dem Wert bestimmt und kann ein String, eine Zahl, boolesch oder null sein.',objectType:'Feldtyp "Objekt". Ein Objekt enth\xe4lt eine ungeordnete Menge von Schl\xfcssel/Wert-Paaren.',arrayType:'Feldtyp "Array". Ein Array enth\xe4lt eine geordnete Sammlung von Werten.',stringType:'Feldtyp "Zeichenfolge". Der Feldtyp wird nicht aus dem Wert bestimmt, sondern immer als Zeichenfolge zur\xfcckgegeben.',modeEditorTitle:"Editor-Modus umschalten",modeCodeText:"Code",modeCodeTitle:"Umschalten auf Code-Highlighter",modeFormText:"Formular",modeFormTitle:"Zum Formular-Editor wechseln",modeTextText:"Text",modeTextTitle:"Zum Editor f\xfcr einfachen Text wechseln",modeTreeText:"Baum",modeTreeTitle:"Zum Baum-Editor wechseln",modeViewText:"Siehe",modeViewTitle:"Zur Baumansicht wechseln",modePreviewText:"Vorschau",modePreviewTitle:"In den Vorschau-Modus wechseln",examples:"Beispiele",default:"Standardm\xe4\xdfig",containsInvalidProperties:"Enth\xe4lt ung\xfcltige Eigenschaften",containsInvalidItems:"Enth\xe4lt ung\xfcltige Elemente"},ru:{array:"\u041c\u0430\u0441\u0441\u0438\u0432",auto:"\u0410\u0432\u0442\u043e",appendText:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",appendTitle:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0435 \u043f\u043e\u043b\u0435 \u0441 \u0442\u0438\u043f\u043e\u043c '\u0430\u0432\u0442\u043e' \u043f\u043e\u0441\u043b\u0435 \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u043b\u044f (Ctrl+Shift+Ins)",appendSubmenuTitle:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0442\u0438\u043f \u043f\u043e\u043b\u044f \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f",appendTitleAuto:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0435 \u043f\u043e\u043b\u0435 \u0441 \u0442\u0438\u043f\u043e\u043c '\u0430\u0432\u0442\u043e' (Ctrl+Shift+Ins)",ascending:"\u041f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e",ascendingTitle:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c ${type} \u043f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e",actionsMenu:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u043e\u0442\u043a\u0440\u044b\u0442\u0438\u044f \u043c\u0435\u043d\u044e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439 (Ctrl+M)",cannotParseFieldError:"\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u0435 \u0432 JSON",cannotParseValueError:"\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0432 JSON",collapseAll:"\u0421\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0432\u0441\u0435",compactTitle:"\u041c\u0438\u043d\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f JSON (Ctrl+Shift+I)",descending:"\u041f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",descendingTitle:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c ${type} \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",drag:"\u041f\u043e\u0442\u044f\u043d\u0438\u0442\u0435 \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u044f \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u043b\u044f (Alt+Shift+Arrows)",duplicateKey:"\u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0449\u0438\u0439\u0441\u044f \u043a\u043b\u044e\u0447",duplicateText:"\u0414\u0443\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c",duplicateTitle:"\u0414\u0443\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u0435\u0439 (Ctrl+D)",duplicateField:"\u0414\u0443\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u0435 (Ctrl+D)",duplicateFieldError:"\u0414\u0443\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u043f\u043e\u043b\u044f",empty:"\u043f\u0443\u0441\u0442\u043e\u0439",expandAll:"\u0420\u0430\u0437\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u0432\u0441\u0435",expandTitle:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0434\u043b\u044f \u0440\u0430\u0441\u043a\u0440\u044b\u0442\u0438\u044f/\u0441\u043a\u0440\u044b\u0442\u0438\u044f \u043f\u043e\u043b\u044f (Ctrl+E)\n\u0438\u043b\u0438 Ctrl+Click \u0434\u043b\u044f \u0440\u0430\u0441\u043a\u0440\u044b\u0442\u0438\u044f/\u0441\u043a\u0440\u044b\u0442\u0438\u044f \u0432\u0441\u0435\u0445 \u043f\u043e\u0442\u043e\u043c\u043a\u043e\u0432.",formatTitle:"\u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 JSON (Ctrl+I)",insert:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c",insertTitle:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0435 \u043f\u043e\u043b\u0435 \u0441 \u0442\u0438\u043f\u043e\u043c '\u0430\u0432\u0442\u043e' \u043f\u0435\u0440\u0435\u0434 \u044d\u0442\u0438\u043c \u043f\u043e\u043b\u0435\u043c (Ctrl+Ins)",insertSub:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0442\u0438\u043f \u043f\u043e\u043b\u044f \u0434\u043b\u044f \u0432\u0441\u0442\u0430\u0432\u043a\u0438",object:"\u041e\u0431\u044a\u0435\u043a\u0442",ok:"\u041e\u041a",redo:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c (Ctrl+Shift+Z)",removeText:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",removeTitle:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044f (Ctrl+Del)",removeField:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u0435 (Ctrl+Del)",repairTitle:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 JSON: \u0438\u0441\u043f\u0440\u0430\u0432\u044c\u0442\u0435 \u043a\u0430\u0432\u044b\u0447\u043a\u0438 \u0438 escape-\u0441\u0438\u043c\u0432\u043e\u043b\u044b, \u0443\u0434\u0430\u043b\u0438\u0442\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 \u0438 \u043d\u043e\u0442\u0430\u0446\u0438\u044e JSONP, \u043c\u043e\u0434\u0438\u0444\u0438\u0446\u0438\u0440\u0443\u0439\u0442\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u044b JavaScript \u0432 JSON.",searchTitle:"\u041f\u043e\u0438\u0441\u043a",searchNextResultTitle:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 (Enter)",searchPreviousResultTitle:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 (Shift + Enter)",selectNode:"\u0412\u044b\u0431\u043e\u0440 \u0443\u0437\u043b\u0430...",showAll:"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435",showMore:"\u0431\u043e\u043b\u044c\u0448\u0435",showMoreStatus:"${visibleChilds} \u0438\u0437 ${totalChilds}",sort:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430",sortTitle:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u043e\u0442\u043e\u043c\u043a\u043e\u0432 \u0442\u0438\u043f\u0430 ${type}",sortTitleShort:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0433\u043e",sortFieldLabel:"\u041f\u043e\u043b\u0435:",sortDirectionLabel:"\u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435:",sortFieldTitle:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u0435 \u0434\u043b\u044f \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u043c\u0430\u0441\u0441\u0438\u0432\u0430 \u0438\u043b\u0438 \u043e\u0431\u044a\u0435\u043a\u0442\u0430",sortAscending:"\u041f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e",sortAscendingTitle:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u043f\u043e\u0440\u044f \u043f\u043e \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0430\u043d\u0438\u044e",sortDescending:"\u041f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",sortDescendingTitle:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u043f\u043e\u0440\u044f \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",string:"\u0421\u0442\u0440\u043e\u043a\u0430",transform:"\u041c\u043e\u0434\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f",transformTitle:"\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f, \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u0438\u043b\u0438 \u043c\u043e\u0434\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u0442\u0438\u043f\u0430 ${type}",transformTitleShort:"\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f, \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u0438\u043b\u0438 \u043c\u043e\u0434\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445",extract:"\u0418\u0437\u0432\u043b\u0435\u0447\u0435\u043d\u0438\u0435",extractTitle:"\u0418\u0437\u0432\u043b\u0435\u0447\u044c \u0442\u0438\u043f ${type}",transformQueryTitle:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 JMESpath \u0437\u0430\u043f\u0440\u043e\u0441",transformWizardLabel:"\u041c\u0430\u0441\u0442\u0435\u0440",transformWizardFilter:"\u0424\u0438\u043b\u044c\u0442\u0440",transformWizardSortBy:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430",transformWizardSelectFields:"\u041f\u043e\u043b\u044f",transformQueryLabel:"\u0417\u0430\u043f\u0440\u043e\u0441",transformPreviewLabel:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",type:"\u0422\u0438\u043f",typeTitle:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0442\u0438\u043f \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u043b\u044f",openUrl:"Ctrl+Click \u0438\u043b\u0438 Ctrl+Enter \u0434\u043b\u044f \u043e\u0442\u043a\u0440\u044b\u0442\u0438\u044f url \u0432 \u043d\u043e\u0432\u043e\u043c \u043e\u043a\u043d\u0435",undo:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c (Ctrl+Z)",validationCannotMove:"\u041f\u043e\u043b\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u043e \u0432 \u043f\u043e\u0442\u043e\u043c\u043a\u0430",autoType:"\u0422\u0438\u043f \u043f\u043e\u043b\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044e \u0438 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u043e\u0439, \u0447\u0438\u0441\u043b\u043e\u043c, \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u043c \u0438\u043b\u0438 null.",objectType:"\u041e\u0431\u044a\u0435\u043a\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043d\u0435\u0443\u043f\u043e\u0440\u044f\u0434\u043e\u0447\u0435\u043d\u043d\u044b\u0439 \u043d\u0430\u0431\u043e\u0440 \u043f\u0430\u0440 \u043a\u043b\u044e\u0447/\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435.",arrayType:"\u041c\u0430\u0441\u0441\u0438\u0432 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0443\u043f\u043e\u0440\u044f\u0434\u043e\u0447\u0435\u043d\u043d\u044b\u0439 \u043d\u0430\u0431\u043e\u0440 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439.",stringType:"\u0422\u0438\u043f \u043f\u043e\u043b\u044f \u043d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442\u0441\u044f \u0438\u0437 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f, \u043d\u043e \u0432\u0441\u0435\u0433\u0434\u0430 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442\u0441\u044f \u043a\u0430\u043a \u0441\u0442\u0440\u043e\u043a\u0430.",modeEditorTitle:"\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0440\u0435\u0436\u0438\u043c\u0430 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440\u0430",modeCodeText:"\u041a\u043e\u0434",modeCodeTitle:"\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0432 \u0440\u0435\u0436\u0438\u043c \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440\u0430 \u043a\u043e\u0434\u0430",modeFormText:"\u0424\u043e\u0440\u043c\u0430",modeFormTitle:"\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0432 \u0440\u0435\u0436\u0438\u043c \u0444\u043e\u0440\u043c\u044b",modeTextText:"\u0422\u0435\u043a\u0441\u0442",modeTextTitle:"\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0432 \u0440\u0435\u0436\u0438\u043c \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440\u0430 \u0442\u0435\u043a\u0441\u0442\u0430",modeTreeText:"\u0414\u0435\u0440\u0435\u0432\u043e",modeTreeTitle:"\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0432 \u0440\u0435\u0436\u0438\u043c \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440\u0430 \u0434\u0435\u0440\u0435\u0432\u0430",modeViewText:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0434\u0435\u0440\u0435\u0432\u0430",modeViewTitle:"\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0432 \u0440\u0435\u0436\u0438\u043c \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430 \u0434\u0435\u0440\u0435\u0432\u0430",modePreviewText:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",modePreviewTitle:"\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0432 \u0440\u0435\u0436\u0438\u043c \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430",examples:"\u041f\u0440\u0438\u043c\u0435\u0440\u044b",default:"\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e",containsInvalidProperties:"\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043d\u0435\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430",containsInvalidItems:"\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043d\u0435\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b"},ko:{array:"\ubc30\uc5f4",auto:"\uc790\ub3d9",appendText:"\ucd94\uac00",appendTitle:'\uc120\ud0dd\ud55c \uc694\uc18c \uc544\ub798\uc5d0 "\uc790\ub3d9" \uc694\uc18c\ub97c \ucd94\uac00\ud569\ub2c8\ub2e4. (Ctrl + Shift + Ins)',appendSubmenuTitle:"\ucd94\uac00\ud560 \uc694\uc18c\uc758 \uc720\ud615\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.",appendTitleAuto:'"\uc790\ub3d9" \uc694\uc18c\ub97c \ucd94\uac00\ud569\ub2c8\ub2e4. (Ctrl + Shift + Ins)',ascending:"\uc624\ub984\ucc28\uc21c",ascendingTitle:"\uc120\ud0dd\ud55c ${type}\uc758 \ud558\uc704 \uc694\uc18c\ub97c \uc624\ub984\ucc28\uc21c \uc815\ub82c\ud569\ub2c8\ub2e4.",actionsMenu:"\uba54\ub274 \uc5f4\uae30 (Ctrl + M)",cannotParseFieldError:"JSON\uc758 \uc694\uc18c\ub97c \ud574\uc11d\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.",cannotParseValueError:"JSON\uc758 \uac12\uc744 \ud574\uc11d\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.",collapseAll:"\ubaa8\ub450 \uc811\uae30",compactTitle:"\ubaa8\ub4e0 \uacf5\ubc31\uc744 \uc81c\uac70\ud558\uc5ec JSON \ub370\uc774\ud130\ub97c \uc791\uac8c \ub9cc\ub4ed\ub2c8\ub2e4. (Ctrl + Shift + I)",descending:"\ub0b4\ub9bc\ucc28\uc21c",descendingTitle:"\uc120\ud0dd\ud55c ${type}\uc758 \ud558\uc704 \uc694\uc18c\ub97c \ub0b4\ub9bc\ucc28\uc21c\uc73c\ub85c \uc815\ub82c",drag:"\ub4dc\ub798\uadf8\ud558\uc5ec \uc694\uc18c\ub97c \uc774\ub3d9\ud569\ub2c8\ub2e4. (Alt + Shift + Arrows)",duplicateKey:"\ubcf5\uc81c\ud0a4",duplicateText:"\ubcf5\uc81c",duplicateTitle:"\uc120\ud0dd\ud55c \uc694\uc18c\ub97c \ubcf5\uc81c\ud569\ub2c8\ub2e4. (Ctrl + D)",duplicateField:"\uc120\ud0dd\ud55c \uc694\uc18c\ub97c \ubcf5\uc81c\ud569\ub2c8\ub2e4. (Ctrl + D)",duplicateFieldError:"\uc694\uc18c \uc774\ub984\uc774 \uc911\ubcf5\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",empty:"\ube44\uc5b4\uc788\uc74c",expandAll:"\ubaa8\ub450 \uc5f4\uae30",expandTitle:"\ud074\ub9ad\ud558\uc5ec \uc694\uc18c\ub97c \uc5f4\uac70\ub098 \ub2eb\uc2b5\ub2c8\ub2e4. (Ctrl + E) \nCtrl + Click\uc73c\ub85c \ubaa8\ub4e0 \ud558\uc704 \uc694\uc18c\ub97c \uc5f4\uac70\ub098 \ub2eb\uc2b5\ub2c8\ub2e4.",formatTitle:"\uc801\uc808\ud55c \ub4e4\uc5ec\uc4f0\uae30 \ubc0f \uc904\ubc14\uafc8\uc73c\ub85c JSON \ub370\uc774\ud130\ub97c \uc815\ud615\ud654\ud569\ub2c8\ub2e4. (Ctrl + I)",insert:"\uc0bd\uc785",insertTitle:"\uc120\ud0dd\ud55c \uc694\uc18c \uc704\uc5d0 \uc0c8\uc694\uc18c\ub97c \uc0bd\uc785\ud569\ub2c8\ub2e4. (Ctrl + Ins)",insertSub:"\uc0bd\uc785\ud560 \uc694\uc18c\uc758 \uc720\ud615\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.",object:"\uac1d\uccb4",ok:"\ud655\uc778",redo:"\ub2e4\uc2dc \uc2e4\ud589 (Ctrl + Shift + Z)",removeText:"\uc0ad\uc81c",removeTitle:"\uc120\ud0dd\ud55c \uc694\uc18c\ub97c \uc0ad\uc81c\ud569\ub2c8\ub2e4. (Ctrl + Del)",removeField:"\uc120\ud0dd\ud55c \uc694\uc18c\ub97c \uc0ad\uc81c\ud569\ub2c8\ub2e4. (Ctrl + Del)",repairTitle:"JSON \uad50\uc815: JSON \ub0b4\uc758 \uc8fc\uc11d\uacfc JSONP \ud45c\uae30\ubc95\uc744 \uc9c0\uc6b0\uace0 \ub530\uc634\ud45c\uc640 \uc774\uc2a4\ucf00\uc774\ud504 \ubb38\uc790\ub97c \uc218\uc815\ud569\ub2c8\ub2e4.",searchTitle:"\uc694\uc18c \ub610\ub294 \uac12 \ucc3e\uae30",searchNextResultTitle:"\ub2e4\uc74c\uc73c\ub85c \ucc3e\uae30 (Enter)",searchPreviousResultTitle:"\uc774\uc804\uc73c\ub85c \ucc3e\uae30 (Shift + Enter)",selectNode:"\uc694\uc18c\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694...",showAll:"\ubaa8\ub450\ubcf4\uae30",showMore:"\ub354\ubcf4\uae30",showMoreStatus:"${totalChilds} \uac1c\uc758 \ud56d\ubaa9 \uc911 ${visibleChilds} \uac1c\ub97c \ud45c\uc2dc\ud569\ub2c8\ub2e4.",sort:"\uc815\ub82c",sortTitle:"\uc120\ud0dd\ud55c ${type}\uc758 \ud558\uc704 \uc694\uc18c\ub97c \uc815\ub82c\ud569\ub2c8\ub2e4.",sortTitleShort:"\uc815\ub82c",sortFieldLabel:"\uc694\uc18c:",sortDirectionLabel:"\uc21c\uc11c:",sortFieldTitle:"\ubc30\uc5f4\uc774\ub098 \uac1d\uccb4\ub97c \uc815\ub82c\ud558\ub294 \uc694\uc18c\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694.",sortAscending:"\uc624\ub984\ucc28\uc21c",sortAscendingTitle:"\uc120\ud0dd\ud55c \uc694\uc18c\ub97c \uc624\ub984\ucc28\uc21c\uc73c\ub85c \uc815\ub82c\ud569\ub2c8\ub2e4.",sortDescending:"\ub0b4\ub9bc\ucc28\uc21c",sortDescendingTitle:"\uc120\ud0dd\ud55c \uc694\uc18c\ub97c \ub0b4\ub9bc\ucc28\uc21c\uc73c\ub85c \uc815\ub82c\ud569\ub2c8\ub2e4.",string:"\ubb38\uc790",transform:"\ubcc0\ud658",transformTitle:"\uc120\ud0dd\ud55c ${type}\uc758 \ud558\uc704 \uc694\uc18c\ub97c \ud544\ud130\ud558\uac70\ub098 \uc815\ub82c \ub610\ub294 \ubcc0\ud658\ud569\ub2c8\ub2e4.",transformTitleShort:"\ub0b4\uc6a9\uc744 \ud544\ud130\ud558\uac70\ub098 \uc815\ub82c \ub610\ub294 \ubcc0\ud658\ud569\ub2c8\ub2e4.",extract:"\ucd94\ucd9c",extractTitle:"\uc120\ud0dd\ud55c ${type}\uc758 \uac12\uc744 \ucd5c\uc0c1\uc704\uc5d0 \uc704\uce58\uc2dc\ud0b5\ub2c8\ub2e4.",transformQueryTitle:"JMESPath \ucffc\ub9ac\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.",transformWizardLabel:"\ub9c8\ubc95\uc0ac",transformWizardFilter:"\ud544\ud130",transformWizardSortBy:"\uc815\ub82c",transformWizardSelectFields:"\uc694\uc18c\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694.",transformQueryLabel:"\ucffc\ub9ac",transformPreviewLabel:"\ubbf8\ub9ac\ubcf4\uae30",type:"\uc720\ud615",typeTitle:"\uc120\ud0dd\ud55c \uc694\uc18c\uc758 \uc720\ud615\uc744 \ubcc0\uacbd\ud569\ub2c8\ub2e4.",openUrl:"Ctrl + Click \ub610\ub294 Ctrl + Enter\ub85c \uc0c8 \ucc3d\uc5d0\uc11c URL \uc5f4\uae30",undo:"\uc2e4\ud589 \ucde8\uc18c (Ctrl + Z)",validationCannotMove:"\ud558\uc704 \uc694\uc18c\ub85c \uc774\ub3d9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.",autoType:"\uc790\ub3d9: \uc694\uc18c\uc758 \ud615\uc2dd\uc774 \uac12\uc758 \uc720\ud615\uc73c\ub85c \uacb0\uc815\ub429\ub2c8\ub2e4. \ubb38\uc790, \uc22b\uc790, \ubd80\uc6b8, \ub610\ub294 null\ub9cc \ud5c8\uc6a9\ub429\ub2c8\ub2e4.",objectType:"\uac1d\uccb4: \uc21c\uc11c\ub300\ub85c \ub098\uc5f4\ub418\uc9c0 \uc54a\uc740 \uc774\ub984/\uac12 \uc30d\uc73c\ub85c \uc774\ub8e8\uc5b4\uc9c4 \uc9d1\ud569\uc785\ub2c8\ub2e4.",arrayType:"\ubc30\uc5f4: \uc21c\uc11c\ub300\ub85c \ub098\uc5f4\ub41c \uac12\uc758 \uc9d1\ud569\uc785\ub2c8\ub2e4.",stringType:"\ubb38\uc790: \uc694\uc18c\uc758 \uc720\ud615\uc774 \uac12\uc5d0\uc11c \uacb0\uc815\ub418\uc9c0 \uc54a\uc9c0\ub9cc \ud56d\uc0c1 \ubb38\uc790\ub85c \ubc18\ud658\ub429\ub2c8\ub2e4.",modeEditorTitle:"\ud3b8\uc9d1\uae30 \uc720\ud615 \ubcc0\uacbd",modeCodeText:"\ucf54\ub4dc",modeCodeTitle:"\ud615\uc2dd \uad50\uc815\uc744 \ub3c4\uc640\uc8fc\ub294 \uae30\ub2a5\uc774 \ud3ec\ud568\ub41c \ubb38\uc790 \ud3b8\uc9d1\uae30",modeFormText:"\uc785\ub825 \uc591\uc2dd",modeFormTitle:"\uc815\ud574\uc9c4 \uc694\uc18c\uc5d0 \uac12\uc744 \uc785\ub825\ud558\ub294 \ud3b8\uc9d1\uae30",modeTextText:"\ubb38\uc790",modeTextTitle:"\ub2e8\uc21c \ubb38\uc790 \ud3b8\uc9d1\uae30",modeTreeText:"\ud2b8\ub9ac",modeTreeTitle:"\ud2b8\ub9ac \uad6c\uc870\ub85c \ud45c\uc2dc\ub418\ub294 \ud3b8\uc9d1\uae30",modeViewText:"\ubcf4\uae30",modeViewTitle:"\uc77d\uae30\uc804\uc6a9 \ud2b8\ub9ac \uad6c\uc870\ub85c JSON\uc744 \ud45c\uc2dc",modePreviewText:"\ubbf8\ub9ac\ubcf4\uae30",modePreviewTitle:"\uc77d\uae30\uc804\uc6a9 \ubb38\uc790\ub85c JSON\uc744 \ud45c\uc2dc",examples:"\uc608\uc81c",default:"\uae30\ubcf8\uac12",containsInvalidProperties:"\uc798\ubabb\ub41c \uc18d\uc131\uc774 \ud3ec\ud568\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.",containsInvalidItems:"\uc798\ubabb\ub41c \ud56d\ubaa9\uc774 \ud3ec\ud568\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4"}},c=Object.keys(ce),K="en",U=typeof navigator<"u"?navigator.language||navigator.userLanguage:void 0,Z=c.find(function(k){return k===U})||K;function Y(k){var _;k&&((_=c.find(function(M){return M===k}))?Z=_:console.error("Language not found"))}function H(k){if(k)for(var _ in k)!function(M){c.find(function(R){return R===M})||c.push(M),ce[M]=Object.assign({},ce[K],ce[M],k[M])}(_)}function F(k,_,M){var R=ce[M=M||Z][k]||ce[K][k]||k;if(_)for(var S in _)R=R.replace("${"+S+"}",_[S]);return R}},6056:function(Ce,ce,ae){"use strict";ae.d(ce,{J:function(){return Z},r:function(){return U}}),ce=ae(5156);var c=ae.n(ce),K=ae(9791);function U(Y,M){var F,k=M.sort,_=M.filter,R=(M=M.projection,"");return _?(F="@"!==_.field?["0"].concat((0,K.parsePath)("."+_.field)):["0"],F="string"==typeof(0,K.get)(Y,F)?_.value:(0,K.parseString)(_.value),R+="[? "+_.field+" "+_.relation+" `"+JSON.stringify(F)+"`]"):R+=Array.isArray(Y)?"[*]":"@",k&&(R+="desc"===k.direction?" | reverse(sort_by(@, &"+k.field+"))":" | sort_by(@, &"+k.field+")"),M&&("]"!==R[R.length-1]&&(R+=" | [*]"),1===M.fields.length?R+="."+M.fields[0]:1<M.fields.length&&(R+=".{"+M.fields.map(function(S){var y=S.split(".");return y[y.length-1]+": "+S}).join(", ")+"}")),R}function Z(Y,H){return c().search(Y,H)}},4987:function(){function Ce(P){void 0===P||"remove"in P||Object.defineProperty(P,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){void 0!==this.parentNode&&this.parentNode.removeChild(this)}})}typeof Element<"u"&&(void 0!==window.Element&&Ce(window.Element.prototype),void 0!==window.CharacterData&&Ce(window.CharacterData.prototype),void 0!==window.DocumentType)&&Ce(window.DocumentType.prototype),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(P){for(var ae=0;ae<this.length;ae++)if(P.call(this,this[ae],ae,this))return ae;return-1},configurable:!0,writable:!0}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(P){return this[P=this.findIndex(P)]},configurable:!0,writable:!0}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")})},341:function(Ce,w,y){"use strict";y.r(w),y.d(w,{previewModeMixins:function(){return p}});var ce=y(1262),c=y(4188),K=y(6436),U=y(2474);function Z(f){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(f)}function Y(f,m){for(var h=0;h<m.length;h++){var v=m[h];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,(O=function(C,x){if("object"!==Z(C)||null===C)return C;var L=C[Symbol.toPrimitive];if(void 0===L)return String(C);if("object"!==Z(L=L.call(C,"string")))return L;throw new TypeError("@@toPrimitive must return a primitive value.")}(O=v.key),"symbol"===Z(O)?O:String(O)),v)}var O}var H=function(){function f(O,C,x){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.onChange=O,this.calculateItemSize=C||function(){return 1},this.limit=x,this.items=[],this.index=-1}var m,h;return m=f,(h=[{key:"add",value:function(O){for(;this._calculateHistorySize()>this.limit&&1<this.items.length;)this.items.shift(),this.index--;this.items=this.items.slice(0,this.index+1),this.items.push(O),this.index++,this.onChange()}},{key:"_calculateHistorySize",value:function(){var O=this.calculateItemSize,C=0;return this.items.forEach(function(x){C+=O(x)}),C}},{key:"undo",value:function(){if(this.canUndo())return this.index--,this.onChange(),this.items[this.index]}},{key:"redo",value:function(){if(this.canRedo())return this.index++,this.onChange(),this.items[this.index]}},{key:"canUndo",value:function(){return 0<this.index}},{key:"canRedo",value:function(){return this.index<this.items.length-1}},{key:"clear",value:function(){this.items=[],this.index=-1,this.onChange()}}])&&Y(m.prototype,h),Object.defineProperty(m,"prototype",{writable:!1}),f}(),F=y(7907),k=y(6056),_=y(6617),M=y(6210),R=y(2558),S=(w=y(8458),y(9791)),p=(y=w.textModeMixins[0].mixin,w={create:function(v){var m=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},h=(void 0===m.statusBar&&(m.statusBar=!0),m.mainMenuBar=!1!==m.mainMenuBar,m.enableSort=!1!==m.enableSort,m.enableTransform=!1!==m.enableTransform,m.createQuery=m.createQuery||k.r,m.executeQuery=m.executeQuery||k.J,this.indentation="number"==typeof(this.options=m).indentation?Number(m.indentation):2,(0,F.cC)(this.options.languages),(0,F.m0)(this.options.language),this.mode="preview",this);this.container=v,this.dom={},this.json=void 0,this.text="",this._debouncedValidate=(0,S.debounce)(this.validate.bind(this),this.DEBOUNCE_INTERVAL),this.width=v.clientWidth,this.height=v.clientHeight,this.frame=document.createElement("div"),this.frame.className="jsoneditor jsoneditor-mode-preview",this.frame.onclick=function(O){O.preventDefault()},this.frameFocusTracker=new U.R(v={target:this.frame,onFocus:this.options.onFocus||null,onBlur:this.options.onBlur||null}),this.content=document.createElement("div"),this.content.className="jsoneditor-outer",this.dom.busy=document.createElement("div"),this.dom.busy.className="jsoneditor-busy",this.dom.busyContent=document.createElement("span"),this.dom.busyContent.textContent="busy...",this.dom.busy.appendChild(this.dom.busyContent),this.content.appendChild(this.dom.busy),this.dom.previewContent=document.createElement("pre"),this.dom.previewContent.className="jsoneditor-preview",this.dom.previewText=document.createTextNode(""),this.dom.previewContent.appendChild(this.dom.previewText),this.content.appendChild(this.dom.previewContent),this.options.mainMenuBar&&((0,S.addClassName)(this.content,"has-main-menu-bar"),this.menu=document.createElement("div"),this.menu.className="jsoneditor-menu",this.frame.appendChild(this.menu),(v=document.createElement("button")).type="button",v.className="jsoneditor-format",v.title=(0,F.Iu)("formatTitle"),this.menu.appendChild(v),v.onclick=function(){h.executeWithBusyMessage(function(){try{h.format()}catch(O){h._onError(O)}},"formatting...")},(v=document.createElement("button")).type="button",v.className="jsoneditor-compact",v.title=(0,F.Iu)("compactTitle"),this.menu.appendChild(v),v.onclick=function(){h.executeWithBusyMessage(function(){try{h.compact()}catch(O){h._onError(O)}},"compacting...")},this.options.enableSort&&((v=document.createElement("button")).type="button",v.className="jsoneditor-sort",v.title=(0,F.Iu)("sortTitleShort"),v.onclick=function(){h._showSortModal()},this.menu.appendChild(v)),this.options.enableTransform&&((v=document.createElement("button")).type="button",v.title=(0,F.Iu)("transformTitleShort"),v.className="jsoneditor-transform",v.onclick=function(){h._showTransformModal()},this.dom.transform=v,this.menu.appendChild(v)),(v=document.createElement("button")).type="button",v.className="jsoneditor-repair",v.title=(0,F.Iu)("repairTitle"),this.menu.appendChild(v),!(v.onclick=function(){void 0===h.json&&h.executeWithBusyMessage(function(){try{h.repair()}catch(O){h._onError(O)}},"repairing...")})!==this.options.history&&(this.history=new H(function(){h.dom.undo.disabled=!h.history.canUndo(),h.dom.redo.disabled=!h.history.canRedo()},function(O){return 2*O.text.length},c.oW),(v=document.createElement("button")).type="button",v.className="jsoneditor-undo jsoneditor-separator",v.title=(0,F.Iu)("undo"),v.onclick=function(){var O=h.history.undo();O&&h._applyHistory(O)},this.menu.appendChild(v),this.dom.undo=v,(v=document.createElement("button")).type="button",v.className="jsoneditor-redo",v.title=(0,F.Iu)("redo"),v.onclick=function(){var O=h.history.redo();O&&h._applyHistory(O)},this.menu.appendChild(v),this.dom.redo=v,this.history.onChange()),this.options)&&this.options.modes&&this.options.modes.length&&(this.modeSwitcher=new _.x(this.menu,this.options.modes,this.options.mode,function(O){try{h.setMode(O),h.modeSwitcher.focus()}catch(C){h._onError(C)}})),this.errorTable=new K.Q({errorTableVisible:!0,onToggleVisibility:function(){h.validate()},onFocusLine:null,onChangeHeight:function(O){h.content.style.marginBottom=-(O=O+(h.dom.statusBar?h.dom.statusBar.clientHeight:0)+1)+"px",h.content.style.paddingBottom=O+"px"}}),this.frame.appendChild(this.content),this.frame.appendChild(this.errorTable.getErrorTable()),this.container.appendChild(this.frame),m.statusBar&&((0,S.addClassName)(this.content,"has-status-bar"),v=document.createElement("div"),(this.dom.statusBar=v).className="jsoneditor-statusbar",this.frame.appendChild(v),this.dom.fileSizeInfo=document.createElement("span"),this.dom.fileSizeInfo.className="jsoneditor-size-info",this.dom.fileSizeInfo.innerText="",v.appendChild(this.dom.fileSizeInfo),this.dom.arrayInfo=document.createElement("span"),this.dom.arrayInfo.className="jsoneditor-size-info",this.dom.arrayInfo.innerText="",v.appendChild(this.dom.arrayInfo),v.appendChild(this.errorTable.getErrorCounter()),v.appendChild(this.errorTable.getWarningIcon()),v.appendChild(this.errorTable.getErrorIcon())),this._renderPreview(),this.setSchema(this.options.schema,this.options.schemaRefs)},_renderPreview:function(){var f=this.getText();this.dom.previewText.nodeValue=(0,S.limitCharacters)(f,c.WF),this.dom.fileSizeInfo&&(this.dom.fileSizeInfo.innerText="Size: "+(0,S.formatSize)(f.length)),this.dom.arrayInfo&&(this.dom.arrayInfo.innerText=Array.isArray(this.json)?"Array: "+this.json.length+" items":"")},_onChange:function(){if(this._debouncedValidate(),this.options.onChange)try{this.options.onChange()}catch(f){console.error("Error in onChange callback: ",f)}if(this.options.onChangeJSON)try{this.options.onChangeJSON(this.get())}catch(f){console.error("Error in onChangeJSON callback: ",f)}if(this.options.onChangeText)try{this.options.onChangeText(this.getText())}catch(f){console.error("Error in onChangeText callback: ",f)}}},w._showSortModal=function(){var f=this;this.executeWithBusyMessage(function(){var m=f.options.modalAnchor||c.qD,h=f.get();f._renderPreview(),(0,M.showSortModal)(m,h,function(v){f.executeWithBusyMessage(function(){var O,C,x;O=h,C=v,Array.isArray(O)&&(x=(0,S.sort)(O,C.path,C.direction),f.sortedBy=C,f._setAndFireOnChange(x)),(0,S.isObject)(O)&&(x=(0,S.sortObjectKeys)(O,C.direction),f.sortedBy=C,f._setAndFireOnChange(x))},"sorting...")},f.sortedBy)},"parsing...")},w._showTransformModal=function(){var f=this;this.executeWithBusyMessage(function(){var m=(O=f.options).createQuery,h=O.executeQuery,v=O.modalAnchor,O=O.queryDescription,C=f.get();f._renderPreview(),(0,R.showTransformModal)({container:v||c.qD,json:C,queryDescription:O,createQuery:m,executeQuery:h,onTransform:function(x){f.executeWithBusyMessage(function(){var L=h(C,x);f._setAndFireOnChange(L)},"transforming...")}})},"parsing...")},w.destroy=function(){this.frame&&this.container&&this.frame.parentNode===this.container&&this.container.removeChild(this.frame),this.modeSwitcher&&(this.modeSwitcher.destroy(),this.modeSwitcher=null),this._debouncedValidate=null,this.history&&(this.history.clear(),this.history=null),this.frameFocusTracker.destroy()},w.compact=function(){var f=this.get(),m=JSON.stringify(f);this._setTextAndFireOnChange(m,f)},w.format=function(){var f=this.get(),m=JSON.stringify(f,null,this.indentation);this._setTextAndFireOnChange(m,f)},w.repair=function(){var f=this.getText();try{var m=(0,ce.K)(f);this._setTextAndFireOnChange(m)}catch{}},w.focus=function(){this.dom.transform.focus()},w.set=function(f){this.history&&this.history.clear(),this._set(f)},w.update=function(f){this._set(f)},w._set=function(f){this.text=void 0,this.json=f,this._renderPreview(),this._pushHistory(),this._debouncedValidate()},w._setAndFireOnChange=function(f){this._set(f),this._onChange()},w.get=function(){var f;return void 0===this.json&&(f=this.getText(),this.json=(0,S.parse)(f)),this.json},w.getText=function(){return void 0===this.text&&(this.text=JSON.stringify(this.json,null,this.indentation),!0===this.options.escapeUnicode)&&(this.text=(0,S.escapeUnicodeChars)(this.text)),this.text},w.setText=function(f){this.history&&this.history.clear(),this._setText(f)},w.updateText=function(f){this.getText()!==f&&this._setText(f)},w._setText=function(f,m){var h;this.text=!0===this.options.escapeUnicode?(0,S.escapeUnicodeChars)(f):f,this.json=m,this._renderPreview(),void 0===this.json?(h=this).executeWithBusyMessage(function(){try{h.json=h.get(),h._renderPreview(),h._pushHistory()}catch{}},"parsing..."):this._pushHistory(),this._debouncedValidate()},w._setTextAndFireOnChange=function(f,m){this._setText(f,m),this._onChange()},w._applyHistory=function(f){this.json=f.json,this.text=f.text,this._renderPreview(),this._debouncedValidate()},w._pushHistory=function(){this.history&&this.history.add({text:this.text,json:this.json})},w.executeWithBusyMessage=function(f,m){var h;this.getText().length>c.EX?((0,S.addClassName)((h=this).frame,"busy"),h.dom.busyContent.innerText=m,setTimeout(function(){f(),(0,S.removeClassName)(h.frame,"busy"),h.dom.busyContent.innerText=""},100)):f()},w.validate=y.validate,w._renderErrors=y._renderErrors,[{mode:"preview",mixin:w,data:"json"}])},6210:function(Ce,ce,ae){"use strict";ae.r(ce),ae.d(ce,{showSortModal:function(){return Z}}),ce=ae(483);var c=ae.n(ce),K=ae(7907),U=ae(9791);function Z(Y,S,F,k){var _=Array.isArray(S)?(0,U.getChildPaths)(S):[""],M=k&&k.path&&(0,U.contains)(_,k.path)?k.path:_[0],R=k&&k.direction||"asc";S='<div class="pico-modal-contents"><div class="pico-modal-header">'+(0,K.Iu)("sort")+"</div><form><table><tbody><tr>  <td>"+(0,K.Iu)("sortFieldLabel")+' </td>  <td class="jsoneditor-modal-input">  <div class="jsoneditor-select-wrapper">    <select id="field" title="'+(0,K.Iu)("sortFieldTitle")+'">    </select>  </div>  </td></tr><tr>  <td>'+(0,K.Iu)("sortDirectionLabel")+' </td>  <td class="jsoneditor-modal-input">  <div id="direction" class="jsoneditor-button-group"><input type="button" value="'+(0,K.Iu)("sortAscending")+'" title="'+(0,K.Iu)("sortAscendingTitle")+'" data-value="asc" class="jsoneditor-button-first jsoneditor-button-asc"/><input type="button" value="'+(0,K.Iu)("sortDescending")+'" title="'+(0,K.Iu)("sortDescendingTitle")+'" data-value="desc" class="jsoneditor-button-last jsoneditor-button-desc"/>  </div>  </td></tr><tr><td colspan="2" class="jsoneditor-modal-input jsoneditor-modal-actions">  <input type="submit" id="ok" value="'+(0,K.Iu)("ok")+'" /></td></tr></tbody></table></form></div>',c()({parent:Y,content:S,overlayClass:"jsoneditor-modal-overlay",overlayStyles:{backgroundColor:"rgb(1,1,1)",opacity:.3},modalClass:"jsoneditor-modal jsoneditor-modal-sort"}).afterCreate(function(y){var w=y.modalElem().querySelector("form"),p=y.modalElem().querySelector("#ok"),f=y.modalElem().querySelector("#field"),m=y.modalElem().querySelector("#direction");function h(v){m.value=v,m.className="jsoneditor-button-group jsoneditor-button-group-value-"+m.value}_.forEach(function(v){var O,C=document.createElement("option");C.text=""===(O=v)?"@":"."===O[0]?O.slice(1):O,C.value=v,f.appendChild(C)}),f.value=M||_[0],h(R||"asc"),m.onclick=function(v){h(v.target.getAttribute("data-value"))},p.onclick=function(v){v.preventDefault(),v.stopPropagation(),y.close(),F({path:f.value,direction:m.value})},w&&(w.onsubmit=p.onclick)}).afterClose(function(y){y.destroy()}).show()}},2558:function(Ce,c,ae){"use strict";ae.r(c),ae.d(c,{showTransformModal:function(){return M}}),c=ae(483);var ce=ae.n(c),K=(c=ae(3879),ae.n(c)),U=ae(7907);function Z(R){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(R)}function Y(R,S,y,w){if("boolean"==typeof R||R instanceof Boolean||null===R||"number"==typeof R||R instanceof Number||"string"==typeof R||R instanceof String||R instanceof Date)return JSON.stringify(R);if(Array.isArray(R)){for(var p=R,f=S,m=y,h=w,v=f?m+f:void 0,O=f?"[\n":"[",C=0;C<p.length;C++){var x=p[C];if(f&&(O+=v),O+=void 0!==x&&"function"!=typeof x?Y(x,f,v,h):"null",C<p.length-1&&(O+=f?",\n":","),O.length>h)return O+"..."}return O+(f?"\n"+m+"]":"]")}if(R&&"object"===Z(R)){var L,Q=R,G=S,T=(m=y,w),V=G?m+G:void 0,J=!0,X=G?"{\n":"{";if("function"==typeof Q.toJSON)return Y(Q.toJSON(),G,m,T);for(L in Q)if(Object.prototype.hasOwnProperty.call(Q,L)&&(J?J=!1:X+=G?",\n":",",(X=(X+=G?V+'"'+L+'": ':'"'+L+'":')+Y(Q[L],G,V,T)).length>T))return X+"...";return X+(G?"\n"+m+"}":"}")}}function H(R,S){for(var y="";0<S--;)y+=R;return y}var F=ae(9791),k=ae(4188),_='Enter a <a href="http://jmespath.org" target="_blank">JMESPath</a> query to filter, sort, or transform the JSON data.<br/>To learn JMESPath, go to <a href="http://jmespath.org/tutorial.html" target="_blank">the interactive tutorial</a>.';function M(v){var S=v.container,y=v.json,w=void 0===(w=v.queryDescription)?_:w,p=v.createQuery,f=v.executeQuery,m=v.onTransform,h=y;v='<label class="pico-modal-contents"><div class="pico-modal-header">'+(0,U.Iu)("transform")+"</div><p>"+w+'</p><div class="jsoneditor-jmespath-label">'+(0,U.Iu)("transformWizardLabel")+' </div><div id="wizard" class="jsoneditor-jmespath-block jsoneditor-jmespath-wizard">  <table class="jsoneditor-jmespath-wizard-table">    <tbody>      <tr>        <th>'+(0,U.Iu)("transformWizardFilter")+'</th>        <td class="jsoneditor-jmespath-filter">          <div class="jsoneditor-inline jsoneditor-jmespath-filter-field" >            <select id="filterField">            </select>          </div>          <div class="jsoneditor-inline jsoneditor-jmespath-filter-relation" >            <select id="filterRelation">              <option value="==">==</option>              <option value="!=">!=</option>              <option value="<">&lt;</option>              <option value="<=">&lt;=</option>              <option value=">">&gt;</option>              <option value=">=">&gt;=</option>            </select>          </div>          <div class="jsoneditor-inline jsoneditor-jmespath-filter-value" >            <input type="text" class="value" placeholder="value..." id="filterValue" />          </div>        </td>      </tr>      <tr>        <th>'+(0,U.Iu)("transformWizardSortBy")+'</th>        <td class="jsoneditor-jmespath-filter">          <div class="jsoneditor-inline jsoneditor-jmespath-sort-field">            <select id="sortField">            </select>          </div>          <div class="jsoneditor-inline jsoneditor-jmespath-sort-order" >            <select id="sortOrder">              <option value="asc">Ascending</option>              <option value="desc">Descending</option>            </select>          </div>        </td>      </tr>      <tr id="selectFieldsPart">        <th>'+(0,U.Iu)("transformWizardSelectFields")+'</th>        <td class="jsoneditor-jmespath-filter">          <select class="jsoneditor-jmespath-select-fields" id="selectFields" multiple></select>        </td>      </tr>    </tbody>  </table></div><div class="jsoneditor-jmespath-label">'+(0,U.Iu)("transformQueryLabel")+' </div><div class="jsoneditor-jmespath-block">  <textarea id="query"             rows="4"             autocomplete="off"             autocorrect="off"             autocapitalize="off"             spellcheck="false"            title="'+(0,U.Iu)("transformQueryTitle")+'">[*]</textarea></div><div class="jsoneditor-jmespath-label">'+(0,U.Iu)("transformPreviewLabel")+' </div><div class="jsoneditor-jmespath-block">  <textarea id="preview"       class="jsoneditor-transform-preview"      readonly> </textarea></div><div class="jsoneditor-jmespath-block jsoneditor-modal-actions">  <input type="submit" id="ok" value="'+(0,U.Iu)("ok")+'" autofocus /></div></div>',ce()({parent:S,content:v,overlayClass:"jsoneditor-modal-overlay",overlayStyles:{backgroundColor:"rgb(1,1,1)",opacity:.3},modalClass:"jsoneditor-modal jsoneditor-modal-transform",focus:!1}).afterCreate(function(O){var C=O.modalElem(),ee=C.querySelector("#wizard"),x=C.querySelector("#ok"),L=C.querySelector("#filterField"),Q=C.querySelector("#filterRelation"),G=C.querySelector("#filterValue"),T=C.querySelector("#sortField"),V=C.querySelector("#sortOrder"),J=C.querySelector("#selectFields"),X=C.querySelector("#query"),q=C.querySelector("#preview");Array.isArray(h)||(ee.style.fontStyle="italic",ee.textContent="(wizard not available for objects, only for arrays)"),(0,F.getChildPaths)(y).forEach(function(Me){var Ie;Me=ue(Me),((Ie=document.createElement("option")).text=Me,Ie.value=Me,L.appendChild(Ie),Ie=document.createElement("option")).text=Me,Ie.value=Me,T.appendChild(Ie)}),0<(ee=(0,F.getChildPaths)(y,!0).filter(function(Re){return""!==Re})).length?ee.forEach(function(Me){Me=ue(Me);var Ie=document.createElement("option");Ie.text=Me,Ie.value=Me,J.appendChild(Ie)}):(ee=C.querySelector("#selectFieldsPart"))&&(ee.style.display="none"),ee=new(K())(L,{defaultSelected:!1,clearable:!0,allowDeselect:!0,placeholder:"field..."});var j=new(K())(Q,{defaultSelected:!1,clearable:!0,allowDeselect:!0,placeholder:"compare..."}),D=new(K())(T,{defaultSelected:!1,clearable:!0,allowDeselect:!0,placeholder:"field..."}),N=new(K())(V,{defaultSelected:!1,clearable:!0,allowDeselect:!0,placeholder:"order..."}),re=new(K())(J,{multiple:!0,clearable:!0,defaultSelected:!1,placeholder:"select fields..."});function ue(Re){return""===Re?"@":"."===Re[0]?Re.slice(1):Re}ee.on("selectr.change",Te),j.on("selectr.change",Te),G.oninput=Te,D.on("selectr.change",Te),N.on("selectr.change",Te),re.on("selectr.change",Te),C.querySelector(".pico-modal-contents").onclick=function(Re){"A"!==Re.target.nodeName&&Re.preventDefault()};var ve=(0,F.debounce)(function(){try{var Re=f(h,X.value);q.className="jsoneditor-transform-preview",q.value=(Me=Re,Ge=k.WF,"number"==typeof(Ie=2)?10<Ie?oe=H(" ",10):1<=Ie&&(oe=H(" ",Ie)):"string"==typeof Ie&&""!==Ie&&(oe=Ie),(Ie=Y(Me,oe,"",Ge)).length>Ge?(Me=Ie,("number"==typeof(oe=Ge)?Me.slice(0,oe):Me)+"..."):Ie),x.disabled=!1}catch(pe){q.className="jsoneditor-transform-preview jsoneditor-error",q.value=pe.toString(),x.disabled=!0}var Me,Ie,Ge,oe},300);function Ae(Re,Me){try{X.value=p(Re,Me),x.disabled=!1,ve()}catch(Ie){Re='Error: an error happened when executing "createQuery": '+(Ie.message||Ie.toString()),X.value="",x.disabled=!0,q.className="jsoneditor-transform-preview jsoneditor-error",q.value=Re}}function Te(){var Re={};if(L.value&&Q.value&&G.value&&(Re.filter={field:L.value,relation:Q.value,value:G.value}),T.value&&V.value&&(Re.sort={field:T.value,direction:V.value}),J.value){for(var Ie=[],Ge=0;Ge<J.options.length;Ge++)J.options[Ge].selected&&Ie.push(J.options[Ge].value);Re.projection={fields:Ie}}Ae(y,Re)}X.oninput=ve,x.onclick=function(Re){Re.preventDefault(),Re.stopPropagation(),O.close(),m(X.value)},Ae(y,{}),setTimeout(function(){X.select(),X.focus(),X.selectionStart=3,X.selectionEnd=3})}).afterClose(function(O){O.destroy()}).show()}},8458:function(Ce,m,ae){"use strict";ae.r(m),ae.d(m,{textModeMixins:function(){return O}});var ce=ae(1262),c=(m=ae(8170),ae.n(m)),K=ae(4188),U=ae(6436),Z=ae(2474),Y=ae(7907),H=ae(6056),F=ae(6617),k=ae(6210),_=ae(2558),M=ae(9125),R=ae(7026),S=ae(9791);function y(C){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(x){return typeof x}:function(x){return x&&"function"==typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(C)}function w(C,x){for(var L=0;L<x.length;L++){var Q=x[L];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(C,(G=function(T,V){if("object"!==y(T)||null===T)return T;var J=T[Symbol.toPrimitive];if(void 0===J)return String(T);if("object"!==y(J=J.call(T,"string")))return J;throw new TypeError("@@toPrimitive must return a primitive value.")}(G=Q.key),"symbol"===y(G)?G:String(G)),Q)}var G}var p=function(){function C(G,T){if(!(this instanceof C))throw new TypeError("Cannot call a class as a function");this.schema=G,this.schemaRefs=T||{},this.suggestions={},this.suggestionsRefs={},this._buildSuggestions()}var x,L;return x=C,(L=[{key:"_buildSuggestions",value:function(){for(var G in this._handleSchemaEntry("",this.schema,this.suggestions),this.schemaRefs)this.suggestionsRefs[G]={},this._handleSchemaEntry("",this.schemaRefs[G],this.suggestionsRefs[G])}},{key:"_handleRef",value:function(G,T,V){V[G]=V[G]||{},V[G].refs=V[G].refs||[],V[G].refs=(0,S.uniqueMergeArrays)(V[G].refs,[T])}},{key:"_handleSchemaEntry",value:function(G,T,V){if(T)if(T.$ref)this._handleRef(G,T.$ref,V);else{var J=this._checkOfConditon(T);if(J)this._handleOfCondition(G,T[J],V);else switch(T.type){case"object":this._handleObject(G,T,V);break;case"string":case"number":case"integer":this._handlePrimitive(G,T,V);break;case"boolean":this._handleBoolean(G,T,V);break;case"array":this._handleArray(G,T,V)}}else console.error("SchemaTextCompleter: schema node is missing for path",G)}},{key:"_handleObject",value:function(G,T,V){var J,X=this;(0,S.isObject)(T.properties)&&(J=Object.keys(T.properties),V[G]=V[G]||{},V[G].props=V[G].props||[],V[G].props=(0,S.uniqueMergeArrays)(V[G].props,J),J.forEach(function(q){(0,S.asyncExec)(function(){X._handleSchemaEntry("".concat(G,"/").concat(q),T.properties[q],V)})}))}},{key:"_handlePrimitive",value:function(G,T,V){V[G]=V[G]||{},(0,S.isArray)(T.examples)&&(V[G].examples=V[G].examples||[],V[G].examples=(0,S.uniqueMergeArrays)(V[G].examples,T.examples)),(0,S.isArray)(T.enum)&&(V[G].enum=V[G].enum||[],V[G].enum=(0,S.uniqueMergeArrays)(V[G].enum,T.enum))}},{key:"_handleBoolean",value:function(G,T,V){V[G]||(V[G]={bool:[!0,!1]})}},{key:"_handleArray",value:function(G,T,V){var J=this;T.items&&(0,S.asyncExec)(function(){J._handleSchemaEntry("".concat(G,"/\\d+"),T.items,V)})}},{key:"_handleOfCondition",value:function(G,T,V){var J=this;T&&T.length&&T.forEach(function(X){(0,S.asyncExec)(function(){J._handleSchemaEntry(G,X,V)})})}},{key:"_checkOfConditon",value:function(G){if(G)return G.oneOf?"oneOf":G.anyOf?"anyOf":G.allOf?"allOf":void 0}},{key:"getCompletions",value:function(G,T,V,J,X){var q=this;try{var ee=R.parse(T.getValue()).pointers||{};Object.keys(ee).forEach(function(D){(0,S.asyncExec)(function(){var re,ue;(null==(ue=ee[D].key)?void 0:ue.line)===V.row&&V.column>=ee[D].key.column&&V.column<=ee[D].keyEnd.column&&(re=D.slice(0,D.lastIndexOf("/"))),(re=(null==(ue=ee[D].value)?void 0:ue.line)===V.row&&(null==(ue=ee[D].value)?void 0:ue.line)===(null==(ue=ee[D].valueEnd)?void 0:ue.line)&&V.column>=ee[D].value.column&&V.column<=ee[D].valueEnd.column?D:re)&&(ue=function N(ve,Ae,Te){var Re,Me=Object.keys(Ae).reduce(function(pe,ge){return new RegExp("^".concat(Te).concat(ge)).test(ve)&&(!pe||pe.length<ge.length)?ge:pe});if("string"==typeof Me){if(null!=(Re=Ae[Me])&&null!=(Re=Re.refs)&&Re.length){var Ie,Ge={};for(Ie in Ae[Me].refs){var oe=Ae[Me].refs[Ie];q.suggestionsRefs[oe]&&(null!=(oe=N(ve,q.suggestionsRefs[oe],"".concat(Te).concat(Me)))&&oe.enum&&(Ge.enum=(0,S.uniqueMergeArrays)(Ge.enum,oe.enum)),null!=oe&&oe.examples&&(Ge.examples=(0,S.uniqueMergeArrays)(Ge.examples,oe.examples)),null!=oe&&oe.bool&&(Ge.bool=(0,S.uniqueMergeArrays)(Ge.bool,oe.bool)),null!=oe)&&oe.props&&(Ge.props=(0,S.uniqueMergeArrays)(Ge.props,oe.props))}return Ge}if(new RegExp("^".concat(Te).concat(Me,"$")).test(ve))return console.log("SchemaTextCompleter: Text suggestion match",{path:ve,schemaPath:"".concat(Te).concat(Me),suggestions:Ae[Me]}),Ae[Me]}}(re,q.suggestions,""),function(D){function N(ve){var Ae,Te={props:"property",enum:"enum",bool:"boolean",examples:"examples"};D&&null!=(Ae=D[ve])&&Ae.length&&(re=re.concat(D[ve].map(function(Re){return{caption:Re+"",meta:"schema [".concat(Te[ve],"]"),score:ue++,value:Re+""}})))}var re=[],ue=0;N("props"),N("enum"),N("bool"),N("examples"),re.length&&X(null,re)}(ue))})})}catch{}}}])&&w(x.prototype,L),Object.defineProperty(x,"prototype",{writable:!1}),C}();function f(C){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(x){return typeof x}:function(x){return x&&"function"==typeof Symbol&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x})(C)}var h="ace/theme/jsoneditor";function v(){try{this.format()}catch{}}(m={}).create=function(X){var x,L,Q,G=this,T=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},V=(void 0===T.statusBar&&(T.statusBar=!0),T.mainMenuBar=!1!==T.mainMenuBar,T.enableSort=!1!==T.enableSort,T.enableTransform=!1!==T.enableTransform,T.createQuery=T.createQuery||H.r,T.executeQuery=T.executeQuery||H.J,T.showErrorTable=T.showErrorTable||["text","preview"],this.indentation="number"==typeof(this.options=T).indentation?Number(T.indentation):2,(0,Y.cC)(this.options.languages),(0,Y.m0)(this.options.language),T.ace||c()),J=(this.mode="code"===T.mode?"code":"text","code"===this.mode&&void 0===V&&(this.mode="text",console.warn("Failed to load Ace editor, falling back to plain text mode. Please use a JSONEditor bundle including Ace, or pass Ace as via the configuration option `ace`.")),this.theme=T.theme||h,this.theme===h&&V&&(0,M.O)(),T.onTextSelectionChange&&this.onTextSelectionChange(T.onTextSelectionChange),this);this.container=X,this.dom={},this.aceEditor=void 0,this.textarea=void 0,this.validateSchema=null,this.annotations=[],this.lastSchemaErrors=void 0,this._debouncedValidate=(0,S.debounce)(this._validateAndCatch.bind(this),this.DEBOUNCE_INTERVAL),this.width=X.clientWidth,this.height=X.clientHeight,this.frame=document.createElement("div"),this.frame.className="jsoneditor jsoneditor-mode-"+this.options.mode,this.frame.onclick=function(q){q.preventDefault()},this.frame.onkeydown=function(q){J._onKeyDown(q)},this.frameFocusTracker=new Z.R(X={target:this.frame,onFocus:this.options.onFocus||null,onBlur:this.options.onBlur||null}),this.content=document.createElement("div"),this.content.className="jsoneditor-outer",this.options.mainMenuBar&&((0,S.addClassName)(this.content,"has-main-menu-bar"),this.menu=document.createElement("div"),this.menu.className="jsoneditor-menu",this.frame.appendChild(this.menu),(X=document.createElement("button")).type="button",X.className="jsoneditor-format",X.title=(0,Y.Iu)("formatTitle"),this.menu.appendChild(X),X.onclick=function(){try{J.format(),J._onChange()}catch(q){J._onError(q)}},(X=document.createElement("button")).type="button",X.className="jsoneditor-compact",X.title=(0,Y.Iu)("compactTitle"),this.menu.appendChild(X),X.onclick=function(){try{J.compact(),J._onChange()}catch(q){J._onError(q)}},this.options.enableSort&&((X=document.createElement("button")).type="button",X.className="jsoneditor-sort",X.title=(0,Y.Iu)("sortTitleShort"),X.onclick=function(){J._showSortModal()},this.menu.appendChild(X)),this.options.enableTransform&&((X=document.createElement("button")).type="button",X.title=(0,Y.Iu)("transformTitleShort"),X.className="jsoneditor-transform",X.onclick=function(){J._showTransformModal()},this.menu.appendChild(X)),(X=document.createElement("button")).type="button",X.className="jsoneditor-repair",X.title=(0,Y.Iu)("repairTitle"),this.menu.appendChild(X),X.onclick=function(){try{J.repair(),J._onChange()}catch(q){J._onError(q)}},"code"===this.mode&&((X=document.createElement("button")).type="button",X.className="jsoneditor-undo jsoneditor-separator",X.title=(0,Y.Iu)("undo"),X.onclick=function(){G.aceEditor.getSession().getUndoManager().undo()},this.menu.appendChild(X),this.dom.undo=X,(X=document.createElement("button")).type="button",X.className="jsoneditor-redo",X.title=(0,Y.Iu)("redo"),X.onclick=function(){G.aceEditor.getSession().getUndoManager().redo()},this.menu.appendChild(X),this.dom.redo=X),this.options&&this.options.modes&&this.options.modes.length&&(this.modeSwitcher=new F.x(this.menu,this.options.modes,this.options.mode,function(q){try{J.setMode(q),J.modeSwitcher.focus()}catch(ee){J._onError(ee)}})),"code"===this.mode)&&((x=document.createElement("a")).appendChild(document.createTextNode("powered by ace")),x.href="https://ace.c9.io/",x.target="_blank",x.className="jsoneditor-poweredBy",x.onclick=function(){window.open(x.href,x.target,"noreferrer")},this.menu.appendChild(x)),X=this.options.onEditable&&f("function"===this.options.onEditable)&&!this.options.onEditable({}),this.frame.appendChild(this.content),this.container.appendChild(this.frame),"code"===this.mode?(this.editorDom=document.createElement("div"),this.editorDom.style.height="100%",this.editorDom.style.width="100%",this.content.appendChild(this.editorDom),Q=(V=V.edit(this.editorDom)).getSession(),V.$blockScrolling=1/0,V.setTheme(this.theme),V.setOptions({readOnly:X}),V.setShowPrintMargin(!1),V.setFontSize("14px"),Q.setMode("ace/mode/json"),Q.setTabSize(this.indentation),Q.setUseSoftTabs(!0),Q.setUseWrapMode(!0),L=Q.setAnnotations,Q.setAnnotations=function(q){L.call(this,q&&q.length?q:J.annotations)},V.commands.bindKey("Ctrl-L",null),V.commands.bindKey("Command-L",null),V.commands.bindKey("Ctrl-\\",null),V.commands.bindKey("Command-\\",null),V.commands.bindKey("Ctrl-Shift-\\",null),V.commands.bindKey("Command-Shift-\\",null),(this.aceEditor=V).on("change",this._onChange.bind(this)),V.on("changeSelection",this._onSelect.bind(this))):((Q=document.createElement("textarea")).className="jsoneditor-text",Q.spellcheck=!1,this.content.appendChild(Q),this.textarea=Q,this.textarea.readOnly=X,null===this.textarea.oninput?this.textarea.oninput=this._onChange.bind(this):this.textarea.onchange=this._onChange.bind(this),Q.onselect=this._onSelect.bind(this),Q.onmousedown=this._onMouseDown.bind(this),Q.onblur=this._onBlur.bind(this)),this._updateHistoryButtons(),this.errorTable=new U.Q({errorTableVisible:Array.isArray(this.options.showErrorTable)?this.options.showErrorTable.includes(this.mode):!0===this.options.showErrorTable,onToggleVisibility:function(){J._validateAndCatch()},onFocusLine:function(q){J.isFocused=!0,isNaN(q)||J.setTextSelection({row:q,column:1},{row:q,column:1e3})},onChangeHeight:function(q){J.content.style.marginBottom=-(q=q+(J.dom.statusBar?J.dom.statusBar.clientHeight:0)+1)+"px",J.content.style.paddingBottom=q+"px"}}),this.frame.appendChild(this.errorTable.getErrorTable()),T.statusBar&&((0,S.addClassName)(this.content,"has-status-bar"),this.curserInfoElements={},V=document.createElement("div"),(this.dom.statusBar=V).className="jsoneditor-statusbar",this.frame.appendChild(V),(X=document.createElement("span")).className="jsoneditor-curserinfo-label",X.innerText="Ln:",(Q=document.createElement("span")).className="jsoneditor-curserinfo-val",Q.innerText="1",V.appendChild(X),V.appendChild(Q),(T=document.createElement("span")).className="jsoneditor-curserinfo-label",T.innerText="Col:",(X=document.createElement("span")).className="jsoneditor-curserinfo-val",X.innerText="1",V.appendChild(T),V.appendChild(X),this.curserInfoElements.colVal=X,this.curserInfoElements.lnVal=Q,(T=document.createElement("span")).className="jsoneditor-curserinfo-label",T.innerText="characters selected",T.style.display="none",(X=document.createElement("span")).className="jsoneditor-curserinfo-count",X.innerText="0",X.style.display="none",this.curserInfoElements.countLabel=T,this.curserInfoElements.countVal=X,V.appendChild(X),V.appendChild(T),V.appendChild(this.errorTable.getErrorCounter()),V.appendChild(this.errorTable.getWarningIcon()),V.appendChild(this.errorTable.getErrorIcon())),this.setSchema(this.options.schema,this.options.schemaRefs)},m._onSchemaChange=function(C,x){this.aceEditor&&(this.options.allowSchemaSuggestions&&C?(this.aceEditor.setOption("enableBasicAutocompletion",[new p(C,x)]),this.aceEditor.setOption("enableLiveAutocompletion",!0)):(this.aceEditor.setOption("enableBasicAutocompletion",void 0),this.aceEditor.setOption("enableLiveAutocompletion",!1)))},m._onChange=function(){var C=this;if(!this.onChangeDisabled){if(setTimeout(function(){C._updateHistoryButtons&&C._updateHistoryButtons()}),this._debouncedValidate(),this.options.onChange)try{this.options.onChange()}catch(x){console.error("Error in onChange callback: ",x)}if(this.options.onChangeText)try{this.options.onChangeText(this.getText())}catch(x){console.error("Error in onChangeText callback: ",x)}}},m._updateHistoryButtons=function(){var C;this.aceEditor&&this.dom.undo&&this.dom.redo&&(C=this.aceEditor.getSession().getUndoManager())&&C.hasUndo&&C.hasRedo&&(this.dom.undo.disabled=!C.hasUndo(),this.dom.redo.disabled=!C.hasRedo())},m._showSortModal=function(){try{var C=this,x=this.options.modalAnchor||K.qD,L=this.get();(0,k.showSortModal)(x,L,function(Q){var G;Array.isArray(L)&&(G=(0,S.sort)(L,Q.path,Q.direction),C.sortedBy=Q,C.update(G)),(0,S.isObject)(L)&&(G=(0,S.sortObjectKeys)(L,Q.direction),C.sortedBy=Q,C.update(G))},C.sortedBy)}catch(Q){this._onError(Q)}},m._showTransformModal=function(){var C=this;try{var x=this.options,L=x.modalAnchor,Q=x.createQuery,G=x.executeQuery,T=x.queryDescription,V=this.get();(0,_.showTransformModal)({container:L||K.qD,json:V,queryDescription:T,createQuery:Q,executeQuery:G,onTransform:function(J){J=G(V,J),C.update(J)}})}catch(J){this._onError(J)}},m._onSelect=function(){this._updateCursorInfo(),this._emitSelectionChange()},m._onKeyDown=function(C){var x=!1;73===(C.which||C.keyCode)&&C.ctrlKey&&(C.shiftKey?this.compact():this.format(),this._onChange(),x=!0),x&&(C.preventDefault(),C.stopPropagation()),this._updateCursorInfo(),this._emitSelectionChange()},m._onMouseDown=function(){this._updateCursorInfo(),this._emitSelectionChange()},m._onBlur=function(){var C=this;setTimeout(function(){C.isFocused||(C._updateCursorInfo(),C._emitSelectionChange()),C.isFocused=!1})},m._updateCursorInfo=function(){var C,x,L,Q,G,T=this;function V(){T.curserInfoElements.countVal.innerText!==G&&(T.curserInfoElements.countVal.innerText=G,T.curserInfoElements.countVal.style.display=G?"inline":"none",T.curserInfoElements.countLabel.style.display=G?"inline":"none"),T.curserInfoElements.lnVal.innerText=L,T.curserInfoElements.colVal.innerText=Q}this.textarea?setTimeout(function(){var J=(0,S.getInputSelection)(T.textarea);J.startIndex!==J.endIndex&&(G=J.endIndex-J.startIndex),Q=(G&&T.cursorInfo&&T.cursorInfo.line===J.end.row&&T.cursorInfo.column===J.end.column?(L=J.start.row,J.start):(L=J.end.row,J.end)).column,T.cursorInfo={line:L,column:Q,count:G},T.options.statusBar&&V()},0):this.aceEditor&&this.curserInfoElements&&(C=this.aceEditor.getCursorPosition(),x=this.aceEditor.getSelectedText(),T.cursorInfo={line:L=C.row+1,column:Q=C.column+1,count:G=x.length},this.options.statusBar)&&V()},m._emitSelectionChange=function(){var C;this._selectionChangedHandler&&(C=this.getTextSelection(),this._selectionChangedHandler(C.start,C.end,C.text))},m._refreshAnnotations=function(){var C,x=this.aceEditor&&this.aceEditor.getSession();x&&(C=x.getAnnotations().filter(function(L){return"error"===L.type}),x.setAnnotations(C))},m.destroy=function(){this.aceEditor&&(this.aceEditor.destroy(),this.aceEditor=null),this.frame&&this.container&&this.frame.parentNode===this.container&&this.container.removeChild(this.frame),this.modeSwitcher&&(this.modeSwitcher.destroy(),this.modeSwitcher=null),this.textarea=null,this._debouncedValidate=null,this.frameFocusTracker.destroy()},m.compact=function(){var C=this.get();C=JSON.stringify(C),this.updateText(C)},m.format=function(){var C=this.get();C=JSON.stringify(C,null,this.indentation),this.updateText(C)},m.repair=function(){var C=this.getText();try{var x=(0,ce.K)(C);this.updateText(x)}catch{}},m.focus=function(){this.textarea&&this.textarea.focus(),this.aceEditor&&this.aceEditor.focus()},m.resize=function(){this.aceEditor&&this.aceEditor.resize(!1)},m.set=function(C){this.setText(JSON.stringify(C,null,this.indentation))},m.update=function(C){this.updateText(JSON.stringify(C,null,this.indentation))},m.get=function(){var C=this.getText();return(0,S.parse)(C)},m.getText=function(){return this.textarea?this.textarea.value:this.aceEditor?this.aceEditor.getValue():""},m._setText=function(G,x){var L,Q=this;G=!0===this.options.escapeUnicode?(0,S.escapeUnicodeChars)(G):G,this.textarea&&(this.textarea.value=G),this.aceEditor&&(this.onChangeDisabled=!0,this.aceEditor.setValue(G,-1),this.onChangeDisabled=!1,x&&(L=this,setTimeout(function(){L.aceEditor&&L.aceEditor.session.getUndoManager().reset()})),setTimeout(function(){Q._updateHistoryButtons&&Q._updateHistoryButtons()})),this._debouncedValidate()},m.setText=function(C){this._setText(C,!0)},m.updateText=function(C){this.getText()!==C&&this._setText(C,!1)},m.validate=function(){var C,x=this,L=[],Q=[];try{var G=this.get(),T=(this.validateSchema&&!this.validateSchema(G)&&(L=this.validateSchema.errors.map(function(J){return J.type="validation",(0,S.improveSchemaError)(J)})),this.validationSequence=(this.validationSequence||0)+1,this),V=this.validationSequence;return function(J,X){if(!X)return Promise.resolve([]);try{var q=X(J);return((0,S.isPromise)(q)?q:Promise.resolve(q)).then(function(ee){return Array.isArray(ee)?ee.filter(function(j){var D=(0,S.isValidValidationError)(j);return D||console.warn('Ignoring a custom validation error with invalid structure. Expected structure: {path: [...], message: "..."}. Actual error:',j),D}).map(function(j){return{dataPath:(0,S.stringifyPath)(j.path),message:j.message,type:"customValidation"}}):[]})}catch(ee){return Promise.reject(ee)}}(G,this.options.onValidate).then(function(J){return V===T.validationSequence&&(J=L.concat(Q).concat(J),T._renderErrors(J),"function"==typeof x.options.onValidationError&&(0,S.isValidationErrorChanged)(J,x.lastSchemaErrors)&&x.options.onValidationError.call(x,J),x.lastSchemaErrors=J),x.lastSchemaErrors})}catch(J){return this.getText()&&((G=/\w*line\s*(\d+)\w*/g.exec(J.message))&&(C=+G[1]),Q=[{type:"error",message:J.message.replace(/\n/g,"<br>"),line:C}]),this._renderErrors(Q),"function"==typeof this.options.onValidationError&&(0,S.isValidationErrorChanged)(Q,this.lastSchemaErrors)&&this.options.onValidationError.call(this,Q),this.lastSchemaErrors=Q,Promise.resolve(this.lastSchemaErrors)}},m._validateAndCatch=function(){this.validate().catch(function(C){console.error("Error running validation:",C)})},m._renderErrors=function(C){var L=this.getText(),x=[];C.reduce(function(Q,G){return"string"==typeof G.dataPath&&-1===Q.indexOf(G.dataPath)&&Q.push(G.dataPath),Q},x),L=(0,S.getPositionForPath)(L,x),this.aceEditor&&(this.annotations=L.map(function(Q){var G=C.filter(function(V){return V.dataPath===Q.path}),T=G.map(function(V){return V.message}).join("\n");return T?{row:Q.line,column:Q.column,text:"Schema validation error"+(1!==G.length?"s":"")+": \n"+T,type:"warning",source:"jsoneditor"}:{}}),this._refreshAnnotations()),this.errorTable.setErrors(C,L),this.aceEditor&&this.aceEditor.resize(!1)},m.getTextSelection=function(){var C,x,L,Q={};return this.textarea?(L=(0,S.getInputSelection)(this.textarea),this.cursorInfo&&this.cursorInfo.line===L.end.row&&this.cursorInfo.column===L.end.column?(Q.start=L.end,Q.end=L.start):Q=L,{start:Q.start,end:Q.end,text:this.textarea.value.substring(L.startIndex,L.endIndex)}):this.aceEditor?(L=this.aceEditor.getSelection(),C=this.aceEditor.getSelectedText(),x=L.getRange(),(L=L.getSelectionLead()).row===x.end.row&&L.column===x.end.column?Q=x:(Q.start=x.end,Q.end=x.start),{start:{row:Q.start.row+1,column:Q.start.column+1},end:{row:Q.end.row+1,column:Q.end.column+1},text:C}):void 0},m.onTextSelectionChange=function(C){"function"==typeof C&&(this._selectionChangedHandler=(0,S.debounce)(C,this.DEBOUNCE_INTERVAL))},m.setTextSelection=function(C,x){var L,Q,G;C&&x&&(this.textarea?(L=(0,S.getIndexForPosition)(this.textarea,C.row,C.column),G=(0,S.getIndexForPosition)(this.textarea,x.row,x.column),-1<L&&-1<G&&(this.textarea.setSelectionRange?(this.textarea.focus(),this.textarea.setSelectionRange(L,G)):this.textarea.createTextRange&&((Q=this.textarea.createTextRange()).collapse(!0),Q.moveEnd("character",G),Q.moveStart("character",L),Q.select()),G=(this.textarea.value.match(/\n/g)||[]).length+1,this.textarea.scrollTop=(Q=C.row*(L=this.textarea.scrollHeight/G))>this.textarea.clientHeight?Q-this.textarea.clientHeight/2:0)):this.aceEditor&&(this.aceEditor.selection.setRange(G={start:{row:C.row-1,column:C.column-1},end:{row:x.row-1,column:x.column-1}}),this.aceEditor.scrollToLine(C.row-1,!0)))};var O=[{mode:"text",mixin:m,data:"text",load:v},{mode:"code",mixin:m,data:"text",load:v}]},8038:function(Ce,Re,Ie){"use strict";Ie.r(Re),Ie.d(Re,{treeModeMixins:function(){return Ge}});var ce={start:function(oe,pe,ge){return 0===pe.indexOf(oe)},contain:function(oe,pe,ge){return-1<pe.indexOf(oe)}},c=Ie(897),K=Ie(2474);function U(oe){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(pe){return typeof pe}:function(pe){return pe&&"function"==typeof Symbol&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe})(oe)}function Z(oe,pe){for(var ge=0;ge<pe.length;ge++){var be=pe[ge];be.enumerable=be.enumerable||!1,be.configurable=!0,"value"in be&&(be.writable=!0),Object.defineProperty(oe,(ie=function(se,de){if("object"!==U(se)||null===se)return se;var _e=se[Symbol.toPrimitive];if(void 0===_e)return String(se);if("object"!==U(_e=_e.call(se,"string")))return _e;throw new TypeError("@@toPrimitive must return a primitive value.")}(ie=be.key),"symbol"===U(ie)?ie:String(ie)),be)}var ie}var Y=function(){function oe(){if(!(this instanceof oe))throw new TypeError("Cannot call a class as a function");this.locked=!1}var pe,ge;return pe=oe,(ge=[{key:"highlight",value:function(ie){this.locked||(this.node!==ie&&(this.node&&this.node.setHighlight(!1),this.node=ie,this.node.setHighlight(!0)),this._cancelUnhighlight())}},{key:"unhighlight",value:function(){var ie;this.locked||(ie=this).node&&(this._cancelUnhighlight(),this.unhighlightTimer=setTimeout(function(){ie.node.setHighlight(!1),ie.node=void 0,ie.unhighlightTimer=void 0},0))}},{key:"_cancelUnhighlight",value:function(){this.unhighlightTimer&&(clearTimeout(this.unhighlightTimer),this.unhighlightTimer=void 0)}},{key:"lock",value:function(){this.locked=!0}},{key:"unlock",value:function(){this.locked=!1}}])&&Z(pe.prototype,ge),Object.defineProperty(pe,"prototype",{writable:!1}),oe}(),H=Ie(7907),F=Ie(6056),k=Ie(6617),_=(Re=Ie(233),Ie.n(Re)),M=Ie(2602),R=Ie(9791),S=Ie(6210),y=Ie(2558),w=Ie(4188);function p(oe){return function(pe){if(Array.isArray(pe))return v(pe)}(oe)||function(pe){if(typeof Symbol<"u"&&null!=pe[Symbol.iterator]||null!=pe["@@iterator"])return Array.from(pe)}(oe)||h(oe)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(oe,pe){return function(ge){if(Array.isArray(ge))return ge}(oe)||function(ge,be){var ie=null==ge?null:typeof Symbol<"u"&&ge[Symbol.iterator]||ge["@@iterator"];if(null!=ie){var se,de,_e,$e,Xe=[],ut=!0,mt=!1;try{if(_e=(ie=ie.call(ge)).next,0===be){if(Object(ie)!==ie)return;ut=!1}else for(;!(ut=(se=_e.call(ie)).done)&&(Xe.push(se.value),Xe.length!==be);ut=!0);}catch(ct){mt=!0,de=ct}finally{try{if(!ut&&null!=ie.return&&($e=ie.return(),Object($e)!==$e))return}finally{if(mt)throw de}}return Xe}}(oe,pe)||h(oe,pe)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(oe,pe){var ge,be,ie,se,de=typeof Symbol<"u"&&oe[Symbol.iterator]||oe["@@iterator"];if(de)return be=!(ge=!0),{s:function(){de=de.call(oe)},n:function(){var _e=de.next();return ge=_e.done,_e},e:function(_e){be=!0,ie=_e},f:function(){try{ge||null==de.return||de.return()}finally{if(be)throw ie}}};if(Array.isArray(oe)||(de=h(oe))||pe&&oe&&"number"==typeof oe.length)return de&&(oe=de),se=0,{s:pe=function(){},n:function(){return se>=oe.length?{done:!0}:{done:!1,value:oe[se++]}},e:function(_e){throw _e},f:pe};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(oe,pe){var ge;if(oe)return"string"==typeof oe?v(oe,pe):"Map"===(ge="Object"===(ge=Object.prototype.toString.call(oe).slice(8,-1))&&oe.constructor?oe.constructor.name:ge)||"Set"===ge?Array.from(oe):"Arguments"===ge||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ge)?v(oe,pe):void 0}function v(oe,pe){(null==pe||pe>oe.length)&&(pe=oe.length);for(var ge=0,be=new Array(pe);ge<pe;ge++)be[ge]=oe[ge];return be}function O(oe){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(pe){return typeof pe}:function(pe){return pe&&"function"==typeof Symbol&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe})(oe)}function C(oe,pe){for(var ge=0;ge<pe.length;ge++){var be=pe[ge];be.enumerable=be.enumerable||!1,be.configurable=!0,"value"in be&&(be.writable=!0),Object.defineProperty(oe,(ie=function(se,de){if("object"!==O(se)||null===se)return se;var _e=se[Symbol.toPrimitive];if(void 0===_e)return String(se);if("object"!==O(_e=_e.call(se,"string")))return _e;throw new TypeError("@@toPrimitive must return a primitive value.")}(ie=be.key),"symbol"===O(ie)?ie:String(ie)),be)}var ie}var x=function(){function oe(ie,se){if(!(this instanceof oe))throw new TypeError("Cannot call a class as a function");this.editor=ie,this.dom={},this.expanded=!1,se&&se instanceof Object?(this.setField(se.field,se.fieldEditable),"value"in se&&this.setValue(se.value,se.type),"internalValue"in se&&this.setInternalValue(se.internalValue)):(this.setField(""),this.setValue(null)),this._debouncedOnChangeValue=(0,R.debounce)(this._onChangeValue.bind(this),oe.prototype.DEBOUNCE_INTERVAL),this._debouncedOnChangeField=(0,R.debounce)(this._onChangeField.bind(this),oe.prototype.DEBOUNCE_INTERVAL),this.visibleChilds=this.getMaxVisibleChilds()}var pe,ge;return pe=oe,(ge=[{key:"getMaxVisibleChilds",value:function(){return this.editor&&this.editor.options&&this.editor.options.maxVisibleChilds?this.editor.options.maxVisibleChilds:L}},{key:"_updateEditability",value:function(){var ie,se;this.editable={field:!0,value:!0},this.editor&&(this.editable.field="tree"===this.editor.options.mode,this.editable.value="view"!==this.editor.options.mode,"tree"!==this.editor.options.mode&&"form"!==this.editor.options.mode||"function"!=typeof this.editor.options.onEditable||(ie=this.getValue.bind(this),"boolean"==typeof(se=this.editor.options.onEditable({field:this.field,get value(){return ie()},path:this.getPath()}))?(this.editable.field=se,this.editable.value=se):"object"===O(se)&&null!==se?("boolean"==typeof se.field&&(this.editable.field=se.field),"boolean"==typeof se.value&&(this.editable.value=se.value)):(console.error("Invalid return value for function onEditable.","Actual value:",se,".","Either a boolean or object { field: boolean, value: boolean } expected."),this.editable.field=!1,this.editable.value=!1)))}},{key:"getPath",value:function(){for(var ie=this,se=[];ie;){var de=ie.getName();void 0!==de&&se.unshift(de),ie=ie.parent}return se}},{key:"getInternalPath",value:function(){for(var ie=this,se=[];ie;)ie.parent&&se.unshift(ie.getIndex()),ie=ie.parent;return se}},{key:"getName",value:function(){return this.parent?"array"!==this.parent.type?this.field:this.index:void 0}},{key:"findNodeByPath",value:function(ie){if(ie){if(0===ie.length)return this;if(ie.length&&this.childs&&this.childs.length)for(var se=0;se<this.childs.length;++se)if(""+ie[0]==""+this.childs[se].getName())return this.childs[se].findNodeByPath(ie.slice(1))}}},{key:"findNodeByInternalPath",value:function(ie){if(ie){for(var _e=this,se=0;se<ie.length&&_e;se++)_e=_e.childs[ie[se]];return _e}}},{key:"serialize",value:function(){return{value:this.getValue(),path:this.getPath()}}},{key:"findNode",value:function(ie){for(var se=(0,R.parsePath)(ie),de=this;de&&0<se.length;)!function(){var _e=se.shift();if("number"==typeof _e){if("array"!==de.type)throw new Error("Cannot get child node at index "+_e+": node is no array");de=de.childs[_e]}else{if("object"!==de.type)throw new Error("Cannot get child node "+_e+": node is no object");de=de.childs.filter(function($e){return $e.field===_e})[0]}}();return de}},{key:"findParents",value:function(){for(var ie=[],se=this.parent;se;)ie.unshift(se),se=se.parent;return ie}},{key:"setError",value:function(ie,se){this.error=ie,this.errorChild=se,this.dom&&this.dom.tr&&this.updateError()}},{key:"updateError",value:function(){var ie=this,se=this.fieldError||this.valueError||this.error,de=this.dom.tdError;if(se&&this.dom&&this.dom.tr){(0,R.addClassName)(this.dom.tr,"jsoneditor-validation-error"),de||(de=document.createElement("td"),this.dom.tdError=de,this.dom.tdValue.parentNode.appendChild(de));var _e=document.createElement("button"),$e=(_e.type="button",_e.className="jsoneditor-button jsoneditor-schema-error",function(){ie.dom.popupAnchor&&ie.dom.popupAnchor.destroy()}),Xe=function(){delete ie.dom.popupAnchor},ut=function(St){var Tt=ie.editor.frame;ie.dom.popupAnchor=(0,M.w)(_e,ie.editor.getPopupAnchor(),Xe,St),St=_e.getBoundingClientRect(),Tt=120<Tt.getBoundingClientRect().width-St.x?"jsoneditor-above":"jsoneditor-left",(St=document.createElement("div")).className="jsoneditor-popover "+Tt,St.appendChild(document.createTextNode(se.message)),ie.dom.popupAnchor.appendChild(St)},mt=(_e.onmouseover=function(){ie.dom.popupAnchor||ut(!0)},_e.onfocus=function(){$e(),ut(!1)},_e.onblur=function(){$e()},this.errorChild);for(mt&&(_e.onclick=function(){mt.findParents().forEach(function(ct){ct.expand(!1)}),mt.scrollTo(function(){mt.focus()})});de.firstChild;)de.removeChild(de.firstChild);de.appendChild(_e)}else this.dom.tr&&(0,R.removeClassName)(this.dom.tr,"jsoneditor-validation-error"),de&&(this.dom.tdError.parentNode.removeChild(this.dom.tdError),delete this.dom.tdError)}},{key:"getIndex",value:function(){var ie;return this.parent?-1!==(ie=this.parent.childs.indexOf(this))?ie:null:-1}},{key:"setParent",value:function(ie){this.parent=ie}},{key:"setField",value:function(ie,se){this.field=ie,this.previousField=ie,this.fieldEditable=!0===se}},{key:"getField",value:function(){return void 0===this.field&&this._getDomField(),this.field}},{key:"setValue",value:function(ie,se){var de,_e,$e,Xe,ut,mt,ct=this.childs;if(this.type=this._getType(ie),se&&se!==this.type){if("string"!==se||"auto"!==this.type)throw new Error('Type mismatch: cannot cast value of type "'+this.type+' to the specified type "'+se+'"');this.type=se}if("array"===this.type){for(this.childs||(this.childs=[]),de=0;de<ie.length;de++)void 0===(ut=ie[de])||ut instanceof Function||(de<this.childs.length?(($e=this.childs[de]).fieldEditable=!1,$e.index=de,$e.setValue(ut)):($e=new oe(this.editor,{value:ut}),Xe=de<this.getMaxVisibleChilds(),this.appendChild($e,Xe,!1)));for(_e=this.childs.length;_e>=ie.length;_e--)this.removeChild(this.childs[_e],!1)}else if("object"===this.type){for(this.childs||(this.childs=[]),_e=this.childs.length-1;0<=_e;_e--)T(ie,this.childs[_e].field)||this.removeChild(this.childs[_e],!1);for(var Tt in de=0,ie)T(ie,Tt)&&(void 0===(ut=ie[Tt])||ut instanceof Function||((mt=this.findChildByProperty(Tt))?(mt.setField(Tt,!0),mt.setValue(ut)):(mt=new oe(this.editor,{field:Tt,value:ut}),Tt=de<this.getMaxVisibleChilds(),this.appendChild(mt,Tt,!1))),de++);!(this.value="")===this.editor.options.sortObjectKeys&&this.sort([],"asc",!1)}else this.hideChilds(),delete this.append,delete this.showMore,delete this.expanded,delete this.childs,this.value=ie;Array.isArray(ct)!==Array.isArray(this.childs)&&this.recreateDom(),this.updateDom({updateIndexes:!0}),this.previousValue=this.value}},{key:"setInternalValue",value:function(ie){var se,de,_e,$e,Xe,ut=this.childs;if(this.type=ie.type,"array"===ie.type){for(this.childs||(this.childs=[]),$e=0;$e<ie.childs.length;$e++)void 0===(se=ie.childs[$e])||se instanceof Function||($e<this.childs.length?((de=this.childs[$e]).fieldEditable=!1,de.index=$e,de.setInternalValue(se)):(de=new oe(this.editor,{internalValue:se}),_e=$e<this.getMaxVisibleChilds(),this.appendChild(de,_e,!1)));for(Xe=this.childs.length;Xe>=ie.childs.length;Xe--)this.removeChild(this.childs[Xe],!1)}else if("object"===ie.type){for(this.childs||(this.childs=[]),$e=0;$e<ie.childs.length;$e++)void 0===(se=ie.childs[$e])||se instanceof Function||($e<this.childs.length?(delete(de=this.childs[$e]).index,de.setField(se.field,!0),de.setInternalValue(se.value)):(de=new oe(this.editor,{field:se.field,internalValue:se.value}),_e=$e<this.getMaxVisibleChilds(),this.appendChild(de,_e,!1)));for(Xe=this.childs.length;Xe>=ie.childs.length;Xe--)this.removeChild(this.childs[Xe],!1)}else this.hideChilds(),delete this.append,delete this.showMore,delete this.expanded,delete this.childs,this.value=ie.value;Array.isArray(ut)!==Array.isArray(this.childs)&&this.recreateDom(),this.updateDom({updateIndexes:!0}),this.previousValue=this.value}},{key:"recreateDom",value:function(){var ie;this.dom&&this.dom.tr&&this.dom.tr.parentNode?(ie=this._detachFromDom(),this.clearDom(),this._attachToDom(ie)):this.clearDom()}},{key:"getValue",value:function(){var ie,se;return"array"===this.type?(ie=[],this.childs.forEach(function(de){ie.push(de.getValue())}),ie):"object"===this.type?(se={},this.childs.forEach(function(de){se[de.getField()]=de.getValue()}),se):(void 0===this.value&&this._getDomValue(),this.value)}},{key:"getInternalValue",value:function(){return"array"===this.type?{type:this.type,childs:this.childs.map(function(ie){return ie.getInternalValue()})}:"object"===this.type?{type:this.type,childs:this.childs.map(function(ie){return{field:ie.getField(),value:ie.getInternalValue()}})}:(void 0===this.value&&this._getDomValue(),{type:this.type,value:this.value})}},{key:"getLevel",value:function(){return this.parent?this.parent.getLevel()+1:0}},{key:"getNodePath",value:function(){var ie=this.parent?this.parent.getNodePath():[];return ie.push(this),ie}},{key:"clone",value:function(){var ie,se;return(ie=new oe(this.editor)).type=this.type,ie.field=this.field,ie.fieldInnerText=this.fieldInnerText,ie.fieldEditable=this.fieldEditable,ie.previousField=this.previousField,ie.value=this.value,ie.valueInnerText=this.valueInnerText,ie.previousValue=this.previousValue,ie.expanded=this.expanded,ie.visibleChilds=this.visibleChilds,this.childs?(se=[],this.childs.forEach(function(de){(de=de.clone()).setParent(ie),se.push(de)}),ie.childs=se):ie.childs=void 0,ie}},{key:"expand",value:function(ie){this.childs&&(this.expanded=!0,this.dom.expand&&(this.dom.expand.className="jsoneditor-button jsoneditor-expanded"),this.showChilds(),!1!==ie&&this.childs.forEach(function(se){se.expand(ie)}),this.updateDom({recurse:!1}))}},{key:"collapse",value:function(ie){this.childs&&(this.hideChilds(),!1!==ie&&this.childs.forEach(function(se){se.collapse(ie)}),this.dom.expand&&(this.dom.expand.className="jsoneditor-button jsoneditor-collapsed"),this.expanded=!1,this.updateDom({recurse:!1}))}},{key:"showChilds",value:function(){if((ie=this.childs)&&this.expanded){var ie,se=(ie=this.dom.tr)?ie.parentNode:void 0;if(se){for(var de=this.getAppendDom(),_e=(de.parentNode||(($e=ie.nextSibling)?se.insertBefore(de,$e):se.appendChild(de)),Math.min(this.childs.length,this.visibleChilds)),$e=this._getNextTr(),Xe=0;Xe<_e;Xe++){var ut=this.childs[Xe];ut.getDom().parentNode||se.insertBefore(ut.getDom(),$e),ut.showChilds()}ie=this.getShowMoreDom(),$e=this._getNextTr(),ie.parentNode||se.insertBefore(ie,$e),this.showMore.updateDom()}}}},{key:"_getNextTr",value:function(){return this.showMore&&this.showMore.getDom().parentNode?this.showMore.getDom():this.append&&this.append.getDom().parentNode?this.append.getDom():void 0}},{key:"hide",value:function(ie){var se=this.dom.tr,de=se?se.parentNode:void 0;de&&de.removeChild(se),this.dom.popupAnchor&&this.dom.popupAnchor.destroy(),this.hideChilds(ie)}},{key:"hideChilds",value:function(ie){var se;this.childs&&this.expanded&&((se=this.getAppendDom()).parentNode&&se.parentNode.removeChild(se),this.childs.forEach(function(de){de.hide()}),(se=this.getShowMoreDom()).parentNode&&se.parentNode.removeChild(se),ie&&!ie.resetVisibleChilds||(this.visibleChilds=this.getMaxVisibleChilds()))}},{key:"_updateCssClassName",value:function(){var ie,se;this.dom.field&&this.editor&&this.editor.options&&"function"==typeof this.editor.options.onClassName&&this.dom.tree&&((0,R.removeAllClassNames)(this.dom.tree),ie=this.getValue.bind(this),se=this.editor.options.onClassName({path:this.getPath(),field:this.field,get value(){return ie()}})||"",(0,R.addClassName)(this.dom.tree,"jsoneditor-values "+se))}},{key:"recursivelyUpdateCssClassesOnNodes",value:function(){if(this._updateCssClassName(),Array.isArray(this.childs))for(var ie=0;ie<this.childs.length;ie++)this.childs[ie].recursivelyUpdateCssClassesOnNodes()}},{key:"expandTo",value:function(){for(var ie=this.parent;ie;)ie.expanded||ie.expand(),ie=ie.parent}},{key:"appendChild",value:function(ie,se,de){var _e,$e;this._hasChilds()&&(ie.setParent(this),ie.fieldEditable="object"===this.type,"array"===this.type&&(ie.index=this.childs.length),"object"===this.type&&void 0===ie.field&&ie.setField(""),this.childs.push(ie),this.expanded&&!1!==se&&(se=ie.getDom(),$e=(_e=this._getNextTr())?_e.parentNode:void 0,_e&&$e&&$e.insertBefore(se,_e),ie.showChilds(),this.visibleChilds++),!1!==de)&&(this.updateDom({updateIndexes:!0}),ie.updateDom({recurse:!0}))}},{key:"moveBefore",value:function(ie,se,de){var _e,$e;this._hasChilds()&&((_e=this.dom.tr?this.dom.tr.parentNode:void 0)&&(($e=document.createElement("tr")).style.height=_e.clientHeight+"px",_e.appendChild($e)),ie.parent&&ie.parent.removeChild(ie),se instanceof V||!se?this.childs.length+1>this.visibleChilds?this.insertBefore(ie,this.childs[this.visibleChilds-1],de):this.appendChild(ie,!0,de):this.insertBefore(ie,se,de),_e)&&$e&&_e.removeChild($e)}},{key:"insertBefore",value:function(ie,se,de){if(this._hasChilds()){if(this.visibleChilds++,"object"===this.type&&void 0===ie.field&&ie.setField(""),se===this.append)ie.setParent(this),ie.fieldEditable="object"===this.type,this.childs.push(ie);else{var _e=this.childs.indexOf(se);if(-1===_e)throw new Error("Node not found");ie.setParent(this),ie.fieldEditable="object"===this.type,this.childs.splice(_e,0,ie)}var $e;this.expanded&&(_e=ie.getDom(),$e=(se=se.getDom())?se.parentNode:void 0,se&&$e&&$e.insertBefore(_e,se),ie.showChilds(),this.showChilds()),!1!==de&&(this.updateDom({updateIndexes:!0}),ie.updateDom({recurse:!0}))}}},{key:"insertAfter",value:function(ie,se){this._hasChilds()&&(se=this.childs.indexOf(se),(se=this.childs[se+1])?this.insertBefore(ie,se):this.appendChild(ie))}},{key:"search",value:function(ie,se){Array.isArray(se)||(se=[]);var de=ie?ie.toLowerCase():void 0;return delete this.searchField,delete this.searchValue,void 0!==this.field&&se.length<=this.MAX_SEARCH_RESULTS&&(-1!==String(this.field).toLowerCase().indexOf(de)&&(this.searchField=!0,se.push({node:this,elem:"field"})),this._updateDomField()),this._hasChilds()?this.childs&&this.childs.forEach(function(_e){_e.search(ie,se)}):void 0!==this.value&&se.length<=this.MAX_SEARCH_RESULTS&&(-1!==String(this.value).toLowerCase().indexOf(de)&&(this.searchValue=!0,se.push({node:this,elem:"value"})),this._updateDomValue()),se}},{key:"scrollTo",value:function(ie){this.expandPathToNode(),this.dom.tr&&this.dom.tr.parentNode&&this.editor.scrollTo(this.dom.tr.offsetTop,ie)}},{key:"expandPathToNode",value:function(){for(var ie=this;ie&&ie.parent;){for(var se="array"===ie.parent.type?ie.index:ie.parent.childs.indexOf(ie);ie.parent.visibleChilds<se+1;)ie.parent.visibleChilds+=this.getMaxVisibleChilds();ie.parent.expand(!1),ie=ie.parent}}},{key:"focus",value:function(ie){if(oe.focusElement=ie,this.dom.tr&&this.dom.tr.parentNode){var se=this.dom;switch(ie){case"drag":(se.drag||se.menu).focus();break;case"menu":se.menu.focus();break;case"expand":this._hasChilds()?se.expand.focus():se.field&&this.fieldEditable?(se.field.focus(),(0,R.selectContentEditable)(se.field)):se.value&&!this._hasChilds()?(se.value.focus(),(0,R.selectContentEditable)(se.value)):se.menu.focus();break;case"field":se.field&&this.fieldEditable?(se.field.focus(),(0,R.selectContentEditable)(se.field)):se.value&&!this._hasChilds()?(se.value.focus(),(0,R.selectContentEditable)(se.value)):(this._hasChilds()?se.expand:se.menu).focus();break;default:se.select?se.select.focus():se.value&&!this._hasChilds()?(se.value.focus(),(0,R.selectContentEditable)(se.value)):se.field&&this.fieldEditable?(se.field.focus(),(0,R.selectContentEditable)(se.field)):(this._hasChilds()?se.expand:se.menu).focus()}}}},{key:"containsNode",value:function(ie){if(this===ie)return!0;var se=this.childs;if(se)for(var de=0,_e=se.length;de<_e;de++)if(se[de].containsNode(ie))return!0;return!1}},{key:"removeChild",value:function(ie,se){if(this.childs){var de=this.childs.indexOf(ie);if(-1!==de)return de<this.visibleChilds&&this.expanded&&this.visibleChilds--,ie.hide(),delete ie.searchField,delete ie.searchValue,(ie=this.childs.splice(de,1)[0]).parent=null,!1!==se&&this.updateDom({updateIndexes:!0}),ie}}},{key:"_remove",value:function(ie){this.removeChild(ie)}},{key:"changeType",value:function(ie){var se,de=this.type;de!==ie&&("string"!==ie&&"auto"!==ie||"string"!==de&&"auto"!==de?(se=this._detachFromDom(),this.clearDom(),"object"===(this.type=ie)?(this.childs||(this.childs=[]),this.childs.forEach(function(_e){_e.clearDom(),delete _e.index,_e.fieldEditable=!0,void 0===_e.field&&(_e.field="")}),"string"!==de&&"auto"!==de||(this.expanded=!0)):"array"===ie?(this.childs||(this.childs=[]),this.childs.forEach(function(_e,$e){_e.clearDom(),_e.fieldEditable=!1,_e.index=$e}),"string"!==de&&"auto"!==de||(this.expanded=!0)):this.expanded=!1,this._attachToDom(se)):this.type=ie,"auto"!==ie&&"string"!==ie||(this.value="string"===ie?String(this.value):(0,R.parseString)(String(this.value)),this.focus()),this.updateDom({updateIndexes:!0}))}},{key:"deepEqual",value:function(ie){var se;if("array"===this.type){if(!Array.isArray(ie)||this.childs.length!==ie.length)return!1;for(se=0;se<this.childs.length;se++)if(!this.childs[se].deepEqual(ie[se]))return!1}else if("object"===this.type){if("object"!==O(ie)||!ie)return!1;var de=Object.keys(ie);if(this.childs.length!==de.length)return!1;for(se=0;se<de.length;se++){var _e=this.childs[se];if(_e.field!==de[se]||!_e.deepEqual(ie[_e.field]))return!1}}else if(this.value!==ie)return!1;return!0}},{key:"_getDomValue",value:function(){if(this._clearValueError(),this.dom.value&&"array"!==this.type&&"object"!==this.type&&(this.valueInnerText=(0,R.getInnerText)(this.dom.value),""===this.valueInnerText)&&""!==this.dom.value.innerHTML&&(this.dom.value.textContent=""),void 0!==this.valueInnerText)try{var ie,se;(se="string"===this.type?this._unescapeHTML(this.valueInnerText):(ie=this._unescapeHTML(this.valueInnerText),(0,R.parseString)(ie)))!==this.value&&(this.value=se,this._debouncedOnChangeValue())}catch{this._setValueError((0,H.Iu)("cannotParseValueError"))}}},{key:"_setValueError",value:function(ie){this.valueError={message:ie},this.updateError()}},{key:"_clearValueError",value:function(){this.valueError&&(this.valueError=null,this.updateError())}},{key:"_setFieldError",value:function(ie){this.fieldError={message:ie},this.updateError()}},{key:"_clearFieldError",value:function(){this.fieldError&&(this.fieldError=null,this.updateError())}},{key:"_onChangeValue",value:function(){var ie,se=this.editor.getDomSelection(),de=(se.range&&(de=(0,R.textDiff)(String(this.value),String(this.previousValue)),se.range.startOffset=de.start,se.range.endOffset=de.end),this.editor.getDomSelection());de.range&&(ie=(0,R.textDiff)(String(this.previousValue),String(this.value)),de.range.startOffset=ie.start,de.range.endOffset=ie.end),this.editor._onAction("editValue",{path:this.getInternalPath(),oldValue:this.previousValue,newValue:this.value,oldSelection:se,newSelection:de}),this.previousValue=this.value}},{key:"_onChangeField",value:function(){var ie=this.editor.getDomSelection(),se=this.previousField||"",de=(ie.range&&(de=(0,R.textDiff)(this.field,se),ie.range.startOffset=de.start,ie.range.endOffset=de.end),this.editor.getDomSelection());de.range&&(se=(0,R.textDiff)(se,this.field),de.range.startOffset=se.start,de.range.endOffset=se.end),this.editor._onAction("editField",{parentPath:this.parent.getInternalPath(),index:this.getIndex(),oldValue:this.previousField,newValue:this.field,oldSelection:ie,newSelection:de}),this.previousField=this.field}},{key:"_updateDomValue",value:function(){var ie=this.dom.value;if(ie){var se=["jsoneditor-value"],de=this.value,_e="auto"===this.type?(0,R.getType)(de):this.type,$e="string"===_e&&(0,R.isUrl)(de);if(se.push("jsoneditor-"+_e),$e&&se.push("jsoneditor-url"),""===String(this.value)&&"array"!==this.type&&"object"!==this.type&&se.push("jsoneditor-empty"),this.searchValueActive&&se.push("jsoneditor-highlight-active"),this.searchValue&&se.push("jsoneditor-highlight"),ie.className=se.join(" "),ie.title="array"===_e||"object"===_e?this.type+" containing "+(se=this.childs?this.childs.length:0)+" items":$e&&this.editable.value?(0,H.Iu)("openUrl"):"","boolean"===_e&&this.editable.value?(this.dom.checkbox||(this.dom.checkbox=document.createElement("input"),this.dom.checkbox.type="checkbox",this.dom.tdCheckbox=document.createElement("td"),this.dom.tdCheckbox.className="jsoneditor-tree",this.dom.tdCheckbox.appendChild(this.dom.checkbox),this.dom.tdValue.parentNode.insertBefore(this.dom.tdCheckbox,this.dom.tdValue)),this.dom.checkbox.checked=this.value):this.dom.tdCheckbox&&(this.dom.tdCheckbox.parentNode.removeChild(this.dom.tdCheckbox),delete this.dom.tdCheckbox,delete this.dom.checkbox),this.enum&&this.editable.value?(this.dom.select||(this.dom.select=document.createElement("select"),this.id=this.field+"_"+(new Date).getUTCMilliseconds(),this.dom.select.id=this.id,this.dom.select.name=this.dom.select.id,(se=document.createElement("option")).value="",se.textContent="--",this.dom.select.appendChild(se),this._updateEnumOptions(),this.dom.tdSelect=document.createElement("td"),this.dom.tdSelect.className="jsoneditor-tree",this.dom.tdSelect.appendChild(this.dom.select),this.dom.tdValue.parentNode.insertBefore(this.dom.tdSelect,this.dom.tdValue)),this.dom.select.value=-1!==this.enum.indexOf(this.value)?this.value:"",!this.schema||T(this.schema,"oneOf")||T(this.schema,"anyOf")||T(this.schema,"allOf")?delete this.valueFieldHTML:(this.valueFieldHTML=this.dom.tdValue.innerHTML,this.dom.tdValue.style.visibility="hidden",this.dom.tdValue.textContent="")):this.dom.tdSelect&&(this.dom.tdSelect.parentNode.removeChild(this.dom.tdSelect),delete this.dom.tdSelect,delete this.dom.select,this.dom.tdValue.innerHTML=this.valueFieldHTML,this.dom.tdValue.style.visibility="",delete this.valueFieldHTML,this.dom.tdValue.appendChild(this.dom.value)),this.editor.options.colorPicker&&"string"==typeof de&&(0,R.isValidColor)(de)?(this.dom.color||(this.dom.color=document.createElement("div"),this.dom.color.className="jsoneditor-color",this.dom.tdColor=document.createElement("td"),this.dom.tdColor.className="jsoneditor-tree",this.dom.tdColor.appendChild(this.dom.color),this.dom.tdValue.parentNode.insertBefore(this.dom.tdColor,this.dom.tdValue)),(0,R.addClassName)(this.dom.value,"jsoneditor-color-value"),(this.editable.value?R.removeClassName:R.addClassName)(this.dom.color,"jsoneditor-color-readonly"),this.dom.color.style.backgroundColor=de):this._deleteDomColor(),this._showTimestampTag()){if(this.dom.date||(this.dom.date=document.createElement("div"),this.dom.date.className="jsoneditor-date",this.dom.value.parentNode.appendChild(this.dom.date)),$e=null,$e="function"==typeof this.editor.options.timestampFormat?this.editor.options.timestampFormat({field:this.field,value:this.value,path:this.getPath()}):$e){for(;this.dom.date.firstChild;)this.dom.date.removeChild(this.dom.date.firstChild);this.dom.date.appendChild(document.createTextNode($e))}else this.dom.date.textContent=new Date(de).toISOString();this.dom.date.title=new Date(de).toString()}else this.dom.date&&(this.dom.date.parentNode.removeChild(this.dom.date),delete this.dom.date);(0,R.stripFormatting)(ie),this._updateDomDefault()}}},{key:"_updateEnumOptions",value:function(){if(this.enum&&this.dom.select){this.dom.select.innerHTML="";for(var ie=0;ie<this.enum.length;ie++){var se=document.createElement("option");se.value=this.enum[ie],se.textContent=this.enum[ie],this.dom.select.appendChild(se)}}}},{key:"_deleteDomColor",value:function(){this.dom.color&&(this.dom.tdColor.parentNode.removeChild(this.dom.tdColor),delete this.dom.tdColor,delete this.dom.color,(0,R.removeClassName)(this.dom.value,"jsoneditor-color-value"))}},{key:"_updateDomField",value:function(){var ie,se=this.dom.field;se&&((ie=(0,R.makeFieldTooltip)(this.schema,this.editor.options.language))&&(se.title=ie),(""===String(this.field)&&this.parent&&"array"!==this.parent.type?R.addClassName:R.removeClassName)(se,"jsoneditor-empty"),(this.searchFieldActive?R.addClassName:R.removeClassName)(se,"jsoneditor-highlight-active"),(this.searchField?R.addClassName:R.removeClassName)(se,"jsoneditor-highlight"),(0,R.stripFormatting)(se))}},{key:"_getDomField",value:function(ie){if(this._clearFieldError(),this.dom.field&&this.fieldEditable&&(this.fieldInnerText=(0,R.getInnerText)(this.dom.field),""===this.fieldInnerText)&&""!==this.dom.field.innerHTML&&(this.dom.field.textContent=""),void 0!==this.fieldInnerText)try{var se=this._unescapeHTML(this.fieldInnerText),de=this.parent.getFieldNames(this);-1!==de.indexOf(se)?ie?(se=(0,R.findUniqueName)(se,de))!==this.field&&(this.field=se,this._debouncedOnChangeField()):this._setFieldError((0,H.Iu)("duplicateFieldError")):se!==this.field&&(this.field=se,this._debouncedOnChangeField())}catch{this._setFieldError((0,H.Iu)("cannotParseFieldError"))}}},{key:"_updateDomDefault",value:function(){var ie;this.schema&&void 0!==this.schema.default&&!this._hasChilds()&&(ie=this.dom.select||this.dom.value)&&(this.value===this.schema.default?(ie.title=(0,H.Iu)("default"),(0,R.addClassName)(ie,"jsoneditor-is-default"),R.removeClassName):(ie.removeAttribute("title"),(0,R.removeClassName)(ie,"jsoneditor-is-default"),R.addClassName))(ie,"jsoneditor-is-not-default")}},{key:"_showTimestampTag",value:function(){var ie,se;return"number"==typeof this.value&&("function"==typeof(ie=this.editor.options.timestampTag)?"boolean"==typeof(se=ie({field:this.field,value:this.value,path:this.getPath()}))?se:(0,R.isTimestamp)(this.field,this.value):!0===ie&&(0,R.isTimestamp)(this.field,this.value))}},{key:"clearDom",value:function(){this.dom={}}},{key:"getDom",value:function(){var ie,se,de=this.dom;return de.tr||(this._updateEditability(),de.tr=document.createElement("tr"),"tree"===(de.tr.node=this).editor.options.mode&&(se=document.createElement("td"),this.editable.field&&this.parent&&((ie=document.createElement("button")).type="button",(de.drag=ie).className="jsoneditor-button jsoneditor-dragarea",ie.title=(0,H.Iu)("drag"),se.appendChild(ie)),de.tr.appendChild(se),ie=document.createElement("td"),(se=document.createElement("button")).type="button",(de.menu=se).className="jsoneditor-button jsoneditor-contextmenu-button",se.title=(0,H.Iu)("actionsMenu"),ie.appendChild(de.menu),de.tr.appendChild(ie)),se=document.createElement("td"),de.tr.appendChild(se),de.tree=this._createDomTree(),se.appendChild(de.tree),this.updateDom({updateIndexes:!0})),de.tr}},{key:"isVisible",value:function(){return this.dom&&this.dom.tr&&this.dom.tr.parentNode||!1}},{key:"isDescendantOf",value:function(ie){for(var se=this.parent;se;){if(se===ie)return!0;se=se.parent}return!1}},{key:"_createDomField",value:function(){return document.createElement("div")}},{key:"setHighlight",value:function(ie){this.dom.tr&&((ie?R.addClassName:R.removeClassName)(this.dom.tr,"jsoneditor-highlight"),this.append&&this.append.setHighlight(ie),this.childs)&&this.childs.forEach(function(se){se.setHighlight(ie)})}},{key:"setSelected",value:function(ie,se){this.selected=ie,this.dom.tr&&((ie?R.addClassName:R.removeClassName)(this.dom.tr,"jsoneditor-selected"),(se?R.addClassName:R.removeClassName)(this.dom.tr,"jsoneditor-first"),this.append&&this.append.setSelected(ie),this.showMore&&this.showMore.setSelected(ie),this.childs)&&this.childs.forEach(function(de){de.setSelected(ie)})}},{key:"updateValue",value:function(ie){this.value=ie,this.previousValue=ie,this.valueError=void 0,this.updateDom()}},{key:"updateField",value:function(ie){this.field=ie,this.previousField=ie,this.fieldError=void 0,this.updateDom()}},{key:"updateDom",value:function(ie){var se,de;(de=this.dom.tree)&&(de.style.marginLeft=24*this.getLevel()+"px"),(de=this.dom.field)&&(this.fieldEditable?(de.contentEditable=this.editable.field,de.spellcheck=!1,de.className="jsoneditor-field"):(de.contentEditable=!1,de.className="jsoneditor-readonly"),se=void 0!==this.index?this.index:void 0!==this.field?this.field:(se=this.editor.options.schema?oe._findSchema(this.editor.options.schema,this.editor.options.schemaRefs||{},this.getPath()):void 0)&&se.title?se.title:this._hasChilds()?this.type:"",se=this._escapeHTML(se),document.activeElement!==de&&se!==this._unescapeHTML((0,R.getInnerText)(de))&&(de.innerHTML=se),this._updateSchema(),this._updateEnumOptions()),(de=this.dom.value)&&("array"===this.type||"object"===this.type?this.updateNodeName():(se=this._escapeHTML(this.value),document.activeElement!==de&&se!==this._unescapeHTML((0,R.getInnerText)(de))&&(de.innerHTML=se))),(de=this.dom.tr)&&("array"===this.type||"object"===this.type?((0,R.addClassName)(de,"jsoneditor-expandable"),this.expanded?((0,R.addClassName)(de,"jsoneditor-expanded"),(0,R.removeClassName)(de,"jsoneditor-collapsed")):((0,R.addClassName)(de,"jsoneditor-collapsed"),(0,R.removeClassName)(de,"jsoneditor-expanded"))):((0,R.removeClassName)(de,"jsoneditor-expandable"),(0,R.removeClassName)(de,"jsoneditor-expanded"),(0,R.removeClassName)(de,"jsoneditor-collapsed"))),this._updateDomField(),this._updateDomValue(),ie&&!0===ie.updateIndexes&&this._updateDomIndexes(),ie&&!0===ie.recurse&&this.childs&&this.childs.forEach(function(_e){_e.updateDom(ie)}),this.error&&this.updateError(),this.append&&this.append.updateDom(),this.showMore&&this.showMore.updateDom(),this._updateCssClassName()}},{key:"_updateSchema",value:function(){this.editor&&this.editor.options&&(this.schema=this.editor.options.schema?oe._findSchema(this.editor.options.schema,this.editor.options.schemaRefs||{},this.getPath()):null,this.schema?this.enum=oe._findEnum(this.schema):delete this.enum)}},{key:"_updateDomIndexes",value:function(){var se=this.childs;this.dom.value&&se&&("array"===this.type?se.forEach(function(de,_e){de.index=_e,(de=de.dom.field)&&(de.textContent=_e)}):"object"===this.type&&se.forEach(function(de){void 0!==de.index&&(delete de.index,void 0===de.field)&&(de.field="")}))}},{key:"_createDomValue",value:function(){var ie;return"array"===this.type?(ie=document.createElement("div")).textContent="[...]":"object"===this.type?(ie=document.createElement("div")).textContent="{...}":(!this.editable.value&&(0,R.isUrl)(this.value)?(ie=document.createElement("a")).href=this.value:((ie=document.createElement("div")).contentEditable=this.editable.value,ie.spellcheck=!1),ie.innerHTML=this._escapeHTML(this.value)),ie}},{key:"_createDomExpandButton",value:function(){var ie=document.createElement("button");return ie.type="button",this._hasChilds()?(ie.className=this.expanded?"jsoneditor-button jsoneditor-expanded":"jsoneditor-button jsoneditor-collapsed",ie.title=(0,H.Iu)("expandTitle")):(ie.className="jsoneditor-button jsoneditor-invisible",ie.title=""),ie}},{key:"_createDomTree",value:function(){var ie=this.dom,se=document.createElement("table"),_e=document.createElement("tbody"),de=(se.style.borderCollapse="collapse",se.className="jsoneditor-values",se.appendChild(_e),document.createElement("tr"));return((((_e.appendChild(de),_e=document.createElement("td")).className="jsoneditor-tree",de.appendChild(_e),ie.expand=this._createDomExpandButton(),_e.appendChild(ie.expand),ie.tdExpand=_e,_e=document.createElement("td")).className="jsoneditor-tree",de.appendChild(_e),ie.field=this._createDomField(),_e.appendChild(ie.field),ie.tdField=_e,_e=document.createElement("td")).className="jsoneditor-tree",de.appendChild(_e),"object"!==this.type&&"array"!==this.type&&(_e.appendChild(document.createTextNode(":")),_e.className="jsoneditor-separator"),ie.tdSeparator=_e,_e=document.createElement("td")).className="jsoneditor-tree",de.appendChild(_e),ie.value=this._createDomValue(),_e.appendChild(ie.value),ie.tdValue=_e,se}},{key:"onEvent",value:function(ie){var se,de=ie.type,_e=ie.target||ie.srcElement,$e=this.dom,Xe=this,ut=this._hasChilds(),mt=(_e!==$e.drag&&_e!==$e.menu||("mouseover"===de?this.editor.highlighter.highlight(this):"mouseout"===de&&this.editor.highlighter.unhighlight()),"click"===de&&_e===$e.menu&&((se=Xe.editor.highlighter).highlight(Xe),se.lock(),(0,R.addClassName)($e.menu,"jsoneditor-selected"),this.showContextMenu($e.menu,function(){(0,R.removeClassName)($e.menu,"jsoneditor-selected"),se.unlock(),se.unhighlight()})),"click"===de&&_e===$e.expand&&ut&&this._onExpand(Et=ie.ctrlKey),"click"!==de||ie.target!==Xe.dom.tdColor&&ie.target!==Xe.dom.color||!this.editable.value||this._showColorPicker(),"change"===de&&_e===$e.checkbox&&(this.dom.value.textContent=String(!this.value),this._getDomValue(),this._updateDomDefault()),"change"===de&&_e===$e.select&&(this.dom.value.innerHTML=this._escapeHTML($e.select.value),this._getDomValue(),this._updateDomValue()),$e.value);if(_e===mt)switch(de){case"blur":case"change":this._getDomValue(),this._clearValueError(),this._updateDomValue();var ct=this._escapeHTML(this.value);ct!==this._unescapeHTML((0,R.getInnerText)(mt))&&(mt.innerHTML=ct);break;case"input":case"keyup":this._getDomValue(),this._updateDomValue();break;case"keydown":case"mousedown":this.editor.selection=this.editor.getDomSelection();break;case"click":ie.ctrlKey&&this.editable.value&&(0,R.isUrl)(this.value)&&(ie.preventDefault(),window.open(this.value,"_blank","noreferrer"));break;case"cut":case"paste":setTimeout(function(){Xe._getDomValue(),Xe._updateDomValue()},1)}var Tt=$e.field;if(_e===Tt)switch(de){case"blur":this._getDomField(!0),this._updateDomField();var St=this._escapeHTML(this.field);St!==this._unescapeHTML((0,R.getInnerText)(Tt))&&(Tt.innerHTML=St);break;case"input":this._getDomField(),this._updateSchema(),this._updateDomField(),this._updateDomValue();break;case"keydown":case"mousedown":this.editor.selection=this.editor.getDomSelection();break;case"keyup":this._getDomField(),this._updateDomField();break;case"cut":case"paste":setTimeout(function(){Xe._getDomField(),Xe._updateDomField()},1)}var Et=$e.tree;Et&&_e===Et.parentNode&&"click"===de&&!ie.hasMoved&&((void 0!==ie.offsetX?ie.offsetX<24*(this.getLevel()+1):ie.pageX<(0,R.getAbsoluteLeft)($e.tdSeparator))||ut?Tt&&((0,R.setEndOfContentEditable)(Tt),Tt.focus()):mt&&!this.enum&&((0,R.setEndOfContentEditable)(mt),mt.focus())),(_e!==$e.tdExpand||ut)&&_e!==$e.tdField&&_e!==$e.tdSeparator||"click"!==de||ie.hasMoved||Tt&&((0,R.setEndOfContentEditable)(Tt),Tt.focus()),"keydown"===de&&this.onKeyDown(ie),"function"==typeof this.editor.options.onEvent&&this._onEvent(ie)}},{key:"_onEvent",value:function(ie){var se=(de=ie.target)===this.dom.field,de=de===this.dom.value||de===this.dom.checkbox||de===this.dom.select;(se||de)&&(se={field:this.getField(),path:this.getPath()},de&&!this._hasChilds()&&(se.value=this.getValue()),this.editor.options.onEvent(se,ie))}},{key:"onKeyDown",value:function(ie){var se,de,_e,$e,Xe,ut,mt,ct,Tt,St,Et,yn,ft,pt,vt=ie.which||ie.keyCode,wt=ie.target||ie.srcElement,Gt=ie.ctrlKey,Wt=ie.shiftKey,Ke=ie.altKey,Ze=!1,Ct="tree"===this.editor.options.mode,Rt=0<this.editor.multiselection.nodes.length?this.editor.multiselection.nodes:[this],yt=Rt[0],hn=Rt[Rt.length-1];13===vt?wt===this.dom.value?this.editable.value&&!ie.ctrlKey||(0,R.isUrl)(this.value)&&(window.open(this.value,"_blank","noreferrer"),Ze=!0):wt===this.dom.expand&&this._hasChilds()&&(this._onExpand(ft=ie.ctrlKey),wt.focus(),Ze=!0):68===vt?Gt&&Ct&&(oe.onDuplicate(Rt),Ze=!0):69===vt?Gt&&(this._onExpand(Wt),wt.focus(),Ze=!0):77===vt&&Ct?Gt&&(this.showContextMenu(wt),Ze=!0):46===vt&&Ct?Gt&&(oe.onRemove(Rt),Ze=!0):45===vt&&Ct?Gt&&!Wt?(this._onInsertBefore(),Ze=!0):Gt&&Wt&&(this._onInsertAfter(),Ze=!0):35===vt?Ke&&((ft=this._lastNode())&&ft.focus(oe.focusElement||this._getElementName(wt)),Ze=!0):36===vt?Ke&&((ft=this._firstNode())&&ft.focus(oe.focusElement||this._getElementName(wt)),Ze=!0):37===vt?Ke&&!Wt?((ft=this._previousElement(wt))&&this.focus(this._getElementName(ft)),Ze=!0):Ke&&Wt&&Ct&&(ft=hn.expanded?(ft=hn.getAppendDom())?ft.nextSibling:void 0:hn.getDom().nextSibling)&&(Et=oe.getNodeFromTarget(ft),yn=oe.getNodeFromTarget(ft=ft.nextSibling),Et)&&Et instanceof V&&1!==hn.parent.childs.length&&yn&&yn.parent&&(de=this.editor.getDomSelection(),_e=($e=yt.parent).childs[hn.getIndex()+1]||$e.append,Xe=yt.getIndex(),ut=yn.getIndex(),mt=$e.getInternalPath(),ct=yn.parent.getInternalPath(),Rt.forEach(function(Fe){yn.parent.moveBefore(Fe,yn)}),this.focus(oe.focusElement||this._getElementName(wt)),this.editor._onAction("moveNodes",{count:Rt.length,fieldNames:Rt.map(G),oldParentPath:$e.getInternalPath(),newParentPath:yt.parent.getInternalPath(),oldIndex:_e.getIndex(),newIndex:yt.getIndex(),oldIndexRedo:Xe,newIndexRedo:ut,oldParentPathRedo:mt,newParentPathRedo:ct,oldSelection:de,newSelection:this.editor.getDomSelection()})):38===vt?Ke&&!Wt?((se=this._previousNode())&&(this.editor.deselect(!0),se.focus(oe.focusElement||this._getElementName(wt))),Ze=!0):!Ke&&Gt&&Wt&&Ct?((se=this._previousNode())&&((St=this.editor.multiselection).start=St.start||this,St.end=se,Tt=this.editor._findTopLevelNodes(St.start,St.end),this.editor.select(Tt),se.focus("field")),Ze=!0):Ke&&Wt&&Ct&&((se=yt._previousNode())&&se.parent&&(de=this.editor.getDomSelection(),_e=($e=yt.parent).childs[hn.getIndex()+1]||$e.append,Xe=yt.getIndex(),ut=se.getIndex(),mt=$e.getInternalPath(),ct=se.parent.getInternalPath(),Rt.forEach(function(Fe){se.parent.moveBefore(Fe,se)}),this.focus(oe.focusElement||this._getElementName(wt)),this.editor._onAction("moveNodes",{count:Rt.length,fieldNames:Rt.map(G),oldParentPath:$e.getInternalPath(),newParentPath:yt.parent.getInternalPath(),oldIndex:_e.getIndex(),newIndex:yt.getIndex(),oldIndexRedo:Xe,newIndexRedo:ut,oldParentPathRedo:mt,newParentPathRedo:ct,oldSelection:de,newSelection:this.editor.getDomSelection()})),Ze=!0):39===vt?Ke&&!Wt?((ft=this._nextElement(wt))&&this.focus(this._getElementName(ft)),Ze=!0):Ke&&Wt&&Ct&&(ft=yt.getDom().previousSibling)&&(se=oe.getNodeFromTarget(ft))&&se.parent&&!se.isVisible()&&(de=this.editor.getDomSelection(),_e=($e=yt.parent).childs[hn.getIndex()+1]||$e.append,Xe=yt.getIndex(),ut=se.getIndex(),mt=$e.getInternalPath(),ct=se.parent.getInternalPath(),Rt.forEach(function(Fe){se.parent.moveBefore(Fe,se)}),this.focus(oe.focusElement||this._getElementName(wt)),this.editor._onAction("moveNodes",{count:Rt.length,fieldNames:Rt.map(G),oldParentPath:$e.getInternalPath(),newParentPath:yt.parent.getInternalPath(),oldIndex:_e.getIndex(),newIndex:yt.getIndex(),oldIndexRedo:Xe,newIndexRedo:ut,oldParentPathRedo:mt,newParentPathRedo:ct,oldSelection:de,newSelection:this.editor.getDomSelection()})):40===vt&&(Ke&&!Wt?((Et=this._nextNode())&&(this.editor.deselect(!0),Et.focus(oe.focusElement||this._getElementName(wt))),Ze=!0):!Ke&&Gt&&Wt&&Ct?((Et=this._nextNode())&&((St=this.editor.multiselection).start=St.start||this,St.end=Et,Tt=this.editor._findTopLevelNodes(St.start,St.end),this.editor.select(Tt),Et.focus("field")),Ze=!0):Ke&&Wt&&Ct&&((pt=(Et=(Et=(Et=hn.expanded?hn.append?hn.append._nextNode():void 0:hn._nextNode())&&!Et.isVisible()?Et.parent.showMore:Et)&&Et instanceof V?hn:Et)&&(Et._nextNode()||Et.parent.append))&&pt.parent&&(de=this.editor.getDomSelection(),_e=($e=yt.parent).childs[hn.getIndex()+1]||$e.append,Xe=yt.getIndex(),ut=pt.getIndex(),mt=$e.getInternalPath(),ct=pt.parent.getInternalPath(),Rt.forEach(function(Fe){pt.parent.moveBefore(Fe,pt)}),this.focus(oe.focusElement||this._getElementName(wt)),this.editor._onAction("moveNodes",{count:Rt.length,fieldNames:Rt.map(G),oldParentPath:$e.getInternalPath(),newParentPath:yt.parent.getInternalPath(),oldParentPathRedo:mt,newParentPathRedo:ct,oldIndexRedo:Xe,newIndexRedo:ut,oldIndex:_e.getIndex(),newIndex:yt.getIndex(),oldSelection:de,newSelection:this.editor.getDomSelection()})),Ze=!0)),Ze&&(ie.preventDefault(),ie.stopPropagation())}},{key:"_onExpand",value:function(ie){var se,de,_e;ie&&(_e=(de=(se=this.dom.tr.parentNode).parentNode).scrollTop,de.removeChild(se)),this.expanded?this.collapse(ie):this.expand(ie),ie&&(de.appendChild(se),de.scrollTop=_e),"function"==typeof this.editor.options.onExpand&&this.editor.options.onExpand({path:this.getPath(),isExpand:this.expanded,recursive:ie})}},{key:"_showColorPicker",value:function(){var ie,se;"function"==typeof this.editor.options.onColorPicker&&this.dom.color&&((ie=this)._deleteDomColor(),ie.updateDom(),se=(0,M.w)(this.dom.color,this.editor.getPopupAnchor()),this.editor.options.onColorPicker(se,this.value,function(de){"string"==typeof de&&de!==ie.value&&(ie._deleteDomColor(),ie.value=de,ie.updateDom(),ie._debouncedOnChangeValue())}))}},{key:"getFieldNames",value:function(ie){return"object"===this.type?this.childs.filter(function(se){return se!==ie}).map(function(se){return se.field}):[]}},{key:"_onInsertBefore",value:function($e,Xe,ut){var _e=this.editor.getDomSelection();($e=new oe(this.editor,{field:void 0!==$e?$e:"",value:void 0!==Xe?Xe:"",type:ut})).expand(!0),Xe=this.getInternalPath(),this.parent.insertBefore($e,this),this.editor.highlighter.unhighlight(),$e.focus("field"),ut=this.editor.getDomSelection(),this.editor._onAction("insertBeforeNodes",{nodes:[$e],paths:[$e.getInternalPath()],beforePath:Xe,parentPath:this.parent.getInternalPath(),oldSelection:_e,newSelection:ut})}},{key:"_onInsertAfter",value:function($e,Xe,de){var _e=this.editor.getDomSelection();($e=new oe(this.editor,{field:void 0!==$e?$e:"",value:void 0!==Xe?Xe:"",type:de})).expand(!0),this.parent.insertAfter($e,this),this.editor.highlighter.unhighlight(),$e.focus("field"),Xe=this.editor.getDomSelection(),this.editor._onAction("insertAfterNodes",{nodes:[$e],paths:[$e.getInternalPath()],afterPath:this.getInternalPath(),parentPath:this.parent.getInternalPath(),oldSelection:_e,newSelection:Xe})}},{key:"_onAppend",value:function($e,Xe,de){var _e=this.editor.getDomSelection();($e=new oe(this.editor,{field:void 0!==$e?$e:"",value:void 0!==Xe?Xe:"",type:de})).expand(!0),this.parent.appendChild($e),this.editor.highlighter.unhighlight(),$e.focus("field"),Xe=this.editor.getDomSelection(),this.editor._onAction("appendNodes",{nodes:[$e],paths:[$e.getInternalPath()],parentPath:this.parent.getInternalPath(),oldSelection:_e,newSelection:Xe})}},{key:"_onChangeType",value:function(ie){var se,de,_e=this.type;ie!==_e&&(se=this.editor.getDomSelection(),this.changeType(ie),de=this.editor.getDomSelection(),this.editor._onAction("changeType",{path:this.getInternalPath(),oldType:_e,newType:ie,oldSelection:se,newSelection:de}))}},{key:"sort",value:function(ie,se){var de,_e,$e=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];"string"==typeof ie&&(ie=(0,R.parsePath)(ie)),this._hasChilds()&&(this.hideChilds(),de=this.childs,this.childs=this.childs.concat(),_e="desc"===se?-1:1,this.childs.sort("object"===this.type?function(Xe,ut){return _e*_()(Xe.field,ut.field)}:function(mt,ct){return mt=mt.getNestedChild(ie),ct=ct.getNestedChild(ie),mt?ct?(ct=ct.value,"string"!=typeof(mt=mt.value)&&"string"!=typeof ct?ct<mt?_e:mt<ct?-_e:0:_e*_()(mt,ct)):-_e:_e}),this._updateDomIndexes(),this.showChilds(),!0===$e)&&this.editor._onAction("sort",{path:this.getInternalPath(),oldChilds:de,newChilds:this.childs})}},{key:"update",value:function(ie){var se=this.getInternalValue();this.setValue(ie),this.editor._onAction("transform",{path:this.getInternalPath(),oldValue:se,newValue:this.getInternalValue()})}},{key:"_detachFromDom",value:function(){var ie=this.dom.tr?this.dom.tr.parentNode:void 0,se=(se=this.expanded?this.getAppendDom():this.getDom())&&se.parentNode?se.nextSibling:void 0;return this.hide({resetVisibleChilds:!1}),{table:ie,nextTr:se}}},{key:"_attachToDom",value:function(ie){ie.table&&(ie.nextTr?ie.table.insertBefore(this.getDom(),ie.nextTr):ie.table.appendChild(this.getDom())),this.expanded&&this.showChilds()}},{key:"transform",value:function(ie){if(this._hasChilds()){this.hideChilds();try{var se=this.getInternalValue(),de=this.getValue(),_e=this.editor.options.executeQuery(de,ie),$e=(this.setValue(_e),this.getInternalValue());this.editor._onAction("transform",{path:this.getInternalPath(),oldValue:se,newValue:$e}),this.showChilds()}catch(Xe){this.showChilds(),this.editor._onError(Xe)}}}},{key:"extract",value:function(){this.editor.node.hideChilds(),this.hideChilds();try{var ie=this.editor.node.getInternalValue(),se=(this.editor._setRoot(this),this.editor.node.getInternalValue());this.editor._onAction("transform",{path:this.editor.node.getInternalPath(),oldValue:ie,newValue:se})}catch(de){this.editor._onError(de)}finally{this.updateDom({recurse:!0}),this.showChilds()}}},{key:"getNestedChild",value:function(ie){for(var se=0,de=this;de&&se<ie.length;)de=de.findChildByProperty(ie[se]),se++;return de}},{key:"findChildByProperty",value:function(ie){if("object"===this.type)return this.childs.find(function(se){return se.field===ie})}},{key:"getAppendDom",value:function(){return this.append||(this.append=new V(this.editor),this.append.setParent(this)),this.append.getDom()}},{key:"getShowMoreDom",value:function(){return this.showMore||(this.showMore=new X(this.editor,this)),this.showMore.getDom()}},{key:"nextSibling",value:function(){var ie=this.parent.childs.indexOf(this);return this.parent.childs[ie+1]||this.parent.append}},{key:"_previousNode",value:function(){var ie=null,se=this.getDom();if(se&&se.parentNode)for(var de=se;ie=oe.getNodeFromTarget(de=de.previousSibling),de&&ie&&ie instanceof V&&!ie.isVisible(););return ie}},{key:"_nextNode",value:function(){var ie=null,se=this.getDom();if(se&&se.parentNode)for(var de=se;ie=oe.getNodeFromTarget(de=de.nextSibling),de&&ie&&ie instanceof V&&!ie.isVisible(););return ie}},{key:"_firstNode",value:function(){var ie=null,se=this.getDom();return se&&se.parentNode&&(ie=oe.getNodeFromTarget(se=se.parentNode.firstChild)),ie}},{key:"_lastNode",value:function(){var ie=null,se=this.getDom();if(se&&se.parentNode){var de=se.parentNode.lastChild;for(ie=oe.getNodeFromTarget(de);de&&ie&&!ie.isVisible();)ie=oe.getNodeFromTarget(de=de.previousSibling)}return ie}},{key:"_previousElement",value:function(ie){var se=this.dom;switch(ie){case se.value:if(this.fieldEditable)return se.field;case se.field:if(this._hasChilds())return se.expand;case se.expand:return se.menu;case se.menu:if(se.drag)return se.drag;default:return null}}},{key:"_nextElement",value:function(ie){var se=this.dom;switch(ie){case se.drag:return se.menu;case se.menu:if(this._hasChilds())return se.expand;case se.expand:if(this.fieldEditable)return se.field;case se.field:if(!this._hasChilds())return se.value;default:return null}}},{key:"_getElementName",value:function(ie){var se=this;return Object.keys(this.dom).find(function(de){return se.dom[de]===ie})}},{key:"_hasChilds",value:function(){return"array"===this.type||"object"===this.type}},{key:"addTemplates",value:function(ie,se){var de=this,_e=de.editor.options.templates;null!=_e&&(_e.length&&ie.push({type:"separator"}),_e.forEach(function($e){ie.push({text:$e.text,className:$e.className||"jsoneditor-type-object",title:$e.title,click:(se?function(Xe,ut){de._onAppend(Xe,ut)}:function(Xe,ut){de._onInsertBefore(Xe,ut)}).bind(this,$e.field,$e.value)})}))}},{key:"showContextMenu",value:function(ie,se){var de,_e=this,$e=[];this.editable.value&&$e.push({text:(0,H.Iu)("type"),title:(0,H.Iu)("typeTitle"),className:"jsoneditor-type-"+this.type,submenu:[{text:(0,H.Iu)("auto"),className:"jsoneditor-type-auto"+("auto"===this.type?" jsoneditor-selected":""),title:(0,H.Iu)("autoType"),click:function(){_e._onChangeType("auto")}},{text:(0,H.Iu)("array"),className:"jsoneditor-type-array"+("array"===this.type?" jsoneditor-selected":""),title:(0,H.Iu)("arrayType"),click:function(){_e._onChangeType("array")}},{text:(0,H.Iu)("object"),className:"jsoneditor-type-object"+("object"===this.type?" jsoneditor-selected":""),title:(0,H.Iu)("objectType"),click:function(){_e._onChangeType("object")}},{text:(0,H.Iu)("string"),className:"jsoneditor-type-string"+("string"===this.type?" jsoneditor-selected":""),title:(0,H.Iu)("stringType"),click:function(){_e._onChangeType("string")}}]}),this._hasChilds()&&(this.editor.options.enableSort&&$e.push({text:(0,H.Iu)("sort"),title:(0,H.Iu)("sortTitle",{type:this.type}),className:"jsoneditor-sort-asc",click:function(){_e.showSortModal()}}),this.editor.options.enableTransform&&$e.push({text:(0,H.Iu)("transform"),title:(0,H.Iu)("transformTitle",{type:this.type}),className:"jsoneditor-transform",click:function(){_e.showTransformModal()}}),this.parent)&&$e.push({text:(0,H.Iu)("extract"),title:(0,H.Iu)("extractTitle",{type:this.type}),className:"jsoneditor-extract",click:function(){_e.extract()}}),this.parent&&this.parent._hasChilds()&&($e.length&&$e.push({type:"separator"}),_e===(de=_e.parent.childs)[de.length-1]&&(de=[{text:(0,H.Iu)("auto"),className:"jsoneditor-type-auto",title:(0,H.Iu)("autoType"),click:function(){_e._onAppend("","","auto")}},{text:(0,H.Iu)("array"),className:"jsoneditor-type-array",title:(0,H.Iu)("arrayType"),click:function(){_e._onAppend("",[])}},{text:(0,H.Iu)("object"),className:"jsoneditor-type-object",title:(0,H.Iu)("objectType"),click:function(){_e._onAppend("",{})}},{text:(0,H.Iu)("string"),className:"jsoneditor-type-string",title:(0,H.Iu)("stringType"),click:function(){_e._onAppend("","","string")}}],_e.addTemplates(de,!0),$e.push({text:(0,H.Iu)("appendText"),title:(0,H.Iu)("appendTitle"),submenuTitle:(0,H.Iu)("appendSubmenuTitle"),className:"jsoneditor-append",click:function(){_e._onAppend("","","auto")},submenu:de})),de=[{text:(0,H.Iu)("auto"),className:"jsoneditor-type-auto",title:(0,H.Iu)("autoType"),click:function(){_e._onInsertBefore("","","auto")}},{text:(0,H.Iu)("array"),className:"jsoneditor-type-array",title:(0,H.Iu)("arrayType"),click:function(){_e._onInsertBefore("",[])}},{text:(0,H.Iu)("object"),className:"jsoneditor-type-object",title:(0,H.Iu)("objectType"),click:function(){_e._onInsertBefore("",{})}},{text:(0,H.Iu)("string"),className:"jsoneditor-type-string",title:(0,H.Iu)("stringType"),click:function(){_e._onInsertBefore("","","string")}}],_e.addTemplates(de,!1),$e.push({text:(0,H.Iu)("insert"),title:(0,H.Iu)("insertTitle"),submenuTitle:(0,H.Iu)("insertSub"),className:"jsoneditor-insert",click:function(){_e._onInsertBefore("","","auto")},submenu:de}),this.editable.field)&&($e.push({text:(0,H.Iu)("duplicateText"),title:(0,H.Iu)("duplicateField"),className:"jsoneditor-duplicate",click:function(){oe.onDuplicate(_e)}}),$e.push({text:(0,H.Iu)("removeText"),title:(0,H.Iu)("removeField"),className:"jsoneditor-remove",click:function(){oe.onRemove(_e)}})),this.editor.options.onCreateMenu&&(de=_e.getPath(),$e=this.editor.options.onCreateMenu($e,{type:"single",path:de,paths:[de]})),new c.x($e,{close:se}).show(ie,this.editor.getPopupAnchor())}},{key:"showSortModal",value:function(){var ie=this,se=this.editor.options.modalAnchor||w.qD,de=this.getValue();(0,S.showSortModal)(se,de,function(_e){var $e=(0,R.parsePath)($e=_e.path);ie.sortedBy=_e,ie.sort($e,_e.direction)},ie.sortedBy)}},{key:"showTransformModal",value:function(){var ie=this,se=($e=this.editor.options).modalAnchor,de=$e.createQuery,_e=$e.executeQuery,$e=$e.queryDescription,Xe=this.getValue();(0,y.showTransformModal)({container:se||w.qD,json:Xe,queryDescription:$e,createQuery:de,executeQuery:_e,onTransform:function(ut){ie.transform(ut)}})}},{key:"_getType",value:function(ie){return ie instanceof Array?"array":ie instanceof Object?"object":"string"==typeof ie&&"string"!=typeof(0,R.parseString)(ie)?"string":"auto"}},{key:"_escapeHTML",value:function(ie){return"string"!=typeof ie?String(ie):(ie=String(ie).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ {2}/g," &nbsp;").replace(/^ /,"&nbsp;").replace(/ $/,"&nbsp;"),ie=(ie=JSON.stringify(ie)).substring(1,ie.length-1),!0===this.editor.options.escapeUnicode?(0,R.escapeUnicodeChars)(ie):ie)}},{key:"_unescapeHTML",value:function(ie){return ie='"'+this._escapeJSON(ie)+'"',(0,R.parse)(ie).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;|\u00A0/g," ").replace(/&amp;/g,"&")}},{key:"_escapeJSON",value:function(ie){for(var se="",de=0;de<ie.length;){var _e=ie.charAt(de);"\n"===_e?se+="\\n":"\\"===_e?(se+=_e,de++,""!==(_e=ie.charAt(de))&&-1!=='"\\/bfnrtu'.indexOf(_e)||(se+="\\"),se+=_e):se+='"'===_e?'\\"':_e,de++}return se}},{key:"updateNodeName",value:function(){var ie=this.childs?this.childs.length:0;if("object"===this.type||"array"===this.type){if(this.editor.options.onNodeName)try{var se=this.getValue.bind(this),de=this.editor.options.onNodeName({path:this.getPath(),size:ie,type:this.type,get value(){return se()}})}catch(_e){console.error("Error in onNodeName callback: ",_e)}this.dom.value.textContent="object"===this.type?"{"+(de||ie)+"}":"["+(de||ie)+"]"}}},{key:"recursivelyUpdateNodeName",value:function(){if(this.expanded&&(this.updateNodeName(),"undefined"!==this.childs))for(var ie in this.childs)this.childs[ie].recursivelyUpdateNodeName()}}])&&C(pe.prototype,ge),Object.defineProperty(pe,"prototype",{writable:!1}),oe}(),L=(x.prototype.DEBOUNCE_INTERVAL=150,x.prototype.MAX_SEARCH_RESULTS=999,100);function Q(oe){return oe.getInternalPath()}function G(oe){return oe.getField()}function T(oe,pe){return Object.prototype.hasOwnProperty.call(oe,pe)}x.focusElement=void 0,x.select=function(oe){setTimeout(function(){(0,R.selectContentEditable)(oe)},0)},x.onDragStart=function(oe,pe){if(!Array.isArray(oe))return x.onDragStart([oe],pe);var ge,be,ie,se,de;0!==oe.length&&(be=oe[oe.length-1],ie=(ge=oe[0]).parent,de=x.getNodeFromTarget(pe.target),se=ge.editor,de=(0,R.getAbsoluteTop)(de.dom.tr)-(0,R.getAbsoluteTop)(ge.dom.tr),se.mousemove||(se.mousemove=(0,R.addEventListener)(pe.view,"mousemove",function(_e){x.onDrag(oe,_e)})),se.mouseup||(se.mouseup=(0,R.addEventListener)(pe.view,"mouseup",function(_e){x.onDragEnd(oe,_e)})),se.highlighter.lock(),se.drag={oldCursor:document.body.style.cursor,oldSelection:se.getDomSelection(),oldPaths:oe.map(Q),oldParent:ie,oldNextNode:ie.childs[be.getIndex()+1]||ie.append,oldParentPathRedo:ie.getInternalPath(),oldIndexRedo:ge.getIndex(),mouseX:pe.pageX,offsetY:de,level:ge.getLevel()},document.body.style.cursor="move",pe.preventDefault())},x.onDrag=function(oe,pe){if(!Array.isArray(oe))return x.onDrag([oe],pe);if(0!==oe.length){var ge,be,ie,se,de,_e=oe[0].editor,$e=pe.pageY-_e.drag.offsetY,Xe=pe.pageX,ut=!1,mt=oe[0],ct=mt.dom.tr,Tt=(0,R.getAbsoluteTop)(ct),St=ct.offsetHeight;if($e<Tt){for(pt=ct;vt=x.getNodeFromTarget(pt=pt.previousSibling),ie=pt?(0,R.getAbsoluteTop)(pt):0,pt&&$e<ie;);(vt=vt&&!vt.parent?void 0:vt)||(pt=(ct=ct.parentNode.firstChild)?ct.nextSibling:void 0,(vt=x.getNodeFromTarget(pt))===mt&&(vt=void 0)),!(vt=vt&&vt.isVisible()&&(ie=(pt=vt.dom.tr)?(0,R.getAbsoluteTop)(pt):0)+St<$e?void 0:vt)||!1!==_e.options.limitDragging&&vt.parent!==oe[0].parent||(oe.forEach(function(Gt){vt.parent.moveBefore(Gt,vt)}),ut=!0)}else{var Et=oe[oe.length-1];if(St=(ct=Et.expanded&&Et.append?Et.append.getDom():Et.dom.tr)?ct.nextSibling:void 0){for(se=(0,R.getAbsoluteTop)(St),ge=St;be=x.getNodeFromTarget(ge),ge&&(de=ge.nextSibling?(0,R.getAbsoluteTop)(ge.nextSibling):0,de=ge?de-se:0,be&&be.parent.childs.length===oe.length&&be.parent.childs[oe.length-1]===Et&&(Tt+=27),ge=ge.nextSibling),ge&&Tt+de<$e;);if(be&&be.parent){St=Xe-_e.drag.mouseX,St=Math.round(St/24/2);for(var yn=_e.drag.level+St,ft=be.getLevel(),pt=be.dom.tr&&be.dom.tr.previousSibling;ft<yn&&pt;){var vt=x.getNodeFromTarget(pt),wt=oe.some(function(Wt){return Wt===vt||vt.isDescendantOf(Wt)});if(!wt){if(!(vt instanceof V)||(wt=vt.parent.childs).length===oe.length&&wt[oe.length-1]===Et)break;ft=(be=x.getNodeFromTarget(pt)).getLevel()}pt=pt.previousSibling}(be=be instanceof V&&!be.isVisible()&&be.parent.showMore.isVisible()?be._nextNode():be)&&(!1===_e.options.limitDragging||be.parent===oe[0].parent)&&be.dom.tr&&be.dom.tr!==ct.nextSibling&&(oe.forEach(function(Gt){be.parent.moveBefore(Gt,be)}),ut=!0)}}}ut&&(_e.drag.mouseX=Xe,_e.drag.level=mt.getLevel()),_e.startAutoScroll($e),pe.preventDefault()}},x.onDragEnd=function(oe,pe){if(!Array.isArray(oe))return x.onDrag([oe],pe);var ge,be,ie,se,de,_e,$e,Xe,ut;0!==oe.length&&(ge=(_e=oe[0]).editor,_e&&_e.dom.menu&&_e.dom.menu.focus(),be=ge.drag.oldParent.getInternalPath(),ie=_e.parent.getInternalPath(),se=ge.drag.oldParent===_e.parent,de=ge.drag.oldNextNode.getIndex(),_e=_e.getIndex(),$e=ge.drag.oldParentPathRedo,Xe=ge.drag.oldIndexRedo,ut=se&&Xe<_e?_e+oe.length:_e,se&&Xe===_e||ge._onAction("moveNodes",{count:oe.length,fieldNames:oe.map(G),oldParentPath:be,newParentPath:ie,oldIndex:de,newIndex:_e,oldIndexRedo:Xe,newIndexRedo:ut,oldParentPathRedo:$e,newParentPathRedo:null,oldSelection:ge.drag.oldSelection,newSelection:ge.getDomSelection()}),document.body.style.cursor=ge.drag.oldCursor,ge.highlighter.unlock(),oe.forEach(function(mt){mt.updateDom(),pe.target!==mt.dom.drag&&pe.target!==mt.dom.menu&&ge.highlighter.unhighlight()}),delete ge.drag,ge.mousemove&&((0,R.removeEventListener)(pe.view,"mousemove",ge.mousemove),delete ge.mousemove),ge.mouseup&&((0,R.removeEventListener)(pe.view,"mouseup",ge.mouseup),delete ge.mouseup),ge.stopAutoScroll(),pe.preventDefault())},x._findEnum=function(oe){return oe.enum?oe.enum:(oe=oe.oneOf||oe.anyOf||oe.allOf)&&0<(oe=oe.filter(function(pe){return pe.enum})).length?oe[0].enum:null},x._findSchema=function(oe,pe,ge){for(var be=3<arguments.length&&void 0!==arguments[3]?arguments[3]:oe,ie=ge.slice(1,ge.length),se=ge[0],de=[be],_e=0,$e=[be.oneOf,be.anyOf,be.allOf];_e<$e.length;_e++){var Xe=$e[_e];Array.isArray(Xe)&&(de=de.concat(Xe))}var ut,mt=m(de);try{for(mt.s();!(ut=mt.n()).done;){if("$ref"in(be=ut.value)&&"string"==typeof be.$ref){var ct,Tt=be.$ref;if(Tt in pe)be=pe[Tt];else{if(!Tt.startsWith("#/")){if(1===(null==(ct=Tt.match(/#\//g))?void 0:ct.length)){var St,Et,yn,ft=f(Tt.split("#/"),2),pt=ft[0];if(pt in pe)return St=pe[pt],Et={$ref:"#/".concat(ft[1])},(yn=[]).push(se),0<ie.length&&yn.push.apply(yn,p(ie)),x._findSchema(St,pe,yn,Et)}throw Error("Unable to resolve reference ".concat(Tt))}var wt,Gt=Tt.substring(2).split("/"),Wt=(be=oe,m(Gt));try{for(Wt.s();!(wt=Wt.n()).done;){var Ke=wt.value;if(!(Ke in be))throw Error("Unable to resolve reference ".concat(Tt));be=be[Ke]}}catch(Rt){Wt.e(Rt)}finally{Wt.f()}}}if(void 0===se)return be;if("string"==typeof se){if("object"===O(be.properties)&&null!==be.properties&&se in be.properties)return x._findSchema(oe,pe,ie,be=be.properties[se]);if("object"===O(be.patternProperties)&&null!==be.patternProperties)for(var Ze in be.patternProperties)if(se.match(Ze))return x._findSchema(oe,pe,ie,be=be.patternProperties[Ze]);if("object"===O(be.additionalProperties))return x._findSchema(oe,pe,ie,be=be.additionalProperties)}else if("number"==typeof se&&"object"===O(be.items)&&null!==be.items)return x._findSchema(oe,pe,ie,be=be.items)}}catch(Ct){mt.e(Ct)}finally{mt.f()}return null},x.onRemove=function(oe){if(!Array.isArray(oe))return x.onRemove([oe]);var pe,ge,be,ie,se,de;oe&&0<oe.length&&(pe=(be=oe[0]).parent,ge=be.editor,be=be.getIndex(),ge.highlighter.unhighlight(),ie=ge.getDomSelection(),x.blurNodes(oe),se=ge.getDomSelection(),de=oe.map(Q),oe.forEach(function(_e){_e.parent._remove(_e)}),ge._onAction("removeNodes",{nodes:oe,paths:de,parentPath:pe.getInternalPath(),index:be,oldSelection:ie,newSelection:se}))},x.onDuplicate=function(oe){if(!Array.isArray(oe))return x.onDuplicate([oe]);var pe,ge,be,ie,se,de,_e;oe&&0<oe.length&&(ge=(pe=oe[oe.length-1]).parent,(be=pe.editor).deselect(be.multiselection.nodes),ie=be.getDomSelection(),se=pe,de=oe.map(function($e){var Xe,ut=$e.clone();return"object"===$e.parent.type&&(Xe=$e.parent.getFieldNames(),ut.field=(0,R.findUniqueName)($e.field,Xe)),ge.insertAfter(ut,se),se=ut}),1===oe.length?"object"===de[0].parent.type?(de[0].dom.field.innerHTML=oe[0]._escapeHTML(oe[0].field),de[0].focus("field")):de[0].focus():be.select(de),_e=be.getDomSelection(),be._onAction("duplicateNodes",{paths:oe.map(Q),clonePaths:de.map(Q),afterPath:pe.getInternalPath(),parentPath:ge.getInternalPath(),oldSelection:ie,newSelection:_e}))},x.getNodeFromTarget=function(oe){for(;oe;){if(oe.node)return oe.node;oe=oe.parentNode}},x.targetIsColorPicker=function(oe){var pe=x.getNodeFromTarget(oe);if(pe)for(var ge=oe&&oe.parentNode;ge;){if(ge===pe.dom.color)return!0;ge=ge.parentNode}return!1},x.blurNodes=function(oe){var pe,ge;Array.isArray(oe)?(pe=(ge=oe[0]).parent,ge=ge.getIndex(),(pe.childs[ge+oe.length]?pe.childs[ge+oe.length]:pe.childs[ge-1]||pe).focus()):x.blurNodes([oe])},(J.prototype=new x).getDom=function(){var oe=this.dom;if(oe.tr)return oe.tr;this._updateEditability();var pe=document.createElement("tr"),ge=(pe.className="jsoneditor-append",pe.node=this,oe.tr=pe,"tree"===this.editor.options.mode&&(oe.tdDrag=document.createElement("td"),be=document.createElement("td"),oe.tdMenu=be,(ge=document.createElement("button")).type="button",ge.className="jsoneditor-button jsoneditor-contextmenu-button",ge.title="Click to open the actions menu (Ctrl+M)",oe.menu=ge,be.appendChild(oe.menu)),document.createElement("td")),be=document.createElement("div");return be.appendChild(document.createTextNode("("+(0,H.Iu)("empty")+")")),be.className="jsoneditor-readonly",ge.appendChild(be),oe.td=ge,oe.text=be,this.updateDom(),pe},J.prototype.getPath=function(){return null},J.prototype.getIndex=function(){return null},J.prototype.updateDom=function(oe){var pe=this.dom,ge=pe.td,be=(ge&&(ge.style.paddingLeft=24*this.getLevel()+26+"px"),(be=pe.text)&&(be.firstChild.nodeValue="("+(0,H.Iu)("empty")+" "+this.parent.type+")"),pe.tr);this.isVisible()?pe.tr.firstChild||(pe.tdDrag&&be.appendChild(pe.tdDrag),pe.tdMenu&&be.appendChild(pe.tdMenu),be.appendChild(ge)):pe.tr.firstChild&&(pe.tdDrag&&be.removeChild(pe.tdDrag),pe.tdMenu&&be.removeChild(pe.tdMenu),be.removeChild(ge))},J.prototype.isVisible=function(){return 0===this.parent.childs.length},J.prototype.showContextMenu=function(oe,pe){var ge,be=this,ie=[{text:(0,H.Iu)("auto"),className:"jsoneditor-type-auto",title:(0,H.Iu)("autoType"),click:function(){be._onAppend("","","auto")}},{text:(0,H.Iu)("array"),className:"jsoneditor-type-array",title:(0,H.Iu)("arrayType"),click:function(){be._onAppend("",[])}},{text:(0,H.Iu)("object"),className:"jsoneditor-type-object",title:(0,H.Iu)("objectType"),click:function(){be._onAppend("",{})}},{text:(0,H.Iu)("string"),className:"jsoneditor-type-string",title:(0,H.Iu)("stringType"),click:function(){be._onAppend("","","string")}}];be.addTemplates(ie,!0),ie=[{text:(0,H.Iu)("appendText"),title:(0,H.Iu)("appendTitleAuto"),submenuTitle:(0,H.Iu)("appendSubmenuTitle"),className:"jsoneditor-insert",click:function(){be._onAppend("","","auto")},submenu:ie}],this.editor.options.onCreateMenu&&(ge=be.parent.getPath(),ie=this.editor.options.onCreateMenu(ie,{type:"append",path:ge,paths:[ge]})),new c.x(ie,{close:pe}).show(oe,this.editor.getPopupAnchor())},J.prototype.onEvent=function(oe){var pe,ge=oe.type,be=oe.target||oe.srcElement,ie=this.dom;be===ie.menu&&("mouseover"===ge?this.editor.highlighter.highlight(this.parent):"mouseout"===ge&&this.editor.highlighter.unhighlight()),"click"===ge&&be===ie.menu&&((pe=this.editor.highlighter).highlight(this.parent),pe.lock(),(0,R.addClassName)(ie.menu,"jsoneditor-selected"),this.showContextMenu(ie.menu,function(){(0,R.removeClassName)(ie.menu,"jsoneditor-selected"),pe.unlock(),pe.unhighlight()})),"keydown"===ge&&this.onKeyDown(oe)};var V=J;function J(oe){this.editor=oe,this.dom={}}(q.prototype=new x).getDom=function(){var oe,pe,ge,be,ie,se;return this.dom.tr||(this._updateEditability(),this.dom.tr||(pe=(oe=this).parent,(ie=document.createElement("a")).appendChild(document.createTextNode((0,H.Iu)("showMore"))),ie.href="#",ie.onclick=function(de){return pe.visibleChilds=Math.floor(pe.visibleChilds/pe.getMaxVisibleChilds()+1)*pe.getMaxVisibleChilds(),oe.updateDom(),pe.showChilds(),de.preventDefault(),!1},(se=document.createElement("a")).appendChild(document.createTextNode((0,H.Iu)("showAll"))),se.href="#",se.onclick=function(de){return pe.visibleChilds=1/0,oe.updateDom(),pe.showChilds(),de.preventDefault(),!1},ge=document.createElement("div"),be=document.createTextNode(this._getShowMoreText()),ge.className="jsoneditor-show-more",ge.appendChild(be),ge.appendChild(ie),ge.appendChild(document.createTextNode(". ")),ge.appendChild(se),ge.appendChild(document.createTextNode(". ")),(ie=document.createElement("td")).appendChild(ge),se=document.createElement("tr"),"tree"===this.editor.options.mode&&(se.appendChild(document.createElement("td")),se.appendChild(document.createElement("td"))),se.appendChild(ie),se.className="jsoneditor-show-more",this.dom.tr=se,this.dom.moreContents=ge,this.dom.moreText=be),this.updateDom()),this.dom.tr},q.prototype.updateDom=function(oe){var pe;this.isVisible()?(this.dom.tr.node=this.parent.childs[this.parent.visibleChilds],this.dom.tr.parentNode||(pe=this.parent._getNextTr())&&pe.parentNode.insertBefore(this.dom.tr,pe),this.dom.moreText.nodeValue=this._getShowMoreText(),this.dom.moreContents.style.marginLeft=24*(this.getLevel()+1)+"px"):this.dom.tr&&this.dom.tr.parentNode&&this.dom.tr.parentNode.removeChild(this.dom.tr)},q.prototype._getShowMoreText=function(){return(0,H.Iu)("showMoreStatus",{visibleChilds:this.parent.visibleChilds,totalChilds:this.parent.childs.length})+" "},q.prototype.isVisible=function(){return this.parent.expanded&&this.parent.childs.length>this.parent.visibleChilds},q.prototype.onEvent=function(oe){"keydown"===oe.type&&this.onKeyDown(oe)};var X=q;function q(oe,pe){this.editor=oe,this.parent=pe,this.dom={}}function ee(oe){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(pe){return typeof pe}:function(pe){return pe&&"function"==typeof Symbol&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe})(oe)}function j(oe,pe){for(var ge=0;ge<pe.length;ge++){var be=pe[ge];be.enumerable=be.enumerable||!1,be.configurable=!0,"value"in be&&(be.writable=!0),Object.defineProperty(oe,(ie=function(se,de){if("object"!==ee(se)||null===se)return se;var _e=se[Symbol.toPrimitive];if(void 0===_e)return String(se);if("object"!==ee(_e=_e.call(se,"string")))return _e;throw new TypeError("@@toPrimitive must return a primitive value.")}(ie=be.key),"symbol"===ee(ie)?ie:String(ie)),be)}var ie}var D=function(){function oe(ie){if(!(this instanceof oe))throw new TypeError("Cannot call a class as a function");function se(de){return ie.node.findNodeByInternalPath(de)}this.editor=ie,this.history=[],this.index=-1,this.clear(),this.actions={editField:{undo:function(de){se(de.parentPath).childs[de.index].updateField(de.oldValue)},redo:function(de){se(de.parentPath).childs[de.index].updateField(de.newValue)}},editValue:{undo:function(de){se(de.path).updateValue(de.oldValue)},redo:function(de){se(de.path).updateValue(de.newValue)}},changeType:{undo:function(de){se(de.path).changeType(de.oldType)},redo:function(de){se(de.path).changeType(de.newType)}},appendNodes:{undo:function(de){var _e=se(de.parentPath);de.paths.map(se).forEach(function($e){_e.removeChild($e)})},redo:function(de){var _e=se(de.parentPath);de.nodes.forEach(function($e){_e.appendChild($e)})}},insertBeforeNodes:{undo:function(de){var _e=se(de.parentPath);de.paths.map(se).forEach(function($e){_e.removeChild($e)})},redo:function(de){var _e=se(de.parentPath),$e=se(de.beforePath);de.nodes.forEach(function(Xe){_e.insertBefore(Xe,$e)})}},insertAfterNodes:{undo:function(de){var _e=se(de.parentPath);de.paths.map(se).forEach(function($e){_e.removeChild($e)})},redo:function(de){var _e=se(de.parentPath),$e=se(de.afterPath);de.nodes.forEach(function(Xe){_e.insertAfter(Xe,$e),$e=Xe})}},removeNodes:{undo:function(de){var _e=se(de.parentPath),$e=_e.childs[de.index]||_e.append;de.nodes.forEach(function(Xe){_e.insertBefore(Xe,$e)})},redo:function(de){var _e=se(de.parentPath);de.paths.map(se).forEach(function($e){_e.removeChild($e)})}},duplicateNodes:{undo:function(de){var _e=se(de.parentPath);de.clonePaths.map(se).forEach(function($e){_e.removeChild($e)})},redo:function(de){var _e=se(de.parentPath),$e=se(de.afterPath);de.paths.map(se).forEach(function(Xe){var ut,mt=Xe.clone();"object"===_e.type&&(ut=_e.getFieldNames(),mt.field=(0,R.findUniqueName)(Xe.field,ut)),_e.insertAfter(mt,$e),$e=mt})}},moveNodes:{undo:function(de){var _e=se(de.oldParentPath),$e=se(de.newParentPath),Xe=_e.childs[de.oldIndex]||_e.append;$e.childs.slice(de.newIndex,de.newIndex+de.count).forEach(function(ut,mt){ut.field=de.fieldNames[mt],_e.moveBefore(ut,Xe)}),null===de.newParentPathRedo&&(de.newParentPathRedo=$e.getInternalPath())},redo:function(de){var _e=se(de.oldParentPathRedo),$e=se(de.newParentPathRedo),Xe=$e.childs[de.newIndexRedo]||$e.append;_e.childs.slice(de.oldIndexRedo,de.oldIndexRedo+de.count).forEach(function(ut,mt){ut.field=de.fieldNames[mt],$e.moveBefore(ut,Xe)})}},sort:{undo:function(de){var _e=se(de.path);_e.hideChilds(),_e.childs=de.oldChilds,_e.updateDom({updateIndexes:!0}),_e.showChilds()},redo:function(de){var _e=se(de.path);_e.hideChilds(),_e.childs=de.newChilds,_e.updateDom({updateIndexes:!0}),_e.showChilds()}},transform:{undo:function(de){se(de.path).setInternalValue(de.oldValue)},redo:function(de){se(de.path).setInternalValue(de.newValue)}}}}var pe,ge;return pe=oe,(ge=[{key:"onChange",value:function(){}},{key:"add",value:function(ie,se){this.index++,this.history[this.index]={action:ie,params:se,timestamp:new Date},this.index<this.history.length-1&&this.history.splice(this.index+1,this.history.length-this.index-1),this.onChange()}},{key:"clear",value:function(){this.history=[],this.index=-1,this.onChange()}},{key:"canUndo",value:function(){return 0<=this.index}},{key:"canRedo",value:function(){return this.index<this.history.length-1}},{key:"undo",value:function(){if(this.canUndo()){var ie=this.history[this.index];if(ie){var se=this.actions[ie.action];if(se&&se.undo){if(se.undo(ie.params),ie.params.oldSelection)try{this.editor.setDomSelection(ie.params.oldSelection)}catch(de){console.error(de)}}else console.error(new Error('unknown action "'+ie.action+'"'))}this.index--,this.onChange()}}},{key:"redo",value:function(){if(this.canRedo()){this.index++;var ie=this.history[this.index];if(ie){var se=this.actions[ie.action];if(se&&se.redo){if(se.redo(ie.params),ie.params.newSelection)try{this.editor.setDomSelection(ie.params.newSelection)}catch(de){console.error(de)}}else console.error(new Error('unknown action "'+ie.action+'"'))}this.onChange()}}},{key:"destroy",value:function(){this.editor=null,this.history=[],this.index=-1}}])&&j(pe.prototype,ge),Object.defineProperty(pe,"prototype",{writable:!1}),oe}();function N(oe){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(pe){return typeof pe}:function(pe){return pe&&"function"==typeof Symbol&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe})(oe)}function re(oe,pe){for(var ge=0;ge<pe.length;ge++){var be=pe[ge];be.enumerable=be.enumerable||!1,be.configurable=!0,"value"in be&&(be.writable=!0),Object.defineProperty(oe,(ie=function(se,de){if("object"!==N(se)||null===se)return se;var _e=se[Symbol.toPrimitive];if(void 0===_e)return String(se);if("object"!==N(_e=_e.call(se,"string")))return _e;throw new TypeError("@@toPrimitive must return a primitive value.")}(ie=be.key),"symbol"===N(ie)?ie:String(ie)),be)}var ie}var ue=function(){function oe(Xe,_e){if(!(this instanceof oe))throw new TypeError("Cannot call a class as a function");var de=this,$e=(this.editor=Xe,this.timeout=void 0,this.delay=200,this.lastText=void 0,this.results=null,this.dom={},this.dom.container=_e,Xe=document.createElement("div"),(this.dom.wrapper=Xe).className="jsoneditor-search",_e.appendChild(Xe),_e=document.createElement("div"),(this.dom.results=_e).className="jsoneditor-results",Xe.appendChild(_e),_e=document.createElement("div"),((this.dom.input=_e).className="jsoneditor-frame",_e.title=(0,H.Iu)("searchTitle"),Xe.appendChild(_e),Xe=document.createElement("button")).type="button",Xe.className="jsoneditor-refresh",_e.appendChild(Xe),document.createElement("input"));(($e.type="text",(this.dom.search=$e).oninput=function(ut){de._onDelayedSearch(ut)},$e.onchange=function(ut){de._onSearch()},$e.onkeydown=function(ut){de._onKeyDown(ut)},$e.onkeyup=function(ut){de._onKeyUp(ut)},Xe.onclick=function(ut){$e.select()},_e.appendChild($e),Xe=document.createElement("button")).type="button",Xe.title=(0,H.Iu)("searchNextResultTitle"),Xe.className="jsoneditor-next",Xe.onclick=function(){de.next()},_e.appendChild(Xe),Xe=document.createElement("button")).type="button",Xe.title=(0,H.Iu)("searchPreviousResultTitle"),Xe.className="jsoneditor-previous",Xe.onclick=function(){de.previous()},_e.appendChild(Xe)}var pe,ge;return pe=oe,(ge=[{key:"next",value:function(ie){var se;this.results&&((se=null!==this.resultIndex?this.resultIndex+1:0)>this.results.length-1&&(se=0),this._setActiveResult(se,ie))}},{key:"previous",value:function(ie){var se,de;this.results&&(se=this.results.length-1,this._setActiveResult(de=(de=null!==this.resultIndex?this.resultIndex-1:se)<0?se:de,ie))}},{key:"_setActiveResult",value:function(ie,se){var de,_e,$e;this.activeResult&&(de=this.activeResult.node,"field"===this.activeResult.elem?delete de.searchFieldActive:delete de.searchValueActive,de.updateDom()),this.results&&this.results[ie]?(this.resultIndex=ie,_e=this.results[this.resultIndex].node,"field"===($e=this.results[this.resultIndex].elem)?_e.searchFieldActive=!0:_e.searchValueActive=!0,this.activeResult=this.results[this.resultIndex],_e.updateDom(),_e.scrollTo(function(){se&&_e.focus($e)})):(this.resultIndex=void 0,this.activeResult=void 0)}},{key:"_clearDelay",value:function(){void 0!==this.timeout&&(clearTimeout(this.timeout),delete this.timeout)}},{key:"_onDelayedSearch",value:function(ie){this._clearDelay();var se=this;this.timeout=setTimeout(function(de){se._onSearch()},this.delay)}},{key:"_onSearch",value:function(ie){var se;if(this._clearDelay(),(se=0<(se=this.dom.search.value).length?se:void 0)!==this.lastText||ie){this.lastText=se,this.results=this.editor.search(se),ie=this.results[0]?this.results[0].node.MAX_SEARCH_RESULTS:1/0;var de=0;if(this.activeResult)for(var _e=0;_e<this.results.length;_e++)if(this.results[_e].node===this.activeResult.node){de=_e;break}this._setActiveResult(de,!1),this.dom.results.textContent=void 0!==se?0===(se=this.results.length)?"no\xa0results":1===se?"1\xa0result":ie<se?ie+"+\xa0results":se+"\xa0results":""}}},{key:"_onKeyDown",value:function(ie){var se=ie.which;27===se?(this.dom.search.value="",this._onSearch(),ie.preventDefault(),ie.stopPropagation()):13===se&&(ie.ctrlKey?this._onSearch(!0):ie.shiftKey?this.previous():this.next(),ie.preventDefault(),ie.stopPropagation())}},{key:"_onKeyUp",value:function(ie){var se=ie.keyCode;27!==se&&13!==se&&this._onDelayedSearch(ie)}},{key:"clear",value:function(){this.dom.search.value="",this._onSearch()}},{key:"forceSearch",value:function(){this._onSearch(!0)}},{key:"isEmpty",value:function(){return""===this.dom.search.value}},{key:"destroy",value:function(){this.editor=null,this.dom.container.removeChild(this.dom.wrapper),this.dom=null,this.results=null,this.activeResult=null,this._clearDelay()}}])&&re(pe.prototype,ge),Object.defineProperty(pe,"prototype",{writable:!1}),oe}();function ve(oe){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(pe){return typeof pe}:function(pe){return pe&&"function"==typeof Symbol&&pe.constructor===Symbol&&pe!==Symbol.prototype?"symbol":typeof pe})(oe)}function Ae(oe,pe){for(var ge=0;ge<pe.length;ge++){var be=pe[ge];be.enumerable=be.enumerable||!1,be.configurable=!0,"value"in be&&(be.writable=!0),Object.defineProperty(oe,(ie=function(se,de){if("object"!==ve(se)||null===se)return se;var _e=se[Symbol.toPrimitive];if(void 0===_e)return String(se);if("object"!==ve(_e=_e.call(se,"string")))return _e;throw new TypeError("@@toPrimitive must return a primitive value.")}(ie=be.key),"symbol"===ve(ie)?ie:String(ie)),be)}var ie}var Te=function(){function oe(ie,se){if(!(this instanceof oe))throw new TypeError("Cannot call a class as a function");ie&&(this.root=se,this.path=document.createElement("div"),this.path.className="jsoneditor-treepath",this.path.setAttribute("tabindex",0),this.contentMenuClicked=!1,ie.appendChild(this.path),this.reset())}var pe,ge;return pe=oe,(ge=[{key:"reset",value:function(){this.path.textContent=(0,H.Iu)("selectNode")}},{key:"setPath",value:function(ie){var se=this;this.path.textContent="",ie&&ie.length&&ie.forEach(function(de,_e){var $e,Xe=document.createElement("span");Xe.className="jsoneditor-treepath-element",Xe.innerText=de.name,Xe.onclick=function(ut){this.selectionCallback&&this.selectionCallback(ut)}.bind(se,de),se.path.appendChild(Xe),de.children.length&&(($e=document.createElement("span")).className="jsoneditor-treepath-seperator",$e.textContent="\u25ba",$e.onclick=function(){se.contentMenuClicked=!0;var ut=[];de.children.forEach(function(mt){ut.push({text:mt.name,className:"jsoneditor-type-modes"+(ie[_e+1]+1&&ie[_e+1].name===mt.name?" jsoneditor-selected":""),click:function(ct,Tt){this.contextMenuCallback&&this.contextMenuCallback(ct,Tt)}.bind(se,de,mt.name)})}),new c.x(ut,{limitHeight:!0}).show($e,se.root,!0)},se.path.appendChild($e)),_e===ie.length-1&&(Xe=($e||Xe).getBoundingClientRect().right,se.path.offsetWidth<Xe&&(se.path.scrollLeft=Xe),se.path.scrollLeft)&&((Xe=document.createElement("span")).className="jsoneditor-treepath-show-all-btn",Xe.title="show all path",Xe.textContent="...",Xe.onclick=function(ut){(se.contentMenuClicked=!1,R.addClassName)(se.path,"show-all"),se.path.style.width=se.path.parentNode.getBoundingClientRect().width-10+"px",se.path.onblur=function(){se.contentMenuClicked?(se.contentMenuClicked=!1,se.path.focus()):((0,R.removeClassName)(se.path,"show-all"),se.path.onblur=void 0,se.path.style.width="",se.setPath(ut))}}.bind(se,ie),se.path.insertBefore(Xe,se.path.firstChild))})}},{key:"onSectionSelected",value:function(ie){"function"==typeof ie&&(this.selectionCallback=ie)}},{key:"onContextMenuItemSelected",value:function(ie){"function"==typeof ie&&(this.contextMenuCallback=ie)}}])&&Ae(pe.prototype,ge),Object.defineProperty(pe,"prototype",{writable:!1}),oe}(),Me=(Re=Ie(8037),Ie.n(Re)),Ge=((Ie={}).create=function(oe,pe){if(!oe)throw new Error("No container element provided.");function ge(Ke){var Ze,Ct;document.createRange?((Ze=document.createRange()).selectNodeContents(Ke),Ze.collapse(!1),(Ct=window.getSelection()).removeAllRanges(),Ct.addRange(Ze)):document.selection&&((Ze=document.body.createTextRange()).moveToElementText(Ke),Ze.collapse(!1),Ze.select())}function be(Ke){return void 0===$e&&(($e=document.createElement("span")).style.visibility="hidden",$e.style.position="fixed",$e.style.outline="0",$e.style.margin="0",$e.style.padding="0",$e.style.border="0",$e.style.left="0",$e.style.whiteSpace="pre",$e.style.fontSize=ut,$e.style.fontFamily=mt,$e.style.fontWeight="normal",document.body.appendChild($e)),$e.textContent=Ke,$e.getBoundingClientRect().right}function ie(){this.style.backgroundColor="#ddd"}function se(){this.style.backgroundColor=""}function de(){pt.hide(),pt.onmouseselection(this.__hint,pt.rs)}var _e,$e,Xe,ut,mt,ct,Tt,St,Et,yn,ft,pt,vt,wt,Gt,Wt;this.container=oe,this.dom={},this.highlighter=new Y,this.selection=void 0,this.multiselection={nodes:[]},this.validateSchema=null,this.validationSequence=0,this.errorNodes=[],this.lastSchemaErrors=void 0,this.node=null,this.focusTarget=null,this._setOptions(pe),pe.autocomplete&&(this.autocomplete=((_e=(_e=pe.autocomplete)||{}).filter=_e.filter||"start",_e.trigger=_e.trigger||"keydown",_e.confirmKeys=_e.confirmKeys||[39,35,9],_e.caseSensitive=_e.caseSensitive||!1,mt=ut="",(ct=document.createElement("div")).style.position="relative",ct.style.outline="0",ct.style.border="0",ct.style.margin="0",ct.style.padding="0",(Tt=document.createElement("div")).className="autocomplete dropdown",Tt.style.position="absolute",Tt.style.visibility="hidden",St=Tt,Et=[],ft=-1,wt=pt={rs:vt={onArrowDown:function(){},onArrowUp:function(){},onEnter:function(){},onTab:function(){},startFrom:yn=0,options:[],element:null,elementHint:null,elementStyle:null,wrapper:ct,show:function(Ke,Ze,Ct){var Rt=this;this.startFrom=Ze,this.wrapper.remove(),this.elementHint&&(this.elementHint.remove(),this.elementHint=null),""===ut&&(ut=window.getComputedStyle(Ke).getPropertyValue("font-size")),""===mt&&(mt=window.getComputedStyle(Ke).getPropertyValue("font-family")),Tt.style.marginLeft="0",Tt.style.marginTop=Ke.getBoundingClientRect().height+"px",this.options=Ct.map(String),this.element!==Ke&&(this.element=Ke,this.elementStyle={zIndex:this.element.style.zIndex,position:this.element.style.position,backgroundColor:this.element.style.backgroundColor,borderColor:this.element.style.borderColor}),this.element.style.zIndex=3,this.element.style.position="relative",this.element.style.backgroundColor="transparent",this.element.style.borderColor="transparent",this.elementHint=Ke.cloneNode(),this.elementHint.className="autocomplete hint",this.elementHint.style.zIndex=2,this.elementHint.style.position="absolute",this.elementHint.onfocus=function(){Rt.element.focus()},this.element.addEventListener&&(this.element.removeEventListener("keydown",Gt),this.element.addEventListener("keydown",Gt,!1),this.element.removeEventListener("blur",Wt),this.element.addEventListener("blur",Wt,!1)),ct.appendChild(this.elementHint),ct.appendChild(Tt),Ke.parentElement.appendChild(ct),this.repaint(Ke)},setText:function(Ke){this.element.innerText=Ke},getText:function(){return this.element.innerText},hideDropDown:function(){this.wrapper.remove(),this.elementHint&&(this.elementHint.remove(),this.elementHint=null,wt.hide(),this.element.style.zIndex=this.elementStyle.zIndex,this.element.style.position=this.elementStyle.position,this.element.style.backgroundColor=this.elementStyle.backgroundColor,this.element.style.borderColor=this.elementStyle.borderColor)},repaint:function(Ze){Ze=(Ze=Ze.innerText).replace("\n","");var Ct=this.options.length,Rt=Ze.substring(this.startFrom);Xe=Ze.substring(0,this.startFrom);for(var yt=0;yt<Ct;yt++){var hn=this.options[yt];if(!_e.caseSensitive&&0===hn.toLowerCase().indexOf(Rt.toLowerCase())||_e.caseSensitive&&0===hn.indexOf(Rt)){this.elementHint.innerText=Xe+Rt+hn.substring(Rt.length),this.elementHint.realInnerText=Xe+hn;break}}Tt.style.left=be(Xe)+"px",wt.refresh(Rt,this.options),this.elementHint.style.width=be(this.elementHint.innerText)+10+"px","hidden"!==Tt.style.visibility&&(this.elementHint.style.width=be(this.elementHint.innerText)+Tt.clientWidth+"px")}},hide:function(){St.style.visibility="hidden"},refresh:function(Ke,Ze){St.style.visibility="hidden",yn=0,St.textContent="";var Rt=window.innerHeight||document.documentElement.clientHeight,Ct=(hn=St.parentNode.getBoundingClientRect()).top-6,yt=(Rt=Rt-hn.bottom-6,Et=[],"function"==typeof _e.filter?_e.filter:ce[_e.filter]),hn=yt?Ze.filter(function(Fe){return yt(_e.caseSensitive?Ke:Ke.toLowerCase(),_e.caseSensitive?Fe:Fe.toLowerCase(),_e)}):[];0===(Et=hn.map(function(Fe){var tt=document.createElement("div"),ot=(tt.className="item",tt.onmouseover=ie,tt.onmouseout=se,tt.onmousedown=de,tt.__hint=Fe,tt.textContent="",tt.appendChild(document.createTextNode(Fe.substring(0,Ke.length))),document.createElement("b"));return ot.appendChild(document.createTextNode(Fe.substring(Ke.length))),tt.appendChild(ot),St.appendChild(tt),tt})).length||1===Et.length&&(Ke.toLowerCase()===Et[0].__hint.toLowerCase()&&!_e.caseSensitive||Ke===Et[0].__hint&&_e.caseSensitive)||Et.length<2||(pt.highlight(0),3*Rt<Ct?(St.style.maxHeight=Ct+"px",St.style.top="",St.style.bottom="100%"):(St.style.top="100%",St.style.bottom="",St.style.maxHeight=Rt+"px"),St.style.visibility="visible")},highlight:function(Ke){-1!==ft&&Et[ft]&&(Et[ft].className="item"),Et[Ke].className="item hover",ft=Ke},move:function(Ke){return"hidden"===St.style.visibility?"":(yn+Ke!==-1&&yn+Ke!==Et.length&&pt.highlight(yn+=Ke),Et[yn].__hint)},onmouseselection:function(){}},Gt=function(Ke){var Ze=(Ke=Ke||window.event).keyCode;if(null!=this.elementHint&&33!==Ze&&34!==Ze)if(27===Ze)vt.hideDropDown(),vt.element.focus(),Ke.preventDefault(),Ke.stopPropagation();else{var Ct,Rt=(Rt=this.element.innerText).replace("\n","");if(0<=_e.confirmKeys.indexOf(Ze))9===Ze&&0===this.elementHint.innerText.length&&vt.onTab(),0<this.elementHint.innerText.length&&this.element.innerText!==this.elementHint.realInnerText&&(this.element.innerText=this.elementHint.realInnerText,vt.hideDropDown(),ge(this.element),9===Ze)&&(vt.element.focus(),Ke.preventDefault(),Ke.stopPropagation());else if(13===Ze)if(0===this.elementHint.innerText.length)vt.onEnter();else{var yt="hidden"===Tt.style.visibility;if(wt.hide(),yt)return vt.hideDropDown(),vt.element.focus(),void vt.onEnter();this.element.innerText=this.elementHint.realInnerText,vt.hideDropDown(),ge(this.element),Ke.preventDefault(),Ke.stopPropagation()}else 40===Ze?(yt=Rt.substring(this.startFrom),""===(Ct=wt.move(1))&&vt.onArrowDown(),this.elementHint.innerText=Xe+yt+Ct.substring(yt.length),this.elementHint.realInnerText=Xe+Ct,Ke.preventDefault(),Ke.stopPropagation()):38===Ze&&(yt=Rt.substring(this.startFrom),""===(Ct=wt.move(-1))&&vt.onArrowUp(),this.elementHint.innerText=Xe+yt+Ct.substring(yt.length),this.elementHint.realInnerText=Xe+Ct,Ke.preventDefault(),Ke.stopPropagation())}}.bind(vt),Wt=function(Ke){vt.hideDropDown()},wt.onmouseselection=function(Ke,Ze){Ze.element.innerText=Ze.elementHint.innerText=Xe+Ke,Ze.hideDropDown(),window.setTimeout(function(){Ze.element.focus(),ge(Ze.element)},1)},vt)),this.options.history&&"view"!==this.options.mode&&(this.history=new D(this)),this._createFrame(),this._createTable()},Ie.destroy=function(){this.frame&&this.container&&this.frame.parentNode===this.container&&(this.container.removeChild(this.frame),this.frame=null),this.container=null,this.dom=null,this.clear(),this.node=null,this.focusTarget=null,this.selection=null,this.multiselection=null,this.errorNodes=null,this.validateSchema=null,this._debouncedValidate=null,this.history&&(this.history.destroy(),this.history=null),this.searchBox&&(this.searchBox.destroy(),this.searchBox=null),this.modeSwitcher&&(this.modeSwitcher.destroy(),this.modeSwitcher=null),this.frameFocusTracker.destroy()},Ie._setOptions=function(oe){var pe=this;this.options={search:!0,history:!0,mode:"tree",name:void 0,schema:null,schemaRefs:null,autocomplete:null,navigationBar:!0,mainMenuBar:!0,limitDragging:!1,onSelectionChange:null,colorPicker:!0,onColorPicker:function(ge,be,ie){var se;Me()?(se=ge.getBoundingClientRect().top,se=(0,R.getWindow)(ge).innerHeight-se<300&&300<se,new(Me())({parent:ge,color:be,popup:se?"top":"bottom",onDone:function(de){de=1===de.rgba[3]?de.hex.substr(0,7):de.hex,ie(de)}}).show()):console.warn("Cannot open color picker: the `vanilla-picker` library is not included in the bundle. Either use the full bundle or implement your own color picker using `onColorPicker`.")},timestampTag:!0,timestampFormat:null,createQuery:F.r,executeQuery:F.J,onEvent:null,enableSort:!0,enableTransform:!0},oe&&(Object.keys(oe).forEach(function(ge){pe.options[ge]=oe[ge]}),null==oe.limitDragging)&&null!=oe.schema&&(this.options.limitDragging=!0),this.setSchema(this.options.schema,this.options.schemaRefs),this._debouncedValidate=(0,R.debounce)(this._validateAndCatch.bind(this),this.DEBOUNCE_INTERVAL),oe.onSelectionChange&&this.onSelectionChange(oe.onSelectionChange),(0,H.cC)(this.options.languages),(0,H.m0)(this.options.language)},Ie.set=function(oe){oe instanceof Function||void 0===oe?this.clear():(this.content.removeChild(this.table),oe=new x(this,oe={field:this.options.name,value:oe}),this._setRoot(oe),this._validateAndCatch(),this.node.expand(!1),this.content.appendChild(this.table)),this.history&&this.history.clear(),this.searchBox&&this.searchBox.clear()},Ie.update=function(oe){var pe,ge;this.node.deepEqual(oe)||(pe=this.getSelection(),this.onChangeDisabled=!0,this.node.update(oe),this.onChangeDisabled=!1,this._validateAndCatch(),this.searchBox&&!this.searchBox.isEmpty()&&this.searchBox.forceSearch(),pe&&pe.start&&pe.end&&(oe=this.node.findNodeByPath(pe.start.path),ge=this.node.findNodeByPath(pe.end.path),oe)&&ge?this.setSelection(pe.start,pe.end):this.setSelection({},{}))},Ie.get=function(){if(this.node)return this.node.getValue()},Ie.getText=function(){return JSON.stringify(this.get())},Ie.setText=function(oe){try{this.set((0,R.parse)(oe))}catch{oe=(0,R.tryJsonRepair)(oe),this.set((0,R.parse)(oe))}},Ie.updateText=function(oe){try{this.update((0,R.parse)(oe))}catch{oe=(0,R.tryJsonRepair)(oe),this.update((0,R.parse)(oe))}},Ie.setName=function(oe){this.options.name=oe,this.node&&this.node.updateField(this.options.name)},Ie.getName=function(){return this.options.name},Ie.focus=function(){var oe=this.scrollableContent.querySelector("[contenteditable=true]");oe?oe.focus():this.node.dom.expand?this.node.dom.expand.focus():this.node.dom.menu?this.node.dom.menu.focus():(oe=this.frame.querySelector("button"))&&oe.focus()},Ie.clear=function(){this.node&&(this.node.hide(),delete this.node),this.treePath&&this.treePath.reset()},Ie._setRoot=function(oe){this.clear(),(this.node=oe).setParent(null),oe.setField(this.getName(),!1),delete oe.index,this.tbody.appendChild(oe.getDom())},Ie.search=function(oe){var pe;return this.node?(this.content.removeChild(this.table),pe=this.node.search(oe),this.content.appendChild(this.table)):pe=[],pe},Ie.expandAll=function(){this.node&&(this.content.removeChild(this.table),this.node.expand(),this.content.appendChild(this.table))},Ie.collapseAll=function(){this.node&&(this.content.removeChild(this.table),this.node.collapse(),this.content.appendChild(this.table))},Ie.expand=function(oe){var pe;oe&&(pe=this.node?this.node.findNodeByPath(oe.path):null)&&(oe.isExpand?pe.expand(oe.recursive):pe.collapse(oe.recursive))},Ie._onAction=function(oe,pe){this.history&&this.history.add(oe,pe),this._onChange()},Ie._onChange=function(){if(!this.onChangeDisabled){var oe;if(this.selection=this.getDomSelection(),this._debouncedValidate(),this.treePath&&((oe=this.node&&this.selection?this.node.findNodeByInternalPath(this.selection.path):this.multiselection?this.multiselection.nodes[0]:void 0)?this._updateTreePath(oe.getNodePath()):this.treePath.reset()),this.options.onChange)try{this.options.onChange()}catch(pe){console.error("Error in onChange callback: ",pe)}if(this.options.onChangeJSON)try{this.options.onChangeJSON(this.get())}catch(pe){console.error("Error in onChangeJSON callback: ",pe)}if(this.options.onChangeText)try{this.options.onChangeText(this.getText())}catch(pe){console.error("Error in onChangeText callback: ",pe)}if(this.options.onClassName&&this.node.recursivelyUpdateCssClassesOnNodes(),this.options.onNodeName&&this.node.childs)try{this.node.recursivelyUpdateNodeName()}catch(pe){console.error("Error in onNodeName callback: ",pe)}}},Ie.validate=function(){var oe=this,pe=this.node;if(pe){var ge=pe.getValue(),be=[];this.validateSchema&&!this.validateSchema(ge)&&(be=this.validateSchema.errors.map(function(de){return(0,R.improveSchemaError)(de)}).map(function(de){return{node:pe.findNode(de.dataPath),error:de,type:"validation"}}).filter(function(de){return null!=de.node}));try{this.validationSequence++;var ie=this,se=this.validationSequence;return this._validateCustom(ge).then(function(de){return se===ie.validationSequence&&(de=[].concat(be,de||[]),ie._renderValidationErrors(de),"function"==typeof oe.options.onValidationError&&(0,R.isValidationErrorChanged)(de,oe.lastSchemaErrors)&&oe.options.onValidationError.call(oe,de),oe.lastSchemaErrors=de),oe.lastSchemaErrors})}catch(de){return Promise.reject(de)}}},Ie._validateAndCatch=function(){this.validate().catch(function(oe){console.error("Error running validation:",oe)})},Ie._renderValidationErrors=function(oe){this.errorNodes&&this.errorNodes.forEach(function(ge){ge.setError(null)});var pe=oe.reduce(function(ge,be){return be.node.findParents().filter(function(ie){return!ge.some(function(se){return se[0]===ie})}).map(function(ie){return[ie,be.node]}).concat(ge)},[]);this.errorNodes=pe.map(function(ge){return{node:ge[0],child:ge[1],error:{message:(0,H.Iu)("object"===ge[0].type?"containsInvalidProperties":"containsInvalidItems")}}}).concat(oe).map(function(ge){return ge.node.setError(ge.error,ge.child),ge.node})},Ie._validateCustom=function(oe){try{var pe,ge;if(this.options.onValidate)return pe=this.node,ge=this.options.onValidate(oe),((0,R.isPromise)(ge)?ge:Promise.resolve(ge)).then(function(be){return Array.isArray(be)?be.filter(function(ie){var se=(0,R.isValidValidationError)(ie);return se||console.warn('Ignoring a custom validation error with invalid structure. Expected structure: {path: [...], message: "..."}. Actual error:',ie),se}).map(function(ie){var se;try{se=ie&&ie.path?pe.findNodeByPath(ie.path):null}catch{}return se||console.warn("Ignoring validation error: node not found. Path:",ie.path,"Error:",ie),{node:se,error:ie,type:"customValidation"}}).filter(function(ie){return ie&&ie.node&&ie.error&&ie.error.message}):null})}catch(be){return Promise.reject(be)}return Promise.resolve(null)},Ie.refresh=function(){this.node&&this.node.updateDom({recurse:!0})},Ie.startAutoScroll=function(oe){var pe=this,ge=this.scrollableContent,be=(0,R.getAbsoluteTop)(ge),ie=ge.clientHeight,se=be+ie;this.autoScrollStep=oe<be+24&&0<ge.scrollTop?(be+24-oe)/3:se-24<oe&&ie+ge.scrollTop<ge.scrollHeight?(se-24-oe)/3:void 0,this.autoScrollStep?this.autoScrollTimer||(this.autoScrollTimer=setInterval(function(){pe.autoScrollStep?ge.scrollTop-=pe.autoScrollStep:pe.stopAutoScroll()},50)):this.stopAutoScroll()},Ie.stopAutoScroll=function(){this.autoScrollTimer&&(clearTimeout(this.autoScrollTimer),delete this.autoScrollTimer),this.autoScrollStep&&delete this.autoScrollStep},Ie.setDomSelection=function(oe){var pe,ge,be;oe&&("scrollTop"in oe&&this.scrollableContent&&(this.scrollableContent.scrollTop=oe.scrollTop),oe.paths?(pe=this,ge=oe.paths.map(function(ie){return pe.node.findNodeByInternalPath(ie)}),this.select(ge)):(be=(ge=oe.path?this.node.findNodeByInternalPath(oe.path):null)&&oe.domName?ge.dom[oe.domName]:null,oe.range&&be?(oe=Object.assign({},oe.range,{container:be}),(0,R.setSelectionOffset)(oe)):ge&&ge.focus()))},Ie.getDomSelection=function(){var oe=x.getNodeFromTarget(this.focusTarget),pe=this.focusTarget,ge=oe?Object.keys(oe.dom).find(function(ie){return oe.dom[ie]===pe}):null,be=(0,R.getSelectionOffset)();return(be=(be=be&&"DIV"!==be.container.nodeName?null:be)&&be.container!==pe?null:be)&&delete be.container,{path:oe?oe.getInternalPath():null,domName:ge,range:be,paths:0<this.multiselection.length?this.multiselection.nodes.map(function(ie){return ie.getInternalPath()}):null,scrollTop:this.scrollableContent?this.scrollableContent.scrollTop:0}},Ie.scrollTo=function(oe,pe){var ge,be,ie,se,de=this.scrollableContent;de?((ge=this).animateTimeout&&(clearTimeout(ge.animateTimeout),delete ge.animateTimeout),ge.animateCallback&&(ge.animateCallback(!1),delete ge.animateCallback),ie=de.scrollHeight-(be=de.clientHeight),se=Math.min(Math.max(oe-be/4,0),ie),function _e(){var $e=se-($e=de.scrollTop);3<Math.abs($e)?(de.scrollTop+=$e/3,ge.animateCallback=pe,ge.animateTimeout=setTimeout(_e,50)):(pe&&pe(!0),de.scrollTop=se,delete ge.animateTimeout,delete ge.animateCallback)}()):pe&&pe(!1)},Ie._createFrame=function(){var oe=this,pe=(this.frame=document.createElement("div"),this.frame.className="jsoneditor jsoneditor-mode-"+this.options.mode,this.container.appendChild(this.frame),this.contentOuter=document.createElement("div"),this.contentOuter.className="jsoneditor-outer",this);function ge(_e){pe._onEvent&&pe._onEvent(_e)}var be,ie,se,de={target:this.frame,onFocus:this.options.onFocus||null,onBlur:this.options.onBlur||null};this.frameFocusTracker=new K.R(de),this.frame.onclick=function(_e){var $e=_e.target;ge(_e),"BUTTON"===$e.nodeName&&_e.preventDefault()},this.frame.oninput=ge,this.frame.onchange=ge,this.frame.onkeydown=ge,this.frame.onkeyup=ge,this.frame.oncut=ge,this.frame.onpaste=ge,this.frame.onmousedown=ge,this.frame.onmouseup=ge,this.frame.onmouseover=ge,this.frame.onmouseout=ge,(0,R.addEventListener)(this.frame,"focus",ge,!0),(0,R.addEventListener)(this.frame,"blur",ge,!0),this.frame.onfocusin=ge,this.frame.onfocusout=ge,this.options.mainMenuBar&&((0,R.addClassName)(this.contentOuter,"has-main-menu-bar"),this.menu=document.createElement("div"),this.menu.className="jsoneditor-menu",this.frame.appendChild(this.menu),(de=document.createElement("button")).type="button",de.className="jsoneditor-expand-all",de.title=(0,H.Iu)("expandAll"),de.onclick=function(){pe.expandAll(),"function"==typeof oe.options.onExpand&&oe.options.onExpand({path:[],isExpand:!0,recursive:!0})},this.menu.appendChild(de),(de=document.createElement("button")).type="button",de.title=(0,H.Iu)("collapseAll"),de.className="jsoneditor-collapse-all",de.onclick=function(){pe.collapseAll(),"function"==typeof oe.options.onExpand&&oe.options.onExpand({path:[],isExpand:!1,recursive:!0})},this.menu.appendChild(de),this.options.enableSort&&((de=document.createElement("button")).type="button",de.className="jsoneditor-sort",de.title=(0,H.Iu)("sortTitleShort"),de.onclick=function(){pe.node.showSortModal()},this.menu.appendChild(de)),this.options.enableTransform&&((de=document.createElement("button")).type="button",de.title=(0,H.Iu)("transformTitleShort"),de.className="jsoneditor-transform",de.onclick=function(){pe.node.showTransformModal()},this.menu.appendChild(de)),this.history&&((be=document.createElement("button")).type="button",be.className="jsoneditor-undo jsoneditor-separator",be.title=(0,H.Iu)("undo"),be.onclick=function(){pe._onUndo()},this.menu.appendChild(be),this.dom.undo=be,(ie=document.createElement("button")).type="button",ie.className="jsoneditor-redo",ie.title=(0,H.Iu)("redo"),ie.onclick=function(){pe._onRedo()},this.menu.appendChild(ie),this.dom.redo=ie,this.history.onChange=function(){be.disabled=!pe.history.canUndo(),ie.disabled=!pe.history.canRedo()},this.history.onChange()),this.options&&this.options.modes&&this.options.modes.length&&((se=this).modeSwitcher=new k.x(this.menu,this.options.modes,this.options.mode,function(_e){try{se.setMode(_e),se.modeSwitcher.focus()}catch($e){se._onError($e)}})),this.options.search)&&(this.searchBox=new ue(this,this.menu)),this.options.navigationBar&&(this.navBar=document.createElement("div"),this.navBar.className="jsoneditor-navigation-bar nav-bar-empty",this.frame.appendChild(this.navBar),this.treePath=new Te(this.navBar,this.getPopupAnchor()),this.treePath.onSectionSelected(this._onTreePathSectionSelected.bind(this)),this.treePath.onContextMenuItemSelected(this._onTreePathMenuItemSelected.bind(this)))},Ie._onUndo=function(){this.history&&(this.history.undo(),this._onChange())},Ie._onRedo=function(){this.history&&(this.history.redo(),this._onChange())},Ie._onEvent=function(oe){if(!x.targetIsColorPicker(oe.target)){var pe,ge=x.getNodeFromTarget(oe.target);if("keydown"===oe.type&&this._onKeyDown(oe),ge&&"focus"===oe.type&&(this.focusTarget=oe.target,this.options.autocomplete)&&"focus"===this.options.autocomplete.trigger&&this._showAutoComplete(oe.target),"mousedown"===oe.type&&this._startDragDistance(oe),"mousemove"!==oe.type&&"mouseup"!==oe.type&&"click"!==oe.type||this._updateDragDistance(oe),ge&&this.options&&this.options.navigationBar&&ge&&("keydown"===oe.type||"mousedown"===oe.type)&&(pe=this,setTimeout(function(){pe._updateTreePath(ge.getNodePath())})),ge&&ge.selected){if("click"===oe.type){if(oe.target===ge.dom.menu)return void this.showContextMenu(oe.target);oe.hasMoved||this.deselect()}"mousedown"===oe.type&&x.onDragStart(this.multiselection.nodes,oe)}else"mousedown"===oe.type&&(0,R.hasParentNode)(oe.target,this.content)&&(this.deselect(),ge&&oe.target===ge.dom.drag?x.onDragStart(ge,oe):ge&&(oe.target===ge.dom.field||oe.target===ge.dom.value||oe.target===ge.dom.select)||this._onMultiSelectStart(oe));ge&&ge.onEvent(oe)}},Ie._updateTreePath=function(oe){var pe;function ge(be){return be.parent?"array"===be.parent.type?be.index:be.field:be.field||be.type}oe&&oe.length?((0,R.removeClassName)(this.navBar,"nav-bar-empty"),pe=[],oe.forEach(function(be){var ie={name:ge(be),node:be,children:[]};be.childs&&be.childs.length&&be.childs.forEach(function(se){ie.children.push({name:ge(se),node:se})}),pe.push(ie)}),this.treePath.setPath(pe)):(0,R.addClassName)(this.navBar,"nav-bar-empty")},Ie._onTreePathSectionSelected=function(oe){oe&&oe.node&&(oe.node.expandTo(),oe.node.focus())},Ie._onTreePathMenuItemSelected=function(oe,pe){oe&&oe.children.length&&(oe=oe.children.find(function(ge){return ge.name===pe}))&&oe.node&&(this._updateTreePath(oe.node.getNodePath()),oe.node.expandTo(),oe.node.focus())},Ie._startDragDistance=function(oe){this.dragDistanceEvent={initialTarget:oe.target,initialPageX:oe.pageX,initialPageY:oe.pageY,dragDistance:0,hasMoved:!1}},Ie._updateDragDistance=function(oe){this.dragDistanceEvent||this._startDragDistance(oe);var pe=oe.pageX-this.dragDistanceEvent.initialPageX,ge=oe.pageY-this.dragDistanceEvent.initialPageY;return this.dragDistanceEvent.dragDistance=Math.sqrt(pe*pe+ge*ge),this.dragDistanceEvent.hasMoved=this.dragDistanceEvent.hasMoved||10<this.dragDistanceEvent.dragDistance,oe.dragDistance=this.dragDistanceEvent.dragDistance,oe.hasMoved=this.dragDistanceEvent.hasMoved,oe.dragDistance},Ie._onMultiSelectStart=function(oe){var pe,ge=x.getNodeFromTarget(oe.target);"tree"===this.options.mode&&void 0===this.options.onEditable&&(this.multiselection={start:ge||null,end:null,nodes:[]},this._startDragDistance(oe),(pe=this).mousemove||(this.mousemove=(0,R.addEventListener)(oe.view,"mousemove",function(be){pe._onMultiSelect(be)})),this.mouseup||(this.mouseup=(0,R.addEventListener)(oe.view,"mouseup",function(be){pe._onMultiSelectEnd(be)})),oe.preventDefault())},Ie._onMultiSelect=function(oe){var pe;oe.preventDefault(),this._updateDragDistance(oe),oe.hasMoved&&((oe=x.getNodeFromTarget(oe.target))&&(null==this.multiselection.start&&(this.multiselection.start=oe),this.multiselection.end=oe),this.deselect(),pe=this.multiselection.end||this.multiselection.start,oe=this.multiselection.start)&&pe&&(this.multiselection.nodes=this._findTopLevelNodes(oe,pe),this.multiselection.nodes&&this.multiselection.nodes.length&&(this.multiselection.direction=this.multiselection.start===(oe=this.multiselection.nodes[0])||this.multiselection.start.isDescendantOf(oe)?"down":"up"),this.select(this.multiselection.nodes))},Ie._onMultiSelectEnd=function(oe){var pe=this.multiselection.nodes[0];pe&&pe.dom.menu&&pe.dom.menu.focus(),this.multiselection.start=null,this.multiselection.end=null,this.mousemove&&((0,R.removeEventListener)(oe.view,"mousemove",this.mousemove),delete this.mousemove),this.mouseup&&((0,R.removeEventListener)(oe.view,"mouseup",this.mouseup),delete this.mouseup)},Ie.deselect=function(oe){var pe=!!this.multiselection.nodes.length;this.multiselection.nodes.forEach(function(ge){ge.setSelected(!1)}),this.multiselection.nodes=[],oe&&(this.multiselection.start=null,this.multiselection.end=null),pe&&this._selectionChangedHandler&&this._selectionChangedHandler()},Ie.select=function(oe){if(!Array.isArray(oe))return this.select([oe]);var pe;oe&&(this.deselect(),this.multiselection.nodes=oe.slice(0),pe=oe[0],oe.forEach(function(ge){ge.expandPathToNode(),ge.setSelected(!0,ge===pe)}),this._selectionChangedHandler)&&(oe=this.getSelection(),this._selectionChangedHandler(oe.start,oe.end))},Ie._findTopLevelNodes=function(de,_e){for(var ge=de.getNodePath(),be=_e.getNodePath(),ie=0;ie<ge.length&&ge[ie]===be[ie];)ie++;de=ge[ie-1];var se,$e=be[ie];return(_e=ge[ie])&&$e||(de.parent?de=($e=_e=de).parent:(_e=de.childs[0],$e=de.childs[de.childs.length-1])),de&&_e&&$e?(_e=de.childs.indexOf(_e),$e=de.childs.indexOf($e),se=Math.min(_e,$e),_e=Math.max(_e,$e),de.childs.slice(se,_e+1)):[]},Ie._showAutoComplete=function(oe){var pe,ge=x.getNodeFromTarget(oe),be="";0<=oe.className.indexOf("jsoneditor-value")&&(be="value"),""!==(be=0<=oe.className.indexOf("jsoneditor-field")?"field":be)&&(pe=this,setTimeout(function(){var ie;ge&&("focus"===pe.options.autocomplete.trigger||0<oe.innerText.length)&&null!==(ie=pe.options.autocomplete.getOptions(oe.innerText,ge.getPath(),be,ge.editor))?"function"==typeof ie.then?ie.then(function(se){null===se?pe.autocomplete.hideDropDown():se.options?pe.autocomplete.show(oe,se.startFrom,se.options):pe.autocomplete.show(oe,0,se)}).catch(function(se){console.error(se)}):ie.options?pe.autocomplete.show(oe,ie.startFrom,ie.options):pe.autocomplete.show(oe,0,ie):pe.autocomplete.hideDropDown()},50))},Ie._onKeyDown=function(oe){var pe,ge=oe.which||oe.keyCode,be=oe.altKey,ie=oe.ctrlKey,se=oe.metaKey,de=oe.shiftKey,_e=!1,$e=this.focusTarget;9===ge&&(pe=this,setTimeout(function(){pe.focusTarget!==$e&&(0,R.selectContentEditable)(pe.focusTarget)},0)),this.searchBox&&(ie&&70===ge?(this.searchBox.dom.search.focus(),this.searchBox.dom.search.select(),_e=!0):(114===ge||ie&&71===ge)&&(de?this.searchBox.previous(!0):this.searchBox.next(!0),_e=!0)),this.history&&(ie&&!de&&90===ge?(this._onUndo(),_e=!0):ie&&de&&90===ge&&(this._onRedo(),_e=!0)),!this.options.autocomplete||_e||ie||be||se||1!==oe.key.length&&8!==ge&&46!==ge||(_e=!1,this._showAutoComplete(oe.target)),_e&&(oe.preventDefault(),oe.stopPropagation())},Ie._createTable=function(){var oe;this.options.navigationBar&&(0,R.addClassName)(this.contentOuter,"has-nav-bar"),this.scrollableContent=document.createElement("div"),this.scrollableContent.className="jsoneditor-tree",this.contentOuter.appendChild(this.scrollableContent),this.content=document.createElement("div"),this.content.className="jsoneditor-tree-inner",this.scrollableContent.appendChild(this.content),this.table=document.createElement("table"),this.table.className="jsoneditor-tree",this.content.appendChild(this.table),this.colgroupContent=document.createElement("colgroup"),"tree"===this.options.mode&&((oe=document.createElement("col")).width="24px",this.colgroupContent.appendChild(oe)),(oe=document.createElement("col")).width="24px",this.colgroupContent.appendChild(oe),oe=document.createElement("col"),this.colgroupContent.appendChild(oe),this.table.appendChild(this.colgroupContent),this.tbody=document.createElement("tbody"),this.table.appendChild(this.tbody),this.frame.appendChild(this.contentOuter)},Ie.showContextMenu=function(oe,pe){var ge,be=[],ie=this.multiselection.nodes.slice();be.push({text:(0,H.Iu)("duplicateText"),title:(0,H.Iu)("duplicateTitle"),className:"jsoneditor-duplicate",click:function(){x.onDuplicate(ie)}}),be.push({text:(0,H.Iu)("remove"),title:(0,H.Iu)("removeTitle"),className:"jsoneditor-remove",click:function(){x.onRemove(ie)}}),this.options.onCreateMenu&&(ge=ie.map(function(se){return se.getPath()}),be=this.options.onCreateMenu(be,{type:"multiple",path:ge[0],paths:ge})),new c.x(be,{close:pe}).show(oe,this.getPopupAnchor())},Ie.getPopupAnchor=function(){return this.options.popupAnchor||this.frame},Ie.getSelection=function(){var oe,pe,ge={start:null,end:null};return this.multiselection.nodes&&this.multiselection.nodes.length&&this.multiselection.nodes.length&&(oe=this.multiselection.nodes[0],pe=this.multiselection.nodes[this.multiselection.nodes.length-1],"down"===this.multiselection.direction?(ge.start=oe.serialize(),ge.end=pe.serialize()):(ge.start=pe.serialize(),ge.end=oe.serialize())),ge},Ie.onSelectionChange=function(oe){"function"==typeof oe&&(this._selectionChangedHandler=(0,R.debounce)(oe,this.DEBOUNCE_INTERVAL))},Ie.setSelection=function(oe,pe){oe&&oe.dom&&oe.range&&(console.warn("setSelection/getSelection usage for text selection is deprecated and should not be used, see documentation for supported selection options"),this.setDomSelection(oe)),(oe=this._getNodeInstancesByRange(oe,pe)).forEach(function(ge){ge.expandTo()}),this.select(oe)},Ie._getNodeInstancesByRange=function(oe,pe){oe&&oe.path&&(ge=this.node.findNodeByPath(oe.path),pe)&&pe.path&&(be=this.node.findNodeByPath(pe.path));var ge,be,ie=[];if(ge instanceof x)if(be instanceof x&&be!==ge)if(ge.parent===be.parent){pe=ge.getIndex()<be.getIndex()?(oe=ge,be):(oe=be,ge);var se=oe;for(ie.push(se);se=se.nextSibling(),ie.push(se),se&&se!==pe;);}else ie=this._findTopLevelNodes(ge,be);else ie.push(ge);return ie},Ie.getNodesByRange=function(ge,pe){ge=this._getNodeInstancesByRange(ge,pe);var be=[];return ge.forEach(function(ie){be.push(ie.serialize())}),be},[{mode:"tree",mixin:Ie,data:"json"},{mode:"view",mixin:Ie,data:"json"},{mode:"form",mixin:Ie,data:"json"}])},2744:function(Ce,P,ae){P.tryRequireAjv=function(){try{return ae(8903)}catch{}}},9125:function(Ce,P,ae){P.O=function(){try{ae(4864)}catch(ce){console.error(ce)}}},9791:function(Ce,ce,ae){"use strict";ae.r(ce),ae.d(ce,{addClassName:function(){return Q},addEventListener:function(){return Re},asyncExec:function(){return yt},clear:function(){return f},compileJSONPointer:function(){return ut},contains:function(){return Ze},debounce:function(){return se},escapeUnicodeChars:function(){return y},extend:function(){return p},findUniqueName:function(){return Et},formatSize:function(){return Gt},get:function(){return St},getAbsoluteLeft:function(){return x},getAbsoluteTop:function(){return L},getChildPaths:function(){return yn},getColorCSS:function(){return mt},getIndexForPosition:function(){return $e},getInnerText:function(){return N},getInputSelection:function(){return _e},getInternetExplorerVersion:function(){return ve},getPositionForPath:function(){return Xe},getSelection:function(){return q},getSelectionOffset:function(){return j},getType:function(){return m},getWindow:function(){return C},hasParentNode:function(){return ue},improveSchemaError:function(){return pe},insideRect:function(){return ie},isArray:function(){return O},isChildOf:function(){return Ie},isFirefox:function(){return Te},isObject:function(){return Ke},isPromise:function(){return ge},isTimestamp:function(){return wt},isUrl:function(){return v},isValidColor:function(){return ct},isValidValidationError:function(){return be},isValidationErrorChanged:function(){return Ct},limitCharacters:function(){return Wt},makeFieldTooltip:function(){return Tt},parse:function(){return R},parsePath:function(){return Ge},parseString:function(){return vt},removeAllClassNames:function(){return G},removeClassName:function(){return T},removeEventListener:function(){return Me},removeReturnsAndSurroundingWhitespace:function(){return re},selectContentEditable:function(){return X},setEndOfContentEditable:function(){return J},setSelection:function(){return ee},setSelectionOffset:function(){return D},sort:function(){return ft},sortObjectKeys:function(){return pt},stringifyPath:function(){return oe},stripFormatting:function(){return V},textDiff:function(){return de},tryJsonRepair:function(){return S},uniqueMergeArrays:function(){return Rt},validate:function(){return w}}),ae(4987),ce=ae(233);var c=ae.n(ce),K=ae(1262),U=ae(6589),Z=ae(7026),Y=ae(7907);function F(Fe,tt){(null==tt||tt>Fe.length)&&(tt=Fe.length);for(var ot=0,It=new Array(tt);ot<tt;ot++)It[ot]=Fe[ot];return It}function k(Fe){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(tt){return typeof tt}:function(tt){return tt&&"function"==typeof Symbol&&tt.constructor===Symbol&&tt!==Symbol.prototype?"symbol":typeof tt})(Fe)}var _=1e4,M=9466848e5;function R(Fe){try{return JSON.parse(Fe)}catch(tt){throw w(Fe),tt}}function S(Fe){try{return(0,K.K)(Fe)}catch{return Fe}}function y(Fe){return Fe.replace(/[\u007F-\uFFFF]/g,function(tt){return"\\u"+("0000"+tt.charCodeAt(0).toString(16)).slice(-4)})}function w(Fe){(void 0!==U?U:JSON).parse(Fe)}function p(Fe,tt){for(var ot in tt)hn(tt,ot)&&(Fe[ot]=tt[ot]);return Fe}function f(Fe){for(var tt in Fe)hn(Fe,tt)&&delete Fe[tt];return Fe}function m(Fe){return null===Fe?"null":void 0===Fe?"undefined":Fe instanceof Number||"number"==typeof Fe?"number":Fe instanceof String||"string"==typeof Fe?"string":Fe instanceof Boolean||"boolean"==typeof Fe?"boolean":Fe instanceof RegExp?"regexp":O(Fe)?"array":"object"}var h=/^https?:\/\/\S+$/;function v(Fe){return("string"==typeof Fe||Fe instanceof String)&&h.test(Fe)}function O(Fe){return"[object Array]"===Object.prototype.toString.call(Fe)}function C(Fe){return Fe.ownerDocument.defaultView}function x(Fe){return Fe.getBoundingClientRect().left+window.pageXOffset||document.scrollLeft||0}function L(Fe){return Fe.getBoundingClientRect().top+window.pageYOffset||document.scrollTop||0}function Q(Fe,tt){var ot=Fe.className.split(" ");-1===ot.indexOf(tt)&&(ot.push(tt),Fe.className=ot.join(" "))}function G(Fe){Fe.className=""}function T(Fe,It){var ot=Fe.className.split(" ");-1!==(It=ot.indexOf(It))&&(ot.splice(It,1),Fe.className=ot.join(" "))}function V(Fe){for(var tt=Fe.childNodes,ot=0,It=tt.length;ot<It;ot++){var Ut=tt[ot],Vt=(Ut.style&&Ut.removeAttribute("style"),Ut.attributes);if(Vt)for(var pn=Vt.length-1;0<=pn;pn--){var Mn=Vt[pn];!0===Mn.specified&&Ut.removeAttribute(Mn.name)}V(Ut)}}function J(Fe){var tt;document.createRange&&((tt=document.createRange()).selectNodeContents(Fe),tt.collapse(!1),(Fe=window.getSelection()).removeAllRanges(),Fe.addRange(tt))}function X(Fe){var tt;Fe&&"DIV"===Fe.nodeName&&window.getSelection&&document.createRange&&((tt=document.createRange()).selectNodeContents(Fe),(Fe=window.getSelection()).removeAllRanges(),Fe.addRange(tt))}function q(){if(window.getSelection){var Fe=window.getSelection();if(Fe.getRangeAt&&Fe.rangeCount)return Fe.getRangeAt(0)}return null}function ee(Fe){var tt;Fe&&window.getSelection&&((tt=window.getSelection()).removeAllRanges(),tt.addRange(Fe))}function j(){var Fe=q();return Fe&&"startOffset"in Fe&&"endOffset"in Fe&&Fe.startContainer&&Fe.startContainer===Fe.endContainer?{startOffset:Fe.startOffset,endOffset:Fe.endOffset,container:Fe.startContainer.parentNode}:null}function D(Fe){var tt;document.createRange&&window.getSelection&&window.getSelection()&&(tt=document.createRange(),Fe.container.firstChild||Fe.container.appendChild(document.createTextNode("")),tt.setStart(Fe.container.firstChild,Fe.startOffset),tt.setEnd(Fe.container.firstChild,Fe.endOffset),ee(tt))}function N(Fe,tt){var ot;if(void 0===tt&&(tt={_text:"",flush:function(){var ir=this._text;return this._text="",ir},set:function(ir){this._text=ir}}),Fe.nodeValue)return""!==(ot=re(Fe.nodeValue))?tt.flush()+ot:"";if(Fe.hasChildNodes()){for(var It=Fe.childNodes,Ut="",Vt=0,pn=It.length;Vt<pn;Vt++){var Mn,jt=It[Vt];"DIV"===jt.nodeName||"P"===jt.nodeName?((Mn=(Mn=It[Vt-1])?Mn.nodeName:void 0)&&"DIV"!==Mn&&"P"!==Mn&&"BR"!==Mn&&(""!==Ut&&(Ut+="\n"),tt.flush()),Ut+=N(jt,tt),tt.set("\n")):"BR"===jt.nodeName?(Ut+=tt.flush(),tt.set("\n")):Ut+=N(jt,tt)}return Ut}return""}function re(Fe){return Fe.replace(/(\b|^)\s*(\b|$)/g,function(tt){return/\n/.exec(tt)?"":tt})}function ue(Fe,tt){for(var ot=Fe?Fe.parentNode:void 0;ot;){if(ot===tt)return!0;ot=ot.parentNode}return!1}function ve(){var Fe;return-1===Ae&&(Fe=-1,typeof navigator<"u"&&"Microsoft Internet Explorer"===navigator.appName&&null!=/MSIE ([0-9]+[.0-9]+)/.exec(navigator.userAgent)&&(Fe=parseFloat(RegExp.$1)),Ae=Fe),Ae}var Ae=-1;function Te(){return typeof navigator<"u"&&-1!==navigator.userAgent.indexOf("Firefox")}function Re(Fe,tt,ot,It){return Fe.addEventListener?(void 0===It&&(It=!1),"mousewheel"===tt&&Te()&&(tt="DOMMouseScroll"),Fe.addEventListener(tt,ot,It),ot):Fe.attachEvent?(Fe.attachEvent("on"+tt,It=function(){return ot.call(Fe,window.event)}),It):void 0}function Me(Fe,tt,ot,It){Fe.removeEventListener?(void 0===It&&(It=!1),"mousewheel"===tt&&Te()&&(tt="DOMMouseScroll"),Fe.removeEventListener(tt,ot,It)):Fe.detachEvent&&Fe.detachEvent("on"+tt,ot)}function Ie(Fe,tt){for(var ot=Fe.parentNode;ot;){if(ot===tt)return!0;ot=ot.parentNode}return!1}function Ge(Fe){var tt=[],ot=0;function It(Vt){for(var pn="";void 0!==Fe[ot]&&Fe[ot]!==Vt;)pn+=Fe[ot],ot++;if(Fe[ot]!==Vt)throw new Error("Invalid JSON path: unexpected end, character "+Vt+" expected");return pn}for(;void 0!==Fe[ot];)if("."===Fe[ot])ot++,tt.push(function(){for(var Vt="";void 0!==Fe[ot]&&/[\w$]/.test(Fe[ot]);)Vt+=Fe[ot],ot++;if(""===Vt)throw new Error("Invalid JSON path: property name expected at index "+ot);return Vt}());else{if("["!==Fe[ot])throw new Error('Invalid JSON path: unexpected character "'+Fe[ot]+'" at index '+ot);if("'"===Fe[++ot]||'"'===Fe[ot]){var Ut=Fe[ot];if(ot++,tt.push(It(Ut)),Fe[ot]!==Ut)throw new Error("Invalid JSON path: closing quote ' expected at index "+ot);ot++}else{if(0===(Ut=It("]").trim()).length)throw new Error("Invalid JSON path: array value expected at index "+ot);Ut="*"===Ut?Ut:JSON.parse(Ut),tt.push(Ut)}if("]"!==Fe[ot])throw new Error("Invalid JSON path: closing bracket ] expected at index "+ot);ot++}return tt}function oe(Fe){return Fe.map(function(tt){return"number"==typeof tt?"["+tt+"]":"string"==typeof tt&&tt.match(/^[A-Za-z0-9_$]+$/)?"."+tt:'["'+tt+'"]'}).join("")}function pe(Fe){var tt,ot;return"enum"===Fe.keyword&&Array.isArray(Fe.schema)&&(ot=Fe.schema)&&(5<(ot=ot.map(function(It){return JSON.stringify(It)})).length&&(tt=["("+(ot.length-5)+" more...)"],(ot=ot.slice(0,5)).push(tt)),Fe.message="should be equal to one of: "+ot.join(", ")),"additionalProperties"===Fe.keyword&&(Fe.message="should NOT have additional property: "+Fe.params.additionalProperty),Fe}function ge(Fe){return Fe&&"function"==typeof Fe.then&&"function"==typeof Fe.catch}function be(Fe){return"object"===k(Fe)&&Array.isArray(Fe.path)&&"string"==typeof Fe.message}function ie(Fe,tt,ot){return tt.left-(ot=void 0!==ot?ot:0)>=Fe.left&&tt.right+ot<=Fe.right&&tt.top-ot>=Fe.top&&tt.bottom+ot<=Fe.bottom}function se(Fe,tt,ot){var It;return function(){var Ut=this,Vt=arguments,pn=ot&&!It;clearTimeout(It),It=setTimeout(function(){It=null,ot||Fe.apply(Ut,Vt)},tt),pn&&Fe.apply(Ut,Vt)}}function de(Fe,tt){for(var ot=tt.length,It=0,Ut=Fe.length,Vt=tt.length;tt.charAt(It)===Fe.charAt(It)&&It<ot;)It++;for(;tt.charAt(Vt-1)===Fe.charAt(Ut-1)&&It<Vt&&0<Ut;)Vt--,Ut--;return{start:It,end:Vt}}function _e(Fe){var tt,ot,It,Ut,Vt=0,pn=0;return"number"==typeof Fe.selectionStart&&"number"==typeof Fe.selectionEnd?(Vt=Fe.selectionStart,pn=Fe.selectionEnd):(Ut=document.selection.createRange())&&Ut.parentElement()===Fe&&(It=Fe.value.length,tt=Fe.value.replace(/\r\n/g,"\n"),(ot=Fe.createTextRange()).moveToBookmark(Ut.getBookmark()),(Ut=Fe.createTextRange()).collapse(!1),-1<ot.compareEndPoints("StartToEnd",Ut)?Vt=pn=It:(Vt=-ot.moveStart("character",-It),Vt+=tt.slice(0,Vt).split("\n").length-1,-1<ot.compareEndPoints("EndToEnd",Ut)?pn=It:(pn=-ot.moveEnd("character",-It),pn+=tt.slice(0,pn).split("\n").length-1))),{startIndex:Vt,endIndex:pn,start:Mn(Vt),end:Mn(pn)};function Mn(jt){return{row:((jt=Fe.value.substring(0,jt)).match(/\n/g)||[]).length+1,column:jt.length-jt.lastIndexOf("\n")}}}function $e(It,tt,ot){return It=It.value||"",0<tt&&0<ot?(It=It.split("\n",tt),tt=Math.min(It.length,tt),ot=Math.min(It[tt-1].length,ot-1),ot=1===tt?ot:ot+1,It.slice(0,tt-1).join("\n").length+ot):-1}function Xe(Fe,tt){var ot,It=[];if(tt&&tt.length){try{ot=Z.parse(Fe)}catch{return It}tt.forEach(function(Ut){var Vt=ut(Ge(Ut));(Vt=ot.pointers[Vt])&&It.push({path:Ut,line:Vt.key?Vt.key.line:Vt.value?Vt.value.line:0,column:Vt.key?Vt.key.column:Vt.value?Vt.value.column:0})})}return It}function ut(Fe){return Fe.map(function(tt){return"/"+String(tt).replace(/~/g,"~0").replace(/\//g,"~1")}).join("")}function mt(Fe){var tt=document.createElement("div");return tt.style.color=Fe,tt.style.color.split(/\s+/).join("").toLowerCase()||null}function ct(Fe){return!!mt(Fe)}function Tt(Fe,tt){var ot;return Fe?(ot="",Fe.title&&(ot+=Fe.title),Fe.description&&(0<ot.length&&(ot+="\n"),ot+=Fe.description),Fe.default&&(0<ot.length&&(ot+="\n\n"),ot=(ot+=(0,Y.Iu)("default",void 0,tt)+"\n")+JSON.stringify(Fe.default,null,2)),Array.isArray(Fe.examples)&&0<Fe.examples.length&&(0<ot.length&&(ot+="\n\n"),ot+=(0,Y.Iu)("examples",void 0,tt)+"\n",Fe.examples.forEach(function(It,Ut){ot+=JSON.stringify(It,null,2),Ut!==Fe.examples.length-1&&(ot+="\n")})),ot):""}function St(Fe,tt){for(var ot=Fe,It=0;It<tt.length&&null!=ot;It++)ot=ot[tt[It]];return ot}function Et(Fe,tt){for(var ot=Fe.replace(/ \(copy( \d+)?\)$/,""),It=ot,Ut=1;-1!==tt.indexOf(It);)It=ot+" (copy"+(1<Ut?" "+Ut:"")+")",Ut++;return It}function yn(Fe,tt){var ot={};if(Array.isArray(Fe))for(var It=Math.min(Fe.length,_),Ut=0;Ut<It;Ut++)!function Vt(pn,Mn,jt,ir){(Array.isArray(pn)||Ke(pn))&&!ir||(Mn[jt||""]=!0),Ke(pn)&&Object.keys(pn).forEach(function(dn){Vt(pn[dn],Mn,jt+"."+dn,ir)})}(Fe[Ut],ot,"",tt);else ot[""]=!0;return Object.keys(ot).sort()}function ft(Fe,Vt,ot){var It=Vt&&"."!==Vt?Ge(Vt):[],Ut="desc"===ot?-1:1;return(Vt=Fe.slice()).sort(function(pn,Mn){return pn=St(pn,It),Mn=St(Mn,It),Ut*(Mn<pn?1:pn<Mn?-1:0)}),Vt}function pt(Fe,It){var ot="desc"===It?-1:1,Ut=(It=Object.keys(Fe).sort(function(Vt,pn){return ot*c()(Vt,pn)}),{});return It.forEach(function(Vt){Ut[Vt]=Fe[Vt]}),Ut}function vt(Fe){var tt,ot;return""===Fe?"":"null"===(tt=Fe.toLowerCase())?null:"true"===tt||"false"!==tt&&(tt=Number(Fe),ot=parseFloat(Fe),isNaN(tt)||isNaN(ot)?Fe:tt)}function wt(Fe,tt){return"number"==typeof tt&&M<tt&&isFinite(tt)&&Math.floor(tt)===tt&&!isNaN(new Date(tt).valueOf())}function Gt(Fe){return Fe<900?Fe.toFixed()+" B":(Fe/=1e3)<900?Fe.toFixed(1)+" KB":(Fe/=1e3)<900?Fe.toFixed(1)+" MB":(Fe/=1e3)<900?Fe.toFixed(1)+" GB":(Fe/1e3).toFixed(1)+" TB"}function Wt(Fe,tt){return Fe.length<=tt?Fe:Fe.slice(0,tt)+"..."}function Ke(Fe){return"object"===k(Fe)&&null!==Fe&&!Array.isArray(Fe)}function Ze(Fe,tt){return-1!==Fe.indexOf(tt)}function Ct(Fe,tt){if(tt||Fe){if(tt&&!Fe||!tt&&Fe||tt.length!==Fe.length)return!0;for(var ot=0;ot<Fe.length;++ot){var It=function(Ut){if(!tt.find("error"===Fe[Ut].type?function(pn){return pn.line===Fe[Ut].line}:function(pn){return pn.dataPath===Fe[Ut].dataPath&&pn.schemaPath===Fe[Ut].schemaPath}))return{v:!0}}(ot);if("object"===k(It))return It.v}}return!1}function Rt(Fe,tt){return Fe=null!=Fe&&Fe.length?Fe:[],tt=null!=tt&&tt.length?tt:[],function H(Fe){return function(tt){if(Array.isArray(tt))return F(tt)}(Fe)||function(tt){if(typeof Symbol<"u"&&null!=tt[Symbol.iterator]||null!=tt["@@iterator"])return Array.from(tt)}(Fe)||function(tt,ot){var It;if(tt)return"string"==typeof tt?F(tt,void 0):"Map"===(It="Object"===(It=Object.prototype.toString.call(tt).slice(8,-1))&&tt.constructor?tt.constructor.name:It)||"Set"===It?Array.from(tt):"Arguments"===It||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(It)?F(tt,void 0):void 0}(Fe)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(new Set(Fe.concat(tt)))}function yt(Fe){setTimeout(Fe)}function hn(Fe,tt){return Object.prototype.hasOwnProperty.call(Fe,tt)}},8037:function(Ce,P,ae){var ce;if(window.Picker)ce=window.Picker;else try{ce=ae(4049)}catch{}Ce.exports=ce},6225:function(Ce,P,ae){function ce(k,_){var M,R;return _=F(k,_),(k=Z.modules[_])||("function"==typeof(k=Z.payloads[_])&&(M={id:_,uri:"",exports:R={},packaged:!0},R=k(function(S,y){return Y(_,S,y)},R,M)||M.exports,Z.modules[_]=R,delete Z.payloads[_]),k=Z.modules[_]=R||k),k}var c,K,U,Z,Y,H,F;Ce=ae.nmd(Ce),(U=function(){return this}())||typeof window>"u"||(U=window),(Z=function(k,_,M){"string"!=typeof k?Z.original?Z.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace()):(2==arguments.length&&(M=_),Z.modules[k]||(Z.payloads[k]=M,Z.modules[k]=null))}).modules={},Z.payloads={},Y=function(k,_,M){if("string"==typeof _){var R=ce(k,_);if(null!=R)return M&&M(),R}else if("[object Array]"===Object.prototype.toString.call(_)){for(var S=[],y=0,w=_.length;y<w;++y){var p=ce(k,_[y]);if(null==p&&H.original)return;S.push(p)}return M&&M.apply(null,S)||!0}},H=function(k,_){var M=Y("",k,_);return null==M&&H.original?H.original.apply(this,arguments):M},F=function(k,_){var M;if(-1!==_.indexOf("!"))return M=_.split("!"),F(k,M[0])+"!"+F(k,M[1]);if("."==_.charAt(0))for(_=k.split("/").slice(0,-1).join("/")+"/"+_;-1!==_.indexOf(".")&&R!=_;){var R=_;_=_.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}return _},K=U,(c="ace")&&(U[c]||(U[c]={}),K=U[c]),K.define&&K.define.packaged||(Z.original=K.define,K.define=Z,K.define.packaged=!0),K.require&&K.require.packaged||(H.original=K.require,K.require=H,K.require.packaged=!0),ace.define("ace/lib/es6-shim",["require","exports","module"],function(k,_,M){function R(S,y,w){Object.defineProperty(S,y,{value:w,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||R(String.prototype,"startsWith",function(S,y){return this.lastIndexOf(S,y=y||0)===y}),String.prototype.endsWith||R(String.prototype,"endsWith",function(S,y){return(void 0===y||y>this.length)&&(y=this.length),-1!==(S=this.indexOf(S,y-=S.length))&&S===y}),String.prototype.repeat||R(String.prototype,"repeat",function(S){for(var y="",w=this;0<S;)1&S&&(y+=w),(S>>=1)&&(w+=w);return y}),String.prototype.includes||R(String.prototype,"includes",function(S,y){return-1!=this.indexOf(S,y)}),Object.assign||(Object.assign=function(S){if(null==S)throw new TypeError("Cannot convert undefined or null to object");for(var y=Object(S),w=1;w<arguments.length;w++){var p=arguments[w];null!=p&&Object.keys(p).forEach(function(f){y[f]=p[f]})}return y}),Object.values||(Object.values=function(S){return Object.keys(S).map(function(y){return S[y]})}),Array.prototype.find||R(Array.prototype,"find",function(S){for(var y=this.length,w=arguments[1],p=0;p<y;p++){var f=this[p];if(S.call(w,f,p,this))return f}}),Array.prototype.findIndex||R(Array.prototype,"findIndex",function(S){for(var y=this.length,w=arguments[1],p=0;p<y;p++)if(S.call(w,this[p],p,this))return p}),Array.prototype.includes||R(Array.prototype,"includes",function(S,y){return-1!=this.indexOf(S,y)}),Array.prototype.fill||R(Array.prototype,"fill",function(S){for(var p,y=this.length>>>0,w=(p=arguments[1]>>0)<0?Math.max(y+p,0):Math.min(p,y),f=(p=void 0===(p=arguments[2])?y:p>>0)<0?Math.max(y+p,0):Math.min(p,y);w<f;)this[w]=S,w++;return this}),Array.of||R(Array,"of",function(){return Array.prototype.slice.call(arguments)})}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(k,_,M){"use strict";k("./es6-shim")}),ace.define("ace/lib/lang",["require","exports","module"],function(k,_,M){"use strict";_.last=function(y){return y[y.length-1]},_.stringReverse=function(y){return y.split("").reverse().join("")},_.stringRepeat=function(y,w){for(var p="";0<w;)1&w&&(p+=y),(w>>=1)&&(y+=y);return p};var R=/^\s\s*/,S=/\s\s*$/;_.stringTrimLeft=function(y){return y.replace(R,"")},_.stringTrimRight=function(y){return y.replace(S,"")},_.copyObject=function(y){var w,p={};for(w in y)p[w]=y[w];return p},_.copyArray=function(y){for(var w=[],p=0,f=y.length;p<f;p++)w[p]=y[p]&&"object"==typeof y[p]?this.copyObject(y[p]):y[p];return w},_.deepCopy=function y(w){if("object"!=typeof w||!w)return w;if(Array.isArray(w))for(var p=[],f=0;f<w.length;f++)p[f]=y(w[f]);else{if("[object Object]"!==Object.prototype.toString.call(w))return w;for(var f in p={},w)p[f]=y(w[f])}return p},_.arrayToMap=function(y){for(var w={},p=0;p<y.length;p++)w[y[p]]=1;return w},_.createMap=function(y){var w,p=Object.create(null);for(w in y)p[w]=y[w];return p},_.arrayRemove=function(y,w){for(var p=0;p<=y.length;p++)w===y[p]&&y.splice(p,1)},_.escapeRegExp=function(y){return y.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},_.escapeHTML=function(y){return(""+y).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},_.getMatchOffsets=function(y,w){var p=[];return y.replace(w,function(f){p.push({offset:arguments[arguments.length-2],length:f.length})}),p},_.deferredCall=function(y){function w(){f=null,y()}function p(m){return p.cancel(),f=setTimeout(w,m||0),p}var f=null;return(p.schedule=p).call=function(){return this.cancel(),y(),p},p.cancel=function(){return clearTimeout(f),f=null,p},p.isPending=function(){return f},p},_.delayedCall=function(y,w){function p(){m=null,y()}function f(h){null==m&&(m=setTimeout(p,h||w))}var m=null;return f.delay=function(h){m&&clearTimeout(m),m=setTimeout(p,h||w)},(f.schedule=f).call=function(){this.cancel(),y()},f.cancel=function(){m&&clearTimeout(m),m=null},f.isPending=function(){return m},f}}),ace.define("ace/lib/oop",["require","exports","module"],function(k,_,M){"use strict";_.inherits=function(R,S){R.super_=S,R.prototype=Object.create(S.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}})},_.mixin=function(R,S){for(var y in S)R[y]=S[y];return R},_.implement=function(R,S){_.mixin(R,S)}}),ace.define("ace/lib/useragent",["require","exports","module"],function(k,_,M){"use strict";_.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},_.getOS=function(){return _.isMac?_.OS.MAC:_.isLinux?_.OS.LINUX:_.OS.WINDOWS};var y="object"==typeof navigator?navigator:{},R=(/mac|win|linux/i.exec(y.platform)||["other"])[0].toLowerCase(),S=y.userAgent||"";y=y.appName||"",_.isWin="win"==R,_.isMac="mac"==R,_.isLinux="linux"==R,_.isIE="Microsoft Internet Explorer"==y||0<=y.indexOf("MSAppHost")?parseFloat((S.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((S.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),_.isOldIE=_.isIE&&_.isIE<9,_.isGecko=_.isMozilla=S.match(/ Gecko\/\d+/),_.isOpera="object"==typeof opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),_.isWebKit=parseFloat(S.split("WebKit/")[1])||void 0,_.isChrome=parseFloat(S.split(" Chrome/")[1])||void 0,_.isEdge=parseFloat(S.split(" Edge/")[1])||void 0,_.isAIR=0<=S.indexOf("AdobeAIR"),_.isAndroid=0<=S.indexOf("Android"),_.isChromeOS=0<=S.indexOf(" CrOS "),_.isIOS=/iPad|iPhone|iPod/.test(S)&&!window.MSStream,_.isIOS&&(_.isMac=!0),_.isMobile=_.isIOS||_.isAndroid}),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(y,_,M){"use strict";y=y("./useragent");var R,S,w=(_.buildDom=function m(h,v,O){if("string"==typeof h&&h)return T=document.createTextNode(h),v&&v.appendChild(T),T;if(!Array.isArray(h))return h&&h.appendChild&&v&&v.appendChild(h),h;if("string"!=typeof h[0]||!h[0]){for(var C=[],x=0;x<h.length;x++){var L=m(h[x],v,O);L&&C.push(L)}return C}var Q=document.createElement(h[0]),G=h[1],T=1;for(x=T=G&&"object"==typeof G&&!Array.isArray(G)?2:T;x<h.length;x++)m(h[x],Q,O);return 2==T&&Object.keys(G).forEach(function(V){var J=G[V];"class"===V?Q.className=Array.isArray(J)?J.join(" "):J:"function"==typeof J||"value"==V||"$"==V[0]?Q[V]=J:"ref"===V?O&&(O[J]=Q):"style"===V?"string"==typeof J&&(Q.style.cssText=J):null!=J&&Q.setAttribute(V,J)}),v&&v.appendChild(Q),Q},_.getDocumentHead=function(m){return(m=m||document).head||m.getElementsByTagName("head")[0]||m.documentElement},_.createElement=function(m,h){return document.createElementNS?document.createElementNS(h||"http://www.w3.org/1999/xhtml",m):document.createElement(m)},_.removeChildren=function(m){m.innerHTML=""},_.createTextNode=function(m,h){return(h?h.ownerDocument:document).createTextNode(m)},_.createFragment=function(m){return(m?m.ownerDocument:document).createDocumentFragment()},_.hasCssClass=function(m,h){return-1!==(m.className+"").split(/\s+/g).indexOf(h)},_.addCssClass=function(m,h){_.hasCssClass(m,h)||(m.className+=" "+h)},_.removeCssClass=function(m,h){for(var v=m.className.split(/\s+/g);;){var O=v.indexOf(h);if(-1==O)break;v.splice(O,1)}m.className=v.join(" ")},_.toggleCssClass=function(m,h){for(var v=m.className.split(/\s+/g),O=!0;;){var C=v.indexOf(h);if(-1==C)break;O=!1,v.splice(C,1)}return O&&v.push(h),m.className=v.join(" "),O},_.setCssClass=function(m,h,v){v?_.addCssClass(m,h):_.removeCssClass(m,h)},_.hasCssString=function(m,h){var v,O=0;if(v=(h=h||document).querySelectorAll("style"))for(;O<v.length;)if(v[O++].id===m)return!0},_.removeElementById=function(m,h){(h=h||document).getElementById(m)&&h.getElementById(m).remove()},[]);function p(){var m=w;w=null,m&&m.forEach(function(h){f(h[0],h[1])})}function f(m,h,v){if(typeof document<"u"){if(w)if(v)p();else if(!1===v)return w.push([m,h]);if(!R){var O=v;if(v=(O=v&&v.getRootNode&&(O=v.getRootNode())&&O!=v?O:document).ownerDocument||O,h&&_.hasCssString(h,O))return null;h&&(m+="\n/*# sourceURL=ace/css/"+h+" */");var C=_.createElement("style");C.appendChild(v.createTextNode(m)),h&&(C.id=h),(O=O==v?_.getDocumentHead(v):O).insertBefore(C,O.firstChild)}}}_.useStrictCSP=function(m){0==(R=m)?p():w=w||[]},_.importCssString=f,_.importCssStylsheet=function(m,h){_.buildDom(["link",{rel:"stylesheet",href:m}],_.getDocumentHead(h))},_.scrollbarWidth=function(O){var h=_.createElement("ace_inner"),v=(h.style.width="100%",h.style.minWidth="0px",h.style.height="200px",h.style.display="block",_.createElement("ace_outer"));if((x=v.style).position="absolute",x.left="-10000px",x.overflow="hidden",x.width="200px",x.minWidth="0px",x.height="150px",x.display="block",v.appendChild(h),!(O=O&&O.documentElement||document&&document.documentElement))return 0;O.appendChild(v);var x,C=h.offsetWidth;return C===(x.overflow="scroll",x=h.offsetWidth)&&(x=v.clientWidth),O.removeChild(v),C-x},_.computedStyle=function(m,h){return window.getComputedStyle(m,"")||{}},_.setStyle=function(m,h,v){m[h]!==v&&(m[h]=v)},_.HAS_CSS_ANIMATION=!1,_.HAS_CSS_TRANSFORMS=!1,_.HI_DPI=!y.isWin||typeof window<"u"&&1.5<=window.devicePixelRatio,y.isChromeOS&&(_.HI_DPI=!1),typeof document<"u"&&(S=document.createElement("div"),_.HI_DPI&&void 0!==S.style.transform&&(_.HAS_CSS_TRANSFORMS=!0),y.isEdge||void 0===S.style.animationName||(_.HAS_CSS_ANIMATION=!0),S=null),_.translate=_.HAS_CSS_TRANSFORMS?function(m,h,v){m.style.transform="translate("+Math.round(h)+"px, "+Math.round(v)+"px)"}:function(m,h,v){m.style.top=Math.round(v)+"px",m.style.left=Math.round(h)+"px"}}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(k,_,M){"use strict";var R=k("./dom");_.get=function(S,y){var w=new XMLHttpRequest;w.open("GET",S,!0),w.onreadystatechange=function(){4===w.readyState&&y(w.responseText)},w.send(null)},_.loadScript=function(S,y){var w=R.getDocumentHead(),p=document.createElement("script");p.src=S,w.appendChild(p),p.onload=p.onreadystatechange=function(f,m){!m&&p.readyState&&"loaded"!=p.readyState&&"complete"!=p.readyState||(p=p.onload=p.onreadystatechange=null,m)||y()}},_.qualifyURL=function(S){var y=document.createElement("a");return y.href=S,y.href}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(k,_,M){"use strict";function R(){this.propagationStopped=!0}function S(){this.defaultPrevented=!0}var y={};y._emit=y._dispatchEvent=function(w,p){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var m=this._defaultHandlers[w];if((f=this._eventRegistry[w]||[]).length||m){(p="object"==typeof p&&p?p:{}).type||(p.type=w),p.stopPropagation||(p.stopPropagation=R),p.preventDefault||(p.preventDefault=S);for(var f=f.slice(),h=0;h<f.length&&(f[h](p,this),!p.propagationStopped);h++);return m&&!p.defaultPrevented?m(p,this):void 0}},y._signal=function(w,p){if(f=(this._eventRegistry||{})[w])for(var f=f.slice(),m=0;m<f.length;m++)f[m](p,this)},y.once=function(w,p){var f=this;if(this.on(w,function m(){f.off(w,m),p.apply(null,arguments)}),!p)return new Promise(function(m){p=m})},y.setDefaultHandler=function(w,p){var f,m,h=this._defaultHandlers;(h=h||(this._defaultHandlers={_disabled_:{}}))[w]&&(m=h[w],(f=h._disabled_[w])||(h._disabled_[w]=f=[]),f.push(m),-1!=(m=f.indexOf(p)))&&f.splice(m,1),h[w]=p},y.removeDefaultHandler=function(w,p){var f,m=this._defaultHandlers;m&&(f=m._disabled_[w],m[w]==p?f&&this.setDefaultHandler(w,f.pop()):f&&-1!=(m=f.indexOf(p))&&f.splice(m,1))},y.on=y.addEventListener=function(w,p,f){this._eventRegistry=this._eventRegistry||{};var m=this._eventRegistry[w];return-1==(m=m||(this._eventRegistry[w]=[])).indexOf(p)&&m[f?"unshift":"push"](p),p},y.off=y.removeListener=y.removeEventListener=function(w,p){this._eventRegistry=this._eventRegistry||{},(w=this._eventRegistry[w])&&-1!==(p=w.indexOf(p))&&w.splice(p,1)},y.removeAllListeners=function(w){w||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[w]=void 0),this._defaultHandlers&&(this._defaultHandlers[w]=void 0)},_.EventEmitter=y}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(k,_,M){var R=k("./oop"),S=k("./event_emitter").EventEmitter,y={setOptions:function(m){Object.keys(m).forEach(function(h){this.setOption(h,m[h])},this)},getOptions:function(m){var h,v={};return m?Array.isArray(m)||(v=m,m=Object.keys(v)):(h=this.$options,m=Object.keys(h).filter(function(O){return!h[O].hidden})),m.forEach(function(O){v[O]=this.getOption(O)},this),v},setOption:function(m,h){var v;if(this["$"+m]!==h)return(v=this.$options[m])?v.forwardTo?this[v.forwardTo]&&this[v.forwardTo].setOption(m,h):(v.handlesSet||(this["$"+m]=h),void(v&&v.set&&v.set.call(this,h))):w('misspelled option "'+m+'"')},getOption:function(m){var h=this.$options[m];return h?h.forwardTo?this[h.forwardTo]&&this[h.forwardTo].getOption(m):h&&h.get?h.get.call(this):this["$"+m]:w('misspelled option "'+m+'"')}};function w(m){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}function p(m,h){var v=new Error(m);v.data=h,"object"==typeof console&&console.error&&console.error(v),setTimeout(function(){throw v})}function f(){this.$defaultOptions={}}(function(){R.implement(this,S),this.defineOptions=function(m,h,v){return m.$options||(this.$defaultOptions[h]=m.$options={}),Object.keys(v).forEach(function(O){var C=v[O];(C="string"==typeof C?{forwardTo:C}:C).name||(C.name=O),"initialValue"in(m.$options[C.name]=C)&&(m["$"+C.name]=C.initialValue)}),R.implement(m,y),this},this.resetOptions=function(m){Object.keys(m.$options).forEach(function(h){var v=m.$options[h];"value"in v&&m.setOption(h,v.value)})},this.setDefaultValue=function(m,h,v){if(!m){for(m in this.$defaultOptions)if(this.$defaultOptions[m][h])break;if(!this.$defaultOptions[m][h])return!1}var O=this.$defaultOptions[m]||(this.$defaultOptions[m]={});O[h]&&(O.forwardTo?this.setDefaultValue(O.forwardTo,h,v):O[h].value=v)},this.setDefaultValues=function(m,h){Object.keys(h).forEach(function(v){this.setDefaultValue(m,v,h[v])},this)},this.warn=w,this.reportError=p}).call(f.prototype),_.AppConfig=f}),ace.define("ace/theme/textmate.css",["require","exports","module"],function(k,_,M){M.exports='.ace-tm .ace_gutter {\n  background: #f0f0f0;\n  color: #333;\n}\n\n.ace-tm .ace_print-margin {\n  width: 1px;\n  background: #e8e8e8;\n}\n\n.ace-tm .ace_fold {\n    background-color: #6B72E6;\n}\n\n.ace-tm {\n  background-color: #FFFFFF;\n  color: black;\n}\n\n.ace-tm .ace_cursor {\n  color: black;\n}\n        \n.ace-tm .ace_invisible {\n  color: rgb(191, 191, 191);\n}\n\n.ace-tm .ace_storage,\n.ace-tm .ace_keyword {\n  color: blue;\n}\n\n.ace-tm .ace_constant {\n  color: rgb(197, 6, 11);\n}\n\n.ace-tm .ace_constant.ace_buildin {\n  color: rgb(88, 72, 246);\n}\n\n.ace-tm .ace_constant.ace_language {\n  color: rgb(88, 92, 246);\n}\n\n.ace-tm .ace_constant.ace_library {\n  color: rgb(6, 150, 14);\n}\n\n.ace-tm .ace_invalid {\n  background-color: rgba(255, 0, 0, 0.1);\n  color: red;\n}\n\n.ace-tm .ace_support.ace_function {\n  color: rgb(60, 76, 114);\n}\n\n.ace-tm .ace_support.ace_constant {\n  color: rgb(6, 150, 14);\n}\n\n.ace-tm .ace_support.ace_type,\n.ace-tm .ace_support.ace_class {\n  color: rgb(109, 121, 222);\n}\n\n.ace-tm .ace_keyword.ace_operator {\n  color: rgb(104, 118, 135);\n}\n\n.ace-tm .ace_string {\n  color: rgb(3, 106, 7);\n}\n\n.ace-tm .ace_comment {\n  color: rgb(76, 136, 107);\n}\n\n.ace-tm .ace_comment.ace_doc {\n  color: rgb(0, 102, 255);\n}\n\n.ace-tm .ace_comment.ace_doc.ace_tag {\n  color: rgb(128, 159, 191);\n}\n\n.ace-tm .ace_constant.ace_numeric {\n  color: rgb(0, 0, 205);\n}\n\n.ace-tm .ace_variable {\n  color: rgb(49, 132, 149);\n}\n\n.ace-tm .ace_xml-pe {\n  color: rgb(104, 104, 91);\n}\n\n.ace-tm .ace_entity.ace_name.ace_function {\n  color: #0000A2;\n}\n\n\n.ace-tm .ace_heading {\n  color: rgb(12, 7, 255);\n}\n\n.ace-tm .ace_list {\n  color:rgb(185, 6, 144);\n}\n\n.ace-tm .ace_meta.ace_tag {\n  color:rgb(0, 22, 142);\n}\n\n.ace-tm .ace_string.ace_regex {\n  color: rgb(255, 0, 0)\n}\n\n.ace-tm .ace_marker-layer .ace_selection {\n  background: rgb(181, 213, 255);\n}\n.ace-tm.ace_multiselect .ace_selection.ace_start {\n  box-shadow: 0 0 3px 0px white;\n}\n.ace-tm .ace_marker-layer .ace_step {\n  background: rgb(252, 255, 0);\n}\n\n.ace-tm .ace_marker-layer .ace_stack {\n  background: rgb(164, 229, 101);\n}\n\n.ace-tm .ace_marker-layer .ace_bracket {\n  margin: -1px 0 0 -1px;\n  border: 1px solid rgb(192, 192, 192);\n}\n\n.ace-tm .ace_marker-layer .ace_active-line {\n  background: rgba(0, 0, 0, 0.07);\n}\n\n.ace-tm .ace_gutter-active-line {\n    background-color : #dcdcdc;\n}\n\n.ace-tm .ace_marker-layer .ace_selected-word {\n  background: rgb(250, 250, 255);\n  border: 1px solid rgb(200, 200, 250);\n}\n\n.ace-tm .ace_indent-guide {\n  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;\n}\n\n.ace-tm .ace_indent-guide-active {\n  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;\n}\n'}),ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate.css","ace/lib/dom"],function(k,_,M){"use strict";_.isDark=!1,_.cssClass="ace-tm",_.cssText=k("./textmate.css"),_.$id="ace/theme/textmate",k("../lib/dom").importCssString(_.cssText,_.cssClass,!1)}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(k,_,M){var R=k("./lib/lang"),S=(k("./lib/oop"),k("./lib/net")),y=k("./lib/dom"),w=k("./lib/app_config").AppConfig,p=(M.exports=_=new w,{packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null}),f=(_.get=function(h){if(p.hasOwnProperty(h))return p[h];throw new Error("Unknown config key: "+h)},_.set=function(h,v){if(p.hasOwnProperty(h))p[h]=v;else if(0==this.setDefaultValue("",h,v))throw new Error("Unknown config key: "+h);"useStrictCSP"==h&&y.useStrictCSP(v)},_.all=function(){return R.copyObject(p)},_.$modes={},_.moduleUrl=function(h,v){var O,C,x;return p.$moduleUrls[h]||(h=h.split("/"),O="snippets"==(v=v||h[h.length-2]||"")?"/":"-",C=h[h.length-1],"worker"==v&&"-"==O&&(x=new RegExp("^"+v+"[\\-_]|[\\-_]"+v+"$","g"),C=C.replace(x,"")),(!C||C==v)&&1<h.length&&(C=h[h.length-2]),null==(x=p[v+"Path"])?x=p.basePath:"/"==O&&(v=O=""),x&&"/"!=x.slice(-1)&&(x+="/"),x+v+O+C+this.get("suffix"))},_.setModuleUrl=function(h,v){return p.$moduleUrls[h]=v},function(h,v){return"ace/theme/textmate"==h?v(null,k("./theme/textmate")):console.error("loader is not configured")}),m=(_.setLoader=function(h){f=h},_.$loading={},_.loadModule=function(h,v){var O,C;Array.isArray(h)&&(C=h[0],h=h[1]);try{O=k(h)}catch{}if(O&&!_.$loading[h])return v&&v(O);if(_.$loading[h]||(_.$loading[h]=[]),_.$loading[h].push(v),!(1<_.$loading[h].length)){let L=function(){f(h,function(Q,G){_._emit("load.module",{name:h,module:G});var T=_.$loading[h];_.$loading[h]=null,T.forEach(function(V){V&&V(G)})})};if(!_.get("packaged"))return L();S.loadScript(_.moduleUrl(h,C),L),m()}},function(){p.basePath||p.workerPath||p.modePath||p.themePath||Object.keys(p.$moduleUrls).length||(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),m=function(){})});_.version="1.15.2"}),ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(k,_,M){"use strict";k("./lib/fixoldbrowsers");var R=k("./config"),S=(R.setLoader(function(w,p){k([w],function(f){p(null,f)})}),function(){return this||typeof window<"u"&&window}());function y(w){if(S&&S.document){R.set("packaged",w||k.packaged||M.packaged||S.define&&ae.amdD.packaged);for(var p,f={},m="",h=((w=document.currentScript||document._currentScript)&&w.ownerDocument||document).getElementsByTagName("script"),v=0;v<h.length;v++){var O=h[v],C=O.src||O.getAttribute("src");if(C){for(var x=O.attributes,L=0,Q=x.length;L<Q;L++){var G=x[L];0===G.name.indexOf("data-ace-")&&(f[G.name.replace(/^data-ace-/,"").replace(/-(.)/g,function(V,J){return J.toUpperCase()})]=G.value)}(O=C.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/))&&(m=O[1])}}for(p in m&&(f.base=f.base||m,f.packaged=!0),f.basePath=f.base,f.workerPath=f.workerPath||f.base,f.modePath=f.modePath||f.base,f.themePath=f.themePath||f.base,delete f.base,f)void 0!==f[p]&&R.set(p,f[p])}}M.exports=function(w){R.init=y,w.require=k,w.define=ae.amdD},y(!0)}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(k,_,M){"use strict";var R=k("./oop"),S=function(){var y,w,p={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(w in p.PRINTABLE_KEYS[173]="-",p.FUNCTION_KEYS)y=p.FUNCTION_KEYS[w].toLowerCase(),p[y]=parseInt(w,10);for(w in p.PRINTABLE_KEYS)y=p.PRINTABLE_KEYS[w].toLowerCase(),p[y]=parseInt(w,10);R.mixin(p,p.MODIFIER_KEYS),R.mixin(p,p.PRINTABLE_KEYS),R.mixin(p,p.FUNCTION_KEYS),p.enter=p.return,p.escape=p.esc,p.del=p.delete;for(var f=["cmd","ctrl","alt","shift"],m=Math.pow(2,f.length);m--;)p.KEY_MODS[m]=f.filter(function(h){return m&p.KEY_MODS[h]}).join("-")+"-";return p.KEY_MODS[0]="",p.KEY_MODS[-1]="input-",p}();R.mixin(_,S),_.keyCodeToString=function(y){var w=S[y];return(w="string"!=typeof w?String.fromCharCode(y):w).toLowerCase()}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(k,_,M){"use strict";var R,S=k("./keys"),y=k("./useragent"),w=null,p=0;function f(){if(null==R){R=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){R={passive:!1}}})}catch{}}return R}function m(Q,G,T){this.elem=Q,this.type=G,this.callback=T}function h(Q){return 0|(Q.ctrlKey?1:0)|(Q.altKey?2:0)|(Q.shiftKey?4:0)|(Q.metaKey?8:0)}m.prototype.destroy=function(){C(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var v,O=_.addListener=function(Q,G,T,V){Q.addEventListener(G,T,f()),V&&V.$toDestroy.push(new m(Q,G,T))},C=_.removeListener=function(Q,G,T){Q.removeEventListener(G,T,f())};function x(Q,G,T){var V=h(G);if(!y.isMac&&w){if(G.getModifierState&&(G.getModifierState("OS")||G.getModifierState("Win"))&&(V|=8),w.altGr){if(3==(3&V))return;w.altGr=0}18!==T&&17!==T||(J="location"in G?G.location:G.keyLocation,17===T&&1===J?1==w[T]&&(p=G.timeStamp):18===T&&3===V&&2===J&&G.timeStamp-p<50&&(w.altGr=!0))}if(T in S.MODIFIER_KEYS&&(T=-1),!V&&13===T){var J="location"in G?G.location:G.keyLocation;if(3===J&&(Q(G,V,-T),G.defaultPrevented))return}if(y.isChromeOS&&8&V){if(Q(G,V,T),G.defaultPrevented)return;V&=-9}return!!(V||T in S.FUNCTION_KEYS||T in S.PRINTABLE_KEYS)&&Q(G,V,T)}function L(){w=Object.create(null)}_.stopEvent=function(Q){return _.stopPropagation(Q),_.preventDefault(Q),!1},_.stopPropagation=function(Q){Q.stopPropagation&&Q.stopPropagation()},_.preventDefault=function(Q){Q.preventDefault&&Q.preventDefault()},_.getButton=function(Q){return"dblclick"==Q.type?0:"contextmenu"==Q.type||y.isMac&&Q.ctrlKey&&!Q.altKey&&!Q.shiftKey?2:Q.button},_.capture=function(Q,G,T){var V=Q&&Q.ownerDocument||document;function J(X){G&&G(X),T&&T(X),C(V,"mousemove",G),C(V,"mouseup",J),C(V,"dragstart",J)}return O(V,"mousemove",G),O(V,"mouseup",J),O(V,"dragstart",J),J},_.addMouseWheelListener=function(Q,G,T){O(Q,"wheel",function(V){var J=V.deltaX||0,X=V.deltaY||0;switch(V.deltaMode){case V.DOM_DELTA_PIXEL:V.wheelX=.15*J,V.wheelY=.15*X;break;case V.DOM_DELTA_LINE:V.wheelX=15*J,V.wheelY=15*X;break;case V.DOM_DELTA_PAGE:V.wheelX=150*J,V.wheelY=150*X}G(V)},T)},_.addMultiMouseDownListener=function(Q,G,T,V,J){var X,q,ee,j=0,D={2:"dblclick",3:"tripleclick",4:"quadclick"};function N(re){var ue;if(0!==_.getButton(re)?j=0:1<re.detail&&!(4<++j)||(j=1),y.isIE&&(ue=5<Math.abs(re.clientX-X)||5<Math.abs(re.clientY-q),ee&&!ue||(j=1),ee&&clearTimeout(ee),ee=setTimeout(function(){ee=null},G[j-1]||600),1==j)&&(X=re.clientX,q=re.clientY),re._clicks=j,T[V]("mousedown",re),4<j)j=0;else if(1<j)return T[V](D[j],re)}(Q=Array.isArray(Q)?Q:[Q]).forEach(function(re){O(re,"mousedown",N,J)})},_.getModifierString=function(Q){return S.KEY_MODS[h(Q)]},_.addCommandKeyListener=function(Q,G,T){var V,J;y.isOldGecko||y.isOpera&&!("KeyboardEvent"in window)?(V=null,O(Q,"keydown",function(X){V=X.keyCode},T),O(Q,"keypress",function(X){return x(G,X,V)},T)):(J=null,O(Q,"keydown",function(X){w[X.keyCode]=(w[X.keyCode]||0)+1;var q=x(G,X,X.keyCode);return J=X.defaultPrevented,q},T),O(Q,"keypress",function(X){J&&(X.ctrlKey||X.altKey||X.shiftKey||X.metaKey)&&(_.stopEvent(X),J=null)},T),O(Q,"keyup",function(X){w[X.keyCode]=null},T),w||(L(),O(window,"focus",L)))},"object"==typeof window&&window.postMessage&&!y.isOldIE&&(v=1,_.nextTick=function(Q,G){G=G||window;var V="zero-timeout-message-"+v++;O(G,"message",function T(J){J.data==V&&(_.stopPropagation(J),C(G,"message",T),Q())}),G.postMessage(V,"*")}),_.$idleBlocked=!1,_.onIdle=function(Q,G){return setTimeout(function T(){_.$idleBlocked?setTimeout(T,100):Q()},G)},_.$idleBlockId=null,_.blockIdle=function(Q){_.$idleBlockId&&clearTimeout(_.$idleBlockId),_.$idleBlocked=!0,_.$idleBlockId=setTimeout(function(){_.$idleBlocked=!1},Q||100)},_.nextFrame="object"==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),_.nextFrame=_.nextFrame?_.nextFrame.bind(window):function(Q){setTimeout(Q,17)}}),ace.define("ace/range",["require","exports","module"],function(k,_,M){"use strict";function R(S,y,w,p){this.start={row:S,column:y},this.end={row:w,column:p}}(function(){this.isEqual=function(S){return this.start.row===S.start.row&&this.end.row===S.end.row&&this.start.column===S.start.column&&this.end.column===S.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(S,y){return 0==this.compare(S,y)},this.compareRange=function(y){var w=y.end;return y=y.start,1==(w=this.compare(w.row,w.column))?1==(w=this.compare(y.row,y.column))?2:0==w?1:0:-1==w?-2:-1==(w=this.compare(y.row,y.column))?-1:1==w?42:0},this.comparePoint=function(S){return this.compare(S.row,S.column)},this.containsRange=function(S){return 0==this.comparePoint(S.start)&&0==this.comparePoint(S.end)},this.intersects=function(S){return-1==(S=this.compareRange(S))||0==S||1==S},this.isEnd=function(S,y){return this.end.row==S&&this.end.column==y},this.isStart=function(S,y){return this.start.row==S&&this.start.column==y},this.setStart=function(S,y){"object"==typeof S?(this.start.column=S.column,this.start.row=S.row):(this.start.row=S,this.start.column=y)},this.setEnd=function(S,y){"object"==typeof S?(this.end.column=S.column,this.end.row=S.row):(this.end.row=S,this.end.column=y)},this.inside=function(S,y){return 0==this.compare(S,y)&&!this.isEnd(S,y)&&!this.isStart(S,y)},this.insideStart=function(S,y){return 0==this.compare(S,y)&&!this.isEnd(S,y)},this.insideEnd=function(S,y){return 0==this.compare(S,y)&&!this.isStart(S,y)},this.compare=function(S,y){return this.isMultiLine()||S!==this.start.row?S<this.start.row?-1:S>this.end.row?1:this.start.row===S?y>=this.start.column?0:-1:this.end.row!==S||y<=this.end.column?0:1:y<this.start.column?-1:y>this.end.column?1:0},this.compareStart=function(S,y){return this.start.row==S&&this.start.column==y?-1:this.compare(S,y)},this.compareEnd=function(S,y){return this.end.row==S&&this.end.column==y?1:this.compare(S,y)},this.compareInside=function(S,y){return this.end.row==S&&this.end.column==y?1:this.start.row==S&&this.start.column==y?-1:this.compare(S,y)},this.clipRows=function(S,y){var w,p;return this.end.row>y?w={row:y+1,column:0}:this.end.row<S&&(w={row:S,column:0}),this.start.row>y?p={row:y+1,column:0}:this.start.row<S&&(p={row:S,column:0}),R.fromPoints(p||this.start,w||this.end)},this.extend=function(S,y){var w,p,f=this.compare(S,y);return 0==f?this:(-1==f?w={row:S,column:y}:p={row:S,column:y},R.fromPoints(w||this.start,p||this.end))},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return R.fromPoints(this.start,this.end)},this.collapseRows=function(){return new R(this.start.row,0,0==this.end.column?Math.max(this.start.row,this.end.row-1):this.end.row,0)},this.toScreenRange=function(w){var y=w.documentToScreenPosition(this.start);return w=w.documentToScreenPosition(this.end),new R(y.row,y.column,w.row,w.column)},this.moveBy=function(S,y){this.start.row+=S,this.start.column+=y,this.end.row+=S,this.end.column+=y}}).call(R.prototype),R.fromPoints=function(S,y){return new R(S.row,S.column,y.row,y.column)},R.comparePoints=function(S,y){return S.row-y.row||S.column-y.column},R.comparePoints=function(S,y){return S.row-y.row||S.column-y.column},_.Range=R}),ace.define("ace/clipboard",["require","exports","module"],function(k,_,M){"use strict";var R;M.exports={lineMode:!1,pasteCancelled:function(){return!!(R&&R>Date.now()-50)||(R=!1)},cancel:function(){R=Date.now()}}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(k,_,M){"use strict";var R=k("../lib/event"),S=k("../lib/useragent"),y=k("../lib/dom"),w=k("../lib/lang"),p=k("../clipboard"),f=S.isChrome<18,m=S.isIE,h=63<S.isChrome,v=k("../lib/keys"),O=v.KEY_MODS,C=S.isIOS,x=C?/\s/:/\n/,L=S.isMobile;_.TextInput=function(Q,G){var T=y.createElement("textarea"),V=(T.className="ace_text-input",T.setAttribute("wrap","off"),T.setAttribute("autocorrect","off"),T.setAttribute("autocapitalize","off"),T.setAttribute("spellcheck",!1),T.style.opacity="0",Q.insertBefore(T,Q.firstChild),!1),J=!1,X=!1,q=!1,ee="",j=(L||(T.style.fontSize="1px"),!1),D=!1,N="",re=0,ue=0,ve=0;try{var Ae=document.activeElement===T}catch{}function Te(ft){se(ft,!0)}function Re(ft){se(ft,!1)}function Me(ft){var pt=ie(ft);p.pasteCancelled()||("string"==typeof pt?(pt&&G.onPaste(pt,ft),S.isIE&&setTimeout(Ie),R.preventDefault(ft)):(T.value="",J=!0))}this.setAriaOptions=function(ft){ft.activeDescendant?(T.setAttribute("aria-haspopup","true"),T.setAttribute("aria-autocomplete","list"),T.setAttribute("aria-activedescendant",ft.activeDescendant)):(T.setAttribute("aria-haspopup","false"),T.setAttribute("aria-autocomplete","both"),T.removeAttribute("aria-activedescendant")),ft.role&&T.setAttribute("role",ft.role)},this.setAriaOptions({role:"textbox"}),R.addListener(T,"blur",function(ft){D||(G.onBlur(ft),Ae=!1)},G),R.addListener(T,"focus",function(ft){if(!D){if(Ae=!0,S.isEdge)try{if(!document.hasFocus())return}catch{}G.onFocus(ft),S.isEdge?setTimeout(Ie):Ie()}},G),this.$focusScroll=!1,this.focus=function(){if(ee||h||"browser"==this.$focusScroll)return T.focus({preventScroll:!0});var ft=T.style.top;T.style.position="fixed",T.style.top="0px";try{var pt=0!=T.getBoundingClientRect().top}catch{return}var vt=[];if(pt)for(var wt=T.parentElement;wt&&1==wt.nodeType;)vt.push(wt),wt.setAttribute("ace_nocontext",!0),wt=!wt.parentElement&&wt.getRootNode?wt.getRootNode().host:wt.parentElement;T.focus({preventScroll:!0}),pt&&vt.forEach(function(Gt){Gt.removeAttribute("ace_nocontext")}),setTimeout(function(){T.style.position="","0px"==T.style.top&&(T.style.top=ft)},0)},this.blur=function(){T.blur()},this.isFocused=function(){return Ae},G.on("beforeEndOperation",function(){var ft=G.curOp,pt=ft&&ft.command&&ft.command.name;"insertstring"!=pt&&(pt=pt&&(ft.docChanged||ft.selectionChanged),X&&pt&&(N=T.value="",_e()),Ie())});var Ie=C?function(ft){var pt;!Ae||V&&!ft||q||((pt="\n ab"+(ft=ft||"")+"cde fg\n")!=T.value&&(T.value=N=pt),pt=4+(ft.length||(G.selection.isEmpty()?0:1)),4==re&&ue==pt||T.setSelectionRange(4,pt),re=4,ue=pt)}:function(){if(!X&&!q&&(Ae||pe)){X=!0;var ft,pt,vt=0,wt=0,Gt="",Wt=(G.session&&(vt=(Wt=(ft=G.selection).getRange()).start.column,wt=Wt.end.column,Gt=G.session.getLine(ft=ft.cursor.row),Wt.start.row!=ft?(pt=G.session.getLine(ft-1),vt=Wt.start.row<ft-1?0:vt,wt+=pt.length+1,Gt=pt+"\n"+Gt):Wt.end.row!=ft?(pt=G.session.getLine(ft+1),wt=Wt.end.row>ft+1?pt.length:wt,wt+=Gt.length+1,Gt=Gt+"\n"+pt):L&&0<ft&&(Gt="\n"+Gt,wt+=1,vt+=1),400<Gt.length)&&(vt<400&&wt<400?Gt=Gt.slice(0,400):(Gt="\n",vt==wt?vt=wt=0:(vt=0,wt=1))),Gt+"\n\n");if(Wt!=N&&(T.value=N=Wt,re=ue=Wt.length),pe&&(re=T.selectionStart,ue=T.selectionEnd),ue!=wt||re!=vt||T.selectionEnd!=ue)try{T.setSelectionRange(vt,wt),re=vt,ue=wt}catch{}X=!1}},Ge=(this.resetSelection=Ie,Ae&&G.onFocus(),function(ft){return 0===ft.selectionStart&&ft.selectionEnd>=N.length&&ft.value===N&&N&&ft.selectionEnd!==ue}),oe=null,pe=(this.setInputHandler=function(ft){oe=ft},!(this.getInputHandler=function(){return oe})),ge=function(ft,pt){if(pe=pe&&!1,J)return Ie(),ft&&G.onPaste(ft),J=!1,"";for(var vt=T.selectionStart,wt=T.selectionEnd,Gt=re,Wt=N.length-ue,Ke=ft,Ze=ft.length-vt,Ct=ft.length-wt,Rt=0;0<Gt&&N[Rt]==ft[Rt];)Rt++,Gt--;for(Ke=Ke.slice(Rt),Rt=1;0<Wt&&N.length-Rt>re-1&&N[N.length-Rt]==ft[ft.length-Rt];)Rt++,Wt--;Ze-=Rt-1,Ct-=Rt-1;var yt=Ke.length-Rt+1;return yt<0&&(Gt=-yt,yt=0),Ke=Ke.slice(0,yt),pt||Ke||Ze||Gt||Wt||Ct?(yt=!(q=!0),S.isAndroid&&". "==Ke&&(Ke="  ",yt=!0),Ke&&!Gt&&!Wt&&!Ze&&!Ct||j?G.onTextInput(Ke):G.onTextInput(Ke,{extendLeft:Gt,extendRight:Wt,restoreStart:Ze,restoreEnd:Ct}),q=!1,N=ft,re=vt,ue=wt,ve=Ct,yt?"\n":Ke):""},be=function(pt){if(X)return de();if(pt&&pt.inputType){if("historyUndo"==pt.inputType)return G.execCommand("undo");if("historyRedo"==pt.inputType)return G.execCommand("redo")}var vt=ge(pt=T.value,!0);(500<pt.length||x.test(vt)||L&&re<1&&re==ue)&&Ie()},ie=function(ft,pt,vt){var wt=ft.clipboardData||window.clipboardData;if(wt&&!f){var Gt=m||vt?"Text":"text/plain";try{return pt?!1!==wt.setData(Gt,pt):wt.getData(Gt)}catch(Wt){if(!vt)return ie(Wt,pt,!0)}}},se=function(ft,pt){var vt=G.getCopyText();if(!vt)return R.preventDefault(ft);ie(ft,vt)?(C&&(Ie(vt),V=vt,setTimeout(function(){V=!1},10)),pt?G.onCut():G.onCopy(),R.preventDefault(ft)):(V=!0,T.value=vt,T.select(),setTimeout(function(){V=!1,Ie(),pt?G.onCut():G.onCopy()}))},de=(R.addCommandKeyListener(T,G.onCommandKey.bind(G),G),R.addListener(T,"select",function(ft){X||(V?V=!1:Ge(T)?(G.selectAll(),Ie()):L&&T.selectionStart!=re&&Ie())},G),R.addListener(T,"input",be,G),R.addListener(T,"cut",Te,G),R.addListener(T,"copy",Re,G),R.addListener(T,"paste",Me,G),"oncut"in T&&"oncopy"in T&&"onpaste"in T||R.addListener(Q,"keydown",function(ft){if((!S.isMac||ft.metaKey)&&ft.ctrlKey)switch(ft.keyCode){case 67:Re(ft);break;case 86:Me(ft);break;case 88:Te(ft)}},G),function(){var ft;if(X&&G.onCompositionUpdate&&!G.$readOnly)return j?$e():void(X.useTextareaForIME?G.onCompositionUpdate(T.value):(ft=T.value,ge(ft),X.markerRange&&(X.context&&(X.markerRange.start.column=X.selectionStart=X.context.compositionStartOffset),X.markerRange.end.column=X.markerRange.start.column+ue-X.selectionStart+ve)))}),_e=function(ft){G.onCompositionEnd&&!G.$readOnly&&(X=!1,G.onCompositionEnd(),G.off("mousedown",$e),ft)&&be()};function $e(){D=!0,T.blur(),T.focus(),D=!1}var Xe,ut=w.delayedCall(de,50).schedule.bind(null,null);function mt(){clearTimeout(Xe),Xe=setTimeout(function(){ee&&(T.style.cssText=ee,ee=""),G.renderer.$isMousePressed=!1,G.renderer.$keepTextAreaAtCursor&&G.renderer.$moveTextAreaToCursor()},0)}function ct(ft){G.textInput.onContextMenu(ft),mt()}if(R.addListener(T,"compositionstart",function(ft){X||!G.onCompositionStart||G.$readOnly||(X={},j)||(ft.data&&(X.useTextareaForIME=!1),setTimeout(de,0),G._signal("compositionStart"),G.on("mousedown",$e),(ft=G.getSelectionRange()).end.row=ft.start.row,ft.end.column=ft.start.column,X.markerRange=ft,X.selectionStart=re,G.onCompositionStart(X),X.useTextareaForIME?(N=T.value="",ue=re=0):(T.msGetInputContext&&(X.context=T.msGetInputContext()),T.getInputContext&&(X.context=T.getInputContext())))},G),R.addListener(T,"compositionupdate",de,G),R.addListener(T,"keyup",function(ft){27==ft.keyCode&&T.value.length<T.selectionStart&&(X||(N=T.value),re=ue=-1,Ie()),ut()},G),R.addListener(T,"keydown",ut,G),R.addListener(T,"compositionend",_e,G),this.getElement=function(){return T},this.setCommandMode=function(ft){j=ft,T.readOnly=!1},this.setReadOnly=function(ft){j||(T.readOnly=ft)},this.setCopyWithEmptySelection=function(ft){},this.onContextMenu=function(ft){pe=!0,Ie(),G._emit("nativecontextmenu",{target:G,domEvent:ft}),this.moveToMouse(ft,!0)},this.moveToMouse=function(ft,wt){function vt(Ct){y.translate(T,Ct.clientX-Ke-2,Math.min(Ct.clientY-Wt-2,Ze))}ee=ee||T.style.cssText,T.style.cssText=(wt?"z-index:100000;":"")+(S.isIE?"opacity:0.1;":"")+"text-indent: -"+(re+ue)*G.renderer.characterWidth*.5+"px;",wt=G.container.getBoundingClientRect();var Gt=y.computedStyle(G.container),Wt=wt.top+(parseInt(Gt.borderTopWidth)||0),Ke=wt.left+(parseInt(wt.borderLeftWidth)||0),Ze=wt.bottom-Wt-T.clientHeight-2;vt(ft),"mousedown"==ft.type&&(G.renderer.$isMousePressed=!0,clearTimeout(Xe),S.isWin)&&R.capture(G.container,vt,mt)},this.onContextMenuClose=mt,R.addListener(T,"mouseup",ct,G),R.addListener(T,"mousedown",function(ft){ft.preventDefault(),mt()},G),R.addListener(G.renderer.scroller,"contextmenu",ct,G),R.addListener(T,"contextmenu",ct,G),C){let ft=function(pt){var vt,wt,Gt,Wt;document.activeElement!==St||yn||X||Tt.$mouseHandler.isMousePressed||V||(wt=St.selectionEnd,Gt=null,(Wt=0)==(vt=St.selectionStart)?Gt=v.up:1==vt?Gt=v.home:ue<wt&&"\n"==N[wt]?Gt=v.end:vt<re&&" "==N[vt-1]?(Gt=v.left,Wt=O.option):vt<re||vt==re&&ue!=re&&vt==wt?Gt=v.left:ue<wt&&2<N.slice(0,wt).split("\n").length?Gt=v.down:ue<wt&&" "==N[wt-1]?(Gt=v.right,Wt=O.option):(ue<wt||wt==ue&&ue!=re&&vt==wt)&&(Gt=v.right),vt!==wt&&(Wt|=O.shift),Gt&&(!Tt.onCommandKey({},Wt,Gt)&&Tt.commands&&(Gt=v.keyCodeToString(Gt),Wt=Tt.commands.findKeyCommand(Wt,Gt))&&Tt.execCommand(Wt),re=vt,ue=wt,Ie("")))};var Tt=G,St=T,Et=null,yn=!1;St.addEventListener("keydown",function(pt){Et&&clearTimeout(Et),yn=!0},!0),St.addEventListener("keyup",function(pt){Et=setTimeout(function(){yn=!1},100)},!0),document.addEventListener("selectionchange",ft),Tt.on("destroy",function(){document.removeEventListener("selectionchange",ft)})}this.destroy=function(){T.parentElement&&T.parentElement.removeChild(T)}},_.$setUserAgentForTests=function(Q,G){L=Q,C=G}}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(k,_,M){"use strict";var R=k("../lib/useragent");function S(w){w.$clickSelection=null;var p=w.editor;p.setDefaultHandler("mousedown",this.onMouseDown.bind(w)),p.setDefaultHandler("dblclick",this.onDoubleClick.bind(w)),p.setDefaultHandler("tripleclick",this.onTripleClick.bind(w)),p.setDefaultHandler("quadclick",this.onQuadClick.bind(w)),p.setDefaultHandler("mousewheel",this.onMouseWheel.bind(w)),["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach(function(f){w[f]=this[f]},this),w.selectByLines=this.extendSelectionBy.bind(w,"getLineRange"),w.selectByWords=this.extendSelectionBy.bind(w,"getWordRange")}function y(w,p){return(w.start.row==w.end.row?2*p.column-w.start.column-w.end.column:w.start.row!=w.end.row-1||w.start.column||w.end.column?2*p.row-w.start.row-w.end.row:p.column-4)<0?{cursor:w.start,anchor:w.end}:{cursor:w.end,anchor:w.start}}(function(){this.onMouseDown=function(w){var p=w.inSelection(),f=w.getDocumentPosition(),m=(this.mousedownEvent=w,this.editor),h=w.getButton();if(0!==h)!m.getSelectionRange().isEmpty()&&1!=h||m.selection.moveToPosition(f),2==h&&(m.textInput.onContextMenu(w.domEvent),R.isMozilla||w.preventDefault());else{if(this.mousedownEvent.time=Date.now(),!p||m.isFocused()||(m.focus(),!this.$focusTimeout)||this.$clickSelection||m.inMultiSelectMode)return this.captureMouse(w),this.startSelect(f,1<w.domEvent._clicks),w.preventDefault();this.setState("focusWait"),this.captureMouse(w)}},this.startSelect=function(w,p){w=w||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var f=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?f.selection.selectToPosition(w):p||f.selection.moveToPosition(w),p||this.select(),f.setStyle("ace_selecting"),this.setState("select"))},this.select=function(){var w,p=this.editor,f=p.renderer.screenToTextCoordinates(this.x,this.y);this.$clickSelection&&(w=-1==(w=this.$clickSelection.comparePoint(f))?this.$clickSelection.end:1==w?this.$clickSelection.start:(f=(w=y(this.$clickSelection,f)).cursor,w.anchor),p.selection.setSelectionAnchor(w.row,w.column)),p.selection.selectToPosition(f),p.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(O){var p,f,m,h=this.editor,v=h.renderer.screenToTextCoordinates(this.x,this.y);O=h.selection[O](v.row,v.column),this.$clickSelection&&(f=this.$clickSelection.comparePoint(O.start),p=this.$clickSelection.comparePoint(O.end),-1==f&&p<=0?(m=this.$clickSelection.end,O.end.row==v.row&&O.end.column==v.column||(v=O.start)):1==p&&0<=f?(m=this.$clickSelection.start,O.start.row==v.row&&O.start.column==v.column||(v=O.end)):m=-1==f&&1==p?(v=O.end,O.start):(v=(f=y(this.$clickSelection,v)).cursor,f.anchor),h.selection.setSelectionAnchor(m.row,m.column)),h.selection.selectToPosition(v),h.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},this.focusWait=function(){m=this.mousedownEvent.x,w=this.mousedownEvent.y,f=this.x,p=this.y;var w,p,f=Math.sqrt(Math.pow(f-m,2)+Math.pow(p-w,2)),m=Date.now();(0<f||m-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(p){p=p.getDocumentPosition();var f=this.editor,m=f.session.getBracketRange(p);m?(m.isEmpty()&&(m.start.column--,m.end.column++),this.setState("select")):(m=f.selection.getWordRange(p.row,p.column),this.setState("selectByWords")),this.$clickSelection=m,this.select()},this.onTripleClick=function(p){p=p.getDocumentPosition();var f=this.editor,m=(this.setState("selectByLines"),f.getSelectionRange());m.isMultiLine()&&m.contains(p.row,p.column)?(this.$clickSelection=f.selection.getLineRange(m.start.row),this.$clickSelection.end=f.selection.getLineRange(m.end.row).end):this.$clickSelection=f.selection.getLineRange(p.row),this.select()},this.onQuadClick=function(w){var p=this.editor;p.selectAll(),this.$clickSelection=p.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(w){var p,f,m,h,v,O,C;if(!w.getAccelKey())return w.getShiftKey()&&w.wheelY&&!w.wheelX&&(w.wheelX=w.wheelY,w.wheelY=0),p=this.editor,this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0}),h=(C=(m=w.domEvent.timeStamp)-(f=this.$lastScroll).t)?w.wheelX/C:f.vx,v=C?w.wheelY/C:f.vy,C<550&&(h=(h+f.vx)/2,v=(v+f.vy)/2),C=!1,1<=(O=Math.abs(h/v))&&p.renderer.isScrollableBy(w.wheelX*w.speed,0)&&(C=!0),(C=!!(O<=1&&p.renderer.isScrollableBy(0,w.wheelY*w.speed))||C)?f.allowed=m:m-f.allowed<550&&(Math.abs(h)<=1.5*Math.abs(f.vx)&&Math.abs(v)<=1.5*Math.abs(f.vy)?(C=!0,f.allowed=m):f.allowed=0),f.t=m,f.vx=h,f.vy=v,C?(p.renderer.scrollBy(w.wheelX*w.speed,w.wheelY*w.speed),w.stop()):void 0}}).call(S.prototype),_.DefaultHandlers=S}),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(k,_,M){"use strict";k("./lib/oop");var R=k("./lib/dom"),S="ace_tooltip";function y(w){this.isOpen=!1,this.$element=null,this.$parentNode=w}(function(){this.$init=function(){return this.$element=R.createElement("div"),this.$element.className=S,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(w){this.getElement().textContent=w},this.setHtml=function(w){this.getElement().innerHTML=w},this.setPosition=function(w,p){this.getElement().style.left=w+"px",this.getElement().style.top=p+"px"},this.setClassName=function(w){R.addCssClass(this.getElement(),w)},this.show=function(w,p,f){null!=w&&this.setText(w),null!=p&&null!=f&&this.setPosition(p,f),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=S,this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(y.prototype),_.Tooltip=y}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(k,_,M){"use strict";var R=k("../lib/dom"),S=k("../lib/oop"),y=k("../lib/event"),w=k("../tooltip").Tooltip;function p(f){w.call(this,f)}S.inherits(p,w),function(){this.setPosition=function(f,m){var h=window.innerWidth||document.documentElement.clientWidth,v=window.innerHeight||document.documentElement.clientHeight,O=this.getWidth(),C=this.getHeight();h<(f+=15)+O&&(f-=f+O-h),v<(m+=15)+C&&(m-=20+C),w.prototype.setPosition.call(this,f,m)}}.call(p.prototype),_.GutterHandler=function(f){var m,h,v,O=f.editor,C=O.renderer.$gutterLayer,x=new p(O.container);function L(){m=m&&clearTimeout(m),v&&(x.hide(),v=null,O._signal("hideGutterTooltip",x),O.off("mousewheel",L))}function Q(G){x.setPosition(G.x,G.y)}f.editor.setDefaultHandler("guttermousedown",function(G){if(O.isFocused()&&0==G.getButton()&&"foldWidgets"!=(T=C.getRegion(G))){var T=G.getDocumentPosition().row,V=O.session.selection;if(G.getShiftKey())V.selectTo(T,0);else{if(2==G.domEvent.detail)return O.selectAll(),G.preventDefault();f.$clickSelection=O.selection.getLineRange(T)}return f.setState("selectByLines"),f.captureMouse(G),G.preventDefault()}}),f.editor.setDefaultHandler("guttermousemove",function(G){if(R.hasCssClass(G.domEvent.target||G.domEvent.srcElement,"ace_fold-widget"))return L();v&&f.$tooltipFollowsMouse&&Q(G),h=G,m=m||setTimeout(function(){if(m=null,h&&!f.isMousePressed){var V=h.getDocumentPosition().row,J=C.$annotations[V];if(J){if(V==O.session.getLength()){V=O.renderer.pixelToScreenCoordinates(0,h.y).row;var X=h.$pos;if(V>O.session.documentToScreenRow(X.row,X.column))return void L()}v!=J&&(v=J.text.join("<br/>"),x.setHtml(v),(V=J.className)&&x.setClassName(V.trim()),x.show(),O._signal("showGutterTooltip",x),O.on("mousewheel",L),f.$tooltipFollowsMouse?Q(h):(X=h.domEvent.target.getBoundingClientRect(),(J=x.getElement().style).left=X.right+"px",J.top=X.bottom+"px"))}else L()}else L()},50)}),y.addListener(O.renderer.$gutter,"mouseout",function(G){h=null,v&&(m=m||setTimeout(function(){m=null,L()},50))},O),O.on("changeSession",L)}}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(y,_,M){"use strict";var R=y("../lib/event"),S=y("../lib/useragent");y=_.MouseEvent=function(w,p){this.domEvent=w,this.editor=p,this.x=this.clientX=w.clientX,this.y=this.clientY=w.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1},function(){this.stopPropagation=function(){R.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){R.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos||(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY)),this.$pos},this.inSelection=function(){var w,p;return null===this.$inSelection&&((w=this.editor.getSelectionRange()).isEmpty()?this.$inSelection=!1:(p=this.getDocumentPosition(),this.$inSelection=w.contains(p.row,p.column))),this.$inSelection},this.getButton=function(){return R.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=S.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}.call(y.prototype)}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(k,_,M){"use strict";var R=k("../lib/dom"),S=k("../lib/event"),y=k("../lib/useragent");function w(f){var m,h,v,O,C,x,L,Q,G,T,V,J=f.editor,X=R.createElement("div"),q=(X.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",X.textContent="\xa0",["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach(function(Te){f[Te]=this[Te]},this),J.on("mousedown",this.onMouseDown.bind(f)),J.container),ee=0;function j(){var Te,Re,Me,Ie,Ge,oe,pe,ge,be=x;Me=x=J.renderer.screenToTextCoordinates(h,v),Re=be,Ie=Date.now(),Te=!Re||Me.row!=Re.row,Re=!Re||Me.column!=Re.column,!T||Te||Re?(J.moveCursorToPosition(Me),T=Ie,V={x:h,y:v}):5<p(V.x,V.y,h,v)?T=null:200<=Ie-T&&(J.renderer.scrollCursorIntoView(),T=null),Te=x,Re=be,Me=Date.now(),Ie=J.renderer.layerConfig.lineHeight,be=J.renderer.layerConfig.characterWidth,Ge=J.renderer.scroller.getBoundingClientRect(),Ge={x:{left:h-Ge.left,right:Ge.right-h},y:{top:v-Ge.top,bottom:Ge.bottom-v}},oe=Math.min(Ge.x.left,Ge.x.right),pe=Math.min(Ge.y.top,Ge.y.bottom),ge={row:Te.row,column:Te.column},oe/be<=2&&(ge.column+=Ge.x.left<Ge.x.right?-3:2),pe/Ie<=1&&(ge.row+=Ge.y.top<Ge.y.bottom?-1:1),be=Te.column!=ge.column,pe=!Re||Te.row!=Re.row,(oe=Te.row!=ge.row)||be&&!pe?G?200<=Me-G&&J.renderer.scrollCursorIntoView(ge):G=Me:G=null}function D(){C=J.selection.toOrientedRange(),m=J.session.addMarker(C,"ace_selection",J.getSelectionStyle()),J.clearSelection(),J.isFocused()&&J.renderer.$cursorLayer.setBlinking(!1),clearInterval(O),j(),O=setInterval(j,20),ee=0,S.addListener(document,"mousemove",ue)}function N(){clearInterval(O),J.session.removeMarker(m),m=null,J.selection.fromOrientedRange(C),J.isFocused()&&!Q&&J.$resetCursorStyle(),ee=0,T=G=x=C=null,S.removeListener(document,"mousemove",ue)}this.onDragStart=function(Te){var Re;if(this.cancelDrag||!q.draggable)return Re=this,setTimeout(function(){Re.startSelect(),Re.captureMouse(Te)},0),Te.preventDefault();C=J.getSelectionRange();var Me=Te.dataTransfer;Me.effectAllowed=J.getReadOnly()?"copy":"copyMove",J.container.appendChild(X),Me.setDragImage&&Me.setDragImage(X,0,0),setTimeout(function(){J.container.removeChild(X)}),Me.clearData(),Me.setData("Text",J.session.getTextRange()),Q=!0,this.setState("drag")},this.onDragEnd=function(Te){q.draggable=!1,Q=!1,this.setState(null),J.getReadOnly()||(Te=Te.dataTransfer.dropEffect,L||"move"!=Te||J.session.remove(J.getSelectionRange()),J.$resetCursorStyle()),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(Te){if(!J.getReadOnly()&&ve(Te.dataTransfer))return h=Te.clientX,v=Te.clientY,m||D(),ee++,Te.dataTransfer.dropEffect=L=Ae(Te),S.preventDefault(Te)},this.onDragOver=function(Te){if(!J.getReadOnly()&&ve(Te.dataTransfer))return h=Te.clientX,v=Te.clientY,m||(D(),ee++),null!==re&&(re=null),Te.dataTransfer.dropEffect=L=Ae(Te),S.preventDefault(Te)},this.onDragLeave=function(Te){if(--ee<=0&&m)return N(),L=null,S.preventDefault(Te)},this.onDrop=function(Te){if(x){var Re=Te.dataTransfer;if(Q)switch(L){case"move":C=C.contains(x.row,x.column)?{start:x,end:x}:J.moveText(C,x);break;case"copy":C=J.moveText(C,x,!0)}else Re=Re.getData("Text"),C={start:x,end:J.session.insert(x,Re)},J.focus(),L=null;return N(),S.preventDefault(Te)}},S.addListener(q,"dragstart",this.onDragStart.bind(f),J),S.addListener(q,"dragend",this.onDragEnd.bind(f),J),S.addListener(q,"dragenter",this.onDragEnter.bind(f),J),S.addListener(q,"dragover",this.onDragOver.bind(f),J),S.addListener(q,"dragleave",this.onDragLeave.bind(f),J),S.addListener(q,"drop",this.onDrop.bind(f),J);var re=null;function ue(){null==re&&(re=setTimeout(function(){null!=re&&m&&N()},20))}function ve(Te){return!(Te=Te.types)||Array.prototype.some.call(Te,function(Re){return"text/plain"==Re||"Text"==Re})}function Ae(Te){var Re=["copy","copymove","all","uninitialized"],Me=y.isMac?Te.altKey:Te.ctrlKey,Ie="uninitialized";try{Ie=Te.dataTransfer.effectAllowed.toLowerCase()}catch{}var Ge="none";return Me&&0<=Re.indexOf(Ie)?Ge="copy":0<=["move","copymove","linkmove","all","uninitialized"].indexOf(Ie)?Ge="move":0<=Re.indexOf(Ie)&&(Ge="copy"),Ge}}function p(f,m,h,v){return Math.sqrt(Math.pow(h-f,2)+Math.pow(v-m,2))}(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(f){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var f=this.editor,m=(f.container.draggable=!0,f.renderer.$cursorLayer.setBlinking(!1),f.setStyle("ace_dragging"),y.isWin?"default":"move");f.renderer.setCursorStyle(m),this.setState("dragReady")},this.onMouseDrag=function(f){var m=this.editor.container;y.isIE&&"dragReady"==this.state&&3<p(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)&&m.dragDrop(),"dragWait"===this.state&&0<p(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)&&(m.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))},this.onMouseDown=function(f){var m,h,v;this.$dragEnabled&&(this.mousedownEvent=f,m=this.editor,h=f.inSelection(),v=f.getButton(),1!==(f.domEvent.detail||1)||0!==v||!h||f.editor.inMultiSelectMode&&(f.getAccelKey()||f.getShiftKey())||(this.mousedownEvent.time=Date.now(),"unselectable"in(v=f.domEvent.target||f.domEvent.srcElement)&&(v.unselectable="on"),m.getDragDelay()?(y.isWebKit&&(this.cancelDrag=!0,m.container.draggable=!0),this.setState("dragWait")):this.startDrag(),this.captureMouse(f,this.onMouseDrag.bind(this)),f.defaultPrevented=!0))}}).call(w.prototype),_.DragdropHandler=w}),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(k,_,M){"use strict";var R=k("./mouse_event").MouseEvent,S=k("../lib/event"),y=k("../lib/dom");_.addTouchListeners=function(w,p){var f,m,h,v,O,C,x,L,Q,G="scroll",T=0,V=0,J=0,X=0;function ee(){Q||function q(){function N(ve){var Ae,Te=ve.target.getAttribute("action");"more"!=Te&&ue?("paste"==Te?re.readText().then(function(Re){p.execCommand(Te,Re)}):Te&&("cut"!=Te&&"copy"!=Te||(re?re.writeText(p.getCopyText()):document.execCommand("copy")),p.execCommand(Te)),Q.firstChild.style.display="none",ue=!1,"openCommandPallete"!=Te&&p.focus()):(ue=!ue,ve=p.getCopyText(),Ae=p.session.getUndoManager().hasUndo(),Q.replaceChild(y.buildDom(ue?["span",!ve&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],ve&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],ve&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],re&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],Ae&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPallete"},"Palette"]]:["span"]),Q.firstChild))}var re=window.navigator&&window.navigator.clipboard,ue=!1;Q=y.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(ve){G="menu",ve.stopPropagation(),ve.preventDefault(),p.textInput.focus()},ontouchend:function(ve){ve.stopPropagation(),ve.preventDefault(),N(ve)},onclick:N},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],p.container)}();var N=p.renderer.textToScreenCoordinates((N=p.selection.cursor).row,N.column),re=p.renderer.textToScreenCoordinates(0,0).pageX,ue=p.renderer.scrollLeft,ve=p.container.getBoundingClientRect();Q.style.top=N.pageY-ve.top-3+"px",N.pageX-ve.left<ve.width-70?(Q.style.left="",Q.style.right="10px"):(Q.style.right="",Q.style.left=re+ue-ve.left+"px"),Q.style.display="",Q.firstChild.style.display="none",p.on("input",j)}function j(N){Q&&(Q.style.display="none"),p.off("input",j)}function D(){O=null,clearTimeout(O);var N=p.selection.getRange(),re=N.contains(x.row,x.column);!N.isEmpty()&&re||(p.selection.moveToPosition(x),p.selection.selectWord()),G="wait",ee()}S.addListener(w,"contextmenu",function(N){L&&p.textInput.getElement().focus()},p),S.addListener(w,"touchstart",function(N){var re=N.touches;if(O||1<re.length)clearTimeout(O),O=null,h=-1,G="zoom";else{L=p.$mouseHandler.isMousePressed=!0;var ue=p.renderer.layerConfig.lineHeight,ve=p.renderer.layerConfig.lineHeight,Ae=N.timeStamp,Re=(v=Ae,Te=re[0]).clientX,Te=Te.clientY;if(Math.abs(f-Re)+Math.abs(m-Te)>ue&&(h=-1),f=N.clientX=Re,m=N.clientY=Te,J=X=0,Re=new R(N,p),x=Re.getDocumentPosition(),Ae-h<500&&1==re.length&&!T)V++,N.preventDefault(),N.button=0,O=null,clearTimeout(O),p.selection.moveToPosition(x),(Te=2<=V?p.selection.getLineRange(x.row):p.session.getBracketRange(x))&&!Te.isEmpty()?p.selection.setRange(Te):p.selection.selectWord(),G="wait";else{V=0,Re=p.selection.cursor,re=p.selection.isEmpty()?Re:p.selection.anchor,Te=p.renderer.$cursorLayer.getPixelPosition(Re,!0),Re=p.renderer.$cursorLayer.getPixelPosition(re,!0),re=p.renderer.scroller.getBoundingClientRect();var Me=p.renderer.layerConfig.offset,Ie=p.renderer.scrollLeft,Ge=function(be,ie){return(be/=ve)*be+(ie=ie/ue-.75)*ie};if(N.clientX<re.left)return void(G="zoom");Te=Ge(N.clientX-re.left-Te.left+Ie,N.clientY-re.top-Te.top+Me),Ge=Ge(N.clientX-re.left-Re.left+Ie,N.clientY-re.top-Re.top+Me),Te<3.5&&Ge<3.5&&(G=Ge<Te?"cursor":"anchor"),G=Ge<3.5?"anchor":Te<3.5?"cursor":"scroll",O=setTimeout(D,450)}h=Ae}},p),S.addListener(w,"touchend",function(N){L=p.$mouseHandler.isMousePressed=!1,C&&clearInterval(C),"zoom"==G?(G="",T=0):(O?(p.selection.moveToPosition(x),T=0,ee):"scroll"==G?(T+=60,C=setInterval(function(){T--<=0&&(clearInterval(C),C=null),Math.abs(J)<.01&&(J=0),Math.abs(X)<.01&&(X=0),T<20&&(J*=.9),T<20&&(X*=.9);var re=p.session.getScrollTop();p.renderer.scrollBy(10*J,10*X),re==p.session.getScrollTop()&&(T=0)},10),j):ee)(),clearTimeout(O),O=null},p),S.addListener(w,"touchmove",function(N){if(O&&(clearTimeout(O),O=null),!(1<(re=N.touches).length||"zoom"==G)){var ue=f-(re=re[0]).clientX,ve=m-re.clientY;if("wait"==G){if(!(4<ue*ue+ve*ve))return N.preventDefault();G="cursor"}f=re.clientX,m=re.clientY,N.clientX=re.clientX,N.clientY=re.clientY;var re,Ae=(re=N.timeStamp)-v;v=re,"scroll"==G?((re=new R(N,p)).speed=1,re.wheelX=ue,re.wheelY=ve,10*Math.abs(ue)<Math.abs(ve)&&(ue=0),10*Math.abs(ve)<Math.abs(ue)&&(ve=0),0!=Ae&&(J=ue/Ae,X=ve/Ae),p._emit("mousewheel",re),re.propagationStopped||(J=X=0)):(ue=new R(N,p).getDocumentPosition(),"cursor"==G?p.selection.moveCursorToPosition(ue):"anchor"==G&&p.selection.setSelectionAnchor(ue.row,ue.column),p.renderer.scrollCursorIntoView(ue),N.preventDefault())}},p)}}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(v,_,M){"use strict";function R(O){function C(G){document.hasFocus&&document.hasFocus()&&(O.isFocused()||document.activeElement!=(O.textInput&&O.textInput.getElement()))||window.focus(),O.focus(),setTimeout(function(){O.isFocused()||O.focus()})}var x=this,L=(this.editor=O,new w(this),new p(this),new m(this),O.renderer.getMouseEventTarget()),Q=(S.addListener(L,"click",this.onMouseEvent.bind(this,"click"),O),S.addListener(L,"mousemove",this.onMouseMove.bind(this,"mousemove"),O),S.addMultiMouseDownListener([L,O.renderer.scrollBarV&&O.renderer.scrollBarV.inner,O.renderer.scrollBarH&&O.renderer.scrollBarH.inner,O.textInput&&O.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",O),S.addMouseWheelListener(O.container,this.onMouseWheel.bind(this,"mousewheel"),O),h(O.container,O),O.renderer.$gutter);S.addListener(Q,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),O),S.addListener(Q,"click",this.onMouseEvent.bind(this,"gutterclick"),O),S.addListener(Q,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),O),S.addListener(Q,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),O),S.addListener(L,"mousedown",C,O),S.addListener(Q,"mousedown",C,O),y.isIE&&O.renderer.scrollBarV&&(S.addListener(O.renderer.scrollBarV.element,"mousedown",C,O),S.addListener(O.renderer.scrollBarH.element,"mousedown",C,O)),O.on("mousemove",function(G){var T,V;x.state||x.$dragDelay||!x.$dragEnabled||(G=O.renderer.screenToTextCoordinates(G.x,G.y),T=O.session.selection.getRange(),V=O.renderer,!T.isEmpty()&&T.insideStart(G.row,G.column)?V.setCursorStyle("default"):V.setCursorStyle(""))},O)}var S=v("../lib/event"),y=v("../lib/useragent"),w=v("./default_handlers").DefaultHandlers,p=v("./default_gutter_handler").GutterHandler,f=v("./mouse_event").MouseEvent,m=v("./dragdrop_handler").DragdropHandler,h=v("./touch_handler").addTouchListeners;v=v("../config"),function(){this.onMouseEvent=function(O,C){this.editor.session&&this.editor._emit(O,new f(C,this.editor))},this.onMouseMove=function(O,C){var x=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;x&&x.length&&this.editor._emit(O,new f(C,this.editor))},this.onMouseWheel=function(O,C){var x=new f(C,this.editor);x.speed=2*this.$scrollSpeed,x.wheelX=C.wheelX,x.wheelY=C.wheelY,this.editor._emit(O,x)},this.setState=function(O){this.state=O},this.captureMouse=function(O,C){function x(q){if(q){if(y.isWebKit&&!q.which&&V.releaseMouse)return V.releaseMouse();V.x=q.clientX,V.y=q.clientY,C&&C(q),V.mouseEvent=new f(q,V.editor),V.$mouseMoved=!0}}function L(q){G.off("beforeEndOperation",J),clearInterval(X),G.session&&Q(),V[V.state+"End"]&&V[V.state+"End"](q),V.state="",V.isMousePressed=T.$isMousePressed=!1,T.$keepTextAreaAtCursor&&T.$moveTextAreaToCursor(),V.$onCaptureMouseMove=V.releaseMouse=null,q&&V.onMouseEvent("mouseup",q),G.endOperation()}function Q(){V[V.state]&&V[V.state](),V.$mouseMoved=!1}this.x=O.x,this.y=O.y,this.isMousePressed=!0;var G=this.editor,T=this.editor.renderer,V=(T.$isMousePressed=!0,this);if(y.isOldIE&&"dblclick"==O.domEvent.type)return setTimeout(function(){L(O)});var J=function(q){V.releaseMouse&&G.curOp.command.name&&G.curOp.selectionChanged&&(V[V.state+"End"]&&V[V.state+"End"](),V.state="",V.releaseMouse())},X=(G.on("beforeEndOperation",J),G.startOperation({command:{name:"mouse"}}),V.$onCaptureMouseMove=x,V.releaseMouse=S.capture(this.editor.container,x,L),setInterval(Q,20))},this.releaseMouse=null,this.cancelContextMenu=function(){var O=function(C){C&&C.domEvent&&"contextmenu"!=C.domEvent.type||(this.editor.off("nativecontextmenu",O),C&&C.domEvent&&S.stopEvent(C.domEvent))}.bind(this);setTimeout(O,10),this.editor.on("nativecontextmenu",O)},this.destroy=function(){this.releaseMouse&&this.releaseMouse()}}.call(R.prototype),v.defineOptions(R.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:y.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),_.MouseHandler=R}),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(k,_,M){"use strict";var R=k("../lib/dom");_.FoldHandler=function(S){S.on("click",function(y){var p=y.getDocumentPosition(),w=S.session;(p=w.getFoldAt(p.row,p.column,1))&&(y.getAccelKey()?w.removeFold(p):w.expandFold(p),y.stop()),(p=y.domEvent&&y.domEvent.target)&&R.hasCssClass(p,"ace_inline_button")&&R.hasCssClass(p,"ace_toggle_wrap")&&(w.setOption("wrap",!w.getUseWrapMode()),S.renderer.scrollCursorIntoView())}),S.on("gutterclick",function(y){var w,p;"foldWidgets"==S.renderer.$gutterLayer.getRegion(y)&&(w=y.getDocumentPosition().row,(p=S.session).foldWidgets&&p.foldWidgets[w]&&S.session.onFoldWidgetClick(w,y),S.isFocused()||S.focus(),y.stop())}),S.on("gutterdblclick",function(y){var w,p,f;"foldWidgets"==S.renderer.$gutterLayer.getRegion(y)&&(f=y.getDocumentPosition().row,(p=(p=(w=S.session).getParentFoldRangeData(f,!0)).range||p.firstRange)&&((f=w.getFoldAt(f=p.start.row,w.getLine(f).length,1))?w.removeFold(f):(w.addFold("...",p),S.renderer.scrollCursorIntoView({row:p.start.row,column:0}))),y.stop())})}}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(k,_,M){"use strict";function R(w){this.$editor=w,this.$data={editor:w},this.$handlers=[],this.setDefaultHandler(w.commands)}var S=k("../lib/keys"),y=k("../lib/event");(function(){this.setDefaultHandler=function(w){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=w,this.addKeyboardHandler(w,0)},this.setKeyboardHandler=function(w){var p=this.$handlers;if(p[p.length-1]!=w){for(;p[p.length-1]&&p[p.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(p[p.length-1]);this.addKeyboardHandler(w,1)}},this.addKeyboardHandler=function(w,p){var f;w&&("function"!=typeof w||w.handleKeyboard||(w.handleKeyboard=w),-1!=(f=this.$handlers.indexOf(w))&&this.$handlers.splice(f,1),null==p?this.$handlers.push(w):this.$handlers.splice(p,0,w),-1==f)&&w.attach&&w.attach(this.$editor)},this.removeKeyboardHandler=function(w){var p=this.$handlers.indexOf(w);return-1!=p&&(this.$handlers.splice(p,1),w.detach&&w.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var w=this.$data,p=w.editor;return this.$handlers.map(function(f){return f.getStatusText&&f.getStatusText(p,w)||""}).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(w,p,f,m){for(var h,v=!1,O=this.$editor.commands,C=this.$handlers.length;C--&&!((h=this.$handlers[C].handleKeyboard(this.$data,w,p,f,m))&&h.command&&((v="null"==h.command||O.exec(h.command,this.$editor,h.args,m))&&m&&-1!=w&&1!=h.passEvent&&1!=h.command.passEvent&&y.stopEvent(m),v)););return v||-1!=w||(h={command:"insertstring"},v=O.exec("insertstring",this.$editor,p)),v&&this.$editor._signal&&this.$editor._signal("keyboardActivity",h),v},this.onCommandKey=function(w,p,f){var m=S.keyCodeToString(f);return this.$callKeyboardHandlers(p,m,f,w)},this.onTextInput=function(w){return this.$callKeyboardHandlers(-1,w)}}).call(R.prototype),_.KeyBinding=R}),ace.define("ace/lib/bidiutil",["require","exports","module"],function(k,_,M){"use strict";var R=0,S=0,y=!1,w=!1,p=!1,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h=0,v=1,O=2,C=3,x=4,G=7,X=11,q=12,ve=[18,18,18,18,18,18,18,18,18,6,5,6,8,5,18,18,18,18,18,18,18,18,18,18,18,18,18,18,5,5,5,6,8,x,x,X,X,X,x,x,x,x,x,10,9,10,9,9,O,O,O,O,O,O,O,O,O,O,9,x,x,x,x,x,x,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,x,x,x,x,x,x,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,x,x,x,x,18,18,18,18,18,18,5,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,x,X,X,X,X,x,x,x,x,h,x,x,18,x,x,X,X,O,O,x,h,x,x,x,O,h,x,x,x,x,x],Ae=[8,8,8,8,8,8,8,8,8,8,8,18,18,18,h,v,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,8,5,13,14,15,16,17,9,X,X,X,X,X,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,9,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,8];function Re(Ie,Ge,oe){if(!(S<Ie))if(1!=Ie||1!=R||w)for(var pe,ge,be,ie,se=oe.length,de=0;de<se;){if(Ge[de]>=Ie){for(pe=de+1;pe<se&&Ge[pe]>=Ie;)pe++;for(ge=de,be=pe-1;ge<be;ge++,be--)ie=oe[ge],oe[ge]=oe[be],oe[be]=ie;de=pe}de++}else oe.reverse()}function Me(Ie){var Ge=Ie.charCodeAt(0),oe=Ge>>8;return 0==oe?191<Ge?h:ve[Ge]:5==oe?/[\u0591-\u05f4]/.test(Ie)?v:h:6==oe?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(Ie)?q:/[\u0660-\u0669\u066b-\u066c]/.test(Ie)?C:1642==Ge?X:/[\u06f0-\u06f9]/.test(Ie)?O:G:32==oe&&Ge<=8287?Ae[255&Ge]:254==oe&&65136<=Ge?G:x}_.L=h,_.R=v,_.EN=O,_.ON_R=3,_.AN=4,_.R_H=5,_.B=6,_.RLE=7,_.DOT="\xb7",_.doBidiReorder=function(Ie,Ge,oe){if(Ie.length<2)return{};var pe=Ie.split(""),ge=new Array(pe.length),be=new Array(pe.length),ie=[];R=oe?1:0,function Te(Ie,Ge,oe,pe){var ge,be,ie,se=R?m:f,de=0,_e=-1,$e=null,Xe=null,ut=[];if(!pe)for($e=0,pe=[];$e<oe;$e++)pe[$e]=Me(Ie[$e]);for(S=R,p=w=y=!1,Xe=0;Xe<oe;Xe++){if(ie=de,ut[Xe]=ge=function(ct,Tt,St,Et){var yn,ft,pt,vt=Tt[Et];switch(vt){case h:case v:y=!1;case x:case C:return vt;case O:return y?C:O;case G:return y=!0,v;case 8:return x;case 9:return Et<1||Et+1>=Tt.length||(yn=St[Et-1])!=O&&yn!=C||(wt=Tt[Et+1])!=O&&wt!=C?x:(wt=y?C:wt)==yn?wt:x;case 10:return(yn=0<Et?St[Et-1]:5)==O&&Et+1<Tt.length&&Tt[Et+1]==O?O:x;case X:if(0<Et&&St[Et-1]==O)return O;if(y)return x;for(pt=Et+1,ft=Tt.length;pt<ft&&Tt[pt]==X;)pt++;return pt<ft&&Tt[pt]==O?O:x;case q:for(ft=Tt.length,pt=Et+1;pt<ft&&Tt[pt]==q;)pt++;var wt;return pt<ft&&(yn=Tt[pt],(wt=1425<=(wt=ct[Et])&&wt<=2303||64286==wt)&&(yn==v||yn==G))?v:Et<1||5==(yn=Tt[Et-1])?x:St[Et-1];case 5:return w=!(y=!1),R;case 6:return p=!0,x;case 13:case 14:case 16:case 17:case 15:y=!1;case 18:return x}}(Ie,pe,ut,Xe),ie=240&(de=se[ie][ge]),Ge[Xe]=be=se[de&=15][5],0<ie){if(16==ie)for($e=_e;$e<Xe;$e++)Ge[$e]=1;_e=-1}if(se[de][6])-1==_e&&(_e=Xe);else if(-1<_e){for($e=_e;$e<Xe;$e++)Ge[$e]=be;_e=-1}5==pe[Xe]&&(Ge[Xe]=0),S|=be}if(p)for($e=0;$e<oe;$e++)if(6==pe[$e]){Ge[$e]=R;for(var mt=$e-1;0<=mt&&8==pe[mt];mt--)Ge[mt]=R}}(pe,ie,pe.length,Ge);for(var se=0;se<ge.length;ge[se]=se,se++);for(Re(2,ie,ge),Re(1,ie,ge),se=0;se<ge.length-1;se++)Ge[se]===C?ie[se]=_.AN:ie[se]===v&&(Ge[se]>G&&Ge[se]<13||Ge[se]===x||18===Ge[se])?ie[se]=_.ON_R:0<se&&"\u0644"===pe[se-1]&&/\u0622|\u0623|\u0625|\u0627/.test(pe[se])&&(ie[se-1]=ie[se]=_.R_H,se++);for(pe[pe.length-1]===_.DOT&&(ie[pe.length-1]=_.B),"\u202b"===pe[0]&&(ie[0]=_.RLE),se=0;se<ge.length;se++)be[se]=ie[ge[se]];return{logicalFromVisual:ge,bidiLevels:be}},_.hasBidiCharacters=function(Ie,Ge){for(var oe=!1,pe=0;pe<Ie.length;pe++)Ge[pe]=Me(Ie.charAt(pe)),oe||Ge[pe]!=v&&Ge[pe]!=G&&Ge[pe]!=C||(oe=!0);return oe},_.getVisualFromLogicalIdx=function(Ie,Ge){for(var oe=0;oe<Ge.logicalFromVisual.length;oe++)if(Ge.logicalFromVisual[oe]==Ie)return oe;return 0}}),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(k,_,M){"use strict";function R(p){this.session=p,this.bidiMap={},this.currentRow=null,this.bidiUtil=S,this.charWidths=[],this.EOL="\xac",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xb6",this.RLE="\u202b",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=w.test(p.getValue())}var S=k("./lib/bidiutil"),y=k("./lib/lang"),w=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/;(function(){this.isBidiRow=function(p,f,m){return!!this.seenBidi&&(p!==this.currentRow&&(this.currentRow=p,this.updateRowLine(f,m),this.updateBidiMap()),this.bidiMap.bidiLevels)},this.onChange=function(p){this.seenBidi?this.currentRow=null:"insert"==p.action&&w.test(p.lines.join("\n"))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var f=this.session.$screenRowCache;return f.length&&0<=(f=this.session.$getRowCacheIndex(f,this.currentRow))?this.session.$docRowCache[f]:0},this.getSplitIndex=function(){var p=0,f=this.session.$screenRowCache;if(f.length)for(var m,h=this.session.$getRowCacheIndex(f,this.currentRow);0<this.currentRow-p&&(m=this.session.$getRowCacheIndex(f,this.currentRow-p-1))===h;)h=m,p++;else p=this.currentRow;return p},this.updateRowLine=function(p,f){var m,h=(p=void 0===p?this.getDocumentRow():p)===this.session.getLength()-1?this.EOF:this.EOL,v=(this.wrapIndent=0,this.line=this.session.getLine(p),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,(!this.session.$useWrapMode||(p=this.session.$wrapData[p])&&(0<(f=void 0===f?this.getSplitIndex():f)&&p.length?(this.wrapIndent=p.indent,this.wrapOffset=this.wrapIndent*this.charWidths[S.L],this.line=f<p.length?this.line.substring(p[f-1],p[f]):this.line.substring(p[p.length-1])):this.line=this.line.substring(0,p[f]),f==p.length))&&(this.line+=this.showInvisibles?h:S.DOT),this.session),O=0;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(C,x){return"\t"===C||v.isFullWidth(C.charCodeAt(0))?(m="\t"===C?v.getScreenTabSize(x+O):2,O+=m-1,y.stringRepeat(S.DOT,m)):C}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==S.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},this.updateBidiMap=function(){var p=[];this.bidiMap=S.hasBidiCharacters(this.line,p)||this.isRtlDir?S.doBidiReorder(this.line,p,this.isRtlDir):{}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(p){var f;this.characterWidth!==p.$characterSize.width&&(this.fontMetrics=p,f=this.characterWidth=p.$characterSize.width,p=p.$measureCharWidth("\u05d4"),this.charWidths[S.L]=this.charWidths[S.EN]=this.charWidths[S.ON_R]=f,this.charWidths[S.R]=this.charWidths[S.AN]=p,this.charWidths[S.R_H]=.45*p,this.charWidths[S.B]=this.charWidths[S.RLE]=0,this.currentRow=null)},this.setShowInvisibles=function(p){this.showInvisibles=p,this.currentRow=null},this.setEolChar=function(p){this.EOL=p},this.setContentWidth=function(p){this.contentWidth=p},this.isRtlLine=function(p){return!!this.$isRtl||(null!=p?this.session.getLine(p).charAt(0)==this.RLE:this.isRtlDir)},this.setRtlDirection=function(p,f){for(var m=p.getCursorPosition(),h=p.selection.getSelectionAnchor().row;h<=m.row;h++)f||p.session.getLine(h).charAt(0)!==p.session.$bidiHandler.RLE?f&&p.session.getLine(h).charAt(0)!==p.session.$bidiHandler.RLE&&p.session.doc.insert({column:0,row:h},p.session.$bidiHandler.RLE):p.session.doc.removeInLine(h,0,1)},this.getPosLeft=function(p){p-=this.wrapIndent;var f=this.line.charAt(0)===this.RLE?1:0,m=f<p?this.session.getOverwrite()?p:p-1:f,h=S.getVisualFromLogicalIdx(m,this.bidiMap),v=this.bidiMap.bidiLevels,O=0;!this.session.getOverwrite()&&p<=f&&v[h]%2!=0&&h++;for(var C=0;C<h;C++)O+=this.charWidths[v[C]];return!this.session.getOverwrite()&&f<p&&v[h]%2==0&&(O+=this.charWidths[v[h]]),this.wrapIndent&&(O+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(O+=this.rtlLineOffset),O},this.getSelections=function(p,f){var m,h=this.bidiMap,v=h.bidiLevels,O=[],C=0,x=Math.min(p,f)-this.wrapIndent,L=Math.max(p,f)-this.wrapIndent,Q=!1,G=!1,T=0;this.wrapIndent&&(C+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var V,J=0;J<v.length;J++)m=v[J],(Q=x<=(V=h.logicalFromVisual[J])&&V<L)&&!G?T=C:!Q&&G&&O.push({left:T,width:C-T}),C+=this.charWidths[m],G=Q;if(Q&&J===v.length&&O.push({left:T,width:C-T}),this.isRtlDir)for(var X=0;X<O.length;X++)O[X].left+=this.rtlLineOffset;return O},this.offsetToCol=function(m){this.isRtlDir&&(m-=this.rtlLineOffset);var f=0,h=(m=Math.max(m,0),0),v=0,O=this.bidiMap.bidiLevels,C=this.charWidths[O[v]];for(this.wrapIndent&&(m-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);h+C/2<m;){if(h+=C,v===O.length-1){C=0;break}C=this.charWidths[O[++v]]}return 0===(f=0<v&&O[v-1]%2!=0&&O[v]%2==0?(m<h&&v--,this.bidiMap.logicalFromVisual[v]):0<v&&O[v-1]%2==0&&O[v]%2!=0?1+(h<m?this.bidiMap.logicalFromVisual[v]:this.bidiMap.logicalFromVisual[v-1]):this.isRtlDir&&v===O.length-1&&0===C&&O[v-1]%2==0||!this.isRtlDir&&0===v&&O[v]%2!=0?1+this.bidiMap.logicalFromVisual[v]:(0<v&&O[v-1]%2!=0&&0!==C&&v--,this.bidiMap.logicalFromVisual[v]))&&this.isRtlDir&&f++,f+this.wrapIndent}}).call(R.prototype),_.BidiHandler=R}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(k,_,M){"use strict";function R(f){this.session=f,this.doc=f.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var m=this;this.cursor.on("change",function(h){m.$cursorChanged=!0,m.$silent||m._emit("changeCursor"),m.$isEmpty||m.$silent||m._emit("changeSelection"),m.$keepDesiredColumnOnChange||h.old.column==h.value.column||(m.$desiredColumn=null)}),this.anchor.on("change",function(){m.$anchorChanged=!0,m.$isEmpty||m.$silent||m._emit("changeSelection")})}var S=k("./lib/oop"),y=k("./lib/lang"),w=k("./lib/event_emitter").EventEmitter,p=k("./range").Range;(function(){S.implement(this,w),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setAnchor=function(f,m){this.$isEmpty=!1,this.anchor.setPosition(f,m)},this.setSelectionAnchor=this.setAnchor,this.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionAnchor=this.getAnchor,this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var f=this.anchor,m=this.lead;return f.row>m.row||f.row==m.row&&f.column>m.column},this.getRange=function(){var f=this.anchor,m=this.lead;return this.$isEmpty?p.fromPoints(m,m):this.isBackwards()?p.fromPoints(m,f):p.fromPoints(f,m)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(f,v){var h=v?f.end:f.start;this.$setSelection(h.row,h.column,(v=v?f.start:f.end).row,v.column)},this.$setSelection=function(f,m,h,v){var O,C;!this.$silent&&(O=this.$isEmpty,C=this.inMultiSelectMode,this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(f,m),this.cursor.setPosition(h,v),this.$isEmpty=!p.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),this.$cursorChanged||this.$anchorChanged||O!=this.$isEmpty||C)&&this._emit("changeSelection")},this.$moveSelection=function(f){var m=this.lead;this.$isEmpty&&this.setSelectionAnchor(m.row,m.column),f.call(this)},this.selectTo=function(f,m){this.$moveSelection(function(){this.moveCursorTo(f,m)})},this.selectToPosition=function(f){this.$moveSelection(function(){this.moveCursorToPosition(f)})},this.moveTo=function(f,m){this.clearSelection(),this.moveCursorTo(f,m)},this.moveToPosition=function(f){this.clearSelection(),this.moveCursorToPosition(f)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(f,m){var h;return void 0===m&&(f=(h=f||this.lead).row,m=h.column),this.session.getWordRange(f,m)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var f=this.getCursor();f=this.session.getAWordRange(f.row,f.column),this.setSelectionRange(f)},this.getLineRange=function(h,m){var v=(v=this.session.getFoldLine(h="number"==typeof h?h:this.lead.row))?(h=v.start.row,v.end.row):h;return!0===m?new p(h,0,v,this.session.getLine(v).length):new p(h,0,v+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(f,m,h){var v=f.column,O=f.column+m;return h<0&&(v=f.column-m,O=f.column),this.session.isTabStop(f)&&this.doc.getLine(f.row).slice(v,O).split(" ").length-1==m},this.moveCursorLeft=function(){var f,m=this.lead.getPosition();(f=this.session.getFoldAt(m.row,m.column,-1))?this.moveCursorTo(f.start.row,f.start.column):0===m.column?0<m.row&&this.moveCursorTo(m.row-1,this.doc.getLine(m.row-1).length):(f=this.session.getTabSize(),this.wouldMoveIntoSoftTab(m,f,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-f):this.moveCursorBy(0,-1))},this.moveCursorRight=function(){var f,m=this.lead.getPosition();(f=this.session.getFoldAt(m.row,m.column,1))?this.moveCursorTo(f.end.row,f.end.column):this.lead.column==this.doc.getLine(this.lead.row).length?this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0):(f=this.session.getTabSize(),this.wouldMoveIntoSoftTab(m=this.lead,f,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,f):this.moveCursorBy(0,1))},this.moveCursorLineStart=function(){var h,f=this.lead.column,m=this.session.documentToScreenRow(h=this.lead.row,f);m=this.session.screenToDocumentPosition(m,0),(h=this.session.getDisplayLine(h,null,m.row,m.column).match(/^\s*/))[0].length==f||this.session.$useEmacsStyleLineStart||(m.column+=h[0].length),this.moveCursorToPosition(m)},this.moveCursorLineEnd=function(){var f,m=this.session.getDocumentLastRowColumnPosition((m=this.lead).row,m.column);this.lead.column==m.column&&(f=this.session.getLine(m.row),m.column==f.length)&&0<(f=f.search(/\s+$/))&&(m.column=f),this.moveCursorTo(m.row,m.column)},this.moveCursorFileEnd=function(){var f=this.doc.getLength()-1,m=this.doc.getLine(f).length;this.moveCursorTo(f,m)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var f=this.lead.row,m=this.lead.column,h=this.doc.getLine(f),v=h.substring(m),O=(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.getFoldAt(f,m,1));O?this.moveCursorTo(O.end.row,O.end.column):(this.session.nonTokenRe.exec(v)&&(m+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,v=h.substring(m)),m>=h.length?(this.moveCursorTo(f,h.length),this.moveCursorRight(),f<this.doc.getLength()-1&&this.moveCursorWordRight()):(this.session.tokenRe.exec(v)&&(m+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(f,m)))},this.moveCursorLongWordLeft=function(){var f,m=this.lead.row,h=this.lead.column;(f=this.session.getFoldAt(m,h,-1))?this.moveCursorTo(f.start.row,f.start.column):(null==(f=this.session.getFoldStringAt(m,h,-1))&&(f=this.doc.getLine(m).substring(0,h)),f=y.stringReverse(f),this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(f)&&(h-=this.session.nonTokenRe.lastIndex,f=f.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),h<=0?(this.moveCursorTo(m,0),this.moveCursorLeft(),0<m&&this.moveCursorWordLeft()):(this.session.tokenRe.exec(f)&&(h-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(m,h)))},this.$shortWordEndIndex=function(f){var m,h=0,v=/\s/,O=this.session.tokenRe;if(O.lastIndex=0,this.session.tokenRe.exec(f))h=this.session.tokenRe.lastIndex;else{for(;(m=f[h])&&v.test(m);)h++;if(h<1)for(O.lastIndex=0;(m=f[h])&&!O.test(m);)if(O.lastIndex=0,h++,v.test(m)){if(2<h){h--;break}for(;(m=f[h])&&v.test(m);)h++;if(2<h)break}}return O.lastIndex=0,h},this.moveCursorShortWordRight=function(){var f=this.lead.row,m=this.lead.column,h=this.doc.getLine(f),v=h.substring(m),O=this.session.getFoldAt(f,m,1);if(O)return this.moveCursorTo(O.end.row,O.end.column);if(m==h.length){for(var C=this.doc.getLength();v=this.doc.getLine(++f),f<C&&/^\s*$/.test(v););/^\s+/.test(v)||(v=""),m=0}O=this.$shortWordEndIndex(v),this.moveCursorTo(f,m+O)},this.moveCursorShortWordLeft=function(){var f=this.lead.row,m=this.lead.column;if(v=this.session.getFoldAt(f,m,-1))return this.moveCursorTo(v.start.row,v.start.column);var h=this.session.getLine(f).substring(0,m);if(0===m){for(;h=this.doc.getLine(--f),0<f&&/^\s*$/.test(h););m=h.length,/\s+$/.test(h)||(h="")}var v=y.stringReverse(h);return v=this.$shortWordEndIndex(v),this.moveCursorTo(f,m-v)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(f,m){var h,v=this.session.documentToScreenPosition(this.lead.row,this.lead.column),O=(0===m&&(0!==f&&(this.session.$bidiHandler.isBidiRow(v.row,this.lead.row)?(h=this.session.$bidiHandler.getPosLeft(v.column),v.column=Math.round(h/this.session.$bidiHandler.charWidths[0])):h=v.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?v.column=this.$desiredColumn:this.$desiredColumn=v.column),0!=f&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]&&(O=this.session.lineWidgets[this.lead.row],f<0?f-=O.rowsAbove||0:0<f&&(f+=O.rowCount-(O.rowsAbove||0))),this.session.screenToDocumentPosition(v.row+f,v.column,h));this.moveCursorTo(O.row,O.column+m,0===m)},this.moveCursorToPosition=function(f){this.moveCursorTo(f.row,f.column)},this.moveCursorTo=function(f,m,h){var v=((v=this.session.getFoldAt(f,m,1))&&(f=v.start.row,m=v.start.column),this.$keepDesiredColumnOnChange=!0,this.session.getLine(f));/[\uDC00-\uDFFF]/.test(v.charAt(m))&&v.charAt(m-1)&&(this.lead.row==f&&this.lead.column==m+1?m-=1:m+=1),this.lead.setPosition(f,m),this.$keepDesiredColumnOnChange=!1,h||(this.$desiredColumn=null)},this.moveCursorToScreen=function(f,m,h){f=this.session.screenToDocumentPosition(f,m),this.moveCursorTo(f.row,f.column,h)},this.detach=function(){this.lead.detach(),this.anchor.detach()},this.fromOrientedRange=function(f){this.setSelectionRange(f,f.cursor==f.start),this.$desiredColumn=f.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(f){var m=this.getRange();return f?(f.start.column=m.start.column,f.start.row=m.start.row,f.end.column=m.end.column,f.end.row=m.end.row):f=m,f.cursor=this.isBackwards()?f.start:f.end,f.desiredColumn=this.$desiredColumn,f},this.getRangeOfMovements=function(f){var m=this.getCursor();try{f(this);var h=this.getCursor();return p.fromPoints(m,h)}catch{return p.fromPoints(m,m)}finally{this.moveCursorToPosition(m)}},this.toJSON=function(){var f;return this.rangeCount?f=this.ranges.map(function(m){var h=m.clone();return h.isBackwards=m.cursor==m.start,h}):(f=this.getRange()).isBackwards=this.isBackwards(),f},this.fromJSON=function(f){if(null==f.start){if(this.rangeList&&1<f.length){this.toSingleRange(f[0]);for(var m=f.length;m--;){var h=p.fromPoints(f[m].start,f[m].end);f[m].isBackwards&&(h.cursor=h.start),this.addRange(h,!0)}return}f=f[0]}this.rangeList&&this.toSingleRange(f),this.setSelectionRange(f,f.isBackwards)},this.isEqual=function(f){if((f.length||this.rangeCount)&&f.length!=this.rangeCount)return!1;if(!f.length||!this.ranges)return this.getRange().isEqual(f);for(var m=this.ranges.length;m--;)if(!this.ranges[m].isEqual(f[m]))return!1;return!0}}).call(R.prototype),_.Selection=R}),ace.define("ace/tokenizer",["require","exports","module","ace/config"],function(k,_,M){"use strict";function R(w){for(var p in this.states=w,this.regExps={},this.matchMappings={},this.states){for(var f=this.states[p],m=[],h=0,v=this.matchMappings[p]={defaultToken:"text"},O="g",C=[],x=0;x<f.length;x++){var L,Q,G=f[x];G.defaultToken&&(v.defaultToken=G.defaultToken),G.caseInsensitive&&-1===O.indexOf("i")&&(O+="i"),G.unicode&&-1===O.indexOf("u")&&(O+="u"),null==G.regex||(G.regex instanceof RegExp&&(G.regex=G.regex.toString().slice(1,-1)),L=G.regex,Q=new RegExp("(?:("+L+")|(.))").exec("a").length-2,Array.isArray(G.token)?1==G.token.length||1==Q?G.token=G.token[0]:Q-1!=G.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:G,groupCount:Q-1}),G.token=G.token[0]):(G.tokenArray=G.token,G.token=null,G.onMatch=this.$arrayTokens):"function"!=typeof G.token||G.onMatch||(G.onMatch=1<Q?this.$applyToken:G.token),1<Q&&(L=/\\\d/.test(G.regex)?G.regex.replace(/\\([0-9]+)/g,function(T,V){return"\\"+(parseInt(V,10)+h+1)}):(Q=1,this.removeCapturingGroups(G.regex)),G.splitRegex||"string"==typeof G.token||C.push(G)),v[h]=x,h+=Q,m.push(L),G.onMatch)||(G.onMatch=null)}m.length||(v[0]=0,m.push("$")),C.forEach(function(T){T.splitRegex=this.createSplitterRegexp(T.regex,O)},this),this.regExps[p]=new RegExp("("+m.join(")|(")+")|($)",O)}}var S=k("./config"),y=2e3;(function(){this.$setMaxTokenCount=function(w){y=0|w},this.$applyToken=function(w){var p=this.splitRegex.exec(w).slice(1),f=this.token.apply(this,p);if("string"==typeof f)return[{type:f,value:w}];for(var m=[],h=0,v=f.length;h<v;h++)p[h]&&(m[m.length]={type:f[h],value:p[h]});return m},this.$arrayTokens=function(w){if(!w)return[];var p=this.splitRegex.exec(w);if(!p)return"text";for(var f=[],m=this.tokenArray,h=0,v=m.length;h<v;h++)p[h+1]&&(f[f.length]={type:m[h],value:p[h+1]});return f},this.removeCapturingGroups=function(w){return w.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(p,f){return f?"(?:":p})},this.createSplitterRegexp=function(w,p){var f,m,h;return"$"!=(w="^"!=(w=-1!=w.indexOf("(?=")&&(f=0,m=!1,h={},w.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(v,O,C,x,L,Q){return m?m="]"!=L:L?m=!0:x?(f==h.stack&&(h.end=Q+1,h.stack=-1),f--):C&&(f++,1!=C.length)&&(h.stack=f,h.start=Q),v}),null!=h.end)&&/^\)*$/.test(w.substr(h.end))?w.substring(0,h.start)+w.substr(h.end):w).charAt(0)?"^"+w:w).charAt(w.length-1)&&(w+="$"),new RegExp(w,(p||"").replace("g",""))},this.getLineTokens=function(w,p){p&&"string"!=typeof p?"#tmp"===(p=(f=p.slice(0))[0])&&(f.shift(),p=f.shift()):f=[];for(var f,m,h=p||"start",v=(v=this.states[h])||this.states[h="start"],O=this.matchMappings[h],C=this.regExps[h],x=[],L=C.lastIndex=0,Q=0,G={type:null,value:""};m=C.exec(w);){var T,V=O.defaultToken,J=null,X=m[0],q=C.lastIndex;q-X.length>L&&(T=w.substring(L,q-X.length),G.type==V?G.value+=T:(G.type&&x.push(G),G={type:V,value:T}));for(var ee=0;ee<m.length-2;ee++)if(void 0!==m[ee+1]){V=(J=v[O[ee]]).onMatch?J.onMatch(X,h,f,w):J.token,J.next&&(h="string"==typeof J.next?J.next:J.next(h,f),(v=this.states[h])||(this.reportError("state doesn't exist",h),v=this.states[h="start"]),O=this.matchMappings[h],(C=this.regExps[h]).lastIndex=L=q),J.consumeLineEnd&&(L=q);break}if(X)if("string"==typeof V)J&&!1===J.merge||G.type!==V?(G.type&&x.push(G),G={type:V,value:X}):G.value+=X;else if(V)for(G.type&&x.push(G),G={type:null,value:""},ee=0;ee<V.length;ee++)x.push(V[ee]);if(L==w.length)break;if(L=q,Q++>y){for(Q>2*w.length&&this.reportError("infinite loop with in ace tokenizer",{startState:p,line:w});L<w.length;)G.type&&x.push(G),G={value:w.substring(L,L+=500),type:"overflow"};h="start",f=[];break}}return G.type&&x.push(G),1<f.length&&f[0]!==h&&f.unshift("#tmp",h),{tokens:x,state:f.length?f:h}},this.reportError=S.reportError}).call(R.prototype),_.Tokenizer=R}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(k,_,M){"use strict";function R(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}}var S=k("../lib/lang");(function(){function y(p,f){return"start"==p&&!f.length||f.unshift(this.nextState,p),this.nextState}function w(p,f){return f.shift(),f.shift()||"start"}this.addRules=function(p,f){if(f)for(var m in p){for(var h=p[m],v=0;v<h.length;v++){var O=h[v];(O.next||O.onMatch)&&("string"==typeof O.next&&0!==O.next.indexOf(f)&&(O.next=f+O.next),O.nextState)&&0!==O.nextState.indexOf(f)&&(O.nextState=f+O.nextState)}this.$rules[f+m]=h}else for(var m in p)this.$rules[m]=p[m]},this.getRules=function(){return this.$rules},this.embedRules=function(p,f,m,h,v){if(p="function"==typeof p?(new p).getRules():p,h)for(var O=0;O<h.length;O++)h[O]=f+h[O];else for(var C in h=[],p)h.push(f+C);if(this.addRules(p,f),m){var x=Array.prototype[v?"push":"unshift"];for(O=0;O<h.length;O++)x.apply(this.$rules[h[O]],S.deepCopy(m))}this.$embeds||(this.$embeds=[]),this.$embeds.push(f)},this.getEmbeds=function(){return this.$embeds},this.normalizeRules=function(){var p=0,f=this.$rules;Object.keys(f).forEach(function m(h){var v=f[h];v.processed=!0;for(var O=0;O<v.length;O++){var C=v[O],x=null,L=(Array.isArray(C)&&(x=C,C={}),!C.regex&&C.start&&(C.regex=C.start,C.next||(C.next=[]),C.next.push({defaultToken:C.token},{token:C.token+".end",regex:C.end||C.start,next:"pop"}),C.token=C.token+".start",C.push=!0),C.next||C.push);if(L&&Array.isArray(L)?((G=C.stateName)||("string"!=typeof(G=C.token)&&(G=G[0]||""),f[G]&&(G+=p++)),f[G]=L,m(C.next=G)):"pop"==L&&(C.next=w),C.push&&(C.nextState=C.next||C.push,C.next=y,delete C.push),C.rules)for(var Q in C.rules)f[Q]?f[Q].push&&f[Q].push.apply(f[Q],C.rules[Q]):f[Q]=C.rules[Q];var G="string"==typeof C?C:C.include;(x=G?Array.isArray(G)?G.map(function(T){return f[T]}):f[G]:x)&&(L=[O,1].concat(x),C.noEscape&&(L=L.filter(function(T){return!T.next})),v.splice.apply(v,L),O--),C.keywordMap&&(C.token=this.createKeywordMapper(C.keywordMap,C.defaultToken||"text",C.caseInsensitive),delete C.defaultToken)}},this)},this.createKeywordMapper=function(p,f,m,h){var v=Object.create(null);return this.$keywordList=[],Object.keys(p).forEach(function(O){for(var C=p[O].split(h||"|"),x=C.length;x--;){var L=C[x];this.$keywordList.push(L),m&&(L=L.toLowerCase()),v[L]=O}},this),p=null,m?function(O){return v[O.toLowerCase()]||f}:function(O){return v[O]||f}},this.getKeywords=function(){return this.$keywords}}).call(R.prototype),_.TextHighlightRules=R}),ace.define("ace/mode/behaviour",["require","exports","module"],function(k,_,M){"use strict";function R(){this.$behaviours={}}(function(){this.add=function(S,y,w){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[S]:this.$behaviours[S]={}}this.$behaviours[S][y]=w},this.addBehaviours=function(S){for(var y in S)for(var w in S[y])this.add(y,w,S[y][w])},this.remove=function(S){this.$behaviours&&this.$behaviours[S]&&delete this.$behaviours[S]},this.inherit=function(S,y){S=("function"==typeof S?new S:S).getBehaviours(y),this.addBehaviours(S)},this.getBehaviours=function(S){if(S){for(var y={},w=0;w<S.length;w++)this.$behaviours[S[w]]&&(y[S[w]]=this.$behaviours[S[w]]);return y}return this.$behaviours}}).call(R.prototype),_.Behaviour=R}),ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(k,_,M){"use strict";function R(y,w,p){this.$session=y,this.$row=w,this.$rowTokens=y.getTokens(w),y=y.getTokenAt(w,p),this.$tokenIndex=y?y.index:-1}var S=k("./range").Range;(function(){this.stepBackward=function(){for(--this.$tokenIndex;this.$tokenIndex<0;){if(--this.$row,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){var y;for(this.$tokenIndex+=1;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,y=y||this.$session.getLength(),this.$row>=y)return this.$row=y-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var y=this.$rowTokens,w=this.$tokenIndex,p=y[w].start;if(void 0===p)for(p=0;0<w;)p+=y[--w].value.length;return p},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var y=this.$rowTokens[this.$tokenIndex],w=this.getCurrentTokenColumn();return new S(this.$row,w,this.$row,w+y.value.length)}}).call(R.prototype),_.TokenIterator=R}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(k,_,M){"use strict";function R(L){var Q=-1;if((C=L.multiSelect&&(Q=L.selection.index,C.rangeCount!=L.multiSelect.rangeCount)?{rangeCount:L.multiSelect.rangeCount}:C)[Q])return w=C[Q];w=C[Q]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}}function S(L,Q,G,T){var V=L.end.row-L.start.row;return{text:G+Q+T,selection:[0,L.start.column+1,V,L.end.column+(V?0:1)]}}function y(L){this.add("braces","insertion",function(Q,G,T,V,J){var X=T.getCursorPosition(),q=V.doc.getLine(X.row);if("{"==J)return R(T),j=T.getSelectionRange(),""!==(D=V.doc.getTextRange(j))&&"{"!==D&&T.getWrapBehavioursEnabled()?S(j,D,"{","}"):y.isSaneInsertion(T,V)?/[\]\}\)]/.test(q[X.column])||T.inMultiSelectMode||L&&L.braces?(y.recordAutoInsert(T,V,"}"),{text:"{}",selection:[1,1]}):(y.recordMaybeInsert(T,V,"{"),{text:"{",selection:[1,1]}):void 0;if("}"==J){R(T);var ee=q.substring(X.column,X.column+1);if("}"==ee&&null!==V.$findOpeningBracket("}",{column:X.column+1,row:X.row})&&y.isAutoInsertedClosing(X,q,J))return y.popAutoInsertedClosing(),{text:"",selection:[1,1]}}else{if("\n"==J||"\r\n"==J){R(T);var j="";if(y.isMaybeInsertedClosing(X,q)&&(j=h.stringRepeat("}",w.maybeInsertedBrackets),y.clearMaybeInsertedClosing()),"}"===(ee=q.substring(X.column,X.column+1))){var D=V.findMatchingBracket({row:X.row,column:X.column+1},"}");if(!D)return null;var N=this.$getIndent(V.getLine(D.row))}else{if(!j)return void y.clearMaybeInsertedClosing();N=this.$getIndent(q)}return{text:"\n"+(J=N+V.getTabString())+"\n"+N+j,selection:[1,J.length,1,J.length]}}y.clearMaybeInsertedClosing()}}),this.add("braces","deletion",function(Q,G,T,V,J){var X=V.doc.getTextRange(J);if(!J.isMultiLine()&&"{"==X){if(R(T),"}"==V.doc.getLine(J.start.row).substring(J.end.column,J.end.column+1))return J.end.column++,J;w.maybeInsertedBrackets--}}),this.add("parens","insertion",function(Q,G,T,V,J){if("("==J)return R(T),X=T.getSelectionRange(),""!==(q=V.doc.getTextRange(X))&&T.getWrapBehavioursEnabled()?S(X,q,"(",")"):y.isSaneInsertion(T,V)?(y.recordAutoInsert(T,V,")"),{text:"()",selection:[1,1]}):void 0;if(")"==J){R(T);var X=T.getCursorPosition(),q=V.doc.getLine(X.row);if(")"==(T=q.substring(X.column,X.column+1))&&null!==V.$findOpeningBracket(")",{column:X.column+1,row:X.row})&&y.isAutoInsertedClosing(X,q,J))return y.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}),this.add("parens","deletion",function(Q,G,T,V,J){var X=V.doc.getTextRange(J);if(!J.isMultiLine()&&"("==X&&(R(T),")"==V.doc.getLine(J.start.row).substring(J.start.column+1,J.start.column+2)))return J.end.column++,J}),this.add("brackets","insertion",function(Q,G,T,V,J){if("["==J)return R(T),X=T.getSelectionRange(),""!==(q=V.doc.getTextRange(X))&&T.getWrapBehavioursEnabled()?S(X,q,"[","]"):y.isSaneInsertion(T,V)?(y.recordAutoInsert(T,V,"]"),{text:"[]",selection:[1,1]}):void 0;if("]"==J){R(T);var X=T.getCursorPosition(),q=V.doc.getLine(X.row);if("]"==(T=q.substring(X.column,X.column+1))&&null!==V.$findOpeningBracket("]",{column:X.column+1,row:X.row})&&y.isAutoInsertedClosing(X,q,J))return y.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}),this.add("brackets","deletion",function(Q,G,T,V,J){var X=V.doc.getTextRange(J);if(!J.isMultiLine()&&"["==X&&(R(T),"]"==V.doc.getLine(J.start.row).substring(J.start.column+1,J.start.column+2)))return J.end.column++,J}),this.add("string_dquotes","insertion",function(Q,G,T,V,J){var X=V.$mode.$quotes||x;if(1==J.length&&X[J]&&(!this.lineCommentStart||-1==this.lineCommentStart.indexOf(J))){R(T);var q=T.getSelectionRange();if(!(""===(ee=V.doc.getTextRange(q))||1==ee.length&&X[ee])&&T.getWrapBehavioursEnabled())return S(q,ee,J,J);if(!ee){X=T.getCursorPosition();var ee=(q=V.doc.getLine(X.row)).substring(X.column-1,X.column),N=(T=q.substring(X.column,X.column+1),V.getTokenAt(X.row,X.column)),j=V.getTokenAt(X.row,X.column+1);if("\\"==ee&&N&&/escape/.test(N.type))return null;N=N&&/string|escape/.test(N.type);var D,re=!j||/string|escape/.test(j.type);if(T==J)(D=N!==re)&&/string\.end/.test(j.type)&&(D=!1);else{if(N&&!re||N&&re||((j=V.$mode.tokenRe).lastIndex=0,N=j.test(ee),j.lastIndex=0,re=j.test(ee),N||re)||T&&!/[\s;,.})\]\\]/.test(T)||(V=q[X.column-2],ee==J&&(V==J||j.test(V))))return null;D=!0}return{text:D?J+J:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(Q,G,T,V,J){var X=V.$mode.$quotes||x,q=V.doc.getTextRange(J);if(!J.isMultiLine()&&X.hasOwnProperty(q)&&(R(T),V.doc.getLine(J.start.row).substring(J.start.column+1,J.start.column+2)==q))return J.end.column++,J})}var w,p=k("../../lib/oop"),f=k("../behaviour").Behaviour,m=k("../../token_iterator").TokenIterator,h=k("../../lib/lang"),v=["text","paren.rparen","rparen","paren","punctuation.operator"],O=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],C={},x={'"':'"',"'":"'"};y.isSaneInsertion=function(L,Q){var G=L.getCursorPosition(),T=new m(Q,G.row,G.column);if(!this.$matchTokenType(T.getCurrentToken()||"text",v)){if(/[)}\]]/.test(L.session.getLine(G.row)[G.column]))return!0;if(L=new m(Q,G.row,G.column+1),!this.$matchTokenType(L.getCurrentToken()||"text",v))return!1}return T.stepForward(),T.getCurrentTokenRow()!==G.row||this.$matchTokenType(T.getCurrentToken()||"text",O)},y.$matchTokenType=function(L,Q){return-1<Q.indexOf(L.type||L)},y.recordAutoInsert=function(L,Q,G){L=L.getCursorPosition(),Q=Q.doc.getLine(L.row),this.isAutoInsertedClosing(L,Q,w.autoInsertedLineEnd[0])||(w.autoInsertedBrackets=0),w.autoInsertedRow=L.row,w.autoInsertedLineEnd=G+Q.substr(L.column),w.autoInsertedBrackets++},y.recordMaybeInsert=function(L,Q,G){L=L.getCursorPosition(),Q=Q.doc.getLine(L.row),this.isMaybeInsertedClosing(L,Q)||(w.maybeInsertedBrackets=0),w.maybeInsertedRow=L.row,w.maybeInsertedLineStart=Q.substr(0,L.column)+G,w.maybeInsertedLineEnd=Q.substr(L.column),w.maybeInsertedBrackets++},y.isAutoInsertedClosing=function(L,Q,G){return 0<w.autoInsertedBrackets&&L.row===w.autoInsertedRow&&G===w.autoInsertedLineEnd[0]&&Q.substr(L.column)===w.autoInsertedLineEnd},y.isMaybeInsertedClosing=function(L,Q){return 0<w.maybeInsertedBrackets&&L.row===w.maybeInsertedRow&&Q.substr(L.column)===w.maybeInsertedLineEnd&&Q.substr(0,L.column)==w.maybeInsertedLineStart},y.popAutoInsertedClosing=function(){w.autoInsertedLineEnd=w.autoInsertedLineEnd.substr(1),w.autoInsertedBrackets--},y.clearMaybeInsertedClosing=function(){w&&(w.maybeInsertedBrackets=0,w.maybeInsertedRow=-1)},p.inherits(y,f),_.CstyleBehaviour=y}),ace.define("ace/unicode",["require","exports","module"],function(k,_,M){"use strict";for(var R=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],S=0,y=[],w=0;w<R.length;w+=2)y.push(S+=R[w]),R[w+1]&&y.push(45,S+=R[w+1]);_.wordChars=String.fromCharCode.apply(null,y)}),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(k,_,M){"use strict";function R(){this.HighlightRules=w}var S=k("../config"),y=k("../tokenizer").Tokenizer,w=k("./text_highlight_rules").TextHighlightRules,p=k("./behaviour/cstyle").CstyleBehaviour,f=k("../unicode"),m=k("../lib/lang"),h=k("../token_iterator").TokenIterator,v=k("../range").Range;(function(){this.$defaultBehaviour=new p,this.tokenRe=new RegExp("^["+f.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+f.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new y(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(O,C,x,L){var Q=C.doc,G=!0,T=!0,V=1/0,J=C.getTabSize(),X=!1;if(this.lineCommentStart){re=Array.isArray(this.lineCommentStart)?(ve=this.lineCommentStart.map(m.escapeRegExp).join("|"),this.lineCommentStart[0]):(ve=m.escapeRegExp(this.lineCommentStart),this.lineCommentStart),ve=new RegExp("^(\\s*)(?:"+ve+") ?"),X=C.getUseSoftTabs();var q=function(Me,Ie){var Ge,oe,pe=Me.match(ve);pe&&(N(Me,Ge=pe[1].length,oe=pe[0].length)||" "!=pe[0][oe-1]||oe--,Q.removeInLine(Ie,Ge,oe))},ee=re+" ",j=function(Me,Ie){G&&!/\S/.test(Me)||(N(Me,V,V)?Q.insertInLine({row:Ie,column:V},ee):Q.insertInLine({row:Ie,column:V},re))},D=function(Me,Ie){return ve.test(Me)},N=function(Me,Ie,Ge){for(var oe=0;Ie--&&" "==Me.charAt(Ie);)oe++;if(oe%J!=0)return!1;for(oe=0;" "==Me.charAt(Ge++);)oe++;return 2<J?oe%J!=J-1:oe%J==0}}else{if(!this.blockComment)return!1;var re=this.blockComment.start,ue=this.blockComment.end,ve=new RegExp("^(\\s*)(?:"+m.escapeRegExp(re)+")"),Ae=new RegExp("(?:"+m.escapeRegExp(ue)+")\\s*$");j=function(oe,pe){D(oe,pe)||G&&!/\S/.test(oe)||(Q.insertInLine({row:pe,column:oe.length},ue),Q.insertInLine({row:pe,column:V},re))},q=function(oe,pe){var ge;(ge=oe.match(Ae))&&Q.removeInLine(pe,oe.length-ge[0].length,oe.length),(ge=oe.match(ve))&&Q.removeInLine(pe,ge[1].length,ge[0].length)},D=function(oe,pe){if(ve.test(oe))return!0;for(var ge=C.getTokens(pe),be=0;be<ge.length;be++)if("comment"===ge[be].type)return!0}}function Te(Me){for(var Ie=x;Ie<=L;Ie++)Me(Q.getLine(Ie),Ie)}var Re=1/0;Te(function(Me,Ie){var Ge=Me.search(/\S/);-1!==Ge?(Ge<V&&(V=Ge),T&&!D(Me,Ie)&&(T=!1)):Re>Me.length&&(Re=Me.length)}),V==1/0&&(V=Re,T=G=!1),X&&V%J!=0&&(V=Math.floor(V/J)*J),Te(T?q:j)},this.toggleBlockComment=function(O,C,x,L){var Q=this.blockComment;if(Q){!Q.start&&Q[0]&&(Q=Q[0]);var G,T,V=(j=new h(C,L.row,L.column)).getCurrentToken(),J=C.selection.toOrientedRange();if(V&&/comment/.test(V.type)){for(;V&&/comment/.test(V.type);){if(-1!=(D=V.value.indexOf(Q.start))){var X=j.getCurrentTokenRow(),q=j.getCurrentTokenColumn()+D,ee=new v(X,q,X,q+Q.start.length);break}V=j.stepBackward()}var j,D;for(V=(j=new h(C,L.row,L.column)).getCurrentToken();V&&/comment/.test(V.type);){if(-1!=(D=V.value.indexOf(Q.end))){X=j.getCurrentTokenRow(),q=j.getCurrentTokenColumn()+D;var N=new v(X,q,X,q+Q.end.length);break}V=j.stepForward()}N&&C.remove(N),ee&&(C.remove(ee),G=ee.start.row,T=-Q.start.length)}else T=Q.start.length,G=x.start.row,C.insert(x.end,Q.end),C.insert(x.start,Q.start);J.start.row==G&&(J.start.column+=T),J.end.row==G&&(J.end.column+=T),C.selection.fromOrientedRange(J)}},this.getNextLineIndent=function(O,C,x){return this.$getIndent(C)},this.checkOutdent=function(O,C,x){return!1},this.autoOutdent=function(O,C,x){},this.$getIndent=function(O){return O.match(/^\s*/)[0]},this.createWorker=function(O){return null},this.createModeDelegates=function(O){for(var C in this.$embeds=[],this.$modes={},O){var x,L,Q;O[C]&&(L=(x=O[C]).prototype.$id,(Q=S.$modes[L])||(S.$modes[L]=Q=new x),S.$modes[C]||(S.$modes[C]=Q),this.$embeds.push(C),this.$modes[C]=Q)}var G=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"];for(C=0;C<G.length;C++)!function(V){var J=G[C],X=V[J];V[G[C]]=function(){return this.$delegator(J,arguments,X)}}(this)},this.$delegator=function(O,C,x){var L=C[0]||"start";if("string"!=typeof L){if(Array.isArray(L[2])){var Q=L[2][L[2].length-1];if(T=this.$modes[Q])return T[O].apply(T,[L[1]].concat([].slice.call(C,1)))}L=L[0]||"start"}for(var G=0;G<this.$embeds.length;G++)if(this.$modes[this.$embeds[G]]){var T,V=L.split(this.$embeds[G]);if(!V[0]&&V[1])return C[0]=V[1],(T=this.$modes[this.$embeds[G]])[O].apply(T,C)}return Q=x.apply(this,C),x?Q:void 0},this.transformAction=function(O,C,x,L,Q){if(this.$behaviour){var G,T=this.$behaviour.getBehaviours();for(G in T)if(T[G][C]){var V=T[G][C].apply(this,arguments);if(V)return V}}},this.getKeywords=function(O){if(!this.completionKeywords){var C=this.$tokenizer.rules,x=[];for(T in C)for(var L=C[T],Q=0,G=L.length;Q<G;Q++)if("string"==typeof L[Q].token)/keyword|support|storage/.test(L[Q].token)&&x.push(L[Q].regex);else if("object"==typeof L[Q].token)for(var T,V=0,J=L[Q].token.length;V<J;V++)/keyword|support|storage/.test(L[Q].token[V])&&(T=L[Q].regex.match(/\(.+?\)/g)[V],x.push(T.substr(1,T.length-2)));this.completionKeywords=x}return O?x.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(O,C,x,L){return(this.$keywordList||this.$createKeywordList()).map(function(Q){return{name:Q,value:Q,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(R.prototype),_.Mode=R}),ace.define("ace/apply_delta",["require","exports","module"],function(k,_,M){"use strict";_.applyDelta=function(R,S,y){var w=S.start.row,p=S.start.column,f=R[w]||"";switch(S.action){case"insert":1===S.lines.length?R[w]=f.substring(0,p)+S.lines[0]+f.substring(p):(m=[w,1].concat(S.lines),R.splice.apply(R,m),R[w]=f.substring(0,p)+R[w],R[w+S.lines.length-1]+=f.substring(p));break;case"remove":var m=S.end.column,h=S.end.row;w===h?R[w]=f.substring(0,p)+f.substring(m):R.splice(w,h-w+1,f.substring(0,p)+R[h].substring(m))}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(y,_,M){"use strict";var R=y("./lib/oop"),S=y("./lib/event_emitter").EventEmitter;y=_.Anchor=function(w,p,f){this.$onChange=this.onChange.bind(this),this.attach(w),void 0===f?this.setPosition(p.row,p.column):this.setPosition(p,f)},function(){function w(p,f,m){return m=m?p.column<=f.column:p.column<f.column,p.row<f.row||p.row==f.row&&m}R.implement(this,S),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(p){var f,m,h,v,O,C,x;p.start.row==p.end.row&&p.start.row!=this.row||p.start.row>this.row||(v=((x="insert"==(f=p).action)?1:-1)*(f.end.row-f.start.row),O=(x?1:-1)*(f.end.column-f.start.column),C=f.start,x=x?C:f.end,p=w(m={row:this.row,column:this.column},C,h=this.$insertRight)?{row:m.row,column:m.column}:w(x,m,!h)?{row:m.row+v,column:m.column+(m.row==x.row?O:0)}:{row:C.row,column:C.column},this.setPosition(p.row,p.column,!0))},this.setPosition=function(p,f,m){m=m?{row:p,column:f}:this.$clipPositionToDocument(p,f),this.row==m.row&&this.column==m.column||(p={row:this.row,column:this.column},this.row=m.row,this.column=m.column,this._signal("change",{old:p,value:m}))},this.detach=function(){this.document.off("change",this.$onChange)},this.attach=function(p){this.document=p||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(p,f){var m={};return p>=this.document.getLength()?(m.row=Math.max(0,this.document.getLength()-1),m.column=this.document.getLine(m.row).length):p<0?(m.row=0,m.column=0):(m.row=p,m.column=Math.min(this.document.getLine(m.row).length,Math.max(0,f))),f<0&&(m.column=0),m}}.call(y.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(k,_,M){"use strict";function R(m){this.$lines=[""],0===m.length?this.$lines=[""]:Array.isArray(m)?this.insertMergedLines({row:0,column:0},m):this.insert({row:0,column:0},m)}var S=k("./lib/oop"),y=k("./apply_delta").applyDelta,w=k("./lib/event_emitter").EventEmitter,p=k("./range").Range,f=k("./anchor").Anchor;(function(){S.implement(this,w),this.setValue=function(m){var h=this.getLength()-1;this.remove(new p(0,0,h,this.getLine(h).length)),this.insert({row:0,column:0},m||"")},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(m,h){return new f(this,m,h)},this.$split=0==="aaa".split(/a/).length?function(m){return m.replace(/\r\n|\r/g,"\n").split("\n")}:function(m){return m.split(/\r\n|\r|\n/)},this.$detectNewLine=function(m){m=m.match(/^.*?(\r\n|\r|\n)/m),this.$autoNewLine=m?m[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(m){this.$newLineMode!==m&&(this.$newLineMode=m,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(m){return"\r\n"==m||"\r"==m||"\n"==m},this.getLine=function(m){return this.$lines[m]||""},this.getLines=function(m,h){return this.$lines.slice(m,h+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(m){return this.getLinesForRange(m).join(this.getNewLineCharacter())},this.getLinesForRange=function(m){var h,v;return m.start.row===m.end.row?h=[this.getLine(m.start.row).substring(m.start.column,m.end.column)]:((h=this.getLines(m.start.row,m.end.row))[0]=(h[0]||"").substring(m.start.column),m.end.row-m.start.row==(v=h.length-1)&&(h[v]=h[v].substring(0,m.end.column))),h},this.insertLines=function(m,h){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(m,h)},this.removeLines=function(m,h){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(m,h)},this.insertNewLine=function(m){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(m,["",""])},this.insert=function(m,h){return this.getLength()<=1&&this.$detectNewLine(h),this.insertMergedLines(m,this.$split(h))},this.insertInLine=function(O,h){var v=this.clippedPos(O.row,O.column);return O=this.pos(O.row,O.column+h.length),this.applyDelta({start:v,end:O,action:"insert",lines:[h]},!0),this.clonePos(O)},this.clippedPos=function(m,h){var v=this.getLength();return void 0===m?m=v:m<0?m=0:v<=m&&(m=v-1,h=void 0),v=this.getLine(m),null==h&&(h=v.length),{row:m,column:h=Math.min(Math.max(h,0),v.length)}},this.clonePos=function(m){return{row:m.row,column:m.column}},this.pos=function(m,h){return{row:m,column:h}},this.$clipPosition=function(m){var h=this.getLength();return m.row>=h?(m.row=Math.max(0,h-1),m.column=this.getLine(h-1).length):(m.row=Math.max(0,m.row),m.column=Math.min(Math.max(m.column,0),this.getLine(m.row).length)),m},this.insertFullLines=function(m,h){var v;v=(m=Math.min(Math.max(m,0),this.getLength()))<this.getLength()?(h=h.concat([""]),0):(h=[""].concat(h),this.$lines[--m].length),this.insertMergedLines({row:m,column:v},h)},this.insertMergedLines=function(v,h){var O={row:(v=this.clippedPos(v.row,v.column)).row+h.length-1,column:(1==h.length?v.column:0)+h[h.length-1].length};return this.applyDelta({start:v,end:O,action:"insert",lines:h}),this.clonePos(O)},this.remove=function(v){var h=this.clippedPos(v.start.row,v.start.column);return v=this.clippedPos(v.end.row,v.end.column),this.applyDelta({start:h,end:v,action:"remove",lines:this.getLinesForRange({start:h,end:v})}),this.clonePos(h)},this.removeInLine=function(m,h,v){return h=this.clippedPos(m,h),m=this.clippedPos(m,v),this.applyDelta({start:h,end:m,action:"remove",lines:this.getLinesForRange({start:h,end:m})},!0),this.clonePos(h)},this.removeFullLines=function(m,h){m=Math.min(Math.max(0,m),this.getLength()-1);var x=(h=Math.min(Math.max(0,h),this.getLength()-1))==this.getLength()-1&&0<m,O=h<this.getLength()-1,C=x?m-1:m,v=(x=x?this.getLine(C).length:0,O?h+1:h);return O=O?0:this.getLine(v).length,C=new p(C,x,v,O),x=this.$lines.slice(m,h+1),this.applyDelta({start:C.start,end:C.end,action:"remove",lines:this.getLinesForRange(C)}),x},this.removeNewLine=function(m){m<this.getLength()-1&&0<=m&&this.applyDelta({start:this.pos(m,this.getLine(m).length),end:this.pos(m+1,0),action:"remove",lines:["",""]})},this.replace=function(m,h){return m instanceof p||(m=p.fromPoints(m.start,m.end)),0===h.length&&m.isEmpty()?m.start:h==this.getTextRange(m)?m.end:(this.remove(m),h?this.insert(m.start,h):m.start)},this.applyDeltas=function(m){for(var h=0;h<m.length;h++)this.applyDelta(m[h])},this.revertDeltas=function(m){for(var h=m.length-1;0<=h;h--)this.revertDelta(m[h])},this.applyDelta=function(m,h){var v="insert"==m.action;(v?m.lines.length<=1&&!m.lines[0]:!p.comparePoints(m.start,m.end))||(v&&2e4<m.lines.length?this.$splitAndapplyLargeDelta(m,2e4):(y(this.$lines,m,h),this._signal("change",m)))},this.$safeApplyDelta=function(m){var h=this.$lines.length;("remove"==m.action&&m.start.row<h&&m.end.row<h||"insert"==m.action&&m.start.row<=h)&&this.applyDelta(m)},this.$splitAndapplyLargeDelta=function(m,h){for(var v=m.lines,O=v.length-h+1,C=m.start.row,x=m.start.column,L=0,Q=0;L<O;L=Q){var G=v.slice(L,Q+=h-1);G.push(""),this.applyDelta({start:this.pos(C+L,x),end:this.pos(C+Q,x=0),action:m.action,lines:G},!0)}m.lines=v.slice(L),m.start.row=C+L,m.start.column=x,this.applyDelta(m,!0)},this.revertDelta=function(m){this.$safeApplyDelta({start:this.clonePos(m.start),end:this.clonePos(m.end),action:"insert"==m.action?"remove":"insert",lines:m.lines.slice()})},this.indexToPosition=function(m,h){for(var v=this.$lines||this.getAllLines(),O=this.getNewLineCharacter().length,C=h||0,x=v.length;C<x;C++)if((m-=v[C].length+O)<0)return{row:C,column:m+v[C].length+O};return{row:x-1,column:m+v[x-1].length+O}},this.positionToIndex=function(m,h){for(var v=this.$lines||this.getAllLines(),O=this.getNewLineCharacter().length,C=0,x=Math.min(m.row,v.length),L=h||0;L<x;++L)C+=v[L].length+O;return C+m.column}}).call(R.prototype),_.Document=R}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(k,_,M){"use strict";function R(w,p){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=w;var f=this;this.$worker=function(){if(f.running){for(var m=new Date,h=f.currentLine,v=-1,O=f.doc,C=h;f.lines[h];)h++;var x=O.getLength(),L=0;for(f.running=!1;h<x;){for(f.$tokenizeRow(h),v=h;h++,f.lines[h];);if(++L%5==0&&20<new Date-m){f.running=setTimeout(f.$worker,20);break}}f.currentLine=h,C<=(v=-1==v?h:v)&&f.fireUpdateEvent(C,v)}}}var S=k("./lib/oop"),y=k("./lib/event_emitter").EventEmitter;(function(){S.implement(this,y),this.setTokenizer=function(w){this.tokenizer=w,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(w){this.doc=w,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(w,p){this._signal("update",{data:{first:w,last:p}})},this.start=function(w){this.currentLine=Math.min(w||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(w){var p=w.start.row,f=w.end.row-p;0==f?this.lines[p]=null:"remove"==w.action?(this.lines.splice(p,1+f,null),this.states.splice(p,1+f,null)):((w=Array(1+f)).unshift(p,1),this.lines.splice.apply(this.lines,w),this.states.splice.apply(this.states,w)),this.currentLine=Math.min(p,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(w){return this.lines[w]||this.$tokenizeRow(w)},this.getState=function(w){return this.currentLine==w&&this.$tokenizeRow(w),this.states[w]||"start"},this.$tokenizeRow=function(w){var f=this.doc.getLine(w);return f=this.tokenizer.getLineTokens(f,this.states[w-1],w),this.states[w]+""!=f.state+""?(this.states[w]=f.state,this.lines[w+1]=null,this.currentLine>w+1&&(this.currentLine=w+1)):this.currentLine==w&&(this.currentLine=w+1),this.lines[w]=f.tokens},this.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()}}).call(R.prototype),_.BackgroundTokenizer=R}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(k,_,M){"use strict";function R(w,p,f){this.setRegexp(w),this.clazz=p,this.type=f||"text"}var S=k("./lib/lang"),y=(k("./lib/oop"),k("./range").Range);(function(){this.MAX_RANGES=500,this.setRegexp=function(w){this.regExp+""!=w+""&&(this.regExp=w,this.cache=[])},this.update=function(w,p,f,m){if(this.regExp)for(var v=m.lastRow,O={},C=m.firstRow;C<=v;C++){var x=this.cache[C];null==x&&(x=(x=(x=S.getMatchOffsets(f.getLine(C),this.regExp)).length>this.MAX_RANGES?x.slice(0,this.MAX_RANGES):x).map(function(T){return new y(C,T.offset,C,T.offset+T.length)}),this.cache[C]=x.length?x:"");for(var L=x.length;L--;){var Q=x[L].toScreenRange(f),G=Q.toString();O[G]||(O[G]=!0,p.drawSingleLineMarker(w,Q,this.clazz,m))}}}}).call(R.prototype),_.SearchHighlight=R}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(k,_,M){"use strict";var R=k("../range").Range;function S(y,w){this.foldData=y,Array.isArray(w)?this.folds=w:w=this.folds=[w],this.range=new R(w[0].start.row,w[0].start.column,(y=w[w.length-1]).end.row,y.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(p){p.setFoldLine(this)},this)}(function(){this.shiftRow=function(y){this.start.row+=y,this.end.row+=y,this.folds.forEach(function(w){w.start.row+=y,w.end.row+=y})},this.addFold=function(y){if(y.sameRow){if(y.start.row<this.startRow||y.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(y),this.folds.sort(function(w,p){return-w.range.compareEnd(p.start.row,p.start.column)}),0<this.range.compareEnd(y.start.row,y.start.column)?(this.end.row=y.end.row,this.end.column=y.end.column):this.range.compareStart(y.end.row,y.end.column)<0&&(this.start.row=y.start.row,this.start.column=y.start.column)}else if(y.start.row==this.end.row)this.folds.push(y),this.end.row=y.end.row,this.end.column=y.end.column;else{if(y.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(y),this.start.row=y.start.row,this.start.column=y.start.column}y.foldLine=this},this.containsRow=function(y){return y>=this.start.row&&y<=this.end.row},this.walk=function(y,w,p){var f,m,h=0,v=this.folds,O=!0;null==w&&(w=this.end.row,p=this.end.column);for(var C=0;C<v.length;C++){if(-1==(m=(f=v[C]).range.compareStart(w,p)))return void y(null,w,p,h,O);if(!y(null,f.start.row,f.start.column,h,O)&&y(f.placeholder,f.start.row,f.start.column,h)||0===m)return;O=!f.sameRow,h=f.end.column}y(null,w,p,h,O)},this.getNextFoldTo=function(y,w){for(var p,f,m=0;m<this.folds.length;m++){if(-1==(f=(p=this.folds[m]).range.compareEnd(y,w)))return{fold:p,kind:"after"};if(0===f)return{fold:p,kind:"inside"}}return null},this.addRemoveChars=function(y,w,p){var f,m=this.getNextFoldTo(y,w);if(m)if(f=m.fold,"inside"==m.kind&&f.start.column!=w&&f.start.row!=y)window.console&&window.console.log(y,w,f);else if(f.start.row==y){var h,v=(h=this.folds).indexOf(f);for(0===v&&(this.start.column+=p);v<h.length;v++){if((f=h[v]).start.column+=p,!f.sameRow)return;f.end.column+=p}this.end.column+=p}},this.split=function(m,w){var p,f;return(m=this.getNextFoldTo(m,w))&&"inside"!=m.kind?(w=m.fold,p=this.foldData,w=(m=this.folds).indexOf(w),this.end.row=(f=m[w-1]).end.row,this.end.column=f.end.column,f=new S(p,m=m.splice(w,m.length-w)),p.splice(p.indexOf(this)+1,0,f),f):null},this.merge=function(y){for(var w=y.folds,p=0;p<w.length;p++)this.addFold(w[p]);var f=this.foldData;f.splice(f.indexOf(y),1)},this.toString=function(){var y=[this.range.toString()+": ["];return this.folds.forEach(function(w){y.push("  "+w.toString())}),y.push("]"),y.join("\n")},this.idxToPosition=function(y){for(var w=0,p=0;p<this.folds.length;p++){var f=this.folds[p];if((y-=f.start.column-w)<0)return{row:f.start.row,column:f.start.column+y};if((y-=f.placeholder.length)<0)return f.start;w=f.end.column}return{row:this.end.row,column:this.end.column+y}}}).call(S.prototype),_.FoldLine=S}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(k,_,M){"use strict";function R(){this.ranges=[],this.$bias=1}var S=k("./range").Range.comparePoints;(function(){this.comparePoints=S,this.pointIndex=function(y,w,p){for(var f=this.ranges,m=p||0;m<f.length;m++){var h=f[m],v=S(y,h.end);if(!(0<v))return h=S(y,h.start),0===v?w&&0!==h?-m-2:m:0<h||0===h&&!w?m:-m-1}return-m-1},this.add=function(y){var p=!y.isEmpty(),w=this.pointIndex(y.start,p);return(p=this.pointIndex(y.end,p,w=w<0?-w-1:w))<0?p=-p-1:p++,this.ranges.splice(w,p-w,y)},this.addList=function(y){for(var w=[],p=y.length;p--;)w.push.apply(w,this.add(y[p]));return w},this.substractPoint=function(y){if(0<=(y=this.pointIndex(y)))return this.ranges.splice(y,1)},this.merge=function(){for(var y=[],w=this.ranges,p=(w=w.sort(function(v,O){return S(v.start,O.start)}))[0],f=1;f<w.length;f++){var m=p,h=S(m.end,(p=w[f]).start);h<0||(0!=h||m.isEmpty()||p.isEmpty())&&(S(m.end,p.end)<0&&(m.end.row=p.end.row,m.end.column=p.end.column),w.splice(f,1),y.push(p),p=m,f--)}return this.ranges=w,y},this.contains=function(y,w){return 0<=this.pointIndex({row:y,column:w})},this.containsPoint=function(y){return 0<=this.pointIndex(y)},this.rangeAtPoint=function(y){if(0<=(y=this.pointIndex(y)))return this.ranges[y]},this.clipRows=function(y,w){var p=this.ranges;if(p[0].start.row>w||p[p.length-1].start.row<y)return[];y=this.pointIndex({row:y,column:0});for(var f=this.pointIndex({row:w,column:0},y=y<0?-y-1:y),m=(f<0&&(f=-f-1),[]),h=y;h<f;h++)m.push(p[h]);return m},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(y){this.session&&this.detach(),this.session=y,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(y){for(var w=y.start,p=y.end,f=w.row,m=p.row,h=this.ranges,v=0,O=h.length;v<O&&!((L=h[v]).end.row>=f);v++);var L;if("insert"==y.action)for(var C=m-f,x=-w.column+p.column;v<O&&!((L=h[v]).start.row>f);v++)L.start.row==f&&L.start.column>=w.column&&(L.start.column==w.column&&this.$bias<=0||(L.start.column+=x,L.start.row+=C)),L.end.row==f&&L.end.column>=w.column&&(L.end.column==w.column&&this.$bias<0||(L.end.column==w.column&&0<x&&v<O-1&&L.end.column>L.start.column&&L.end.column==h[v+1].start.column&&(L.end.column-=x),L.end.column+=x,L.end.row+=C));else for(C=f-m,x=w.column-p.column;v<O&&!((L=h[v]).start.row>m);v++)L.end.row<m&&(f<L.end.row||f==L.end.row&&w.column<L.end.column)?(L.end.row=f,L.end.column=w.column):L.end.row==m?L.end.column<=p.column?(C||L.end.column>w.column)&&(L.end.column=w.column,L.end.row=w.row):(L.end.column+=x,L.end.row+=C):L.end.row>m&&(L.end.row+=C),L.start.row<m&&(f<L.start.row||f==L.start.row&&w.column<L.start.column)?(L.start.row=f,L.start.column=w.column):L.start.row==m?L.start.column<=p.column?(C||L.start.column>w.column)&&(L.start.column=w.column,L.start.row=w.row):(L.start.column+=x,L.start.row+=C):L.start.row>m&&(L.start.row+=C);if(0!=C&&v<O)for(;v<O;v++)(L=h[v]).start.row+=C,L.end.row+=C}}).call(R.prototype),_.RangeList=R}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list","ace/lib/oop"],function(S,_,M){"use strict";var R=S("../range_list").RangeList,y=(S=S("../lib/oop"),_.Fold=function(f,m){this.foldLine=null,this.placeholder=m,this.range=f,this.start=f.start,this.end=f.end,this.sameRow=f.start.row==f.end.row,this.subFolds=this.ranges=[]});function w(f,m){f.row-=m.row,0==f.row&&(f.column-=m.column)}function p(f,m){0==f.row&&(f.column+=m.column),f.row+=m.row}S.inherits(y,R),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(f){this.foldLine=f,this.subFolds.forEach(function(m){m.setFoldLine(f)})},this.clone=function(){var f=this.range.clone(),m=new y(f,this.placeholder);return this.subFolds.forEach(function(h){m.subFolds.push(h.clone())}),m.collapseChildren=this.collapseChildren,m},this.addSubFold=function(f){if(!this.range.isEqual(f)){w((C=f).start,x=this.start),w(C.end,x);for(var m=f.start.row,h=f.start.column,v=0,O=-1;v<this.subFolds.length&&1==(O=this.subFolds[v].range.compare(m,h));v++);var C=this.subFolds[v],x=0;if(0==O){if(C.range.containsRange(f))return C.addSubFold(f);x=1}m=f.range.end.row,h=f.range.end.column;var L=v;for(O=-1;L<this.subFolds.length&&1==(O=this.subFolds[L].range.compare(m,h));L++);0==O&&L++;for(var Q=this.subFolds.splice(v,L-v,f),G=0==O?Q.length-1:Q.length,T=x;T<G;T++)f.addSubFold(Q[T]);return f.setFoldLine(this.foldLine),f}},this.restoreRange=function(f){return p(f.start,m=this.start),void p(f.end,m);var m}}.call(y.prototype)}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(k,_,M){"use strict";var R=k("../range").Range,S=k("./fold_line").FoldLine,y=k("./fold").Fold,w=k("../token_iterator").TokenIterator;_.Folding=function(){this.getFoldAt=function(p,f,m){var h=this.getFoldLine(p);if(!h)return null;for(var v=h.folds,O=0;O<v.length;O++){var C=v[O].range;if(C.contains(p,f)&&(1!=m||!C.isEnd(p,f)||C.isEmpty())&&(-1!=m||!C.isStart(p,f)||C.isEmpty()))return v[O]}},this.getFoldsInRange=function(p){var f=p.start,m=p.end,h=this.$foldData,v=[];f.column+=1,--m.column;for(var O=0;O<h.length;O++){var C=h[O].range.compareRange(p);if(2!=C){if(-2==C)break;for(var x=h[O].folds,L=0;L<x.length;L++){var Q=x[L];if(-2==(C=Q.range.compareRange(p)))break;if(2!=C){if(42==C)break;v.push(Q)}}}}return--f.column,m.column+=1,v},this.getFoldsInRangeList=function(p){var f;return Array.isArray(p)?(f=[],p.forEach(function(m){f=f.concat(this.getFoldsInRange(m))},this)):f=this.getFoldsInRange(p),f},this.getAllFolds=function(){for(var p=[],f=this.$foldData,m=0;m<f.length;m++)for(var h=0;h<f[m].folds.length;h++)p.push(f[m].folds[h]);return p},this.getFoldStringAt=function(p,f,m,h){if(!(h=h||this.getFoldLine(p)))return null;for(var v,O={end:{column:0}},C=0;C<h.folds.length;C++){var x,L=(x=h.folds[C]).range.compareEnd(p,f);if(-1==L){v=this.getLine(x.start.row).substring(O.end.column,x.start.column);break}if(0===L)return null;O=x}return v=v||this.getLine(x.start.row).substring(O.end.column),-1==m?v.substring(0,f-O.end.column):1==m?v.substring(f-O.end.column):v},this.getFoldLine=function(p,f){var m=this.$foldData,h=0;for(-1==(h=f?m.indexOf(f):h)&&(h=0);h<m.length;h++){var v=m[h];if(v.start.row<=p&&v.end.row>=p)return v;if(v.end.row>p)return null}return null},this.getNextFoldLine=function(p,f){var m=this.$foldData,h=0;for(-1==(h=f?m.indexOf(f):h)&&(h=0);h<m.length;h++){var v=m[h];if(v.end.row>=p)return v}return null},this.getFoldedRowCount=function(p,f){for(var m=this.$foldData,h=f-p+1,v=0;v<m.length;v++){var O=(C=m[v]).end.row,C=C.start.row;if(f<=O){C<f&&(p<=C?h-=f-C:h=0);break}p<=O&&(h-=p<=C?O-C:O-p+1)}return h},this.$addFoldLine=function(p){return this.$foldData.push(p),this.$foldData.sort(function(f,m){return f.start.row-m.start.row}),p},this.addFold=function(C,L){var m,h=this.$foldData,v=!1,O=(C instanceof y?m=C:(m=new y(L,C)).collapseChildren=L.collapseChildren,this.$clipRangeToDocument(m.range),m.start.row),x=m.end.row,Q=(L=m.end.column,this.getFoldAt(O,C=m.start.column,1)),G=this.getFoldAt(x,L,-1);if(Q&&G==Q)return Q.addSubFold(m);Q&&!Q.range.isStart(O,C)&&this.removeFold(Q),G&&!G.range.isEnd(x,L)&&this.removeFold(G),0<(C=this.getFoldsInRange(m.range)).length&&(this.removeFolds(C),m.collapseChildren||C.forEach(function(X){m.addSubFold(X)}));for(var T=0;T<h.length;T++){var V=h[T];if(x==V.start.row){V.addFold(m),v=!0;break}if(O==V.end.row){if(V.addFold(m),v=!0,!m.sameRow){var J=h[T+1];if(J&&J.start.row==x){V.merge(J);break}}break}if(x<=V.start.row)break}return v||(V=this.$addFoldLine(new S(this.$foldData,m))),this.$useWrapMode?this.$updateWrapData(V.start.row,V.start.row):this.$updateRowLengthCache(V.start.row,V.start.row),this.$modified=!0,this._signal("changeFold",{data:m,action:"add"}),m},this.addFolds=function(p){p.forEach(function(f){this.addFold(f)},this)},this.removeFold=function(p){var f=p.foldLine,m=f.start.row,h=f.end.row,v=this.$foldData,O=f.folds;1==O.length?v.splice(v.indexOf(f),1):f.range.isEnd(p.end.row,p.end.column)?(O.pop(),f.end.row=O[O.length-1].end.row,f.end.column=O[O.length-1].end.column):f.range.isStart(p.start.row,p.start.column)?(O.shift(),f.start.row=O[0].start.row,f.start.column=O[0].start.column):p.sameRow?O.splice(O.indexOf(p),1):((O=(v=f.split(p.start.row,p.start.column)).folds).shift(),v.start.row=O[0].start.row,v.start.column=O[0].start.column),this.$updating||(this.$useWrapMode?this.$updateWrapData(m,h):this.$updateRowLengthCache(m,h)),this.$modified=!0,this._signal("changeFold",{data:p,action:"remove"})},this.removeFolds=function(p){for(var f=[],m=0;m<p.length;m++)f.push(p[m]);f.forEach(function(h){this.removeFold(h)},this),this.$modified=!0},this.expandFold=function(p){this.removeFold(p),p.subFolds.forEach(function(f){p.restoreRange(f),this.addFold(f)},this),0<p.collapseChildren&&this.foldAll(p.start.row+1,p.end.row,p.collapseChildren-1),p.subFolds=[]},this.expandFolds=function(p){p.forEach(function(f){this.expandFold(f)},this)},this.unfold=function(p,f){var m,h;if(null==p)m=new R(0,0,this.getLength(),0),null==f&&(f=!0);else if("number"==typeof p)m=new R(p,0,p,this.getLine(p).length);else if("row"in p)m=R.fromPoints(p,p);else{if(Array.isArray(p))return h=[],p.forEach(function(v){h=h.concat(this.unfold(v))},this),h;m=p}for(p=h=this.getFoldsInRangeList(m);1==h.length&&R.comparePoints(h[0].start,m.start)<0&&0<R.comparePoints(h[0].end,m.end);)this.expandFolds(h),h=this.getFoldsInRangeList(m);if(0!=f?this.removeFolds(h):this.expandFolds(h),p.length)return p},this.isRowFolded=function(p,f){return!!this.getFoldLine(p,f)},this.getRowFoldEnd=function(p,f){return(f=this.getFoldLine(p,f))?f.end.row:p},this.getRowFoldStart=function(p,f){return(f=this.getFoldLine(p,f))?f.start.row:p},this.getFoldDisplayLine=function(p,f,m,h,v){null==h&&(h=p.start.row),null==v&&(v=0),null==f&&(f=p.end.row),null==m&&(m=this.getLine(f).length);var O=this.doc,C="";return p.walk(function(x,L,Q,G){if(!(L<h)){if(L==h){if(Q<v)return;G=Math.max(v,G)}C+=x??O.getLine(L).substring(G,Q)}},f,m),C},this.getDisplayLine=function(p,f,m,h){var v=this.getFoldLine(p);return v?this.getFoldDisplayLine(v,p,f,m,h):(v=this.doc.getLine(p)).substring(h||0,f||v.length)},this.$cloneFoldData=function(){var p=[];return p=this.$foldData.map(function(f){return f=f.folds.map(function(m){return m.clone()}),new S(p,f)})},this.toggleFold=function(p){var f=this.selection.getRange();if(f.isEmpty()){var m,h=f.start;if(m=this.getFoldAt(h.row,h.column))return void this.expandFold(m);(v=this.findMatchingBracket(h))?1==f.comparePoint(v)?f.end=v:(f.start=v,f.start.column++,f.end.column--):(v=this.findMatchingBracket({row:h.row,column:h.column+1}))?(1==f.comparePoint(v)?f.end=v:f.start=v,f.start.column++):f=this.getCommentFoldRange(h.row,h.column)||f}else{var v=this.getFoldsInRange(f);if(p&&v.length)return void this.expandFolds(v);1==v.length&&(m=v[0])}if((m=m||this.getFoldAt(f.start.row,f.start.column))&&m.range.toString()==f.toString())this.expandFold(m);else{if(h="...",!f.isMultiLine()){if((h=this.getTextRange(f)).length<4)return;h=h.trim().substring(0,2)+".."}this.addFold(h,f)}},this.getCommentFoldRange=function(p,f,m){var h=new w(this,p,f),v=h.getCurrentToken(),O=v&&v.type;if(v&&/^comment|string/.test(O)){"comment"==(O=O.match(/comment|string/)[0])&&(O+="|doc-start");var C=new RegExp(O);if(O=new R,1!=m){for(;(v=h.stepBackward())&&C.test(v.type)&&!/^comment.end/.test(v.type););v=h.stepForward()}if(O.start.row=h.getCurrentTokenRow(),O.start.column=h.getCurrentTokenColumn()+(/^comment.start/.test(v.type)?v.value.length:2),h=new w(this,p,f),-1!=m){var x=-1;do{if(v=h.stepForward(),-1==x){var L=this.getState(h.$row);C.test(L)||(x=h.$row)}else if(h.$row>x)break}while(v&&C.test(v.type)&&!/^comment.start/.test(v.type));v=h.stepBackward()}else v=h.getCurrentToken();return O.end.row=h.getCurrentTokenRow(),O.end.column=h.getCurrentTokenColumn(),/^comment.end/.test(v.type)||(O.end.column+=v.value.length-2),O}},this.foldAll=function(p,f,m,h){null==m&&(m=1e5);var v=this.foldWidgets;if(v){f=f||this.getLength();for(var O,C=p=p||0;C<f;C++)null==v[C]&&(v[C]=this.getFoldWidget(C)),"start"!=v[C]||h&&!h(C)||(O=this.getFoldWidgetRange(C))&&O.isMultiLine()&&O.end.row<=f&&O.start.row>=p&&(C=O.end.row,O.collapseChildren=m,this.addFold("...",O))}},this.foldToLevel=function(p){for(this.foldAll();0<p--;)this.unfold(null,!1)},this.foldAllComments=function(){var p=this;this.foldAll(null,null,null,function(f){for(var m=p.getTokens(f),h=0;h<m.length;h++){var v=m[h];if("text"!=v.type||!/^\s+$/.test(v.value))return!!/comment/.test(v.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(p){if(!this.$foldStyles[p])throw new Error("invalid fold style: "+p+"["+Object.keys(this.$foldStyles).join(", ")+"]");this.$foldStyle!=p&&("manual"==(this.$foldStyle=p)&&this.unfold(),p=this.$foldMode,this.$setFolding(null),this.$setFolding(p))},this.$setFolding=function(p){this.$foldMode!=p&&(this.$foldMode=p,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),p&&"manual"!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=p.getFoldWidget.bind(p,this,this.$foldStyle),this.getFoldWidgetRange=p.getFoldWidgetRange.bind(p,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)):this.foldWidgets=null)},this.getParentFoldRangeData=function(p,f){var m=this.foldWidgets;if(!m||f&&m[p])return{};for(var h=p-1;0<=h;){var v=m[h];if("start"==(v=v??(m[h]=this.getFoldWidget(h)))){var O=this.getFoldWidgetRange(h),C=C||O;if(O&&O.end.row>=p)break}h--}return{range:-1!==h&&O,firstRange:C}},this.onFoldWidgetClick=function(p,f){var m={children:(f=f.domEvent).shiftKey,all:f.ctrlKey||f.metaKey,siblings:f.altKey};this.$toggleFoldWidget(p,m)||(p=f.target||f.srcElement)&&/ace_fold-widget/.test(p.className)&&(p.className+=" ace_invalid")},this.$toggleFoldWidget=function(p,f){var m,h,v,O;if(this.getFoldWidget)return m=this.getFoldWidget(p),h=this.getLine(p),(h=this.getFoldAt(p,-1==(m="end"===m?-1:1)?0:h.length,m))?(f.children||f.all?this.removeFold(h):this.expandFold(h),h):(m=this.getFoldWidgetRange(p,!0))&&!m.isMultiLine()&&(h=this.getFoldAt(m.start.row,m.start.column,1))&&m.isEqual(h.range)?(this.removeFold(h),h):(f.siblings?((h=this.getParentFoldRangeData(p)).range&&(v=h.range.start.row+1,O=h.range.end.row),this.foldAll(v,O,f.all?1e4:0)):f.children?(O=m?m.end.row:this.getLength(),this.foldAll(p+1,O,f.all?1e4:0)):m&&(f.all&&(m.collapseChildren=1e4),this.addFold("...",m)),m)},this.toggleFoldWidget=function(p){var f,m=this.selection.getCursor().row;m=this.getRowFoldStart(m),!this.$toggleFoldWidget(m,{})&&(f=(f=this.getParentFoldRangeData(m,!0)).range||f.firstRange)&&((m=this.getFoldAt(m=f.start.row,this.getLine(m).length,1))?this.removeFold(m):this.addFold("...",f))},this.updateFoldWidgets=function(p){var f=p.start.row,m=p.end.row-f;0==m?this.foldWidgets[f]=null:"remove"==p.action?this.foldWidgets.splice(f,1+m,null):((p=Array(1+m)).unshift(f,1),this.foldWidgets.splice.apply(this.foldWidgets,p))},this.tokenizerUpdateFoldWidgets=function(p){(p=p.data).first!=p.last&&this.foldWidgets.length>p.first&&this.foldWidgets.splice(p.first,this.foldWidgets.length)}}}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(k,_,M){"use strict";var R=k("../token_iterator").TokenIterator,S=k("../range").Range;_.BracketMatch=function(){this.findMatchingBracket=function(y,w){return 0!=y.column&&""!=(w=w||this.getLine(y.row).charAt(y.column-1))&&(w=w.match(/([\(\[\{])|([\)\]\}])/))?w[1]?this.$findClosingBracket(w[1],y):this.$findOpeningBracket(w[2],y):null},this.getBracketRange=function(y){var w,p,f=this.getLine(y.row),m=!0,h=f.charAt(y.column-1),v=h&&h.match(/([\(\[\{])|([\)\]\}])/);if(v||(h=f.charAt(y.column),y={row:y.row,column:y.column+1},v=h&&h.match(/([\(\[\{])|([\)\]\}])/),m=!1),!v)return null;if(v[1]){if(!(p=this.$findClosingBracket(v[1],y)))return null;w=S.fromPoints(y,p),m||(w.end.column++,w.start.column--),w.cursor=w.end}else{if(!(p=this.$findOpeningBracket(v[2],y)))return null;w=S.fromPoints(p,y),m||(w.start.column++,w.end.column--),w.cursor=w.start}return w},this.getMatchingBracketRanges=function(y,w){var p=this.getLine(y.row),f=/([\(\[\{])|([\)\]\}])/,m=!w&&p.charAt(y.column-1),h=m&&m.match(f);return h||(m=(void 0===w||w)&&p.charAt(y.column),y={row:y.row,column:y.column+1},h=m&&m.match(f)),h?(w=new S(y.row,y.column-1,y.row,y.column),(p=h[1]?this.$findClosingBracket(h[1],y):this.$findOpeningBracket(h[2],y))?[w,new S(p.row,p.column,p.row,p.column+1)]:[w]):null},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(y,w,p){var f=this.$brackets[y],m=1,h=new R(this,w.row,w.column),v=h.getCurrentToken();if(v=v||h.stepForward()){p=p||new RegExp("(\\.?"+v.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+");for(var O=w.column-h.getCurrentTokenColumn()-2,C=v.value;;){for(;0<=O;){var x=C.charAt(O);if(x==f){if(0==--m)return{row:h.getCurrentTokenRow(),column:O+h.getCurrentTokenColumn()}}else x==y&&(m+=1);--O}for(;(v=h.stepBackward())&&!p.test(v.type););if(null==v)break;O=(C=v.value).length-1}return null}},this.$findClosingBracket=function(y,w,p){var f=this.$brackets[y],m=1,h=new R(this,w.row,w.column),v=h.getCurrentToken();if(v=v||h.stepForward()){p=p||new RegExp("(\\.?"+v.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+");for(var O=w.column-h.getCurrentTokenColumn();;){for(var C=v.value,x=C.length;O<x;){var L=C.charAt(O);if(L==f){if(0==--m)return{row:h.getCurrentTokenRow(),column:O+h.getCurrentTokenColumn()}}else L==y&&(m+=1);O+=1}for(;(v=h.stepForward())&&!p.test(v.type););if(null==v)break;O=0}return null}},this.getMatchingTags=function(w){w=new R(this,w.row,w.column);var p=this.$findTagName(w);if(p)return"<"===w.stepBackward().value?this.$findClosingTag(w,p):this.$findOpeningTag(w,p)},this.$findTagName=function(y){var w=y.getCurrentToken(),p=!1,f=!1;if(w&&-1===w.type.indexOf("tag-name"))for(;(w=f?y.stepBackward():y.stepForward())&&("/>"===w.value?f=!0:-1!==w.type.indexOf("tag-name")&&(p=!0)),w&&!p;);return w},this.$findClosingTag=function(y,w){var p=w.value,f=w.value,m=0,h=new S(y.getCurrentTokenRow(),y.getCurrentTokenColumn(),y.getCurrentTokenRow(),y.getCurrentTokenColumn()+1),v=(w=y.stepForward(),new S(y.getCurrentTokenRow(),y.getCurrentTokenColumn(),y.getCurrentTokenRow(),y.getCurrentTokenColumn()+w.value.length)),O=!1;do{var C,x=w;if(w=y.stepForward())if(">"!==w.value||O||(C=new S(y.getCurrentTokenRow(),y.getCurrentTokenColumn(),y.getCurrentTokenRow(),y.getCurrentTokenColumn()+1),O=!0),-1!==w.type.indexOf("tag-name")){if(f===(p=w.value))if("<"===x.value)m++;else if("</"===x.value&&--m<0){y.stepBackward();var L=new S(y.getCurrentTokenRow(),y.getCurrentTokenColumn(),y.getCurrentTokenRow(),y.getCurrentTokenColumn()+2),Q=(w=y.stepForward(),new S(y.getCurrentTokenRow(),y.getCurrentTokenColumn(),y.getCurrentTokenRow(),y.getCurrentTokenColumn()+w.value.length));if(!(w=y.stepForward())||">"!==w.value)return;var G=new S(y.getCurrentTokenRow(),y.getCurrentTokenColumn(),y.getCurrentTokenRow(),y.getCurrentTokenColumn()+1)}}else f===p&&"/>"===w.value&&--m<0&&(G=Q=L=new S(y.getCurrentTokenRow(),y.getCurrentTokenColumn(),y.getCurrentTokenRow(),y.getCurrentTokenColumn()+2),C=new S(v.end.row,v.end.column,v.end.row,v.end.column+1))}while(w&&0<=m);if(h&&C&&L&&G&&v&&Q)return{openTag:new S(h.start.row,h.start.column,C.end.row,C.end.column),closeTag:new S(L.start.row,L.start.column,G.end.row,G.end.column),openTagName:v,closeTagName:Q}},this.$findOpeningTag=function(y,w){var p,f=y.getCurrentToken(),m=w.value,h=0,v=y.getCurrentTokenRow(),O=y.getCurrentTokenColumn(),C=new S(v,O,v,O+2),x=(y.stepForward(),new S(y.getCurrentTokenRow(),y.getCurrentTokenColumn(),y.getCurrentTokenRow(),y.getCurrentTokenColumn()+w.value.length));if((w=y.stepForward())&&">"===w.value){var L=new S(y.getCurrentTokenRow(),y.getCurrentTokenColumn(),y.getCurrentTokenRow(),y.getCurrentTokenColumn()+1);y.stepBackward(),y.stepBackward();do{if(w=f,v=y.getCurrentTokenRow(),p=(O=y.getCurrentTokenColumn())+w.value.length,f=y.stepBackward(),w)if(-1!==w.type.indexOf("tag-name")){if(m===w.value)if("<"===f.value){if(0<++h){for(var Q=new S(v,O,v,p),G=new S(y.getCurrentTokenRow(),y.getCurrentTokenColumn(),y.getCurrentTokenRow(),y.getCurrentTokenColumn()+1);(w=y.stepForward())&&">"!==w.value;);var T=new S(y.getCurrentTokenRow(),y.getCurrentTokenColumn(),y.getCurrentTokenRow(),y.getCurrentTokenColumn()+1)}}else"</"===f.value&&h--}else if("/>"===w.value){for(var V=0,J=f;J;){if(-1!==J.type.indexOf("tag-name")&&J.value===m){h--;break}if("<"===J.value)break;J=y.stepBackward(),V++}for(var X=0;X<V;X++)y.stepForward()}}while(f&&h<=0);return G&&T&&C&&L&&Q&&x?{openTag:new S(G.start.row,G.start.column,T.end.row,T.end.column),closeTag:new S(C.start.row,C.start.column,L.end.row,L.end.column),openTagName:Q,closeTagName:x}:void 0}}}}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(k,_,M){"use strict";function R(L,Q){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++R.$uid,this.$foldData.toString=function(){return this.join("\n")},this.bgTokenizer=new C((new h).getTokenizer(),this);var G=this;this.bgTokenizer.on("update",function(T){G._signal("tokenizerUpdate",T)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof L&&L.getLine||(L=new O(L)),this.setDocument(L),this.selection=new m(this),this.$bidiHandler=new w(this),p.resetOptions(this),this.setMode(Q),p._signal("session",this),this.destroyed=!1}var S=k("./lib/oop"),y=k("./lib/lang"),w=k("./bidihandler").BidiHandler,p=k("./config"),f=k("./lib/event_emitter").EventEmitter,m=k("./selection").Selection,h=k("./mode/text").Mode,v=k("./range").Range,O=k("./document").Document,C=k("./background_tokenizer").BackgroundTokenizer,x=k("./search_highlight").SearchHighlight;R.$uid=0,function(){S.implement(this,f),this.setDocument=function(T){this.doc&&this.doc.off("change",this.$onChange),(this.doc=T).on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(T){var V;T?(V=this.$docRowCache.length,(T=this.$getRowCacheIndex(this.$docRowCache,T)+1)<V&&(this.$docRowCache.splice(T,V),this.$screenRowCache.splice(T,V))):(this.$docRowCache=[],this.$screenRowCache=[])},this.$getRowCacheIndex=function(T,V){for(var J=0,X=T.length-1;J<=X;){var q=J+X>>1,ee=T[q];if(ee<V)J=1+q;else{if(!(V<ee))return q;X=q-1}}return J-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},this.onChangeFold=function(T){this.$resetRowCache((T=T.data).start.row)},this.onChange=function(T){this.$modified=!0,this.$bidiHandler.onChange(T),this.$resetRowCache(T.start.row);var V=this.$updateInternalDataOnChange(T);!this.$fromUndo&&this.$undoManager&&(V&&V.length&&(this.$undoManager.add({action:"removeFolds",folds:V},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(T,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(T),this._signal("change",T)},this.setValue=function(T){this.doc.setValue(T),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(T){return this.bgTokenizer.getState(T)},this.getTokens=function(T){return this.bgTokenizer.getTokens(T)},this.getTokenAt=function(T,V){var J=this.bgTokenizer.getTokens(T),q=0;if(null==V){var X=J.length-1;q=this.getLine(T).length}else for(X=0;X<J.length&&!(V<=(q+=J[X].value.length));X++);return(T=J[X])?(T.index=X,T.start=q-T.value.length,T):null},this.setUndoManager=function(T){var V;this.$undoManager=T,this.$informUndoManager&&this.$informUndoManager.cancel(),T?(T.addSession(V=this),this.$syncInformUndoManager=function(){V.$informUndoManager.cancel(),V.mergeUndoDeltas=!1},this.$informUndoManager=y.delayedCall(this.$syncInformUndoManager)):this.$syncInformUndoManager=function(){}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?y.stringRepeat(" ",this.getTabSize()):"\t"},this.setUseSoftTabs=function(T){this.setOption("useSoftTabs",T)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(T){this.setOption("tabSize",T)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(T){return this.$useSoftTabs&&T.column%this.$tabSize==0},this.setNavigateWithinSoftTabs=function(T){this.setOption("navigateWithinSoftTabs",T)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(T){this.setOption("overwrite",T)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(T,V){this.$decorations[T]||(this.$decorations[T]=""),this.$decorations[T]+=" "+V,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(T,V){this.$decorations[T]=(this.$decorations[T]||"").replace(" "+V,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(T){this.$breakpoints=[];for(var V=0;V<T.length;V++)this.$breakpoints[T[V]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(T,V){(V=void 0===V?"ace_breakpoint":V)?this.$breakpoints[T]=V:delete this.$breakpoints[T],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(T){delete this.$breakpoints[T],this._signal("changeBreakpoint",{})},this.addMarker=function(ee,V,J,X){var q=this.$markerId++;return ee={range:ee,type:J||"line",renderer:"function"==typeof J?J:null,clazz:V,inFront:!!X,id:q},X?(this.$frontMarkers[q]=ee,this._signal("changeFrontMarker")):(this.$backMarkers[q]=ee,this._signal("changeBackMarker")),q},this.addDynamicMarker=function(T,V){var J;if(T.update)return J=this.$markerId++,T.id=J,T.inFront=!!V,V?(this.$frontMarkers[J]=T,this._signal("changeFrontMarker")):(this.$backMarkers[J]=T,this._signal("changeBackMarker")),T},this.removeMarker=function(T){var V=this.$frontMarkers[T]||this.$backMarkers[T];V&&(delete(V.inFront?this.$frontMarkers:this.$backMarkers)[T],this._signal(V.inFront?"changeFrontMarker":"changeBackMarker"))},this.getMarkers=function(T){return T?this.$frontMarkers:this.$backMarkers},this.highlight=function(T){var V;this.$searchHighlight||(V=new x(null,"ace_selected-word","text"),this.$searchHighlight=this.addDynamicMarker(V)),this.$searchHighlight.setRegexp(T)},this.highlightLines=function(T,V,J,X){return"number"!=typeof V&&(J=V,V=T),J=J||"ace_step",(T=new v(T,0,V,1/0)).id=this.addMarker(T,J,"fullLine",X),T},this.setAnnotations=function(T){this.$annotations=T,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(T){T=T.match(/^.*?(\r?\n)/m),this.$autoNewLine=T?T[1]:"\n"},this.getWordRange=function(T,V){var J,X=this.getLine(T),q=!1,ee=(J=(q=(q=0<V?!!X.charAt(V-1).match(this.tokenRe):q)||!!X.charAt(V).match(this.tokenRe))?this.tokenRe:/^\s+$/.test(X.slice(V-1,V+1))?/\s/:this.nonTokenRe,V);if(0<ee){for(;0<=--ee&&X.charAt(ee).match(J););ee++}for(var j=V;j<X.length&&X.charAt(j).match(J);)j++;return new v(T,ee,T,j)},this.getAWordRange=function(T,V){for(var J=this.getWordRange(T,V),X=this.getLine(J.end.row);X.charAt(J.end.column).match(/[ \t]/);)J.end.column+=1;return J},this.setNewLineMode=function(T){this.doc.setNewLineMode(T)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(T){this.setOption("useWorker",T)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(T){this.bgTokenizer.start(T.data.first),this._signal("tokenizerUpdate",T)},this.$modes=p.$modes,this.$mode=null,this.$modeId=null,this.setMode=function(T,V){if(T&&"object"==typeof T){if(T.getTokenizer)return this.$onChangeMode(T);var J=T,X=T.path}else X=T||"ace/mode/text";this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new h),this.$modes[X]&&!J?(this.$onChangeMode(this.$modes[X]),V&&V()):(this.$modeId=X,p.loadModule(["mode",X],function(q){if(this.$modeId!==X)return V&&V();this.$modes[X]&&!J?this.$onChangeMode(this.$modes[X]):q&&q.Mode&&(q=new q.Mode(J),J||((this.$modes[X]=q).$id=X),this.$onChangeMode(q)),V&&V()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0))},this.$onChangeMode=function(T,V){var J,X,q;V||(this.$modeId=T.$id),this.$mode===T||(J=this.$mode,this.$mode=T,this.$stopWorker(),this.$useWorker&&this.$startWorker(),void 0!==(X=T.getTokenizer()).on&&(q=this.onReloadTokenizer.bind(this),X.on("update",q)),this.bgTokenizer.setTokenizer(X),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=T.tokenRe,this.nonTokenRe=T.nonTokenRe,V)||(T.attachToSession&&T.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(T.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:J,mode:T}))},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(T){p.warn("Could not load worker",T),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(T){this.$scrollTop===T||isNaN(T)||(this.$scrollTop=T,this._signal("changeScrollTop",T))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(T){this.$scrollLeft===T||isNaN(T)||(this.$scrollLeft=T,this._signal("changeScrollLeft",T))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){var T;return null!=this.lineWidgetsWidth?this.lineWidgetsWidth:(T=0,this.lineWidgets.forEach(function(V){V&&V.screenWidth>T&&(T=V.screenWidth)}),this.lineWidgetWidth=T)},this.$computeWidth=function(T){if(this.$modified||T){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var V=this.doc.getAllLines(),J=this.$rowLengthCache,X=0,q=0,ee=this.$foldData[q],j=ee?ee.start.row:1/0,D=V.length,N=0;N<D;N++){if(j<N){if(D<=(N=ee.end.row+1))break;j=(ee=this.$foldData[q++])?ee.start.row:1/0}null==J[N]&&(J[N]=this.$getStringScreenWidth(V[N])[0]),J[N]>X&&(X=J[N])}this.screenWidth=X}},this.getLine=function(T){return this.doc.getLine(T)},this.getLines=function(T,V){return this.doc.getLines(T,V)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(T){return this.doc.getTextRange(T||this.selection.getRange())},this.insert=function(T,V){return this.doc.insert(T,V)},this.remove=function(T){return this.doc.remove(T)},this.removeFullLines=function(T,V){return this.doc.removeFullLines(T,V)},this.undoChanges=function(T,V){if(T.length){this.$fromUndo=!0;for(var J=T.length-1;-1!=J;J--){var X=T[J];"insert"==X.action||"remove"==X.action?this.doc.revertDelta(X):X.folds&&this.addFolds(X.folds)}!V&&this.$undoSelect&&(T.selectionBefore?this.selection.fromJSON(T.selectionBefore):this.selection.setRange(this.$getUndoSelection(T,!0))),this.$fromUndo=!1}},this.redoChanges=function(T,V){if(T.length){this.$fromUndo=!0;for(var J=0;J<T.length;J++){var X=T[J];"insert"!=X.action&&"remove"!=X.action||this.doc.$safeApplyDelta(X)}!V&&this.$undoSelect&&(T.selectionAfter?this.selection.fromJSON(T.selectionAfter):this.selection.setRange(this.$getUndoSelection(T,!1))),this.$fromUndo=!1}},this.setUndoSelect=function(T){this.$undoSelect=T},this.$getUndoSelection=function(T,V){function J(D){return V?"insert"!==D.action:"insert"===D.action}for(var X,q,ee=0;ee<T.length;ee++){var j=T[ee];j.start&&(X?J(j)?(-1==X.compare((q=j.start).row,q.column)&&X.setStart(q),1==X.compare((q=j.end).row,q.column)&&X.setEnd(q)):-1==X.compare((q=j.start).row,q.column)&&(X=v.fromPoints(j.start,j.start)):X=J(j)?v.fromPoints(j.start,j.end):v.fromPoints(j.start,j.start))}return X},this.replace=function(T,V){return this.doc.replace(T,V)},this.moveText=function(T,N,J){var X,q,ee,j=this.getTextRange(T),D=this.getFoldsInRange(T);return N=v.fromPoints(N,N),J||(this.remove(T),(ee=(q=T.start.row-T.end.row)?-T.end.column:T.start.column-T.end.column)&&(N.start.row==T.end.row&&N.start.column>T.end.column&&(N.start.column+=ee),N.end.row==T.end.row)&&N.end.column>T.end.column&&(N.end.column+=ee),q&&N.start.row>=T.end.row&&(N.start.row+=q,N.end.row+=q)),N.end=this.insert(N.start,j),D.length&&(q=(J=N.start).row-(X=T.start).row,ee=J.column-X.column,this.addFolds(D.map(function(re){return(re=re.clone()).start.row==X.row&&(re.start.column+=ee),re.end.row==X.row&&(re.end.column+=ee),re.start.row+=q,re.end.row+=q,re}))),N},this.indentRows=function(T,V,J){J=J.replace(/\t/g,this.getTabString());for(var X=T;X<=V;X++)this.doc.insertInLine({row:X,column:0},J)},this.outdentRows=function(T){for(var V=T.collapseRows(),J=new v(0,0,0,0),X=this.getTabSize(),q=V.start.row;q<=V.end.row;++q){var ee=this.getLine(q);J.start.row=q,J.end.row=q;for(var j=0;j<X&&" "==ee.charAt(j);++j);j<X&&"\t"==ee.charAt(j)?(J.start.column=j,J.end.column=j+1):(J.start.column=0,J.end.column=j),this.remove(J)}},this.$moveLines=function(T,V,ee){if(T=this.getRowFoldStart(T),V=this.getRowFoldEnd(V),ee<0){if((q=this.getRowFoldStart(T+ee))<0)return 0;var X=q-T}else if(0<ee){if((q=this.getRowFoldEnd(V+ee))>this.doc.getLength()-1)return 0;X=q-V}else T=this.$clipRowToDocument(T),X=(V=this.$clipRowToDocument(V))-T+1;var q=new v(T,0,V,Number.MAX_VALUE);return q=this.getFoldsInRange(q).map(function(j){return(j=j.clone()).start.row+=X,j.end.row+=X,j}),ee=0==ee?this.doc.getLines(T,V):this.doc.removeFullLines(T,V),this.doc.insertFullLines(T+X,ee),q.length&&this.addFolds(q),X},this.moveLinesUp=function(T,V){return this.$moveLines(T,V,-1)},this.moveLinesDown=function(T,V){return this.$moveLines(T,V,1)},this.duplicateLines=function(T,V){return this.$moveLines(T,V,0)},this.$clipRowToDocument=function(T){return Math.max(0,Math.min(T,this.doc.getLength()-1))},this.$clipColumnToRow=function(T,V){return V<0?0:Math.min(this.doc.getLine(T).length,V)},this.$clipPositionToDocument=function(T,V){var J;return V=Math.max(0,V),V=T<0?T=0:(J=this.doc.getLength())<=T?this.doc.getLine(T=J-1).length:Math.min(this.doc.getLine(T).length,V),{row:T,column:V}},this.$clipRangeToDocument=function(T){T.start.row<0?(T.start.row=0,T.start.column=0):T.start.column=this.$clipColumnToRow(T.start.row,T.start.column);var V=this.doc.getLength()-1;return T.end.row>V?(T.end.row=V,T.end.column=this.doc.getLine(V).length):T.end.column=this.$clipColumnToRow(T.end.row,T.end.column),T},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(T){T!=this.$useWrapMode&&(this.$useWrapMode=T,this.$modified=!0,this.$resetRowCache(0),T&&(T=this.getLength(),this.$wrapData=Array(T),this.$updateWrapData(0,T-1)),this._signal("changeWrapMode"))},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(T,V){this.$wrapLimitRange.min===T&&this.$wrapLimitRange.max===V||(this.$wrapLimitRange={min:T,max:V},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(T,X){var J=this.$wrapLimitRange;return J.max<0&&(J={min:X,max:X}),(X=this.$constrainWrapLimit(T,J.min,J.max))!=this.$wrapLimit&&1<X&&(this.$wrapLimit=X,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(T,V,J){return V&&(T=Math.max(V,T)),J?Math.min(J,T):T},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(T){this.setWrapLimitRange(T,T)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(T){var Te,V=this.$useWrapMode,J=T.action,X=T.start,q=T.end,ee=X.row,j=q.row,D=j-ee,N=null;if(this.$updating=!0,0!=D)if("remove"===J){this[V?"$wrapData":"$rowLengthCache"].splice(ee,D);var re=this.$foldData;N=this.getFoldsInRange(T),this.removeFolds(N);var ue=0;for((Te=this.getFoldLine(q.row))&&(Te.addRemoveChars(q.row,q.column,X.column-q.column),Te.shiftRow(-D),(ve=this.getFoldLine(ee))&&ve!==Te&&(ve.merge(Te),Te=ve),ue=re.indexOf(Te)+1);ue<re.length;ue++)(Te=re[ue]).start.row>=q.row&&Te.shiftRow(-D);j=ee}else{var ve=Array(D),Ae=(ve.unshift(ee,0),V?this.$wrapData:this.$rowLengthCache);for(Ae.splice.apply(Ae,ve),re=this.$foldData,ue=0,(Te=this.getFoldLine(ee))&&(0==(Ae=Te.range.compareInside(X.row,X.column))?(Te=Te.split(X.row,X.column))&&(Te.shiftRow(D),Te.addRemoveChars(j,0,q.column-X.column)):-1==Ae&&(Te.addRemoveChars(ee,0,q.column-X.column),Te.shiftRow(D)),ue=re.indexOf(Te)+1);ue<re.length;ue++)(Te=re[ue]).start.row>=ee&&Te.shiftRow(D)}else D=Math.abs(T.start.column-T.end.column),"remove"===J&&(N=this.getFoldsInRange(T),this.removeFolds(N),D=-D),(Te=this.getFoldLine(ee))&&Te.addRemoveChars(ee,X.column,D);return V&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,V?this.$updateWrapData(ee,j):this.$updateRowLengthCache(ee,j),N},this.$updateRowLengthCache=function(T,V,J){this.$rowLengthCache[T]=null,this.$rowLengthCache[V]=null},this.$updateWrapData=function(T,V){var J,X,q=this.doc.getAllLines(),ee=this.getTabSize(),j=this.$wrapData,D=this.$wrapLimit,N=T;for(V=Math.min(V,q.length-1);N<=V;)(X=this.getFoldLine(N,X))?(J=[],X.walk(function(re,ue,ve,Ae){var Te;if(null!=re){(Te=this.$getDisplayTokens(re,J.length))[0]=L;for(var Re=1;Re<Te.length;Re++)Te[Re]=Q}else Te=this.$getDisplayTokens(q[ue].substring(Ae,ve),J.length);J=J.concat(Te)}.bind(this),X.end.row,q[X.end.row].length+1),j[X.start.row]=this.$computeWrapSplits(J,D,ee),N=X.end.row+1):(J=this.$getDisplayTokens(q[N]),j[N]=this.$computeWrapSplits(J,D,ee),N++)};var L=3,Q=4;function G(T){return!(T<4352)&&(4352<=T&&T<=4447||4515<=T&&T<=4519||4602<=T&&T<=4607||9001<=T&&T<=9002||11904<=T&&T<=11929||11931<=T&&T<=12019||12032<=T&&T<=12245||12272<=T&&T<=12283||12288<=T&&T<=12350||12353<=T&&T<=12438||12441<=T&&T<=12543||12549<=T&&T<=12589||12593<=T&&T<=12686||12688<=T&&T<=12730||12736<=T&&T<=12771||12784<=T&&T<=12830||12832<=T&&T<=12871||12880<=T&&T<=13054||13056<=T&&T<=19903||19968<=T&&T<=42124||42128<=T&&T<=42182||43360<=T&&T<=43388||44032<=T&&T<=55203||55216<=T&&T<=55238||55243<=T&&T<=55291||63744<=T&&T<=64255||65040<=T&&T<=65049||65072<=T&&T<=65106||65108<=T&&T<=65126||65128<=T&&T<=65131||65281<=T&&T<=65376||65504<=T&&T<=65510)}this.$computeWrapSplits=function(T,V,J){if(0==T.length)return[];var X=[],q=T.length,ee=0,j=0,D=this.$wrapAsCode,N=this.$indentedSoftWrap,re=V<=Math.max(2*J,8)||!1===N?0:Math.floor(V/2);function ue(Re){for(var Me=Re-ee,Ie=ee;Ie<Re;Ie++){var Ge=T[Ie];12!==Ge&&2!==Ge||--Me}X.length||(ve=function(){var oe=0;if(0===re)return oe;if(N)for(var pe=0;pe<T.length;pe++){var ge=T[pe];if(10==ge)oe+=1;else if(11==ge)oe+=J;else if(12!=ge)break}return D&&!1!==N&&(oe+=J),Math.min(oe,re)}(),X.indent=ve),X.push(j+=Me),ee=Re}for(var ve=0;V-ve<q-ee;){var Ae=ee+V-ve;if(10<=T[Ae-1]&&10<=T[Ae])ue(Ae);else if(T[Ae]==L||T[Ae]==Q){for(;Ae!=ee-1&&T[Ae]!=L;Ae--);if(!(ee<Ae)){for(Ae=ee+V;Ae<T.length&&T[Ae]==Q;Ae++);if(Ae==T.length)break}ue(Ae)}else{for(var Te=Math.max(Ae-(V-(V>>2)),ee-1);Te<Ae&&T[Ae]<L;)Ae--;if(D){for(;Te<Ae&&T[Ae]<L;)Ae--;for(;Te<Ae&&9==T[Ae];)Ae--}else for(;Te<Ae&&T[Ae]<10;)Ae--;Te<Ae?ue(++Ae):(2==T[Ae=ee+V]&&Ae--,ue(Ae-ve))}}return X},this.$getDisplayTokens=function(T,V){var J,X=[];V=V||0;for(var q=0;q<T.length;q++){var ee=T.charCodeAt(q);if(9==ee){J=this.getScreenTabSize(X.length+V),X.push(11);for(var j=1;j<J;j++)X.push(12)}else 32==ee?X.push(10):39<ee&&ee<48||57<ee&&ee<64?X.push(9):4352<=ee&&G(ee)?X.push(1,2):X.push(1)}return X},this.$getStringScreenWidth=function(T,V,J){if(0==V)return[0,0];var X,q;for(null==V&&(V=1/0),J=J||0,q=0;q<T.length&&(9==(X=T.charCodeAt(q))?J+=this.getScreenTabSize(J):4352<=X&&G(X)?J+=2:J+=1,!(V<J));q++);return[J,q]},this.lineWidgets=null,this.getRowLength=function(T){var V=1;return this.lineWidgets&&(V+=this.lineWidgets[T]&&this.lineWidgets[T].rowCount||0),this.$useWrapMode&&this.$wrapData[T]?this.$wrapData[T].length+V:V},this.getRowLineCount=function(T){return this.$useWrapMode&&this.$wrapData[T]?this.$wrapData[T].length+1:1},this.getRowWrapIndent=function(T){var V;return this.$useWrapMode&&(T=this.screenToDocumentPosition(T,Number.MAX_VALUE),(V=this.$wrapData[T.row]).length)&&V[0]<T.column?V.indent:0},this.getScreenLastRowColumn=function(T){return T=this.screenToDocumentPosition(T,Number.MAX_VALUE),this.documentToScreenColumn(T.row,T.column)},this.getDocumentLastRowColumn=function(T,V){return T=this.documentToScreenRow(T,V),this.getScreenLastRowColumn(T)},this.getDocumentLastRowColumnPosition=function(T,V){return T=this.documentToScreenRow(T,V),this.screenToDocumentPosition(T,Number.MAX_VALUE/10)},this.getRowSplitData=function(T){if(this.$useWrapMode)return this.$wrapData[T]},this.getScreenTabSize=function(T){return this.$tabSize-(T%this.$tabSize|0)},this.screenToDocumentRow=function(T,V){return this.screenToDocumentPosition(T,V).row},this.screenToDocumentColumn=function(T,V){return this.screenToDocumentPosition(T,V).column},this.screenToDocumentPosition=function(T,V,J){if(T<0)return{row:0,column:0};for(var X,q,ee,j=0,D=0,N=0,re=0,ue=this.$screenRowCache,ve=this.$getRowCacheIndex(ue,T),Ae=ue.length,Te=(ee=Ae&&0<=ve?(N=ue[ve],j=this.$docRowCache[ve],T>ue[Ae-1]):!Ae,this.getLength()-1),Re=this.getNextFoldLine(j),Me=Re?Re.start.row:1/0;N<=T&&!(T<N+(re=this.getRowLength(j))||Te<=j);)N+=re,Me<++j&&(Me=(Re=this.getNextFoldLine(j=Re.end.row+1,Re))?Re.start.row:1/0),ee&&(this.$docRowCache.push(j),this.$screenRowCache.push(N));if(Re&&Re.start.row<=j)X=this.getFoldDisplayLine(Re),j=Re.start.row;else{if(N+re<=T||Te<j)return{row:Te,column:this.getLine(Te).length};X=this.getLine(j),Re=null}return ve=0,ue=Math.floor(T-N),this.$useWrapMode&&(Ae=this.$wrapData[j])&&(q=Ae[ue],0<ue)&&Ae.length&&(ve=Ae.indent,X=X.substring(D=Ae[ue-1]||Ae[Ae.length-1])),void 0!==J&&this.$bidiHandler.isBidiRow(N+ue,j,ue)&&(V=this.$bidiHandler.offsetToCol(J)),D+=this.$getStringScreenWidth(X,V-ve)[1],this.$useWrapMode&&q<=D&&(D=q-1),Re?Re.idxToPosition(D):{row:j,column:D}},this.documentToScreenPosition=function(T,V){var J=(T=(ve=void 0===V?this.$clipPositionToDocument(T.row,T.column):this.$clipPositionToDocument(T,V)).row,V=ve.column,0),ve=null;(j=this.getFoldAt(T,V,1))&&(T=j.start.row,V=j.start.column);for(var X,q,ee=0,j=this.$docRowCache,Ae=this.$getRowCacheIndex(j,T),D=j.length,N=(q=D&&0<=Ae?(ee=j[Ae],J=this.$screenRowCache[Ae],T>j[D-1]):!D,this.getNextFoldLine(ee)),re=N?N.start.row:1/0;ee<T;){if(re<=ee){if(T<(X=N.end.row+1))break;re=(N=this.getNextFoldLine(X,N))?N.start.row:1/0}else X=ee+1;J+=this.getRowLength(ee),ee=X,q&&(this.$docRowCache.push(ee),this.$screenRowCache.push(J))}var ue="";if(ve=N&&re<=ee?(ue=this.getFoldDisplayLine(N,T,V),N.start.row):(ue=this.getLine(T).substring(0,V),T),Ae=0,this.$useWrapMode){var Te=this.$wrapData[ve];if(Te){for(var Re=0;ue.length>=Te[Re];)J++,Re++;ue=ue.substring(Te[Re-1]||0,ue.length),Ae=0<Re?Te.indent:0}}return this.lineWidgets&&this.lineWidgets[ee]&&this.lineWidgets[ee].rowsAbove&&(J+=this.lineWidgets[ee].rowsAbove),{row:J,column:Ae+this.$getStringScreenWidth(ue)[0]}},this.documentToScreenColumn=function(T,V){return this.documentToScreenPosition(T,V).column},this.documentToScreenRow=function(T,V){return this.documentToScreenPosition(T,V).row},this.getScreenLength=function(){var T=0,V=null;if(this.$useWrapMode)for(var J=this.$wrapData.length,X=0,q=0,ee=(V=this.$foldData[q++])?V.start.row:1/0;X<J;){var j=this.$wrapData[X];T+=j?j.length+1:1,ee<++X&&(X=V.end.row+1,ee=(V=this.$foldData[q++])?V.start.row:1/0)}else{T=this.getLength();var D=this.$foldData;for(q=0;q<D.length;q++)T-=(V=D[q]).end.row-V.start.row}return this.lineWidgets&&(T+=this.$getWidgetScreenLength()),T},this.$setFontMetrics=function(T){this.$enableVarChar&&(this.$getStringScreenWidth=function(V,J,X){if(0===J)return[0,0];var q,ee;for(J=J||1/0,X=X||0,ee=0;ee<V.length&&!(J<(X+="\t"===(q=V.charAt(ee))?this.getScreenTabSize(X):T.getCharacterWidth(q)));ee++);return[X,ee]})},this.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},this.isFullWidth=G}.call(R.prototype),k("./edit_session/folding").Folding.call(R.prototype),k("./edit_session/bracket_match").BracketMatch.call(R.prototype),p.defineOptions(R.prototype,"session",{wrap:{set:function(L){L&&"off"!=L?"free"==L?L=!0:"printMargin"==L?L=-1:"string"==typeof L&&(L=parseInt(L,10)||!1):L=!1,this.$wrap!=L&&((this.$wrap=L)?(this.setWrapLimitRange(L="number"==typeof L?L:null,L),this.setUseWrapMode(!0)):this.setUseWrapMode(!1))},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(L){(L="auto"==L?"text"!=this.$mode.type:"text"!=L)!=this.$wrapAsCode&&(this.$wrapAsCode=L,this.$useWrapMode)&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(L){this.$useWorker=L,this.$stopWorker(),L&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(L){0<(L=parseInt(L))&&this.$tabSize!==L&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=L,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(L){this.setFoldStyle(L)},handlesSet:!0},overwrite:{set:function(L){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(L){this.doc.setNewLineMode(L)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(L){this.setMode(L)},get:function(){return this.$modeId},handlesSet:!0}}),_.EditSession=R}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(k,_,M){"use strict";function R(){this.$options={}}var S=k("./lib/lang"),y=k("./lib/oop"),w=k("./range").Range;(function(){this.set=function(p){return y.mixin(this.$options,p),this},this.getOptions=function(){return S.copyObject(this.$options)},this.setOptions=function(p){this.$options=p},this.find=function(h){var f,m=this.$options;return!!(h=this.$matchIterator(h,m))&&(f=null,h.forEach(function(v,O,C,x){return f=new w(v,O,C,x),!(O==x&&m.start&&m.start.start&&0!=m.skipCurrent&&f.isEqual(m.start)&&(f=null,1))}),f)},this.findAll=function(p){var f=this.$options;if(!f.needle)return[];this.$assembleRegExp(f);var m=f.range,h=m?p.getLines(m.start.row,m.end.row):p.doc.getAllLines(),v=[],O=f.re;if(f.$isMultiLine){var C,x=O.length,L=h.length-x;e:for(var Q=O.offset||0;Q<=L;Q++){for(var G=0;G<x;G++)if(-1==h[Q+G].search(O[G]))continue e;var V=h[Q+x-1],T=(T=h[Q]).length-T.match(O[0])[0].length;V=V.match(O[x-1])[0].length,C&&C.end.row===Q&&C.end.column>T||(v.push(C=new w(Q,T,Q+x-1,V)),2<x&&(Q=Q+x-2))}}else for(var J=0;J<h.length;J++){var X=S.getMatchOffsets(h[J],O);for(G=0;G<X.length;G++){var q=X[G];v.push(new w(J,q.offset,J,q.offset+q.length))}}if(m){var ee=m.start.column,j=m.end.column;for(J=0,G=v.length-1;J<G&&v[J].start.column<ee&&0==v[J].start.row;)J++;for(var D=m.end.row-m.start.row;J<G&&v[G].end.column>j&&v[G].end.row==D;)G--;for(v=v.slice(J,G+1),J=0,G=v.length;J<G;J++)v[J].start.row+=m.start.row,v[J].end.row+=m.start.row}return v},this.replace=function(p,f){var m=this.$options,h=this.$assembleRegExp(m);if(m.$isMultiLine)return f;if(h){var v=h.exec(p);if(!v||v[0].length!=p.length)return null;if(f=p.replace(h,f),m.preserveCase){f=f.split("");for(var O=Math.min(p.length,p.length);O--;){var C=p[O];f[O]=C&&C.toLowerCase()!=C?f[O].toUpperCase():f[O].toLowerCase()}f=f.join("")}return f}},this.$assembleRegExp=function(p,f){if(p.needle instanceof RegExp)return p.re=p.needle;var m,h=p.needle;if(!p.needle)return p.re=!1;function v(x){return/\w/.test(x)||m.regExp?"\\b":""}p.regExp||(h=S.escapeRegExp(h)),p.wholeWord&&(m=p,h=v((O=h)[0])+O+v(O[O.length-1]));var O=p.caseSensitive?"gm":"gmi";if(p.$isMultiLine=!f&&/[\n\r]/.test(h),p.$isMultiLine)return p.re=this.$assembleMultilineRegExp(h,O);try{var C=new RegExp(h,O)}catch{C=!1}return p.re=C},this.$assembleMultilineRegExp=function(p,f){for(var m=p.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),h=[],v=0;v<m.length;v++)try{h.push(new RegExp(m[v],f))}catch{return!1}return h},this.$matchIterator=function(p,f){var m,h,v,O,C,x,L,Q,G=this.$assembleRegExp(f);return!!G&&(m=1==f.backwards,h=0!=f.skipCurrent,v=f.range,(O=(O=f.start)||(v?v[m?"end":"start"]:p.selection.getRange())).start&&(O=O[h!=m?"end":"start"]),C=v?v.start.row:0,x=v?v.end.row:p.getLength()-1,Q=f.$isMultiLine?(L=G.length,function(T,V,J){var X=m?T-L+1:T;if(!(X<0||X+L>p.getLength())){var q=p.getLine(X);if(T=q.search(G[0]),!(!m&&T<V||-1===T)){for(var ee=1;ee<L;ee++)if(-1==(q=p.getLine(X+ee)).search(G[ee]))return;var j=q.match(G[L-1])[0].length;if(!(m&&V<j))return!!J(X,T,X+L-1,j)||void 0}}}):m?function(T,V,J){var X,q=p.getLine(T),ee=[];for(G.lastIndex=0;X=G.exec(q);){var j=X[0].length,D=X.index;if(!j){if(D>=q.length)break;G.lastIndex=D+=1}if(X.index+j>V)break;ee.push(X.index,j)}for(var N=ee.length-1;0<=N;N-=2){var re=ee[N-1];if(J(T,re,T,re+(j=ee[N])))return!0}}:function(T,V,J){var X=p.getLine(T);for(G.lastIndex=V;q=G.exec(X);){var q,ee=q[0].length;if(J(T,q=q.index,T,q+ee))return!0;if(!ee&&(G.lastIndex=q+=1,q>=X.length))return!1}},{forEach:m?function(T){var V=O.row;if(!Q(V,O.column,T)){for(V--;C<=V;V--)if(Q(V,Number.MAX_VALUE,T))return;if(0!=f.wrap)for(V=x,C=O.row;C<=V;V--)if(Q(V,Number.MAX_VALUE,T))return}}:function(T){var V=O.row;if(!Q(V,O.column,T)){for(V+=1;V<=x;V++)if(Q(V,0,T))return;if(0!=f.wrap)for(V=C,x=O.row;V<=x;V++)if(Q(V,0,T))return}}})}}).call(R.prototype),_.Search=R}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(k,_,M){"use strict";var R=k("../lib/keys"),S=k("../lib/useragent"),y=R.KEY_MODS;function w(f,m){this.platform=m||(S.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(f),this.$singleCommand=!0}function p(f,m){w.call(this,f,m),this.$singleCommand=!1}p.prototype=w.prototype,function(){function f(m){return"object"==typeof m&&m.bindKey&&m.bindKey.position||(m.isDefault?-100:0)}this.addCommand=function(m){this.commands[m.name]&&this.removeCommand(m),(this.commands[m.name]=m).bindKey&&this._buildKeyHash(m)},this.removeCommand=function(m,h){var v,O=m&&("string"==typeof m?m:m.name),C=(m=this.commands[O],h||delete this.commands[O],this.commandKeyBinding);for(v in C){var x,L=C[v];L==m?delete C[v]:Array.isArray(L)&&-1!=(x=L.indexOf(m))&&(L.splice(x,1),1==L.length)&&(C[v]=L[0])}},this.bindKey=function(m,h,v){if("object"==typeof m&&m&&(null==v&&(v=m.position),m=m[this.platform]),m)return"function"==typeof h?this.addCommand({exec:h,bindKey:m,name:h.name||m}):void m.split("|").forEach(function(L){var C="",x=(-1!=L.indexOf(" ")&&(L=(x=L.split(/\s+/)).pop(),x.forEach(function(Q){Q=this.parseKeys(Q),this._addCommandToBinding(C+=(C?" ":"")+(Q=y[Q.hashId]+Q.key),"chainKeys")},this),C+=" "),this.parseKeys(L));this._addCommandToBinding(C+(L=y[x.hashId]+x.key),h,v)},this)},this._addCommandToBinding=function(m,h,v){var O=this.commandKeyBinding;if(h)if(!O[m]||this.$singleCommand)O[m]=h;else{Array.isArray(O[m])?-1!=(x=O[m].indexOf(h))&&O[m].splice(x,1):O[m]=[O[m]],"number"!=typeof v&&(v=f(h));for(var C=O[m],x=0;x<C.length&&!(v<f(C[x]));x++);C.splice(x,0,h)}else delete O[m]},this.addCommands=function(m){m&&Object.keys(m).forEach(function(h){var v=m[h];if(v){if("string"==typeof v)return this.bindKey(v,h);"object"==typeof(v="function"==typeof v?{exec:v}:v)&&(v.name||(v.name=h),this.addCommand(v))}},this)},this.removeCommands=function(m){Object.keys(m).forEach(function(h){this.removeCommand(m[h])},this)},this.bindKeys=function(m){Object.keys(m).forEach(function(h){this.bindKey(h,m[h])},this)},this._buildKeyHash=function(m){this.bindKey(m.bindKey,m)},this.parseKeys=function(m){var h=m.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(Q){return Q}),v=h.pop(),O=R[v];if(R.FUNCTION_KEYS[O])v=R.FUNCTION_KEYS[O].toLowerCase();else{if(!h.length)return{key:v,hashId:-1};if(1==h.length&&"shift"==h[0])return{key:v.toUpperCase(),hashId:-1}}for(var C=0,x=h.length;x--;){var L=R.KEY_MODS[h[x]];if(null==L)return typeof console<"u"&&console.error("invalid modifier "+h[x]+" in "+m),!1;C|=L}return{key:v,hashId:C}},this.findKeyCommand=function(m,h){return this.commandKeyBinding[m=y[m]+h]},this.handleKeyboard=function(m,h,v,O){var C,x;if(!(O<0))return x=this.commandKeyBinding[C=y[h]+v],m.$keyChain&&(m.$keyChain+=" "+C,x=this.commandKeyBinding[m.$keyChain]||x),!x||"chainKeys"!=x&&"chainKeys"!=x[x.length-1]?(m.$keyChain&&(h&&4!=h||1!=v.length?(-1==h||0<O)&&(m.$keyChain=""):m.$keyChain=m.$keyChain.slice(0,-C.length-1)),{command:x}):(m.$keyChain=m.$keyChain||C,{command:"null"})},this.getStatusText=function(m,h){return h.$keyChain||""}}.call(w.prototype),_.HashHandler=w,_.MultiHashHandler=p}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(k,_,M){"use strict";function R(p,f){y.call(this,f,p),this.byName=this.commands,this.setDefaultHandler("exec",function(m){return m.args?m.command.exec(m.editor,m.args,m.event,!1):m.command.exec(m.editor,{},m.event,!0)})}var S=k("../lib/oop"),y=k("../keyboard/hash_handler").MultiHashHandler,w=k("../lib/event_emitter").EventEmitter;S.inherits(R,y),function(){S.implement(this,w),this.exec=function(p,f,m){if(Array.isArray(p)){for(var h=p.length;h--;)if(this.exec(p[h],f,m))return!0;return!1}var v;return!!(p="string"==typeof p?this.commands[p]:p)&&!(f&&f.$readOnly&&!p.readOnly||0!=this.$checkCommandState&&p.isAvailable&&!p.isAvailable(f)||((v={editor:f,command:p,args:m}).returnValue=this._emit("exec",v),this._signal("afterExec",v),!1===v.returnValue))},this.toggleRecording=function(p){if(!this.$inReplay)return p&&p._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(f){this.macro.push([f.command,f.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(p){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(p);try{this.$inReplay=!0,this.macro.forEach(function(f){"string"==typeof f?this.exec(f,p):this.exec(f[0],p,f[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(p){return p.map(function(f){return"string"!=typeof f[0]&&(f[0]=f[0].name),f[1]?f:f[0]})}}.call(R.prototype),_.CommandManager=R}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(k,_,M){"use strict";var R=k("../lib/lang"),S=k("../config"),y=k("../range").Range;function w(f,m){return{win:f,mac:m}}_.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:w("Ctrl-,","Command-,"),exec:function(f){S.loadModule("ace/ext/settings_menu",function(m){m.init(f),f.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:w("Alt-E","F4"),exec:function(f){S.loadModule("ace/ext/error_marker",function(m){m.showErrorMarker(f,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:w("Alt-Shift-E","Shift-F4"),exec:function(f){S.loadModule("ace/ext/error_marker",function(m){m.showErrorMarker(f,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:w("Ctrl-A","Command-A"),exec:function(f){f.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:w(null,"Ctrl-L"),exec:function(f){f.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:w("Ctrl-L","Command-L"),exec:function(f,m){"number"!=typeof m||isNaN(m)||f.gotoLine(m),f.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:w("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(f){f.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:w("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(f){f.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:w("F2","F2"),exec:function(f){f.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:w("Alt-F2","Alt-F2"),exec:function(f){f.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:w(null,"Ctrl-Command-Option-0"),exec:function(f){f.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:w(null,"Ctrl-Command-Option-0"),exec:function(f){f.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:w("Alt-0","Command-Option-0"),exec:function(f){f.session.foldAll(),f.session.unfold(f.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:w("Alt-Shift-0","Command-Option-Shift-0"),exec:function(f){f.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:w("Ctrl-K","Command-G"),exec:function(f){f.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:w("Ctrl-Shift-K","Command-Shift-G"),exec:function(f){f.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:w("Alt-K","Ctrl-G"),exec:function(f){f.selection.isEmpty()?f.selection.selectWord():f.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:w("Alt-Shift-K","Ctrl-Shift-G"),exec:function(f){f.selection.isEmpty()?f.selection.selectWord():f.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:w("Ctrl-F","Command-F"),exec:function(f){S.loadModule("ace/ext/searchbox",function(m){m.Search(f)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(f){f.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:w("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(f){f.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:w("Ctrl-Home","Command-Home|Command-Up"),exec:function(f){f.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:w("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(f){f.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:w("Up","Up|Ctrl-P"),exec:function(f,m){f.navigateUp(m.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:w("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(f){f.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:w("Ctrl-End","Command-End|Command-Down"),exec:function(f){f.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:w("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(f){f.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:w("Down","Down|Ctrl-N"),exec:function(f,m){f.navigateDown(m.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:w("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(f){f.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:w("Ctrl-Left","Option-Left"),exec:function(f){f.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:w("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(f){f.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:w("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(f){f.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:w("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(f){f.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:w("Left","Left|Ctrl-B"),exec:function(f,m){f.navigateLeft(m.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:w("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(f){f.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:w("Ctrl-Right","Option-Right"),exec:function(f){f.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:w("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(f){f.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:w("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(f){f.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:w("Shift-Right","Shift-Right"),exec:function(f){f.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:w("Right","Right|Ctrl-F"),exec:function(f,m){f.navigateRight(m.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(f){f.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:w(null,"Option-PageDown"),exec:function(f){f.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:w("PageDown","PageDown|Ctrl-V"),exec:function(f){f.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(f){f.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:w(null,"Option-PageUp"),exec:function(f){f.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(f){f.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:w("Ctrl-Up",null),exec:function(f){f.renderer.scrollBy(0,-2*f.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:w("Ctrl-Down",null),exec:function(f){f.renderer.scrollBy(0,2*f.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(f){f.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(f){f.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:w("Ctrl-Alt-E","Command-Option-E"),exec:function(f){f.commands.toggleRecording(f)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:w("Ctrl-Shift-E","Command-Shift-E"),exec:function(f){f.commands.replay(f)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:w("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(f){f.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:w("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(f){f.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:w("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(f){f.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:w(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(f){},readOnly:!0},{name:"cut",description:"Cut",exec:function(f){var m=f.$copyWithEmptySelection&&f.selection.isEmpty()?f.selection.getLineRange():f.selection.getRange();f._emit("cut",m),m.isEmpty()||f.session.remove(m),f.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(f,m){f.$handlePaste(m)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:w("Ctrl-D","Command-D"),exec:function(f){f.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:w("Ctrl-Shift-D","Command-Shift-D"),exec:function(f){f.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:w("Ctrl-Alt-S","Command-Alt-S"),exec:function(f){f.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:w("Ctrl-/","Command-/"),exec:function(f){f.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:w("Ctrl-Shift-/","Command-Shift-/"),exec:function(f){f.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:w("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(f){f.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:w("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(f){f.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:w("Ctrl-H","Command-Option-F"),exec:function(f){S.loadModule("ace/ext/searchbox",function(m){m.Search(f,!0)})}},{name:"undo",description:"Undo",bindKey:w("Ctrl-Z","Command-Z"),exec:function(f){f.undo()}},{name:"redo",description:"Redo",bindKey:w("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(f){f.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:w("Alt-Shift-Up","Command-Option-Up"),exec:function(f){f.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:w("Alt-Up","Option-Up"),exec:function(f){f.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:w("Alt-Shift-Down","Command-Option-Down"),exec:function(f){f.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:w("Alt-Down","Option-Down"),exec:function(f){f.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:w("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(f){f.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:w("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(f){f.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:w("Shift-Delete",null),exec:function(f){if(!f.selection.isEmpty())return!1;f.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:w("Alt-Backspace","Command-Backspace"),exec:function(f){f.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:w("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(f){f.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:w("Ctrl-Shift-Backspace",null),exec:function(f){var m=f.selection.getRange();m.start.column=0,f.session.remove(m)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:w("Ctrl-Shift-Delete",null),exec:function(f){var m=f.selection.getRange();m.end.column=Number.MAX_VALUE,f.session.remove(m)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:w("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(f){f.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:w("Ctrl-Delete","Alt-Delete"),exec:function(f){f.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:w("Shift-Tab","Shift-Tab"),exec:function(f){f.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:w("Tab","Tab"),exec:function(f){f.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:w("Ctrl-[","Ctrl-["),exec:function(f){f.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:w("Ctrl-]","Ctrl-]"),exec:function(f){f.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(f,m){f.insert(m)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(f,m){f.insert(R.stringRepeat(m.text||"",m.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:w(null,"Ctrl-O"),exec:function(f){f.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:w("Alt-Shift-X","Ctrl-T"),exec:function(f){f.transposeLetters()},multiSelectAction:function(f){f.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:w("Ctrl-U","Ctrl-U"),exec:function(f){f.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:w("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(f){f.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:w(null,null),exec:function(f){f.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:w("Ctrl-Shift-L","Command-Shift-L"),exec:function(f){var m=f.selection.getRange();m.start.column=m.end.column=0,m.end.row++,f.selection.setRange(m,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:w("Ctrl+F3","F3"),exec:function(f){f.openLink()}},{name:"joinlines",description:"Join lines",bindKey:w(null,null),exec:function(f){for(var m=(v=f.selection.isBackwards())?f.selection.getSelectionLead():f.selection.getSelectionAnchor(),h=v?f.selection.getSelectionAnchor():f.selection.getSelectionLead(),v=f.session.doc.getLine(m.row).length,O=f.session.doc.getTextRange(f.selection.getRange()).replace(/\n\s*/," ").length,C=f.session.doc.getLine(m.row),x=m.row+1;x<=h.row+1;x++){var L=R.stringTrimLeft(R.stringTrimRight(f.session.doc.getLine(x)));C+=L=0!==L.length?" "+L:L}h.row+1<f.session.doc.getLength()-1&&(C+=f.session.doc.getNewLineCharacter()),f.clearSelection(),f.session.doc.replace(new y(m.row,0,h.row+2,0),C),0<O?(f.selection.moveCursorTo(m.row,m.column),f.selection.selectTo(m.row,m.column+O)):(v=f.session.doc.getLine(m.row).length>v?v+1:v,f.selection.moveCursorTo(m.row,v))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:w(null,null),exec:function(f){var m=f.session.doc.getLength()-1,h=f.session.doc.getLine(m).length,v=f.selection.rangeList.ranges,O=[];v.length<1&&(v=[f.selection.getRange()]);for(var C=0;C<v.length;C++)C!=v.length-1||v[C].end.row===m&&v[C].end.column===h||O.push(new y(v[C].end.row,v[C].end.column,m,h)),0===C?0===v[C].start.row&&0===v[C].start.column||O.push(new y(0,0,v[C].start.row,v[C].start.column)):O.push(new y(v[C-1].end.row,v[C-1].end.column,v[C].start.row,v[C].start.column));for(f.exitMultiSelectMode(),f.clearSelection(),C=0;C<O.length;C++)f.selection.addRange(O[C],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(f){f.selection.clearSelection(),f.navigateLineEnd(),f.insert("\n")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(f){f.selection.clearSelection();var m=f.getCursorPosition();f.selection.moveTo(m.row-1,Number.MAX_VALUE),f.insert("\n"),0===m.row&&f.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",description:"Open command palette",bindKey:w("F1","F1"),exec:function(f){f.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:w(null,null),exec:function(f){f.prompt({$type:"modes"})},readOnly:!0}];for(var p=1;p<9;p++)_.commands.push({name:"foldToLevel"+p,description:"Fold To Level "+p,level:p,exec:function(f){f.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(k,_,M){"use strict";var R=k("./lib/dom");function S(y){this.session=y,(this.session.widgetManager=this).session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}(function(){this.getRowLength=function(y){var w=this.lineWidgets&&this.lineWidgets[y]&&this.lineWidgets[y].rowCount||0;return this.$useWrapMode&&this.$wrapData[y]?this.$wrapData[y].length+1+w:1+w},this.$getWidgetScreenLength=function(){var y=0;return this.lineWidgets.forEach(function(w){w&&w.rowCount&&!w.hidden&&(y+=w.rowCount)}),y},this.$onChangeEditor=function(y){this.attach(y.editor)},this.attach=function(y){y&&y.widgetManager&&y.widgetManager!=this&&y.widgetManager.detach(),this.editor!=y&&(this.detach(),this.editor=y)&&(y.widgetManager=this,y.renderer.on("beforeRender",this.measureWidgets),y.renderer.on("afterRender",this.renderWidgets))},this.detach=function(y){var w=this.editor;w&&(this.editor=null,w.widgetManager=null,w.renderer.off("beforeRender",this.measureWidgets),w.renderer.off("afterRender",this.renderWidgets),w=this.session.lineWidgets)&&w.forEach(function(p){p&&p.el&&p.el.parentNode&&(p._inDocument=!1,p.el.parentNode.removeChild(p.el))})},this.updateOnFold=function(y,w){var p=w.lineWidgets;if(p&&y.action){for(var f=(w=y.data).start.row,m=w.end.row,h="add"==y.action,v=f+1;v<m;v++)p[v]&&(p[v].hidden=h);p[m]&&(h?p[f]?p[m].hidden=h:p[f]=p[m]:(p[f]==p[m]&&(p[f]=void 0),p[m].hidden=h))}},this.updateOnChange=function(y){var w,p,f,m=this.session.lineWidgets;m&&0!=(p=y.end.row-(w=y.start.row))&&("remove"==y.action?(f=m.splice(w+1,p),!m[w]&&f[f.length-1]&&(m[w]=f.pop()),f.forEach(function(h){h&&this.removeLineWidget(h)},this)):(f=new Array(p),m[w]&&null!=m[w].column&&y.start.column>m[w].column&&w++,f.unshift(w,0),m.splice.apply(m,f)),this.$updateRows())},this.$updateRows=function(){var y,w=this.session.lineWidgets;w&&(y=!0,w.forEach(function(p,f){if(p)for(y=!1,p.row=f;p.$oldWidget;)p.$oldWidget.row=f,p=p.$oldWidget}),y)&&(this.session.lineWidgets=null)},this.$registerLineWidget=function(y){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var w=this.session.lineWidgets[y.row];return w&&(y.$oldWidget=w).el&&w.el.parentNode&&(w.el.parentNode.removeChild(w.el),w._inDocument=!1),this.session.lineWidgets[y.row]=y},this.addLineWidget=function(y){var w,p,f;return this.$registerLineWidget(y),y.session=this.session,this.editor&&(w=this.editor.renderer,y.html&&!y.el&&(y.el=R.createElement("div"),y.el.innerHTML=y.html),y.text&&!y.el&&(y.el=R.createElement("div"),y.el.textContent=y.text),y.el&&(R.addCssClass(y.el,"ace_lineWidgetContainer"),y.className&&R.addCssClass(y.el,y.className),y.el.style.position="absolute",y.el.style.zIndex=5,w.container.appendChild(y.el),y._inDocument=!0,y.coverGutter||(y.el.style.zIndex=3),null==y.pixelHeight)&&(y.pixelHeight=y.el.offsetHeight),null==y.rowCount&&(y.rowCount=y.pixelHeight/w.layerConfig.lineHeight),p=this.session.getFoldAt(y.row,0),(y.$fold=p)&&(f=this.session.lineWidgets,y.row!=p.end.row||f[p.start.row]?y.hidden=!0:f[p.start.row]=y),this.session._emit("changeFold",{data:{start:{row:y.row}}}),this.$updateRows(),this.renderWidgets(null,w),this.onWidgetChanged(y)),y},this.removeLineWidget=function(y){if(y._inDocument=!1,y.session=null,y.el&&y.el.parentNode&&y.el.parentNode.removeChild(y.el),y.editor&&y.editor.destroy)try{y.editor.destroy()}catch{}if(this.session.lineWidgets){var w=this.session.lineWidgets[y.row];if(w==y)this.session.lineWidgets[y.row]=y.$oldWidget,y.$oldWidget&&this.onWidgetChanged(y.$oldWidget);else for(;w;){if(w.$oldWidget==y){w.$oldWidget=y.$oldWidget;break}w=w.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:y.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(y){for(var w=this.session.lineWidgets,p=w&&w[y],f=[];p;)f.push(p),p=p.$oldWidget;return f},this.onWidgetChanged=function(y){this.session._changedWidgets.push(y),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(y,w){var p=this.session._changedWidgets,f=w.layerConfig;if(p&&p.length){for(var m=1/0,h=0;h<p.length;h++){var v=p[h];if(v&&v.el&&v.session==this.session){if(!v._inDocument){if(this.session.lineWidgets[v.row]!=v)continue;v._inDocument=!0,w.container.appendChild(v.el)}v.h=v.el.offsetHeight,v.fixedWidth||(v.w=v.el.offsetWidth,v.screenWidth=Math.ceil(v.w/f.characterWidth));var O=v.h/f.lineHeight;v.coverLine&&(O-=this.session.getRowLineCount(v.row))<0&&(O=0),v.rowCount!=O&&(v.rowCount=O,v.row<m)&&(m=v.row)}}m!=1/0&&(this.session._emit("changeFold",{data:{start:{row:m}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(y,w){var p=w.layerConfig,f=this.session.lineWidgets;if(f){for(var m=Math.min(this.firstRow,p.firstRow),h=Math.max(this.lastRow,p.lastRow,f.length);0<m&&!f[m];)m--;this.firstRow=p.firstRow,this.lastRow=p.lastRow,w.$cursorLayer.config=p;for(var v=m;v<=h;v++){var O,C=f[v];C&&C.el&&(C.hidden?C.el.style.top=-100-(C.pixelHeight||0)+"px":(C._inDocument||(C._inDocument=!0,w.container.appendChild(C.el)),O=w.$cursorLayer.getPixelPosition({row:v,column:0},!0).top,C.coverLine||(O+=p.lineHeight*this.session.getRowLineCount(C.row)),C.el.style.top=O-p.offset+"px",O=C.coverGutter?0:w.gutterWidth,C.fixedWidth||(O-=w.scrollLeft),C.el.style.left=O+"px",C.fullWidth&&C.screenWidth&&(C.el.style.minWidth=p.width+2*p.padding+"px"),C.el.style.right=C.fixedWidth?w.scrollBar.getWidth()+"px":""))}}}}).call(S.prototype),_.LineWidgets=S}),ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/line_widgets","ace/clipboard"],function(k,_,M){"use strict";var R=this&&this.__values||function(j){var D="function"==typeof Symbol&&Symbol.iterator,N=D&&j[D],re=0;if(N)return N.call(j);if(j&&"number"==typeof j.length)return{next:function(){return{value:(j=j&&re>=j.length?void 0:j)&&j[re++],done:!j}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")},S=k("./lib/oop"),y=k("./lib/dom"),w=k("./lib/lang"),p=k("./lib/useragent"),f=k("./keyboard/textinput").TextInput,m=k("./mouse/mouse_handler").MouseHandler,h=k("./mouse/fold_handler").FoldHandler,v=k("./keyboard/keybinding").KeyBinding,O=k("./edit_session").EditSession,C=k("./search").Search,x=k("./range").Range,L=k("./lib/event_emitter").EventEmitter,Q=k("./commands/command_manager").CommandManager,G=k("./commands/default_commands").commands,T=k("./config"),V=k("./token_iterator").TokenIterator,J=k("./line_widgets").LineWidgets,X=k("./clipboard"),q=function(j,D,N){this.$toDestroy=[];var re=j.getContainerElement();this.container=re,this.renderer=j,this.id="editor"+ ++q.$uid,this.commands=new Q(p.isMac?"mac":"win",G),"object"==typeof document&&(this.textInput=new f(j.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new m(this),new h(this)),this.keyBinding=new v(this),this.$search=(new C).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=w.delayedCall(function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(ue,ve){ve._$emitInputEvent.schedule(31)}),this.setSession(D||N&&N.session||new O("")),T.resetOptions(this),N&&this.setOptions(N),T._signal("editor",this)},ee=(q.$uid=0,function(){S.implement(this,L),this.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=w.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(j){if(this.curOp){if(!j||this.curOp.command)return;this.prevOp=this.curOp}j||(this.previousCommand=null,j={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:j.command||{},args:j.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(j){if(this.curOp&&this.session){if(j&&!1===j.returnValue||!this.session)return this.curOp=null;if((1!=j||!this.curOp.command||"mouse"!=this.curOp.command.name)&&(this._signal("beforeEndOperation"),this.curOp)){var D=(j=this.curOp.command)&&j.scrollIntoView;if(D){switch(D){case"center-animate":D="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var N=this.selection.getRange(),re=this.renderer.layerConfig;(N.start.row>=re.lastRow||N.end.row<=re.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==D&&this.renderer.animateScrolling(this.curOp.scrollTop)}j=this.selection.toJSON(),this.curOp.selectionAfter=j,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(j),this.prevOp=this.curOp,this.curOp=null}}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(j){var D,N,re,ue;this.$mergeUndoDeltas&&(N=this.$mergeableCommands,re=(D=this.prevOp).command&&j.command.name==D.command.name,"insertstring"==j.command.name?(ue=j.args,void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),re=re&&this.mergeNextCommand&&(!/\s/.test(ue)||/\s/.test(D.args)),this.mergeNextCommand=!0):re=re&&-1!==N.indexOf(j.command.name),(re=!("always"!=this.$mergeUndoDeltas&&2e3<Date.now()-this.sequenceStartTime)&&re)?this.session.mergeUndoDeltas=!0:-1!==N.indexOf(j.command.name)&&(this.sequenceStartTime=Date.now()))},this.setKeyboardHandler=function(j,D){var N;j&&"string"==typeof j&&"ace"!=j?(this.$keybindingId=j,N=this,T.loadModule(["keybinding",j],function(re){N.$keybindingId==j&&N.keyBinding.setKeyboardHandler(re&&re.handler),D&&D()})):(this.$keybindingId=null,this.keyBinding.setKeyboardHandler(j),D&&D())},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(j){var D,N;this.session!=j&&(this.curOp&&this.endOperation(),this.curOp={},(D=this.session)&&(this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange),(N=this.session.getSelection()).off("changeCursor",this.$onCursorChange),N.off("changeSelection",this.$onSelectionChange)),(this.session=j)?(this.$onDocumentChange=this.onDocumentChange.bind(this),j.on("change",this.$onDocumentChange),this.renderer.setSession(j),this.$onChangeMode=this.onChangeMode.bind(this),j.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),j.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),j.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),j.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),j.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),j.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=j.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(j)),this._signal("changeSession",{session:j,oldSession:D}),this.curOp=null,D&&D._signal("changeEditor",{oldEditor:this}),j&&j._signal("changeEditor",{editor:this}),j)&&!j.destroyed&&j.bgTokenizer.scheduleStart()},this.getSession=function(){return this.session},this.setValue=function(j,D){return this.session.doc.setValue(j),D?1==D?this.navigateFileEnd():-1==D&&this.navigateFileStart():this.selectAll(),j},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(j){this.renderer.onResize(j)},this.setTheme=function(j,D){this.renderer.setTheme(j,D)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(j){this.renderer.setStyle(j)},this.unsetStyle=function(j){this.renderer.unsetStyle(j)},this.getFontSize=function(){return this.getOption("fontSize")||y.computedStyle(this.container).fontSize},this.setFontSize=function(j){this.setOption("fontSize",j)},this.$highlightBrackets=function(){var j;this.$highlightPending||((j=this).$highlightPending=!0,setTimeout(function(){j.$highlightPending=!1;var D,N,re,ue,ve=j.session;ve&&!ve.destroyed&&(ve.$bracketHighlight&&(ve.$bracketHighlight.markerIds.forEach(function(Ae){ve.removeMarker(Ae)}),ve.$bracketHighlight=null),D=j.getCursorPosition(),N=(N=j.getKeyboardHandler())&&N.$getDirectionForHighlight&&N.$getDirectionForHighlight(j),(N=ve.getMatchingBracketRanges(D,N))||(re=new V(ve,D.row,D.column).getCurrentToken())&&/\b(?:tag-open|tag-name)/.test(re.type)&&(re=ve.getMatchingTags(D))&&(N=[re.openTagName,re.closeTagName]),(N=!N&&ve.$mode.getMatching?ve.$mode.getMatching(j.session):N)&&(ue="ace_bracket",Array.isArray(N)?1==N.length&&(ue="ace_error_bracket"):N=[N],2==N.length&&(0==x.comparePoints(N[0].end,N[1].start)?N=[x.fromPoints(N[0].start,N[1].end)]:0==x.comparePoints(N[0].start,N[1].end)&&(N=[x.fromPoints(N[1].start,N[0].end)])),ve.$bracketHighlight={ranges:N,markerIds:N.map(function(Ae){return ve.addMarker(Ae,ue,"text")})}),j.getHighlightIndentGuides())&&j.renderer.$textLayer.$highlightIndentGuide()},50))},this.focus=function(){this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(j){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",j))},this.onBlur=function(j){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",j))},this.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},this.onDocumentChange=function(j){this.renderer.updateLines(j.start.row,j.start.row==j.end.row?j.end.row:1/0,this.session.$useWrapMode),this._signal("change",j),this.$cursorChange()},this.onTokenizerUpdate=function(j){this.renderer.updateLines((j=j.data).first,j.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var j,D,N=this.getSession();this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(j=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(j=!1),!this.renderer.$maxLines||1!==this.session.getLength()||1<this.renderer.$minLines||(j=!1)),N.$highlightLineMarker&&!j?(N.removeMarker(N.$highlightLineMarker.id),N.$highlightLineMarker=null):!N.$highlightLineMarker&&j?((D=new x(j.row,j.column,j.row,1/0)).id=N.addMarker(D,"ace_active-line","screenLine"),N.$highlightLineMarker=D):j&&(N.$highlightLineMarker.start.row=j.row,N.$highlightLineMarker.end.row=j.row,N.$highlightLineMarker.start.column=j.column,N._signal("changeBackMarker"))},this.onSelectionChange=function(j){var D,N,re=((re=this.session).$selectionMarker&&re.removeMarker(re.$selectionMarker),re.$selectionMarker=null,this.selection.isEmpty()?this.$updateHighlightActiveLine():(D=this.selection.getRange(),N=this.getSelectionStyle(),re.$selectionMarker=re.addMarker(D,"ace_selection",N)),this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp());this.session.highlight(re),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var j=this.session;if(!(D=this.getSelectionRange()).isEmpty()&&!D.isMultiLine()){var D,N=D.start.column,re=D.end.column;if(!(5e3<(D=(j=j.getLine(D.start.row)).substring(N,re)).length)&&/[\w\d]/.test(D)&&(D=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:D}),j=j.substring(N-1,re+1),D.test(j)))return D}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(j){this.renderer.updateText(),this._emit("changeMode",j)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var j=this.getSelectedText(),D=this.session.doc.getNewLineCharacter(),N=!1;if(!j&&this.$copyWithEmptySelection){N=!0;for(var re=this.selection.getAllRanges(),ue=0;ue<re.length;ue++){var ve=re[ue];ue&&re[ue-1].start.row==ve.start.row||(j+=this.session.getLine(ve.start.row)+D)}}var Ae={text:j};return this._signal("copy",Ae),X.lineMode=!!N&&Ae.text,Ae.text},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(j,D){this.commands.exec("paste",this,{text:j,event:D})},this.$handlePaste=function(N){this._signal("paste",N="string"==typeof N?{text:N}:N);var D=N.text,re=(N=D===X.lineMode,this.session);if(!this.inMultiSelectMode||this.inVirtualSelectionMode)N?re.insert({row:this.selection.lead.row,column:0},D):this.insert(D);else if(N)this.selection.rangeList.ranges.forEach(function(Re){re.insert({row:Re.start.row,column:0},D)});else{var ue=D.split(/\r\n|\r|\n/),ve=this.selection.rangeList.ranges;if(N=!(2!=ue.length||ue[0]&&ue[1]),ue.length!=ve.length||N)return this.commands.exec("insertstring",this,D);for(var Ae=ve.length;Ae--;){var Te=ve[Ae];Te.isEmpty()||re.remove(Te),re.insert(Te.start,ue[Ae])}}},this.execCommand=function(j,D){return this.commands.exec(j,this,D)},this.insert=function(j,Te){var N,re=this.session,ue=re.getMode(),ve=this.getCursorPosition(),Ae=(this.getBehavioursEnabled()&&!Te&&(N=ue.transformAction(re.getState(ve.row),"insertion",this,re,j))&&(j===N.text||this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1),j=N.text),"\t"==j&&(j=this.session.getTabString()),this.selection.isEmpty()?this.session.getOverwrite()&&-1==j.indexOf("\n")&&((Ae=new x.fromPoints(ve,ve)).end.column+=j.length,this.session.remove(Ae)):(Ae=this.getSelectionRange(),ve=this.session.remove(Ae),this.clearSelection()),"\n"!=j&&"\r\n"!=j||(Re=re.getLine(ve.row),ve.column>Re.search(/\S|$/)&&(Te=Re.substr(ve.column).search(/\S|$/),re.doc.removeInLine(ve.row,ve.column,ve.column+Te))),this.clearSelection(),ve.column),Re=(Te=re.getState(ve.row),re.getLine(ve.row)),Me=ue.checkOutdent(Te,Re,j);re.insert(ve,j),N&&N.selection&&this.selection.setSelectionRange(2==N.selection.length?new x(ve.row,Ae+N.selection[0],ve.row,Ae+N.selection[1]):new x(ve.row+N.selection[0],N.selection[1],ve.row+N.selection[2],N.selection[3])),this.$enableAutoIndent&&(re.getDocument().isNewLine(j)&&(Ae=ue.getNextLineIndent(Te,Re.slice(0,ve.column),re.getTabString()),re.insert({row:ve.row+1,column:0},Ae)),Me)&&ue.autoOutdent(Te,re,ve.row)},this.autoIndent=function(){for(var j,D,N,re,ue,ve=this.session,Ae=ve.getMode(),Te=(N=this.selection.isEmpty()?(D=0,ve.doc.getLength()-1):(D=(j=this.getSelectionRange()).start.row,j.end.row),""),Re="",Me=ve.getTabString(),Ie=D;Ie<=N;Ie++)0<Ie&&(Te=ve.getState(Ie-1),re=ve.getLine(Ie-1),Re=Ae.getNextLineIndent(Te,re,Me)),re=ve.getLine(Ie),Re!==(ue=Ae.$getIndent(re))&&(0<ue.length&&(ue=new x(Ie,0,Ie,ue.length),ve.remove(ue)),0<Re.length)&&ve.insert({row:Ie,column:0},Re),Ae.autoOutdent(Te,ve,Ie)},this.onTextInput=function(j,D){if(!D)return this.keyBinding.onTextInput(j);this.startOperation({command:{name:"insertstring"}}),j=this.applyComposition.bind(this,j,D),this.selection.rangeCount?this.forEachSelection(j):j(),this.endOperation()},this.applyComposition=function(j,D){var N;(D.extendLeft||D.extendRight)&&((N=this.selection.getRange()).start.column-=D.extendLeft,N.end.column+=D.extendRight,N.start.column<0&&(N.start.row--,N.start.column+=this.session.getLine(N.start.row).length+1),this.selection.setRange(N),j||N.isEmpty()||this.remove()),!j&&this.selection.isEmpty()||this.insert(j,!0),(D.restoreStart||D.restoreEnd)&&((N=this.selection.getRange()).start.column-=D.restoreStart,N.end.column-=D.restoreEnd,this.selection.setRange(N))},this.onCommandKey=function(j,D,N){return this.keyBinding.onCommandKey(j,D,N)},this.setOverwrite=function(j){this.session.setOverwrite(j)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(j){this.setOption("scrollSpeed",j)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(j){this.setOption("dragDelay",j)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(j){this.setOption("selectionStyle",j)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(j){this.setOption("highlightActiveLine",j)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(j){this.setOption("highlightGutterLine",j)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(j){this.setOption("highlightSelectedWord",j)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(j){this.renderer.setAnimatedScroll(j)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(j){this.renderer.setShowInvisibles(j)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(j){this.renderer.setDisplayIndentGuides(j)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setHighlightIndentGuides=function(j){this.renderer.setHighlightIndentGuides(j)},this.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},this.setShowPrintMargin=function(j){this.renderer.setShowPrintMargin(j)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(j){this.renderer.setPrintMarginColumn(j)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(j){this.setOption("readOnly",j)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(j){this.setOption("behavioursEnabled",j)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(j){this.setOption("wrapBehavioursEnabled",j)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(j){this.setOption("showFoldWidgets",j)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(j){this.setOption("fadeFoldWidgets",j)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(ue){var D,N,re;this.selection.isEmpty()&&("left"==ue?this.selection.selectLeft():this.selection.selectRight()),ue=this.getSelectionRange(),this.getBehavioursEnabled()&&(N=(D=this.session).getState(ue.start.row),N=D.getMode().transformAction(N,"deletion",this,D,ue),0===ue.end.column&&"\n"==(re=D.getTextRange(ue))[re.length-1]&&(re=D.getLine(ue.end.row),/^\s+$/.test(re))&&(ue.end.column=re.length),N)&&(ue=N),this.session.remove(ue),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var j=this.getSelectionRange();j.start.column==j.end.column&&j.start.row==j.end.row&&(j.end.column=0,j.end.row++),this.session.remove(j),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var j=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(j)},this.setGhostText=function(j,D){this.session.widgetManager||(this.session.widgetManager=new J(this.session),this.session.widgetManager.attach(this)),this.renderer.setGhostText(j,D)},this.removeGhostText=function(){this.session.widgetManager&&this.renderer.removeGhostText()},this.transposeLetters=function(){var j,D,N,re;this.selection.isEmpty()&&0!==(D=(j=this.getCursorPosition()).column)&&(re=D<(re=this.session.getLine(j.row)).length?(N=re.charAt(D)+re.charAt(D-1),new x(j.row,D-1,j.row,D+1)):(N=re.charAt(D-1)+re.charAt(D-2),new x(j.row,D-2,j.row,D)),this.session.replace(re,N),this.session.selection.moveToPosition(re.end))},this.toLowerCase=function(){var j=this.getSelectionRange(),D=(this.selection.isEmpty()&&this.selection.selectWord(),this.getSelectionRange()),N=this.session.getTextRange(D);this.session.replace(D,N.toLowerCase()),this.selection.setSelectionRange(j)},this.toUpperCase=function(){var j=this.getSelectionRange(),D=(this.selection.isEmpty()&&this.selection.selectWord(),this.getSelectionRange()),N=this.session.getTextRange(D);this.session.replace(D,N.toUpperCase()),this.selection.setSelectionRange(j)},this.indent=function(){var j=this.session,D=this.getSelectionRange();if(!(D.start.row<D.end.row)){if(D.start.column<D.end.column){var N,ve=j.getTextRange(D);if(!/^\s+$/.test(ve))return N=this.$getSelectedRows(),void j.indentRows(N.first,N.last,"\t")}var re=j.getLine(D.start.row),ue=(ve=D.start,j.getTabSize());if(ve=j.documentToScreenColumn(ve.row,ve.column),this.session.getUseSoftTabs())var Ae=ue-ve%ue,Te=w.stringRepeat(" ",Ae);else{for(Ae=ve%ue;" "==re[D.start.column-1]&&Ae;)D.start.column--,Ae--;this.selection.setSelectionRange(D),Te="\t"}return this.insert(Te)}N=this.$getSelectedRows(),j.indentRows(N.first,N.last,"\t")},this.blockIndent=function(){var j=this.$getSelectedRows();this.session.indentRows(j.first,j.last,"\t")},this.blockOutdent=function(){var j=this.session.getSelection();this.session.outdentRows(j.getRange())},this.sortLines=function(){for(var j=this.$getSelectedRows(),D=this.session,N=[],re=j.first;re<=j.last;re++)N.push(D.getLine(re));N.sort(function(Ae,Te){return Ae.toLowerCase()<Te.toLowerCase()?-1:Ae.toLowerCase()>Te.toLowerCase()?1:0});var ue=new x(0,0,0,0);for(re=j.first;re<=j.last;re++){var ve=D.getLine(re);ue.start.row=re,ue.end.row=re,ue.end.column=ve.length,D.replace(ue,N[re-j.first])}},this.toggleCommentLines=function(){var j=this.session.getState(this.getCursorPosition().row),D=this.$getSelectedRows();this.session.getMode().toggleCommentLines(j,this.session,D.first,D.last)},this.toggleBlockComment=function(){var j=this.getCursorPosition(),D=this.session.getState(j.row),N=this.getSelectionRange();this.session.getMode().toggleBlockComment(D,this.session,N,j)},this.getNumberAt=function(j,D){for(var N=/[\-]?[0-9]+(?:\.[0-9]+)?/g,re=(N.lastIndex=0,this.session.getLine(j));N.lastIndex<D;){var ue=N.exec(re);if(ue.index<=D&&ue.index+ue[0].length>=D)return{value:ue[0],start:ue.index,end:ue.index+ue[0].length}}return null},this.modifyNumber=function(j){var D,N,re,ue=this.selection.getCursor().row,ve=this.selection.getCursor().column,Ae=new x(ue,ve-1,ue,ve);Ae=this.session.getTextRange(Ae),!isNaN(parseFloat(Ae))&&isFinite(Ae)?(Ae=this.getNumberAt(ue,ve))&&(re=0<=Ae.value.indexOf(".")?Ae.start+Ae.value.indexOf(".")+1:Ae.end,D=Ae.start+Ae.value.length-re,N=parseFloat(Ae.value),N*=Math.pow(10,D),re=(N=(N+=j*=re!==Ae.end&&ve<re?Math.pow(10,Ae.end-ve-1):Math.pow(10,Ae.end-ve))/Math.pow(10,D)).toFixed(D),j=new x(ue,Ae.start,ue,Ae.end),this.session.replace(j,re),this.moveCursorTo(ue,Math.max(Ae.start+1,ve+re.length-Ae.value.length))):this.toggleWord()},this.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],this.toggleWord=function(){for(var j,D=this.selection.getCursor().row,N=this.selection.getCursor().column,re=(this.selection.selectWord(),this.getSelectedText()),ue=this.selection.getWordRange().start.column,ve=re.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),Ae=N-ue-1,Te=(Ae<0&&(Ae=0),0),Re=this,Me=(re.match(/[A-Za-z0-9_]+/)&&ve.forEach(function(be,ie){j=Te+be.length,Te<=Ae&&Ae<=j&&(re=be,Re.selection.clearSelection(),Re.moveCursorTo(D,Te+ue),Re.selection.selectTo(D,j+ue)),Te=j}),this.$toggleWordPairs),Ie=0;Ie<Me.length;Ie++)for(var Ge=Me[Ie],oe=0;oe<=1;oe++){var pe=+!oe,ge=re.match(new RegExp("^\\s?_?("+w.escapeRegExp(Ge[oe])+")\\s?$","i"));ge&&re.match(new RegExp("([_]|^|\\s)("+w.escapeRegExp(ge[1])+")($|\\s)","g"))&&(ge=re.replace(new RegExp(w.escapeRegExp(Ge[oe]),"i"),function(be){var ie=Ge[pe];return be.toUpperCase()==be?ie=ie.toUpperCase():be.charAt(0).toUpperCase()==be.charAt(0)&&(ie=ie.substr(0,0)+Ge[pe].charAt(0).toUpperCase()+ie.substr(1)),ie}),this.insert(ge))}},this.findLinkAt=function(ve,D){ve=this.session.getLine(ve).split(/((?:https?|ftp):\/\/[\S]+)/);var N,re,ue,Ae=D,Te=(Ae<0&&(Ae=0),0);try{for(var Re=R(ve),Me=Re.next();!Me.done;Me=Re.next()){var Ie=Me.value,Ge=Te+Ie.length;if(Te<=Ae&&Ae<=Ge&&Ie.match(/((?:https?|ftp):\/\/[\S]+)/)){ue=Ie.replace(/[\s:.,'";}\]]+$/,"");break}Te=Ge}}catch(oe){N={error:oe}}finally{try{Me&&!Me.done&&(re=Re.return)&&re.call(Re)}finally{if(N)throw N.error}}return ue},this.openLink=function(){var j=this.selection.getCursor();return(j=this.findLinkAt(j.row,j.column))&&window.open(j,"_blank"),null!=j},this.removeLines=function(){var j=this.$getSelectedRows();this.session.removeFullLines(j.first,j.last),this.clearSelection()},this.duplicateSelection=function(){var j,D=this.selection,N=this.session,re=D.getRange(),ue=D.isBackwards();re.isEmpty()?N.duplicateLines(j=re.start.row,j):(N=N.insert(j=ue?re.start:re.end,N.getTextRange(re),!1),re.start=j,re.end=N,D.setSelectionRange(re,ue))},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(j,D,N){return this.session.moveText(j,D,N)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(j,D){var N=this.selection;if(!N.inMultiSelectMode||this.inVirtualSelectionMode){var re=N.toOrientedRange(),ue=this.$getSelectedRows(re),ve=this.session.$moveLines(ue.first,ue.last,D?0:j);re.moveBy(ve=D&&-1==j?0:ve,0),N.fromOrientedRange(re)}else{for(var Ae=N.rangeList.ranges,Te=(N.rangeList.detach(this.session),this.inVirtualSelectionMode=!0,0),Re=0,Me=Ae.length,Ie=0;Ie<Me;Ie++){for(var Ge=Ie,oe=(Ae[Ie].moveBy(Te,0),(ue=this.$getSelectedRows(Ae[Ie])).first),pe=ue.last;++Ie<Me;){Re&&Ae[Ie].moveBy(Re,0);var ge=this.$getSelectedRows(Ae[Ie]);if(D&&ge.first!=pe||!D&&ge.first>pe+1)break;pe=ge.last}for(Ie--,Te=this.session.$moveLines(oe,pe,D?0:j),D&&-1==j&&(Ge=Ie+1);Ge<=Ie;)Ae[Ge].moveBy(Te,0),Ge++;Re+=Te=D?Te:0}N.fromOrientedRange(N.ranges[0]),N.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(j){return j=(j||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(j.start.row),last:this.session.getRowFoldEnd(j.end.row)}},this.onCompositionStart=function(j){this.renderer.showComposition(j)},this.onCompositionUpdate=function(j){this.renderer.setCompositionText(j)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(j){return j>=this.getFirstVisibleRow()&&j<=this.getLastVisibleRow()},this.isRowFullyVisible=function(j){return j>=this.renderer.getFirstFullyVisibleRow()&&j<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(ve,D){var N=this.renderer,re=this.renderer.layerConfig,ue=ve*Math.floor(re.height/re.lineHeight);!0===D?this.selection.$moveSelection(function(){this.moveCursorBy(ue,0)}):!1===D&&(this.selection.moveCursorBy(ue,0),this.selection.clearSelection()),ve=N.scrollTop,N.scrollBy(0,ue*re.lineHeight),null!=D&&N.scrollCursorIntoView(null,.5),N.animateScrolling(ve)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(j){this.renderer.scrollToRow(j)},this.scrollToLine=function(j,D,N,re){this.renderer.scrollToLine(j,D,N,re)},this.centerSelection=function(){var j=this.getSelectionRange();j={row:Math.floor(j.start.row+(j.end.row-j.start.row)/2),column:Math.floor(j.start.column+(j.end.column-j.start.column)/2)},this.renderer.alignCursor(j,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(j,D){this.selection.moveCursorTo(j,D)},this.moveCursorToPosition=function(j){this.selection.moveCursorToPosition(j)},this.jumpToMatching=function(j,D){var N=this.getCursorPosition(),re=new V(this.session,N.row,N.column),ue=re.getCurrentToken(),ve=0,Ae=(ue=ue&&-1!==ue.type.indexOf("tag-name")?re.stepBackward():ue)||re.stepForward();if(Ae){var Te,Re,Me=!1,Ie={},Ge=N.column-Ae.start,oe={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(Ae.value.match(/[{}()\[\]]/g)){for(;Ge<Ae.value.length&&!Me;Ge++)if(oe[Ae.value[Ge]])switch(Re=oe[Ae.value[Ge]]+"."+Ae.type.replace("rparen","lparen"),isNaN(Ie[Re])&&(Ie[Re]=0),Ae.value[Ge]){case"(":case"[":case"{":Ie[Re]++;break;case")":case"]":case"}":Ie[Re]--,-1===Ie[Re]&&(Te="bracket",Me=!0)}}else-1!==Ae.type.indexOf("tag-name")&&(isNaN(Ie[Ae.value])&&(Ie[Ae.value]=0),"<"===ue.value&&1<ve?Ie[Ae.value]++:"</"===ue.value&&Ie[Ae.value]--,-1===Ie[Ae.value])&&(Te="tag",Me=!0)}while(Me||(ue=Ae,ve++,Ae=re.stepForward(),Ge=0),Ae&&!Me);if(Te){if("bracket"===Te)!(ge=this.session.getBracketRange(N))&&(be=(ge=new x(re.getCurrentTokenRow(),re.getCurrentTokenColumn()+Ge-1,re.getCurrentTokenRow(),re.getCurrentTokenColumn()+Ge-1)).start,D||be.row===N.row&&Math.abs(be.column-N.column)<2)&&(ge=this.session.getBracketRange(be));else if("tag"===Te){if(!Ae||-1===Ae.type.indexOf("tag-name"))return;var pe,ge,be=(be=0===(ge=new x(re.getCurrentTokenRow(),re.getCurrentTokenColumn()-2,re.getCurrentTokenRow(),re.getCurrentTokenColumn()-2)).compare(N.row,N.column)&&(pe=this.session.getMatchingTags(N))?pe.openTag.contains(N.row,N.column)?(ge=pe.closeTag).start:(ge=pe.openTag,pe.closeTag.start.row===N.row&&pe.closeTag.start.column===N.column?ge.end:ge.start):be)||ge.start}(be=ge&&ge.cursor||be)&&(j?ge&&D?this.selection.setRange(ge):ge&&ge.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(be.row,be.column):this.selection.moveTo(be.row,be.column))}}},this.gotoLine=function(j,D,N){this.selection.clearSelection(),this.session.unfold({row:j-1,column:D||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(j-1,D||0),this.isRowFullyVisible(j-1)||this.scrollToLine(j-1,!0,N)},this.navigateTo=function(j,D){this.selection.moveTo(j,D)},this.navigateUp=function(j){var D;if(this.selection.isMultiLine()&&!this.selection.isBackwards())return D=this.selection.anchor.getPosition(),this.moveCursorToPosition(D);this.selection.clearSelection(),this.selection.moveCursorBy(-j||-1,0)},this.navigateDown=function(j){var D;if(this.selection.isMultiLine()&&this.selection.isBackwards())return D=this.selection.anchor.getPosition(),this.moveCursorToPosition(D);this.selection.clearSelection(),this.selection.moveCursorBy(j||1,0)},this.navigateLeft=function(j){if(this.selection.isEmpty())for(j=j||1;j--;)this.selection.moveCursorLeft();else{var D=this.getSelectionRange().start;this.moveCursorToPosition(D)}this.clearSelection()},this.navigateRight=function(j){if(this.selection.isEmpty())for(j=j||1;j--;)this.selection.moveCursorRight();else{var D=this.getSelectionRange().end;this.moveCursorToPosition(D)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(j,N){N&&this.$search.set(N);var re=0;return(N=this.$search.find(this.session))&&(this.$tryReplace(N,j)&&(re=1),this.selection.setSelectionRange(N),this.renderer.scrollSelectionIntoView(N.start,N.end)),re},this.replaceAll=function(j,D){D&&this.$search.set(D);var N=this.$search.findAll(this.session),re=0;if(N.length){D=this.getSelectionRange(),this.selection.moveTo(0,0);for(var ue=N.length-1;0<=ue;--ue)this.$tryReplace(N[ue],j)&&re++;this.selection.setSelectionRange(D)}return re},this.$tryReplace=function(j,D){var N=this.session.getTextRange(j);return null!==(D=this.$search.replace(N,D))?(j.end=this.session.replace(j,D),j):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(ue,D,N){D=D||{},"string"==typeof ue||ue instanceof RegExp?D.needle=ue:"object"==typeof ue&&S.mixin(D,ue);var re=this.selection.getRange();return null==D.needle&&((ue=this.session.getTextRange(re)||this.$search.$options.needle)||(re=this.session.getWordRange(re.start.row,re.start.column),ue=this.session.getTextRange(re)),this.$search.set({needle:ue})),this.$search.set(D),D.start||this.$search.set({start:re}),ue=this.$search.find(this.session),D.preventScroll?ue:ue?(this.revealRange(ue,N),ue):(D.backwards?re.start=re.end:re.end=re.start,void this.selection.setRange(re))},this.findNext=function(j,D){this.find({skipCurrent:!0,backwards:!1},j,D)},this.findPrevious=function(j,D){this.find(j,{skipCurrent:!0,backwards:!0},D)},this.revealRange=function(j,D){this.session.unfold(j),this.selection.setSelectionRange(j);var N=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(j.start,j.end,.5),!1!==D&&this.renderer.animateScrolling(N)},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(j){j.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},this.setAutoScrollEditorIntoView=function(j){var D,N,re,ue,ve,Ae,Te;j&&(re=!1,(N=this).$scrollAnchor||(this.$scrollAnchor=document.createElement("div")),(ue=this.$scrollAnchor).style.cssText="position:absolute",this.container.insertBefore(ue,this.container.firstChild),ve=this.on("changeSelection",function(){re=!0}),Ae=this.renderer.on("beforeRender",function(){re&&(D=N.renderer.container.getBoundingClientRect())}),Te=this.renderer.on("afterRender",function(){var Re,Me,Ie;re&&D&&(N.isFocused()||N.searchBox&&N.searchBox.isFocused())&&(Ie=(Re=(Me=N.renderer).$cursorLayer.$pixelPos).top-(Me=Me.layerConfig).offset,null!=(re=0<=Re.top&&Ie+D.top<0||!(Re.top<Me.height&&Re.top+D.top+Me.lineHeight>window.innerHeight)&&null)&&(ue.style.top=Ie+"px",ue.style.left=Re.left+"px",ue.style.height=Me.lineHeight+"px",ue.scrollIntoView(re)),re=D=null)}),this.setAutoScrollEditorIntoView=function(Re){Re||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",ve),this.renderer.off("afterRender",Te),this.renderer.off("beforeRender",Ae))})},this.$resetCursorStyle=function(){var j=this.$cursorStyle||"ace",D=this.renderer.$cursorLayer;D&&(D.setSmoothBlinking(/smooth/.test(j)),D.isBlinking=!this.$readOnly&&"wide"!=j,y.setCssClass(D.element,"ace_slim-cursors",/slim/.test(j)))},this.prompt=function(j,D,N){var re=this;T.loadModule("ace/ext/prompt",function(ue){ue.prompt(re,j,D,N)})}}.call(q.prototype),T.defineOptions(q.prototype,"editor",{selectionStyle:{set:function(j){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:j})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(j){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(j){this.textInput.setReadOnly(j),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(j){this.textInput.setCopyWithEmptySelection(j)},initialValue:!1},cursorStyle:{set:function(j){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(j){this.setAutoScrollEditorIntoView(j)}},keyboardHandler:{set:function(j){this.setKeyboardHandler(j)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(j){this.session.setValue(j)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(j){this.setSession(j)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(j){this.renderer.$gutterLayer.setShowLineNumbers(j),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),j&&this.$relativeLineNumbers?ee.attach(this):ee.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(j){this.$showLineNumbers&&j?ee.attach(this):ee.detach(this)}},placeholder:{set:function(j){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var D=this.session&&(this.renderer.$composition||this.getValue());D&&this.renderer.placeholderNode?(this.renderer.off("afterRender",this.$updatePlaceholder),y.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null):D||this.renderer.placeholderNode?!D&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||""):(this.renderer.on("afterRender",this.$updatePlaceholder),y.addCssClass(this.container,"ace_hasPlaceholder"),(D=y.createElement("div")).className="ace_placeholder",D.textContent=this.$placeholder||"",this.renderer.placeholderNode=D,this.renderer.content.appendChild(this.renderer.placeholderNode))}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"}),{getText:function(j,D){return(Math.abs(j.selection.lead.row-D)||D+1+(D<9?"\xb7":""))+""},getWidth:function(j,D,N){return Math.max(D.toString().length,(N.lastRow+1).toString().length,2)*N.characterWidth},update:function(j,D){D.renderer.$loop.schedule(D.renderer.CHANGE_GUTTER)},attach:function(j){j.renderer.$gutterLayer.$renderer=this,j.on("changeSelection",this.update),this.update(null,j)},detach:function(j){j.renderer.$gutterLayer.$renderer==this&&(j.renderer.$gutterLayer.$renderer=null),j.off("changeSelection",this.update),this.update(null,j)}});_.Editor=q}),ace.define("ace/undomanager",["require","exports","module","ace/range"],function(k,_,M){"use strict";function R(){this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}(function(){this.addSession=function(C){this.$session=C},this.add=function(C,x,L){this.$fromUndo||C!=this.$lastDelta&&(this.$keepRedoStack||(this.$redoStack.length=0),!1!==x&&this.lastDeltas||(this.lastDeltas=[],(x=this.$undoStack.length)>this.$undoDepth-1&&this.$undoStack.splice(0,x-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),C.id=this.$rev=++this.$maxRev),"remove"!=C.action&&"insert"!=C.action||(this.$lastDelta=C),this.lastDeltas.push(C))},this.addSelection=function(C,x){this.selections.push({value:C,rev:x||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(C,x){null==x&&(x=this.$rev+1);for(var L=this.$undoStack,Q=L.length;Q--;){var G=L[Q][0];if(G.id<=C)break;G.id<x&&(G.ignore=!0)}this.lastDeltas=null},this.getSelection=function(C,x){for(var L=this.selections,Q=L.length;Q--;){var G=L[Q];if(G.rev<C)return x?L[Q+1]:G}},this.getRevision=function(){return this.$rev},this.getDeltas=function(C,x){null==x&&(x=this.$rev+1);for(var L=this.$undoStack,Q=null,G=0,T=L.length;T--;){var V=L[T][0];if(V.id<x&&!Q&&(Q=T+1),V.id<=C){G=T+1;break}}return L.slice(G,Q)},this.getChangedRanges=function(C,x){},this.getChangedLines=function(C,x){},this.undo=function(C,x){this.lastDeltas=null;var L,Q=this.$undoStack;if(function(G,T){for(var V=T;V--;){var J=G[V];if(J&&!J[0].ignore){for(;V<T-1;){var X=function(q,ee){for(var j=q.length;j--;)for(var D=0;D<ee.length;D++)if(!m(q[j],ee[D])){for(;j<q.length;){for(;D--;)m(ee[D],q[j]);D=ee.length,j++}return[q,ee]}return q.selectionBefore=ee.selectionBefore=q.selectionAfter=ee.selectionAfter=null,[ee,q]}(G[V],G[V+1]);G[V]=X[0],G[V+1]=X[1],V++}return 1}}}(Q,Q.length))return C=C||this.$session,this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0,L=null,(Q=Q.pop())&&(L=C.undoChanges(Q,x),this.$redoStack.push(Q),this.$syncRev()),this.$fromUndo=!1,L},this.redo=function(C,x){if(this.lastDeltas=null,C=C||this.$session,this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){for(var N=this.getDeltas(this.$redoStackBaseRev,this.$rev+1),L=this.$redoStack,Q=N,G=0;G<Q.length;G++)for(var T=Q[G],V=0;V<T.length;V++){J=void 0,X=void 0,q=void 0,ee=void 0,j=void 0,D=void 0;var J=L,X=T[V];X={start:w((ve=X).start),end:w(ve.end),action:ve.action,lines:ve.lines.slice()};for(var q=J.length;q--;){for(var ee=J[q],j=0;j<ee.length;j++){var D=function(ve,Ae){var Te,Re,Me="insert"==ve.action,Ie="insert"==Ae.action;if(Me&&Ie)y(ve.start,Ae.start)<0?h(Ae,ve,1):h(ve,Ae,1);else if(Me&&!Ie)0<=y(ve.start,Ae.end)?h(ve,Ae,-1):(y(ve.start,Ae.start)<=0||h(ve,S.fromPoints(Ae.start,ve.start),-1),h(Ae,ve,1));else if(!Me&&Ie)0<=y(Ae.start,ve.end)?h(Ae,ve,-1):(y(Ae.start,ve.start)<=0||h(Ae,S.fromPoints(ve.start,Ae.start),-1),h(ve,Ae,1));else if(!Me&&!Ie)if(0<=y(Ae.start,ve.end))h(Ae,ve,-1);else{if(!(y(Ae.end,ve.start)<=0))return y(ve.start,Ae.start)<0&&(ve=O(Te=ve,Ae.start)),0<y(ve.end,Ae.end)&&(Re=O(ve,Ae.end)),v(Ae.end,ve.start,ve.end,-1),Re&&!Te&&(ve.lines=Re.lines,ve.start=Re.start,ve.end=Re.end,Re=ve),[Ae,Te,Re].filter(Boolean);h(ve,Ae,-1)}return[Ae,ve]}(ee[j],X);X=D[0],2!=D.length&&(D[2]?(ee.splice(j+1,1,D[1],D[2]),j++):D[1]||(ee.splice(j,1),j--))}ee.length||J.splice(q,1)}}this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(ue){ue[0].id=++this.$maxRev},this)}var ve,re=null;return(N=this.$redoStack.pop())&&(re=C.redoChanges(N,x),this.$undoStack.push(N),this.$syncRev()),this.$fromUndo=!1,re},this.$syncRev=function(){var C;this.$redoStackBaseRev=C=(C=(C=this.$undoStack)[C.length-1])&&C[0].id||0,this.$rev=C},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},this.canUndo=function(){return 0<this.$undoStack.length},this.canRedo=function(){return 0<this.$redoStack.length},this.bookmark=function(C){null==C&&(C=this.$rev),this.mark=C},this.isAtBookmark=function(){return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark,this.$prettyPrint=function(C){return C?p(C):p(this.$undoStack)+"\n---\n"+p(this.$redoStack)}}).call(R.prototype);var S=k("./range").Range,y=S.comparePoints;function w(C){return{row:C.row,column:C.column}}function p(C){var x;return C=C||this,Array.isArray(C)?C.map(p).join("\n"):(x="",C.action?(x="insert"==C.action?"+":"-",x+="["+C.lines+"]"):C.value&&(x=Array.isArray(C.value)?C.value.map(f).join("\n"):f(C.value)),C.start&&(x+=f(C)),(C.id||C.rev)&&(x+="\t("+(C.id||C.rev)+")"),x)}function f(C){return C.start.row+":"+C.start.column+"=>"+C.end.row+":"+C.end.column}function m(C,x){var L="insert"==C.action,Q="insert"==x.action;if(L&&Q)if(0<=y(x.start,C.end))h(x,C,-1);else{if(!(y(x.start,C.start)<=0))return;h(C,x,1)}else if(L&&!Q)if(0<=y(x.start,C.end))h(x,C,-1);else{if(!(y(x.end,C.start)<=0))return;h(C,x,-1)}else if(!L&&Q)if(0<=y(x.start,C.start))h(x,C,1);else{if(!(y(x.start,C.start)<=0))return;h(C,x,1)}else if(!L&&!Q)if(0<=y(x.start,C.start))h(x,C,1);else{if(!(y(x.end,C.start)<=0))return;h(C,x,-1)}return 1}function h(C,x,L){v(C.start,x.start,x.end,L),v(C.end,x.start,x.end,L)}function v(C,x,L,Q){C.row==(1==Q?x:L).row&&(C.column+=Q*(L.column-x.column)),C.row+=Q*(L.row-x.row)}function O(C,x){var L=C.lines,Q=C.end,T=(C.end=w(x),C.end.row-C.start.row),G=L.splice(T,L.length);return L.push(G[0].substring(0,T=T?x.column:x.column-C.start.column)),G[0]=G[0].substr(T),{start:w(x),end:Q,lines:G,action:C.action}}_.UndoManager=R}),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(k,_,M){"use strict";function R(y,w){this.element=y,this.canvasHeight=w||5e5,this.element.style.height=2*this.canvasHeight+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}var S=k("../lib/dom");(function(){this.moveContainer=function(y){S.translate(this.element,0,-y.firstRowScreen*y.lineHeight%this.canvasHeight-y.offset*this.$offsetCoefficient)},this.pageChanged=function(y,w){return Math.floor(y.firstRowScreen*y.lineHeight/this.canvasHeight)!==Math.floor(w.firstRowScreen*w.lineHeight/this.canvasHeight)},this.computeLineTop=function(y,w,p){var f=w.firstRowScreen*w.lineHeight;return f=Math.floor(f/this.canvasHeight),p.documentToScreenRow(y,0)*w.lineHeight-f*this.canvasHeight},this.computeLineHeight=function(y,w,p){return w.lineHeight*p.getRowLineCount(y)},this.getLength=function(){return this.cells.length},this.get=function(y){return this.cells[y]},this.shift=function(){this.$cacheCell(this.cells.shift())},this.pop=function(){this.$cacheCell(this.cells.pop())},this.push=function(y){if(Array.isArray(y)){this.cells.push.apply(this.cells,y);for(var w=S.createFragment(this.element),p=0;p<y.length;p++)w.appendChild(y[p].element);this.element.appendChild(w)}else this.cells.push(y),this.element.appendChild(y.element)},this.unshift=function(y){if(Array.isArray(y)){this.cells.unshift.apply(this.cells,y);for(var w=S.createFragment(this.element),p=0;p<y.length;p++)w.appendChild(y[p].element);this.element.firstChild?this.element.insertBefore(w,this.element.firstChild):this.element.appendChild(w)}else this.cells.unshift(y),this.element.insertAdjacentElement("afterbegin",y.element)},this.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},this.$cacheCell=function(y){y&&(y.element.remove(),this.cellCache.push(y))},this.createCell=function(y,w,p,f){var m,h=this.cellCache.pop();return h||(m=S.createElement("div"),f&&f(m),this.element.appendChild(m),h={element:m,text:"",row:y}),h.row=y,h}}).call(R.prototype),_.Lines=R}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines"],function(k,_,M){"use strict";function R(h){this.element=S.createElement("div"),this.element.className="ace_layer ace_gutter-layer",h.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new f(this.element),this.$lines.$offsetCoefficient=1}var S=k("../lib/dom"),y=k("../lib/oop"),w=k("../lib/lang"),p=k("../lib/event_emitter").EventEmitter,f=k("./lines").Lines;function m(h){var v=document.createTextNode("");return h.appendChild(v),v=S.createElement("span"),h.appendChild(v),h}(function(){y.implement(this,p),this.setSession=function(h){this.session&&this.session.off("change",this.$updateAnnotations),(this.session=h)&&h.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(h,v){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(h,v)},this.removeGutterDecoration=function(h,v){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(h,v)},this.setAnnotations=function(h){this.$annotations=[];for(var v=0;v<h.length;v++){var x,O=(O=this.$annotations[C=(x=h[v]).row])||(this.$annotations[C]={text:[]}),C=(C=x.text)?w.escapeHTML(C):x.html||"";-1===O.text.indexOf(C)&&O.text.push(C),C=x.type,(x=x.className)?O.className=x:"error"==C?O.className=" ace_error":"warning"==C&&" ace_error"!=O.className?O.className=" ace_warning":"info"!=C||O.className||(O.className=" ace_info")}},this.$updateAnnotations=function(h){var v,O;this.$annotations.length&&0!=(O=h.end.row-(v=h.start.row))&&("remove"==h.action?this.$annotations.splice(v,1+O,null):((h=new Array(1+O)).unshift(v,1),this.$annotations.splice.apply(this.$annotations,h)))},this.update=function(h){this.config=h;for(var v=this.session,O=h.firstRow,C=Math.min(h.lastRow+h.gutterOffset,v.getLength()-1),x=(this.oldLastRow=C,this.config=h,this.$lines.moveContainer(h),this.$updateCursorRow(),v.getNextFoldLine(O)),L=x?x.start.row:1/0,Q=null,G=-1,T=O;;){if(L<T&&(L=(x=v.getNextFoldLine(T=x.end.row+1,x))?x.start.row:1/0),C<T){for(;this.$lines.getLength()>G+1;)this.$lines.pop();break}(Q=this.$lines.get(++G))?Q.row=T:(Q=this.$lines.createCell(T,h,this.session,m),this.$lines.push(Q)),this.$renderCell(Q,h,x,T),T++}this._signal("afterRender"),this.$updateGutterWidth(h)},this.$updateGutterWidth=function(h){var v=this.session,x=v.gutterRenderer||this.$renderer,C=v.$firstLineNumber,O=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||v.$useWrapMode)&&(O=v.getLength()+C-1),C=x?x.getWidth(v,O,h):O.toString().length*h.characterWidth,(C+=(x=this.$padding||this.$computePadding()).left+x.right)===this.gutterWidth||isNaN(C)||(this.gutterWidth=C,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",C))},this.$updateCursorRow=function(){var h;this.$highlightGutterLine&&(h=this.session.selection.getCursor(),this.$cursorRow!==h.row)&&(this.$cursorRow=h.row)},this.updateLineHighlight=function(){if(this.$highlightGutterLine){var h=this.session.selection.cursor.row;if(this.$cursorRow=h,!this.$cursorCell||this.$cursorCell.row!=h){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var v=this.$lines.cells;this.$cursorCell=null;for(var O=0;O<v.length;O++){var C=v[O];if(C.row>=this.$cursorRow){if(C.row>this.$cursorRow){var x=this.session.getFoldLine(this.$cursorRow);if(!(0<O&&x&&x.start.row==v[O-1].row))break;C=v[O-1]}C.element.className="ace_gutter-active-line "+C.element.className,this.$cursorCell=C;break}}}}},this.scrollLines=function(h){var v=this.config;if(this.config=h,this.$updateCursorRow(),this.$lines.pageChanged(v,h))return this.update(h);this.$lines.moveContainer(h);var O=Math.min(h.lastRow+h.gutterOffset,this.session.getLength()-1),C=this.oldLastRow;if(this.oldLastRow=O,!v||C<h.firstRow)return this.update(h);if(O<v.firstRow)return this.update(h);if(v.firstRow<h.firstRow)for(var x=this.session.getFoldedRowCount(v.firstRow,h.firstRow-1);0<x;x--)this.$lines.shift();if(O<C)for(x=this.session.getFoldedRowCount(O+1,C);0<x;x--)this.$lines.pop();h.firstRow<v.firstRow&&this.$lines.unshift(this.$renderLines(h,h.firstRow,v.firstRow-1)),C<O&&this.$lines.push(this.$renderLines(h,C+1,O)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(h)},this.$renderLines=function(h,v,O){for(var C=[],x=v,L=this.session.getNextFoldLine(x),Q=L?L.start.row:1/0;Q<x&&(Q=(L=this.session.getNextFoldLine(x=L.end.row+1,L))?L.start.row:1/0),!(O<x);){var G=this.$lines.createCell(x,h,this.session,m);this.$renderCell(G,h,L,x),C.push(G),x++}return C},this.$renderCell=function(h,v,O,C){var x,L=h.element,Q=this.session,G=L.childNodes[0],T=L.childNodes[1],V=Q.$firstLineNumber,J=Q.$breakpoints,D=Q.$decorations,X=Q.gutterRenderer||this.$renderer,q=this.$showFoldWidgets&&Q.foldWidgets,ee=O?O.start.row:Number.MAX_VALUE,j="ace_gutter-cell ";return this.$highlightGutterLine&&(C==this.$cursorRow||O&&C<this.$cursorRow&&ee<=C&&this.$cursorRow<=O.end.row)&&(j+="ace_gutter-active-line ",this.$cursorCell!=h)&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=h),J[C]&&(j+=J[C]),D[C]&&(j+=D[C]),this.$annotations[C]&&(j+=this.$annotations[C].className),L.className!=j&&(L.className=j),(x=q&&null==(x=q[C])?q[C]=Q.getFoldWidget(C):x)?(j="ace_fold-widget ace_"+x,T.className!=(j+="start"==x&&C==ee&&C<O.end.row?" ace_closed":" ace_open")&&(T.className=j),S.setStyle(T.style,"height",J=v.lineHeight+"px"),S.setStyle(T.style,"display","inline-block")):T&&S.setStyle(T.style,"display","none"),(D=(X?X.getText(Q,C):C+V).toString())!==G.data&&(G.data=D),S.setStyle(h.element.style,"height",this.$lines.computeLineHeight(C,v,Q)+"px"),S.setStyle(h.element.style,"top",this.$lines.computeLineTop(C,v,Q)+"px"),h.text=D,h},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer="",this.setHighlightGutterLine=function(h){this.$highlightGutterLine=h},this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(h){this.$renderer=!h&&{getWidth:function(){return 0},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(h){h?S.addCssClass(this.element,"ace_folding-enabled"):S.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=h,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){var h;return this.element.firstChild?(h=S.computedStyle(this.element.firstChild),this.$padding={},this.$padding.left=(parseInt(h.borderLeftWidth)||0)+(parseInt(h.paddingLeft)||0)+1,this.$padding.right=(parseInt(h.borderRightWidth)||0)+(parseInt(h.paddingRight)||0),this.$padding):{left:0,right:0}},this.getRegion=function(h){var v=this.$padding||this.$computePadding(),O=this.element.getBoundingClientRect();return h.x<v.left+O.left?"markers":this.$showFoldWidgets&&h.x>O.right-v.right?"foldWidgets":void 0}}).call(R.prototype),_.Gutter=R}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(k,_,M){"use strict";function R(w){this.element=y.createElement("div"),this.element.className="ace_layer ace_marker-layer",w.appendChild(this.element)}var S=k("../range").Range,y=k("../lib/dom");(function(){this.$padding=0,this.setPadding=function(w){this.$padding=w},this.setSession=function(w){this.session=w},this.setMarkers=function(w){this.markers=w},this.elt=function(w,p){var f=-1!=this.i&&this.element.childNodes[this.i];f?this.i++:(f=document.createElement("div"),this.element.appendChild(f),this.i=-1),f.style.cssText=p,f.className=w},this.update=function(w){if(w){var p,f;for(f in this.config=w,this.i=0,this.markers){var m,v,O=this.markers[f];O.range?(v=O.range.clipRows(w.firstRow,w.lastRow)).isEmpty()||(v=v.toScreenRange(this.session),O.renderer?(m=this.$getTop(v.start.row,w),O.renderer(p,v,this.$padding+v.start.column*w.characterWidth,m,w)):"fullLine"==O.type?this.drawFullLineMarker(p,v,O.clazz,w):"screenLine"==O.type?this.drawScreenLineMarker(p,v,O.clazz,w):v.isMultiLine()?"text"==O.type?this.drawTextMarker(p,v,O.clazz,w):this.drawMultiLineMarker(p,v,O.clazz,w):this.drawSingleLineMarker(p,v,O.clazz+" ace_start ace_br15",w)):O.update(p,this,this.session,w)}if(-1!=this.i)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},this.$getTop=function(w,p){return(w-p.firstRowScreen)*p.lineHeight},this.drawTextMarker=function(w,p,f,m,h){for(var v,O=this.session,C=p.start.row,x=p.end.row,L=C,Q=0,G=O.getScreenLastRowColumn(L),T=new S(L,p.start.column,L,Q);L<=x;L++)T.start.row=T.end.row=L,T.start.column=L==C?p.start.column:O.getRowWrapIndent(L),T.end.column=G,v=Q,Q=G,G=L+1<x?O.getScreenLastRowColumn(L+1):L==x?0:p.end.column,this.drawSingleLineMarker(w,T,f+(L==C?" ace_start":"")+" ace_br"+((L==C||L==C+1&&p.start.column?1:0)|(v<Q?2:0)|(G<Q?4:0)|(L==x?8:0)),m,L==x?0:1,h)},this.drawMultiLineMarker=function(w,p,f,m,h){var v,O=this.$padding,C=m.lineHeight,x=this.$getTop(p.start.row,m),L=O+p.start.column*m.characterWidth;h=h||"",this.session.$bidiHandler.isBidiRow(p.start.row)?((v=p.clone()).end.row=v.start.row,v.end.column=this.session.getLine(v.start.row).length,this.drawBidiSingleLineMarker(w,v,f+" ace_br1 ace_start",m,null,h)):this.elt(f+" ace_br1 ace_start","height:"+C+"px;right:0;top:"+x+"px;left:"+L+"px;"+(h||"")),this.session.$bidiHandler.isBidiRow(p.end.row)?((v=p.clone()).start.row=v.end.row,v.start.column=0,this.drawBidiSingleLineMarker(w,v,f+" ace_br12",m,null,h)):(x=this.$getTop(p.end.row,m),this.elt(f+" ace_br12","height:"+C+"px;width:"+(L=p.end.column*m.characterWidth)+"px;top:"+x+"px;left:"+O+"px;"+(h||""))),(C=(p.end.row-p.start.row-1)*m.lineHeight)<=0||(x=this.$getTop(p.start.row+1,m),this.elt(f+((w=(p.start.column?1:0)|(p.end.column?0:8))?" ace_br"+w:""),"height:"+C+"px;right:0;top:"+x+"px;left:"+O+"px;"+(h||"")))},this.drawSingleLineMarker=function(O,L,f,m,C,v){if(this.session.$bidiHandler.isBidiRow(L.start.row))return this.drawBidiSingleLineMarker(O,L,f,m,C,v);O=m.lineHeight,C=(L.end.column+(C||0)-L.start.column)*m.characterWidth;var x=this.$getTop(L.start.row,m);this.elt(f,"height:"+O+"px;width:"+C+"px;top:"+x+"px;left:"+(L=this.$padding+L.start.column*m.characterWidth)+"px;"+(v||""))},this.drawBidiSingleLineMarker=function(w,p,f,m,h,v){var O=m.lineHeight,C=this.$getTop(p.start.row,m),x=this.$padding;this.session.$bidiHandler.getSelections(p.start.column,p.end.column).forEach(function(L){this.elt(f,"height:"+O+"px;width:"+(L.width+(h||0))+"px;top:"+C+"px;left:"+(x+L.left)+"px;"+(v||""))},this)},this.drawFullLineMarker=function(w,p,f,m,h){var v=this.$getTop(p.start.row,m),O=m.lineHeight;p.start.row!=p.end.row&&(O+=this.$getTop(p.end.row,m)-v),this.elt(f,"height:"+O+"px;top:"+v+"px;left:0;right:0;"+(h||""))},this.drawScreenLineMarker=function(w,p,f,m,h){p=this.$getTop(p.start.row,m),this.elt(f,"height:"+(m=m.lineHeight)+"px;top:"+p+"px;left:0;right:0;"+(h||""))}}).call(R.prototype),_.Marker=R}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter"],function(k,_,M){"use strict";function R(m){this.dom=y,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",m.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new p(this.element)}var S=k("../lib/oop"),y=k("../lib/dom"),w=k("../lib/lang"),p=k("./lines").Lines,f=k("../lib/event_emitter").EventEmitter;(function(){S.implement(this,f),this.EOF_CHAR="\xb6",this.EOL_CHAR_LF="\xac",this.EOL_CHAR_CRLF="\xa4",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="\u2014",this.SPACE_CHAR="\xb7",this.$padding=0,this.MAX_LINE_LENGTH=1e4,this.$updateEolChar=function(){var m="\n"==(m=this.session.doc).getNewLineCharacter()&&"windows"!=m.getNewLineMode()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=m)return this.EOL_CHAR=m,!0},this.setPadding=function(m){this.$padding=m,this.element.style.margin="0 "+m+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(m){this.$fontMetrics=m,this.$fontMetrics.on("changeCharacterSize",function(h){this._signal("changeCharacterSize",h)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(m){(this.session=m)&&this.$computeTabString()},this.showInvisibles=!1,this.showSpaces=!1,this.showTabs=!1,this.showEOL=!1,this.setShowInvisibles=function(m){return this.showInvisibles!=m&&("string"==typeof(this.showInvisibles=m)?(this.showSpaces=/tab/i.test(m),this.showTabs=/space/i.test(m),this.showEOL=/eol/i.test(m)):this.showSpaces=this.showTabs=this.showEOL=m,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(m){return this.displayIndentGuides!=m&&(this.displayIndentGuides=m,this.$computeTabString(),!0)},this.$highlightIndentGuides=!0,this.setHighlightIndentGuides=function(m){return this.$highlightIndentGuides!==m&&(this.$highlightIndentGuides=m)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){for(var m,h,v,O,C,x,L=this.session.getTabSize(),Q=(this.tabSize=L,this.$tabStrings=[0]),G=1;G<L+1;G++)this.showTabs?((x=this.dom.createElement("span")).className="ace_invisible ace_invisible_tab",x.textContent=w.stringRepeat(this.TAB_CHAR,G),Q.push(x)):Q.push(this.dom.createTextNode(w.stringRepeat(" ",G),this.element));this.displayIndentGuides&&(this.$indentGuideRe=/\s\S| \t|\t |\s$/,m="ace_indent-guide",h=this.showSpaces?" ace_invisible ace_invisible_space":"",v=w.stringRepeat(this.showSpaces?this.SPACE_CHAR:" ",this.tabSize),O=this.showTabs?" ace_invisible ace_invisible_tab":"",C=this.showTabs?w.stringRepeat(this.TAB_CHAR,this.tabSize):v,(x=this.dom.createElement("span")).className=m+h,x.textContent=v,this.$tabStrings[" "]=x,(x=this.dom.createElement("span")).className=m+O,x.textContent=C,this.$tabStrings["\t"]=x)},this.updateLines=function(m,h,v){if(this.config.lastRow!=m.lastRow||this.config.firstRow!=m.firstRow)return this.update(m);this.config=m;for(var O=Math.max(h,m.firstRow),C=Math.min(v,m.lastRow),x=this.element.childNodes,L=0,Q=m.firstRow;Q<O;Q++){if(G=this.session.getFoldLine(Q)){if(G.containsRow(O)){O=G.start.row;break}Q=G.end.row}L++}for(var G,T=!1,V=(G=this.session.getNextFoldLine(Q=O))?G.start.row:1/0;V<Q&&(V=(G=this.session.getNextFoldLine(Q=G.end.row+1,G))?G.start.row:1/0),!(C<Q);){var J,X=x[L++];X&&(this.dom.removeChildren(X),this.$renderLine(X,Q,Q==V&&G),T&&(X.style.top=this.$lines.computeLineTop(Q,m,this.session)+"px"),J=m.lineHeight*this.session.getRowLength(Q)+"px",X.style.height!=J)&&(T=!0,X.style.height=J),Q++}if(T)for(;L<this.$lines.cells.length;){var q=this.$lines.cells[L++];q.element.style.top=this.$lines.computeLineTop(q.row,m,this.session)+"px"}},this.scrollLines=function(m){var h=this.config;if(this.config=m,this.$lines.pageChanged(h,m))return this.update(m);this.$lines.moveContainer(m);var v=m.lastRow;if(!h||(h?h.lastRow:-1)<m.firstRow)return this.update(m);if(v<h.firstRow)return this.update(m);if(!h||h.lastRow<m.firstRow)return this.update(m);if(m.lastRow<h.firstRow)return this.update(m);if(h.firstRow<m.firstRow)for(var C=this.session.getFoldedRowCount(h.firstRow,m.firstRow-1);0<C;C--)this.$lines.shift();if(h.lastRow>m.lastRow)for(C=this.session.getFoldedRowCount(m.lastRow+1,h.lastRow);0<C;C--)this.$lines.pop();m.firstRow<h.firstRow&&this.$lines.unshift(this.$renderLinesFragment(m,m.firstRow,h.firstRow-1)),m.lastRow>h.lastRow&&this.$lines.push(this.$renderLinesFragment(m,h.lastRow+1,m.lastRow)),this.$highlightIndentGuide()},this.$renderLinesFragment=function(m,h,v){for(var O=[],C=h,x=this.session.getNextFoldLine(C),L=x?x.start.row:1/0;L<C&&(L=(x=this.session.getNextFoldLine(C=x.end.row+1,x))?x.start.row:1/0),!(v<C);){var Q=this.$lines.createCell(C,m,this.session),G=Q.element;this.dom.removeChildren(G),y.setStyle(G.style,"height",this.$lines.computeLineHeight(C,m,this.session)+"px"),y.setStyle(G.style,"top",this.$lines.computeLineTop(C,m,this.session)+"px"),this.$renderLine(G,C,C==L&&x),G.className=this.$useLineGroups()?"ace_line_group":"ace_line",O.push(Q),C++}return O},this.update=function(m){this.$lines.moveContainer(m);for(var h=(this.config=m).firstRow,v=m.lastRow,O=this.$lines;O.getLength();)O.pop();O.push(this.$renderLinesFragment(m,h,v))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(m,h,v,O){for(var C,x,L=this,Q=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,G=this.dom.createFragment(this.element),T=0;C=Q.exec(O);){var V,J,X=C[1],q=C[2],ee=C[3],j=C[4],D=C[5];!L.showSpaces&&q||(V=T!=C.index?O.slice(T,C.index):"",T=C.index+C[0].length,V&&G.appendChild(this.dom.createTextNode(V,this.element)),X?(V=L.session.getScreenTabSize(h+C.index),G.appendChild(L.$tabStrings[V].cloneNode(!0)),h+=V-1):q?L.showSpaces?((J=this.dom.createElement("span")).className="ace_invisible ace_invisible_space",J.textContent=w.stringRepeat(L.SPACE_CHAR,q.length),G.appendChild(J)):G.appendChild(this.com.createTextNode(q,this.element)):ee?((J=this.dom.createElement("span")).className="ace_invisible ace_invisible_space ace_invalid",J.textContent=w.stringRepeat(L.SPACE_CHAR,ee.length),G.appendChild(J)):j?(h+=1,(J=this.dom.createElement("span")).style.width=2*L.config.characterWidth+"px",J.className=L.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",J.textContent=L.showSpaces?L.SPACE_CHAR:j,G.appendChild(J)):D&&(h+=1,(J=this.dom.createElement("span")).style.width=2*L.config.characterWidth+"px",J.className="ace_cjk",J.textContent=D,G.appendChild(J)))}return G.appendChild(this.dom.createTextNode(T?O.slice(T):O,this.element)),this.$textToken[v.type]?m.appendChild(G):(x="ace_"+v.type.replace(/\./g," ace_"),J=this.dom.createElement("span"),"fold"==v.type&&(J.style.width=v.value.length*this.config.characterWidth+"px"),J.className=x,J.appendChild(G),m.appendChild(J)),h+O.length},this.renderIndentGuide=function(m,h,v){var O=h.search(this.$indentGuideRe);if(!(O<=0||v<=O)){if(" "==h[0]){for(var C=(O-=O%this.tabSize)/this.tabSize,x=0;x<C;x++)m.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),h.substr(O)}if("\t"==h[0]){for(x=0;x<O;x++)m.appendChild(this.$tabStrings["\t"].cloneNode(!0));return this.$highlightIndentGuide(),h.substr(O)}this.$highlightIndentGuide()}return h},this.$highlightIndentGuide=function(){if(this.$highlightIndentGuides&&this.displayIndentGuides){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var m=this.session.doc.$lines;if(m){var h=this.session.selection.getCursor(),v=/^\s*/.exec(this.session.doc.getLine(h.row))[0].length,O=Math.floor(v/this.tabSize);if(this.$highlightIndentGuideMarker={indentLevel:O,start:h.row},this.session.$bracketHighlight)for(var C=this.session.$bracketHighlight.ranges,x=0;x<C.length;x++)if(h.row!==C[x].start.row){this.$highlightIndentGuideMarker.end=C[x].start.row,this.$highlightIndentGuideMarker.dir=h.row>C[x].start.row?-1:1;break}if(!this.$highlightIndentGuideMarker.end&&""!==m[h.row]&&h.column===m[h.row].length)for(this.$highlightIndentGuideMarker.dir=1,x=h.row+1;x<m.length;x++){var L=m[x],Q=/^\s*/.exec(L)[0].length;if(""!==L&&(this.$highlightIndentGuideMarker.end=x,Q<=v))break}this.$renderHighlightIndentGuide()}}},this.$clearActiveIndentGuide=function(){for(var m=this.$lines.cells,h=0;h<m.length;h++){var v=m[h].element.childNodes;if(0<v.length)for(var O=0;O<v.length;O++)if(v[O].classList&&v[O].classList.contains("ace_indent-guide-active")){v[O].classList.remove("ace_indent-guide-active");break}}},this.$setIndentGuideActive=function(m,h){""!==this.session.doc.getLine(m.row)&&(m=m.element.childNodes)&&(m=m[h-1])&&m.classList&&m.classList.contains("ace_indent-guide")&&m.classList.add("ace_indent-guide-active")},this.$renderHighlightIndentGuide=function(){if(this.$lines){var m=this.$lines.cells,h=(this.$clearActiveIndentGuide(),this.$highlightIndentGuideMarker.indentLevel);if(0!==h)if(1===this.$highlightIndentGuideMarker.dir)for(var v=0;v<m.length;v++){var O=m[v];if(this.$highlightIndentGuideMarker.end&&O.row>=this.$highlightIndentGuideMarker.start+1){if(O.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(O,h)}}else for(v=m.length-1;0<=v;v--)if(O=m[v],this.$highlightIndentGuideMarker.end&&O.row<this.$highlightIndentGuideMarker.start){if(O.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(O,h)}}},this.$createLineElement=function(m){var h=this.dom.createElement("div");return h.className="ace_line",h.style.height=this.config.lineHeight+"px",h},this.$renderWrappedLine=function(m,h,v){var O=0,C=0,x=v[0],L=0,Q=this.$createLineElement();m.appendChild(Q);for(var G=0;G<h.length;G++){var T=h[G],V=T.value;if(0==G&&this.displayIndentGuides){if(O=V.length,!(V=this.renderIndentGuide(Q,V,x)))continue;O-=V.length}if(O+V.length<x)L=this.$renderToken(Q,L,T,V),O+=V.length;else{for(;O+V.length>=x;)L=this.$renderToken(Q,L,T,V.substring(0,x-O)),V=V.substring(x-O),O=x,Q=this.$createLineElement(),m.appendChild(Q),Q.appendChild(this.dom.createTextNode(w.stringRepeat("\xa0",v.indent),this.element)),L=0,x=v[++C]||Number.MAX_VALUE;0!=V.length&&(O+=V.length,L=this.$renderToken(Q,L,T,V))}}v[v.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(Q,L,null,"",!0)},this.$renderSimpleLine=function(m,h){for(var v=0,O=0;O<h.length;O++){var C=h[O],x=C.value;if(0!=O||!this.displayIndentGuides||(x=this.renderIndentGuide(m,x))){if(v+x.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(m,v,C,x);v=this.$renderToken(m,v,C,x)}}},this.$renderOverflowMessage=function(m,h,v,O,C){v&&this.$renderToken(m,h,v,O.slice(0,this.MAX_LINE_LENGTH-h)),(v=this.dom.createElement("span")).className="ace_inline_button ace_keyword ace_toggle_wrap",v.textContent=C?"<hide>":"<click to see more...>",m.appendChild(v)},this.$renderLine=function(m,h,v){var O,C,x=m;(O=(v=v||0==v?v:this.session.getFoldLine(h))?this.$getFoldLineTokens(h,v):this.session.getTokens(h)).length?(C=this.session.getRowSplitData(h))&&C.length?(this.$renderWrappedLine(m,O,C),x=m.lastChild):(x=m,this.$useLineGroups()&&(x=this.$createLineElement(),m.appendChild(x)),this.$renderSimpleLine(x,O)):this.$useLineGroups()&&(x=this.$createLineElement(),m.appendChild(x)),this.showEOL&&x&&(v&&(h=v.end.row),(C=this.dom.createElement("span")).className="ace_invisible ace_invisible_eol",C.textContent=h==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,x.appendChild(C))},this.$getFoldLineTokens=function(m,h){var v=this.session,O=[],C=v.getTokens(m);return h.walk(function(x,L,Q,G,T){if(null!=x)O.push({type:"fold",value:x});else if((C=T?v.getTokens(L):C).length){for(var V,J=C,X=G,q=Q,ee=0,j=0;j+J[ee].value.length<X;)if(j+=J[ee].value.length,++ee==J.length)return;for(j!=X&&((V=J[ee].value.substring(X-j)).length>q-X&&(V=V.substring(0,q-X)),O.push({type:J[ee].type,value:V}),j=X+V.length,ee+=1);j<q&&ee<J.length;)(V=J[ee].value).length+j>q?O.push({type:J[ee].type,value:V.substring(0,q-j)}):O.push(J[ee]),j+=V.length,ee+=1}},h.end.row,this.session.getLine(h.end.row).length),O},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){}}).call(R.prototype),_.Text=R}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(k,_,M){"use strict";function R(y){this.element=S.createElement("div"),this.element.className="ace_layer ace_cursor-layer",y.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),S.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}var S=k("../lib/dom");(function(){this.$updateOpacity=function(y){for(var w=this.cursors,p=w.length;p--;)S.setStyle(w[p].style,"opacity",y?"":"0")},this.$startCssAnimation=function(){for(var y=this.cursors,w=y.length;w--;)y[w].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&S.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},this.$stopCssAnimation=function(){this.$isAnimating=!1,S.removeCssClass(this.element,"ace_animate-blinking")},this.$padding=0,this.setPadding=function(y){this.$padding=y},this.setSession=function(y){this.session=y},this.setBlinking=function(y){y!=this.isBlinking&&(this.isBlinking=y,this.restartTimer())},this.setBlinkInterval=function(y){y!=this.blinkInterval&&(this.blinkInterval=y,this.restartTimer())},this.setSmoothBlinking=function(y){y!=this.smoothBlinking&&(this.smoothBlinking=y,S.setCssClass(this.element,"ace_smooth-blinking",y),this.$updateCursors(!0),this.restartTimer())},this.addCursor=function(){var y=S.createElement("div");return y.className="ace_cursor",this.element.appendChild(y),this.cursors.push(y),y},this.removeCursor=function(){var y;if(1<this.cursors.length)return(y=this.cursors.pop()).parentNode.removeChild(y),y},this.hideCursor=function(){this.isVisible=!1,S.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,S.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var y,w=this.$updateCursors;clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,S.removeCssClass(this.element,"ace_smooth-blinking")),w(!0),this.isBlinking&&this.blinkInterval&&this.isVisible?(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&S.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))),S.HAS_CSS_ANIMATION?this.$startCssAnimation():(y=function(){this.timeoutId=setTimeout(function(){w(!1)},.6*this.blinkInterval)}.bind(this),this.intervalId=setInterval(function(){w(!0),y()},this.blinkInterval),y())):this.$stopCssAnimation()},this.getPixelPosition=function(y,w){if(!this.config||!this.session)return{left:0,top:0};y=y||this.session.selection.getCursor();var p=this.session.documentToScreenPosition(y);return{left:this.$padding+(this.session.$bidiHandler.isBidiRow(p.row,y.row)?this.session.$bidiHandler.getPosLeft(p.column):p.column*this.config.characterWidth),top:(p.row-(w?this.config.firstRowScreen:0))*this.config.lineHeight}},this.isCursorInView=function(y,w){return 0<=y.top&&y.top<w.maxHeight},this.update=function(y){this.config=y;for(var w=this.session.$selectionMarkers,f=0,p=0,m=(f=0,(w=void 0!==w&&0!==w.length?w:[{cursor:null}]).length);f<m;f++){var h,v,O=this.getPixelPosition(w[f].cursor,!0);(O.top>y.height+y.offset||O.top<0)&&1<f||(v=(h=this.cursors[p++]||this.addCursor()).style,this.drawCursor?this.drawCursor(h,O,y,w[f],this.session):this.isCursorInView(O,y)?(S.setStyle(v,"display","block"),S.translate(h,O.left,O.top),S.setStyle(v,"width",Math.round(y.characterWidth)+"px"),S.setStyle(v,"height",y.lineHeight+"px")):S.setStyle(v,"display","none"))}for(;this.cursors.length>p;)this.removeCursor();var C=this.session.getOverwrite();this.$setOverwrite(C),this.$pixelPos=O,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(y){y!=this.overwrite&&((this.overwrite=y)?S.addCssClass(this.element,"ace_overwrite-cursors"):S.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(R.prototype),_.Cursor=R}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(k,_,M){"use strict";function R(h){this.element=p.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=p.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\xa0",this.element.appendChild(this.inner),h.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,f.addListener(this.element,"scroll",this.onScroll.bind(this)),f.addListener(this.element,"mousedown",f.preventDefault)}function S(h,v){R.call(this,h),this.scrollTop=0,this.scrollHeight=0,v.$scrollbarWidth=this.width=p.scrollbarWidth(h.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0}function y(h,v){R.call(this,h),this.scrollLeft=0,this.height=v.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"}var w=k("./lib/oop"),p=k("./lib/dom"),f=k("./lib/event"),m=k("./lib/event_emitter").EventEmitter;(function(){w.implement(this,m),this.setVisible=function(h){this.element.style.display=h?"":"none",this.isVisible=h,this.coeff=1}}).call(R.prototype),w.inherits(S,R),function(){this.classSuffix="-v",this.onScroll=function(){var h;this.skipEvent||(this.scrollTop=this.element.scrollTop,1!=this.coeff&&(this.scrollTop=this.scrollTop*(1-(h=this.element.clientHeight/this.scrollHeight))/(this.coeff-h)),this._emit("scroll",{data:this.scrollTop})),this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(h){this.element.style.height=h+"px"},this.setInnerHeight=this.setScrollHeight=function(h){32768<(this.scrollHeight=h)?(this.coeff=32768/h,h=32768):1!=this.coeff&&(this.coeff=1),this.inner.style.height=h+"px"},this.setScrollTop=function(h){this.scrollTop!=h&&(this.skipEvent=!0,this.scrollTop=h,this.element.scrollTop=h*this.coeff)}}.call(S.prototype),w.inherits(y,R),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(h){this.element.style.width=h+"px"},this.setInnerWidth=function(h){this.inner.style.width=h+"px"},this.setScrollWidth=function(h){this.inner.style.width=h+"px"},this.setScrollLeft=function(h){this.scrollLeft!=h&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=h)}}.call(y.prototype),_.ScrollBar=S,_.ScrollBarV=S,_.ScrollBarH=y,_.VScrollBar=S,_.HScrollBar=y}),ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(k,_,M){"use strict";function R(h){this.element=p.createElement("div"),this.element.className="ace_sb"+this.classSuffix,this.inner=p.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,h.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,f.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}function S(h,v){R.call(this,h),this.scrollTop=0,this.scrollHeight=0,this.parent=h,this.width=this.VScrollWidth,this.renderer=v,this.inner.style.width=this.element.style.width=(this.width||15)+"px",this.$minWidth=0}function y(h,v){R.call(this,h),this.scrollLeft=0,this.scrollWidth=0,this.height=this.HScrollHeight,this.inner.style.height=this.element.style.height=(this.height||12)+"px",this.renderer=v}var w=k("./lib/oop"),p=k("./lib/dom"),f=k("./lib/event"),m=k("./lib/event_emitter").EventEmitter;p.importCssString(".ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{\n  position: absolute;\n  background: rgba(128, 128, 128, 0.6);\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  border: 1px solid #bbb;\n  border-radius: 2px;\n  z-index: 8;\n}\n.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {\n  position: absolute;\n  z-index: 6;\n  background: none;\n  overflow: hidden!important;\n}\n.ace_editor>.ace_sb-v {\n  z-index: 6;\n  right: 0;\n  top: 0;\n  width: 12px;\n}\n.ace_editor>.ace_sb-v div {\n  z-index: 8;\n  right: 0;\n  width: 100%;\n}\n.ace_editor>.ace_sb-h {\n  bottom: 0;\n  left: 0;\n  height: 12px;\n}\n.ace_editor>.ace_sb-h div {\n  bottom: 0;\n  height: 100%;\n}\n.ace_editor>.ace_sb_grabbed {\n  z-index: 8;\n  background: #000;\n}","ace_scrollbar.css",!1),function(){w.implement(this,m),this.setVisible=function(h){this.element.style.display=h?"":"none",this.isVisible=h,this.coeff=1}}.call(R.prototype),w.inherits(S,R),function(){this.classSuffix="-v",w.implement(this,m),this.onMouseDown=function(h,v){var O,C,x,L,Q;if("mousedown"===h&&0===f.getButton(v)&&2!==v.detail)return v.target===this.inner?(O=this,C=v.clientY,x=v.clientY,L=this.thumbTop,f.capture(this.inner,function(G){C=G.clientY},function(){clearInterval(Q)}),Q=setInterval(function(){var G;void 0!==C&&(G=O.scrollTopFromThumbTop(L+C-x))!==O.scrollTop&&O._emit("scroll",{data:G})},20)):(h=v.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2,this._emit("scroll",{data:this.scrollTopFromThumbTop(h)})),f.preventDefault(v)},this.getHeight=function(){return this.height},this.scrollTopFromThumbTop=function(h){return h=h*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight),(h>>=0)<0?h=0:h>this.pageHeight-this.viewHeight&&(h=this.pageHeight-this.viewHeight),h},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(h){this.height=Math.max(0,h),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},this.setInnerHeight=this.setScrollHeight=function(h,v){(this.pageHeight!==h||v)&&(this.pageHeight=h,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight)&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop}))},this.setScrollTop=function(h){this.scrollTop=h,this.thumbTop=(h=h<0?0:h)*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"}}.call(S.prototype),w.inherits(y,R),function(){this.classSuffix="-h",w.implement(this,m),this.onMouseDown=function(h,v){var O,C,x,L,Q;if("mousedown"===h&&0===f.getButton(v)&&2!==v.detail)return v.target===this.inner?(O=this,C=v.clientX,x=v.clientX,L=this.thumbLeft,f.capture(this.inner,function(G){C=G.clientX},function(){clearInterval(Q)}),Q=setInterval(function(){var G;void 0!==C&&(G=O.scrollLeftFromThumbLeft(L+C-x))!==O.scrollLeft&&O._emit("scroll",{data:G})},20)):(h=v.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2,this._emit("scroll",{data:this.scrollLeftFromThumbLeft(h)})),f.preventDefault(v)},this.getHeight=function(){return this.isVisible?this.height:0},this.scrollLeftFromThumbLeft=function(h){return h=h*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth),(h>>=0)<0?h=0:h>this.pageWidth-this.viewWidth&&(h=this.pageWidth-this.viewWidth),h},this.setWidth=function(h){this.width=Math.max(0,h),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},this.setInnerWidth=this.setScrollWidth=function(h,v){(this.pageWidth!==h||v)&&(this.pageWidth=h,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth)&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft}))},this.setScrollLeft=function(h){this.scrollLeft=h,this.thumbLeft=(h=h<0?0:h)*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"}}.call(y.prototype),_.ScrollBar=S,_.ScrollBarV=S,_.ScrollBarH=y,_.VScrollBar=S,_.HScrollBar=y}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(k,_,M){"use strict";function R(y,w){this.onRender=y,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=w||window;var p=this;this._flush=function(f){p.pending=!1;var m=p.changes;m&&(S.blockIdle(100),p.changes=0,p.onRender(m)),p.changes?p.$recursionLimit--<0||p.schedule():p.$recursionLimit=2}}var S=k("./lib/event");(function(){this.schedule=function(y){this.changes=this.changes|y,this.changes&&!this.pending&&(S.nextFrame(this._flush),this.pending=!0)},this.clear=function(y){var w=this.changes;return this.changes=0,w}}).call(R.prototype),_.RenderLoop=R}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(h,_,M){var R=h("../lib/oop"),S=h("../lib/dom"),y=h("../lib/lang"),w=h("../lib/event"),p=h("../lib/useragent"),f=h("../lib/event_emitter").EventEmitter,m="function"==typeof ResizeObserver;h=_.FontMetrics=function(v){this.el=S.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=S.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=S.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),v.appendChild(this.el),this.$measureNode.textContent=y.stringRepeat("X",512),this.$characterSize={width:0,height:0},m?this.$addObserver():this.checkForSizeChanges()},function(){R.implement(this,f),this.$characterSize={width:0,height:0},this.$setMeasureNodeStyles=function(v,O){v.width=v.height="auto",v.left=v.top="0px",v.visibility="hidden",v.position="absolute",v.whiteSpace="pre",p.isIE<8?v["font-family"]="inherit":v.font="inherit",v.overflow=O?"hidden":"visible"},this.checkForSizeChanges=function(v){var O;!(v=void 0===v?this.$measureSizes():v)||this.$characterSize.width===v.width&&this.$characterSize.height===v.height||(this.$measureNode.style.fontWeight="bold",O=this.$measureSizes(),this.$measureNode.style.fontWeight="",this.$characterSize=v,this.charSizes=Object.create(null),this.allowBoldFonts=O&&O.width===v.width&&O.height===v.height,this._emit("changeCharacterSize",{data:v}))},this.$addObserver=function(){var v=this;this.$observer=new window.ResizeObserver(function(O){v.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},this.$pollSizeChanges=function(){var v;return this.$pollSizeChangesTimer||this.$observer?this.$pollSizeChangesTimer:(v=this).$pollSizeChangesTimer=w.onIdle(function O(){v.checkForSizeChanges(),w.onIdle(O,500)},500)},this.setPolling=function(v){v?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(v){return 0===(v={height:(v||this.$measureNode).clientHeight,width:(v||this.$measureNode).clientWidth/512}).width||0===v.height?null:v},this.$measureCharWidth=function(v){return this.$main.textContent=y.stringRepeat(v,512),this.$main.getBoundingClientRect().width/512},this.getCharacterWidth=function(v){var O=this.charSizes[v];return void 0===O?this.charSizes[v]=this.$measureCharWidth(v)/this.$characterSize.width:O},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},this.$getZoom=function v(O){return O&&O.parentElement?(window.getComputedStyle(O).zoom||1)*v(O.parentElement):1},this.$initTransformMeasureNodes=function(){function v(O,C){return["div",{style:"position: absolute;top:"+O+"px;left:"+C+"px;"}]}this.els=S.buildDom([v(0,0),v(200,0),v(0,200),v(200,200)],this.el)},this.transformCoordinates=function(v,O){function C(ee,j,D){var N=ee[1]*j[0]-ee[0]*j[1];return[(-j[1]*D[0]+j[0]*D[1])/N,(+ee[1]*D[0]-ee[0]*D[1])/N]}function x(ee,j){return[ee[0]-j[0],ee[1]-j[1]]}function L(ee,j){return[ee[0]+j[0],ee[1]+j[1]]}function Q(ee,j){return[ee*j[0],ee*j[1]]}function G(ee){return[(ee=ee.getBoundingClientRect()).left,ee.top]}v=v&&Q(1/this.$getZoom(this.el),v),this.els||this.$initTransformMeasureNodes();var T,J,V=G(this.els[0]),X=G(this.els[1]),q=G(this.els[2]);return X=Q(1+(J=C(x(J=G(this.els[3]),X),x(J,q),x(L(X,q),L(J,V))))[0],x(X,V)),q=Q(1+J[1],x(q,V)),O?(T=J[0]*O[0]/200+J[1]*O[1]/200+1,O=L(Q(O[0],X),Q(O[1],q)),L(Q(1/T/200,O),V)):(T=x(v,V),O=C(x(X,Q(J[0],T)),x(q,Q(J[1],T)),T),Q(200,O))}}.call(h.prototype)}),ace.define("ace/css/editor.css",["require","exports","module"],function(k,_,M){M.exports='\n.ace_br1 {border-top-left-radius    : 3px;}\n.ace_br2 {border-top-right-radius   : 3px;}\n.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}\n.ace_br4 {border-bottom-right-radius: 3px;}\n.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}\n.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}\n.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}\n.ace_br8 {border-bottom-left-radius : 3px;}\n.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}\n.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}\n.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}\n.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\n.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\n.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\n.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}\n\n\n.ace_editor {\n    position: relative;\n    overflow: hidden;\n    padding: 0;\n    font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;\n    direction: ltr;\n    text-align: left;\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\n.ace_scroller {\n    position: absolute;\n    overflow: hidden;\n    top: 0;\n    bottom: 0;\n    background-color: inherit;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    user-select: none;\n    cursor: text;\n}\n\n.ace_content {\n    position: absolute;\n    box-sizing: border-box;\n    min-width: 100%;\n    contain: style size layout;\n    font-variant-ligatures: no-common-ligatures;\n}\n\n.ace_dragging .ace_scroller:before{\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    content: \'\';\n    background: rgba(250, 250, 250, 0.01);\n    z-index: 1000;\n}\n.ace_dragging.ace_dark .ace_scroller:before{\n    background: rgba(0, 0, 0, 0.01);\n}\n\n.ace_gutter {\n    position: absolute;\n    overflow : hidden;\n    width: auto;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    cursor: default;\n    z-index: 4;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    user-select: none;\n    contain: style size layout;\n}\n\n.ace_gutter-active-line {\n    position: absolute;\n    left: 0;\n    right: 0;\n}\n\n.ace_scroller.ace_scroll-left:after {\n    content: "";\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;\n    pointer-events: none;\n}\n\n.ace_gutter-cell {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    padding-left: 19px;\n    padding-right: 6px;\n    background-repeat: no-repeat;\n}\n\n.ace_gutter-cell.ace_error {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");\n    background-repeat: no-repeat;\n    background-position: 2px center;\n}\n\n.ace_gutter-cell.ace_warning {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");\n    background-position: 2px center;\n}\n\n.ace_gutter-cell.ace_info {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");\n    background-position: 2px center;\n}\n.ace_dark .ace_gutter-cell.ace_info {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");\n}\n\n.ace_scrollbar {\n    contain: strict;\n    position: absolute;\n    right: 0;\n    bottom: 0;\n    z-index: 6;\n}\n\n.ace_scrollbar-inner {\n    position: absolute;\n    cursor: text;\n    left: 0;\n    top: 0;\n}\n\n.ace_scrollbar-v{\n    overflow-x: hidden;\n    overflow-y: scroll;\n    top: 0;\n}\n\n.ace_scrollbar-h {\n    overflow-x: scroll;\n    overflow-y: hidden;\n    left: 0;\n}\n\n.ace_print-margin {\n    position: absolute;\n    height: 100%;\n}\n\n.ace_text-input {\n    position: absolute;\n    z-index: 0;\n    width: 0.5em;\n    height: 1em;\n    opacity: 0;\n    background: transparent;\n    -moz-appearance: none;\n    appearance: none;\n    border: none;\n    resize: none;\n    outline: none;\n    overflow: hidden;\n    font: inherit;\n    padding: 0 1px;\n    margin: 0 -1px;\n    contain: strict;\n    -ms-user-select: text;\n    -moz-user-select: text;\n    -webkit-user-select: text;\n    user-select: text;\n    /*with `pre-line` chrome inserts &nbsp; instead of space*/\n    white-space: pre!important;\n}\n.ace_text-input.ace_composition {\n    background: transparent;\n    color: inherit;\n    z-index: 1000;\n    opacity: 1;\n}\n.ace_composition_placeholder { color: transparent }\n.ace_composition_marker { \n    border-bottom: 1px solid;\n    position: absolute;\n    border-radius: 0;\n    margin-top: 1px;\n}\n\n[ace_nocontext=true] {\n    transform: none!important;\n    filter: none!important;\n    clip-path: none!important;\n    mask : none!important;\n    contain: none!important;\n    perspective: none!important;\n    mix-blend-mode: initial!important;\n    z-index: auto;\n}\n\n.ace_layer {\n    z-index: 1;\n    position: absolute;\n    overflow: hidden;\n    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/\n    word-wrap: normal;\n    white-space: pre;\n    height: 100%;\n    width: 100%;\n    box-sizing: border-box;\n    /* setting pointer-events: auto; on node under the mouse, which changes\n        during scroll, will break mouse wheel scrolling in Safari */\n    pointer-events: none;\n}\n\n.ace_gutter-layer {\n    position: relative;\n    width: auto;\n    text-align: right;\n    pointer-events: auto;\n    height: 1000000px;\n    contain: style size layout;\n}\n\n.ace_text-layer {\n    font: inherit !important;\n    position: absolute;\n    height: 1000000px;\n    width: 1000000px;\n    contain: style size layout;\n}\n\n.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {\n    contain: style size layout;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n}\n\n.ace_hidpi .ace_text-layer,\n.ace_hidpi .ace_gutter-layer,\n.ace_hidpi .ace_content,\n.ace_hidpi .ace_gutter {\n    contain: strict;\n    will-change: transform;\n}\n.ace_hidpi .ace_text-layer > .ace_line, \n.ace_hidpi .ace_text-layer > .ace_line_group {\n    contain: strict;\n}\n\n.ace_cjk {\n    display: inline-block;\n    text-align: center;\n}\n\n.ace_cursor-layer {\n    z-index: 4;\n}\n\n.ace_cursor {\n    z-index: 4;\n    position: absolute;\n    box-sizing: border-box;\n    border-left: 2px solid;\n    /* workaround for smooth cursor repaintng whole screen in chrome */\n    transform: translatez(0);\n}\n\n.ace_multiselect .ace_cursor {\n    border-left-width: 1px;\n}\n\n.ace_slim-cursors .ace_cursor {\n    border-left-width: 1px;\n}\n\n.ace_overwrite-cursors .ace_cursor {\n    border-left-width: 0;\n    border-bottom: 1px solid;\n}\n\n.ace_hidden-cursors .ace_cursor {\n    opacity: 0.2;\n}\n\n.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {\n    opacity: 0;\n}\n\n.ace_smooth-blinking .ace_cursor {\n    transition: opacity 0.18s;\n}\n\n.ace_animate-blinking .ace_cursor {\n    animation-duration: 1000ms;\n    animation-timing-function: step-end;\n    animation-name: blink-ace-animate;\n    animation-iteration-count: infinite;\n}\n\n.ace_animate-blinking.ace_smooth-blinking .ace_cursor {\n    animation-duration: 1000ms;\n    animation-timing-function: ease-in-out;\n    animation-name: blink-ace-animate-smooth;\n}\n    \n@keyframes blink-ace-animate {\n    from, to { opacity: 1; }\n    60% { opacity: 0; }\n}\n\n@keyframes blink-ace-animate-smooth {\n    from, to { opacity: 1; }\n    45% { opacity: 1; }\n    60% { opacity: 0; }\n    85% { opacity: 0; }\n}\n\n.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {\n    position: absolute;\n    z-index: 3;\n}\n\n.ace_marker-layer .ace_selection {\n    position: absolute;\n    z-index: 5;\n}\n\n.ace_marker-layer .ace_bracket {\n    position: absolute;\n    z-index: 6;\n}\n\n.ace_marker-layer .ace_error_bracket {\n    position: absolute;\n    border-bottom: 1px solid #DE5555;\n    border-radius: 0;\n}\n\n.ace_marker-layer .ace_active-line {\n    position: absolute;\n    z-index: 2;\n}\n\n.ace_marker-layer .ace_selected-word {\n    position: absolute;\n    z-index: 4;\n    box-sizing: border-box;\n}\n\n.ace_line .ace_fold {\n    box-sizing: border-box;\n\n    display: inline-block;\n    height: 11px;\n    margin-top: -2px;\n    vertical-align: middle;\n\n    background-image:\n        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),\n        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");\n    background-repeat: no-repeat, repeat-x;\n    background-position: center center, top left;\n    color: transparent;\n\n    border: 1px solid black;\n    border-radius: 2px;\n\n    cursor: pointer;\n    pointer-events: auto;\n}\n\n.ace_dark .ace_fold {\n}\n\n.ace_fold:hover{\n    background-image:\n        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),\n        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");\n}\n\n.ace_tooltip {\n    background-color: #FFF;\n    background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));\n    border: 1px solid gray;\n    border-radius: 1px;\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\n    color: black;\n    max-width: 100%;\n    padding: 3px 4px;\n    position: fixed;\n    z-index: 999999;\n    box-sizing: border-box;\n    cursor: default;\n    white-space: pre;\n    word-wrap: break-word;\n    line-height: normal;\n    font-style: normal;\n    font-weight: normal;\n    letter-spacing: normal;\n    pointer-events: none;\n}\n\n.ace_folding-enabled > .ace_gutter-cell {\n    padding-right: 13px;\n}\n\n.ace_fold-widget {\n    box-sizing: border-box;\n\n    margin: 0 -12px 0 1px;\n    display: none;\n    width: 11px;\n    vertical-align: top;\n\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");\n    background-repeat: no-repeat;\n    background-position: center;\n\n    border-radius: 3px;\n    \n    border: 1px solid transparent;\n    cursor: pointer;\n}\n\n.ace_folding-enabled .ace_fold-widget {\n    display: inline-block;   \n}\n\n.ace_fold-widget.ace_end {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");\n}\n\n.ace_fold-widget.ace_closed {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");\n}\n\n.ace_fold-widget:hover {\n    border: 1px solid rgba(0, 0, 0, 0.3);\n    background-color: rgba(255, 255, 255, 0.2);\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\n}\n\n.ace_fold-widget:active {\n    border: 1px solid rgba(0, 0, 0, 0.4);\n    background-color: rgba(0, 0, 0, 0.05);\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\n}\n/**\n * Dark version for fold widgets\n */\n.ace_dark .ace_fold-widget {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");\n}\n.ace_dark .ace_fold-widget.ace_end {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");\n}\n.ace_dark .ace_fold-widget.ace_closed {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");\n}\n.ace_dark .ace_fold-widget:hover {\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\n    background-color: rgba(255, 255, 255, 0.1);\n}\n.ace_dark .ace_fold-widget:active {\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\n}\n\n.ace_inline_button {\n    border: 1px solid lightgray;\n    display: inline-block;\n    margin: -1px 8px;\n    padding: 0 5px;\n    pointer-events: auto;\n    cursor: pointer;\n}\n.ace_inline_button:hover {\n    border-color: gray;\n    background: rgba(200,200,200,0.2);\n    display: inline-block;\n    pointer-events: auto;\n}\n\n.ace_fold-widget.ace_invalid {\n    background-color: #FFB4B4;\n    border-color: #DE5555;\n}\n\n.ace_fade-fold-widgets .ace_fold-widget {\n    transition: opacity 0.4s ease 0.05s;\n    opacity: 0;\n}\n\n.ace_fade-fold-widgets:hover .ace_fold-widget {\n    transition: opacity 0.05s ease 0.05s;\n    opacity:1;\n}\n\n.ace_underline {\n    text-decoration: underline;\n}\n\n.ace_bold {\n    font-weight: bold;\n}\n\n.ace_nobold .ace_bold {\n    font-weight: normal;\n}\n\n.ace_italic {\n    font-style: italic;\n}\n\n\n.ace_error-marker {\n    background-color: rgba(255, 0, 0,0.2);\n    position: absolute;\n    z-index: 9;\n}\n\n.ace_highlight-marker {\n    background-color: rgba(255, 255, 0,0.2);\n    position: absolute;\n    z-index: 8;\n}\n\n.ace_mobile-menu {\n    position: absolute;\n    line-height: 1.5;\n    border-radius: 4px;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    user-select: none;\n    background: white;\n    box-shadow: 1px 3px 2px grey;\n    border: 1px solid #dcdcdc;\n    color: black;\n}\n.ace_dark > .ace_mobile-menu {\n    background: #333;\n    color: #ccc;\n    box-shadow: 1px 3px 2px grey;\n    border: 1px solid #444;\n\n}\n.ace_mobile-button {\n    padding: 2px;\n    cursor: pointer;\n    overflow: hidden;\n}\n.ace_mobile-button:hover {\n    background-color: #eee;\n    opacity:1;\n}\n.ace_mobile-button:active {\n    background-color: #ddd;\n}\n\n.ace_placeholder {\n    font-family: arial;\n    transform: scale(0.9);\n    transform-origin: left;\n    white-space: pre;\n    opacity: 0.7;\n    margin: 0 10px;\n}\n\n.ace_ghost_text {\n    opacity: 0.5;\n    font-style: italic;\n}'}),ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(k,_,M){"use strict";function R(p,f){this.canvas=S.createElement("canvas"),this.renderer=f,this.pixelRatio=1,this.maxHeight=f.layerConfig.maxHeight,this.lineHeight=f.layerConfig.lineHeight,this.canvasHeight=p.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=p.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},p.element.appendChild(this.canvas)}var S=k("../lib/dom"),y=k("../lib/oop"),w=k("../lib/event_emitter").EventEmitter;(function(){y.implement(this,w),this.$updateDecorators=function(p){var f=!0===this.renderer.theme.isDark?this.colors.dark:this.colors.light,m=(p&&(this.maxHeight=p.maxHeight,this.lineHeight=p.lineHeight,this.canvasHeight=p.height,this.heightRatio=(p.lastRow+1)*this.lineHeight<this.canvasHeight?1:this.canvasHeight/this.maxHeight),this.canvas.getContext("2d")),h=this.renderer.session.$annotations;if(m.clearRect(0,0,this.canvas.width,this.canvas.height),h)for(var v={info:1,warning:2,error:3},O=(h.forEach(function(V){V.priority=v[V.type]||null}),h=h.sort(function(V,J){return V.priority<J.priority?-1:V.priority>J.priority?1:0}),this.renderer.session.$foldData),C=0;C<h.length;C++){var x,T,L=this.compensateFoldRows(T=h[C].row,O),Q=Math.round((T-L)*this.lineHeight*this.heightRatio),G=Math.round((T-L)*this.lineHeight*this.heightRatio);(T=Math.round(((T-L)*this.lineHeight+this.lineHeight)*this.heightRatio))-G<this.minDecorationHeight&&((x=(G+T)/2|0)<this.halfMinDecorationHeight?x=this.halfMinDecorationHeight:x+this.halfMinDecorationHeight>this.canvasHeight&&(x=this.canvasHeight-this.halfMinDecorationHeight),G=Math.round(x-this.halfMinDecorationHeight),T=Math.round(x+this.halfMinDecorationHeight)),m.fillStyle=f[h[C].type]||null,m.fillRect(0,Q,this.canvasWidth,T-G)}(p=this.renderer.session.selection.getCursor())&&(L=this.compensateFoldRows(p.row,O),Q=Math.round((p.row-L)*this.lineHeight*this.heightRatio),m.fillStyle="rgba(0, 0, 0, 0.5)",m.fillRect(0,Q,this.canvasWidth,2))},this.compensateFoldRows=function(p,f){var m=0;if(f&&0<f.length)for(var h=0;h<f.length;h++)p>f[h].start.row&&p<f[h].end.row?m+=p-f[h].start.row:p>=f[h].end.row&&(m+=f[h].end.row-f[h].start.row);return m}}).call(R.prototype),_.Decorator=R}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor.css","ace/layer/decorators","ace/lib/useragent"],function(k,_,M){"use strict";function R(D,ee){var j=this;this.container=D||y.createElement("div"),y.addCssClass(this.container,"ace_editor"),y.HI_DPI&&y.addCssClass(this.container,"ace_hidpi"),this.setTheme(ee),null==w.get("useStrictCSP")&&w.set("useStrictCSP",!1),this.$gutter=y.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=y.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=y.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new p(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new f(this.content),D=this.$textLayer=new m(this.content),this.canvas=D.element,this.$markerFront=new f(this.content),this.$cursorLayer=new h(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new O(this.container,this),this.scrollBarH=new v(this.container,this),this.scrollBarV.on("scroll",function(N){j.$scrollAnimation||j.session.setScrollTop(N.data-j.scrollMargin.top)}),this.scrollBarH.on("scroll",function(N){j.$scrollAnimation||j.session.setScrollLeft(N.data-j.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new Q(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(N){j.updateCharacterSize(),j.onResize(!0,j.gutterWidth,j.$size.width,j.$size.height),j._signal("changeCharacterSize",N)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!J.isIOS,this.$loop=new L(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),w.resetOptions(this),w._signal("renderer",this)}var S=k("./lib/oop"),y=k("./lib/dom"),w=k("./config"),p=k("./layer/gutter").Gutter,f=k("./layer/marker").Marker,m=k("./layer/text").Text,h=k("./layer/cursor").Cursor,v=k("./scrollbar").HScrollBar,O=k("./scrollbar").VScrollBar,C=k("./scrollbar_custom").HScrollBar,x=k("./scrollbar_custom").VScrollBar,L=k("./renderloop").RenderLoop,Q=k("./layer/font_metrics").FontMetrics,G=k("./lib/event_emitter").EventEmitter,T=k("./css/editor.css"),V=k("./layer/decorators").Decorator,J=k("./lib/useragent"),X=J.isIE;y.importCssString(T,"ace_editor.css",!1),function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,S.implement(this,G),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),y.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},this.setSession=function(q){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),(this.session=q)&&this.scrollMargin.top&&q.getScrollTop()<=0&&q.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(q),this.$markerBack.setSession(q),this.$markerFront.setSession(q),this.$gutterLayer.setSession(q),this.$textLayer.setSession(q),q&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(q,ee,j){if(void 0===ee&&(ee=1/0),this.$changedLines?(this.$changedLines.firstRow>q&&(this.$changedLines.firstRow=q),this.$changedLines.lastRow<ee&&(this.$changedLines.lastRow=ee)):this.$changedLines={firstRow:q,lastRow:ee},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!j)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(q){q?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(q,ee,j,D){if(!(2<this.resizing)){0<this.resizing?this.resizing++:this.resizing=q?1:0;var N=this.container;if(N=this.$updateCachedSize(q,ee,j=j||N.clientWidth||N.scrollWidth,D=D||N.clientHeight||N.scrollHeight),!this.$size.scrollerHeight||!j&&!D)return this.resizing=0;q&&(this.$gutterLayer.$padding=null),q?this.$renderChanges(N|this.$changes,!0):this.$loop.schedule(N|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},this.$updateCachedSize=function(q,ee,j,D){var N=0,re=this.$size,ue={width:re.width,height:re.height,scrollerHeight:re.scrollerHeight,scrollerWidth:re.scrollerWidth};return(D-=this.$extraHeight||0)&&(q||re.height!=D)&&(re.height=D,N|=this.CHANGE_SIZE,re.scrollerHeight=re.height,this.$horizScroll&&(re.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(re.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",N|=this.CHANGE_SCROLL),j&&(q||re.width!=j)&&(N|=this.CHANGE_SIZE,re.width=j,null==ee&&(ee=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=ee,y.setStyle(this.scrollBarH.element.style,"left",ee+"px"),y.setStyle(this.scroller.style,"left",ee+this.margin.left+"px"),re.scrollerWidth=Math.max(0,j-ee-this.scrollBarV.getWidth()-this.margin.h),y.setStyle(this.$gutter.style,"left",this.margin.left+"px"),ee=this.scrollBarV.getWidth()+"px",y.setStyle(this.scrollBarH.element.style,"right",ee),y.setStyle(this.scroller.style,"right",ee),y.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(re.scrollerWidth),this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||q)&&(N|=this.CHANGE_FULL),re.$dirty=!j||!D,N&&this._signal("resize",ue),N},this.onGutterResize=function(q){(q=this.$showGutter?q:0)!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,q,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()||this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},this.adjustWrapLimit=function(){var q=this.$size.scrollerWidth-2*this.$padding;return q=Math.floor(q/this.characterWidth),this.session.adjustWrapLimit(q,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(q){this.setOption("animatedScroll",q)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(q){this.setOption("showInvisibles",q),this.session.$bidiHandler.setShowInvisibles(q)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(q){this.setOption("displayIndentGuides",q)},this.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},this.setHighlightIndentGuides=function(q){this.setOption("highlightIndentGuides",q)},this.setShowPrintMargin=function(q){this.setOption("showPrintMargin",q)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(q){this.setOption("printMarginColumn",q)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(q){return this.setOption("showGutter",q)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(q){this.setOption("fadeFoldWidgets",q)},this.setHighlightGutterLine=function(q){this.setOption("highlightGutterLine",q)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updatePrintMargin=function(){var q;(this.$showPrintMargin||this.$printMarginEl)&&(this.$printMarginEl||((q=y.createElement("div")).className="ace_layer ace_print-margin-layer",this.$printMarginEl=y.createElement("div"),this.$printMarginEl.className="ace_print-margin",q.appendChild(this.$printMarginEl),this.content.insertBefore(q,this.content.firstChild)),(q=this.$printMarginEl.style).left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",q.visibility=this.$showPrintMargin?"visible":"hidden",this.session)&&-1==this.session.$wrap&&this.adjustWrapLimit()},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){var q,ee,j,D,N,re,ue;this.$isMousePressed||(q=this.textarea.style,re=this.$composition,this.$keepTextAreaAtCursor||re?(j=this.$cursorLayer.$pixelPos)&&(re&&re.markerRange&&(j=this.$cursorLayer.getPixelPosition(re.markerRange.start,!0)),ee=j.top,j=j.left,D=re&&re.useTextareaForIME?this.lineHeight:X?0:1,(ee-=(ue=this.layerConfig).offset)<0||ee>ue.height-D?y.translate(this.textarea,0,0):(ue=1,N=this.$size.height-D,re?re.useTextareaForIME?ue=this.characterWidth*this.session.$getStringScreenWidth(re=this.textarea.value)[0]:ee+=this.lineHeight+2:ee+=this.lineHeight,(j-=this.scrollLeft)>this.$size.scrollerWidth-ue&&(j=this.$size.scrollerWidth-ue),j+=this.gutterWidth+this.margin.left,y.setStyle(q,"height",D+"px"),y.setStyle(q,"width",ue+"px"),y.translate(this.textarea,Math.min(j,this.$size.scrollerWidth-ue),Math.min(ee,N)))):y.translate(this.textarea,-100,0))},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var q=this.layerConfig,ee=q.lastRow;return this.session.documentToScreenRow(ee,0)*q.lineHeight-this.session.getScrollTop()>q.height-q.lineHeight?ee-1:ee},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(q){this.$padding=q,this.$textLayer.setPadding(q),this.$cursorLayer.setPadding(q),this.$markerFront.setPadding(q),this.$markerBack.setPadding(q),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(q,ee,j,D){var N=this.scrollMargin;N.top=0|q,N.bottom=0|ee,N.right=0|D,N.left=0|j,N.v=N.top+N.bottom,N.h=N.left+N.right,N.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-N.top),this.updateFull()},this.setMargin=function(q,ee,j,D){var N=this.margin;N.top=0|q,N.bottom=0|ee,N.right=0|D,N.left=0|j,N.v=N.top+N.bottom,N.h=N.left+N.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(q){this.setOption("hScrollBarAlwaysVisible",q)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(q){this.setOption("vScrollBarAlwaysVisible",q)},this.$updateScrollBarV=function(){var q=this.layerConfig.maxHeight,ee=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&this.scrollTop>(q-=(ee-this.lineHeight)*this.$scrollPastEnd)-ee&&(q=this.scrollTop+ee,this.scrollBarV.scrollTop=null),this.scrollBarV.setScrollHeight(q+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(q,ee){if(this.$changes&&(q|=this.$changes,this.$changes=0),this.session&&this.container.offsetWidth&&!this.$frozen&&(q||ee)){if(this.$size.$dirty)return this.$changes|=q,this.onResize(!0);var j,D;this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",q),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics),ee=this.layerConfig,(q&this.CHANGE_FULL||q&this.CHANGE_SIZE||q&this.CHANGE_TEXT||q&this.CHANGE_LINES||q&this.CHANGE_SCROLL||q&this.CHANGE_H_SCROLL)&&(q|=this.$computeLayerConfig()|this.$loop.clear(),ee.firstRow!=this.layerConfig.firstRow&&ee.firstRowScreen==this.layerConfig.firstRowScreen&&0<(j=this.scrollTop+(ee.firstRow-this.layerConfig.firstRow)*this.lineHeight)&&(this.scrollTop=j,q=(q|=this.CHANGE_SCROLL)|this.$computeLayerConfig()|this.$loop.clear()),ee=this.layerConfig,this.$updateScrollBarV(),q&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),y.translate(this.content,-this.scrollLeft,-ee.offset),D=ee.minHeight+"px",y.setStyle(this.content.style,"width",j=ee.width+2*this.$padding+"px"),y.setStyle(this.content.style,"height",D)),q&this.CHANGE_H_SCROLL&&(y.translate(this.content,-this.scrollLeft,-ee.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),q&this.CHANGE_FULL?(this.$changedLines=null,this.$textLayer.update(ee),this.$showGutter&&this.$gutterLayer.update(ee),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(ee),this.$markerBack.update(ee),this.$markerFront.update(ee),this.$cursorLayer.update(ee),this.$moveTextAreaToCursor()):q&this.CHANGE_SCROLL?(this.$changedLines=null,q&this.CHANGE_TEXT||q&this.CHANGE_LINES?this.$textLayer.update(ee):this.$textLayer.scrollLines(ee),this.$showGutter&&(q&this.CHANGE_GUTTER||q&this.CHANGE_LINES?this.$gutterLayer.update(ee):this.$gutterLayer.scrollLines(ee)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(ee),this.$markerBack.update(ee),this.$markerFront.update(ee),this.$cursorLayer.update(ee),this.$moveTextAreaToCursor()):(q&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(ee),this.$showGutter&&this.$gutterLayer.update(ee),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(ee)):q&this.CHANGE_LINES?((this.$updateLines()||q&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(ee),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(ee)):q&this.CHANGE_TEXT||q&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(ee),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(ee)):q&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(ee),this.$customScrollbar)&&this.$scrollDecorator.$updateDecorators(ee),q&this.CHANGE_CURSOR&&(this.$cursorLayer.update(ee),this.$moveTextAreaToCursor()),q&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(ee),q&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(ee)),this._signal("afterRender",q)}else this.$changes|=q},this.$autosize=function(){var q=this.session.getScreenLength()*this.lineHeight,ee=this.$maxLines*this.lineHeight,j=Math.min(ee,Math.max((this.$minLines||1)*this.lineHeight,q))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(j+=this.scrollBarH.getHeight()),ee=!((j=this.$maxPixelHeight&&j>this.$maxPixelHeight?this.$maxPixelHeight:j)<=2*this.lineHeight)&&ee<q,j==this.desiredHeight&&this.$size.height==this.desiredHeight&&ee==this.$vScroll||(ee!=this.$vScroll&&(this.$vScroll=ee,this.scrollBarV.setVisible(ee)),q=this.container.clientWidth,this.container.style.height=j+"px",this.$updateCachedSize(!0,this.$gutterWidth,q,j),this.desiredHeight=j,this._signal("autosize"))},this.$computeLayerConfig=function(){var q,ue,Ie=this.session,ee=this.$size,Re=ee.height<=2*this.lineHeight,j=this.session.getScreenLength()*this.lineHeight,D=this.$getLongestLine(),N=this.$horizScroll!==(Ae=!Re&&(this.$hScrollBarAlwaysVisible||ee.scrollerWidth-D-2*this.$padding<0)),Ae=(N&&(this.$horizScroll=Ae,this.scrollBarH.setVisible(Ae)),this.$vScroll),re=(this.$maxLines&&1<this.lineHeight&&this.$autosize(),ee.scrollerHeight+this.lineHeight),ve=(j+=ue=!this.$maxLines&&this.$scrollPastEnd?(ee.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0,this.scrollMargin),Te=((ue=Ae!==(this.session.setScrollTop(Math.max(-ve.top,Math.min(this.scrollTop,j-ee.scrollerHeight+ve.bottom))),this.session.setScrollLeft(Math.max(-ve.left,Math.min(this.scrollLeft,D+2*this.$padding-ee.scrollerWidth+ve.right))),Re=!Re&&(this.$vScrollBarAlwaysVisible||ee.scrollerHeight-j+ue<0||this.scrollTop>ve.top)))&&(this.$vScroll=Re,this.scrollBarV.setVisible(Re)),ve=this.scrollTop%this.lineHeight,Ae=Math.ceil(re/this.lineHeight)-1,Ae=(Re=Math.max(0,Math.round((this.scrollTop-ve)/this.lineHeight)))+Ae,this.lineHeight),Me=(Re=Ie.screenToDocumentRow(Re,0),Ie.getFoldLine(Re));return Me&&(Re=Me.start.row),Me=Ie.documentToScreenRow(Re,0),q=Ie.getRowLength(Re)*Te,Ae=Math.min(Ie.screenToDocumentRow(Ae,0),Ie.getLength()-1),re=ee.scrollerHeight+Ie.getRowLength(Ae)*Te+q,ve=this.scrollTop-Me*Te,Ie=0,this.layerConfig.width==D&&!N||(Ie=this.CHANGE_H_SCROLL),(N||ue)&&(Ie|=this.$updateCachedSize(!0,this.gutterWidth,ee.width,ee.height),this._signal("scrollbarVisibilityChanged"),ue)&&(D=this.$getLongestLine()),this.layerConfig={width:D,padding:this.$padding,firstRow:Re,firstRowScreen:Me,lastRow:Ae,lineHeight:Te,characterWidth:this.characterWidth,minHeight:re,maxHeight:j,offset:ve,gutterOffset:Te?Math.max(0,Math.ceil((ve+ee.height-ee.scrollerHeight)/Te)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(D-this.$padding),Ie},this.$updateLines=function(){if(this.$changedLines){var q=this.$changedLines.firstRow,ee=this.$changedLines.lastRow,j=(this.$changedLines=null,this.layerConfig);if(!(q>j.lastRow+1||ee<j.firstRow)){if(ee!==1/0)return this.$textLayer.updateLines(j,q,ee),!0;this.$showGutter&&this.$gutterLayer.update(j),this.$textLayer.update(j)}}},this.$getLongestLine=function(){var q=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(q+=1),this.$textLayer&&q>this.$textLayer.MAX_LINE_LENGTH&&(q=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(q*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(q,ee){this.$gutterLayer.addGutterDecoration(q,ee)},this.removeGutterDecoration=function(q,ee){this.$gutterLayer.removeGutterDecoration(q,ee)},this.updateBreakpoints=function(q){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(q){this.$gutterLayer.setAnnotations(q),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(q,ee,j){this.scrollCursorIntoView(q,j),this.scrollCursorIntoView(ee,j)},this.scrollCursorIntoView=function(q,ee,j){var D,N,re;0!==this.$size.scrollerHeight&&(D=(q=this.$cursorLayer.getPixelPosition(q)).left,q=q.top,N=j&&j.top||0,j=j&&j.bottom||0,this.$scrollAnimation&&(this.$stopAnimation=!0),q<(re=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop)+N?(ee&&re+N>q+this.lineHeight&&(q-=ee*this.$size.scrollerHeight),0===q&&(q=-this.scrollMargin.top),this.session.setScrollTop(q)):re+this.$size.scrollerHeight-j<q+this.lineHeight&&(ee&&re+this.$size.scrollerHeight-j<q-this.lineHeight&&(q+=ee*this.$size.scrollerHeight),this.session.setScrollTop(q+this.lineHeight+j-this.$size.scrollerHeight)),D-(re=2*this.layerConfig.characterWidth)<(N=this.scrollLeft)?((D-=re)<this.$padding+re&&(D=-this.scrollMargin.left),this.session.setScrollLeft(D)):N+this.$size.scrollerWidth<(D+=re)+this.characterWidth?this.session.setScrollLeft(Math.round(D+this.characterWidth-this.$size.scrollerWidth)):N<=this.$padding&&D-N<this.characterWidth&&this.session.setScrollLeft(0))},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(q){this.session.setScrollTop(q*this.lineHeight)},this.alignCursor=function(D,ee){return D=this.$cursorLayer.getPixelPosition(D="number"==typeof D?{row:D,column:0}:D),this.session.setScrollTop(D=D.top-(this.$size.scrollerHeight-this.lineHeight)*(ee||0)),D},this.STEPS=8,this.$calcSteps=function(q,ee){var D,ue=0,N=this.STEPS,re=[];for(ue=0;ue<N;++ue)re.push((ee-(D=q))*(Math.pow(ue/this.STEPS-1,3)+1)+D);return re},this.scrollToLine=function(q,ee,j,D){q=this.$cursorLayer.getPixelPosition({row:q,column:0}).top,ee&&(q-=this.$size.scrollerHeight/2),ee=this.scrollTop,this.session.setScrollTop(q),!1!==j&&this.animateScrolling(ee,D)},this.animateScrolling=function(q,ee){var j=this.scrollTop;if(this.$animatedScroll){var D=this;if(q!=j){if(this.$scrollAnimation){var N=this.$scrollAnimation.steps;if(N.length&&(q=N[0])==j)return}var re=D.$calcSteps(q,j);this.$scrollAnimation={from:q,to:j,steps:re},clearInterval(this.$timer),D.session.setScrollTop(re.shift()),D.session.$scrollTop=j,this.$timer=setInterval(function(){if(!D.$stopAnimation)return D.session?void(re.length?(D.session.setScrollTop(re.shift()),D.session.$scrollTop=j):null!=j?(D.session.$scrollTop=-1,D.session.setScrollTop(j),j=null):ue()):clearInterval(D.$timer);ue()},10)}}function ue(){D.$timer=clearInterval(D.$timer),D.$scrollAnimation=null,D.$stopAnimation=!1,ee&&ee()}},this.scrollToY=function(q){this.scrollTop!==q&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=q)},this.scrollToX=function(q){this.scrollLeft!==q&&(this.scrollLeft=q),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(q,ee){this.session.setScrollTop(ee),this.session.setScrollLeft(q)},this.scrollBy=function(q,ee){ee&&this.session.setScrollTop(this.session.getScrollTop()+ee),q&&this.session.setScrollLeft(this.session.getScrollLeft()+q)},this.isScrollableBy=function(q,ee){return ee<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||0<ee&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||q<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||0<q&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0},this.pixelToScreenCoordinates=function(D,N){this.$hasCssTransforms?(re={top:0,left:0},D=(j=this.$fontMetrics.transformCoordinates([D,N]))[1]-this.gutterWidth-this.margin.left,N=j[0]):re=this.scroller.getBoundingClientRect();var j=D+this.scrollLeft-re.left-this.$padding,re=(D=j/this.characterWidth,N=Math.floor((N+this.scrollTop-re.top)/this.lineHeight),this.$blockCursor?Math.floor(D):Math.round(D));return{row:N,column:re,side:0<D-re?1:-1,offsetX:j}},this.screenToTextCoordinates=function(N,re){this.$hasCssTransforms?(j={top:0,left:0},N=(D=this.$fontMetrics.transformCoordinates([N,re]))[1]-this.gutterWidth-this.margin.left,re=D[0]):j=this.scroller.getBoundingClientRect();var j,D=N+this.scrollLeft-j.left-this.$padding;return N=D/this.characterWidth,N=this.$blockCursor?Math.floor(N):Math.round(N),re=Math.floor((re+this.scrollTop-j.top)/this.lineHeight),this.session.screenToDocumentPosition(re,Math.max(N,0),D)},this.textToScreenCoordinates=function(D,N){var j=this.scroller.getBoundingClientRect();return N=this.session.documentToScreenPosition(D,N),D=this.$padding+(this.session.$bidiHandler.isBidiRow(N.row,D)?this.session.$bidiHandler.getPosLeft(N.column):Math.round(N.column*this.characterWidth)),{pageX:j.left+D-this.scrollLeft,pageY:j.top+(N=N.row*this.lineHeight)-this.scrollTop}},this.visualizeFocus=function(){y.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){y.removeCssClass(this.container,"ace_focus")},this.showComposition=function(q){(this.$composition=q).cssText||(q.cssText=this.textarea.style.cssText),null==q.useTextareaForIME&&(q.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(y.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):q.markerId=this.session.addMarker(q.markerRange,"ace_composition_marker","text")},this.setCompositionText=function(q){var ee=this.session.selection.cursor;this.addToken(q,"composition_placeholder",ee.row,ee.column),this.$moveTextAreaToCursor()},this.hideComposition=function(){var q;this.$composition&&(this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),y.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText,this.removeExtraToken((q=this.session.selection.cursor).row,q.column),this.$composition=null,this.$cursorLayer.element.style.display="")},this.setGhostText=function(q,j){var D=this.session.selection.cursor;j=j||{row:D.row,column:D.column},this.removeGhostText(),D=q.split("\n"),this.addToken(D[0],"ghost_text",j.row,j.column),this.$ghostText={text:q,position:{row:j.row,column:j.column}},1<D.length&&(this.$ghostTextWidget={text:D.slice(1).join("\n"),row:j.row,column:j.column,className:"ace_ghost_text"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget))},this.removeGhostText=function(){var q;this.$ghostText&&(this.removeExtraToken((q=this.$ghostText.position).row,q.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null)},this.addToken=function(q,ee,j,D){var N=this.session,re=(N.bgTokenizer.lines[j]=null,{type:ee,value:q}),ue=N.getTokens(j);if(null==D)ue.push(re);else for(var ve=0,Ae=0;Ae<ue.length;Ae++){var Te=ue[Ae];if(D<=(ve+=Te.value.length)){var Re=Te.value.slice(0,Me=Te.value.length-(ve-D)),Me=Te.value.slice(Me);ue.splice(Ae,1,{type:Te.type,value:Re},re,{type:Te.type,value:Me});break}}this.updateLines(j,j)},this.removeExtraToken=function(q,ee){this.updateLines(q,q)},this.setTheme=function(q,ee){var D=this;function N(re){if(D.$themeId!=q)return ee&&ee();if(!re||!re.cssClass)throw new Error("couldn't load module "+q+" or it didn't call define");re.$id&&(D.$themeId=re.$id),y.importCssString(re.cssText,re.cssClass,D.container),D.theme&&y.removeCssClass(D.container,D.theme.cssClass);var ue="padding"in re?re.padding:"padding"in(D.theme||{})?4:D.$padding;D.$padding&&ue!=D.$padding&&D.setPadding(ue),D.$theme=re.cssClass,D.theme=re,y.addCssClass(D.container,re.cssClass),y.setCssClass(D.container,"ace_dark",re.isDark),D.$size&&(D.$size.width=0,D.$updateSizeAsync()),D._dispatchEvent("themeLoaded",{theme:re}),ee&&ee()}this.$themeId=q,D._dispatchEvent("themeChange",{theme:q}),q&&"string"!=typeof q?N(q):w.loadModule(["theme",q||this.$options.theme.initialValue],N)},this.getTheme=function(){return this.$themeId},this.setStyle=function(q,ee){y.setCssClass(this.container,q,!1!==ee)},this.unsetStyle=function(q){y.removeCssClass(this.container,q)},this.setCursorStyle=function(q){y.setStyle(this.scroller.style,"cursor",q)},this.setMouseCursor=function(q){y.setStyle(this.scroller.style,"cursor",q)},this.attachToShadowRoot=function(){y.importCssString(T,"ace_editor.css",this.container)},this.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent=""},this.$updateCustomScrollbar=function(q){var ee=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,!0===q?(this.scrollBarV=new x(this.container,this),this.scrollBarH=new C(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(j){ee.$scrollAnimation||ee.session.setScrollTop(j.data-ee.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(j){ee.$scrollAnimation||ee.session.setScrollLeft(j.data-ee.scrollMargin.left)}),this.$scrollDecorator=new V(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new O(this.container,this),this.scrollBarH=new v(this.container,this),this.scrollBarV.addEventListener("scroll",function(j){ee.$scrollAnimation||ee.session.setScrollTop(j.data-ee.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(j){ee.$scrollAnimation||ee.session.setScrollLeft(j.data-ee.scrollMargin.left)}))}}.call(R.prototype),w.defineOptions(R.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(q){this.$textLayer.setShowInvisibles(q)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(q){"number"==typeof q&&(this.$printMarginColumn=q),this.$showPrintMargin=!!q,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(q){this.$gutter.style.display=q?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(q){y.setCssClass(this.$gutter,"ace_fade-fold-widgets",q)},initialValue:!1},showFoldWidgets:{set:function(q){this.$gutterLayer.setShowFoldWidgets(q),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(q){this.$textLayer.setDisplayIndentGuides(q)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(q){1==this.$textLayer.setHighlightIndentGuides(q)?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(q){this.$gutterLayer.setHighlightGutterLine(q),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(q){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(q){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(q){"number"==typeof q&&(q+="px"),this.container.style.fontSize=q,this.updateFontSize()},initialValue:12},fontFamily:{set:function(q){this.container.style.fontFamily=q,this.updateFontSize()}},maxLines:{set:function(q){this.updateFull()}},minLines:{set:function(q){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(q){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(q){this.$scrollPastEnd!=(q=+q||0)&&(this.$scrollPastEnd=q,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(q){this.$gutterLayer.$fixedWidth=!!q,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(q){this.$updateCustomScrollbar(q)},initialValue:!1},theme:{set:function(q){this.setTheme(q)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!J.isMobile&&!J.isIE}}),_.VirtualRenderer=R}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(k,_,M){"use strict";var R=k("../lib/oop"),S=k("../lib/net"),y=k("../lib/event_emitter").EventEmitter,w=k("../config");function p(m){var h;return typeof Worker>"u"?{postMessage:function(){},terminate:function(){}}:w.get("loadWorkerFromBlob")?(h=function(v){v="importScripts('"+S.qualifyURL(v)+"');";try{return new Blob([v],{type:"application/javascript"})}catch{var O=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);return O.append(v),O.getBlob("application/javascript")}}(m),h=(window.URL||window.webkitURL).createObjectURL(h),new Worker(h)):new Worker(m)}function f(m){m.postMessage||(m=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=m,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage}(function(){R.implement(this,y),this.$createWorkerFromOldConfig=function(m,h,v,O,C){var x,L;return k.nameToUrl&&!k.toUrl&&(k.toUrl=k.nameToUrl),w.get("packaged")||!k.toUrl?O=O||w.moduleUrl(h,"worker"):(x=this.$normalizePath,O=O||x(k.toUrl("ace/worker/worker.js",null,"_")),L={},m.forEach(function(Q){L[Q]=x(k.toUrl(Q,null,"_").replace(/(\.js)?(\?.*)?$/,""))})),this.$worker=p(O),C&&this.send("importScripts",C),this.$worker.postMessage({init:!0,tlns:L,module:h,classname:v}),this.$worker},this.onMessage=function(m){var h=m.data;switch(h.type){case"event":this._signal(h.name,{data:h.data});break;case"call":var v=this.callbacks[h.id];v&&(v(h.data),delete this.callbacks[h.id]);break;case"error":this.reportError(h.data);break;case"log":window.console&&console.log&&console.log.apply(console,h.data)}},this.reportError=function(m){window.console&&console.error&&console.error(m)},this.$normalizePath=function(m){return S.qualifyURL(m)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(m,h){this.$worker.postMessage({command:m,args:h})},this.call=function(m,h,v){var O;v&&(O=this.callbackId++,this.callbacks[O]=v,h.push(O)),this.send(m,h)},this.emit=function(m,h){try{h.data&&h.data.err&&(h.data.err={message:h.data.err.message,stack:h.data.err.stack,code:h.data.err.code}),this.$worker&&this.$worker.postMessage({event:m,data:{data:h.data}})}catch(v){console.error(v.stack)}},this.attachToDocument=function(m){this.$doc&&this.terminate(),this.$doc=m,this.call("setValue",[m.getValue()]),m.on("change",this.changeListener,!0)},this.changeListener=function(m){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),this.deltaQueue.push(m.start,"insert"==m.action?m.lines:m.end)},this.$sendDeltaQueue=function(){var m=this.deltaQueue;m&&(this.deltaQueue=null,50<m.length&&m.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:m}))}}).call(f.prototype),_.UIWorkerClient=function(m,h,v){var O=null,C=!1,x=Object.create(y),L=[],Q=new f({messageBuffer:L,terminate:function(){},postMessage:function(T){L.push(T),O&&(C?setTimeout(G):G())}}),G=(Q.setEmitSync=function(T){C=T},function(){var T=L.shift();T.command?O[T.command].apply(O,T.args):T.event&&x._signal(T.event,T.data)});return x.postMessage=function(T){Q.onMessage({data:T})},x.callback=function(T,V){this.postMessage({type:"call",id:V,data:T})},x.emit=function(T,V){this.postMessage({type:"event",name:T,data:V})},w.loadModule(["worker",h],function(T){for(O=new T[v](x);L.length;)G()}),Q},_.WorkerClient=f,_.createWorker=p}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(k,_,M){"use strict";function R(p,x,m,h,v,O){var C=this;this.length=x,this.session=p,this.doc=p.getDocument(),this.mainClass=v,this.othersClass=O,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=h,this.$onCursorChange=function(){setTimeout(function(){C.onCursorChange()})},this.$pos=m,x=p.getUndoManager().$undoStack||p.getUndoManager().$undostack||{length:-1},this.$undoStackDepth=x.length,this.setup(),p.selection.on("changeCursor",this.$onCursorChange)}var S=k("./range").Range,y=k("./lib/event_emitter").EventEmitter,w=k("./lib/oop");(function(){w.implement(this,y),this.setup=function(){var p=this,f=this.doc,m=this.session,h=(this.selectionBefore=m.selection.toJSON(),m.selection.inMultiSelectMode&&m.selection.toSingleRange(),this.pos=f.createAnchor(this.$pos.row,this.$pos.column),this.pos);h.$insertRight=!0,h.detach(),h.markerId=m.addMarker(new S(h.row,h.column,h.row,h.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(v){(v=f.createAnchor(v.row,v.column)).$insertRight=!0,v.detach(),p.others.push(v)}),m.setUndoSelect(!1)},this.showOtherMarkers=function(){var p,f;this.othersActive||(p=this.session,(f=this).othersActive=!0,this.others.forEach(function(m){m.markerId=p.addMarker(new S(m.row,m.column,m.row,m.column+f.length),f.othersClass,null,!1)}))},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var p=0;p<this.others.length;p++)this.session.removeMarker(this.others[p].markerId)}},this.onUpdate=function(p){if(this.$updating)return this.updateAnchors(p);var f=p;if(f.start.row===f.end.row&&f.start.row===this.pos.row){this.$updating=!0;var m="insert"===p.action?f.end.column-f.start.column:f.start.column-f.end.column,h=f.start.column>=this.pos.column&&f.start.column<=this.pos.column+this.length+1,v=f.start.column-this.pos.column;if(this.updateAnchors(p),h&&(this.length+=m),h&&!this.session.$fromUndo)if("insert"===p.action)for(var O=this.others.length-1;0<=O;O--){var C={row:(x=this.others[O]).row,column:x.column+v};this.doc.insertMergedLines(C,p.lines)}else if("remove"===p.action)for(O=this.others.length-1;0<=O;O--){var x;C={row:(x=this.others[O]).row,column:x.column+v},this.doc.remove(new S(C.row,C.column,C.row,C.column-m))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(p){this.pos.onChange(p);for(var f=this.others.length;f--;)this.others[f].onChange(p);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var p=this,f=this.session,m=function(v,O){f.removeMarker(v.markerId),v.markerId=f.addMarker(new S(v.row,v.column,v.row,v.column+p.length),O,null,!1)};m(this.pos,this.mainClass);for(var h=this.others.length;h--;)m(this.others[h],this.othersClass)}},this.onCursorChange=function(p){var f;!this.$updating&&this.session&&((f=this.session.selection.getCursor()).row===this.pos.row&&f.column>=this.pos.column&&f.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",p)):(this.hideOtherMarkers(),this._emit("cursorLeave",p)))},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1!==this.$undoStackDepth){for(var p=this.session.getUndoManager(),f=(p.$undoStack||p.$undostack).length-this.$undoStackDepth,m=0;m<f;m++)p.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(R.prototype),_.PlaceHolder=R}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(k,_,M){var R=k("../lib/event"),S=k("../lib/useragent");function y(w,p){return w.row==p.row&&w.column==p.column}_.onMouseDown=function(w){var p=w.domEvent,f=p.altKey,m=p.shiftKey,h=p.ctrlKey,v=w.getAccelKey(),O=w.getButton();if(h&&S.isMac&&(O=p.button),w.editor.inMultiSelectMode&&2==O)w.editor.textInput.onContextMenu(w.domEvent);else if(h||f||v){if(0===O){var C,x,L,Q,G,T,V,J,X=w.editor,q=X.selection,ee=X.inMultiSelectMode,j=w.getDocumentPosition(),D=q.getCursor(),N=(D=w.inSelection()||q.isEmpty()&&y(j,D),w.x),re=w.y,ue=X.session,ve=X.renderer.pixelToScreenCoordinates(N,re),Ae=ve;if(X.$mouseHandler.$enableJumpToDef)h&&f||v&&f?C=m?"block":"add":f&&X.$blockSelectEnabled&&(C="block");else if(v&&!f){if(C="add",!ee&&m)return}else f&&X.$blockSelectEnabled&&(C="block");if(C&&S.isMac&&p.ctrlKey&&X.$mouseHandler.cancelContextMenu(),"add"==C)!ee&&D||(ee||(x=q.toOrientedRange(),X.addSelectionMarker(x)),L=q.rangeList.rangeAtPoint(j),X.inVirtualSelectionMode=!0,m&&(L=null,X.removeSelectionMarker(x=q.ranges[0]||x)),X.once("mouseup",function(){var Te=q.toOrientedRange();L&&Te.isEmpty()&&y(L.cursor,Te.cursor)?q.substractPoint(Te.cursor):(m?q.substractPoint(x.cursor):x&&(X.removeSelectionMarker(x),q.addRange(x)),q.addRange(Te)),X.inVirtualSelectionMode=!1}));else if("block"==C)return w.stop(),X.inVirtualSelectionMode=!0,G=[],T=function(){var Te=X.renderer.pixelToScreenCoordinates(N,re),Re=ue.screenToDocumentPosition(Te.row,Te.column,Te.offsetX);y(Ae,Te)&&y(Re,q.lead)||(Ae=Te,X.selection.moveToPosition(Re),X.renderer.scrollCursorIntoView(),X.removeSelectionMarkers(G),G=q.rectangularRangeBlock(Ae,ve),X.$mouseHandler.$clickSelection&&1==G.length&&G[0].isEmpty()&&(G[0]=X.$mouseHandler.$clickSelection.clone()),G.forEach(X.addSelectionMarker,X),X.updateSelectionMarkers())},ee&&!v?q.toSingleRange():!ee&&v&&(Q=q.toOrientedRange(),X.addSelectionMarker(Q)),m?ve=ue.documentToScreenPosition(q.lead):q.moveToPosition(j),Ae={row:-1,column:-1},V=T,R.capture(X.container,function(Te){N=Te.clientX,re=Te.clientY},function(Te){T(),clearInterval(J),X.removeSelectionMarkers(G),G.length||(G=[q.toOrientedRange()]),Q&&(X.removeSelectionMarker(Q),q.toSingleRange(Q));for(var Re=0;Re<G.length;Re++)q.addRange(G[Re]);X.inVirtualSelectionMode=!1,X.$mouseHandler.$clickSelection=null}),J=setInterval(function(){V()},20),w.preventDefault()}}else 0===O&&w.editor.inMultiSelectMode&&w.editor.exitMultiSelectMode()}}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(k,_,M){_.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(R){R.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(R){R.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(R){R.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(R){R.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(R){R.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(R){R.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(R){R.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(R){R.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split into lines",exec:function(R){1<R.multiSelect.rangeCount?R.multiSelect.joinSelections():R.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(R){R.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(R){R.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(R){R.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],_.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(R){R.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(R){return R&&R.inMultiSelectMode}}],k=k("../keyboard/hash_handler").HashHandler,_.keyboardHandler=new k(_.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(k,_,M){var R=k("./range_list").RangeList,S=k("./range").Range,y=k("./selection").Selection,w=k("./mouse/multi_select_handler").onMouseDown,p=k("./lib/event"),f=k("./lib/lang"),m=k("./commands/multi_select_commands");_.commands=m.defaultCommands.concat(m.multiSelectCommands);var h=new(k("./search").Search),v=k("./edit_session").EditSession;function O(C){var x,L;function Q(G){L&&(x.renderer.setMouseCursor(""),L=!1)}C.$multiselectOnSessionChange||(C.$onAddRange=C.$onAddRange.bind(C),C.$onRemoveRange=C.$onRemoveRange.bind(C),C.$onMultiSelect=C.$onMultiSelect.bind(C),C.$onSingleSelect=C.$onSingleSelect.bind(C),C.$multiselectOnSessionChange=_.onSessionChange.bind(C),C.$checkMultiselectChange=C.$checkMultiselectChange.bind(C),C.$multiselectOnSessionChange(C),C.on("changeSession",C.$multiselectOnSessionChange),C.on("mousedown",w),C.commands.addCommands(m.defaultCommands),(x=C).textInput&&(C=x.textInput.getElement(),L=!1,p.addListener(C,"keydown",function(G){G=18==G.keyCode&&!(G.ctrlKey||G.shiftKey||G.metaKey),x.$blockSelectEnabled&&G?L||(x.renderer.setMouseCursor("crosshair"),L=!0):L&&Q()},x),p.addListener(C,"keyup",Q,x),p.addListener(C,"blur",Q,x)))}(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(v.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(C,x){if(C){if(!this.inMultiSelectMode&&0===this.rangeCount){var L=this.toOrientedRange();if(this.rangeList.add(L),this.rangeList.add(C),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),x||this.fromOrientedRange(C);this.rangeList.removeAll(),this.rangeList.add(L),this.$onAddRange(L)}return C.cursor||(C.cursor=C.end),L=this.rangeList.add(C),this.$onAddRange(C),L.length&&this.$onRemoveRange(L),1<this.rangeCount&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),x||this.fromOrientedRange(C)}},this.toSingleRange=function(C){C=C||this.ranges[0];var x=this.rangeList.removeAll();x.length&&this.$onRemoveRange(x),C&&this.fromOrientedRange(C)},this.substractPoint=function(C){if(C=this.rangeList.substractPoint(C))return this.$onRemoveRange(C),C[0]},this.mergeOverlappingRanges=function(){var C=this.rangeList.merge();C.length&&this.$onRemoveRange(C)},this.$onAddRange=function(C){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(C),this._signal("addRange",{range:C})},this.$onRemoveRange=function(C){var x;this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode&&(x=this.rangeList.ranges.pop(),C.push(x),this.rangeCount=0);for(var L=C.length;L--;){var Q=this.ranges.indexOf(C[L]);this.ranges.splice(Q,1)}this._signal("removeRange",{ranges:C}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(x=x||this.ranges[0])&&!x.isEqual(this.getRange())&&this.fromOrientedRange(x)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new R,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var C=this.ranges.length?this.ranges:[this.getRange()],x=[],L=0;L<C.length;L++){var Q=C[L],G=Q.start.row,T=Q.end.row;if(G===T)x.push(Q.clone());else{for(x.push(new S(G,Q.start.column,G,this.session.getLine(G).length));++G<T;)x.push(this.getLineRange(G,!0));x.push(new S(T,0,T,Q.end.column))}0!=L||this.isBackwards()||(x=x.reverse())}for(this.toSingleRange(),L=x.length;L--;)this.addRange(x[L])},this.joinSelections=function(){var C=(x=this.rangeList.ranges)[x.length-1],x=S.fromPoints(x[0].start,C.end);this.toSingleRange(),this.setSelectionRange(x,C.cursor==C.start)},this.toggleBlockSelection=function(){var C,x;1<this.rangeCount?(x=(C=this.rangeList.ranges)[C.length-1],C=S.fromPoints(C[0].start,x.end),this.toSingleRange(),this.setSelectionRange(C,x.cursor==x.start)):(C=this.session.documentToScreenPosition(this.cursor),x=this.session.documentToScreenPosition(this.anchor),this.rectangularRangeBlock(C,x).forEach(this.addRange,this))},this.rectangularRangeBlock=function(C,x,L){var Q,G,T,V,J,X,q,ee=[],j=C.column<x.column,D=(V=(j?(Q=C.column,G=x.column,T=C.offsetX,x):(Q=x.column,G=C.column,T=x.offsetX,C)).offsetX,C.row<x.row);X=(D?(J=C.row,x):(J=x.row,C)).row,Q<0&&(Q=0),(J=J<0?0:J)==X&&(L=!0);for(var N,re,ue=J;ue<=X;ue++){var ve=S.fromPoints(this.session.screenToDocumentPosition(ue,Q,T),this.session.screenToDocumentPosition(ue,G,V));if(ve.isEmpty()){if(q&&(N=ve.end).row==(re=q).row&&N.column==re.column)break;q=ve.end}ve.cursor=j?ve.start:ve.end,ee.push(ve)}if(D&&ee.reverse(),!L){for(var Ae=ee.length-1;ee[Ae].isEmpty()&&0<Ae;)Ae--;if(0<Ae)for(var Te=0;ee[Te].isEmpty();)Te++;for(var Re=Ae;Te<=Re;Re--)ee[Re].isEmpty()&&ee.splice(Re,1)}return ee}}.call(y.prototype),v=k("./editor").Editor,function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(C){C.cursor||(C.cursor=C.end);var x=this.getSelectionStyle();return C.marker=this.session.addMarker(C,"ace_selection",x),this.session.$selectionMarkers.push(C),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,C},this.removeSelectionMarker=function(C){C.marker&&(this.session.removeMarker(C.marker),-1!=(C=this.session.$selectionMarkers.indexOf(C))&&this.session.$selectionMarkers.splice(C,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length)},this.removeSelectionMarkers=function(C){for(var x=this.session.$selectionMarkers,L=C.length;L--;){var Q=C[L];Q.marker&&(this.session.removeMarker(Q.marker),-1!=(Q=x.indexOf(Q)))&&x.splice(Q,1)}this.session.selectionMarkerCount=x.length},this.$onAddRange=function(C){this.addSelectionMarker(C.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(C){this.removeSelectionMarkers(C.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(C){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(m.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(C){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(m.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(C){var x,L=C.command,Q=C.editor;if(Q.multiSelect)return L.multiSelectAction?x="forEach"==L.multiSelectAction?Q.forEachSelection(L,C.args):"forEachLine"==L.multiSelectAction?Q.forEachSelection(L,C.args,!0):"single"==L.multiSelectAction?(Q.exitMultiSelectMode(),L.exec(Q,C.args||{})):L.multiSelectAction(Q,C.args||{}):(x=L.exec(Q,C.args||{}),Q.multiSelect.addRange(Q.multiSelect.toOrientedRange()),Q.multiSelect.mergeOverlappingRanges()),x},this.forEachSelection=function(C,x,L){if(!this.inVirtualSelectionMode){var Q,X=L&&L.keepOrder,G=1==L||L&&L.$byLines,T=this.session,V=(L=this.selection).rangeList,J=(X?L:V).ranges;if(!J.length)return C.exec?C.exec(this,x||{}):C(this,x||{});X=L._eventRegistry;var q=(L._eventRegistry={},new y(T));this.inVirtualSelectionMode=!0;for(var ee=J.length;ee--;){if(G)for(;0<ee&&J[ee].start.row==J[ee-1].end.row;)ee--;q.fromOrientedRange(J[ee]),q.index=ee,this.selection=T.selection=q;var j=C.exec?C.exec(this,x||{}):C(this,x||{});Q||void 0===j||(Q=j),q.toOrientedRange(J[ee])}return q.detach(),this.selection=T.selection=L,this.inVirtualSelectionMode=!1,L._eventRegistry=X,L.mergeOverlappingRanges(),L.ranges[0]&&L.fromOrientedRange(L.ranges[0]),V=this.renderer.$scrollAnimation,this.onCursorChange(),this.onSelectionChange(),V&&V.from==V.to&&this.renderer.animateScrolling(V.from),Q}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var C="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var x=this.multiSelect.rangeList.ranges,L=[],Q=0;Q<x.length;Q++)L.push(this.session.getTextRange(x[Q]));var G=this.session.getDocument().getNewLineCharacter();(C=L.join(G)).length==(L.length-1)*G.length&&(C="")}else this.selection.isEmpty()||(C=this.session.getTextRange(this.getSelectionRange()));return C},this.$checkMultiselectChange=function(C,x){var L;this.inMultiSelectMode&&!this.inVirtualSelectionMode&&(L=this.multiSelect.ranges[0],this.multiSelect.isEmpty()&&x==this.multiSelect.anchor||((L=x==this.multiSelect.anchor?L.cursor==L.start?L.end:L.start:L.cursor).row!=x.row||this.session.$clipPositionToDocument(L.row,L.column).column!=x.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()))},this.findAll=function(C,x,L){(x=x||{}).needle=C||x.needle,null==x.needle&&(Q=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange(),x.needle=this.session.getTextRange(Q)),this.$search.set(x);var Q,G=this.$search.findAll(this.session);if(!G.length)return 0;var T=this.multiSelect;L||T.toSingleRange(G[0]);for(var V=G.length;V--;)T.addRange(G[V],!0);return Q&&T.rangeList.rangeAtPoint(Q.start)&&T.addRange(Q,!0),G.length},this.selectMoreLines=function(C,x){var L,Q,G,T=this.selection.toOrientedRange(),V=T.cursor==T.end,J=this.session.documentToScreenPosition(T.cursor),X=(this.selection.$desiredColumn&&(J.column=this.selection.$desiredColumn),this.session.screenToDocumentPosition(J.row+C,J.column));C=T.isEmpty()?X:(L=this.session.documentToScreenPosition(V?T.end:T.start),this.session.screenToDocumentPosition(L.row+C,L.column)),V?(Q=S.fromPoints(X,C)).cursor=Q.start:(Q=S.fromPoints(C,X)).cursor=Q.end,Q.desiredColumn=J.column,this.selection.inMultiSelectMode?x&&(G=T.cursor):this.selection.addRange(T),this.selection.addRange(Q),G&&this.selection.substractPoint(G)},this.transposeSelections=function(C){for(var x=this.session,L=x.multiSelect,Q=L.ranges,G=Q.length;G--;)(V=Q[G]).isEmpty()&&(J=x.getWordRange(V.start.row,V.start.column),V.start.row=J.start.row,V.start.column=J.start.column,V.end.row=J.end.row,V.end.column=J.end.column);L.mergeOverlappingRanges();var T=[];for(G=Q.length;G--;){var V=Q[G];T.unshift(x.getTextRange(V))}for(C<0?T.unshift(T.pop()):T.push(T.shift()),G=Q.length;G--;){var J=(V=Q[G]).clone();x.replace(V,T[G]),V.start.row=J.start.row,V.start.column=J.start.column}L.fromOrientedRange(L.ranges[0])},this.selectMore=function(C,x,L){var Q,G=this.session,T=G.multiSelect.toOrientedRange();T.isEmpty()&&((T=G.getWordRange(T.start.row,T.start.column)).cursor=-1==C?T.start:T.end,this.multiSelect.addRange(T),L)||(L=G.getTextRange(T),Q=C,h.$options.wrap=!0,h.$options.needle=L,h.$options.backwards=-1==Q,(L=h.find(G))&&(L.cursor=-1==C?L.start:L.end,this.session.unfold(L),this.multiSelect.addRange(L),this.renderer.scrollCursorIntoView(null,.5)),x&&this.multiSelect.substractPoint(T.cursor))},this.alignCursors=function(){var C=this.session,x=C.multiSelect,Q=-1,G=(L=x.ranges).filter(function(N){if(N.cursor.row==Q)return!0;Q=N.cursor.row});if(L.length&&G.length!=L.length-1){G.forEach(function(N){x.substractPoint(N.cursor)});var T=0,V=1/0,J=L.map(function(re){var ue=C.getLine((re=re.cursor).row).substr(re.column).search(/\S/g);return re.column>T&&(T=re.column),(ue=-1==ue?0:ue)<V&&(V=ue),ue});L.forEach(function(N,Ae){var ue=N.cursor,ve=T-ue.column;(Ae=J[Ae]-V)<ve?C.insert(ue,f.stringRepeat(" ",ve-Ae)):C.remove(new S(ue.row,ue.column,ue.row,ue.column-ve+Ae)),N.start.column=N.end.column=T,N.start.row=N.end.row=ue.row,N.cursor=N.end}),x.fromOrientedRange(L[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var L,X=(G=this.selection.getRange()).start.row,q=G.end.row;if(L=X==q){for(var ee,j=this.session.getLength();ee=this.session.getLine(q),/[=:]/.test(ee)&&++q<j;);for(;ee=this.session.getLine(X),/[=:]/.test(ee)&&0<--X;);X<0&&(X=0),j<=q&&(q=j-1)}var D=this.session.removeFullLines(X,q);D=this.$reAlignText(D,L),this.session.insert({row:X,column:0},D.join("\n")+"\n"),L||(G.start.column=0,G.end.column=D[D.length-1].length),this.selection.setRange(G)}},this.$reAlignText=function(C,x){var L,Q,G,T=!0,V=!0;return C.map(function(q){var ee=q.match(/(\s*)(.*?)(\s*)([=:].*)/);return ee?(null==L?(L=ee[1].length,Q=ee[2].length,G=ee[3].length):(L+Q+G!=ee[1].length+ee[2].length+ee[3].length&&(V=!1),L!=ee[1].length&&(T=!1),L>ee[1].length&&(L=ee[1].length),Q<ee[2].length&&(Q=ee[2].length),G>ee[3].length&&(G=ee[3].length)),ee):[q]}).map(x?X:T?V?function(q){return q[2]?J(L+Q-q[2].length)+q[2]+J(G)+q[4].replace(/^([=:])\s+/,"$1 "):q[0]}:X:function(q){return q[2]?J(L)+q[2]+J(G)+q[4].replace(/^([=:])\s+/,"$1 "):q[0]});function J(q){return f.stringRepeat(" ",q)}function X(q){return q[2]?J(L)+q[2]+J(Q-q[2].length+G)+q[4].replace(/^([=:])\s+/,"$1 "):q[0]}}}.call(v.prototype),_.onSessionChange=function(L){var x=L.session;x&&!x.multiSelect&&(x.$selectionMarkers=[],x.selection.$initRangeList(),x.multiSelect=x.selection),this.multiSelect=x&&x.multiSelect,(L=L.oldSession)&&(L.multiSelect.off("addRange",this.$onAddRange),L.multiSelect.off("removeRange",this.$onRemoveRange),L.multiSelect.off("multiSelect",this.$onMultiSelect),L.multiSelect.off("singleSelect",this.$onSingleSelect),L.multiSelect.lead.off("change",this.$checkMultiselectChange),L.multiSelect.anchor.off("change",this.$checkMultiselectChange)),x&&(x.multiSelect.on("addRange",this.$onAddRange),x.multiSelect.on("removeRange",this.$onRemoveRange),x.multiSelect.on("multiSelect",this.$onMultiSelect),x.multiSelect.on("singleSelect",this.$onSingleSelect),x.multiSelect.lead.on("change",this.$checkMultiselectChange),x.multiSelect.anchor.on("change",this.$checkMultiselectChange)),x&&this.inMultiSelectMode!=x.selection.inMultiSelectMode&&(x.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},_.MultiSelect=O,k("./config").defineOptions(v.prototype,"editor",{enableMultiselect:{set:function(C){O(this),C?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",w)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",w))},value:!0},enableBlockSelect:{set:function(C){this.$blockSelectEnabled=C},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(S,_,M){"use strict";var R=S("../../range").Range;S=_.FoldMode=function(){},function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(y,w,p){return y=y.getLine(p),this.foldingStartMarker.test(y)?"start":"markbeginend"==w&&this.foldingStopMarker&&this.foldingStopMarker.test(y)?"end":""},this.getFoldWidgetRange=function(y,w,p){return null},this.indentationBlock=function(y,w,p){var f=/\S/,h=(m=y.getLine(w)).search(f);if(-1!=h){p=p||m.length;for(var v,O=y.getLength(),m=w,C=w;++w<O;){var x=y.getLine(w).search(f);if(-1!=x){if(x<=h&&(!(x=y.getTokenAt(w,0))||"string"!==x.type))break;C=w}}return m<C?(v=y.getLine(C).length,new R(m,p,C,v)):void 0}},this.openingBracketBlock=function(y,w,p,f,m){if(f=y.$findClosingBracket(w,p={row:p,column:f+1},m))return"start"==(w=null==(w=y.foldWidgets[f.row])?y.getFoldWidget(f.row):w)&&f.row>p.row&&(f.row--,f.column=y.getLine(f.row).length),R.fromPoints(p,f)},this.closingBracketBlock=function(y,w,p,f,m){if(f=y.$findOpeningBracket(w,p={row:p,column:f}))return f.column++,p.column--,R.fromPoints(f,p)}}.call(S.prototype)}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(k,_,M){"use strict";var R=k("../line_widgets").LineWidgets,S=k("../lib/dom"),y=k("../range").Range;_.showErrorMarker=function(p,L){var m,h=p.session,v=(h.widgetManager||(h.widgetManager=new R(h),h.widgetManager.attach(p)),p.getCursorPosition());if((Q=h.widgetManager.getWidgetsAtRow(x=v.row).filter(function(G){return"errorMarker"==G.type})[0])?Q.destroy():x-=L,x=function w(p,f,m){var h=p.getAnnotations().sort(y.comparePoints);if(h.length){var v=function(x,L,Q){for(var G=0,T=x.length-1;G<=T;){var V=G+T>>1,J=Q(L,x[V]);if(0<J)G=1+V;else{if(!(J<0))return V;T=V-1}}return-(G+1)}(h,{row:f,column:-1},y.comparePoints),O=((v=v<0?-v-1:v)>=h.length?v=0<m?0:h.length-1:0===v&&m<0&&(v=h.length-1),h[v]);if(O&&m){if(O.row===f){for(;(O=h[v+=m])&&O.row===f;);if(!O)return h.slice()}var C=[];for(f=O.row;C[m<0?"unshift":"push"](O),(O=h[v+=m])&&O.row==f;);return C.length&&C}}}(h,x,L))v.column=((L=x[0]).pos&&"number"!=typeof L.column?L.pos.sc:L.column)||0,v.row=L.row,m=p.renderer.$gutterLayer.$annotations[v.row];else{if(Q)return;m={text:["Looks good!"],className:"ace_ok"}}function O(G,T,V){if(0===T&&("esc"===V||"return"===V))return C.destroy(),{command:"null"}}p.session.unfold(v.row),p.selection.moveToPosition(v);var C={row:v.row,fixedWidth:!0,coverGutter:!0,el:S.createElement("div"),type:"errorMarker"},x=C.el.appendChild(S.createElement("div")),Q=((L=C.el.appendChild(S.createElement("div"))).className="error_widget_arrow "+m.className,p.renderer.$cursorLayer.getPixelPosition(v).left);L.style.left=Q+p.renderer.gutterWidth-5+"px",C.el.className="error_widget_wrapper",x.className="error_widget "+m.className,x.innerHTML=m.text.join("<br>"),x.appendChild(S.createElement("div")),C.destroy=function(){p.$mouseHandler.isMousePressed||(p.keyBinding.removeKeyboardHandler(O),h.widgetManager.removeLineWidget(C),p.off("changeSelection",C.destroy),p.off("changeSession",C.destroy),p.off("mouseup",C.destroy),p.off("change",C.destroy))},p.keyBinding.addKeyboardHandler(O),p.on("changeSelection",C.destroy),p.on("changeSession",C.destroy),p.on("mouseup",C.destroy),p.on("change",C.destroy),p.session.widgetManager.addLineWidget(C),C.el.onmousedown=p.focus.bind(p),p.renderer.scrollCursorIntoView(null,.5,{bottom:C.el.offsetHeight})},S.importCssString("\n    .error_widget_wrapper {\n        background: inherit;\n        color: inherit;\n        border:none\n    }\n    .error_widget {\n        border-top: solid 2px;\n        border-bottom: solid 2px;\n        margin: 5px 0;\n        padding: 10px 40px;\n        white-space: pre-wrap;\n    }\n    .error_widget.ace_error, .error_widget_arrow.ace_error{\n        border-color: #ff5a5a\n    }\n    .error_widget.ace_warning, .error_widget_arrow.ace_warning{\n        border-color: #F1D817\n    }\n    .error_widget.ace_info, .error_widget_arrow.ace_info{\n        border-color: #5a5a5a\n    }\n    .error_widget.ace_ok, .error_widget_arrow.ace_ok{\n        border-color: #5aaa5a\n    }\n    .error_widget_arrow {\n        position: absolute;\n        border: solid 5px;\n        border-top-color: transparent!important;\n        border-right-color: transparent!important;\n        border-left-color: transparent!important;\n        top: -5px;\n    }\n","error_marker.css",!1)}),ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(k,_,M){"use strict";k("./loader_build")(_);var R=k("./lib/dom"),S=k("./lib/event"),y=k("./range").Range,w=k("./editor").Editor,p=k("./edit_session").EditSession,f=k("./undomanager").UndoManager,m=k("./virtual_renderer").VirtualRenderer;k("./worker/worker_client"),k("./keyboard/hash_handler"),k("./placeholder"),k("./multi_select"),k("./mode/folding/fold_mode"),k("./theme/textmate"),k("./ext/error_marker"),_.config=k("./config"),_.edit=function(h,v){if("string"==typeof h){var O=h;if(!(h=document.getElementById(O)))throw new Error("ace.edit can't find div #"+O)}var C,x;return h&&h.env&&h.env.editor instanceof w?h.env.editor:(O="",h&&/input|textarea/i.test(h.tagName)?(O=(C=h).value,h=R.createElement("pre"),C.parentNode.replaceChild(h,C)):h&&(O=h.textContent,h.innerHTML=""),O=_.createEditSession(O),h=new w(new m(h),O,v),x={document:O,editor:h,onResize:h.resize.bind(h,null)},C&&(x.textarea=C),S.addListener(window,"resize",x.onResize),h.on("destroy",function(){S.removeListener(window,"resize",x.onResize),x.editor.container.env=null}),h.container.env=h.env=x,h)},_.createEditSession=function(h,v){return(h=new p(h,v)).setUndoManager(new f),h},_.Range=y,_.Editor=w,_.EditSession=p,_.UndoManager=f,_.VirtualRenderer=m,_.version=_.config.version}),ace.require(["ace/ace"],function(k){for(var _ in k&&(k.config.init(!0),k.define=ace.define),window.ace||(window.ace=k),k)k.hasOwnProperty(_)&&(window.ace[_]=k[_]);window.ace.default=window.ace,Ce&&(Ce.exports=window.ace)})},4317:function(Ce,P,ae){Ce=ae.nmd(Ce),ace.define("ace/snippets",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/range_list","ace/keyboard/hash_handler","ace/tokenizer","ace/clipboard","ace/editor"],function(ce,c,K){"use strict";var m=ce("./lib/dom"),U=ce("./lib/oop"),Z=ce("./lib/event_emitter").EventEmitter,Y=ce("./lib/lang"),H=ce("./range").Range,F=ce("./range_list").RangeList,k=ce("./keyboard/hash_handler").HashHandler,_=ce("./tokenizer").Tokenizer,M=ce("./clipboard"),R={CURRENT_WORD:function(h){return h.session.getTextRange(h.session.getWordRange())},SELECTION:function(h,v,O){return h=h.session.getTextRange(),O?h.replace(/\n\r?([ \t]*\S)/g,"\n"+O+"$1"):h},CURRENT_LINE:function(h){return h.session.getLine(h.getCursorPosition().row)},PREV_LINE:function(h){return h.session.getLine(h.getCursorPosition().row-1)},LINE_INDEX:function(h){return h.getCursorPosition().row},LINE_NUMBER:function(h){return h.getCursorPosition().row+1},SOFT_TABS:function(h){return h.session.getUseSoftTabs()?"YES":"NO"},TAB_SIZE:function(h){return h.session.getTabSize()},CLIPBOARD:function(h){return M.getText&&M.getText()},FILENAME:function(h){return/[^/\\]*$/.exec(this.FILEPATH(h))[0]},FILENAME_BASE:function(h){return/[^/\\]*$/.exec(this.FILEPATH(h))[0].replace(/\.[^.]*$/,"")},DIRECTORY:function(h){return this.FILEPATH(h).replace(/[^/\\]*$/,"")},FILEPATH:function(h){return"/not implemented.txt"},WORKSPACE_NAME:function(){return"Unknown"},FULLNAME:function(){return"Unknown"},BLOCK_COMMENT_START:function(h){return(h=h.session.$mode||{}).blockComment&&h.blockComment.start||""},BLOCK_COMMENT_END:function(h){return(h=h.session.$mode||{}).blockComment&&h.blockComment.end||""},LINE_COMMENT:function(h){return(h.session.$mode||{}).lineCommentStart||""},CURRENT_YEAR:S.bind(null,{year:"numeric"}),CURRENT_YEAR_SHORT:S.bind(null,{year:"2-digit"}),CURRENT_MONTH:S.bind(null,{month:"numeric"}),CURRENT_MONTH_NAME:S.bind(null,{month:"long"}),CURRENT_MONTH_NAME_SHORT:S.bind(null,{month:"short"}),CURRENT_DATE:S.bind(null,{day:"2-digit"}),CURRENT_DAY_NAME:S.bind(null,{weekday:"long"}),CURRENT_DAY_NAME_SHORT:S.bind(null,{weekday:"short"}),CURRENT_HOUR:S.bind(null,{hour:"2-digit",hour12:!1}),CURRENT_MINUTE:S.bind(null,{minute:"2-digit"}),CURRENT_SECOND:S.bind(null,{second:"2-digit"})};function S(h){return 1==(h=(new Date).toLocaleString("en-us",h)).length?"0"+h:h}function y(){this.snippetMap={},this.snippetNameMap={}}R.SELECTED_TEXT=R.SELECTION,function(){U.implement(this,Z),this.getTokenizer=function(){return y.$tokenizer||this.createTokenizer()},this.createTokenizer=function(){function h(C){return C=C.substr(1),/^\d+$/.test(C)?[{tabstopId:parseInt(C,10)}]:[{text:C}]}function v(C){return"(?:[^\\\\"+C+"]|\\\\.)"}var O={regex:"/("+v("/")+"+)/",onMatch:function(C,x,L){return(L=L[0]).fmtString=!0,L.guard=C.slice(1,-1),L.flag=""},next:"formatString"};return y.$tokenizer=new _({start:[{regex:/\\./,onMatch:function(C,x,L){var Q=C[1];return[C="}"==Q&&L.length||-1!="`$\\".indexOf(Q)?Q:C]}},{regex:/}/,onMatch:function(C,x,L){return[L.length?L.shift():C]}},{regex:/\$(?:\d+|\w+)/,onMatch:h},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(C,x,L){return C=h(C.substr(1)),L.unshift(C[0]),C},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+v("\\|")+"*\\|",onMatch:function(C,x,L){return C=C.slice(1,-1).replace(/\\[,|\\]|,/g,function(Q){return 2==Q.length?Q[1]:"\0"}).split("\0").map(function(Q){return{value:Q}}),[(L[0].choices=C)[0]]},next:"start"},O,{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:/:/,onMatch:function(C,x,L){return L.length&&L[0].expectElse?(L[0].expectElse=!1,L[0].ifEnd={elseEnd:L[0]},[L[0].ifEnd]):":"}},{regex:/\\./,onMatch:function(C,x,L){var Q=C[1];return"}"==Q&&L.length||-1!="`$\\".indexOf(Q)?C=Q:"n"==Q?C="\n":"t"==Q?C="\t":-1!="ulULE".indexOf(Q)&&(C={changeCase:Q,local:"a"<Q}),[C]}},{regex:"/\\w*}",onMatch:function(C,x,L){return(L=L.shift())&&(L.flag=C.slice(1,-1)),this.next=L&&L.tabstopId?"start":"",[L||C]},next:"start"},{regex:/\$(?:\d+|\w+)/,onMatch:function(C,x,L){return[{text:C.slice(1)}]}},{regex:/\${\w+/,onMatch:function(C,x,L){return C={text:C.slice(2)},L.unshift(C),[C]},next:"formatStringVar"},{regex:/\n/,token:"newline",merge:!1},{regex:/}/,onMatch:function(C,x,L){return L=L.shift(),this.next=L&&L.tabstopId?"start":"",[L||C]},next:"start"}],formatStringVar:[{regex:/:\/\w+}/,onMatch:function(C,x,L){return L[0].formatFunction=C.slice(2,-1),[L.shift()]},next:"formatString"},O,{regex:/:[\?\-+]?/,onMatch:function(C,x,L){"+"==C[1]&&(L[0].ifEnd=L[0]),"?"==C[1]&&(L[0].expectElse=!0)},next:"formatString"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"formatString"}]})},this.tokenizeTmSnippet=function(h,v){return this.getTokenizer().getLineTokens(h,v).tokens.map(function(O){return O.value||O})},this.getVariableValue=function(h,v,O){var C;return/^\d+$/.test(v)?(this.variables.__||{})[v]||"":/^[A-Z]\d+$/.test(v)?(this.variables[v[0]+"__"]||{})[v.substr(1)]||"":(v=v.replace(/^TM_/,""),this.variables.hasOwnProperty(v)&&null!=(C="function"==typeof(C=this.variables[v])?this.variables[v](h,v,O):C)?C:"")},this.variables=R,this.tmStrFormat=function(h,v,O){var x,L,Q;return v.fmt?(x=v.guard,x=new RegExp(x,(v.flag||"").replace(/[^gim]/g,"")),L="string"==typeof v.fmt?this.tokenizeTmSnippet(v.fmt,"formatString"):v.fmt,Q=this,h.replace(x,function(){for(var G=Q.variables.__,T=(Q.variables.__=[].slice.call(arguments),Q.resolveVariables(L,O)),V="E",J=0;J<T.length;J++){var X,q=T[J];"object"==typeof q?(T[J]="",q.changeCase&&q.local?(X=T[J+1])&&"string"==typeof X&&(T[J]="u"==q.changeCase?X[0].toUpperCase():X[0].toLowerCase(),T[J+1]=X.substr(1)):q.changeCase&&(V=q.changeCase)):"U"==V?T[J]=q.toUpperCase():"L"==V&&(T[J]=q.toLowerCase())}return Q.variables.__=G,T.join("")})):h},this.tmFormatFunction=function(h,v,O){return"upcase"==v.formatFunction?h.toUpperCase():"downcase"==v.formatFunction?h.toLowerCase():h},this.resolveVariables=function(h,v){for(var O=[],C="",x=!0,L=0;L<h.length;L++){var Q,G=h[L];"string"==typeof G?(O.push(G),"\n"==G?(x=!0,C=""):x&&(C=/^\t*/.exec(G)[0],x=/\S/.test(G))):G&&(x=!1,G.fmtString&&(-1==(Q=h.indexOf(G,L+1))&&(Q=h.length),G.fmt=h.slice(L+1,Q),L=Q),G.text?(Q=this.getVariableValue(v,G.text,C)+"",G.fmtString&&(Q=this.tmStrFormat(Q,G,v)),(Q=G.formatFunction?this.tmFormatFunction(Q,G,v):Q)&&!G.ifEnd?(O.push(Q),T(G)):!Q&&G.ifEnd&&T(G.ifEnd)):G.elseEnd?T(G.elseEnd):null==G.tabstopId&&null==G.changeCase||O.push(G))}function T(V){-1!=(V=h.indexOf(V,L+1))&&(L=V)}return O},this.insertSnippetForSelection=function(h,re){for(var N=h.getCursorPosition(),D=h.session.getLine(N.row),O=h.session.getTabString(),C=D.match(/^\s*/)[0],x=(N.column<C.length&&(C=C.slice(0,N.column)),re=re.replace(/\r/g,""),this.tokenizeTmSnippet(re)),L=(x=(x=this.resolveVariables(x,h)).map(function(ve){return"\n"==ve?ve+C:"string"==typeof ve?ve.replace(/\t/g,O):ve}),[]),Q=(x.forEach(function(ve,Ae){var Te,Re,Me;"object"==typeof ve&&((Te=L[Me=ve.tabstopId])||((Te=L[Me]=[]).index=Me,Te.value="",Te.parents={}),-1===Te.indexOf(ve))&&(ve.choices&&!Te.choices&&(Te.choices=ve.choices),Te.push(ve),-1!==(Re=x.indexOf(ve,Ae+1)))&&((Me=x.slice(Ae+1,Re)).some(function(Ie){return"object"==typeof Ie})&&!Te.value?Te.value=Me:!Me.length||Te.value&&"string"==typeof Te.value||(Te.value=Me.join("")))}),L.forEach(function(ve){ve.length=0}),{}),G=0;G<x.length;G++){var T,V,J,X=x[G];"object"==typeof X&&(T=L[J=X.tabstopId],V=x.indexOf(X,G+1),Q[J]?Q[J]===X&&(delete Q[J],Object.keys(Q).forEach(function(ve){T.parents[ve]=!0})):(Q[J]=X,"string"!=typeof(J=T.value)?J=function(ve){for(var Ae=[],Te=0;Te<ve.length;Te++){if("object"==typeof(Re=ve[Te])){if(Q[Re.tabstopId])continue;var Re=Ae[ve.lastIndexOf(Re,Te-1)]||{tabstopId:Re.tabstopId}}Ae[Te]=Re}return Ae}(J):X.fmt&&(J=this.tmStrFormat(J,X,h)),x.splice.apply(x,[G+1,Math.max(0,V-G)].concat(J,X)),-1===T.indexOf(X)&&T.push(X)))}var q=0,ee=0,j="";x.forEach(function(ve){var Ae;"string"==typeof ve?(1<(Ae=ve.split("\n")).length?(ee=Ae[Ae.length-1].length,q+=Ae.length-1):ee+=ve.length,j+=ve):ve&&(ve.start?ve.end={row:q,column:ee}:ve.start={row:q,column:ee})}),D=h.getSelectionRange(),N=h.session.replace(D,j),(re=new w(h)).addTabstops(L,D.start,N,h.inVirtualSelectionMode&&h.selection.index)},this.insertSnippet=function(h,v){var O=this;if(h.inVirtualSelectionMode)return O.insertSnippetForSelection(h,v);h.forEachSelection(function(){O.insertSnippetForSelection(h,v)},null,{keepOrder:!0}),h.tabstopManager&&h.tabstopManager.tabNext()},this.$getScope=function(h){var v,O=h.session.$mode.$id||"";return"html"!==(O=O.split("/").pop())&&"php"!==O||("php"!==O||h.session.$mode.inlinePhp||(O="html"),v=h.getCursorPosition(),(h="object"==typeof(h=h.session.getState(v.row))?h[0]:h).substring&&("js-"==h.substring(0,3)?O="javascript":"css-"==h.substring(0,4)?O="css":"php-"==h.substring(0,4)&&(O="php"))),O},this.getActiveScopes=function(v){var O=[v=this.$getScope(v)],C=this.snippetMap;return C[v]&&C[v].includeScopes&&O.push.apply(O,C[v].includeScopes),O.push("_"),O},this.expandWithTab=function(h,v){var O=this,C=h.forEachSelection(function(){return O.expandSnippetForSelection(h,v)},null,{keepOrder:!0});return C&&h.tabstopManager&&h.tabstopManager.tabNext(),C},this.expandSnippetForSelection=function(h,v){var O,C=h.getCursorPosition(),x=h.session.getLine(C.row),L=x.substring(0,C.column),Q=x.substr(C.column),G=this.snippetMap;return this.getActiveScopes(h).some(function(T){return!!(O=(T=G[T])?this.findMatchingSnippet(T,L,Q):O)},this),!!O&&(v&&v.dryRun||(h.session.doc.removeInLine(C.row,C.column-O.replaceBefore.length,C.column+O.replaceAfter.length),this.variables.M__=O.matchBefore,this.variables.T__=O.matchAfter,this.insertSnippetForSelection(h,O.content),this.variables.M__=this.variables.T__=null),!0)},this.findMatchingSnippet=function(h,v,O){for(var C=h.length;C--;){var x=h[C];if((!x.startRe||x.startRe.test(v))&&(!x.endRe||x.endRe.test(O))&&(x.startRe||x.endRe))return x.matchBefore=x.startRe?x.startRe.exec(v):[""],x.matchAfter=x.endRe?x.endRe.exec(O):[""],x.replaceBefore=x.triggerRe?x.triggerRe.exec(v)[0]:"",x.replaceAfter=x.endTriggerRe?x.endTriggerRe.exec(O)[0]:"",x}},this.snippetMap={},this.snippetNameMap={},this.register=function(h,v){var O=this.snippetMap,C=this.snippetNameMap,x=this;function L(T){return(T=T&&!/^\^?\(.*\)\$?$|^\\b$/.test(T)?"(?:"+T+")":T)||""}function Q(T,V,J){return T=L(T),V=L(V),J?(T=V+T)&&"$"!=T[T.length-1]&&(T+="$"):(T+=V)&&"^"!=T[0]&&(T="^"+T),new RegExp(T)}function G(T){T.scope||(T.scope=v||"_"),O[v=T.scope]||(O[v]=[],C[v]={});var V,J=C[v];T.name&&((V=J[T.name])&&x.unregister(V),J[T.name]=T),O[v].push(T),T.prefix&&(T.tabTrigger=T.prefix),!T.content&&T.body&&(T.content=Array.isArray(T.body)?T.body.join("\n"):T.body),T.tabTrigger&&!T.trigger&&(!T.guard&&/^\w/.test(T.tabTrigger)&&(T.guard="\\b"),T.trigger=Y.escapeRegExp(T.tabTrigger)),(T.trigger||T.guard||T.endTrigger||T.endGuard)&&(T.startRe=Q(T.trigger,T.guard,!0),T.triggerRe=new RegExp(T.trigger),T.endRe=Q(T.endTrigger,T.endGuard,!0),T.endTriggerRe=new RegExp(T.endTrigger))}h=h||[],Array.isArray(h)?h.forEach(G):Object.keys(h).forEach(function(T){G(h[T])}),this._signal("registerSnippets",{scope:v})},this.unregister=function(h,v){var O=this.snippetMap,C=this.snippetNameMap;function x(L){var Q=C[L.scope||v];Q&&Q[L.name]&&(delete Q[L.name],0<=(L=(Q=O[L.scope||v])&&Q.indexOf(L)))&&Q.splice(L,1)}h.content?x(h):Array.isArray(h)&&h.forEach(x)},this.parseSnippetFile=function(h){h=h.replace(/\r/g,"");for(var v,O,C,x=[],L={},Q=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm;O=Q.exec(h);){if(O[1])try{L=JSON.parse(O[1]),x.push(L)}catch{}O[4]?(L.content=O[4].replace(/^\t/gm,""),x.push(L),L={}):(v=O[2],O=O[3],"regex"==v?(L.guard=(C=/\/((?:[^\/\\]|\\.)*)|$/g).exec(O)[1],L.trigger=C.exec(O)[1],L.endTrigger=C.exec(O)[1],L.endGuard=C.exec(O)[1]):"snippet"==v?(L.tabTrigger=O.match(/^\S*/)[0],L.name||(L.name=O)):v&&(L[v]=O))}return x},this.getSnippetByName=function(h,v){var O,C=this.snippetNameMap;return this.getActiveScopes(v).some(function(x){return!!(O=(x=C[x])?x[h]:O)},this),O}}.call(y.prototype);var w=function(h){if(h.tabstopManager)return h.tabstopManager;(h.tabstopManager=this).$onChange=this.onChange.bind(this),this.$onChangeSelection=Y.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(h)},p=(function(){this.attach=function(h){this.index=0,this.ranges=[],this.tabstops=[],this.$openTabstops=null,this.selectedTabstop=null,this.editor=h,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges=null,this.tabstops=null,this.selectedTabstop=null,this.editor.removeListener("change",this.$onChange),this.editor.removeListener("changeSelection",this.$onChangeSelection),this.editor.removeListener("changeSession",this.$onChangeSession),this.editor.commands.removeListener("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.editor=null},this.onChange=function(h){for(var v="r"==h.action[0],O=this.selectedTabstop||{},C=O.parents||{},x=(this.tabstops||[]).slice(),L=0;L<x.length;L++){var Q=x[L];if(Q.rangeList.$bias=(G=Q==O||C[Q.index])?0:1,"remove"==h.action&&Q!==O)for(var T=(T=Q.rangeList.pointIndex(h.start,G=Q.parents&&Q.parents[O.index]))<0?-T-1:T+1,G=Q.rangeList.pointIndex(h.end,G),V=Q.rangeList.ranges.slice(T,G<0?-G-1:G-1),J=0;J<V.length;J++)this.removeRange(V[J]);Q.rangeList.$onChange(h)}var X=this.editor.session;this.$inChange||!v||1!=X.getLength()||X.getValue()||this.detach()},this.updateLinkedFields=function(){var h=this.selectedTabstop;if(h&&h.hasLinkedRanges&&h.firstNonLinked){this.$inChange=!0;for(var v=this.editor.session,O=v.getTextRange(h.firstNonLinked),C=0;C<h.length;C++){var x,L=h[C];L.linked&&(x=c.snippetManager.tmStrFormat(O,x=L.original,this.editor),v.replace(L,x))}this.$inChange=!1}},this.onAfterExec=function(h){h.command&&!h.command.readOnly&&this.updateLinkedFields()},this.onChangeSelection=function(){if(this.editor){for(var h=this.editor.selection.lead,v=this.editor.selection.anchor,O=this.editor.selection.isEmpty(),C=0;C<this.ranges.length;C++)if(!this.ranges[C].linked){var x=this.ranges[C].contains(h.row,h.column),L=O||this.ranges[C].contains(v.row,v.column);if(x&&L)return}this.detach()}},this.onChangeSession=function(){this.detach()},this.tabNext=function(O){var v=this.tabstops.length;O=this.index+(O||1),O=Math.min(Math.max(O,1),v),this.selectTabstop(O=O==v?0:O),0===O&&this.detach()},this.selectTabstop=function(h){this.$openTabstops=null;var v=this.tabstops[this.index];if(v&&this.addTabstopMarkers(v),this.index=h,(v=this.tabstops[this.index])&&v.length){if(h=(this.selectedTabstop=v).firstNonLinked||v,v.choices&&(h.cursor=h.start),this.editor.inVirtualSelectionMode)this.editor.selection.fromOrientedRange(h);else{var O=this.editor.multiSelect;O.toSingleRange(h);for(var C=0;C<v.length;C++)v.hasLinkedRanges&&v[C].linked||O.addRange(v[C].clone(),!0)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler),this.selectedTabstop&&this.selectedTabstop.choices&&this.editor.execCommand("startAutocomplete",{matches:this.selectedTabstop.choices})}},this.addTabstops=function(h,v,O){var C=this.useLink||!this.editor.getOption("enableMultiselect");this.$openTabstops||(this.$openTabstops=[]),h[0]||(O=H.fromPoints(O,O),f(O.start,v),f(O.end,v),h[0]=[O],h[0].index=0);var x=[this.index+1,0],L=this.ranges;h.forEach(function(Q,G){for(var T=this.$openTabstops[G]||Q,V=0;V<Q.length;V++){var J=Q[V],X=H.fromPoints(J.start,J.end||J.start);p(X.start,v),p(X.end,v),X.original=J,X.tabstop=T,L.push(X),T!=Q?T.unshift(X):T[V]=X,J.fmtString||T.firstNonLinked&&C?(X.linked=!0,T.hasLinkedRanges=!0):T.firstNonLinked||(T.firstNonLinked=X)}T.firstNonLinked||(T.hasLinkedRanges=!1),T===Q&&(x.push(T),this.$openTabstops[G]=T),this.addTabstopMarkers(T),T.rangeList=T.rangeList||new F,T.rangeList.$bias=0,T.rangeList.addList(T)},this),2<x.length&&(this.tabstops.length&&x.push(x.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,x))},this.addTabstopMarkers=function(h){var v=this.editor.session;h.forEach(function(O){O.markerId||(O.markerId=v.addMarker(O,"ace_snippet-marker","text"))})},this.removeTabstopMarkers=function(h){var v=this.editor.session;h.forEach(function(O){v.removeMarker(O.markerId),O.markerId=null})},this.removeRange=function(h){var v=h.tabstop.indexOf(h);-1!=v&&h.tabstop.splice(v,1),-1!=(v=this.ranges.indexOf(h))&&this.ranges.splice(v,1),-1!=(v=h.tabstop.rangeList.ranges.indexOf(h))&&h.tabstop.splice(v,1),this.editor.session.removeMarker(h.markerId),h.tabstop.length||(-1!=(v=this.tabstops.indexOf(h.tabstop))&&this.tabstops.splice(v,1),this.tabstops.length)||this.detach()},this.keyboardHandler=new k,this.keyboardHandler.bindKeys({Tab:function(h){c.snippetManager&&c.snippetManager.expandWithTab(h)||(h.tabstopManager.tabNext(1),h.renderer.scrollCursorIntoView())},"Shift-Tab":function(h){h.tabstopManager.tabNext(-1),h.renderer.scrollCursorIntoView()},Esc:function(h){h.tabstopManager.detach()}})}.call(w.prototype),function(h,v){0==h.row&&(h.column+=v.column),h.row+=v.row}),f=function(h,v){h.row==v.row&&(h.column-=v.column),h.row-=v.row};m.importCssString("\n.ace_snippet-marker {\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n    background: rgba(194, 193, 208, 0.09);\n    border: 1px dotted rgba(211, 208, 235, 0.62);\n    position: absolute;\n}","snippets.css",!1),c.snippetManager=new y,m=ce("./editor").Editor,function(){this.insertSnippet=function(h,v){return c.snippetManager.insertSnippet(this,h,v)},this.expandSnippet=function(h){return c.snippetManager.expandWithTab(this,h)}}.call(m.prototype)}),ace.define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom"],function(ce,c,K){"use strict";function U(R){return"suggest-aria-id:".concat(R)}function Z(R){return(R=new Y(R)).$maxLines=4,(R=new H(R)).setHighlightActiveLine(!1),R.setShowPrintMargin(!1),R.renderer.setShowGutter(!1),R.renderer.setHighlightGutterLine(!1),R.$mouseHandler.$focusTimeout=0,R.$highlightTagPending=!0,R}var Y=ce("../virtual_renderer").VirtualRenderer,H=ce("../editor").Editor,F=ce("../range").Range,k=ce("../lib/event"),_=ce("../lib/lang"),M=ce("../lib/dom");M.importCssString("\n.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {\n    background-color: #CAD6FA;\n    z-index: 1;\n}\n.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {\n    background-color: #3a674e;\n}\n.ace_editor.ace_autocomplete .ace_line-hover {\n    border: 1px solid #abbffe;\n    margin-top: -1px;\n    background: rgba(233,233,253,0.4);\n    position: absolute;\n    z-index: 2;\n}\n.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {\n    border: 1px solid rgba(109, 150, 13, 0.8);\n    background: rgba(58, 103, 78, 0.62);\n}\n.ace_completion-meta {\n    opacity: 0.5;\n    margin: 0.9em;\n}\n.ace_completion-message {\n    color: blue;\n}\n.ace_editor.ace_autocomplete .ace_completion-highlight{\n    color: #2d69c7;\n}\n.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{\n    color: #93ca12;\n}\n.ace_editor.ace_autocomplete {\n    width: 300px;\n    z-index: 200000;\n    border: 1px lightgray solid;\n    position: fixed;\n    box-shadow: 2px 3px 5px rgba(0,0,0,.2);\n    line-height: 1.4;\n    background: #fefefe;\n    color: #111;\n}\n.ace_dark.ace_editor.ace_autocomplete {\n    border: 1px #484747 solid;\n    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);\n    line-height: 1.4;\n    background: #25282c;\n    color: #c1c1c1;\n}","autocompletion.css",!1),c.AcePopup=function(O){function S(){}function y(){v(-1)}var w,p=M.createElement("div"),f=new Z(p),m=(O&&O.appendChild(p),p.style.display="none",f.renderer.content.style.cursor="default",f.renderer.setStyle("ace_autocomplete"),f.renderer.container.setAttribute("role","listbox"),f.renderer.container.setAttribute("aria-label","Autocomplete suggestions"),f.setOption("displayIndentGuides",!1),f.setOption("dragDelay",150),f.focus=S,f.$isFocused=!0,f.renderer.$cursorLayer.restartTimer=S,f.renderer.$cursorLayer.element.style.opacity=0,f.renderer.$maxLines=8,f.renderer.$keepTextAreaAtCursor=!1,f.setHighlightActiveLine(!1),f.session.highlight(""),f.session.$searchHighlight.clazz="ace_highlight-marker",f.on("mousedown",function(C){var x=C.getDocumentPosition();f.selection.moveToPosition(x),h.start.row=h.end.row=x.row,C.stop()}),new F(-1,0,-1,1/0)),h=new F(-1,0,-1,1/0),v=(h.id=f.session.addMarker(h,"ace_active-line","fullLine"),f.setSelectOnHover=function(C){C?m.id&&(f.session.removeMarker(m.id),m.id=null):m.id=f.session.addMarker(m,"ace_line-hover","fullLine")},f.setSelectOnHover(!1),f.on("mousemove",function(C){var x;w?w.x==C.x&&w.y==C.y||((w=C).scrollTop=f.renderer.scrollTop,x=w.getDocumentPosition().row,m.start.row!=x&&(m.id||f.setRow(x),v(x))):w=C}),f.renderer.on("beforeRender",function(){var C;w&&-1!=m.start.row&&(w.$pos=null,C=w.getDocumentPosition().row,m.id||f.setRow(C),v(C,!0))}),f.renderer.on("afterRender",function(){var C=f.getRow(),x=f.renderer.$textLayer,L=x.element.childNodes[C-x.config.firstRow],Q=document.activeElement;L!==x.selectedNode&&x.selectedNode&&(M.removeCssClass(x.selectedNode,"ace_selected"),Q.removeAttribute("aria-activedescendant"),x.selectedNode.removeAttribute("id")),(x.selectedNode=L)&&(M.addCssClass(L,"ace_selected"),x=U(C),L.id=x,f.renderer.container.setAttribute("aria-activedescendant",x),Q.setAttribute("aria-activedescendant",x),L.setAttribute("role","option"),L.setAttribute("aria-label",f.getData(C).value),L.setAttribute("aria-setsize",f.data.length),L.setAttribute("aria-posinset",C))}),function(C,x){C!==m.start.row&&(m.start.row=m.end.row=C,x||f.session._emit("changeBackMarker"),f._emit("changeHoverMarker"))});return(f.getHoveredRow=function(){return m.start.row},k.addListener(f.container,"mouseout",y),f.on("hide",y),f.on("changeSelection",y),f.session.doc.getLength=function(){return f.data.length},f.session.doc.getLine=function(C){return"string"==typeof(C=f.data[C])?C:C&&C.value||""},O=f.session.bgTokenizer).$tokenizeRow=function(C){var x=f.data[C],L=[];if(x){for(var Q,G,T=(x="string"==typeof x?{value:x}:x).caption||x.value||x.name,V=T.toLowerCase(),J=(f.filterText||"").toLowerCase(),X=0,q=0,ee=0;ee<=J.length;ee++)ee!=q&&(x.matchMask&1<<ee||ee==J.length)&&(Q=J.slice(q,ee),q=ee,-1!=(G=V.indexOf(Q,X)))&&(j(T.slice(X,G),""),j(T.slice(G,X=G+Q.length),"completion-highlight"));j(T.slice(X,T.length),""),x.meta&&L.push({type:"completion-meta",value:x.meta}),x.message&&L.push({type:"completion-message",value:x.message})}return L;function j(D,N){D&&L.push({type:(x.className||"")+(N||""),value:D})}},O.$updateOnChange=S,O.start=S,f.session.$computeWidth=function(){return this.screenWidth=0},f.isOpen=!1,f.isTopdown=!1,f.autoSelect=!0,f.filterText="",f.data=[],f.setData=function(C,x){f.filterText=x||"",f.setValue(_.stringRepeat("\n",C.length),-1),f.data=C||[],f.setRow(0)},f.getData=function(C){return f.data[C]},f.getRow=function(){return h.start.row},f.setRow=function(C){C=Math.max(this.autoSelect?0:-1,Math.min(this.data.length,C)),h.start.row!=C&&(f.selection.clearSelection(),h.start.row=h.end.row=C||0,f.session._emit("changeBackMarker"),f.moveCursorTo(C||0,0),f.isOpen)&&f._signal("select")},f.on("changeSelection",function(){f.isOpen&&f.setRow(f.selection.lead.row),f.renderer.scrollCursorIntoView()}),f.hide=function(){this.container.style.display="none",this._signal("hide"),f.isOpen=!1},f.show=function(C,x,q){var Q=this.container,G=window.innerHeight,T=window.innerWidth,V=this.renderer,X=C.top+this.$borderSize;G/2<X&&!q&&G<X+x+V.$maxLines*x*1.4?(V.$maxPixelHeight=X-2*this.$borderSize,Q.style.top="",Q.style.bottom=G-X+"px",f.isTopdown=!1):(V.$maxPixelHeight=G-(X+=x)-.2*x,Q.style.top=X+"px",Q.style.bottom="",f.isTopdown=!0),Q.style.display="",(q=C.left)+Q.offsetWidth>T&&(q=T-Q.offsetWidth),Q.style.left=q+"px",this._signal("show"),w=null,f.isOpen=!0},f.goTo=function(C){var x=this.getRow(),L=this.session.getLength()-1;switch(C){case"up":x=x<=0?L:x-1;break;case"down":x=L<=x?-1:x+1;break;case"start":x=0;break;case"end":x=L}this.setRow(x)},f.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},f.$imageSize=0,f.$borderSize=1,f},c.$singleLineEditor=Z,c.getAriaId=U}),ace.define("ace/autocomplete/util",["require","exports","module"],function(ce,c,K){"use strict";c.parForEach=function(Z,Y,H){var F=0,k=Z.length;0===k&&H();for(var _=0;_<k;_++)Y(Z[_],function(M,R){++F===k&&H(M,R)})};var U=/[a-zA-Z_0-9\$\-\u00A2-\u2000\u2070-\uFFFF]/;c.retrievePrecedingIdentifier=function(Z,Y,H){H=H||U;for(var F=[],k=Y-1;0<=k&&H.test(Z[k]);k--)F.push(Z[k]);return F.reverse().join("")},c.retrieveFollowingIdentifier=function(Z,Y,H){H=H||U;for(var F=[],k=Y;k<Z.length&&H.test(Z[k]);k++)F.push(Z[k]);return F},c.getCompletionPrefix=function(Z){var Y,H=Z.getCursorPosition(),F=Z.session.getLine(H.row);return Z.completers.forEach(function(k){k.identifierRegexps&&k.identifierRegexps.forEach(function(_){!Y&&_&&(Y=this.retrievePrecedingIdentifier(F,H.column,_))}.bind(this))}.bind(this)),Y||this.retrievePrecedingIdentifier(F,H.column)}}),ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/lang","ace/lib/dom","ace/snippets","ace/config"],function(ce,c,K){"use strict";function U(){this.autoInsert=!1,this.autoSelect=!0,this.exactMatch=!1,this.gatherCompletionsId=0,this.keyboardHandler=new Z,this.keyboardHandler.bindKeys(this.commands),this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.changeTimer=k.delayedCall(function(){this.updateCompletions(!0)}.bind(this)),this.tooltipTimer=k.delayedCall(this.updateDocTooltip.bind(this),50)}var Z=ce("./keyboard/hash_handler").HashHandler,Y=ce("./autocomplete/popup").AcePopup,H=ce("./autocomplete/popup").getAriaId,F=ce("./autocomplete/util"),k=ce("./lib/lang"),_=ce("./lib/dom"),M=ce("./snippets").snippetManager,R=ce("./config"),S=(function(){this.$init=function(){return this.popup=new Y(document.body||document.documentElement),this.popup.on("click",function(y){this.insertMatch(),y.stop()}.bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.tooltipTimer.bind(null,null)),this.popup.on("select",this.tooltipTimer.bind(null,null)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup},this.getPopup=function(){return this.popup||this.$init()},this.openPopup=function(y,w,p){this.popup||this.$init(),this.popup.autoSelect=this.autoSelect,this.popup.setData(this.completions.filtered,this.completions.filterText),this.editor.textInput.setAriaOptions&&this.editor.textInput.setAriaOptions({activeDescendant:H(this.popup.getRow())}),y.keyBinding.addKeyboardHandler(this.keyboardHandler);var f,m=y.renderer;this.popup.setRow(this.autoSelect?0:-1),p?w||this.detach():(this.popup.setTheme(y.getTheme()),this.popup.setFontSize(y.getFontSize()),p=m.layerConfig.lineHeight,(w=m.$cursorLayer.getPixelPosition(this.base,!0)).left-=this.popup.getTextLeftOffset(),f=y.container.getBoundingClientRect(),w.top+=f.top-m.layerConfig.offset,w.left+=f.left-y.renderer.scrollLeft,w.left+=m.gutterWidth,this.popup.show(w,p)),this.changeTimer.cancel()},this.detach=function(){this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener),this.changeTimer.cancel(),this.hideDocTooltip(),this.gatherCompletionsId+=1,this.popup&&this.popup.isOpen&&this.popup.hide(),this.base&&this.base.detach(),this.activated=!1,this.completions=this.base=null},this.changeListener=function(y){var w=this.editor.selection.lead;(w.row!=this.base.row||w.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},this.blurListener=function(y){var w=document.activeElement,p=this.editor.textInput.getElement(),f=y.relatedTarget&&this.tooltipNode&&this.tooltipNode.contains(y.relatedTarget);w==p||w.parentNode==(this.popup&&this.popup.container)||f||w==this.tooltipNode||y.relatedTarget==p||this.detach()},this.mousedownListener=function(y){this.detach()},this.mousewheelListener=function(y){this.detach()},this.goTo=function(y){this.popup.goTo(y)},this.insertMatch=function(y,w){if(!(y=y||this.popup.getData(this.popup.getRow())))return!1;var p=this.completions;if(this.editor.startOperation({command:{name:"insertMatch"}}),y.completer&&y.completer.insertMatch)y.completer.insertMatch(this.editor,y);else{if(!p)return!1;if(p.filterText)for(var f,m=this.editor.selection.getAllRanges(),h=0;f=m[h];h++)f.start.column-=p.filterText.length,this.editor.session.remove(f);y.snippet?M.insertSnippet(this.editor,y.snippet):this.editor.execCommand("insertstring",y.value||y)}this.completions==p&&this.detach(),this.editor.endOperation()},this.commands={Up:function(y){y.completer.goTo("up")},Down:function(y){y.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(y){y.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(y){y.completer.goTo("end")},Esc:function(y){y.completer.detach()},Return:function(y){return y.completer.insertMatch()},"Shift-Return":function(y){y.completer.insertMatch(null,{deleteSuffix:!0})},Tab:function(y){var w=y.completer.insertMatch();if(w||y.tabstopManager)return w;y.completer.goTo("down")},PageUp:function(y){y.completer.popup.gotoPageUp()},PageDown:function(y){y.completer.popup.gotoPageDown()}},this.gatherCompletions=function(y,w){var p=y.getSession(),f=y.getCursorPosition(),m=F.getCompletionPrefix(y),h=(this.base=p.doc.createAnchor(f.row,f.column-m.length),this.base.$insertRight=!0,[]),v=y.completers.length;return y.completers.forEach(function(O,C){O.getCompletions(y,p,f,m,function(x,L){!x&&L&&(h=h.concat(L)),w(null,{prefix:F.getCompletionPrefix(y),matches:h,finished:0==--v})})}),!0},this.showPopup=function(y,w){this.editor&&this.detach(),this.activated=!0,(this.editor=y).completer!=this&&(y.completer&&y.completer.detach(),y.completer=this),y.on("changeSelection",this.changeListener),y.on("blur",this.blurListener),y.on("mousedown",this.mousedownListener),y.on("mousewheel",this.mousewheelListener),this.updateCompletions(!1,w)},this.updateCompletions=function(y,w){var p,f,m,h,v,O,C;return y&&this.base&&this.completions?(p=this.editor.getCursorPosition(),(O=this.editor.session.getTextRange({start:this.base,end:p}))==this.completions.filterText?void 0:(this.completions.setFilter(O),this.completions.filtered.length&&(1!=this.completions.filtered.length||this.completions.filtered[0].value!=O||this.completions.filtered[0].snippet)?void this.openPopup(this.editor,O,y):this.detach())):w&&w.matches?(p=this.editor.getSelectionRange().start,this.base=this.editor.session.doc.createAnchor(p.row,p.column),this.base.$insertRight=!0,this.completions=new S(w.matches),this.openPopup(this.editor,"",y)):(f=this.gatherCompletionsId,m=function(x){if(x.finished)return this.detach()}.bind(this),h=function(x){var Q,L=x.prefix;return(this.completions=new S(x.matches),this.exactMatch&&(this.completions.exactMatch=!0),this.completions.setFilter(L),Q=this.completions.filtered).length&&(1!=Q.length||Q[0].value!=L||Q[0].snippet)?this.autoInsert&&1==Q.length&&x.finished?this.insertMatch(Q[0]):void this.openPopup(this.editor,L,y):m(x)}.bind(this),v=!0,C=null,this.gatherCompletions(this.editor,function(x,L){var Q=L.prefix,G=L&&L.matches;if(!G||!G.length)return m(L);0===Q.indexOf(L.prefix)&&f==this.gatherCompletionsId&&(v?C=L:h(L))}.bind(this)),v=!1,void(C&&(O=C,C=null,h(O))))},this.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},this.updateDocTooltip=function(){var y=this.popup,w=y.data,p=w&&(w[y.getHoveredRow()]||w[y.getRow()]),f=null;return p&&this.editor&&this.popup.isOpen&&(this.editor.completers.some(function(m){return f=m.getDocTooltip?m.getDocTooltip(p):f}),f="string"==typeof(f=f||"string"==typeof p?f:p)?{docText:f}:f)&&(f.docHTML||f.docText)?void this.showDocTooltip(f):this.hideDocTooltip()},this.showDocTooltip=function(p){this.tooltipNode||(this.tooltipNode=_.createElement("div"),this.tooltipNode.className="ace_tooltip ace_doc-tooltip",this.tooltipNode.style.margin=0,this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this),this.tooltipNode.onclick=this.onTooltipClick.bind(this));var w=this.tooltipNode,f=(p.docHTML?w.innerHTML=p.docHTML:p.docText&&(w.textContent=p.docText),w.parentNode||document.body.appendChild(w),p=this.popup).container.getBoundingClientRect();w.style.top=p.container.style.top,w.style.bottom=p.container.style.bottom,w.style.display="block",window.innerWidth-f.right<320?f.left<320?(w.style.top=p.isTopdown?f.bottom+"px":p.container.offsetTop-w.offsetHeight+"px",w.style.left=f.left+"px",w.style.right="",w.style.bottom=""):(w.style.right=window.innerWidth-f.left+"px",w.style.left=""):(w.style.left=f.right+1+"px",w.style.right="")},this.hideDocTooltip=function(){var y;this.tooltipTimer.cancel(),this.tooltipNode&&(y=this.tooltipNode,this.editor.isFocused()||document.activeElement!=y||this.editor.focus(),this.tooltipNode=null,y.parentNode)&&y.parentNode.removeChild(y)},this.onTooltipClick=function(y){for(var w=y.target;w&&w!=this.tooltipNode;){if("A"==w.nodeName&&w.href){w.rel="noreferrer",w.target="_blank";break}w=w.parentNode}},this.destroy=function(){var y;this.detach(),this.popup&&(this.popup.destroy(),y=this.popup.container)&&y.parentNode&&y.parentNode.removeChild(y),this.popup=null}}.call(U.prototype),U.for=function(y){return y.completer||(R.get("sharedPopups")?(U.$shared||(U.$sharedInstance=new U),y.completer=U.$sharedInstance):(y.completer=new U,y.once("destroy",function(w,p){p.completer.destroy()}))),y.completer},U.startCommand={name:"startAutocomplete",exec:function(y,w){var p=U.for(y);p.autoInsert=!1,p.autoSelect=!0,p.showPopup(y,w),p.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"},function(y,w){this.all=y,this.filtered=y,this.filterText=w||"",this.exactMatch=!1});(function(){this.setFilter=function(y){w=y.length>this.filterText&&0===y.lastIndexOf(this.filterText,0)?this.filtered:this.all,this.filterText=y,w=(w=this.filterCompletions(w,this.filterText)).sort(function(f,m){return m.exactMatch-f.exactMatch||m.$score-f.$score||(f.caption||f.value).localeCompare(m.caption||m.value)});var w,p=null;w=w.filter(function(f){return(f=f.snippet||f.caption||f.value)!==p&&(p=f,!0)}),this.filtered=w},this.filterCompletions=function(y,w){var p=[],f=w.toUpperCase(),m=w.toLowerCase();e:for(var h,v=0;h=y[v];v++){var O=h.caption||h.value||h.snippet;if(O){var C=-1,x=0,L=0;if(this.exactMatch){if(w!==O.substr(0,w.length))continue}else{var Q=O.toLowerCase().indexOf(m);if(-1<Q)L=Q;else for(var G=0;G<w.length;G++){var T=O.indexOf(m[G],C+1),V=O.indexOf(f[G],C+1);if((T=0<=T&&(V<0||T<V)?T:V)<0)continue e;0<(V=T-C-1)&&(-1===C&&(L+=10),L+=V,x|=1<<G),C=T}}h.matchMask=x,h.exactMatch=L?0:1,h.$score=(h.score||0)-L,p.push(h)}}return p}}).call(S.prototype),c.Autocomplete=U,c.FilteredList=S}),ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(ce,c,K){var U=ce("../range").Range,Z=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;c.getCompletions=function(H,F,k,_,M){var R=function Y(H,F){var k=H.getTextRange(U.fromPoints({row:0,column:0},F)).split(Z).length-1,_=H.getValue().split(Z),M=Object.create(null),R=_[k];return _.forEach(function(S,y){S&&S!==R&&(y=Math.abs(k-y),y=_.length-y,M[S]=M[S]?Math.max(y,M[S]):y)}),M}(F,k);M(null,Object.keys(R).map(function(S){return{caption:S,value:S,score:R[S],meta:"local"}}))}}),ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],function(ce,c,K){"use strict";function U(m,h){w(h.session.$mode)}function Z(m){var h=m.editor,v=h.completer&&h.completer.activated;"backspace"===m.command.name?v&&!_.getCompletionPrefix(h)&&h.completer.detach():"insertstring"===m.command.name&&_.getCompletionPrefix(h)&&!v&&((m=H.for(h)).autoInsert=!1,m.showPopup(h))}var Y=ce("../snippets").snippetManager,H=ce("../autocomplete").Autocomplete,F=ce("../config"),k=ce("../lib/lang"),_=ce("../autocomplete/util"),M={getCompletions:function(m,h,v,O,C){if(h.$mode.completer)return h.$mode.completer.getCompletions(m,h,v,O,C);m=m.session.getState(v.row),C(null,h.$mode.getCompletions(m,h,v,O))}},R={getCompletions:function(m,L,v,O,C){var x=[],Q=((L=L.getTokenAt(v.row,v.column))&&L.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\.xml$/)?x.push("html-tag"):x=Y.getActiveScopes(m),Y.snippetMap),G=[];x.forEach(function(T){for(var V=Q[T]||[],J=V.length;J--;){var X=V[J],q=X.name||X.tabTrigger;q&&G.push({caption:q,snippet:X.content,meta:X.tabTrigger&&!X.name?X.tabTrigger+"\u21e5 ":"snippet",type:"snippet"})}},this),C(null,G)},getDocTooltip:function(m){var h;"snippet"!=m.type||m.docHTML||(m.docHTML=["<b>",k.escapeHTML(m.caption),"</b>","<hr></hr>",k.escapeHTML((m=m.snippet,h={},m.replace(/\${(\d+)(:(.*?))?}/g,function(v,O,C,x){return h[O]=x||""}).replace(/\$(\d+?)/g,function(v,O){return h[O]})))].join(""))}},S=[R,f=ce("../autocomplete/text_completer"),M],y=(c.setCompleters=function(m){S.length=0,m&&S.push.apply(S,m)},c.addCompleter=function(m){S.push(m)},c.textCompleter=f,c.keyWordCompleter=M,c.snippetCompleter=R,{name:"expandSnippet",exec:function(m){return Y.expandWithTab(m)},bindKey:"Tab"}),w=function(m){(m="string"==typeof m?F.$modes[m]:m)&&(Y.files||(Y.files={}),p(m.$id,m.snippetFileId),m.modes)&&m.modes.forEach(w)},p=function(m,h){h&&m&&!Y.files[m]&&(Y.files[m]={},F.loadModule(h,function(v){v&&(!(Y.files[m]=v).snippets&&v.snippetText&&(v.snippets=Y.parseSnippetFile(v.snippetText)),Y.register(v.snippets||[],v.scope),v.includeScopes)&&(Y.snippetMap[v.scope].includeScopes=v.includeScopes,v.includeScopes.forEach(function(O){w("ace/mode/"+O)}))}))},f=ce("../editor").Editor;ce("../config").defineOptions(f.prototype,"editor",{enableBasicAutocompletion:{set:function(m){m?(this.completers||(this.completers=Array.isArray(m)?m:S),this.commands.addCommand(H.startCommand)):this.commands.removeCommand(H.startCommand)},value:!1},enableLiveAutocompletion:{set:function(m){m?(this.completers||(this.completers=Array.isArray(m)?m:S),this.commands.on("afterExec",Z)):this.commands.removeListener("afterExec",Z)},value:!1},enableSnippets:{set:function(m){m?(this.commands.addCommand(y),this.on("changeMode",U),U(0,this)):(this.commands.removeCommand(y),this.off("changeMode",U))},value:!1}})}),ace.require(["ace/ext/language_tools"],function(ce){Ce&&(Ce.exports=ce)})},3330:function(Ce,P,ae){Ce=ae.nmd(Ce),ace.define("ace/ext/searchbox.css",["require","exports","module"],function(ce,c,K){K.exports='\n\n/* ------------------------------------------------------------------------------------------\n * Editor Search Form\n * --------------------------------------------------------------------------------------- */\n.ace_search {\n    background-color: #ddd;\n    color: #666;\n    border: 1px solid #cbcbcb;\n    border-top: 0 none;\n    overflow: hidden;\n    margin: 0;\n    padding: 4px 6px 0 4px;\n    position: absolute;\n    top: 0;\n    z-index: 99;\n    white-space: normal;\n}\n.ace_search.left {\n    border-left: 0 none;\n    border-radius: 0px 0px 5px 0px;\n    left: 0;\n}\n.ace_search.right {\n    border-radius: 0px 0px 0px 5px;\n    border-right: 0 none;\n    right: 0;\n}\n\n.ace_search_form, .ace_replace_form {\n    margin: 0 20px 4px 0;\n    overflow: hidden;\n    line-height: 1.9;\n}\n.ace_replace_form {\n    margin-right: 0;\n}\n.ace_search_form.ace_nomatch {\n    outline: 1px solid red;\n}\n\n.ace_search_field {\n    border-radius: 3px 0 0 3px;\n    background-color: white;\n    color: black;\n    border: 1px solid #cbcbcb;\n    border-right: 0 none;\n    outline: 0;\n    padding: 0;\n    font-size: inherit;\n    margin: 0;\n    line-height: inherit;\n    padding: 0 6px;\n    min-width: 17em;\n    vertical-align: top;\n    min-height: 1.8em;\n    box-sizing: content-box;\n}\n.ace_searchbtn {\n    border: 1px solid #cbcbcb;\n    line-height: inherit;\n    display: inline-block;\n    padding: 0 6px;\n    background: #fff;\n    border-right: 0 none;\n    border-left: 1px solid #dcdcdc;\n    cursor: pointer;\n    margin: 0;\n    position: relative;\n    color: #666;\n}\n.ace_searchbtn:last-child {\n    border-radius: 0 3px 3px 0;\n    border-right: 1px solid #cbcbcb;\n}\n.ace_searchbtn:disabled {\n    background: none;\n    cursor: default;\n}\n.ace_searchbtn:hover {\n    background-color: #eef1f6;\n}\n.ace_searchbtn.prev, .ace_searchbtn.next {\n     padding: 0px 0.7em\n}\n.ace_searchbtn.prev:after, .ace_searchbtn.next:after {\n     content: "";\n     border: solid 2px #888;\n     width: 0.5em;\n     height: 0.5em;\n     border-width:  2px 0 0 2px;\n     display:inline-block;\n     transform: rotate(-45deg);\n}\n.ace_searchbtn.next:after {\n     border-width: 0 2px 2px 0 ;\n}\n.ace_searchbtn_close {\n    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;\n    border-radius: 50%;\n    border: 0 none;\n    color: #656565;\n    cursor: pointer;\n    font: 16px/16px Arial;\n    padding: 0;\n    height: 14px;\n    width: 14px;\n    top: 9px;\n    right: 7px;\n    position: absolute;\n}\n.ace_searchbtn_close:hover {\n    background-color: #656565;\n    background-position: 50% 100%;\n    color: white;\n}\n\n.ace_button {\n    margin-left: 2px;\n    cursor: pointer;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    overflow: hidden;\n    opacity: 0.7;\n    border: 1px solid rgba(100,100,100,0.23);\n    padding: 1px;\n    box-sizing:    border-box!important;\n    color: black;\n}\n\n.ace_button:hover {\n    background-color: #eee;\n    opacity:1;\n}\n.ace_button:active {\n    background-color: #ddd;\n}\n\n.ace_button.checked {\n    border-color: #3399ff;\n    opacity:1;\n}\n\n.ace_search_options{\n    margin-bottom: 3px;\n    text-align: right;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -o-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    clear: both;\n}\n\n.ace_search_counter {\n    float: left;\n    font-family: arial;\n    padding: 0 8px;\n}'}),ace.define("ace/ext/searchbox",["require","exports","module","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/ext/searchbox.css","ace/keyboard/hash_handler","ace/lib/keys"],function(ce,c,K){"use strict";function U(M,R,S){var y=Z.createElement("div");Z.buildDom(["div",{class:"ace_search right"},["span",{action:"hide",class:"ace_searchbtn_close"}],["div",{class:"ace_search_form"},["input",{class:"ace_search_field",placeholder:"Search for",spellcheck:"false"}],["span",{action:"findPrev",class:"ace_searchbtn prev"},"\u200b"],["span",{action:"findNext",class:"ace_searchbtn next"},"\u200b"],["span",{action:"findAll",class:"ace_searchbtn",title:"Alt-Enter"},"All"]],["div",{class:"ace_replace_form"},["input",{class:"ace_search_field",placeholder:"Replace with",spellcheck:"false"}],["span",{action:"replaceAndFindNext",class:"ace_searchbtn"},"Replace"],["span",{action:"replaceAll",class:"ace_searchbtn"},"All"]],["div",{class:"ace_search_options"},["span",{action:"toggleReplace",class:"ace_button",title:"Toggle Replace mode",style:"float:left;margin-top:-2px;padding:0 5px;"},"+"],["span",{class:"ace_search_counter"}],["span",{action:"toggleRegexpMode",class:"ace_button",title:"RegExp Search"},".*"],["span",{action:"toggleCaseSensitive",class:"ace_button",title:"CaseSensitive Search"},"Aa"],["span",{action:"toggleWholeWords",class:"ace_button",title:"Whole Word Search"},"\\b"],["span",{action:"searchInSelection",class:"ace_button",title:"Search In Selection"},"S"]]],y),this.element=y.firstChild,this.setSession=this.setSession.bind(this),this.$init(),this.setEditor(M),Z.importCssString(F,"ace_searchbox",M.container)}var Z=ce("../lib/dom"),Y=ce("../lib/lang"),H=ce("../lib/event"),F=ce("./searchbox.css"),k=ce("../keyboard/hash_handler").HashHandler,_=ce("../lib/keys");Z.importCssString(F,"ace_searchbox",!1),function(){this.setEditor=function(M){M.searchBox=this,M.renderer.scroller.appendChild(this.element),this.editor=M},this.setSession=function(M){this.searchRange=null,this.$syncOptions(!0)},this.$initElements=function(M){this.searchBox=M.querySelector(".ace_search_form"),this.replaceBox=M.querySelector(".ace_replace_form"),this.searchOption=M.querySelector("[action=searchInSelection]"),this.replaceOption=M.querySelector("[action=toggleReplace]"),this.regExpOption=M.querySelector("[action=toggleRegexpMode]"),this.caseSensitiveOption=M.querySelector("[action=toggleCaseSensitive]"),this.wholeWordOption=M.querySelector("[action=toggleWholeWords]"),this.searchInput=this.searchBox.querySelector(".ace_search_field"),this.replaceInput=this.replaceBox.querySelector(".ace_search_field"),this.searchCounter=M.querySelector(".ace_search_counter")},this.$init=function(){var M=this.element,R=(this.$initElements(M),this);H.addListener(M,"mousedown",function(S){setTimeout(function(){R.activeInput.focus()},0),H.stopPropagation(S)}),H.addListener(M,"click",function(S){var y=(S.target||S.srcElement).getAttribute("action");y&&R[y]?R[y]():R.$searchBarKb.commands[y]&&R.$searchBarKb.commands[y].exec(R),H.stopPropagation(S)}),H.addCommandKeyListener(M,function(S,y,w){w=_.keyCodeToString(w),(y=R.$searchBarKb.findKeyCommand(y,w))&&y.exec&&(y.exec(R),H.stopEvent(S))}),this.$onChange=Y.delayedCall(function(){R.find(!1,!1)}),H.addListener(this.searchInput,"input",function(){R.$onChange.schedule(20)}),H.addListener(this.searchInput,"focus",function(){R.activeInput=R.searchInput,R.searchInput.value&&R.highlight()}),H.addListener(this.replaceInput,"focus",function(){R.activeInput=R.replaceInput,R.searchInput.value&&R.highlight()})},this.$closeSearchBarKb=new k([{bindKey:"Esc",name:"closeSearchBar",exec:function(M){M.searchBox.hide()}}]),this.$searchBarKb=new k,this.$searchBarKb.bindKeys({"Ctrl-f|Command-f":function(M){var R=M.isReplace=!M.isReplace;M.replaceBox.style.display=R?"":"none",M.replaceOption.checked=!1,M.$syncOptions(),M.searchInput.focus()},"Ctrl-H|Command-Option-F":function(M){M.editor.getReadOnly()||(M.replaceOption.checked=!0,M.$syncOptions(),M.replaceInput.focus())},"Ctrl-G|Command-G":function(M){M.findNext()},"Ctrl-Shift-G|Command-Shift-G":function(M){M.findPrev()},esc:function(M){setTimeout(function(){M.hide()})},Return:function(M){M.activeInput==M.replaceInput&&M.replace(),M.findNext()},"Shift-Return":function(M){M.activeInput==M.replaceInput&&M.replace(),M.findPrev()},"Alt-Return":function(M){M.activeInput==M.replaceInput&&M.replaceAll(),M.findAll()},Tab:function(M){(M.activeInput==M.replaceInput?M.searchInput:M.replaceInput).focus()}}),this.$searchBarKb.addCommands([{name:"toggleRegexpMode",bindKey:{win:"Alt-R|Alt-/",mac:"Ctrl-Alt-R|Ctrl-Alt-/"},exec:function(M){M.regExpOption.checked=!M.regExpOption.checked,M.$syncOptions()}},{name:"toggleCaseSensitive",bindKey:{win:"Alt-C|Alt-I",mac:"Ctrl-Alt-R|Ctrl-Alt-I"},exec:function(M){M.caseSensitiveOption.checked=!M.caseSensitiveOption.checked,M.$syncOptions()}},{name:"toggleWholeWords",bindKey:{win:"Alt-B|Alt-W",mac:"Ctrl-Alt-B|Ctrl-Alt-W"},exec:function(M){M.wholeWordOption.checked=!M.wholeWordOption.checked,M.$syncOptions()}},{name:"toggleReplace",exec:function(M){M.replaceOption.checked=!M.replaceOption.checked,M.$syncOptions()}},{name:"searchInSelection",exec:function(M){M.searchOption.checked=!M.searchRange,M.setSearchRange(M.searchOption.checked&&M.editor.getSelectionRange()),M.$syncOptions()}}]),this.setSearchRange=function(M){(this.searchRange=M)?this.searchRangeMarker=this.editor.session.addMarker(M,"ace_active-line"):this.searchRangeMarker&&(this.editor.session.removeMarker(this.searchRangeMarker),this.searchRangeMarker=null)},this.$syncOptions=function(M){Z.setCssClass(this.replaceOption,"checked",this.searchRange),Z.setCssClass(this.searchOption,"checked",this.searchOption.checked),this.replaceOption.textContent=this.replaceOption.checked?"-":"+",Z.setCssClass(this.regExpOption,"checked",this.regExpOption.checked),Z.setCssClass(this.wholeWordOption,"checked",this.wholeWordOption.checked),Z.setCssClass(this.caseSensitiveOption,"checked",this.caseSensitiveOption.checked);var R=this.editor.getReadOnly();this.replaceOption.style.display=R?"none":"",this.replaceBox.style.display=this.replaceOption.checked&&!R?"":"none",this.find(!1,!1,M)},this.highlight=function(M){this.editor.session.highlight(M||this.editor.$search.$options.re),this.editor.renderer.updateBackMarkers()},this.find=function(M,R,S){M=!this.editor.find(this.searchInput.value,{skipCurrent:M,backwards:R,wrap:!0,regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked,preventScroll:S,range:this.searchRange})&&this.searchInput.value,Z.setCssClass(this.searchBox,"ace_nomatch",M),this.editor._emit("findSearchBox",{match:!M}),this.highlight(),this.updateCounter()},this.updateCounter=function(){var M=this.editor,R=M.$search.$options.re,S=0,y=0;if(R){var w,p,f=this.searchRange?M.session.getTextRange(this.searchRange):M.getValue(),m=M.session.doc.positionToIndex(M.selection.anchor);for(this.searchRange&&(m-=M.session.doc.positionToIndex(this.searchRange.start)),R.lastIndex=0;(p=R.exec(f))&&((w=p.index)<=m&&y++,!(999<++S))&&(p[0]||(R.lastIndex=w+=1,!(w>=f.length))););}this.searchCounter.textContent=y+" of "+(999<S?"999+":S)},this.findNext=function(){this.find(!0,!1)},this.findPrev=function(){this.find(!0,!0)},this.findAll=function(){var M=!this.editor.findAll(this.searchInput.value,{regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked})&&this.searchInput.value;Z.setCssClass(this.searchBox,"ace_nomatch",M),this.editor._emit("findSearchBox",{match:!M}),this.highlight(),this.hide()},this.replace=function(){this.editor.getReadOnly()||this.editor.replace(this.replaceInput.value)},this.replaceAndFindNext=function(){this.editor.getReadOnly()||(this.editor.replace(this.replaceInput.value),this.findNext())},this.replaceAll=function(){this.editor.getReadOnly()||this.editor.replaceAll(this.replaceInput.value)},this.hide=function(){this.active=!1,this.setSearchRange(null),this.editor.off("changeSession",this.setSession),this.element.style.display="none",this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb),this.editor.focus()},this.show=function(M,R){this.active=!0,this.editor.on("changeSession",this.setSession),this.element.style.display="",this.replaceOption.checked=R,M&&(this.searchInput.value=M),this.searchInput.focus(),this.searchInput.select(),this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb),this.$syncOptions(!0)},this.isFocused=function(){var M=document.activeElement;return M==this.searchInput||M==this.replaceInput}}.call(U.prototype),c.SearchBox=U,c.Search=function(M,R){(M.searchBox||new U(M)).show(M.session.getTextRange(),R)}}),ace.require(["ace/ext/searchbox"],function(ce){Ce&&(Ce.exports=ce)})},4091:function(Ce,P,ae){Ce=ae.nmd(Ce),ace.define("ace/mode/json_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(Y,c,K){"use strict";function U(){this.$rules={start:[{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"string",regex:'"',next:"string"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"text",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"comment",regex:"\\/\\/.*$"},{token:"comment.start",regex:"\\/\\*",next:"comment"},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"punctuation.operator",regex:/[,]/},{token:"text",regex:"\\s+"}],string:[{token:"constant.language.escape",regex:/\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|["\\\/bfnrt])/},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],comment:[{token:"comment.end",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}]}}var Z=Y("../lib/oop");Y=Y("./text_highlight_rules").TextHighlightRules,Z.inherits(U,Y),c.JsonHighlightRules=U}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(ce,c,K){"use strict";function U(){}var Z=ce("../range").Range;(function(){this.checkOutdent=function(Y,H){return!!/^\s+$/.test(Y)&&/^\s*\}/.test(H)},this.autoOutdent=function(Y,H){var F,k=Y.getLine(H).match(/^(\s*\})/);return k&&(F=Y.findMatchingBracket({row:H,column:k=k[1].length}))&&F.row!=H?(F=this.$getIndent(Y.getLine(F.row)),void Y.replace(new Z(H,0,H,k-1),F)):0},this.$getIndent=function(Y){return Y.match(/^\s*/)[0]}}).call(U.prototype),c.MatchingBraceOutdent=U}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(Y,H,K){"use strict";var U=Y("../../lib/oop"),Z=Y("../../range").Range;Y=Y("./fold_mode").FoldMode,H=H.FoldMode=function(F){F&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+F.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+F.end)))},U.inherits(H,Y),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(F,k,_){var M=F.getLine(_);return!this.singleLineBlockCommentRe.test(M)||this.startRegionRe.test(M)||this.tripleStarBlockCommentRe.test(M)?!(F=this._getFoldWidgetBase(F,k,_))&&this.startRegionRe.test(M)?"start":F:""},this.getFoldWidgetRange=function(F,k,_,M){var R,S,y,w=F.getLine(_);return this.startRegionRe.test(w)?this.getCommentRegionBlock(F,w,_):(S=w.match(this.foldingStartMarker))?(y=S.index,S[1]?this.openingBracketBlock(F,S[1],_,y):((R=F.getCommentFoldRange(_,y+S[0].length,1))&&!R.isMultiLine()&&(M?R=this.getSectionRange(F,_):"all"!=k&&(R=null)),R)):"markbegin"!==k&&(S=w.match(this.foldingStopMarker))?(y=S.index+S[0].length,S[1]?this.closingBracketBlock(F,S[1],_,y):F.getCommentFoldRange(_,y,-1)):void 0},this.getSectionRange=function(F,k){for(var _=(w=F.getLine(k)).search(/\S/),M=k,R=w.length,S=k+=1,y=F.getLength();++k<y;){var w,p=(w=F.getLine(k)).search(/\S/);if(-1!==p){if(p<_)break;var f=this.getFoldWidgetRange(F,"all",k);if(f){if(f.start.row<=M)break;if(f.isMultiLine())k=f.end.row;else if(_==p)break}S=k}}return new Z(M,R,S,F.getLine(S).length)},this.getCommentRegionBlock=function(F,k,_){for(var M=k.search(/\s*$/),R=F.getLength(),S=_,y=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,w=1;++_<R;){k=F.getLine(_);var p=y.exec(k);if(p&&(p[1]?w--:w++,!w))break}if(S<_)return new Z(S,M,_,k.length)}}.call(H.prototype)}),ace.define("ace/mode/json",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/json_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle","ace/worker/worker_client"],function(ce,c,K){"use strict";function U(){this.HighlightRules=H,this.$outdent=new F,this.$behaviour=new k,this.foldingRules=new _}var Z=ce("../lib/oop"),Y=ce("./text").Mode,H=ce("./json_highlight_rules").JsonHighlightRules,F=ce("./matching_brace_outdent").MatchingBraceOutdent,k=ce("./behaviour/cstyle").CstyleBehaviour,_=ce("./folding/cstyle").FoldMode,M=ce("../worker/worker_client").WorkerClient;Z.inherits(U,Y),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.getNextLineIndent=function(R,S,y){var w=this.$getIndent(S);return"start"==R&&S.match(/^.*[\{\(\[]\s*$/)&&(w+=y),w},this.checkOutdent=function(R,S,y){return this.$outdent.checkOutdent(S,y)},this.autoOutdent=function(R,S,y){this.$outdent.autoOutdent(S,y)},this.createWorker=function(R){var S=new M(["ace"],"ace/mode/json_worker","JsonWorker");return S.attachToDocument(R.getDocument()),S.on("annotate",function(y){R.setAnnotations(y.data)}),S.on("terminate",function(){R.clearAnnotations()}),S},this.$id="ace/mode/json"}.call(U.prototype),c.Mode=U}),ace.require(["ace/mode/json"],function(ce){Ce&&(Ce.exports=ce)})},8903:function(_,P,ae){"use strict";var ce=ae(5689),c=ae(3969),K=ae(5255),U=ae(4293),Z=ae(3508),Y=ae(3368),H=ae(742),F=ae(9394),k=ae(3724),M=((_.exports=y).prototype.validate=function(C,x){var L;if("string"==typeof C){if(!(L=this.getSchema(C)))throw new Error('no schema with key or ref "'+C+'"')}else L=(C=this._addSchema(C)).validate||this._compile(C);return C=L(x),!0!==L.$async&&(this.errors=L.errors),C},y.prototype.compile=function(C,x){return(C=this._addSchema(C,void 0,x)).validate||this._compile(C)},y.prototype.addSchema=function(C,x,L,Q){if(Array.isArray(C))for(var G=0;G<C.length;G++)this.addSchema(C[G],void 0,L,Q);else{var T=this._getId(C);if(void 0!==T&&"string"!=typeof T)throw new Error("schema id must be string");v(this,x=c.normalizeId(x||T)),this._schemas[x]=this._addSchema(C,L,Q,!0)}return this},y.prototype.addMetaSchema=function(C,x,L){return this.addSchema(C,x,L,!0),this},y.prototype.validateSchema=function(C,x){var Q,G,L=C.$schema;if(void 0!==L&&"string"!=typeof L)throw new Error("$schema must be a string");if(!(L=L||this._opts.defaultMeta||(Q=this,G=Q._opts.meta,Q._opts.defaultMeta="object"==typeof G?Q._getId(G)||G:Q.getSchema(M)?M:void 0,Q._opts.defaultMeta)))return this.logger.warn("meta-schema not available"),!(this.errors=null);if(!(L=this.validate(L,C))&&x){if(C="schema is invalid: "+this.errorsText(),"log"!=this._opts.validateSchema)throw new Error(C);this.logger.error(C)}return L},y.prototype.getSchema=function(C){var x=w(this,C);switch(typeof x){case"object":return x.validate||this._compile(x);case"string":return this.getSchema(x);case"undefined":return function(L,Q){var T,V,J,G=c.schema.call(L,{schema:{}},Q);if(G)return J=ce.call(L,T=G.schema,V=G.root,void 0,G=G.baseId),L._fragments[Q]=new U({ref:Q,fragment:!0,schema:T,root:V,baseId:G,validate:J}),J}(this,C)}},y.prototype.removeSchema=function(C){if(C instanceof RegExp)p(this,this._schemas,C),p(this,this._refs,C);else switch(typeof C){case"undefined":return p(this,this._schemas),p(this,this._refs),this._cache.clear(),this;case"string":var x=w(this,C);return x&&this._cache.del(x.cacheKey),delete this._schemas[C],delete this._refs[C],this;case"object":x=(x=this._opts.serialize)?x(C):C,this._cache.del(x),(x=this._getId(C))&&(x=c.normalizeId(x),delete this._schemas[x],delete this._refs[x])}return this},y.prototype.addFormat=function(C,x){return"string"==typeof x&&(x=new RegExp(x)),this._formats[C]=x,this},y.prototype.errorsText=function(C,x){if(!(C=C||this.errors))return"No errors";for(var L=void 0===(x=x||{}).separator?", ":x.separator,Q=void 0===x.dataVar?"data":x.dataVar,G="",T=0;T<C.length;T++){var V=C[T];V&&(G+=Q+V.dataPath+" "+V.message+L)}return G.slice(0,-L.length)},y.prototype._addSchema=function(C,J,L,Q){if("object"!=typeof C&&"boolean"!=typeof C)throw new Error("schema should be object or boolean");var V,G=(G=this._opts.serialize)?G(C):C,T=this._cache.get(G);if(T)return T;Q=Q||!1!==this._opts.addUsedSchema,(T=c.normalizeId(this._getId(C)))&&Q&&v(this,T),(J=!1!==this._opts.validateSchema&&!J)&&!(V=T&&T==c.normalizeId(C.$schema))&&this.validateSchema(C,!0);var X=c.ids.call(this,C);return X=new U({id:T,schema:C,localRefs:X,cacheKey:G,meta:L}),"#"!=T[0]&&Q&&(this._refs[T]=X),this._cache.put(G,X),J&&V&&this.validateSchema(C,!0),X},y.prototype._compile=function(C,x){if(C.compiling)return(C.validate=G).schema=C.schema,G.errors=null,G.root=x||G,!0===C.schema.$async&&(G.$async=!0),G;var L,Q;C.compiling=!0,C.meta&&(L=this._opts,this._opts=this._metaOpts);try{Q=ce.call(this,C.schema,x,C.localRefs)}catch(T){throw delete C.validate,T}finally{C.compiling=!1,C.meta&&(this._opts=L)}return C.validate=Q,C.refs=Q.refs,C.refVal=Q.refVal,C.root=Q.root,Q;function G(){var T=C.validate,V=T.apply(this,arguments);return G.errors=T.errors,V}},y.prototype.compileAsync=ae(9677),_=ae(7931),y.prototype.addKeyword=_.add,y.prototype.getKeyword=_.get,y.prototype.removeKeyword=_.remove,y.prototype.validateKeyword=_.validate,_=ae(5359),y.ValidationError=_.Validation,y.MissingRefError=_.MissingRef,y.$dataMetaSchema=F,"http://json-schema.org/draft-07/schema"),R=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],S=["/properties"];function y(C){if(!(this instanceof y))return new y(C);C=this._opts=k.copy(C)||{};var x=(q=this)._opts.logger;if(!1===x)q.logger={log:O,warn:O,error:O};else{if(!("object"==typeof(x=void 0===x?console:x)&&x.log&&x.warn&&x.error))throw new Error("logger must implement log, warn and error methods");q.logger=x}if(this._schemas={},this._refs={},this._fragments={},this._formats=Y(C.format),this._cache=C.cache||new K,this._loadingSchemas={},this._compilations=[],this.RULES=H(),this._getId=function(N){switch(N.schemaId){case"auto":return h;case"id":return f;default:return m}}(C),C.loopRequired=C.loopRequired||1/0,"property"==C.errorDataPath&&(C._errorDataPathProperty=!0),void 0===C.serialize&&(C.serialize=Z),this._metaOpts=function(N){for(var re=k.copy(N._opts),ue=0;ue<R.length;ue++)delete re[R[ue]];return re}(this),C.formats){var L,Q=this;for(L in Q._opts.formats)Q.addFormat(L,Q._opts.formats[L])}if(C.keywords){var T,V=this;for(T in V._opts.keywords)V.addKeyword(T,V._opts.keywords[T])}var X,q,ee=((q=this)._opts.$data&&(X=ae(894),q.addMetaSchema(X,X.$id,!0)),!1!==q._opts.meta&&(X=ae(6680),q._opts.$data&&(X=F(X,S)),q.addMetaSchema(X,M,!0),q._refs["http://json-schema.org/schema"]=M),"object"==typeof C.meta&&this.addMetaSchema(C.meta),C.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),this),j=ee._opts.schemas;if(j)if(Array.isArray(j))ee.addSchema(j);else for(var D in j)ee.addSchema(j[D],D)}function w(C,x){return x=c.normalizeId(x),C._schemas[x]||C._refs[x]||C._fragments[x]}function p(C,x,L){for(var Q in x){var G=x[Q];G.meta||L&&!L.test(Q)||(C._cache.del(G.cacheKey),delete x[Q])}}function f(C){return C.$id&&this.logger.warn("schema $id ignored",C.$id),C.id}function m(C){return C.id&&this.logger.warn("schema id ignored",C.id),C.$id}function h(C){if(C.$id&&C.id&&C.$id!=C.id)throw new Error("schema $id is different from id");return C.$id||C.id}function v(C,x){if(C._schemas[x]||C._refs[x])throw new Error('schema with key or id "'+x+'" already exists')}function O(){}},5255:function(Ce){"use strict";(Ce=Ce.exports=function(){this._cache={}}).prototype.put=function(P,ae){this._cache[P]=ae},Ce.prototype.get=function(P){return this._cache[P]},Ce.prototype.del=function(P){delete this._cache[P]},Ce.prototype.clear=function(){this._cache={}}},9677:function(Ce,P,ae){"use strict";var ce=ae(5359).MissingRef;Ce.exports=function c(K,U,Z){var Y=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof U&&(Z=U,U=void 0);var H=F(K).then(function(){var k=Y._addSchema(K,void 0,U);return k.validate||function _(M){try{return Y._compile(M)}catch(S){if(S instanceof ce)return function R(S){var y=S.missingSchema;if(p(y))throw new Error("Schema "+y+" is loaded but "+S.missingRef+" cannot be resolved");return(S=Y._loadingSchemas[y])||(S=Y._loadingSchemas[y]=Y._opts.loadSchema(y)).then(w,w),S.then(function(f){if(!p(y))return F(f).then(function(){p(y)||Y.addSchema(f,y,void 0,U)})}).then(function(){return _(M)});function w(){delete Y._loadingSchemas[y]}function p(f){return Y._refs[f]||Y._schemas[f]}}(S);throw S}}(k)});return Z&&H.then(function(k){Z(null,k)},Z),H;function F(k){return(k=k.$schema)&&!Y.getSchema(k)?c.call(Y,{$ref:k},!0):Promise.resolve()}}},5359:function(Ce,P,ae){"use strict";var ce=ae(3969);function c(U,Z,Y){this.message=Y||c.message(U,Z),this.missingRef=ce.url(U,Z),this.missingSchema=ce.normalizeId(ce.fullPath(this.missingRef))}function K(U){return U.prototype=Object.create(Error.prototype),U.prototype.constructor=U}Ce.exports={Validation:K(function(U){this.message="validation failed",this.errors=U,this.ajv=this.validation=!0}),MissingRef:K(c)},c.message=function(U,Z){return"can't resolve reference "+Z+" from id "+U}},3368:function(Ce,P,Z){"use strict";var ce=Z(3724),c=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,K=[0,31,28,31,30,31,30,31,31,30,31,30,31],U=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,Y=(Z=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i),H=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,F=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,k=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,_=/^(?:\/(?:[^~/]|~0|~1)*)*$/,M=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,R=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function S(v){return ce.copy(S[v="full"==v?"full":"fast"])}function y(x){var O,C;return!!(x=x.match(c))&&(O=+x[1],C=+x[2],x=+x[3],1<=C)&&C<=12&&1<=x&&x<=(2!=C||(x=O)%4!=0||x%100==0&&x%400!=0?K[C]:29)}function w(Q,O){var C,x,L;return!!(Q=Q.match(U))&&(C=Q[1],x=Q[2],L=Q[3],Q=Q[5],C<=23&&x<=59&&L<=59||23==C&&59==x&&60==L)&&(!O||Q)}(Ce.exports=S).fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":H,url:F,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:Z,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:h,uuid:k,"json-pointer":_,"json-pointer-uri-fragment":M,"relative-json-pointer":R},S.full={date:y,time:w,"date-time":function(v){return 2==(v=v.split(p)).length&&y(v[0])&&w(v[1],!0)},uri:function(v){return f.test(v)&&Y.test(v)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":H,url:F,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:Z,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:h,uuid:k,"json-pointer":_,"json-pointer-uri-fragment":M,"relative-json-pointer":R};var p=/t|\s/i,f=/\/|:/,m=/[^\\]\\Z/;function h(v){if(m.test(v))return!1;try{return new RegExp(v),!0}catch{return!1}}},5689:function(Ce,P,ae){"use strict";var ce=ae(3969),c=ae(3724),K=ae(5359),U=ae(3508),Z=ae(1869),Y=c.ucs2length,H=ae(2303),F=K.Validation;function _(p,f,m){for(var h=0;h<this._compilations.length;h++){var v=this._compilations[h];if(v.schema==p&&v.root==f&&v.baseId==m)return h}return-1}function M(p,f){return"var pattern"+p+" = new RegExp("+c.toQuotedString(f[p])+");"}function R(p){return"var default"+p+" = defaults["+p+"];"}function S(p,f){return void 0===f[p]?"":"var refVal"+p+" = refVal["+p+"];"}function y(p){return"var customRule"+p+" = customRules["+p+"];"}function w(p,f){if(!p.length)return"";for(var m="",h=0;h<p.length;h++)m+=f(h,p);return m}Ce.exports=function k(p,f,m,h){var v=this,O=this._opts,C=[void 0],x={},L=[],Q={},G=[],T={},V=[],J=function(Ie,Ge,oe){var pe=_.call(this,Ie,Ge,oe);return 0<=pe?{index:pe,compiling:!0}:(this._compilations[pe=this._compilations.length]={schema:Ie,root:Ge,baseId:oe},{index:pe,compiling:!1})}.call(this,p,f=f||{schema:p,refVal:C,refs:x},h),X=this._compilations[J.index];if(J.compiling)return X.callValidate=function N(){var Ie=X.validate,Ge=Ie.apply(this,arguments);return N.errors=Ie.errors,Ge};var q=this._formats,ee=this.RULES;try{var j=re(p,f,m,h),D=(X.validate=j,X.callValidate);return D&&(D.schema=j.schema,D.errors=null,D.refs=j.refs,D.refVal=j.refVal,D.root=j.root,D.$async=j.$async,O.sourceCode)&&(D.source=j.source),j}finally{(function(Ie,Ge,oe){0<=(Ie=_.call(this,Ie,Ge,oe))&&this._compilations.splice(Ie,1)}).call(this,p,f,h)}function re(Ie,Ge,oe,pe){var ge=!Ge||Ge.schema==Ie;if(Ge.schema!=f.schema)return k.call(v,Ie,Ge,oe,pe);oe=!0===Ie.$async,pe=Z({isTop:!0,schema:Ie,isRoot:ge,baseId:pe,root:Ge,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:K.MissingRef,RULES:ee,validate:Z,util:c,resolve:ce,resolveRef:ue,usePattern:Te,useDefault:Re,useCustomRule:Me,opts:O,formats:q,logger:v.logger,self:v}),pe=w(C,S)+w(L,M)+w(G,R)+w(V,y)+pe,O.processCode&&(pe=O.processCode(pe,Ie));try{var be=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",pe)(v,ee,q,f,C,G,V,H,Y,F);C[0]=be}catch(ie){throw v.logger.error("Error compiling schema, function code:",pe),ie}return be.schema=Ie,be.errors=null,be.refs=x,be.refVal=C,be.root=ge?be:Ge,oe&&(be.$async=!0),!0===O.sourceCode&&(be.source={code:pe,patterns:L,defaults:G}),be}function ue(Ie,Ge,ie){Ge=ce.url(Ie,Ge);var pe=x[Ge];if(void 0!==pe)return Ae(ge=C[pe],be="refVal["+pe+"]");if(!ie&&f.refs&&void 0!==(pe=f.refs[Ge]))return Ae(ge=f.refVal[pe],be=ve(Ge,ge));var ge,be=ve(Ge);if(void 0!==(ie=void 0===(ie=ce.call(v,re,f,Ge))&&(pe=m&&m[Ge])?ce.inlineRef(pe,O.inlineRefs)?pe:k.call(v,pe,f,m,Ie):ie))return pe=x[pe=Ge],C[pe]=ge=ie,Ae(ie,be);delete x[Ge]}function ve(Ie,Ge){var oe=C.length;return C[oe]=Ge,"refVal"+(x[Ie]=oe)}function Ae(Ie,Ge){return"object"==typeof Ie||"boolean"==typeof Ie?{code:Ge,schema:Ie,inline:!0}:{code:Ge,$async:Ie&&!!Ie.$async}}function Te(Ie){var Ge=Q[Ie];return void 0===Ge&&(Ge=Q[Ie]=L.length,L[Ge]=Ie),"pattern"+Ge}function Re(Ie){switch(typeof Ie){case"boolean":case"number":return""+Ie;case"string":return c.toQuotedString(Ie);case"object":var Ge,oe;return null===Ie?"null":(Ge=U(Ie),void 0===(oe=T[Ge])&&(oe=T[Ge]=G.length,G[oe]=Ie),"default"+oe)}}function Me(Ie,Ge,oe,pe){if(!1!==v._opts.validateSchema){if((be=Ie.definition.dependencies)&&!be.every(function(_e){return Object.prototype.hasOwnProperty.call(oe,_e)}))throw new Error("parent schema must have all required keywords: "+be.join(","));if((be=Ie.definition.validateSchema)&&!be(Ge)){if(be="keyword schema is invalid: "+v.errorsText(be.errors),"log"!=v._opts.validateSchema)throw new Error(be);v.logger.error(be)}}var ge,be,ie=Ie.definition.inline,se=Ie.definition.macro;if(be=Ie.definition.compile)ge=be.call(v,Ge,oe,pe);else if(se)ge=se.call(v,Ge,oe,pe),!1!==O.validateSchema&&v.validateSchema(ge,!0);else if(ie)ge=ie.call(v,pe,Ie.keyword,Ge,oe);else if(!(ge=Ie.definition.validate))return;if(void 0===ge)throw new Error('custom keyword "'+Ie.keyword+'"failed to compile');return{code:"customRule"+(be=V.length),validate:V[be]=ge}}}},3969:function(Ce,P,ae){"use strict";var ce=ae(7533),c=ae(2303),K=ae(3724),U=ae(4293),Z=ae(500);function Y(f,m,h){var v,O,C,x=this._refs[h];if("string"==typeof x){if(!this._refs[x])return Y.call(this,f,m,x);x=this._refs[x]}return(x=x||this._schemas[h])instanceof U?M(x.schema,this._opts.inlineRefs)?x.schema:x.validate||this._compile(x):((x=H.call(this,m,h))&&(v=x.schema,m=x.root,C=x.baseId),v instanceof U?O=v.validate||f.call(this,v.schema,m,void 0,C):void 0!==v&&(O=M(v,this._opts.inlineRefs)?v:f.call(this,v,m,void 0,C)),O)}function H(f,m){var h=ce.parse(m),v=S(h),O=R(this._getId(f.schema));if(0===Object.keys(f.schema).length||v!==O){v=w(v);var C=this._refs[v];if("string"==typeof C)return function(L,Q,G){var T,V;if(Q=H.call(this,L,Q))return V=Q.baseId,L=Q.root,(Q=this._getId(T=Q.schema))&&(V=p(V,Q)),k.call(this,G,V,T,L)}.call(this,f,C,h);if(C instanceof U)C.validate||this._compile(C);else{if(!((C=this._schemas[v])instanceof U))return;if(C.validate||this._compile(C),v==w(m))return{schema:C,root:f,baseId:O}}if(!(f=C).schema)return;O=R(this._getId(f.schema))}return k.call(this,h,O,f.schema,f)}(Ce.exports=Y).normalizeId=w,Y.fullPath=R,Y.url=p,Y.ids=function(f){var m=w(this._getId(f)),h={"":m},v={"":R(m,!1)},O={},C=this;return Z(f,{allKeys:!0},function(x,L,Q,G,T,V,J){if(""!==L){var X=C._getId(x),q=h[G];if(G=v[G]+"/"+T,void 0!==J&&(G+="/"+("number"==typeof J?J:K.escapeFragment(J))),"string"==typeof X)if(X=q=w(q?ce.resolve(q,X):X),(T="string"==typeof(T=C._refs[X])?C._refs[T]:T)&&T.schema){if(!c(x,T.schema))throw new Error('id "'+X+'" resolves to more than one schema')}else if(X!=w(G))if("#"==X[0]){if(O[X]&&!c(x,O[X]))throw new Error('id "'+X+'" resolves to more than one schema');O[X]=x}else C._refs[X]=G;h[L]=q,v[L]=G}}),O},Y.inlineRef=M,Y.schema=H;var F=K.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function k(f,m,h,v){if(f.fragment=f.fragment||"","/"==f.fragment.slice(0,1)){for(var O=f.fragment.split("/"),C=1;C<O.length;C++){var x=O[C];if(x){if(void 0===(h=h[x=K.unescapeFragment(x)]))break;F[x]||((x=this._getId(h))&&(m=p(m,x)),h.$ref&&(x=p(m,h.$ref),x=H.call(this,v,x))&&(h=x.schema,v=x.root,m=x.baseId))}}return void 0!==h&&h!==v.schema?{schema:h,root:v,baseId:m}:void 0}}var _=K.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function M(f,m){return!1!==m&&(void 0===m||!0===m?function h(v){var O;if(Array.isArray(v)){for(var C=0;C<v.length;C++)if("object"==typeof(O=v[C])&&!h(O))return!1}else for(var x in v)if("$ref"==x||"object"==typeof(O=v[x])&&!h(O))return!1;return!0}(f):m?function h(v){var O,C=0;if(Array.isArray(v)){for(var x=0;x<v.length;x++)if("object"==typeof(O=v[x])&&(C+=h(O)),C==1/0)return 1/0}else for(var L in v){if("$ref"==L)return 1/0;if(_[L])C++;else if("object"==typeof(O=v[L])&&(C+=h(O)+1),C==1/0)return 1/0}return C}(f)<=m:void 0)}function R(f,m){return!1!==m&&(f=w(f)),S(ce.parse(f))}function S(f){return ce.serialize(f).split("#")[0]+"#"}var y=/#\/?$/;function w(f){return f?f.replace(y,""):""}function p(f,m){return m=w(m),ce.resolve(f,m)}},742:function(Ce,P,ae){"use strict";var ce=ae(9646),c=ae(3724).toHash;Ce.exports=function(){var K=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],U=["type","$comment"];return K.all=c(U),K.types=c(["number","integer","string","array","object","boolean","null"]),K.forEach(function(Z){Z.rules=Z.rules.map(function(Y){var H,F;return"object"==typeof Y&&(F=Y[H=Object.keys(Y)[0]],Y=H,F.forEach(function(k){U.push(k),K.all[k]=!0})),U.push(Y),K.all[Y]={keyword:Y,code:ce[Y],implements:F}}),K.all.$comment={keyword:"$comment",code:ce.$comment},Z.type&&(K.types[Z.type]=Z)}),K.keywords=c(U.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),K.custom={},K}},4293:function(Ce,P,ae){"use strict";var ce=ae(3724);Ce.exports=function(c){ce.copy(c,this)}},6887:function(Ce){"use strict";Ce.exports=function(P){for(var ae,ce=0,c=P.length,K=0;K<c;)ce++,55296<=(ae=P.charCodeAt(K++))&&ae<=56319&&K<c&&56320==(64512&P.charCodeAt(K))&&K++;return ce}},3724:function(Ce,P,ae){"use strict";function ce(y,w,p,f){var m=f?" !== ":" === ",h=f?" || ":" && ",v=f?"!":"",O=f?"":"!";switch(y){case"null":return w+m+"null";case"array":return v+"Array.isArray("+w+")";case"object":return"("+v+w+h+"typeof "+w+m+'"object"'+h+O+"Array.isArray("+w+"))";case"integer":return"(typeof "+w+m+'"number"'+h+O+"("+w+" % 1)"+h+w+m+w+(p?h+v+"isFinite("+w+")":"")+")";case"number":return"(typeof "+w+m+'"'+y+'"'+(p?h+v+"isFinite("+w+")":"")+")";default:return"typeof "+w+m+'"'+y+'"'}}Ce.exports={copy:function(y,w){for(var p in w=w||{},y)w[p]=y[p];return w},checkDataType:ce,checkDataTypes:function(y,w,p){if(1===y.length)return ce(y[0],w,p,!0);var f,m="";for(f in(y=K(y)).array&&y.object&&(m=y.null?"(":"(!"+w+" || ",m+="typeof "+w+' !== "object")',delete y.null,delete y.array,delete y.object),y.number&&delete y.integer,y)m+=(m?" && ":"")+ce(f,w,p,!0);return m},coerceToTypes:function(y,w){if(!Array.isArray(w))return c[w]?[w]:"array"===y&&"array"===w?["array"]:void 0;for(var p=[],f=0;f<w.length;f++){var m=w[f];(c[m]||"array"===y&&"array"===m)&&(p[p.length]=m)}return p.length?p:void 0},toHash:K,getProperty:Y,escapeQuotes:H,equal:ae(2303),ucs2length:ae(6887),varOccurences:function(y,w){return(y=y.match(new RegExp(w+="[^0-9]","g")))?y.length:0},varReplace:function(y,w,p){return w+="([^0-9])",p=p.replace(/\$/g,"$$$$"),y.replace(new RegExp(w,"g"),p+"$1")},schemaHasRules:function(y,w){if("boolean"==typeof y)return!y;for(var p in y)if(w[p])return!0},schemaHasRulesExcept:function(y,w,p){if("boolean"==typeof y)return!y&&"not"!=p;for(var f in y)if(f!=p&&w[f])return!0},schemaUnknownRules:function(y,w){if("boolean"!=typeof y)for(var p in y)if(!w[p])return p},toQuotedString:F,getPathExpr:function(y,w,p,f){return M(y,p?"'/' + "+w+(f?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):f?"'[' + "+w+" + ']'":"'[\\'' + "+w+" + '\\']'")},getPath:function(y,w,p){return M(y,p=F(p?"/"+R(w):Y(w)))},getData:function(y,w,p){var f,m,h;if(""===y)return"rootData";if("/"==y[0]){if(!k.test(y))throw new Error("Invalid JSON-pointer: "+y);f=y,m="rootData"}else{if(!(h=y.match(_)))throw new Error("Invalid JSON-pointer: "+y);if(y=+h[1],"#"==(f=h[2])){if(w<=y)throw new Error("Cannot access property/index "+y+" levels up, current level is "+w);return p[w-y]}if(w<y)throw new Error("Cannot access data "+y+" levels up, current level is "+w);if(m="data"+(w-y||""),!f)return m}for(var v=m,O=f.split("/"),C=0;C<O.length;C++){var x=O[C];x&&(v+=" && "+(m+=Y(S(x))))}return v},unescapeFragment:function(y){return S(decodeURIComponent(y))},unescapeJsonPointer:S,escapeFragment:function(y){return encodeURIComponent(R(y))},escapeJsonPointer:R};var c=K(["string","number","integer","boolean","null"]);function K(y){for(var w={},p=0;p<y.length;p++)w[y[p]]=!0;return w}var U=/^[a-z$_][a-z$_0-9]*$/i,Z=/'|\\/g;function Y(y){return"number"==typeof y?"["+y+"]":U.test(y)?"."+y:"['"+H(y)+"']"}function H(y){return y.replace(Z,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function F(y){return"'"+H(y)+"'"}var k=/^\/(?:[^~]|~0|~1)*$/,_=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function M(y,w){return'""'==y?w:(y+" + "+w).replace(/([^\\])' \+ '/g,"$1")}function R(y){return y.replace(/~/g,"~0").replace(/\//g,"~1")}function S(y){return y.replace(/~1/g,"/").replace(/~0/g,"~")}},9394:function(Ce){"use strict";var P=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];Ce.exports=function(ae,ce){for(var c=0;c<ce.length;c++){ae=JSON.parse(JSON.stringify(ae));for(var K=ce[c].split("/"),U=ae,Z=1;Z<K.length;Z++)U=U[K[Z]];for(Z=0;Z<P.length;Z++){var Y=P[Z],H=U[Y];H&&(U[Y]={anyOf:[H,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return ae}},5868:function(Ce,P,ae){"use strict";ae=ae(6680),Ce.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:ae.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:ae.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},1796:function(Ce){"use strict";Ce.exports=function(P,ae,ce){var c,K,U,Z,Y,H=" ",F=P.level,k=P.dataLevel,_=P.schema[ae],M=P.schemaPath+P.util.getProperty(ae),R=P.errSchemaPath+"/"+ae,S=!P.opts.allErrors,y="data"+(k||""),w=P.opts.$data&&_&&_.$data,p=w?(H+=" var schema"+F+" = "+P.util.getData(_.$data,k,P.dataPathArr)+"; ","schema"+F):_,f="maximum"==ae,m=f?"exclusiveMaximum":"exclusiveMinimum",h=P.schema[m],v=P.opts.$data&&h&&h.$data,O=f?"<":">",C=f?">":"<",x=void 0;if(!w&&"number"!=typeof _&&void 0!==_)throw new Error(ae+" must be number");if(!v&&void 0!==h&&"number"!=typeof h&&"boolean"!=typeof h)throw new Error(m+" must be number or boolean");v?(k=P.util.getData(h.$data,k,P.dataPathArr),U="exclIsNumber"+F,Z="' + "+(Y="op"+F)+" + '",x=m,(L=L||[]).push(H=H+" var schemaExcl"+F+" = "+k+";  var "+(c="exclusive"+F)+"; var "+(K="exclType"+F)+" = typeof "+(k="schemaExcl"+F)+"; if ("+K+" != 'boolean' && "+K+" != 'undefined' && "+K+" != 'number') { "),H="",!1!==P.createErrors?(H+=" { keyword: '"+(x||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(R)+" , params: {} ",!1!==P.opts.messages&&(H+=" , message: '"+m+" should be boolean' "),P.opts.verbose&&(H+=" , schema: validate.schema"+M+" , parentSchema: validate.schema"+P.schemaPath+" , data: "+y+" "),H+=" } "):H+=" {} ",Q=H,H=L.pop(),H+=!P.compositeRule&&S?P.async?" throw new ValidationError(["+Q+"]); ":" validate.errors = ["+Q+"]; return false; ":" var err = "+Q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",H+=" } else if ( ",w&&(H+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),H+=" "+K+" == 'number' ? ( ("+c+" = "+p+" === undefined || "+k+" "+O+"= "+p+") ? "+y+" "+C+"= "+k+" : "+y+" "+C+" "+p+" ) : ( ("+c+" = "+k+" === true) ? "+y+" "+C+"= "+p+" : "+y+" "+C+" "+p+" ) || "+y+" !== "+y+") { var op"+F+" = "+c+" ? '"+O+"' : '"+O+"='; ",void 0===_&&(R=P.errSchemaPath+"/"+(x=m),p=k,w=v)):(Z=O,(U="number"==typeof h)&&w?(Y="'"+Z+"'",H+=" if ( ",w&&(H+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),H+=" ( "+p+" === undefined || "+h+" "+O+"= "+p+" ? "+y+" "+C+"= "+h+" : "+y+" "+C+" "+p+" ) || "+y+" !== "+y+") { "):(U&&void 0===_?(c=!0,R=P.errSchemaPath+"/"+(x=m),p=h,C+="="):(U&&(p=Math[f?"min":"max"](h,_)),h===(!U||p)?(c=!0,R=P.errSchemaPath+"/"+(x=m),C+="="):(c=!1,Z+="=")),Y="'"+Z+"'",H+=" if ( ",w&&(H+=" ("+p+" !== undefined && typeof "+p+" != 'number') || "),H+=" "+y+" "+C+" "+p+" || "+y+" !== "+y+") { ")),x=x||ae,(L=L||[]).push(H),H="",!1!==P.createErrors?(H+=" { keyword: '"+(x||"_limit")+"' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(R)+" , params: { comparison: "+Y+", limit: "+p+", exclusive: "+c+" } ",!1!==P.opts.messages&&(H=H+" , message: 'should be "+Z+" "+(w?"' + "+p:p+"'")),P.opts.verbose&&(H=(H+=" , schema:  ")+(w?"validate.schema"+M:""+_)+"         , parentSchema: validate.schema"+P.schemaPath+" , data: "+y+" "),H+=" } "):H+=" {} ";var L,Q=H;return H=L.pop(),H+=!P.compositeRule&&S?P.async?" throw new ValidationError(["+Q+"]); ":" validate.errors = ["+Q+"]; return false; ":" var err = "+Q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",H+=" } ",S&&(H+=" else { "),H}},2407:function(Ce){"use strict";Ce.exports=function(P,ae,ce){var c,K=" ",U=P.level,M=P.dataLevel,Z=P.schema[ae],Y=P.schemaPath+P.util.getProperty(ae),H=P.errSchemaPath+"/"+ae,F=!P.opts.allErrors,k="data"+(M||""),_=P.opts.$data&&Z&&Z.$data;if(M=_?(K+=" var schema"+U+" = "+P.util.getData(Z.$data,M,P.dataPathArr)+"; ","schema"+U):Z,_||"number"==typeof Z)return K+="if ( ",_&&(K+=" ("+M+" !== undefined && typeof "+M+" != 'number') || "),(U=[]).push(K+=" "+k+".length "+("maxItems"==(c=ae)?">":"<")+" "+M+") { "),K="",!1!==P.createErrors?(K+=" { keyword: '"+(c||"_limitItems")+"' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(H)+" , params: { limit: "+M+" } ",!1!==P.opts.messages&&(K=(K=(K+=" , message: 'should NOT have ")+("maxItems"==ae?"more":"fewer")+" than ")+(_?"' + "+M+" + '":""+Z)+" items' "),P.opts.verbose&&(K=(K+=" , schema:  ")+(_?"validate.schema"+Y:""+Z)+"         , parentSchema: validate.schema"+P.schemaPath+" , data: "+k+" "),K+=" } "):K+=" {} ",c=K,K=U.pop(),K+=!P.compositeRule&&F?P.async?" throw new ValidationError(["+c+"]); ":" validate.errors = ["+c+"]; return false; ":" var err = "+c+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",K+="} ",F&&(K+=" else { "),K;throw new Error(ae+" must be number")}},1250:function(Ce){"use strict";Ce.exports=function(P,ae,ce){var c,K=" ",U=P.level,M=P.dataLevel,Z=P.schema[ae],Y=P.schemaPath+P.util.getProperty(ae),H=P.errSchemaPath+"/"+ae,F=!P.opts.allErrors,k="data"+(M||""),_=P.opts.$data&&Z&&Z.$data;if(M=_?(K+=" var schema"+U+" = "+P.util.getData(Z.$data,M,P.dataPathArr)+"; ","schema"+U):Z,_||"number"==typeof Z)return K+="if ( ",_&&(K+=" ("+M+" !== undefined && typeof "+M+" != 'number') || "),K+=!1===P.opts.unicode?" "+k+".length ":" ucs2length("+k+") ",(U=[]).push(K+=" "+("maxLength"==(c=ae)?">":"<")+" "+M+") { "),K="",!1!==P.createErrors?(K+=" { keyword: '"+(c||"_limitLength")+"' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(H)+" , params: { limit: "+M+" } ",!1!==P.opts.messages&&(K=(K=(K+=" , message: 'should NOT be ")+("maxLength"==ae?"longer":"shorter")+" than ")+(_?"' + "+M+" + '":""+Z)+" characters' "),P.opts.verbose&&(K=(K+=" , schema:  ")+(_?"validate.schema"+Y:""+Z)+"         , parentSchema: validate.schema"+P.schemaPath+" , data: "+k+" "),K+=" } "):K+=" {} ",c=K,K=U.pop(),K+=!P.compositeRule&&F?P.async?" throw new ValidationError(["+c+"]); ":" validate.errors = ["+c+"]; return false; ":" var err = "+c+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",K+="} ",F&&(K+=" else { "),K;throw new Error(ae+" must be number")}},2596:function(Ce){"use strict";Ce.exports=function(P,ae,ce){var c,K=" ",U=P.level,M=P.dataLevel,Z=P.schema[ae],Y=P.schemaPath+P.util.getProperty(ae),H=P.errSchemaPath+"/"+ae,F=!P.opts.allErrors,k="data"+(M||""),_=P.opts.$data&&Z&&Z.$data;if(M=_?(K+=" var schema"+U+" = "+P.util.getData(Z.$data,M,P.dataPathArr)+"; ","schema"+U):Z,_||"number"==typeof Z)return K+="if ( ",_&&(K+=" ("+M+" !== undefined && typeof "+M+" != 'number') || "),(U=[]).push(K+=" Object.keys("+k+").length "+("maxProperties"==(c=ae)?">":"<")+" "+M+") { "),K="",!1!==P.createErrors?(K+=" { keyword: '"+(c||"_limitProperties")+"' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(H)+" , params: { limit: "+M+" } ",!1!==P.opts.messages&&(K=(K=(K+=" , message: 'should NOT have ")+("maxProperties"==ae?"more":"fewer")+" than ")+(_?"' + "+M+" + '":""+Z)+" properties' "),P.opts.verbose&&(K=(K+=" , schema:  ")+(_?"validate.schema"+Y:""+Z)+"         , parentSchema: validate.schema"+P.schemaPath+" , data: "+k+" "),K+=" } "):K+=" {} ",c=K,K=U.pop(),K+=!P.compositeRule&&F?P.async?" throw new ValidationError(["+c+"]); ":" validate.errors = ["+c+"]; return false; ":" var err = "+c+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",K+="} ",F&&(K+=" else { "),K;throw new Error(ae+" must be number")}},9486:function(Ce){"use strict";Ce.exports=function(P,ae,ce){var c=" ",K=P.schema[ae],U=P.schemaPath+P.util.getProperty(ae),Z=P.errSchemaPath+"/"+ae,Y=!P.opts.allErrors,H=P.util.copy(P),F="",k=(H.level++,"valid"+H.level),_=H.baseId,M=!0,R=K;if(R)for(var S,y=-1,w=R.length-1;y<w;)S=R[y+=1],(P.opts.strictKeywords?"object"==typeof S&&0<Object.keys(S).length||!1===S:P.util.schemaHasRules(S,P.RULES.all))&&(M=!1,H.schema=S,H.schemaPath=U+"["+y+"]",H.errSchemaPath=Z+"/"+y,c+="  "+P.validate(H)+" ",H.baseId=_,Y)&&(c+=" if ("+k+") { ",F+="}");return Y&&(c+=M?" if (true) { ":" "+F.slice(0,-1)+" "),c}},5347:function(Ce){"use strict";Ce.exports=function(P,Y,ce){var c=" ",k=P.level,H=P.dataLevel,K=P.schema[Y],U=P.schemaPath+P.util.getProperty(Y),Z=P.errSchemaPath+"/"+Y,F=(Y=!P.opts.allErrors,H="data"+(H||""),"valid"+k),_=(k="errs__"+k,P.util.copy(P)),M="",R=(_.level++,"valid"+_.level);if(K.every(function(h){return P.opts.strictKeywords?"object"==typeof h&&0<Object.keys(h).length||!1===h:P.util.schemaHasRules(h,P.RULES.all)})){var S=_.baseId,y=(c+=" var "+k+" = errors; var "+F+" = false;  ",P.compositeRule),w=(P.compositeRule=_.compositeRule=!0,K);if(w)for(var p,f=-1,m=w.length-1;f<m;)p=w[f+=1],_.schema=p,_.schemaPath=U+"["+f+"]",_.errSchemaPath=Z+"/"+f,c+="  "+P.validate(_)+" ",_.baseId=S,c+=" "+F+" = "+F+" || "+R+"; if (!"+F+") { ",M+="}";P.compositeRule=_.compositeRule=y,c+=" "+M+" if (!"+F+") {   var err =   ",!1!==P.createErrors?(c+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(Z)+" , params: {} ",!1!==P.opts.messages&&(c+=" , message: 'should match some schema in anyOf' "),P.opts.verbose&&(c+=" , schema: validate.schema"+U+" , parentSchema: validate.schema"+P.schemaPath+" , data: "+H+" "),c+=" } "):c+=" {} ",c+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!P.compositeRule&&Y&&(c+=P.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),c+=" } else {  errors = "+k+"; if (vErrors !== null) { if ("+k+") vErrors.length = "+k+"; else vErrors = null; } ",P.opts.allErrors&&(c+=" } ")}else Y&&(c+=" if (true) { ");return c}},923:function(Ce){"use strict";Ce.exports=function(P,K,ce){var c=" ",U=P.schema[K];return K=P.errSchemaPath+"/"+K,U=P.util.toQuotedString(U),!0===P.opts.$comment?c+=" console.log("+U+");":"function"==typeof P.opts.$comment&&(c+=" self._opts.$comment("+U+", "+P.util.toQuotedString(K)+", validate.root.schema);"),c}},2617:function(Ce){"use strict";Ce.exports=function(P,U,ce){var M=" ",c=P.level,_=P.dataLevel,k=P.schema[U],K=P.schemaPath+P.util.getProperty(U),Z=(U=P.errSchemaPath+"/"+U,!P.opts.allErrors),Y="data"+(_||""),H="valid"+c,F=P.opts.$data&&k&&k.$data;return(F&&(M+=" var schema"+c+" = "+P.util.getData(k.$data,_,P.dataPathArr)+"; "),F||(M+=" var schema"+c+" = validate.schema"+K+";"),k=[]).push(M+="var "+H+" = equal("+Y+", schema"+c+"); if (!"+H+") {   "),M="",!1!==P.createErrors?(M+=" { keyword: 'const' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(U)+" , params: { allowedValue: schema"+c+" } ",!1!==P.opts.messages&&(M+=" , message: 'should be equal to constant' "),P.opts.verbose&&(M+=" , schema: validate.schema"+K+" , parentSchema: validate.schema"+P.schemaPath+" , data: "+Y+" "),M+=" } "):M+=" {} ",_=M,M=k.pop(),M+=!P.compositeRule&&Z?P.async?" throw new ValidationError(["+_+"]); ":" validate.errors = ["+_+"]; return false; ":" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",M+=" }",Z&&(M+=" else { "),M}},2119:function(Ce){"use strict";Ce.exports=function(P,U,ce){var p=" ",y=P.level,Y=P.dataLevel,c=P.schema[U],K=P.schemaPath+P.util.getProperty(U),Z=(U=P.errSchemaPath+"/"+U,!P.opts.allErrors),H=(Y="data"+(Y||""),"valid"+y),F="errs__"+y,k=P.util.copy(P),_=(k.level++,"valid"+k.level),M=(y="i"+y,k.dataLevel=P.dataLevel+1),R="data"+M,w=P.baseId,S=P.opts.strictKeywords?"object"==typeof c&&0<Object.keys(c).length||!1===c:P.util.schemaHasRules(c,P.RULES.all);return(p+="var "+F+" = errors;var "+H+";",S?(H=P.compositeRule,P.compositeRule=k.compositeRule=!0,k.schema=c,k.schemaPath=K,k.errSchemaPath=U,p+=" var "+_+" = false; for (var "+y+" = 0; "+y+" < "+Y+".length; "+y+"++) { ",k.errorPath=P.util.getPathExpr(P.errorPath,y,P.opts.jsonPointers,!0),c=Y+"["+y+"]",k.dataPathArr[M]=y,M=P.validate(k),k.baseId=w,P.util.varOccurences(M,R)<2?p+=" "+P.util.varReplace(M,R,c)+" ":p+=" var "+R+" = "+c+"; "+M+" ",p+=" if ("+_+") break; }  ",P.compositeRule=k.compositeRule=H,p+="  if (!"+_+") {"):p+=" if ("+Y+".length == 0) {",y=[]).push(p),p="",!1!==P.createErrors?(p+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(U)+" , params: {} ",!1!==P.opts.messages&&(p+=" , message: 'should contain a valid item' "),P.opts.verbose&&(p+=" , schema: validate.schema"+K+" , parentSchema: validate.schema"+P.schemaPath+" , data: "+Y+" "),p+=" } "):p+=" {} ",w=p,p=y.pop(),p+=!P.compositeRule&&Z?P.async?" throw new ValidationError(["+w+"]); ":" validate.errors = ["+w+"]; return false; ":" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",p+=" } else { ",S&&(p+="  errors = "+F+"; if (vErrors !== null) { if ("+F+") vErrors.length = "+F+"; else vErrors = null; } "),P.opts.allErrors&&(p+=" } "),p}},1793:function(Ce){"use strict";Ce.exports=function(P,G,ce){var c,K,U,Z=" ",Y=P.level,H=P.dataLevel,T=P.schema[G],F=P.schemaPath+P.util.getProperty(G),k=P.errSchemaPath+"/"+G,_=!P.opts.allErrors,M="data"+(H||""),R="valid"+Y,S="errs__"+Y,y=P.opts.$data&&T&&T.$data,w=y?(Z+=" var schema"+Y+" = "+P.util.getData(T.$data,H,P.dataPathArr)+"; ","schema"+Y):T,p="definition"+Y,f=this.definition,m="";if(y&&f.$data){var h="keywordValidate"+Y,v=f.validateSchema;Z+=" var "+p+" = RULES.custom['"+G+"'].definition; var "+h+" = "+p+".validate;"}else{if(!(L=P.useCustomRule(this,T,P.schema,P)))return;w="validate.schema"+F,h=L.code,c=f.compile,K=f.inline,U=f.macro}G=h+".errors",T="i"+Y;var O,C,x,L,Q,V="ruleErr"+Y,J=f.async;if(J&&!P.async)throw new Error("async keyword in sync schema");return K||U||(Z+=G+" = null;"),Z+="var "+S+" = errors;var "+R+";",y&&f.$data&&(m+="}",Z+=" if ("+w+" === undefined) { "+R+" = true; } else { ",v)&&(m+="}",Z+=" "+R+" = "+p+".validateSchema("+w+"); if ("+R+") { "),K?Z+=f.statements?" "+L.validate+" ":" "+R+" = "+L.validate+"; ":U?(m="",(y=P.util.copy(P)).level++,O="valid"+y.level,y.schema=L.validate,y.schemaPath="",v=P.compositeRule,P.compositeRule=y.compositeRule=!0,p=P.validate(y).replace(/validate\.schema/g,h),P.compositeRule=y.compositeRule=v,Z+=" "+p):((Q=Q||[]).push(Z),Z="",Z+="  "+h+".call( ",Z+=P.opts.passContext?"this":"self",Z+=c||!1===f.schema?" , "+M+" ":" , "+w+" , "+M+" , validate.schema"+P.schemaPath+" ",Z+=" , (dataPath || '')",'""'!=P.errorPath&&(Z+=" + "+P.errorPath),L=Z+=" , "+(C=H?"data"+(H-1||""):"parentData")+" , "+(x=H?P.dataPathArr[H]:"parentDataProperty")+" , rootData )  ",Z=Q.pop(),!1===f.errors?(Z+=" "+R+" = ",J&&(Z+="await "),Z+=L+"; "):Z+=J?" var "+(G="customErrors"+Y)+" = null; try { "+R+" = await "+L+"; } catch (e) { "+R+" = false; if (e instanceof ValidationError) "+G+" = e.errors; else throw e; } ":" "+G+" = null; "+R+" = "+L+"; "),f.modifying&&(Z+=" if ("+C+") "+M+" = "+C+"["+x+"];"),Z+=""+m,f.valid?_&&(Z+=" if (true) { "):(Z+=" if ( ",void 0===f.valid?Z=Z+" !"+(U?""+O:R):Z+=" "+!f.valid+" ",y=this.keyword,(Q=Q||[]).push(Z+=") { "),(Q=Q||[]).push(Z=""),Z="",!1!==P.createErrors?(Z+=" { keyword: '"+(y||"custom")+"' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(k)+" , params: { keyword: '"+this.keyword+"' } ",!1!==P.opts.messages&&(Z+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),P.opts.verbose&&(Z+=" , schema: validate.schema"+F+" , parentSchema: validate.schema"+P.schemaPath+" , data: "+M+" "),Z+=" } "):Z+=" {} ",v=Z,Z=Q.pop(),p=Z+=!P.compositeRule&&_?P.async?" throw new ValidationError(["+v+"]); ":" validate.errors = ["+v+"]; return false; ":" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",Z=Q.pop(),K?f.errors?"full"!=f.errors&&(Z+="  for (var "+T+"="+S+"; "+T+"<errors; "+T+"++) { var "+V+" = vErrors["+T+"]; if ("+V+".dataPath === undefined) "+V+".dataPath = (dataPath || '') + "+P.errorPath+"; if ("+V+".schemaPath === undefined) { "+V+'.schemaPath = "'+k+'"; } ',P.opts.verbose&&(Z+=" "+V+".schema = "+w+"; "+V+".data = "+M+"; "),Z+=" } "):!1===f.errors?Z+=" "+p+" ":(Z+=" if ("+S+" == errors) { "+p+" } else {  for (var "+T+"="+S+"; "+T+"<errors; "+T+"++) { var "+V+" = vErrors["+T+"]; if ("+V+".dataPath === undefined) "+V+".dataPath = (dataPath || '') + "+P.errorPath+"; if ("+V+".schemaPath === undefined) { "+V+'.schemaPath = "'+k+'"; } ',P.opts.verbose&&(Z+=" "+V+".schema = "+w+"; "+V+".data = "+M+"; "),Z+=" } } "):U?(Z+="   var err =   ",!1!==P.createErrors?(Z+=" { keyword: '"+(y||"custom")+"' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(k)+" , params: { keyword: '"+this.keyword+"' } ",!1!==P.opts.messages&&(Z+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),P.opts.verbose&&(Z+=" , schema: validate.schema"+F+" , parentSchema: validate.schema"+P.schemaPath+" , data: "+M+" "),Z+=" } "):Z+=" {} ",Z+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!P.compositeRule&&_&&(Z+=P.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; ")):!1===f.errors?Z+=" "+p+" ":(Z+=" if (Array.isArray("+G+")) { if (vErrors === null) vErrors = "+G+"; else vErrors = vErrors.concat("+G+"); errors = vErrors.length;  for (var "+T+"="+S+"; "+T+"<errors; "+T+"++) { var "+V+" = vErrors["+T+"]; if ("+V+".dataPath === undefined) "+V+".dataPath = (dataPath || '') + "+P.errorPath+";  "+V+'.schemaPath = "'+k+'";  ',P.opts.verbose&&(Z+=" "+V+".schema = "+w+"; "+V+".data = "+M+"; "),Z+=" } } else { "+p+" } "),Z+=" } ",_&&(Z+=" else { ")),Z}},9115:function(Ce){"use strict";Ce.exports=function(P,M,ce){var c,K=" ",U=P.level,Z=P.dataLevel,Y=P.schema[M],H=P.schemaPath+P.util.getProperty(M),F=P.errSchemaPath+"/"+M,k=!P.opts.allErrors,_="data"+(Z||""),R=(M="errs__"+U,P.util.copy(P)),S="",y=(R.level++,"valid"+R.level),w={},p={},f=P.opts.ownProperties;for(q in Y)"__proto__"!=q&&(j=Y[q],(c=Array.isArray(j)?p:w)[q]=j);var m=P.errorPath;for(q in K=K+"var "+M+" = errors;var missing"+U+";",p)if((c=p[q]).length){if(K+=" if ( "+_+P.util.getProperty(q)+" !== undefined ",f&&(K+=" && Object.prototype.hasOwnProperty.call("+_+", '"+P.util.escapeQuotes(q)+"') "),k){K+=" && ( ";var h=c;if(h)for(var v=-1,O=h.length-1;v<O;)G=h[v+=1],v&&(K+=" || "),K+=" ( ( "+(X=_+(J=P.util.getProperty(G)))+" === undefined ",f&&(K+=" || ! Object.prototype.hasOwnProperty.call("+_+", '"+P.util.escapeQuotes(G)+"') "),K+=") && (missing"+U+" = "+P.util.toQuotedString(P.opts.jsonPointers?G:J)+") ) ";K+=")) {  ";var C="' + "+(L="missing"+U)+" + '",x=(P.opts._errorDataPathProperty&&(P.errorPath=P.opts.jsonPointers?P.util.getPathExpr(m,L,!0):m+" + "+L),x||[]),L=(x.push(K),K="",!1!==P.createErrors?(K+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(F)+" , params: { property: '"+P.util.escapeQuotes(q)+"', missingProperty: '"+C+"', depsCount: "+c.length+", deps: '"+P.util.escapeQuotes(1==c.length?c[0]:c.join(", "))+"' } ",!1!==P.opts.messages&&(K+=" , message: 'should have ",K+=1==c.length?"property "+P.util.escapeQuotes(c[0]):"properties "+P.util.escapeQuotes(c.join(", ")),K+=" when property "+P.util.escapeQuotes(q)+" is present' "),P.opts.verbose&&(K+=" , schema: validate.schema"+H+" , parentSchema: validate.schema"+P.schemaPath+" , data: "+_+" "),K+=" } "):K+=" {} ",K);K=x.pop(),K+=!P.compositeRule&&k?P.async?" throw new ValidationError(["+L+"]); ":" validate.errors = ["+L+"]; return false; ":" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{K+=" ) { ";var Q=c;if(Q)for(var G,T=-1,V=Q.length-1;T<V;){G=Q[T+=1];var J=P.util.getProperty(G),X=(C=P.util.escapeQuotes(G),_+J);P.opts._errorDataPathProperty&&(P.errorPath=P.util.getPath(m,G,P.opts.jsonPointers)),K+=" if ( "+X+" === undefined ",f&&(K+=" || ! Object.prototype.hasOwnProperty.call("+_+", '"+P.util.escapeQuotes(G)+"') "),K+=") {  var err =   ",!1!==P.createErrors?(K+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(F)+" , params: { property: '"+P.util.escapeQuotes(q)+"', missingProperty: '"+C+"', depsCount: "+c.length+", deps: '"+P.util.escapeQuotes(1==c.length?c[0]:c.join(", "))+"' } ",!1!==P.opts.messages&&(K+=" , message: 'should have ",K+=1==c.length?"property "+P.util.escapeQuotes(c[0]):"properties "+P.util.escapeQuotes(c.join(", ")),K+=" when property "+P.util.escapeQuotes(q)+" is present' "),P.opts.verbose&&(K+=" , schema: validate.schema"+H+" , parentSchema: validate.schema"+P.schemaPath+" , data: "+_+" "),K+=" } "):K+=" {} ",K+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}K+=" }   ",k&&(S+="}",K+=" else { ")}P.errorPath=m;var q,ee=R.baseId;for(q in w){var j=w[q];(P.opts.strictKeywords?"object"==typeof j&&0<Object.keys(j).length||!1===j:P.util.schemaHasRules(j,P.RULES.all))&&(K+=" "+y+" = true; if ( "+_+P.util.getProperty(q)+" !== undefined ",f&&(K+=" && Object.prototype.hasOwnProperty.call("+_+", '"+P.util.escapeQuotes(q)+"') "),K+=") { ",R.schema=j,R.schemaPath=H+P.util.getProperty(q),R.errSchemaPath=F+"/"+P.util.escapeFragment(q),K+="  "+P.validate(R)+" ",R.baseId=ee,K+=" }  ",k)&&(K+=" if ("+y+") { ",S+="}")}return k&&(K+="   "+S+" if ("+M+" == errors) {"),K}},9317:function(Ce){"use strict";Ce.exports=function(P,U,ce){var M=" ",c=P.level,k=P.dataLevel,_=P.schema[U],K=P.schemaPath+P.util.getProperty(U),Z=(U=P.errSchemaPath+"/"+U,!P.opts.allErrors),Y="data"+(k||""),H="valid"+c,F=P.opts.$data&&_&&_.$data;return F&&(M+=" var schema"+c+" = "+P.util.getData(_.$data,k,P.dataPathArr)+"; "),k="schema"+c,(F||(M+=" var "+k+" = validate.schema"+K+";"),M+="var "+H+";",F&&(M+=" if (schema"+c+" === undefined) "+H+" = true; else if (!Array.isArray(schema"+c+")) "+H+" = false; else {"),M+=H+" = false;for (var "+(_="i"+c)+"=0; "+_+"<"+k+".length; "+_+"++) if (equal("+Y+", "+k+"["+_+"])) { "+H+" = true; break; }",F&&(M+="  }  "),k=[]).push(M+=" if (!"+H+") {   "),M="",!1!==P.createErrors?(M+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(U)+" , params: { allowedValues: schema"+c+" } ",!1!==P.opts.messages&&(M+=" , message: 'should be equal to one of the allowed values' "),P.opts.verbose&&(M+=" , schema: validate.schema"+K+" , parentSchema: validate.schema"+P.schemaPath+" , data: "+Y+" "),M+=" } "):M+=" {} ",_=M,M=k.pop(),M+=!P.compositeRule&&Z?P.async?" throw new ValidationError(["+_+"]); ":" validate.errors = ["+_+"]; return false; ":" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",M+=" }",Z&&(M+=" else { "),M}},8327:function(Ce){"use strict";Ce.exports=function(P,H,ce){var c=" ",K=P.level,U=P.dataLevel,Z=P.schema[H],Y=P.schemaPath+P.util.getProperty(H),F=(H=P.errSchemaPath+"/"+H,!P.opts.allErrors),k="data"+(U||"");if(!1===P.opts.format)F&&(c+=" if (true) { ");else{var _,M=P.opts.$data&&Z&&Z.$data,R=(U=M?(c+=" var schema"+K+" = "+P.util.getData(Z.$data,U,P.dataPathArr)+"; ","schema"+K):Z,P.opts.unknownFormats),S=Array.isArray(R);if(M)c+=" var "+(_="format"+K)+" = formats["+U+"]; var "+(y="isObject"+K)+" = typeof "+_+" == 'object' && !("+_+" instanceof RegExp) && "+_+".validate; var "+(p="formatType"+K)+" = "+y+" && "+_+".type || 'string'; if ("+y+") { ",P.async&&(c+=" var async"+K+" = "+_+".async; "),c+=" "+_+" = "+_+".validate; } if (  ",M&&(c+=" ("+U+" !== undefined && typeof "+U+" != 'string') || "),c+=" (","ignore"!=R&&(c+=" ("+U+" && !"+_+" ",S&&(c+=" && self._opts.unknownFormats.indexOf("+U+") == -1 "),c+=") || "),c+=" ("+_+" && "+p+" == '"+ce+"' && !(typeof "+_+" == 'function' ? ",c+=P.async?" (async"+K+" ? await "+_+"("+k+") : "+_+"("+k+")) ":" "+_+"("+k+") ",c+=" : "+_+".test("+k+"))))) {";else{if(!(_=P.formats[Z])){if("ignore"==R)return P.logger.warn('unknown format "'+Z+'" ignored in schema at path "'+P.errSchemaPath+'"'),F&&(c+=" if (true) { "),c;if(S&&0<=R.indexOf(Z))return F&&(c+=" if (true) { "),c;throw new Error('unknown format "'+Z+'" is used in schema at path "'+P.errSchemaPath+'"')}var y,w,p=(y="object"==typeof _&&!(_ instanceof RegExp)&&_.validate)&&_.type||"string";if(y&&(w=!0===_.async,_=_.validate),p!=ce)return F&&(c+=" if (true) { "),c;if(w){if(!P.async)throw new Error("async format in sync schema");c+=" if (!(await "+(f="formats"+P.util.getProperty(Z)+".validate")+"("+k+"))) { "}else{c+=" if (! ";var f="formats"+P.util.getProperty(Z);y&&(f+=".validate"),c=c+("function"==typeof _?" "+f+"("+k+") ":" "+f+".test("+k+") ")+") { "}}(K=[]).push(c),c="",!1!==P.createErrors?(c=(c+=" { keyword: 'format' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(H)+" , params: { format:  ")+(M?""+U:""+P.util.toQuotedString(Z))+"  } ",!1!==P.opts.messages&&(c=(c+=" , message: 'should match format \"")+(M?"' + "+U+" + '":""+P.util.escapeQuotes(Z))+"\"' "),P.opts.verbose&&(c=(c=(c+=" , schema:  ")+(M?"validate.schema"+Y:""+P.util.toQuotedString(Z)))+"         , parentSchema: validate.schema"+P.schemaPath+" , data: "+k+" "),c+=" } "):c+=" {} ",S=c,c=K.pop(),c+=!P.compositeRule&&F?P.async?" throw new ValidationError(["+S+"]); ":" validate.errors = ["+S+"]; return false; ":" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c+=" } ",F&&(c+=" else { ")}return c}},5926:function(Ce){"use strict";Ce.exports=function(P,H,ce){var c,K=" ",U=P.level,k=P.dataLevel,Z=P.schema[H],Y=P.schemaPath+P.util.getProperty(H),F=(H=P.errSchemaPath+"/"+H,!P.opts.allErrors),_=(k="data"+(k||""),"valid"+U),M="errs__"+U,R=P.util.copy(P),S=(R.level++,"valid"+R.level),w=P.schema.else,y=void 0!==(y=P.schema.then)&&(P.opts.strictKeywords?"object"==typeof y&&0<Object.keys(y).length||!1===y:P.util.schemaHasRules(y,P.RULES.all)),p=(w=void 0!==w&&(P.opts.strictKeywords?"object"==typeof w&&0<Object.keys(w).length||!1===w:P.util.schemaHasRules(w,P.RULES.all)),R.baseId);return y||w?(R.createErrors=!1,R.schema=Z,R.schemaPath=Y,R.errSchemaPath=H,K+=" var "+M+" = errors; var "+_+" = true;  ",Z=P.compositeRule,P.compositeRule=R.compositeRule=!0,K+="  "+P.validate(R)+" ",R.baseId=p,R.createErrors=!0,K+="  errors = "+M+"; if (vErrors !== null) { if ("+M+") vErrors.length = "+M+"; else vErrors = null; }  ",P.compositeRule=R.compositeRule=Z,y?(K+=" if ("+S+") {  ",R.schema=P.schema.then,R.schemaPath=P.schemaPath+".then",R.errSchemaPath=P.errSchemaPath+"/then",K+="  "+P.validate(R)+" ",R.baseId=p,K+=" "+_+" = "+S+"; ",y&&w?K+=" var "+(c="ifClause"+U)+" = 'then'; ":c="'then'",K+=" } ",w&&(K+=" else { ")):K+=" if (!"+S+") { ",w&&(R.schema=P.schema.else,R.schemaPath=P.schemaPath+".else",R.errSchemaPath=P.errSchemaPath+"/else",K+="  "+P.validate(R)+" ",R.baseId=p,K+=" "+_+" = "+S+"; ",y&&w?K+=" var "+(c="ifClause"+U)+" = 'else'; ":c="'else'",K+=" } "),K+=" if (!"+_+") {   var err =   ",!1!==P.createErrors?(K+=" { keyword: 'if' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(H)+" , params: { failingKeyword: "+c+" } ",!1!==P.opts.messages&&(K+=" , message: 'should match \"' + "+c+" + '\" schema' "),P.opts.verbose&&(K+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+P.schemaPath+" , data: "+k+" "),K+=" } "):K+=" {} ",K+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!P.compositeRule&&F&&(K+=P.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),K+=" }   ",F&&(K+=" else { ")):F&&(K+=" if (true) { "),K}},9646:function(Ce,P,ae){"use strict";Ce.exports={$ref:ae(2331),allOf:ae(9486),anyOf:ae(5347),$comment:ae(923),const:ae(2617),contains:ae(2119),dependencies:ae(9115),enum:ae(9317),format:ae(8327),if:ae(5926),items:ae(392),maximum:ae(1796),minimum:ae(1796),maxItems:ae(2407),minItems:ae(2407),maxLength:ae(1250),minLength:ae(1250),maxProperties:ae(2596),minProperties:ae(2596),multipleOf:ae(6039),not:ae(7946),oneOf:ae(9344),pattern:ae(9737),properties:ae(2537),propertyNames:ae(2127),required:ae(1204),uniqueItems:ae(1985),validate:ae(1869)}},392:function(Ce){"use strict";Ce.exports=function(P,F,ce){var c=" ",S=P.level,k=P.dataLevel,K=P.schema[F],U=P.schemaPath+P.util.getProperty(F),Z=P.errSchemaPath+"/"+F,Y=!P.opts.allErrors,H="data"+(k||""),_=(F="valid"+S,k="errs__"+S,P.util.copy(P)),M="",R=(_.level++,"valid"+_.level),y=(S="i"+S,_.dataLevel=P.dataLevel+1),w="data"+y,p=P.baseId;if(c+="var "+k+" = errors;var "+F+";",Array.isArray(K)){var f,m,h=P.schema.additionalItems,v=(!1===h&&(c+=" "+F+" = "+H+".length <= "+K.length+"; ",f=Z,Z=P.errSchemaPath+"/additionalItems",(m=m||[]).push(c+="  if (!"+F+") {   "),c="",!1!==P.createErrors?(c+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(Z)+" , params: { limit: "+K.length+" } ",!1!==P.opts.messages&&(c+=" , message: 'should NOT have more than "+K.length+" items' "),P.opts.verbose&&(c+=" , schema: false , parentSchema: validate.schema"+P.schemaPath+" , data: "+H+" "),c+=" } "):c+=" {} ",F=c,c=m.pop(),c+=!P.compositeRule&&Y?P.async?" throw new ValidationError(["+F+"]); ":" validate.errors = ["+F+"]; return false; ":" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c+=" } ",Z=f,Y)&&(M+="}",c+=" else { "),K);if(v)for(var O=-1,C=v.length-1;O<C;){var x,L,Q=v[O+=1];(P.opts.strictKeywords?"object"==typeof Q&&0<Object.keys(Q).length||!1===Q:P.util.schemaHasRules(Q,P.RULES.all))&&(c+=" "+R+" = true; if ("+H+".length > "+O+") { ",x=H+"["+O+"]",_.schema=Q,_.schemaPath=U+"["+O+"]",_.errSchemaPath=Z+"/"+O,_.errorPath=P.util.getPathExpr(P.errorPath,O,P.opts.jsonPointers,!0),_.dataPathArr[y]=O,L=P.validate(_),_.baseId=p,P.util.varOccurences(L,w)<2?c+=" "+P.util.varReplace(L,w,x)+" ":c+=" var "+w+" = "+x+"; "+L+" ",c+=" }  ",Y)&&(c+=" if ("+R+") { ",M+="}")}"object"==typeof h&&(P.opts.strictKeywords?"object"==typeof h&&0<Object.keys(h).length||!1===h:P.util.schemaHasRules(h,P.RULES.all))&&(_.schema=h,_.schemaPath=P.schemaPath+".additionalItems",_.errSchemaPath=P.errSchemaPath+"/additionalItems",c+=" "+R+" = true; if ("+H+".length > "+K.length+") {  for (var "+S+" = "+K.length+"; "+S+" < "+H+".length; "+S+"++) { ",_.errorPath=P.util.getPathExpr(P.errorPath,S,P.opts.jsonPointers,!0),x=H+"["+S+"]",_.dataPathArr[y]=S,L=P.validate(_),_.baseId=p,P.util.varOccurences(L,w)<2?c+=" "+P.util.varReplace(L,w,x)+" ":c+=" var "+w+" = "+x+"; "+L+" ",Y&&(c+=" if (!"+R+") break; "),c+=" } }  ",Y)&&(c+=" if ("+R+") { ",M+="}")}else(P.opts.strictKeywords?"object"==typeof K&&0<Object.keys(K).length||!1===K:P.util.schemaHasRules(K,P.RULES.all))&&(_.schema=K,_.schemaPath=U,_.errSchemaPath=Z,c+="  for (var "+S+" = 0; "+S+" < "+H+".length; "+S+"++) { ",_.errorPath=P.util.getPathExpr(P.errorPath,S,P.opts.jsonPointers,!0),x=H+"["+S+"]",_.dataPathArr[y]=S,L=P.validate(_),_.baseId=p,P.util.varOccurences(L,w)<2?c+=" "+P.util.varReplace(L,w,x)+" ":c+=" var "+w+" = "+x+"; "+L+" ",Y&&(c+=" if (!"+R+") break; "),c+=" }");return Y&&(c+=" "+M+" if ("+k+" == errors) {"),c}},6039:function(Ce){"use strict";Ce.exports=function(P,ae,ce){var c=" ",K=P.level,_=P.dataLevel,U=P.schema[ae],Z=P.schemaPath+P.util.getProperty(ae),Y=P.errSchemaPath+"/"+ae,H=!P.opts.allErrors,F="data"+(_||""),k=P.opts.$data&&U&&U.$data;if(_=k?(c+=" var schema"+K+" = "+P.util.getData(U.$data,_,P.dataPathArr)+"; ","schema"+K):U,!k&&"number"!=typeof U)throw new Error(ae+" must be number");return c+="var division"+K+";if (",k&&(c+=" "+_+" !== undefined && ( typeof "+_+" != 'number' || "),c+=" (division"+K+" = "+F+" / "+_+", ",c+=P.opts.multipleOfPrecision?" Math.abs(Math.round(division"+K+") - division"+K+") > 1e-"+P.opts.multipleOfPrecision+" ":" division"+K+" !== parseInt(division"+K+") ",c+=" ) ",k&&(c+="  )  "),(ae=[]).push(c+=" ) {   "),c="",!1!==P.createErrors?(c+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(Y)+" , params: { multipleOf: "+_+" } ",!1!==P.opts.messages&&(c=c+" , message: 'should be multiple of "+(k?"' + "+_:_+"'")),P.opts.verbose&&(c=(c+=" , schema:  ")+(k?"validate.schema"+Z:""+U)+"         , parentSchema: validate.schema"+P.schemaPath+" , data: "+F+" "),c+=" } "):c+=" {} ",K=c,c=ae.pop(),c+=!P.compositeRule&&H?P.async?" throw new ValidationError(["+K+"]); ":" validate.errors = ["+K+"]; return false; ":" var err = "+K+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c+="} ",H&&(c+=" else { "),c}},7946:function(Ce){"use strict";Ce.exports=function(P,H,ce){var c,K,U=" ",_=P.level,k=P.dataLevel,Z=P.schema[H],Y=P.schemaPath+P.util.getProperty(H),F=(H=P.errSchemaPath+"/"+H,!P.opts.allErrors),M=(k="data"+(k||""),_="errs__"+_,P.util.copy(P)),R=(M.level++,"valid"+M.level);return(P.opts.strictKeywords?"object"==typeof Z&&0<Object.keys(Z).length||!1===Z:P.util.schemaHasRules(Z,P.RULES.all))?(M.schema=Z,M.schemaPath=Y,M.errSchemaPath=H,U+=" var "+_+" = errors;  ",Z=P.compositeRule,P.compositeRule=M.compositeRule=!0,M.createErrors=!1,M.opts.allErrors&&(K=M.opts.allErrors,M.opts.allErrors=!1),U+=" "+P.validate(M)+" ",M.createErrors=!0,K&&(M.opts.allErrors=K),P.compositeRule=M.compositeRule=Z,(c=c||[]).push(U+=" if ("+R+") {   "),U="",!1!==P.createErrors?(U+=" { keyword: 'not' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(H)+" , params: {} ",!1!==P.opts.messages&&(U+=" , message: 'should NOT be valid' "),P.opts.verbose&&(U+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+P.schemaPath+" , data: "+k+" "),U+=" } "):U+=" {} ",K=U,U=c.pop(),U+=!P.compositeRule&&F?P.async?" throw new ValidationError(["+K+"]); ":" validate.errors = ["+K+"]; return false; ":" var err = "+K+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",U+=" } else {  errors = "+_+"; if (vErrors !== null) { if ("+_+") vErrors.length = "+_+"; else vErrors = null; } ",P.opts.allErrors&&(U+=" } ")):(U+="  var err =   ",!1!==P.createErrors?(U+=" { keyword: 'not' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(H)+" , params: {} ",!1!==P.opts.messages&&(U+=" , message: 'should NOT be valid' "),P.opts.verbose&&(U+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+P.schemaPath+" , data: "+k+" "),U+=" } "):U+=" {} ",U+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",F&&(U+=" if (false) { ")),U}},9344:function(Ce){"use strict";Ce.exports=function(P,Y,ce){var c=" ",p=P.level,H=P.dataLevel,K=P.schema[Y],U=P.schemaPath+P.util.getProperty(Y),Z=P.errSchemaPath+"/"+Y,F=(Y=!P.opts.allErrors,H="data"+(H||""),"valid"+p),k="errs__"+p,_=P.util.copy(P),M="",R=(_.level++,"valid"+_.level),S=_.baseId,y="prevValid"+p,w="passingSchemas"+p,f=(c+="var "+k+" = errors , "+y+" = false , "+F+" = false , "+w+" = null; ",p=P.compositeRule,P.compositeRule=_.compositeRule=!0,K);if(f)for(var m,h=-1,v=f.length-1;h<v;)m=f[h+=1],(P.opts.strictKeywords?"object"==typeof m&&0<Object.keys(m).length||!1===m:P.util.schemaHasRules(m,P.RULES.all))?(_.schema=m,_.schemaPath=U+"["+h+"]",_.errSchemaPath=Z+"/"+h,c+="  "+P.validate(_)+" ",_.baseId=S):c+=" var "+R+" = true; ",h&&(c+=" if ("+R+" && "+y+") { "+F+" = false; "+w+" = ["+w+", "+h+"]; } else { ",M+="}"),c+=" if ("+R+") { "+F+" = "+y+" = true; "+w+" = "+h+"; }";return P.compositeRule=_.compositeRule=p,c+=M+"if (!"+F+") {   var err =   ",!1!==P.createErrors?(c+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(Z)+" , params: { passingSchemas: "+w+" } ",!1!==P.opts.messages&&(c+=" , message: 'should match exactly one schema in oneOf' "),P.opts.verbose&&(c+=" , schema: validate.schema"+U+" , parentSchema: validate.schema"+P.schemaPath+" , data: "+H+" "),c+=" } "):c+=" {} ",c+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!P.compositeRule&&Y&&(c+=P.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),c+="} else {  errors = "+k+"; if (vErrors !== null) { if ("+k+") vErrors.length = "+k+"; else vErrors = null; }",P.opts.allErrors&&(c+=" } "),c}},9737:function(Ce){"use strict";Ce.exports=function(P,U,ce){var M=" ",_=P.level,F=P.dataLevel,c=P.schema[U],K=P.schemaPath+P.util.getProperty(U),Z=(U=P.errSchemaPath+"/"+U,!P.opts.allErrors),Y="data"+(F||""),H=P.opts.$data&&c&&c.$data,k=(F=H?(M+=" var schema"+_+" = "+P.util.getData(c.$data,F,P.dataPathArr)+"; ","schema"+_):c,_=H?"(new RegExp("+F+"))":P.usePattern(c),M+="if ( ",H&&(M+=" ("+F+" !== undefined && typeof "+F+" != 'string') || "),[]);return k.push(M+=" !"+_+".test("+Y+") ) {   "),M="",!1!==P.createErrors?(M=(M+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(U)+" , params: { pattern:  ")+(H?""+F:""+P.util.toQuotedString(c))+"  } ",!1!==P.opts.messages&&(M=(M+=" , message: 'should match pattern \"")+(H?"' + "+F+" + '":""+P.util.escapeQuotes(c))+"\"' "),P.opts.verbose&&(M=(M=(M+=" , schema:  ")+(H?"validate.schema"+K:""+P.util.toQuotedString(c)))+"         , parentSchema: validate.schema"+P.schemaPath+" , data: "+Y+" "),M+=" } "):M+=" {} ",_=M,M=k.pop(),M+=!P.compositeRule&&Z?P.async?" throw new ValidationError(["+_+"]); ":" validate.errors = ["+_+"]; return false; ":" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",M+="} ",Z&&(M+=" else { "),M}},2537:function(Ce){"use strict";Ce.exports=function(P,_,ce){var c,K=" ",U=P.level,h=P.dataLevel,Z=P.schema[_],Y=P.schemaPath+P.util.getProperty(_),H=P.errSchemaPath+"/"+_,F=!P.opts.allErrors,k="data"+(h||""),M=(_="errs__"+U,P.util.copy(P)),R="",S=(M.level++,"valid"+M.level),y="key"+U,w="idx"+U,p=M.dataLevel=P.dataLevel+1,f="data"+p,m="dataProperties"+U,v=(h=Object.keys(Z||{}).filter(q),P.schema.patternProperties||{}),O=Object.keys(v).filter(q),C=P.schema.additionalProperties,x=h.length||O.length,L=!1===C,Q="object"==typeof C&&Object.keys(C).length,G=P.opts.removeAdditional,T=L||Q||G,V=P.opts.ownProperties,J=P.baseId,X=P.schema.required;function q(ct){return"__proto__"!==ct}if(X&&(!P.opts.$data||!X.$data)&&X.length<P.opts.loopRequired&&(c=P.util.toHash(X)),K+="var "+_+" = errors;var "+S+" = true;",V&&(K+=" var "+m+" = undefined;"),T){if(K+=V?" "+m+" = "+m+" || Object.keys("+k+"); for (var "+w+"=0; "+w+"<"+m+".length; "+w+"++) { var "+y+" = "+m+"["+w+"]; ":" for (var "+y+" in "+k+") { ",x){if(K+=" var isAdditional"+U+" = !(false ",h.length)if(8<h.length)K+=" || validate.schema"+Y+".hasOwnProperty("+y+") ";else{var ee=h;if(ee)for(var j=-1,D=ee.length-1;j<D;)Te=ee[j+=1],K+=" || "+y+" == "+P.util.toQuotedString(Te)+" "}if(O.length){var N=O;if(N)for(var re=-1,ue=N.length-1;re<ue;)_e=N[re+=1],K+=" || "+P.usePattern(_e)+".test("+y+") "}K+=" ); if (isAdditional"+U+") { "}"all"==G?K+=" delete "+k+"["+y+"]; ":(oe=P.errorPath,X="' + "+y+" + '",P.opts._errorDataPathProperty&&(P.errorPath=P.util.getPathExpr(P.errorPath,y,P.opts.jsonPointers)),L?G?K+=" delete "+k+"["+y+"]; ":(pe=H,H=P.errSchemaPath+"/additionalProperties",(be=be||[]).push(K+=" "+S+" = false; "),K="",!1!==P.createErrors?(K+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(H)+" , params: { additionalProperty: '"+X+"' } ",!1!==P.opts.messages&&(K+=" , message: '",K+=P.opts._errorDataPathProperty?"is an invalid additional property":"should NOT have additional properties",K+="' "),P.opts.verbose&&(K+=" , schema: false , parentSchema: validate.schema"+P.schemaPath+" , data: "+k+" "),K+=" } "):K+=" {} ",ie=K,K=be.pop(),K+=!P.compositeRule&&F?P.async?" throw new ValidationError(["+ie+"]); ":" validate.errors = ["+ie+"]; return false; ":" var err = "+ie+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",H=pe,F&&(K+=" break; ")):Q&&("failing"==G?(K+=" var "+_+" = errors;  ",T=P.compositeRule,P.compositeRule=M.compositeRule=!0,M.schema=C,M.schemaPath=P.schemaPath+".additionalProperties",M.errSchemaPath=P.errSchemaPath+"/additionalProperties",M.errorPath=P.opts._errorDataPathProperty?P.errorPath:P.util.getPathExpr(P.errorPath,y,P.opts.jsonPointers),ut=k+"["+y+"]",M.dataPathArr[p]=y,mt=P.validate(M),M.baseId=J,P.util.varOccurences(mt,f)<2?K+=" "+P.util.varReplace(mt,f,ut)+" ":K+=" var "+f+" = "+ut+"; "+mt+" ",K+=" if (!"+S+") { errors = "+_+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+k+"["+y+"]; }  ",P.compositeRule=M.compositeRule=T):(M.schema=C,M.schemaPath=P.schemaPath+".additionalProperties",M.errSchemaPath=P.errSchemaPath+"/additionalProperties",M.errorPath=P.opts._errorDataPathProperty?P.errorPath:P.util.getPathExpr(P.errorPath,y,P.opts.jsonPointers),ut=k+"["+y+"]",M.dataPathArr[p]=y,mt=P.validate(M),M.baseId=J,P.util.varOccurences(mt,f)<2?K+=" "+P.util.varReplace(mt,f,ut)+" ":K+=" var "+f+" = "+ut+"; "+mt+" ",F&&(K+=" if (!"+S+") break; "))),P.errorPath=oe),x&&(K+=" } "),K+=" }  ",F&&(K+=" if ("+S+") { ",R+="}")}var ve=P.opts.useDefaults&&!P.compositeRule;if(h.length){var Ae=h;if(Ae)for(var Te,Re=-1,Me=Ae.length-1;Re<Me;){var Ie,Ge,oe,pe,ge,be,ie,se=Z[Te=Ae[Re+=1]];(P.opts.strictKeywords?"object"==typeof se&&0<Object.keys(se).length||!1===se:P.util.schemaHasRules(se,P.RULES.all))&&(ut=k+(ge=P.util.getProperty(Te)),Ie=ve&&void 0!==se.default,M.schema=se,M.schemaPath=Y+ge,M.errSchemaPath=H+"/"+P.util.escapeFragment(Te),M.errorPath=P.util.getPath(P.errorPath,Te,P.opts.jsonPointers),M.dataPathArr[p]=P.util.toQuotedString(Te),mt=P.validate(M),M.baseId=J,P.util.varOccurences(mt,f)<2?(mt=P.util.varReplace(mt,f,ut),Ge=ut):K+=" var "+(Ge=f)+" = "+ut+"; ",Ie?K+=" "+mt+" ":(c&&c[Te]?(K+=" if ( "+Ge+" === undefined ",V&&(K+=" || ! Object.prototype.hasOwnProperty.call("+k+", '"+P.util.escapeQuotes(Te)+"') "),K+=") { "+S+" = false; ",oe=P.errorPath,pe=H,ge=P.util.escapeQuotes(Te),P.opts._errorDataPathProperty&&(P.errorPath=P.util.getPath(oe,Te,P.opts.jsonPointers)),H=P.errSchemaPath+"/required",(be=be||[]).push(K),K="",!1!==P.createErrors?(K+=" { keyword: 'required' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(H)+" , params: { missingProperty: '"+ge+"' } ",!1!==P.opts.messages&&(K+=" , message: '",K+=P.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+ge+"\\'",K+="' "),P.opts.verbose&&(K+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+P.schemaPath+" , data: "+k+" "),K+=" } "):K+=" {} ",ie=K,K=be.pop(),K+=!P.compositeRule&&F?P.async?" throw new ValidationError(["+ie+"]); ":" validate.errors = ["+ie+"]; return false; ":" var err = "+ie+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",H=pe,P.errorPath=oe,K+=" } else { "):F?(K+=" if ( "+Ge+" === undefined ",V&&(K+=" || ! Object.prototype.hasOwnProperty.call("+k+", '"+P.util.escapeQuotes(Te)+"') "),K+=") { "+S+" = true; } else { "):(K+=" if ("+Ge+" !== undefined ",V&&(K+=" &&   Object.prototype.hasOwnProperty.call("+k+", '"+P.util.escapeQuotes(Te)+"') "),K+=" ) { "),K+=" "+mt+" } ")),F&&(K+=" if ("+S+") { ",R+="}")}}if(O.length){var de=O;if(de)for(var _e,$e=-1,Xe=de.length-1;$e<Xe;){var ut,mt;se=v[_e=de[$e+=1]],(P.opts.strictKeywords?"object"==typeof se&&0<Object.keys(se).length||!1===se:P.util.schemaHasRules(se,P.RULES.all))&&(M.schema=se,M.schemaPath=P.schemaPath+".patternProperties"+P.util.getProperty(_e),M.errSchemaPath=P.errSchemaPath+"/patternProperties/"+P.util.escapeFragment(_e),K=(K+=V?" "+m+" = "+m+" || Object.keys("+k+"); for (var "+w+"=0; "+w+"<"+m+".length; "+w+"++) { var "+y+" = "+m+"["+w+"]; ":" for (var "+y+" in "+k+") { ")+" if ("+P.usePattern(_e)+".test("+y+")) { ",M.errorPath=P.util.getPathExpr(P.errorPath,y,P.opts.jsonPointers),ut=k+"["+y+"]",M.dataPathArr[p]=y,mt=P.validate(M),M.baseId=J,P.util.varOccurences(mt,f)<2?K+=" "+P.util.varReplace(mt,f,ut)+" ":K+=" var "+f+" = "+ut+"; "+mt+" ",F&&(K+=" if (!"+S+") break; "),K+=" } ",F&&(K+=" else "+S+" = true; "),K+=" }  ",F)&&(K+=" if ("+S+") { ",R+="}")}}return F&&(K+=" "+R+" if ("+_+" == errors) {"),K}},2127:function(Ce){"use strict";Ce.exports=function(P,S,ce){var c,K,U,Z,Y,H,F,k=" ",_=P.level,w=P.dataLevel,M=P.schema[S],R=P.schemaPath+P.util.getProperty(S),y=(S=P.errSchemaPath+"/"+S,!P.opts.allErrors),p=(w="data"+(w||""),"errs__"+_),f=P.util.copy(P),m=(f.level++,"valid"+f.level);return k+="var "+p+" = errors;",(P.opts.strictKeywords?"object"==typeof M&&0<Object.keys(M).length||!1===M:P.util.schemaHasRules(M,P.RULES.all))&&(f.schema=M,f.schemaPath=R,f.errSchemaPath=S,M="idx"+_,K="i"+_,U="' + "+(c="key"+_)+" + '",Z="data"+(f.dataLevel=P.dataLevel+1),F="dataProperties"+_,Y=P.baseId,(H=P.opts.ownProperties)&&(k+=" var "+F+" = undefined; "),k=k+(H?" "+F+" = "+F+" || Object.keys("+w+"); for (var "+M+"=0; "+M+"<"+F+".length; "+M+"++) { var "+c+" = "+F+"["+M+"]; ":" for (var "+c+" in "+w+") { ")+" var startErrs"+_+" = errors; ",H=c,F=P.compositeRule,P.compositeRule=f.compositeRule=!0,M=P.validate(f),f.baseId=Y,P.util.varOccurences(M,Z)<2?k+=" "+P.util.varReplace(M,Z,H)+" ":k+=" var "+Z+" = "+H+"; "+M+" ",P.compositeRule=f.compositeRule=F,k+=" if (!"+m+") { for (var "+K+"=startErrs"+_+"; "+K+"<errors; "+K+"++) { vErrors["+K+"].propertyName = "+c+"; }   var err =   ",!1!==P.createErrors?(k+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(S)+" , params: { propertyName: '"+U+"' } ",!1!==P.opts.messages&&(k+=" , message: 'property name \\'"+U+"\\' is invalid' "),P.opts.verbose&&(k+=" , schema: validate.schema"+R+" , parentSchema: validate.schema"+P.schemaPath+" , data: "+w+" "),k+=" } "):k+=" {} ",k+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!P.compositeRule&&y&&(k+=P.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),y&&(k+=" break; "),k+=" } }"),y&&(k+="  if ("+p+" == errors) {"),k}},2331:function(Ce){"use strict";Ce.exports=function(P,H,ce){var c,K,S,U=" ",Z=P.dataLevel,Y=P.schema[H],F=(H=P.errSchemaPath+"/"+H,!P.opts.allErrors),k="data"+(Z||""),_="valid"+(_=P.level);if("#"==Y||"#/"==Y)K=P.isRoot?(c=P.async,"validate"):(c=!0===P.root.schema.$async,"root.refVal[0]");else{var M=P.resolveRef(P.baseId,Y,P.isRoot);if(void 0===M){var R=P.MissingRefError.message(P.baseId,Y);if("fail"==P.opts.missingRefs)P.logger.error(R),(S=S||[]).push(U),U="",!1!==P.createErrors?(U+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(H)+" , params: { ref: '"+P.util.escapeQuotes(Y)+"' } ",!1!==P.opts.messages&&(U+=" , message: 'can\\'t resolve reference "+P.util.escapeQuotes(Y)+"' "),P.opts.verbose&&(U+=" , schema: "+P.util.toQuotedString(Y)+" , parentSchema: validate.schema"+P.schemaPath+" , data: "+k+" "),U+=" } "):U+=" {} ",H=U,U=S.pop(),U+=!P.compositeRule&&F?P.async?" throw new ValidationError(["+H+"]); ":" validate.errors = ["+H+"]; return false; ":" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",F&&(U+=" if (false) { ");else{if("ignore"!=P.opts.missingRefs)throw new P.MissingRefError(P.baseId,Y,R);P.logger.warn(R),F&&(U+=" if (true) { ")}}else M.inline?((H=P.util.copy(P)).level++,R="valid"+H.level,H.schema=M.schema,H.schemaPath="",H.errSchemaPath=Y,U+=" "+P.validate(H).replace(/validate\.schema/g,M.code)+" ",F&&(U+=" if ("+R+") { ")):(c=!0===M.$async||P.async&&!1!==M.$async,K=M.code)}if(K)if((S=S||[]).push(U),U="",U+=P.opts.passContext?" "+K+".call(this, ":" "+K+"( ",U+=" "+k+", (dataPath || '')",'""'!=P.errorPath&&(U+=" + "+P.errorPath),H=U+=" , "+(Y=Z?"data"+(Z-1||""):"parentData")+" , "+(Z?P.dataPathArr[Z]:"parentDataProperty")+", rootData)  ",U=S.pop(),c){if(!P.async)throw new Error("async schema referenced by sync schema");F&&(U+=" var "+_+"; "),U+=" try { await "+H+"; ",F&&(U+=" "+_+" = true; "),U+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",F&&(U+=" "+_+" = false; "),U+=" } ",F&&(U+=" if ("+_+") { ")}else U+=" if (!"+H+") { if (vErrors === null) vErrors = "+K+".errors; else vErrors = vErrors.concat("+K+".errors); errors = vErrors.length; } ",F&&(U+=" else { ");return U}},1204:function(Ce){"use strict";Ce.exports=function(P,H,ce){var c=" ",K=P.level,M=P.dataLevel,U=P.schema[H],Z=P.schemaPath+P.util.getProperty(H),Y=P.errSchemaPath+"/"+H,F=(H=!P.opts.allErrors,"data"+(M||"")),k="valid"+K,_=P.opts.$data&&U&&U.$data;if(_&&(c+=" var schema"+K+" = "+P.util.getData(U.$data,M,P.dataPathArr)+"; "),M="schema"+K,!_)if(U.length<P.opts.loopRequired&&P.schema.properties&&Object.keys(P.schema.properties).length){var R=[],S=U;if(S)for(var y=-1,w=S.length-1;y<w;){var p=S[y+=1],f=P.schema.properties[p];f&&(P.opts.strictKeywords?"object"==typeof f&&0<Object.keys(f).length||!1===f:P.util.schemaHasRules(f,P.RULES.all))||(R[R.length]=p)}}else R=U;if(_||R.length){var m=P.errorPath,h=(U=_||R.length>=P.opts.loopRequired,P.opts.ownProperties);if(H){if(c+=" var missing"+K+"; ",U){_||(c+=" var "+M+" = validate.schema"+Z+"; ");var v="' + "+(G="schema"+K+"["+(x="i"+K)+"]")+" + '";P.opts._errorDataPathProperty&&(P.errorPath=P.util.getPathExpr(m,G,P.opts.jsonPointers)),c+=" var "+k+" = true; ",_&&(c+=" if (schema"+K+" === undefined) "+k+" = true; else if (!Array.isArray(schema"+K+")) "+k+" = false; else {"),c+=" for (var "+x+" = 0; "+x+" < "+M+".length; "+x+"++) { "+k+" = "+F+"["+M+"["+x+"]] !== undefined ",h&&(c+=" &&   Object.prototype.hasOwnProperty.call("+F+", "+M+"["+x+"]) "),c+="; if (!"+k+") break; } ",_&&(c+="  }  "),(Q=Q||[]).push(c+="  if (!"+k+") {   "),c="",!1!==P.createErrors?(c+=" { keyword: 'required' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(Y)+" , params: { missingProperty: '"+v+"' } ",!1!==P.opts.messages&&(c+=" , message: '",c+=P.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+v+"\\'",c+="' "),P.opts.verbose&&(c+=" , schema: validate.schema"+Z+" , parentSchema: validate.schema"+P.schemaPath+" , data: "+F+" "),c+=" } "):c+=" {} ";var O=c;c=Q.pop()}else{c+=" if ( ";var Q,C=R;if(C)for(var x=-1,L=C.length-1;x<L;)V=C[x+=1],x&&(c+=" || "),c+=" ( ( "+(ee=F+(q=P.util.getProperty(V)))+" === undefined ",h&&(c+=" || ! Object.prototype.hasOwnProperty.call("+F+", '"+P.util.escapeQuotes(V)+"') "),c+=") && (missing"+K+" = "+P.util.toQuotedString(P.opts.jsonPointers?V:q)+") ) ";c+=") {  ",v="' + "+(G="missing"+K)+" + '",P.opts._errorDataPathProperty&&(P.errorPath=P.opts.jsonPointers?P.util.getPathExpr(m,G,!0):m+" + "+G),(Q=Q||[]).push(c),c="",!1!==P.createErrors?(c+=" { keyword: 'required' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(Y)+" , params: { missingProperty: '"+v+"' } ",!1!==P.opts.messages&&(c+=" , message: '",c+=P.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+v+"\\'",c+="' "),P.opts.verbose&&(c+=" , schema: validate.schema"+Z+" , parentSchema: validate.schema"+P.schemaPath+" , data: "+F+" "),c+=" } "):c+=" {} ",O=c,c=Q.pop()}c+=!P.compositeRule&&H?P.async?" throw new ValidationError(["+O+"]); ":" validate.errors = ["+O+"]; return false; ":" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c+=" } else { "}else if(U){var G;_||(c+=" var "+M+" = validate.schema"+Z+"; "),v="' + "+(G="schema"+K+"["+(x="i"+K)+"]")+" + '",P.opts._errorDataPathProperty&&(P.errorPath=P.util.getPathExpr(m,G,P.opts.jsonPointers)),_&&(c+=" if ("+M+" && !Array.isArray("+M+")) {  var err =   ",!1!==P.createErrors?(c+=" { keyword: 'required' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(Y)+" , params: { missingProperty: '"+v+"' } ",!1!==P.opts.messages&&(c+=" , message: '",c+=P.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+v+"\\'",c+="' "),P.opts.verbose&&(c+=" , schema: validate.schema"+Z+" , parentSchema: validate.schema"+P.schemaPath+" , data: "+F+" "),c+=" } "):c+=" {} ",c+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+M+" !== undefined) { "),c+=" for (var "+x+" = 0; "+x+" < "+M+".length; "+x+"++) { if ("+F+"["+M+"["+x+"]] === undefined ",h&&(c+=" || ! Object.prototype.hasOwnProperty.call("+F+", "+M+"["+x+"]) "),c+=") {  var err =   ",!1!==P.createErrors?(c+=" { keyword: 'required' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(Y)+" , params: { missingProperty: '"+v+"' } ",!1!==P.opts.messages&&(c+=" , message: '",c+=P.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+v+"\\'",c+="' "),P.opts.verbose&&(c+=" , schema: validate.schema"+Z+" , parentSchema: validate.schema"+P.schemaPath+" , data: "+F+" "),c+=" } "):c+=" {} ",c+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",_&&(c+="  }  ")}else{var T=R;if(T)for(var V,J=-1,X=T.length-1;J<X;){V=T[J+=1];var q=P.util.getProperty(V),ee=(v=P.util.escapeQuotes(V),F+q);P.opts._errorDataPathProperty&&(P.errorPath=P.util.getPath(m,V,P.opts.jsonPointers)),c+=" if ( "+ee+" === undefined ",h&&(c+=" || ! Object.prototype.hasOwnProperty.call("+F+", '"+P.util.escapeQuotes(V)+"') "),c+=") {  var err =   ",!1!==P.createErrors?(c+=" { keyword: 'required' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(Y)+" , params: { missingProperty: '"+v+"' } ",!1!==P.opts.messages&&(c+=" , message: '",c+=P.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+v+"\\'",c+="' "),P.opts.verbose&&(c+=" , schema: validate.schema"+Z+" , parentSchema: validate.schema"+P.schemaPath+" , data: "+F+" "),c+=" } "):c+=" {} ",c+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}P.errorPath=m}else H&&(c+=" if (true) {");return c}},1985:function(Ce){"use strict";Ce.exports=function(P,H,ce){var c,K=" ",U=P.level,R=P.dataLevel,Z=P.schema[H],Y=P.schemaPath+P.util.getProperty(H),F=(H=P.errSchemaPath+"/"+H,!P.opts.allErrors),k="data"+(R||""),_="valid"+U,M=P.opts.$data&&Z&&Z.$data;return R=M?(K+=" var schema"+U+" = "+P.util.getData(Z.$data,R,P.dataPathArr)+"; ","schema"+U):Z,(Z||M)&&!1!==P.opts.uniqueItems?(M&&(K+=" var "+_+"; if ("+R+" === false || "+R+" === undefined) "+_+" = true; else if (typeof "+R+" != 'boolean') "+_+" = false; else { "),K+=" var i = "+k+".length , "+_+" = true , j; if (i > 1) { ",U=P.schema.items&&P.schema.items.type,R=Array.isArray(U),!U||"object"==U||"array"==U||R&&(0<=U.indexOf("object")||0<=U.indexOf("array"))?K+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+k+"[i], "+k+"[j])) { "+_+" = false; break outer; } } } ":(K=(K+=" var itemIndices = {}, item; for (;i--;) { var item = "+k+"[i]; ")+" if ("+P.util["checkDataType"+(R?"s":"")](U,"item",P.opts.strictNumbers,!0)+") continue; ",R&&(K+=" if (typeof item == 'string') item = '\"' + item; "),K+=" if (typeof itemIndices[item] == 'number') { "+_+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "),K+=" } ",M&&(K+="  }  "),(c=c||[]).push(K+=" if (!"+_+") {   "),K="",!1!==P.createErrors?(K+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(H)+" , params: { i: i, j: j } ",!1!==P.opts.messages&&(K+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),P.opts.verbose&&(K=(K+=" , schema:  ")+(M?"validate.schema"+Y:""+Z)+"         , parentSchema: validate.schema"+P.schemaPath+" , data: "+k+" "),K+=" } "):K+=" {} ",U=K,K=c.pop(),K+=!P.compositeRule&&F?P.async?" throw new ValidationError(["+U+"]); ":" validate.errors = ["+U+"]; return false; ":" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",K+=" } ",F&&(K+=" else { ")):F&&(K+=" if (true) { "),K}},1869:function(Ce){"use strict";Ce.exports=function(P,ae,ce){var c="",K=!0===P.schema.$async,U=P.util.schemaHasRulesExcept(P.schema,P.RULES.all,"$ref"),Z=P.self._getId(P.schema);if(P.opts.strictKeywords&&(Y=P.util.schemaUnknownRules(P.schema,P.RULES.keywords))){if(Y="unknown keyword: "+Y,"log"!==P.opts.strictKeywords)throw new Error(Y);P.logger.warn(Y)}if(P.isTop&&(c+=" var validate = ",K&&(P.async=!0,c+="async "),c+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",Z)&&(P.opts.sourceCode||P.opts.processCode)&&(c+=" /*# sourceURL="+Z+" */ "),"boolean"==typeof P.schema||!U&&!P.schema.$ref)F=P.level,k=P.dataLevel,ee=P.schema[ae="false schema"],v=P.schemaPath+P.util.getProperty(ae),O=P.errSchemaPath+"/"+ae,S=!P.opts.allErrors,_="data"+(k||""),R="valid"+F,!1===P.schema?(P.isTop?S=!0:c+=" var "+R+" = false; ",(Re=Re||[]).push(c),c="",!1!==P.createErrors?(c+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(O)+" , params: {} ",!1!==P.opts.messages&&(c+=" , message: 'boolean schema is false' "),P.opts.verbose&&(c+=" , schema: false , parentSchema: validate.schema"+P.schemaPath+" , data: "+_+" "),c+=" } "):c+=" {} ",V=c,c=Re.pop(),c+=!P.compositeRule&&S?P.async?" throw new ValidationError(["+V+"]); ":" validate.errors = ["+V+"]; return false; ":" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "):c+=P.isTop?K?" return data; ":" validate.errors = null; return true; ":" var "+R+" = true; ",P.isTop&&(c+=" }; return validate; ");else{if(P.isTop){var H=P.isTop,F=P.level=0,k=P.dataLevel=0,_="data";if(P.rootId=P.resolve.fullPath(P.self._getId(P.root.schema)),P.baseId=P.baseId||P.rootId,delete P.isTop,P.dataPathArr=[""],void 0!==P.schema.default&&P.opts.useDefaults&&P.opts.strictDefaults){var M="default is ignored in the schema root";if("log"!==P.opts.strictDefaults)throw new Error(M);P.logger.warn(M)}c=(c+=" var vErrors = null; ")+" var errors = 0;      if (rootData === undefined) rootData = data; "}else{if(F=P.level,_="data"+((k=P.dataLevel)||""),Z&&(P.baseId=P.resolve.url(P.baseId,Z)),K&&!P.async)throw new Error("async schema in sync schema");c+=" var errs_"+F+" = errors;"}var R="valid"+F,S=!P.opts.allErrors,y="",w="",p=P.schema.type,f=Array.isArray(p);if(p&&P.opts.nullable&&!0===P.schema.nullable&&(f?-1==p.indexOf("null")&&(p=p.concat("null")):"null"!=p&&(p=[p,"null"],f=!0)),f&&1==p.length&&(p=p[0],f=!1),P.schema.$ref&&U){if("fail"==P.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+P.errSchemaPath+'" (see option extendRefs)');!0!==P.opts.extendRefs&&(U=!1,P.logger.warn('$ref: keywords ignored in schema at path "'+P.errSchemaPath+'"'))}if(P.schema.$comment&&P.opts.$comment&&(c+=" "+P.RULES.all.$comment.code(P,"$comment")),p){P.opts.coerceTypes&&(m=P.util.coerceToTypes(P.opts.coerceTypes,p));var m,h=P.RULES.types[p];if(m||f||!0===h||h&&!pe(h)){var v=P.schemaPath+".type",O=P.errSchemaPath+"/type";if(v=P.schemaPath+".type",O=P.errSchemaPath+"/type",c+=" if ("+P.util[f?"checkDataTypes":"checkDataType"](p,_,P.opts.strictNumbers,!0)+") { ",m){var C="dataType"+F,x="coerced"+F,L=(c+=" var "+C+" = typeof "+_+"; var "+x+" = undefined; ","array"==P.opts.coerceTypes&&(c+=" if ("+C+" == 'object' && Array.isArray("+_+") && "+_+".length == 1) { "+_+" = "+_+"[0]; "+C+" = typeof "+_+"; if ("+P.util.checkDataType(P.schema.type,_,P.opts.strictNumbers)+") "+x+" = "+_+"; } "),c+=" if ("+x+" !== undefined) ; ",m);if(L)for(var Q,G=-1,T=L.length-1;G<T;)"string"==(Q=L[G+=1])?c+=" else if ("+C+" == 'number' || "+C+" == 'boolean') "+x+" = '' + "+_+"; else if ("+_+" === null) "+x+" = ''; ":"number"==Q||"integer"==Q?(c+=" else if ("+C+" == 'boolean' || "+_+" === null || ("+C+" == 'string' && "+_+" && "+_+" == +"+_+" ","integer"==Q&&(c+=" && !("+_+" % 1)"),c+=")) "+x+" = +"+_+"; "):"boolean"==Q?c+=" else if ("+_+" === 'false' || "+_+" === 0 || "+_+" === null) "+x+" = false; else if ("+_+" === 'true' || "+_+" === 1) "+x+" = true; ":"null"==Q?c+=" else if ("+_+" === '' || "+_+" === 0 || "+_+" === false) "+x+" = null; ":"array"==P.opts.coerceTypes&&"array"==Q&&(c+=" else if ("+C+" == 'string' || "+C+" == 'number' || "+C+" == 'boolean' || "+_+" == null) "+x+" = ["+_+"]; ");(Re=Re||[]).push(c+=" else {   "),c="",!1!==P.createErrors?(c=(c+=" { keyword: 'type' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(O)+" , params: { type: '")+(f?""+p.join(","):""+p)+"' } ",!1!==P.opts.messages&&(c=(c+=" , message: 'should be ")+(f?""+p.join(","):""+p)+"' "),P.opts.verbose&&(c+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+P.schemaPath+" , data: "+_+" "),c+=" } "):c+=" {} ";var V=c,Y=(c=Re.pop(),c+=!P.compositeRule&&S?P.async?" throw new ValidationError(["+V+"]); ":" validate.errors = ["+V+"]; return false; ":" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",k?"data"+(k-1||""):"parentData");c=c+" } if ("+x+" !== undefined) {   "+_+" = "+x+"; ",k||(c+="if ("+Y+" !== undefined)"),c+=" "+Y+"["+(k?P.dataPathArr[k]:"parentDataProperty")+"] = "+x+"; } "}else(Re=Re||[]).push(c),c="",!1!==P.createErrors?(c=(c+=" { keyword: 'type' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(O)+" , params: { type: '")+(f?""+p.join(","):""+p)+"' } ",!1!==P.opts.messages&&(c=(c+=" , message: 'should be ")+(f?""+p.join(","):""+p)+"' "),P.opts.verbose&&(c+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+P.schemaPath+" , data: "+_+" "),c+=" } "):c+=" {} ",V=c,c=Re.pop(),c+=!P.compositeRule&&S?P.async?" throw new ValidationError(["+V+"]); ":" validate.errors = ["+V+"]; return false; ":" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";c+=" } "}}if(P.schema.$ref&&!U)c+=" "+P.RULES.all.$ref.code(P,"$ref")+" ",S&&(c=(c+=" } if (errors === ")+(H?"0":"errs_"+F)+") { ",w+="}");else{var J=P.RULES;if(J)for(var X=-1,q=J.length-1;X<q;)if(pe(h=J[X+=1])){if(h.type&&(c+=" if ("+P.util.checkDataType(h.type,_,P.opts.strictNumbers)+") { "),P.opts.useDefaults)if("object"==h.type&&P.schema.properties){var ee=P.schema.properties,j=Object.keys(ee);if(j)for(var D,N=-1,re=j.length-1;N<re;)if(void 0!==(Ae=ee[D=j[N+=1]]).default){var ue=_+P.util.getProperty(D);if(P.compositeRule){if(P.opts.strictDefaults){if(M="default is ignored for: "+ue,"log"!==P.opts.strictDefaults)throw new Error(M);P.logger.warn(M)}}else c+=" if ("+ue+" === undefined ","empty"==P.opts.useDefaults&&(c+=" || "+ue+" === null || "+ue+" === '' "),c+=" ) "+ue+" = ",c+="shared"==P.opts.useDefaults?" "+P.useDefault(Ae.default)+" ":" "+JSON.stringify(Ae.default)+" ",c+="; "}}else if("array"==h.type&&Array.isArray(P.schema.items)){var ve=P.schema.items;if(ve){G=-1;for(var Ae,Te=ve.length-1;G<Te;)if(void 0!==(Ae=ve[G+=1]).default)if(ue=_+"["+G+"]",P.compositeRule){if(P.opts.strictDefaults){if(M="default is ignored for: "+ue,"log"!==P.opts.strictDefaults)throw new Error(M);P.logger.warn(M)}}else c+=" if ("+ue+" === undefined ","empty"==P.opts.useDefaults&&(c+=" || "+ue+" === null || "+ue+" === '' "),c+=" ) "+ue+" = ",c+="shared"==P.opts.useDefaults?" "+P.useDefault(Ae.default)+" ":" "+JSON.stringify(Ae.default)+" ",c+="; "}}var Re,Me=h.rules;if(Me)for(var Ie,Ge=-1,oe=Me.length-1;Ge<oe;)ge(Ie=Me[Ge+=1])&&(Ie=Ie.code(P,Ie.keyword,h.type))&&(c+=" "+Ie+" ",S)&&(y+="}");S&&(c+=" "+y+" ",y=""),h.type&&(c+=" } ",p)&&p===h.type&&!m&&(v=P.schemaPath+".type",O=P.errSchemaPath+"/type",(Re=Re||[]).push(c+=" else { "),c="",!1!==P.createErrors?(c=(c+=" { keyword: 'type' , dataPath: (dataPath || '') + "+P.errorPath+" , schemaPath: "+P.util.toQuotedString(O)+" , params: { type: '")+(f?""+p.join(","):""+p)+"' } ",!1!==P.opts.messages&&(c=(c+=" , message: 'should be ")+(f?""+p.join(","):""+p)+"' "),P.opts.verbose&&(c+=" , schema: validate.schema"+v+" , parentSchema: validate.schema"+P.schemaPath+" , data: "+_+" "),c+=" } "):c+=" {} ",V=c,c=Re.pop(),c+=!P.compositeRule&&S?P.async?" throw new ValidationError(["+V+"]); ":" validate.errors = ["+V+"]; return false; ":" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c+=" } "),S&&(c=(c+=" if (errors === ")+(H?"0":"errs_"+F)+") { ",w+="}")}}S&&(c+=" "+w+" "),H?c=c+(K?" if (errors === 0) return data;            else throw new ValidationError(vErrors); ":" validate.errors = vErrors;  return errors === 0;       ")+" }; return validate;":c+=" var "+R+" = errors === errs_"+F+";"}return c;function pe(be){for(var ie=be.rules,se=0;se<ie.length;se++)if(ge(ie[se]))return 1}function ge(be){return void 0!==P.schema[be.keyword]||be.implements&&function(ie){for(var se=ie.implements,de=0;de<se.length;de++)if(void 0!==P.schema[se[de]])return 1}(be)}}},7931:function(Ce,P,ae){"use strict";var ce=/^[a-z_$][a-z0-9_$-]*$/i,c=ae(1793),K=ae(5868);Ce.exports={add:function(Z,Y){var H=this.RULES;if(H.keywords[Z])throw new Error("Keyword "+Z+" is already defined");if(!ce.test(Z))throw new Error("Keyword "+Z+" is not a valid identifier");if(Y){this.validateKeyword(Y,!0);var F=Y.type;if(Array.isArray(F))for(var k=0;k<F.length;k++)M(Z,F[k],Y);else M(Z,F,Y);var _=Y.metaSchema;_&&(Y.$data&&this._opts.$data&&(_={anyOf:[_,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),Y.validateSchema=this.compile(_,!0))}function M(R,S,y){for(var w,p=0;p<H.length;p++){var f=H[p];if(f.type==S){w=f;break}}w||H.push(w={type:S,rules:[]}),w.rules.push(y={keyword:R,definition:y,custom:!0,code:c,implements:y.implements}),H.custom[R]=y}return H.keywords[Z]=H.all[Z]=!0,this},get:function(Z){var Y=this.RULES.custom[Z];return Y?Y.definition:this.RULES.keywords[Z]||!1},remove:function(Z){var Y=this.RULES;delete Y.keywords[Z],delete Y.all[Z],delete Y.custom[Z];for(var H=0;H<Y.length;H++)for(var F=Y[H].rules,k=0;k<F.length;k++)if(F[k].keyword==Z){F.splice(k,1);break}return this},validate:function U(Z,Y){U.errors=null;var H=this._validateKeyword=this._validateKeyword||this.compile(K,!0);if(H(Z))return!0;if(U.errors=H.errors,Y)throw new Error("custom keyword definition is invalid: "+this.errorsText(H.errors));return!1}}},2303:function(Ce){"use strict";Ce.exports=function P(ae,ce){if(ae===ce)return!0;if(ae&&ce&&"object"==typeof ae&&"object"==typeof ce){if(ae.constructor!==ce.constructor)return!1;var c,K,U;if(Array.isArray(ae)){if((c=ae.length)!=ce.length)return!1;for(K=c;0!=K--;)if(!P(ae[K],ce[K]))return!1}else{if(ae.constructor===RegExp)return ae.source===ce.source&&ae.flags===ce.flags;if(ae.valueOf!==Object.prototype.valueOf)return ae.valueOf()===ce.valueOf();if(ae.toString!==Object.prototype.toString)return ae.toString()===ce.toString();if((c=(U=Object.keys(ae)).length)!==Object.keys(ce).length)return!1;for(K=c;0!=K--;)if(!Object.prototype.hasOwnProperty.call(ce,U[K]))return!1;for(K=c;0!=K--;){var Z=U[K];if(!P(ae[Z],ce[Z]))return!1}}return!0}return ae!=ae&&ce!=ce}},3508:function(Ce){"use strict";Ce.exports=function(P,ae){var ce,c="boolean"==typeof(ae="function"==typeof(ae=ae||{})?{cmp:ae}:ae).cycles&&ae.cycles,K=ae.cmp&&(ce=ae.cmp,function(Z){return function(Y,H){return ce(Y={key:Y,value:Z[Y]},H={key:H,value:Z[H]})}}),U=[];return function Z(Y){if(void 0!==(Y=Y&&Y.toJSON&&"function"==typeof Y.toJSON?Y.toJSON():Y)){if("number"==typeof Y)return isFinite(Y)?""+Y:"null";if("object"!=typeof Y)return JSON.stringify(Y);if(Array.isArray(Y)){for(k="[",_=0;_<Y.length;_++)_&&(k+=","),k+=Z(Y[_])||"null";return k+"]"}if(null===Y)return"null";if(-1!==U.indexOf(Y)){if(c)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}for(var H=U.push(Y)-1,F=Object.keys(Y).sort(K&&K(Y)),k="",_=0;_<F.length;_++){var M=F[_],R=Z(Y[M]);R&&(k&&(k+=","),k+=JSON.stringify(M)+":"+R)}return U.splice(H,1),"{"+k+"}"}}(P)}},233:function(Ce){Ce.exports=function P(F,k){"use strict";function c(p){return P.insensitive&&(""+p).toLowerCase()||""+p}var K,U,S=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,R=/(^[ ]*|[ ]*$)/g,Z=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,Y=/^0x[0-9a-f]+$/i,H=/^0/,_=(F=c(F).replace(R,"")||"",k=c(k).replace(R,"")||"",F.replace(S,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0")),M=k.replace(S,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0");if(R=parseInt(F.match(Y),16)||1!==_.length&&F.match(Z)&&Date.parse(F),S=parseInt(k.match(Y),16)||R&&k.match(Z)&&Date.parse(k)||null){if(R<S)return-1;if(S<R)return 1}for(var y=0,w=Math.max(_.length,M.length);y<w;y++){if(K=!(_[y]||"").match(H)&&parseFloat(_[y])||_[y]||0,U=!(M[y]||"").match(H)&&parseFloat(M[y])||M[y]||0,isNaN(K)!==isNaN(U))return isNaN(K)?1:-1;if(typeof K!=typeof U&&(K+="",U+=""),K<U)return-1;if(U<K)return 1}return 0}},5156:function(Ce,P){!function(ae){"use strict";function ce(D){return null!==D&&"[object Array]"===Object.prototype.toString.call(D)}function c(D){return null!==D&&"[object Object]"===Object.prototype.toString.call(D)}function K(D,N){if(D!==N){if(Object.prototype.toString.call(D)!==Object.prototype.toString.call(N))return!1;if(!0===ce(D)){if(D.length!==N.length)return!1;for(var re=0;re<D.length;re++)if(!1===K(D[re],N[re]))return!1}else{if(!0!==c(D))return!1;var ue,ve,Ae={};for(ue in D)if(hasOwnProperty.call(D,ue)){if(!1===K(D[ue],N[ue]))return!1;Ae[ue]=!0}for(ve in N)if(hasOwnProperty.call(N,ve)&&!0!==Ae[ve])return!1}}return!0}function U(D){if(""===D||!1===D||null===D||ce(D)&&0===D.length)return!0;if(c(D)){for(var N in D)if(D.hasOwnProperty(N))return!1;return!0}return!1}var Z="function"==typeof String.prototype.trimLeft?function(D){return D.trimLeft()}:function(D){return D.match(/^\s*(.*)/)[1]},Y={0:"number",1:"any",2:"string",3:"array",4:"object",5:"boolean",6:"expression",7:"null",8:"Array<number>",9:"Array<string>"},H="UnquotedIdentifier",F="QuotedIdentifier",k="Rbracket",_="Rparen",M="Comma",R="Colon",S="Rbrace",y="Number",w="Current",p="Expref",f="Pipe",m="Flatten",h="Star",v="Filter",O="Lbrace",C="Lbracket",x="Lparen",L="Literal",Q={".":"Dot","*":h,",":M,":":R,"{":O,"}":S,"]":k,"(":x,")":_,"@":w},G={"<":!0,">":!0,"=":!0,"!":!0},T={" ":!0,"\t":!0,"\n":!0};function V(D){return"0"<=D&&D<="9"||"-"===D}function J(){}J.prototype={tokenize:function(D){var N,re,ue=[];for(this._current=0;this._current<D.length;)if("a"<=(Ae=D[this._current])&&Ae<="z"||"A"<=Ae&&Ae<="Z"||"_"===Ae)ve=this._current,N=this._consumeUnquotedIdentifier(D),ue.push({type:H,value:N,start:ve});else if(void 0!==Q[D[this._current]])ue.push({type:Q[D[this._current]],value:D[this._current],start:this._current}),this._current++;else if(V(D[this._current]))re=this._consumeNumber(D),ue.push(re);else if("["===D[this._current])re=this._consumeLBracket(D),ue.push(re);else if('"'===D[this._current])ve=this._current,N=this._consumeQuotedIdentifier(D),ue.push({type:F,value:N,start:ve});else if("'"===D[this._current])ve=this._current,N=this._consumeRawStringLiteral(D),ue.push({type:L,value:N,start:ve});else if("`"===D[this._current]){var ve=this._current,Ae=this._consumeLiteral(D);ue.push({type:L,value:Ae,start:ve})}else if(void 0!==G[D[this._current]])ue.push(this._consumeOperator(D));else if(void 0!==T[D[this._current]])this._current++;else if("&"===D[this._current])ve=this._current,this._current++,"&"===D[this._current]?(this._current++,ue.push({type:"And",value:"&&",start:ve})):ue.push({type:p,value:"&",start:ve});else{if("|"!==D[this._current])throw(Ae=new Error("Unknown character:"+D[this._current])).name="LexerError",Ae;ve=this._current,this._current++,"|"===D[this._current]?(this._current++,ue.push({type:"Or",value:"||",start:ve})):ue.push({type:f,value:"|",start:ve})}return ue},_consumeUnquotedIdentifier:function(D){var N,re=this._current;for(this._current++;this._current<D.length&&("a"<=(N=D[this._current])&&N<="z"||"A"<=N&&N<="Z"||"0"<=N&&N<="9"||"_"===N);)this._current++;return D.slice(re,this._current)},_consumeQuotedIdentifier:function(D){for(var N=this._current,re=(this._current++,D.length);'"'!==D[this._current]&&this._current<re;){var ue=this._current;"\\"!==D[ue]||"\\"!==D[ue+1]&&'"'!==D[ue+1]?ue++:ue+=2,this._current=ue}return this._current++,JSON.parse(D.slice(N,this._current))},_consumeRawStringLiteral:function(D){for(var N=this._current,re=(this._current++,D.length);"'"!==D[this._current]&&this._current<re;){var ue=this._current;"\\"!==D[ue]||"\\"!==D[ue+1]&&"'"!==D[ue+1]?ue++:ue+=2,this._current=ue}return this._current++,D.slice(N+1,this._current-1).replace("\\'","'")},_consumeNumber:function(D){for(var N=this._current,re=(this._current++,D.length);V(D[this._current])&&this._current<re;)this._current++;var ue=parseInt(D.slice(N,this._current));return{type:y,value:ue,start:N}},_consumeLBracket:function(D){var N=this._current;return this._current++,"?"===D[this._current]?(this._current++,{type:v,value:"[?",start:N}):"]"===D[this._current]?(this._current++,{type:m,value:"[]",start:N}):{type:C,value:"[",start:N}},_consumeOperator:function(D){var N=this._current,re=D[N];return this._current++,"!"===re?"="===D[this._current]?(this._current++,{type:"NE",value:"!=",start:N}):{type:"Not",value:"!",start:N}:"<"===re?"="===D[this._current]?(this._current++,{type:"LTE",value:"<=",start:N}):{type:"LT",value:"<",start:N}:">"===re?"="===D[this._current]?(this._current++,{type:"GTE",value:">=",start:N}):{type:"GT",value:">",start:N}:"="===re&&"="===D[this._current]?(this._current++,{type:"EQ",value:"==",start:N}):void 0},_consumeLiteral:function(D){this._current++;for(var N=this._current,re=D.length;"`"!==D[this._current]&&this._current<re;){var ue=this._current;"\\"!==D[ue]||"\\"!==D[ue+1]&&"`"!==D[ue+1]?ue++:ue+=2,this._current=ue}return N=(N=Z(D.slice(N,this._current))).replace("\\`","`"),N=this._looksLikeJSON(N)?JSON.parse(N):JSON.parse('"'+N+'"'),this._current++,N},_looksLikeJSON:function(D){if(""===D)return!1;if(0<='[{"'.indexOf(D[0])||0<=["true","false","null"].indexOf(D))return!0;if(!(0<="-0123456789".indexOf(D[0])))return!1;try{return JSON.parse(D),!0}catch{return!1}}};var X={};function q(){}function ee(D){this.runtime=D}function j(D){this._interpreter=D,this.functionTable={abs:{_func:this._functionAbs,_signature:[{types:[0]}]},avg:{_func:this._functionAvg,_signature:[{types:[8]}]},ceil:{_func:this._functionCeil,_signature:[{types:[0]}]},contains:{_func:this._functionContains,_signature:[{types:[2,3]},{types:[1]}]},ends_with:{_func:this._functionEndsWith,_signature:[{types:[2]},{types:[2]}]},floor:{_func:this._functionFloor,_signature:[{types:[0]}]},length:{_func:this._functionLength,_signature:[{types:[2,3,4]}]},map:{_func:this._functionMap,_signature:[{types:[6]},{types:[3]}]},max:{_func:this._functionMax,_signature:[{types:[8,9]}]},merge:{_func:this._functionMerge,_signature:[{types:[4],variadic:!0}]},max_by:{_func:this._functionMaxBy,_signature:[{types:[3]},{types:[6]}]},sum:{_func:this._functionSum,_signature:[{types:[8]}]},starts_with:{_func:this._functionStartsWith,_signature:[{types:[2]},{types:[2]}]},min:{_func:this._functionMin,_signature:[{types:[8,9]}]},min_by:{_func:this._functionMinBy,_signature:[{types:[3]},{types:[6]}]},type:{_func:this._functionType,_signature:[{types:[1]}]},keys:{_func:this._functionKeys,_signature:[{types:[4]}]},values:{_func:this._functionValues,_signature:[{types:[4]}]},sort:{_func:this._functionSort,_signature:[{types:[9,8]}]},sort_by:{_func:this._functionSortBy,_signature:[{types:[3]},{types:[6]}]},join:{_func:this._functionJoin,_signature:[{types:[2]},{types:[9]}]},reverse:{_func:this._functionReverse,_signature:[{types:[2,3]}]},to_array:{_func:this._functionToArray,_signature:[{types:[1]}]},to_string:{_func:this._functionToString,_signature:[{types:[1]}]},to_number:{_func:this._functionToNumber,_signature:[{types:[1]}]},not_null:{_func:this._functionNotNull,_signature:[{types:[1],variadic:!0}]}}}X.EOF=0,X[H]=0,X[F]=0,X[k]=0,X[_]=0,X[M]=0,X[S]=0,X[y]=0,X[w]=0,X[p]=0,X.Pipe=1,X.Or=2,X.And=3,X.EQ=5,X.GT=5,X.LT=5,X.GTE=5,X.LTE=5,X.NE=5,X[m]=9,X.Star=20,X[v]=21,X.Dot=40,X.Not=45,X[O]=50,X[C]=55,X[x]=60,q.prototype={parse:function(re){var N;if(this._loadTokens(re),this.index=0,re=this.expression(0),"EOF"!==this._lookahead(0))throw N=this._lookaheadToken(0),(N=new Error("Unexpected token type: "+N.type+", value: "+N.value)).name="ParserError",N;return re},_loadTokens:function(D){var N=(new J).tokenize(D);N.push({type:"EOF",value:"",start:D.length}),this.tokens=N},expression:function(D){for(var N=this._lookaheadToken(0),re=(this._advance(),this.nud(N)),ue=this._lookahead(0);D<X[ue];)this._advance(),re=this.led(ue,re),ue=this._lookahead(0);return re},_lookahead:function(D){return this.tokens[this.index+D].type},_lookaheadToken:function(D){return this.tokens[this.index+D]},_advance:function(){this.index++},nud:function(D){var N,re;switch(D.type){case L:return{type:"Literal",value:D.value};case H:return{type:"Field",name:D.value};case F:var ue={type:"Field",name:D.value};if(this._lookahead(0)===x)throw new Error("Quoted identifier not allowed for function names.");return ue;case"Not":return{type:"NotExpression",children:[N=this.expression(X.Not)]};case h:return N=null,{type:"ValueProjection",children:[{type:"Identity"},N=this._lookahead(0)===k?{type:"Identity"}:this._parseProjectionRHS(X.Star)]};case v:return this.led(D.type,{type:"Identity"});case O:return this._parseMultiselectHash();case m:return{type:"Projection",children:[{type:m,children:[{type:"Identity"}]},N=this._parseProjectionRHS(X.Flatten)]};case C:return this._lookahead(0)===y||this._lookahead(0)===R?(N=this._parseIndexExpression(),this._projectIfSlice({type:"Identity"},N)):this._lookahead(0)===h&&this._lookahead(1)===k?(this._advance(),this._advance(),{type:"Projection",children:[{type:"Identity"},N=this._parseProjectionRHS(X.Star)]}):this._parseMultiselectList();case w:return{type:w};case p:return{type:"ExpressionReference",children:[re=this.expression(X.Expref)]};case x:for(var ve=[];this._lookahead(0)!==_;)this._lookahead(0)===w?(re={type:w},this._advance()):re=this.expression(0),ve.push(re);return this._match(_),ve[0];default:this._errorToken(D)}},led:function(D,N){var re;switch(D){case"Dot":var ue=X.Dot;return this._lookahead(0)!==h?{type:"Subexpression",children:[N,re=this._parseDotRHS(ue)]}:(this._advance(),{type:"ValueProjection",children:[N,re=this._parseProjectionRHS(ue)]});case f:return re=this.expression(X.Pipe),{type:f,children:[N,re]};case"Or":return{type:"OrExpression",children:[N,re=this.expression(X.Or)]};case"And":return{type:"AndExpression",children:[N,re=this.expression(X.And)]};case x:ue=N.name;for(var ve,Ae=[];this._lookahead(0)!==_;)this._lookahead(0)===w?(ve={type:w},this._advance()):ve=this.expression(0),this._lookahead(0)===M&&this._match(M),Ae.push(ve);return this._match(_),{type:"Function",name:ue,children:Ae};case v:return ue=this.expression(0),this._match(k),{type:"FilterProjection",children:[N,re=this._lookahead(0)===m?{type:"Identity"}:this._parseProjectionRHS(X.Filter),ue]};case m:return{type:"Projection",children:[{type:m,children:[N]},this._parseProjectionRHS(X.Flatten)]};case"EQ":case"NE":case"GT":case"GTE":case"LT":case"LTE":return this._parseComparator(N,D);case C:return(ue=this._lookaheadToken(0)).type===y||ue.type===R?(re=this._parseIndexExpression(),this._projectIfSlice(N,re)):(this._match(h),this._match(k),{type:"Projection",children:[N,re=this._parseProjectionRHS(X.Star)]});default:this._errorToken(this._lookaheadToken(0))}},_match:function(D){var N;if(this._lookahead(0)!==D)throw N=this._lookaheadToken(0),(D=new Error("Expected "+D+", got: "+N.type)).name="ParserError",D;this._advance()},_errorToken:function(D){throw(D=new Error("Invalid token ("+D.type+'): "'+D.value+'"')).name="ParserError",D},_parseIndexExpression:function(){var D;return this._lookahead(0)===R||this._lookahead(1)===R?this._parseSliceExpression():(D={type:"Index",value:this._lookaheadToken(0).value},this._advance(),this._match(k),D)},_projectIfSlice:function(D,N){return D={type:"IndexExpression",children:[D,N]},"Slice"===N.type?{type:"Projection",children:[D,this._parseProjectionRHS(X.Star)]}:D},_parseSliceExpression:function(){for(var D,N=[null,null,null],re=0,ue=this._lookahead(0);ue!==k&&re<3;){if(ue===R)re++;else{if(ue!==y)throw D=this._lookahead(0),(D=new Error("Syntax error, unexpected token: "+D.value+"("+D.type+")")).name="Parsererror",D;N[re]=this._lookaheadToken(0).value}this._advance(),ue=this._lookahead(0)}return this._match(k),{type:"Slice",children:N}},_parseComparator:function(D,N){return{type:"Comparator",name:N,children:[D,this.expression(X[N])]}},_parseDotRHS:function(D){var N=this._lookahead(0);return 0<=[H,F,h].indexOf(N)?this.expression(D):N===C?(this._match(C),this._parseMultiselectList()):N===O?(this._match(O),this._parseMultiselectHash()):void 0},_parseProjectionRHS:function(D){var N,re;if(X[this._lookahead(0)]<10)N={type:"Identity"};else if(this._lookahead(0)===C)N=this.expression(D);else if(this._lookahead(0)===v)N=this.expression(D);else{if("Dot"!==this._lookahead(0))throw re=this._lookaheadToken(0),(re=new Error("Sytanx error, unexpected token: "+re.value+"("+re.type+")")).name="ParserError",re;this._match("Dot"),N=this._parseDotRHS(D)}return N},_parseMultiselectList:function(){for(var D=[];this._lookahead(0)!==k;){var N=this.expression(0);if(D.push(N),this._lookahead(0)===M&&(this._match(M),this._lookahead(0)===k))throw new Error("Unexpected token Rbracket")}return this._match(k),{type:"MultiSelectList",children:D}},_parseMultiselectHash:function(){for(var D,N,re=[],ue=[H,F];;){if(D=this._lookaheadToken(0),ue.indexOf(D.type)<0)throw new Error("Expecting an identifier token, got: "+D.type);if(D=D.value,this._advance(),this._match(R),N=this.expression(0),re.push({type:"KeyValuePair",name:D,value:N}),this._lookahead(0)===M)this._match(M);else if(this._lookahead(0)===S){this._match(S);break}}return{type:"MultiSelectHash",children:re}}},ee.prototype={search:function(D,N){return this.visit(D,N)},visit:function(D,N){var re,ue,ve,Ae,Te,Re;switch(D.type){case"Field":return null!==N&&c(N)?void 0===(Me=N[D.name])?null:Me:null;case"Subexpression":for(pe=this.visit(D.children[0],N),se=1;se<D.children.length;se++)if(null===(pe=this.visit(D.children[1],pe)))return null;return pe;case"IndexExpression":return Te=this.visit(D.children[0],N),this.visit(D.children[1],Te);case"Index":return ce(N)?void 0===(pe=N[Me=(Me=D.value)<0?N.length+Me:Me])?null:pe:null;case"Slice":if(!ce(N))return null;var Me=D.children.slice(0),Ie=(Me=this.computeSliceParams(N.length,Me))[0],Ge=Me[1],oe=Me[2],pe=[];if(0<oe)for(se=Ie;se<Ge;se+=oe)pe.push(N[se]);else for(se=Ie;Ge<se;se+=oe)pe.push(N[se]);return pe;case"Projection":var ge=this.visit(D.children[0],N);if(!ce(ge))return null;for(be=[],se=0;se<ge.length;se++)null!==(ue=this.visit(D.children[1],ge[se]))&&be.push(ue);return be;case"ValueProjection":if(!c(ge=this.visit(D.children[0],N)))return null;for(var be=[],ie=function(ct){for(var Tt=Object.keys(ct),St=[],Et=0;Et<Tt.length;Et++)St.push(ct[Tt[Et]]);return St}(ge),se=0;se<ie.length;se++)null!==(ue=this.visit(D.children[1],ie[se]))&&be.push(ue);return be;case"FilterProjection":if(!ce(ge=this.visit(D.children[0],N)))return null;var de=[],_e=[];for(se=0;se<ge.length;se++)U(re=this.visit(D.children[2],ge[se]))||de.push(ge[se]);for(var $e=0;$e<de.length;$e++)null!==(ue=this.visit(D.children[1],de[$e]))&&_e.push(ue);return _e;case"Comparator":switch(ve=this.visit(D.children[0],N),Ae=this.visit(D.children[1],N),D.name){case"EQ":pe=K(ve,Ae);break;case"NE":pe=!K(ve,Ae);break;case"GT":pe=Ae<ve;break;case"GTE":pe=Ae<=ve;break;case"LT":pe=ve<Ae;break;case"LTE":pe=ve<=Ae;break;default:throw new Error("Unknown comparator: "+D.name)}return pe;case m:var Xe=this.visit(D.children[0],N);if(!ce(Xe))return null;var ut=[];for(se=0;se<Xe.length;se++)ce(ue=Xe[se])?ut.push.apply(ut,ue):ut.push(ue);return ut;case"Identity":return N;case"MultiSelectList":if(null===N)return null;for(be=[],se=0;se<D.children.length;se++)be.push(this.visit(D.children[se],N));return be;case"MultiSelectHash":if(null===N)return null;for(be={},se=0;se<D.children.length;se++)be[(Re=D.children[se]).name]=this.visit(Re.value,N);return be;case"OrExpression":return U(re=this.visit(D.children[0],N))?this.visit(D.children[1],N):re;case"AndExpression":return!0===U(ve=this.visit(D.children[0],N))?ve:this.visit(D.children[1],N);case"NotExpression":return U(ve=this.visit(D.children[0],N));case"Literal":return D.value;case f:return Te=this.visit(D.children[0],N),this.visit(D.children[1],Te);case w:return N;case"Function":var mt=[];for(se=0;se<D.children.length;se++)mt.push(this.visit(D.children[se],N));return this.runtime.callFunction(D.name,mt);case"ExpressionReference":return(Me=D.children[0]).jmespathType=p,Me;default:throw new Error("Unknown node type: "+D.type)}},computeSliceParams:function(D,re){var Ae=re[0],Te=re[1],ue=[null,null,null];if(null===(re=re[2]))re=1;else if(0===re)throw(ve=new Error("Invalid slice, step cannot be 0")).name="RuntimeError",ve;var ve=re<0;return Ae=null===Ae?ve?D-1:0:this.capSliceRange(D,Ae,re),Te=null===Te?ve?-1:D:this.capSliceRange(D,Te,re),ue[0]=Ae,ue[1]=Te,ue[2]=re,ue},capSliceRange:function(D,N,re){return N<0?(N+=D)<0&&(N=re<0?-1:0):D<=N&&(N=re<0?D-1:D),N}},j.prototype={callFunction:function(D,N){var re=this.functionTable[D];if(void 0===re)throw new Error("Unknown function: "+D+"()");return this._validateArgs(D,N,re._signature),re._func.call(this,N)},_validateArgs:function(D,N,re){var ue;if(re[re.length-1].variadic){if(N.length<re.length)throw ue=1===re.length?" argument":" arguments",new Error("ArgumentError: "+D+"() takes at least"+re.length+ue+" but received "+N.length)}else if(N.length!==re.length)throw ue=1===re.length?" argument":" arguments",new Error("ArgumentError: "+D+"() takes "+re.length+ue+" but received "+N.length);for(var ve=0;ve<re.length;ve++){for(var Ae,Te=!1,Re=re[ve].types,Me=this._getTypeName(N[ve]),Ie=0;Ie<Re.length;Ie++)if(this._typeMatches(Me,Re[Ie],N[ve])){Te=!0;break}if(!Te)throw Ae=Re.map(function(Ge){return Y[Ge]}).join(","),new Error("TypeError: "+D+"() expected argument "+(ve+1)+" to be type "+Ae+" but received type "+Y[Me]+" instead.")}},_typeMatches:function(D,N,re){if(1===N)return!0;if(9!==N&&8!==N&&3!==N)return D===N;if(3===N)return 3===D;if(3===D){var ue;8===N?ue=0:9===N&&(ue=2);for(var ve=0;ve<re.length;ve++)if(!this._typeMatches(this._getTypeName(re[ve]),ue,re[ve]))return!1;return!0}},_getTypeName:function(D){switch(Object.prototype.toString.call(D)){case"[object String]":return 2;case"[object Number]":return 0;case"[object Array]":return 3;case"[object Boolean]":return 5;case"[object Null]":return 7;case"[object Object]":return D.jmespathType===p?6:4}},_functionStartsWith:function(D){return 0===D[0].lastIndexOf(D[1])},_functionEndsWith:function(re){var N=re[0];return-1!==N.indexOf(re=re[1],N.length-re.length)},_functionReverse:function(D){var N;if(2!==this._getTypeName(D[0]))return(N=D[0].slice(0)).reverse(),N;for(var re=D[0],ue="",ve=re.length-1;0<=ve;ve--)ue+=re[ve];return ue},_functionAbs:function(D){return Math.abs(D[0])},_functionCeil:function(D){return Math.ceil(D[0])},_functionAvg:function(D){for(var N=0,re=D[0],ue=0;ue<re.length;ue++)N+=re[ue];return N/re.length},_functionContains:function(D){return 0<=D[0].indexOf(D[1])},_functionFloor:function(D){return Math.floor(D[0])},_functionLength:function(D){return(c(D[0])?Object.keys(D[0]):D[0]).length},_functionMap:function(D){for(var N=[],re=this._interpreter,ue=D[0],ve=D[1],Ae=0;Ae<ve.length;Ae++)N.push(re.visit(ue,ve[Ae]));return N},_functionMerge:function(D){for(var N={},re=0;re<D.length;re++){var ue,ve=D[re];for(ue in ve)N[ue]=ve[ue]}return N},_functionMax:function(D){if(0<D[0].length){if(0===this._getTypeName(D[0][0]))return Math.max.apply(Math,D[0]);for(var N=D[0],re=N[0],ue=1;ue<N.length;ue++)re.localeCompare(N[ue])<0&&(re=N[ue]);return re}return null},_functionMin:function(D){if(0<D[0].length){if(0===this._getTypeName(D[0][0]))return Math.min.apply(Math,D[0]);for(var N=D[0],re=N[0],ue=1;ue<N.length;ue++)N[ue].localeCompare(re)<0&&(re=N[ue]);return re}return null},_functionSum:function(D){for(var N=0,re=D[0],ue=0;ue<re.length;ue++)N+=re[ue];return N},_functionType:function(D){switch(this._getTypeName(D[0])){case 0:return"number";case 2:return"string";case 3:return"array";case 4:return"object";case 5:return"boolean";case 6:return"expref";case 7:return"null"}},_functionKeys:function(D){return Object.keys(D[0])},_functionValues:function(D){for(var N=D[0],re=Object.keys(N),ue=[],ve=0;ve<re.length;ve++)ue.push(N[re[ve]]);return ue},_functionJoin:function(D){return D[1].join(D[0])},_functionToArray:function(D){return 3===this._getTypeName(D[0])?D[0]:[D[0]]},_functionToString:function(D){return 2===this._getTypeName(D[0])?D[0]:JSON.stringify(D[0])},_functionToNumber:function(D){var N=this._getTypeName(D[0]);return 0===N?D[0]:2!==N||(N=+D[0],isNaN(N))?null:N},_functionNotNull:function(D){for(var N=0;N<D.length;N++)if(7!==this._getTypeName(D[N]))return D[N];return null},_functionSort:function(D){return(D=D[0].slice(0)).sort(),D},_functionSortBy:function(D){var N=D[0].slice(0);if(0!==N.length){var re=this._interpreter,ue=D[1],ve=this._getTypeName(re.visit(ue,N[0]));if([0,2].indexOf(ve)<0)throw new Error("TypeError");for(var Ae=this,Te=[],Re=0;Re<N.length;Re++)Te.push([Re,N[Re]]);Te.sort(function(Ie,Ge){var oe=re.visit(ue,Ie[1]),pe=re.visit(ue,Ge[1]);if(Ae._getTypeName(oe)!==ve)throw new Error("TypeError: expected "+ve+", received "+Ae._getTypeName(oe));if(Ae._getTypeName(pe)!==ve)throw new Error("TypeError: expected "+ve+", received "+Ae._getTypeName(pe));return pe<oe?1:oe<pe?-1:Ie[0]-Ge[0]});for(var Me=0;Me<Te.length;Me++)N[Me]=Te[Me][1]}return N},_functionMaxBy:function(D){for(var N,re,ve=D[0],Ae=this.createKeyFunction(D[1],[0,2]),Te=-1/0,Re=0;Re<ve.length;Re++)Te<(re=Ae(ve[Re]))&&(Te=re,N=ve[Re]);return N},_functionMinBy:function(D){for(var N,re,ve=D[0],Ae=this.createKeyFunction(D[1],[0,2]),Te=1/0,Re=0;Re<ve.length;Re++)(re=Ae(ve[Re]))<Te&&(Te=re,N=ve[Re]);return N},createKeyFunction:function(D,N){var re=this,ue=this._interpreter;return function(Te){var Ae;if(Te=ue.visit(D,Te),N.indexOf(re._getTypeName(Te))<0)throw Ae="TypeError: expected one of "+N+", received "+re._getTypeName(Te),new Error(Ae);return Te}}},ae.tokenize=function(D){return(new J).tokenize(D)},ae.compile=function(D){return(new q).parse(D)},ae.search=function(D,N){var re=new q,ue=new ee(ve=new j),ve=(ve._interpreter=ue,re.parse(N));return ue.search(ve,D)},ae.strictDeepEqual=K}(P)},500:function(Ce){"use strict";var P=Ce.exports=function(ce,c,K){"function"==typeof c&&(K=c,c={}),function U(Z,Y,H,F,k,_,M,R,S,y){if(F&&"object"==typeof F&&!Array.isArray(F)){for(var w in Y(F,k,_,M,R,S,y),F){var p=F[w];if(Array.isArray(p)){if(w in P.arrayKeywords)for(var f=0;f<p.length;f++)U(Z,Y,H,p[f],k+"/"+w+"/"+f,_,k,w,F,f)}else if(w in P.propsKeywords){if(p&&"object"==typeof p)for(var m in p)U(Z,Y,H,p[m],k+"/"+w+"/"+ae(m),_,k,w,F,m)}else(w in P.keywords||Z.allKeys&&!(w in P.skipKeywords))&&U(Z,Y,H,p,k+"/"+w,_,k,w,F)}H(F,k,_,M,R,S,y)}}(c,"function"==typeof(K=c.cb||K)?K:K.pre||function(){},K.post||function(){},ce,"",ce)};function ae(ce){return ce.replace(/~/g,"~0").replace(/\//g,"~1")}P.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},P.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},P.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},P.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},7026:function(Ce,P){"use strict";var ae={b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",'"':'"',"/":"/","\\":"\\"},ce="a".charCodeAt(),c=(P.parse=function(y,w,p){var f={},m=0,h=0,v=0,O=p&&p.bigint&&typeof BigInt<"u";return{data:function C(N,re){x(),J(N,"value");var ue,ve=G();switch(ve){case"t":Q("rue"),ue=!0;break;case"f":Q("alse"),ue=!1;break;case"n":Q("ull"),ue=null;break;case'"':ue=L();break;case"[":ue=function(Ae){x();var Te=[],Re=0;if("]"!=G())for(T();;){Te.push(C(Ae+"/"+Re)),x();var Me=G();if("]"==Me)break;","!=Me&&j(),x(),Re++}return Te}(N);break;case"{":ue=function(Ae){x();var Te={};if("}"!=G())for(T();;){var Ie=q(),Re=('"'!=G()&&j(),L()),Me=Ae+"/"+S(Re);if("}"==(X(Me,"key",Ie),J(Me,"keyEnd"),x(),":"!=G()&&j(),x(),Te[Re]=C(Me),x(),Ie=G()))break;","!=Ie&&j(),x()}return Te}(N);break;default:T(),0<="-0123456789".indexOf(ve)?ue=function(){var Ae="",Te=!0;"-"==y[v]&&(Ae+=G()),Ae+=("0"==y[v]?G:V)(),"."==y[v]&&(Ae+=G()+V(),Te=!1),"e"!=y[v]&&"E"!=y[v]||(Ae+=G(),"+"!=y[v]&&"-"!=y[v]||(Ae+=G()),Ae+=V(),Te=!1);var Re=+Ae;return O&&Te&&(Re>Number.MAX_SAFE_INTEGER||Re<Number.MIN_SAFE_INTEGER)?BigInt(Ae):Re}():ee()}return J(N,"valueEnd"),x(),re&&v<y.length&&ee(),ue}("",!0),pointers:f};function x(){e:for(;v<y.length;){switch(y[v]){case" ":h++;break;case"\t":h+=4;break;case"\r":h=0;break;case"\n":h=0,m++;break;default:break e}v++}}function L(){for(var N,re="";'"'!=(N=G());)"\\"==N?(N=G())in ae?re+=ae[N]:"u"==N?re+=function(){for(var ue=4,ve=0;ue--;){ve<<=4;var Ae=G().toLowerCase();"a"<=Ae&&Ae<="f"?ve+=Ae.charCodeAt()-ce+10:"0"<=Ae&&Ae<="9"?ve+=+Ae:j()}return String.fromCharCode(ve)}():j():re+=N;return re}function Q(N){for(var re=0;re<N.length;re++)G()!==N[re]&&j()}function G(){D();var N=y[v];return v++,h++,N}function T(){v--,h--}function V(){for(var N="";"0"<=y[v]&&y[v]<="9";)N+=G();if(N.length)return N;D(),ee()}function J(N,re){X(N,re,q())}function X(N,re,ue){f[N]=f[N]||{},f[N][re]=ue}function q(){return{line:m,column:h,pos:v}}function ee(){throw new SyntaxError("Unexpected token "+y[v]+" in JSON at position "+v)}function j(){T(),ee()}function D(){if(v>=y.length)throw new SyntaxError("Unexpected end of JSON input")}},P.stringify=function(y,w,p){if(K(y)){var f=0;switch(typeof(h="object"==typeof p?p.space:p)){case"number":var m=10<h?10:h<0?0:Math.floor(h),h=m&&ee(m," "),v=m,O=m;break;case"string":h=h.slice(0,10);for(var C=O=v=0;C<h.length;C++){switch(h[C]){case" ":O++;break;case"\t":O+=4;break;case"\r":O=0;break;case"\n":O=0,f++;break;default:throw new Error("whitespace characters not allowed in JSON")}v++}break;default:h=void 0}var x="",L={},Q=0,G=0,T=0,V=p&&p.es6&&"function"==typeof Map;return function j(D,N,re){switch(q(re,"value"),typeof D){case"number":case"bigint":case"boolean":J(""+D);break;case"string":J(_(D));break;case"object":null===D?J("null"):"function"==typeof D.toJSON?J(_(D.toJSON())):Array.isArray(D)?ue():V?D.constructor.BYTES_PER_ELEMENT?ue():D instanceof Map?Ae():D instanceof Set?Ae(!0):ve():ve()}function ue(){if(D.length){J("[");for(var Te=N+1,Re=0;Re<D.length;Re++){Re&&J(","),X(Te);var Me=K(D[Re])?D[Re]:null;j(Me,Te,re+"/"+Re)}X(N),J("]")}else J("[]")}function ve(){var Te=Object.keys(D);if(Te.length){J("{");for(var Re=N+1,Me=0;Me<Te.length;Me++){var Ie,Ge=Te[Me],oe=D[Ge];K(oe)&&(Me&&J(","),Ie=re+"/"+S(Ge),X(Re),q(Ie,"key"),J(_(Ge)),q(Ie,"keyEnd"),J(":"),h&&J(" "),j(oe,Re,Ie))}X(N),J("}")}else J("{}")}function Ae(Te){if(D.size){J("{");for(var Re=N+1,Me=!0,Ie=D.entries(),Ge=Ie.next();!Ge.done;){var oe,ge,pe=(ge=Ge.value)[0];K(ge=!!Te||ge[1])&&(Me||J(","),Me=!1,oe=re+"/"+S(pe),X(Re),q(oe,"key"),J(_(pe)),q(oe,"keyEnd"),J(":"),h&&J(" "),j(ge,Re,oe)),Ge=Ie.next()}X(N),J("}")}else J("{}")}q(re,"valueEnd")}(y,0,""),{json:x,pointers:L}}function J(j){G+=j.length,T+=j.length,x+=j}function X(j){if(h){for(x+="\n"+ee(j,h),Q++,G=0;j--;)f?(Q+=f,G=O):G+=O,T+=v;T+=1}}function q(j,D){L[j]=L[j]||{},L[j][D]={line:Q,column:G,pos:T}}function ee(j,D){return Array(j+1).join(D)}},["number","bigint","boolean","string","object"]);function K(y){return 0<=c.indexOf(typeof y)}var U=/"|\\/g,Z=/[\b]/g,Y=/\f/g,H=/\n/g,F=/\r/g,k=/\t/g;function _(y){return'"'+(y=y.replace(U,"\\$&").replace(Y,"\\f").replace(Z,"\\b").replace(H,"\\n").replace(F,"\\r").replace(k,"\\t"))+'"'}var M=/~/g,R=/\//g;function S(y){return y.replace(M,"~0").replace(R,"~1")}},483:function(Ce,P){var ae,ce;!function(){"use strict";ce=[],void 0!==(ce="function"==typeof(ae=function(){function c(p){return"object"==typeof Node?p instanceof Node:p&&"object"==typeof p&&"number"==typeof p.nodeType}function U(){var p=[];return{watch:p.push.bind(p),trigger:function(f,m){for(var h=!0,v={detail:m,preventDefault:function(){h=!1}},O=0;O<p.length;O++)p[O](f,v);return h}}}function Z(p){return"none"===window.getComputedStyle(p).display}function Y(p){this.elem=p}function H(p,f){return Y.make(p("parent")).clazz("pico-overlay").clazz(p("overlayClass","")).stylize({display:"none",position:"fixed",top:"0px",left:"0px",height:"100%",width:"100%",zIndex:1e4}).stylize(p("overlayStyles",{opacity:.5,background:"#000"})).onClick(function(){p("overlayClose",!0)&&f()})}Y.make=function(p,f){"string"==typeof p&&(p=document.querySelector(p));var m=document.createElement(f||"div");return(p||document.body).appendChild(m),new Y(m)},Y.prototype={child:function(p){return Y.make(this.elem,p)},stylize:function(p){for(var f in typeof(p=p||{}).opacity<"u"&&(p.filter="alpha(opacity="+100*p.opacity+")"),p)p.hasOwnProperty(f)&&(this.elem.style[f]=p[f]);return this},clazz:function(p){return this.elem.className+=" "+p,this},html:function(p){return c(p)?this.elem.appendChild(p):this.elem.innerHTML=p,this},onClick:function(p){return this.elem.addEventListener("click",p),this},destroy:function(){this.elem.parentNode.removeChild(this.elem)},hide:function(){this.elem.style.display="none"},show:function(){this.elem.style.display="block"},attr:function(p,f){return void 0!==f&&this.elem.setAttribute(p,f),this},anyAncestor:function(p){for(var f=this.elem;f;){if(p(new Y(f)))return!0;f=f.parentNode}return!1},isVisible:function(){return!Z(this.elem)}};var F=1;function _(p,f){if(f("closeButton",!0))return p.child("button").html(f("closeHtml","&#xD7;")).clazz("pico-close").clazz(f("closeClass","")).stylize(f("closeStyles",{borderRadius:"2px",border:0,padding:0,cursor:"pointer",height:"15px",width:"15px",position:"absolute",top:"5px",right:"5px",fontSize:"16px",textAlign:"center",lineHeight:"15px",background:"#CCC"})).attr("aria-label",f("close-label","Close"))}function M(p){return function(){return p().elem}}var R=U(),S=U();function y(p,f){function m(x,L){return(x.msMatchesSelector||x.webkitMatchesSelector||x.matches).call(x,L)}function h(x){return!(Z(x)||m(x,":disabled")||x.hasAttribute("contenteditable"))&&(x.hasAttribute("tabindex")||m(x,"input,select,textarea,button,a[href],area[href],iframe"))}function v(x){for(var L=x.getElementsByTagName("*"),Q=0;Q<L.length;Q++)if(h(L[Q]))return L[Q]}var C;p.beforeShow(function(){C=document.activeElement}),p.afterShow(function(){if(f()){var L=v(p.modalElem());L&&L.focus()}}),p.afterClose(function(){f()&&C&&C.focus(),C=null}),S.watch(function(L){if(f()&&p.isVisible()){var Q=v(p.modalElem()),G=function O(x){for(var L=x.getElementsByTagName("*"),Q=L.length;Q--;)if(h(L[Q]))return L[Q]}(p.modalElem());(L.shiftKey?Q:G)===document.activeElement&&((L.shiftKey?G:Q).focus(),L.preventDefault())}})}return document.documentElement.addEventListener("keydown",function(f){var m=f.which||f.keyCode;27===m?R.trigger():9===m&&S.trigger(f)}),function(f){(function K(p){return"string"==typeof p}(f)||c(f))&&(f={content:f});var m=U(),h=U(),v=U(),O=U(),C=U();function x(j,D){var N=f[j];return"function"==typeof N&&(N=N(D)),void 0===N?D:N}var T,q,L=ee.bind(window,"modal"),Q=ee.bind(window,"overlay"),G=ee.bind(window,"close");function V(j){Q().hide(),L().hide(),C.trigger(T,j)}function J(j){O.trigger(T,j)&&V(j)}function X(j){return function(){return j.apply(this,arguments),T}}function ee(j,D){if(!q){var N=function k(p,f){var m=p("width","auto");"number"==typeof m&&(m+="px");var h=p("modalId","pico-"+F++);return Y.make(p("parent")).clazz("pico-content").clazz(p("modalClass","")).stylize({display:"none",position:"fixed",zIndex:10001,left:"50%",top:"38.1966%",maxHeight:"90%",boxSizing:"border-box",width:m,"-ms-transform":"translate(-50%,-38.1966%)","-moz-transform":"translate(-50%,-38.1966%)","-webkit-transform":"translate(-50%,-38.1966%)","-o-transform":"translate(-50%,-38.1966%)",transform:"translate(-50%,-38.1966%)"}).stylize(p("modalStyles",{overflow:"auto",backgroundColor:"white",padding:"20px",borderRadius:"5px"})).html(p("content")).attr("id",h).attr("role","dialog").attr("aria-labelledby",p("ariaLabelledBy")).attr("aria-describedby",p("ariaDescribedBy",h)).onClick(function(O){new Y(O.target).anyAncestor(function(x){return/\bpico-close\b/.test(x.elem.className)})&&f()})}(x,J);q={modal:N,overlay:H(x,J),close:_(N,x)},m.trigger(T,D)}return q[j]}return y(T={modalElem:M(L),closeElem:M(G),overlayElem:M(Q),buildDom:X(ee.bind(null,null)),isVisible:function(){return!!(q&&L&&L().isVisible())},show:function(j){return h.trigger(T,j)&&(Q().show(),G(),L().show(),v.trigger(T,j)),this},close:X(J),forceClose:X(V),destroy:function(){L().destroy(),Q().destroy(),Q=L=G=void 0},options:function(j){Object.keys(j).map(function(D){f[D]=j[D]})},afterCreate:X(m.watch),beforeShow:X(h.watch),afterShow:X(v.watch),beforeClose:X(O.watch),afterClose:X(C.watch)},x.bind(null,"focus",!0)),function w(p,f){var m,h=new Y(document.body);p.beforeShow(function(){m=h.elem.style.overflow,f()&&h.stylize({overflow:"hidden"})}),p.afterClose(function(){h.stylize({overflow:m})})}(T,x.bind(null,"bodyOverflow",!0)),R.watch(function(){x("escCloses",!0)&&T.isVisible()&&T.close()}),T}})?ae.apply(P,ce):ae)&&(Ce.exports=ce)}()},7533:function(Ce,P){!function(ae){"use strict";function ce(){for(var Je=arguments.length,Qe=Array(Je),it=0;it<Je;it++)Qe[it]=arguments[it];if(Qe.length>1){Qe[0]=Qe[0].slice(0,-1);for(var lt=Qe.length-1,ht=1;ht<lt;++ht)Qe[ht]=Qe[ht].slice(1,-1);return Qe[lt]=Qe[lt].slice(1),Qe.join("")}return Qe[0]}function c(Je){return"(?:"+Je+")"}function K(Je){return void 0===Je?"undefined":null===Je?"null":Object.prototype.toString.call(Je).split(" ").pop().split("]").shift().toLowerCase()}function U(Je){return Je.toUpperCase()}function H(Je){var Qe="[A-Za-z]",lt="[0-9]",zt=ce(lt,"[A-Fa-f]"),Bn=c(c("%[EFef]"+zt+"%"+zt+zt+"%"+zt+zt)+"|"+c("%[89A-Fa-f]"+zt+"%"+zt+zt)+"|"+c("%"+zt+zt)),vn="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",ei=ce("[\\:\\/\\?\\#\\[\\]\\@]",vn),ri=Je?"[\\uE000-\\uF8FF]":"[]",xn=ce(Qe,lt,"[\\-\\.\\_\\~]",Je?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),Un=c(Qe+ce(Qe,lt,"[\\+\\-\\.]")+"*"),jn=c(c(Bn+"|"+ce(xn,vn,"[\\:]"))+"*"),Ai=(c(c("25[0-5]")+"|"+c("2[0-4]"+lt)+"|"+c("1"+lt+lt)+"|"+c("[1-9]"+lt)+"|"+lt),c(c("25[0-5]")+"|"+c("2[0-4]"+lt)+"|"+c("1"+lt+lt)+"|"+c("0?[1-9]"+lt)+"|0?0?"+lt)),Gi=c(Ai+"\\."+Ai+"\\."+Ai+"\\."+Ai),Qn=c(zt+"{1,4}"),Ji=c(c(Qn+"\\:"+Qn)+"|"+Gi),mi=c(c(Qn+"\\:")+"{6}"+Ji),pr=c("\\:\\:"+c(Qn+"\\:")+"{5}"+Ji),Yo=c(c(Qn)+"?\\:\\:"+c(Qn+"\\:")+"{4}"+Ji),Zr=c(c(c(Qn+"\\:")+"{0,1}"+Qn)+"?\\:\\:"+c(Qn+"\\:")+"{3}"+Ji),gs=c(c(c(Qn+"\\:")+"{0,2}"+Qn)+"?\\:\\:"+c(Qn+"\\:")+"{2}"+Ji),Da=c(c(c(Qn+"\\:")+"{0,3}"+Qn)+"?\\:\\:"+Qn+"\\:"+Ji),Mr=c(c(c(Qn+"\\:")+"{0,4}"+Qn)+"?\\:\\:"+Ji),co=c(c(c(Qn+"\\:")+"{0,5}"+Qn)+"?\\:\\:"+Qn),qn=c(c(c(Qn+"\\:")+"{0,6}"+Qn)+"?\\:\\:"),Vr=c([mi,pr,Yo,Zr,gs,Da,Mr,co,qn].join("|")),vs=c(c(xn+"|"+Bn)+"+"),mr=(c(Vr+"\\%25"+vs),c(Vr+c("\\%25|\\%(?!"+zt+"{2})")+vs)),Kh=c("[vV]"+zt+"+\\."+ce(xn,vn,"[\\:]")+"+"),gi=c("\\["+c(mr+"|"+Vr+"|"+Kh)+"\\]"),hi=c(c(Bn+"|"+ce(xn,vn))+"*"),uo=c(gi+"|"+Gi+"(?!"+hi+")|"+hi),ho=c(lt+"*"),tu=c(c(jn+"@")+"?"+uo+c("\\:"+ho)+"?"),Ar=c(Bn+"|"+ce(xn,vn,"[\\:\\@]")),Zl=c(Ar+"*"),Ks=c(Ar+"+"),Vl=c(c(Bn+"|"+ce(xn,vn,"[\\@]"))+"+"),To=c(c("\\/"+Zl)+"*"),Po=c("\\/"+c(Ks+To)+"?"),Ys=c(Vl+To),Fa=c(Ks+To),Zn="(?!"+Ar+")",Zi=(c(To+"|"+Po+"|"+Ys+"|"+Fa+"|"+Zn),c(c(Ar+"|"+ce("[\\/\\?]",ri))+"*")),Or=c(c(Ar+"|[\\/\\?]")+"*"),Ql=c(c("\\/\\/"+tu+To)+"|"+Po+"|"+Fa+"|"+Zn),Jo=c(Un+"\\:"+Ql+c("\\?"+Zi)+"?"+c("\\#"+Or)+"?"),wp=c(c("\\/\\/"+tu+To)+"|"+Po+"|"+Ys+"|"+Zn),Nv=c(wp+c("\\?"+Zi)+"?"+c("\\#"+Or)+"?");return c(Jo+"|"+Nv),c(Un+"\\:"+Ql+c("\\?"+Zi)+"?"),c(c("\\/\\/("+c("("+jn+")@")+"?("+uo+")"+c("\\:("+ho+")")+"?)")+"?("+To+"|"+Po+"|"+Fa+"|"+Zn+")"),c("\\?("+Zi+")"),c("\\#("+Or+")"),c(c("\\/\\/("+c("("+jn+")@")+"?("+uo+")"+c("\\:("+ho+")")+"?)")+"?("+To+"|"+Po+"|"+Ys+"|"+Zn+")"),c("\\?("+Zi+")"),c("\\#("+Or+")"),c(c("\\/\\/("+c("("+jn+")@")+"?("+uo+")"+c("\\:("+ho+")")+"?)")+"?("+To+"|"+Po+"|"+Fa+"|"+Zn+")"),c("\\?("+Zi+")"),c("\\#("+Or+")"),c("("+jn+")@"),c("\\:("+ho+")"),{NOT_SCHEME:new RegExp(ce("[^]",Qe,lt,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(ce("[^\\%\\:]",xn,vn),"g"),NOT_HOST:new RegExp(ce("[^\\%\\[\\]\\:]",xn,vn),"g"),NOT_PATH:new RegExp(ce("[^\\%\\/\\:\\@]",xn,vn),"g"),NOT_PATH_NOSCHEME:new RegExp(ce("[^\\%\\/\\@]",xn,vn),"g"),NOT_QUERY:new RegExp(ce("[^\\%]",xn,vn,"[\\:\\@\\/\\?]",ri),"g"),NOT_FRAGMENT:new RegExp(ce("[^\\%]",xn,vn,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(ce("[^]",xn,vn),"g"),UNRESERVED:new RegExp(xn,"g"),OTHER_CHARS:new RegExp(ce("[^\\%]",xn,ei),"g"),PCT_ENCODED:new RegExp(Bn,"g"),IPV4ADDRESS:new RegExp("^("+Gi+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Vr+")"+c(c("\\%25|\\%(?!"+zt+"{2})")+"("+vs+")")+"?\\]?$")}}var F=H(!1),k=H(!0),_=function(Qe,it){if(Array.isArray(Qe))return Qe;if(Symbol.iterator in Object(Qe))return function Je(Qe,it){var lt=[],ht=!0,zt=!1,fn=void 0;try{for(var Bn,Nn=Qe[Symbol.iterator]();!(ht=(Bn=Nn.next()).done)&&(lt.push(Bn.value),!it||lt.length!==it);ht=!0);}catch(Yn){zt=!0,fn=Yn}finally{try{!ht&&Nn.return&&Nn.return()}finally{if(zt)throw fn}}return lt}(Qe,it);throw new TypeError("Invalid attempt to destructure non-iterable instance")},R=2147483647,S=36,O=/^xn--/,C=/[^\0-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},G=Math.floor,T=String.fromCharCode;function V(Je){throw new RangeError(L[Je])}function X(Je,Qe){var it=Je.split("@"),lt="";return it.length>1&&(lt=it[0]+"@",Je=it[1]),lt+function J(Je,Qe){for(var it=[],lt=Je.length;lt--;)it[lt]=Qe(Je[lt]);return it}((Je=Je.replace(x,".")).split("."),Qe).join(".")}function q(Je){for(var Qe=[],it=0,lt=Je.length;it<lt;){var ht=Je.charCodeAt(it++);if(ht>=55296&&ht<=56319&&it<lt){var zt=Je.charCodeAt(it++);56320==(64512&zt)?Qe.push(((1023&ht)<<10)+(1023&zt)+65536):(Qe.push(ht),it--)}else Qe.push(ht)}return Qe}var j=function(Qe){return Qe-48<10?Qe-22:Qe-65<26?Qe-65:Qe-97<26?Qe-97:S},D=function(Qe,it){return Qe+22+75*(Qe<26)-((0!=it)<<5)},N=function(Qe,it,lt){var ht=0;for(Qe=lt?G(Qe/700):Qe>>1,Qe+=G(Qe/it);Qe>455;ht+=S)Qe=G(Qe/35);return G(ht+36*Qe/(Qe+38))},re=function(Qe){var it=[],lt=Qe.length,ht=0,zt=128,fn=72,Nn=Qe.lastIndexOf("-");Nn<0&&(Nn=0);for(var Bn=0;Bn<Nn;++Bn)Qe.charCodeAt(Bn)>=128&&V("not-basic"),it.push(Qe.charCodeAt(Bn));for(var Yn=Nn>0?Nn+1:0;Yn<lt;){for(var vn=ht,ei=1,ui=S;;ui+=S){Yn>=lt&&V("invalid-input");var ri=j(Qe.charCodeAt(Yn++));(ri>=S||ri>G((R-ht)/ei))&&V("overflow"),ht+=ri*ei;var xn=ui<=fn?1:ui>=fn+26?26:ui-fn;if(ri<xn)break;var Un=S-xn;ei>G(R/Un)&&V("overflow"),ei*=Un}var jn=it.length+1;fn=N(ht-vn,jn,0==vn),G(ht/jn)>R-zt&&V("overflow"),zt+=G(ht/jn),ht%=jn,it.splice(ht++,0,zt)}return String.fromCodePoint.apply(String,it)},ue=function(Qe){var it=[],lt=(Qe=q(Qe)).length,ht=128,zt=0,fn=72,Nn=!0,Bn=!1,Yn=void 0;try{for(var ei,vn=Qe[Symbol.iterator]();!(Nn=(ei=vn.next()).done);Nn=!0){var ui=ei.value;ui<128&&it.push(T(ui))}}catch(mr){Bn=!0,Yn=mr}finally{try{!Nn&&vn.return&&vn.return()}finally{if(Bn)throw Yn}}var ri=it.length,xn=ri;for(ri&&it.push("-");xn<lt;){var Un=R,jn=!0,rr=!1,Ai=void 0;try{for(var Qn,Gi=Qe[Symbol.iterator]();!(jn=(Qn=Gi.next()).done);jn=!0){var Ji=Qn.value;Ji>=ht&&Ji<Un&&(Un=Ji)}}catch(mr){rr=!0,Ai=mr}finally{try{!jn&&Gi.return&&Gi.return()}finally{if(rr)throw Ai}}var mi=xn+1;Un-ht>G((R-zt)/mi)&&V("overflow"),zt+=(Un-ht)*mi,ht=Un;var pr=!0,Yo=!1,Zr=void 0;try{for(var Da,gs=Qe[Symbol.iterator]();!(pr=(Da=gs.next()).done);pr=!0){var Mr=Da.value;if(Mr<ht&&++zt>R&&V("overflow"),Mr==ht){for(var co=zt,qn=S;;qn+=S){var Vr=qn<=fn?1:qn>=fn+26?26:qn-fn;if(co<Vr)break;var vs=co-Vr,qo=S-Vr;it.push(T(D(Vr+vs%qo,0))),co=G(vs/qo)}it.push(T(D(co,0))),fn=N(zt,mi,xn==ri),zt=0,++xn}}}catch(mr){Yo=!0,Zr=mr}finally{try{!pr&&gs.return&&gs.return()}finally{if(Yo)throw Zr}}++zt,++ht}return it.join("")},Te={version:"2.1.0",ucs2:{decode:q,encode:function(Qe){return String.fromCodePoint.apply(String,function(Je){if(Array.isArray(Je)){for(var Qe=0,it=Array(Je.length);Qe<Je.length;Qe++)it[Qe]=Je[Qe];return it}return Array.from(Je)}(Qe))}},decode:re,encode:ue,toASCII:function(Qe){return X(Qe,function(it){return C.test(it)?"xn--"+ue(it):it})},toUnicode:function(Qe){return X(Qe,function(it){return O.test(it)?re(it.slice(4).toLowerCase()):it})}},Re={};function Me(Je){var Qe=Je.charCodeAt(0);return Qe<16?"%0"+Qe.toString(16).toUpperCase():Qe<128?"%"+Qe.toString(16).toUpperCase():Qe<2048?"%"+(Qe>>6|192).toString(16).toUpperCase()+"%"+(63&Qe|128).toString(16).toUpperCase():"%"+(Qe>>12|224).toString(16).toUpperCase()+"%"+(Qe>>6&63|128).toString(16).toUpperCase()+"%"+(63&Qe|128).toString(16).toUpperCase()}function Ie(Je){for(var Qe="",it=0,lt=Je.length;it<lt;){var ht=parseInt(Je.substr(it+1,2),16);if(ht<128)Qe+=String.fromCharCode(ht),it+=3;else if(ht>=194&&ht<224){if(lt-it>=6){var zt=parseInt(Je.substr(it+4,2),16);Qe+=String.fromCharCode((31&ht)<<6|63&zt)}else Qe+=Je.substr(it,6);it+=6}else if(ht>=224){if(lt-it>=9){var fn=parseInt(Je.substr(it+4,2),16),Nn=parseInt(Je.substr(it+7,2),16);Qe+=String.fromCharCode((15&ht)<<12|(63&fn)<<6|63&Nn)}else Qe+=Je.substr(it,9);it+=9}else Qe+=Je.substr(it,3),it+=3}return Qe}function Ge(Je,Qe){function it(lt){var ht=Ie(lt);return ht.match(Qe.UNRESERVED)?ht:lt}return Je.scheme&&(Je.scheme=String(Je.scheme).replace(Qe.PCT_ENCODED,it).toLowerCase().replace(Qe.NOT_SCHEME,"")),void 0!==Je.userinfo&&(Je.userinfo=String(Je.userinfo).replace(Qe.PCT_ENCODED,it).replace(Qe.NOT_USERINFO,Me).replace(Qe.PCT_ENCODED,U)),void 0!==Je.host&&(Je.host=String(Je.host).replace(Qe.PCT_ENCODED,it).toLowerCase().replace(Qe.NOT_HOST,Me).replace(Qe.PCT_ENCODED,U)),void 0!==Je.path&&(Je.path=String(Je.path).replace(Qe.PCT_ENCODED,it).replace(Je.scheme?Qe.NOT_PATH:Qe.NOT_PATH_NOSCHEME,Me).replace(Qe.PCT_ENCODED,U)),void 0!==Je.query&&(Je.query=String(Je.query).replace(Qe.PCT_ENCODED,it).replace(Qe.NOT_QUERY,Me).replace(Qe.PCT_ENCODED,U)),void 0!==Je.fragment&&(Je.fragment=String(Je.fragment).replace(Qe.PCT_ENCODED,it).replace(Qe.NOT_FRAGMENT,Me).replace(Qe.PCT_ENCODED,U)),Je}function oe(Je){return Je.replace(/^0*(.*)/,"$1")||"0"}function pe(Je,Qe){var it=Je.match(Qe.IPV4ADDRESS)||[],ht=_(it,2)[1];return ht?ht.split(".").map(oe).join("."):Je}function ge(Je,Qe){var it=Je.match(Qe.IPV6ADDRESS)||[],lt=_(it,3),ht=lt[1],zt=lt[2];if(ht){for(var fn=ht.toLowerCase().split("::").reverse(),Nn=_(fn,2),Bn=Nn[0],Yn=Nn[1],vn=Yn?Yn.split(":").map(oe):[],ei=Bn.split(":").map(oe),ui=Qe.IPV4ADDRESS.test(ei[ei.length-1]),ri=ui?7:8,xn=ei.length-ri,Un=Array(ri),jn=0;jn<ri;++jn)Un[jn]=vn[jn]||ei[xn+jn]||"";ui&&(Un[ri-1]=pe(Un[ri-1],Qe));var Ai=Un.reduce(function(mi,pr,Yo){if(!pr||"0"===pr){var Zr=mi[mi.length-1];Zr&&Zr.index+Zr.length===Yo?Zr.length++:mi.push({index:Yo,length:1})}return mi},[]).sort(function(mi,pr){return pr.length-mi.length})[0],Gi=void 0;if(Ai&&Ai.length>1){var Qn=Un.slice(0,Ai.index),Ji=Un.slice(Ai.index+Ai.length);Gi=Qn.join(":")+"::"+Ji.join(":")}else Gi=Un.join(":");return zt&&(Gi+="%"+zt),Gi}return Je}var be=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,ie=void 0==="".match(/(){0}/)[1];function se(Je){var Qe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},it={},lt=!1!==Qe.iri?k:F;"suffix"===Qe.reference&&(Je=(Qe.scheme?Qe.scheme+":":"")+"//"+Je);var ht=Je.match(be);if(ht){ie?(it.scheme=ht[1],it.userinfo=ht[3],it.host=ht[4],it.port=parseInt(ht[5],10),it.path=ht[6]||"",it.query=ht[7],it.fragment=ht[8],isNaN(it.port)&&(it.port=ht[5])):(it.scheme=ht[1]||void 0,it.userinfo=-1!==Je.indexOf("@")?ht[3]:void 0,it.host=-1!==Je.indexOf("//")?ht[4]:void 0,it.port=parseInt(ht[5],10),it.path=ht[6]||"",it.query=-1!==Je.indexOf("?")?ht[7]:void 0,it.fragment=-1!==Je.indexOf("#")?ht[8]:void 0,isNaN(it.port)&&(it.port=Je.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?ht[4]:void 0)),it.host&&(it.host=ge(pe(it.host,lt),lt)),it.reference=void 0!==it.scheme||void 0!==it.userinfo||void 0!==it.host||void 0!==it.port||it.path||void 0!==it.query?void 0===it.scheme?"relative":void 0===it.fragment?"absolute":"uri":"same-document",Qe.reference&&"suffix"!==Qe.reference&&Qe.reference!==it.reference&&(it.error=it.error||"URI is not a "+Qe.reference+" reference.");var zt=Re[(Qe.scheme||it.scheme||"").toLowerCase()];if(Qe.unicodeSupport||zt&&zt.unicodeSupport)Ge(it,lt);else{if(it.host&&(Qe.domainHost||zt&&zt.domainHost))try{it.host=Te.toASCII(it.host.replace(lt.PCT_ENCODED,Ie).toLowerCase())}catch(fn){it.error=it.error||"Host's domain name can not be converted to ASCII via punycode: "+fn}Ge(it,F)}zt&&zt.parse&&zt.parse(it,Qe)}else it.error=it.error||"URI can not be parsed.";return it}var _e=/^\.\.?\//,$e=/^\/\.(\/|$)/,Xe=/^\/\.\.(\/|$)/,ut=/^\/?(?:.|\n)*?(?=\/|$)/;function mt(Je){for(var Qe=[];Je.length;)if(Je.match(_e))Je=Je.replace(_e,"");else if(Je.match($e))Je=Je.replace($e,"/");else if(Je.match(Xe))Je=Je.replace(Xe,"/"),Qe.pop();else if("."===Je||".."===Je)Je="";else{var it=Je.match(ut);if(!it)throw new Error("Unexpected dot segment condition");var lt=it[0];Je=Je.slice(lt.length),Qe.push(lt)}return Qe.join("")}function ct(Je){var Qe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},it=Qe.iri?k:F,lt=[],ht=Re[(Qe.scheme||Je.scheme||"").toLowerCase()];if(ht&&ht.serialize&&ht.serialize(Je,Qe),Je.host&&!it.IPV6ADDRESS.test(Je.host)&&(Qe.domainHost||ht&&ht.domainHost))try{Je.host=Qe.iri?Te.toUnicode(Je.host):Te.toASCII(Je.host.replace(it.PCT_ENCODED,Ie).toLowerCase())}catch(Nn){Je.error=Je.error||"Host's domain name can not be converted to "+(Qe.iri?"Unicode":"ASCII")+" via punycode: "+Nn}Ge(Je,it),"suffix"!==Qe.reference&&Je.scheme&&(lt.push(Je.scheme),lt.push(":"));var zt=function de(Je,Qe){var it=!1!==Qe.iri?k:F,lt=[];return void 0!==Je.userinfo&&(lt.push(Je.userinfo),lt.push("@")),void 0!==Je.host&&lt.push(ge(pe(String(Je.host),it),it).replace(it.IPV6ADDRESS,function(ht,zt,fn){return"["+zt+(fn?"%25"+fn:"")+"]"})),("number"==typeof Je.port||"string"==typeof Je.port)&&(lt.push(":"),lt.push(String(Je.port))),lt.length?lt.join(""):void 0}(Je,Qe);if(void 0!==zt&&("suffix"!==Qe.reference&&lt.push("//"),lt.push(zt),Je.path&&"/"!==Je.path.charAt(0)&&lt.push("/")),void 0!==Je.path){var fn=Je.path;!Qe.absolutePath&&(!ht||!ht.absolutePath)&&(fn=mt(fn)),void 0===zt&&(fn=fn.replace(/^\/\//,"/%2F")),lt.push(fn)}return void 0!==Je.query&&(lt.push("?"),lt.push(Je.query)),void 0!==Je.fragment&&(lt.push("#"),lt.push(Je.fragment)),lt.join("")}function Tt(Je,Qe){var it=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},ht={};return arguments[3]||(Je=se(ct(Je,it),it),Qe=se(ct(Qe,it),it)),!(it=it||{}).tolerant&&Qe.scheme?(ht.scheme=Qe.scheme,ht.userinfo=Qe.userinfo,ht.host=Qe.host,ht.port=Qe.port,ht.path=mt(Qe.path||""),ht.query=Qe.query):(void 0!==Qe.userinfo||void 0!==Qe.host||void 0!==Qe.port?(ht.userinfo=Qe.userinfo,ht.host=Qe.host,ht.port=Qe.port,ht.path=mt(Qe.path||""),ht.query=Qe.query):(Qe.path?("/"===Qe.path.charAt(0)?ht.path=mt(Qe.path):(ht.path=void 0===Je.userinfo&&void 0===Je.host&&void 0===Je.port||Je.path?Je.path?Je.path.slice(0,Je.path.lastIndexOf("/")+1)+Qe.path:Qe.path:"/"+Qe.path,ht.path=mt(ht.path)),ht.query=Qe.query):(ht.path=Je.path,ht.query=void 0!==Qe.query?Qe.query:Je.query),ht.userinfo=Je.userinfo,ht.host=Je.host,ht.port=Je.port),ht.scheme=Je.scheme),ht.fragment=Qe.fragment,ht}function pt(Je,Qe){return Je&&Je.toString().replace(Qe&&Qe.iri?k.PCT_ENCODED:F.PCT_ENCODED,Ie)}var vt={scheme:"http",domainHost:!0,parse:function(Qe,it){return Qe.host||(Qe.error=Qe.error||"HTTP URIs must have a host."),Qe},serialize:function(Qe,it){var lt="https"===String(Qe.scheme).toLowerCase();return(Qe.port===(lt?443:80)||""===Qe.port)&&(Qe.port=void 0),Qe.path||(Qe.path="/"),Qe}},wt={scheme:"https",domainHost:vt.domainHost,parse:vt.parse,serialize:vt.serialize};function Gt(Je){return"boolean"==typeof Je.secure?Je.secure:"wss"===String(Je.scheme).toLowerCase()}var Wt={scheme:"ws",domainHost:!0,parse:function(Qe,it){var lt=Qe;return lt.secure=Gt(lt),lt.resourceName=(lt.path||"/")+(lt.query?"?"+lt.query:""),lt.path=void 0,lt.query=void 0,lt},serialize:function(Qe,it){if((Qe.port===(Gt(Qe)?443:80)||""===Qe.port)&&(Qe.port=void 0),"boolean"==typeof Qe.secure&&(Qe.scheme=Qe.secure?"wss":"ws",Qe.secure=void 0),Qe.resourceName){var lt=Qe.resourceName.split("?"),ht=_(lt,2),zt=ht[0],fn=ht[1];Qe.path=zt&&"/"!==zt?zt:void 0,Qe.query=fn,Qe.resourceName=void 0}return Qe.fragment=void 0,Qe}},Ke={scheme:"wss",domainHost:Wt.domainHost,parse:Wt.parse,serialize:Wt.serialize},Ze={},Rt="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",yt="[0-9A-Fa-f]",hn=c(c("%[EFef]"+yt+"%"+yt+yt+"%"+yt+yt)+"|"+c("%[89A-Fa-f]"+yt+"%"+yt+yt)+"|"+c("%"+yt+yt)),ot=ce("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),Ut=new RegExp(Rt,"g"),Vt=new RegExp(hn,"g"),pn=new RegExp(ce("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',ot),"g"),Mn=new RegExp(ce("[^]",Rt,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),jt=Mn;function ir(Je){var Qe=Ie(Je);return Qe.match(Ut)?Qe:Je}var dn={scheme:"mailto",parse:function(Qe,it){var lt=Qe,ht=lt.to=lt.path?lt.path.split(","):[];if(lt.path=void 0,lt.query){for(var zt=!1,fn={},Nn=lt.query.split("&"),Bn=0,Yn=Nn.length;Bn<Yn;++Bn){var vn=Nn[Bn].split("=");switch(vn[0]){case"to":for(var ei=vn[1].split(","),ui=0,ri=ei.length;ui<ri;++ui)ht.push(ei[ui]);break;case"subject":lt.subject=pt(vn[1],it);break;case"body":lt.body=pt(vn[1],it);break;default:zt=!0,fn[pt(vn[0],it)]=pt(vn[1],it)}}zt&&(lt.headers=fn)}lt.query=void 0;for(var xn=0,Un=ht.length;xn<Un;++xn){var jn=ht[xn].split("@");if(jn[0]=pt(jn[0]),it.unicodeSupport)jn[1]=pt(jn[1],it).toLowerCase();else try{jn[1]=Te.toASCII(pt(jn[1],it).toLowerCase())}catch(rr){lt.error=lt.error||"Email address's domain name can not be converted to ASCII via punycode: "+rr}ht[xn]=jn.join("@")}return lt},serialize:function(Qe,it){var lt=Qe,ht=function Z(Je){return null!=Je?Je instanceof Array?Je:"number"!=typeof Je.length||Je.split||Je.setInterval||Je.call?[Je]:Array.prototype.slice.call(Je):[]}(Qe.to);if(ht){for(var zt=0,fn=ht.length;zt<fn;++zt){var Nn=String(ht[zt]),Bn=Nn.lastIndexOf("@"),Yn=Nn.slice(0,Bn).replace(Vt,ir).replace(Vt,U).replace(pn,Me),vn=Nn.slice(Bn+1);try{vn=it.iri?Te.toUnicode(vn):Te.toASCII(pt(vn,it).toLowerCase())}catch(xn){lt.error=lt.error||"Email address's domain name can not be converted to "+(it.iri?"Unicode":"ASCII")+" via punycode: "+xn}ht[zt]=Yn+"@"+vn}lt.path=ht.join(",")}var ei=Qe.headers=Qe.headers||{};Qe.subject&&(ei.subject=Qe.subject),Qe.body&&(ei.body=Qe.body);var ui=[];for(var ri in ei)ei[ri]!==Ze[ri]&&ui.push(ri.replace(Vt,ir).replace(Vt,U).replace(Mn,Me)+"="+ei[ri].replace(Vt,ir).replace(Vt,U).replace(jt,Me));return ui.length&&(lt.query=ui.join("&")),lt}},Qt=/^([^\:]+)\:(.*)/,$i={scheme:"urn",parse:function(Qe,it){var lt=Qe.path&&Qe.path.match(Qt),ht=Qe;if(lt){var zt=it.scheme||ht.scheme||"urn",fn=lt[1].toLowerCase(),Nn=lt[2],Yn=Re[zt+":"+(it.nid||fn)];ht.nid=fn,ht.nss=Nn,ht.path=void 0,Yn&&(ht=Yn.parse(ht,it))}else ht.error=ht.error||"URN can not be parsed.";return ht},serialize:function(Qe,it){var ht=Qe.nid,fn=Re[(it.scheme||Qe.scheme||"urn")+":"+(it.nid||ht)];fn&&(Qe=fn.serialize(Qe,it));var Nn=Qe;return Nn.path=(ht||it.nid)+":"+Qe.nss,Nn}},lo=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Kn={scheme:"urn:uuid",parse:function(Qe,it){var lt=Qe;return lt.uuid=lt.nss,lt.nss=void 0,!it.tolerant&&(!lt.uuid||!lt.uuid.match(lo))&&(lt.error=lt.error||"UUID is not valid."),lt},serialize:function(Qe,it){var lt=Qe;return lt.nss=(Qe.uuid||"").toLowerCase(),lt}};Re[vt.scheme]=vt,Re[wt.scheme]=wt,Re[Wt.scheme]=Wt,Re[Ke.scheme]=Ke,Re[dn.scheme]=dn,Re[$i.scheme]=$i,Re[Kn.scheme]=Kn,ae.SCHEMES=Re,ae.pctEncChar=Me,ae.pctDecChars=Ie,ae.parse=se,ae.removeDotSegments=mt,ae.serialize=ct,ae.resolveComponents=Tt,ae.resolve=function St(Je,Qe,it){var lt=function Y(Je,Qe){var it=Je;if(Qe)for(var lt in Qe)it[lt]=Qe[lt];return it}({scheme:"null"},it);return ct(Tt(se(Je,lt),se(Qe,lt),lt,!0),lt)},ae.normalize=function Et(Je,Qe){return"string"==typeof Je?Je=ct(se(Je,Qe),Qe):"object"===K(Je)&&(Je=se(ct(Je,Qe),Qe)),Je},ae.equal=function yn(Je,Qe,it){return"string"==typeof Je?Je=ct(se(Je,it),it):"object"===K(Je)&&(Je=ct(Je,it)),"string"==typeof Qe?Qe=ct(se(Qe,it),it):"object"===K(Qe)&&(Qe=ct(Qe,it)),Je===Qe},ae.escapeComponent=function ft(Je,Qe){return Je&&Je.toString().replace(Qe&&Qe.iri?k.ESCAPE:F.ESCAPE,Me)},ae.unescapeComponent=pt,Object.defineProperty(ae,"__esModule",{value:!0})}(P)},4049:function(Ce){Ce.exports=function(){"use strict";var P=function(m,h){if(!(m instanceof h))throw new TypeError("Cannot call a class as a function")},ae=function(){function m(h,v){for(var O=0;O<v.length;O++){var C=v[O];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(h,C.key,C)}}return function(h,v,O){return v&&m(h.prototype,v),O&&m(h,O),h}}(),ce=function(h,v){if(Array.isArray(h))return h;if(Symbol.iterator in Object(h))return function m(h,v){var O=[],C=!0,x=!1,L=void 0;try{for(var G,Q=h[Symbol.iterator]();!(C=(G=Q.next()).done)&&(O.push(G.value),!v||O.length!==v);C=!0);}catch(T){x=!0,L=T}finally{try{!C&&Q.return&&Q.return()}finally{if(x)throw L}}return O}(h,v);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=(String.prototype.startsWith=String.prototype.startsWith||function(m){return 0===this.indexOf(m)},String.prototype.padStart=String.prototype.padStart||function(m,h){for(var v=this;v.length<m;)v=h+v;return v},{cb:"0f8ff",tqw:"aebd7",q:"-ffff",qmrn:"7fffd4",zr:"0ffff",bg:"5f5dc",bsq:"e4c4",bck:"---",nch:"ebcd",b:"--ff",bvt:"8a2be2",brwn:"a52a2a",brw:"deb887",ctb:"5f9ea0",hrt:"7fff-",chcT:"d2691e",cr:"7f50",rnw:"6495ed",crns:"8dc",crms:"dc143c",cn:"-ffff",Db:"--8b",Dcn:"-8b8b",Dgnr:"b8860b",Dgr:"a9a9a9",Dgrn:"-64-",Dkhk:"bdb76b",Dmgn:"8b-8b",Dvgr:"556b2f",Drng:"8c-",Drch:"9932cc",Dr:"8b--",Dsmn:"e9967a",Dsgr:"8fbc8f",DsTb:"483d8b",DsTg:"2f4f4f",Dtrq:"-ced1",Dvt:"94-d3",ppnk:"1493",pskb:"-bfff",mgr:"696969",grb:"1e90ff",rbrc:"b22222",rwht:"af0",stg:"228b22",chs:"-ff",gnsb:"dcdcdc",st:"8f8ff",g:"d7-",gnr:"daa520",gr:"808080",grn:"-8-0",grnw:"adff2f",hnw:"0fff0",htpn:"69b4",nnr:"cd5c5c",ng:"4b-82",vr:"0",khk:"0e68c",vnr:"e6e6fa",nrb:"0f5",wngr:"7cfc-",mnch:"acd",Lb:"add8e6",Lcr:"08080",Lcn:"e0ffff",Lgnr:"afad2",Lgr:"d3d3d3",Lgrn:"90ee90",Lpnk:"b6c1",Lsmn:"a07a",Lsgr:"20b2aa",Lskb:"87cefa",LsTg:"778899",Lstb:"b0c4de",Lw:"e0",m:"-ff-",mgrn:"32cd32",nn:"af0e6",mgnt:"-ff",mrn:"8--0",mqm:"66cdaa",mmb:"--cd",mmrc:"ba55d3",mmpr:"9370db",msg:"3cb371",mmsT:"7b68ee","":"-fa9a",mtr:"48d1cc",mmvt:"c71585",mnLb:"191970",ntc:"5fffa",mstr:"e4e1",mccs:"e4b5",vjw:"dead",nv:"--80",c:"df5e6",v:"808-0",vrb:"6b8e23",rng:"a5-",rngr:"45-",rch:"da70d6",pgnr:"eee8aa",pgrn:"98fb98",ptrq:"afeeee",pvtr:"db7093",ppwh:"efd5",pchp:"dab9",pr:"cd853f",pnk:"c0cb",pm:"dda0dd",pwrb:"b0e0e6",prp:"8-080",cc:"663399",r:"--",sbr:"bc8f8f",rb:"4169e1",sbrw:"8b4513",smn:"a8072",nbr:"4a460",sgrn:"2e8b57",ssh:"5ee",snn:"a0522d",svr:"c0c0c0",skb:"87ceeb",sTb:"6a5acd",sTgr:"708090",snw:"afa",n:"-ff7f",stb:"4682b4",tn:"d2b48c",t:"-8080",thst:"d8bfd8",tmT:"6347",trqs:"40e0d0",vt:"ee82ee",whT:"5deb3",wht:"",hts:"5f5f5",w:"-",wgrn:"9acd32"});function K(m){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(h>0?m.toFixed(h).replace(/0+$/,"").replace(/\.$/,""):m.toString())||"0"}var U=function(){function m(h,v,O,C){P(this,m);var x=this;if(void 0!==h)if(Array.isArray(h))this.rgba=h;else if(void 0===O){var Q=h&&""+h;Q&&function L(G){if(G.startsWith("hsl")){var T=G.match(/([\-\d\.e]+)/g).map(Number),V=ce(T,4),J=V[0],X=V[1],q=V[2],ee=V[3];void 0===ee&&(ee=1),x.hsla=[J/=360,X/=100,q/=100,ee]}else if(G.startsWith("rgb")){var j=G.match(/([\-\d\.e]+)/g).map(Number),D=ce(j,4),ve=D[3];void 0===ve&&(ve=1),x.rgba=[D[0],D[1],D[2],ve]}else x.rgba=G.startsWith("#")?m.hexToRgb(G):m.nameToRgb(G)||m.hexToRgb(G)}(Q.toLowerCase())}else this.rgba=[h,v,O,void 0===C?1:C]}return ae(m,[{key:"printRGB",value:function(v){var C=(v?this.rgba:this.rgba.slice(0,3)).map(function(x,L){return K(x,3===L?3:0)});return v?"rgba("+C+")":"rgb("+C+")"}},{key:"printHSL",value:function(v){var O=[360,100,100,1],C=["","%","%",""],L=(v?this.hsla:this.hsla.slice(0,3)).map(function(Q,G){return K(Q*O[G],3===G?3:1)+C[G]});return v?"hsla("+L+")":"hsl("+L+")"}},{key:"printHex",value:function(v){var O=this.hex;return v?O:O.substring(0,7)}},{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=m.hslToRgb(this._hsla)},set:function(v){3===v.length&&(v[3]=1),this._rgba=v,this._hsla=null}},{key:"rgbString",get:function(){return this.printRGB()}},{key:"rgbaString",get:function(){return this.printRGB(!0)}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=m.rgbToHsl(this._rgba)},set:function(v){3===v.length&&(v[3]=1),this._hsla=v,this._rgba=null}},{key:"hslString",get:function(){return this.printHSL()}},{key:"hslaString",get:function(){return this.printHSL(!0)}},{key:"hex",get:function(){return"#"+this.rgba.map(function(C,x){return x<3?C.toString(16):Math.round(255*C).toString(16)}).map(function(C){return C.padStart(2,"0")}).join("")},set:function(v){this.rgba=m.hexToRgb(v)}}],[{key:"hexToRgb",value:function(v){var O=(v.startsWith("#")?v.slice(1):v).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!O.match(/^([0-9a-fA-F]{8})$/))throw new Error("Unknown hex color; "+v);var C=O.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map(function(x){return parseInt(x,16)});return C[3]=C[3]/255,C}},{key:"nameToRgb",value:function(v){var O=v.toLowerCase().replace("at","T").replace(/[aeiouyldf]/g,"").replace("ght","L").replace("rk","D").slice(-5,4),C=c[O];return void 0===C?C:m.hexToRgb(C.replace(/\-/g,"00").padStart(6,"f"))}},{key:"rgbToHsl",value:function(v){var O=ce(v,4),C=O[0],x=O[1],L=O[2],Q=O[3];C/=255,x/=255,L/=255;var G=Math.max(C,x,L),T=Math.min(C,x,L),V=void 0,J=void 0,X=(G+T)/2;if(G===T)V=J=0;else{var q=G-T;switch(J=X>.5?q/(2-G-T):q/(G+T),G){case C:V=(x-L)/q+(x<L?6:0);break;case x:V=(L-C)/q+2;break;case L:V=(C-x)/q+4}V/=6}return[V,J,X,Q]}},{key:"hslToRgb",value:function(v){var O=ce(v,4),C=O[0],x=O[1],L=O[2],Q=O[3],G=void 0,T=void 0,V=void 0;if(0===x)G=T=V=L;else{var J=function(D,N,re){return re<0&&(re+=1),re>1&&(re-=1),re<.16666666666666666?D+6*(N-D)*re:re<.5?N:re<.6666666666666666?D+(N-D)*(.6666666666666666-re)*6:D},X=L<.5?L*(1+x):L+x-L*x,q=2*L-X;G=J(q,X,C+1/3),T=J(q,X,C),V=J(q,X,C-1/3)}var ee=[255*G,255*T,255*V].map(Math.round);return ee[3]=Q,ee}}]),m}(),Z=function(){function m(){P(this,m),this._events=[]}return ae(m,[{key:"add",value:function(v,O,C){v.addEventListener(O,C,!1),this._events.push({target:v,type:O,handler:C})}},{key:"remove",value:function(v,O,C){this._events=this._events.filter(function(x){var L=!0;return v&&v!==x.target&&(L=!1),O&&O!==x.type&&(L=!1),C&&C!==x.handler&&(L=!1),L&&m._doRemove(x.target,x.type,x.handler),!L})}},{key:"destroy",value:function(){this._events.forEach(function(v){return m._doRemove(v.target,v.type,v.handler)}),this._events=[]}}],[{key:"_doRemove",value:function(v,O,C){v.removeEventListener(O,C,!1)}}]),m}();function H(m,h,v){var O=!1;function C(G,T,V){return Math.max(T,Math.min(G,V))}function x(G,T,V){if(V&&(O=!0),O){G.preventDefault();var J=h.getBoundingClientRect(),X=J.width,q=J.height,j=T.clientY,D=C(T.clientX-J.left,0,X),N=C(j-J.top,0,q);v(D/X,N/q)}}function L(G,T){1===(void 0===G.buttons?G.which:G.buttons)?x(G,G,T):O=!1}function Q(G,T){1===G.touches.length?x(G,G.touches[0],T):O=!1}m.add(h,"mousedown",function(G){L(G,!0)}),m.add(h,"touchstart",function(G){Q(G,!0)}),m.add(window,"mousemove",L),m.add(h,"touchmove",Q),m.add(window,"mouseup",function(G){O=!1}),m.add(h,"touchend",function(G){O=!1}),m.add(h,"touchcancel",function(G){O=!1})}var _="keydown",M="mousedown",R="focusin";function S(m,h){return(h||document).querySelector(m)}function y(m){m.preventDefault(),m.stopPropagation()}function w(m,h,v,O,C){m.add(h,_,function(x){v.indexOf(x.key)>=0&&(C&&y(x),O(x))})}var p=function(){function m(h){P(this,m),this.settings={popup:"right",layout:"default",alpha:!0,editor:!0,editorFormat:"hex",cancelButton:!1,defaultColor:"#0cf"},this._events=new Z,this.onChange=null,this.onDone=null,this.onOpen=null,this.onClose=null,this.setOptions(h)}return ae(m,[{key:"setOptions",value:function(v){var O=this;if(v){var C=this.settings;if(v instanceof HTMLElement)C.parent=v;else{C.parent&&v.parent&&C.parent!==v.parent&&(this._events.remove(C.parent),this._popupInited=!1),function x(T,V,J){for(var X in T)J&&J.indexOf(X)>=0||(V[X]=T[X])}(v,C),v.onChange&&(this.onChange=v.onChange),v.onDone&&(this.onDone=v.onDone),v.onOpen&&(this.onOpen=v.onOpen),v.onClose&&(this.onClose=v.onClose);var L=v.color||v.colour;L&&this._setColor(L)}var Q=C.parent;if(Q&&C.popup&&!this._popupInited){var G=function(V){return O.openHandler(V)};this._events.add(Q,"click",G),w(this._events,Q,[" ","Spacebar","Enter"],G),this._popupInited=!0}else v.parent&&!C.popup&&this.show()}}},{key:"openHandler",value:function(v){if(this.show()){v&&v.preventDefault(),this.settings.parent.style.pointerEvents="none";var O=v&&v.type===_?this._domEdit:this.domElement;setTimeout(function(){return O.focus()},100),this.onOpen&&this.onOpen(this.colour)}}},{key:"closeHandler",value:function(v){var O=v&&v.type,C=!1;v?O===M||O===R?v.timeStamp>(this.__containedEvent||0)+100&&(C=!0):(y(v),C=!0):C=!0,C&&this.hide()&&(this.settings.parent.style.pointerEvents="",O!==M&&this.settings.parent.focus(),this.onClose&&this.onClose(this.colour))}},{key:"movePopup",value:function(v,O){this.closeHandler(),this.setOptions(v),O&&this.openHandler()}},{key:"setColor",value:function(v,O){this._setColor(v,{silent:O})}},{key:"_setColor",value:function(v,O){if("string"==typeof v&&(v=v.trim()),v){O=O||{};var C=void 0;try{C=new U(v)}catch(L){if(O.failSilently)return;throw L}if(!this.settings.alpha){var x=C.hsla;x[3]=1,C.hsla=x}this.colour=this.color=C,this._setHSLA(null,null,null,null,O)}}},{key:"setColour",value:function(v,O){this.setColor(v,O)}},{key:"show",value:function(){if(!this.settings.parent)return!1;if(this.domElement){var O=this._toggleDOM(!0);return this._setPosition(),O}var x=function Y(m){var h=document.createElement("div");return h.innerHTML=m,h.firstElementChild}(this.settings.template||'<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>');return this.domElement=x,this._domH=S(".picker_hue",x),this._domSL=S(".picker_sl",x),this._domA=S(".picker_alpha",x),this._domEdit=S(".picker_editor input",x),this._domSample=S(".picker_sample",x),this._domOkay=S(".picker_done button",x),this._domCancel=S(".picker_cancel button",x),x.classList.add("layout_"+this.settings.layout),this.settings.alpha||x.classList.add("no_alpha"),this.settings.editor||x.classList.add("no_editor"),this.settings.cancelButton||x.classList.add("no_cancel"),this._ifPopup(function(){return x.classList.add("popup")}),this._setPosition(),this.colour?this._updateUI():this._setColor(this.settings.defaultColor),this._bindEvents(),!0}},{key:"hide",value:function(){return this._toggleDOM(!1)}},{key:"destroy",value:function(){this._events.destroy(),this.domElement&&this.settings.parent.removeChild(this.domElement)}},{key:"_bindEvents",value:function(){var v=this,O=this,C=this.domElement,x=this._events;function L(T,V,J){x.add(T,V,J)}L(C,"click",function(T){return T.preventDefault()}),H(x,this._domH,function(T,V){return O._setHSLA(T)}),H(x,this._domSL,function(T,V){return O._setHSLA(null,T,1-V)}),this.settings.alpha&&H(x,this._domA,function(T,V){return O._setHSLA(null,null,null,1-V)});var Q=this._domEdit;L(Q,"input",function(T){O._setColor(this.value,{fromEditor:!0,failSilently:!0})}),L(Q,"focus",function(T){var V=this;V.selectionStart===V.selectionEnd&&V.select()}),this._ifPopup(function(){var T=function(X){return v.closeHandler(X)};L(window,M,T),L(window,R,T),w(x,C,["Esc","Escape"],T);var V=function(X){v.__containedEvent=X.timeStamp};L(C,M,V),L(C,R,V),L(v._domCancel,"click",T)});var G=function(V){v._ifPopup(function(){return v.closeHandler(V)}),v.onDone&&v.onDone(v.colour)};L(this._domOkay,"click",G),w(x,C,["Enter"],G)}},{key:"_setPosition",value:function(){var v=this.settings.parent,O=this.domElement;v!==O.parentNode&&v.appendChild(O),this._ifPopup(function(C){"static"===getComputedStyle(v).position&&(v.style.position="relative");var x=!0===C?"popup_right":"popup_"+C;["popup_top","popup_bottom","popup_left","popup_right"].forEach(function(L){L===x?O.classList.add(L):O.classList.remove(L)}),O.classList.add(x)})}},{key:"_setHSLA",value:function(v,O,C,x,L){L=L||{};var Q=this.colour,G=Q.hsla;[v,O,C,x].forEach(function(T,V){(T||0===T)&&(G[V]=T)}),Q.hsla=G,this._updateUI(L),this.onChange&&!L.silent&&this.onChange(Q)}},{key:"_updateUI",value:function(v){if(this.domElement){v=v||{};var O=this.colour,C=O.hsla,x="hsl("+360*C[0]+", 100%, 50%)",L=O.hslString,Q=O.hslaString,G=this._domH,T=this._domSL,V=this._domA,J=S(".picker_selector",G),X=S(".picker_selector",T),q=S(".picker_selector",V);ee(0,J,C[0]),this._domSL.style.backgroundColor=this._domH.style.color=x,ee(0,X,C[1]),j(0,X,1-C[2]),T.style.color=L,j(0,q,1-C[3]);var D=L,N=D.replace("hsl","hsla").replace(")",", 0)");if(this._domA.style.background="linear-gradient("+[D,N]+"), linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0 / 2em 2em,\n                   linear-gradient(45deg, lightgrey 25%,       white 25%,       white 75%, lightgrey 75%) 1em 1em / 2em 2em",!v.fromEditor){var ve=this.settings.alpha,Ae=void 0;switch(this.settings.editorFormat){case"rgb":Ae=O.printRGB(ve);break;case"hsl":Ae=O.printHSL(ve);break;default:Ae=O.printHex(ve)}this._domEdit.value=Ae}this._domSample.style.color=Q}function ee(Te,Re,Me){Re.style.left=100*Me+"%"}function j(Te,Re,Me){Re.style.top=100*Me+"%"}}},{key:"_ifPopup",value:function(v,O){this.settings.parent&&this.settings.popup?v&&v(this.settings.popup):O&&O()}},{key:"_toggleDOM",value:function(v){var O=this.domElement;if(!O)return!1;var C=v?"":"none",x=O.style.display!==C;return x&&(O.style.display=C),x}}]),m}(),f=document.createElement("style");return f.textContent='.picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:"";display:block;width:100%;height:0;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{flex:1 1 auto}.layout_default .picker_sl::before{content:"";display:block;padding-bottom:100%}.layout_default .picker_editor{order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{order:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px #1e90ff}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:#f5f5f5;background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:#fff}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid #fff;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:linear-gradient(180deg, white, rgba(255, 255, 255, 0) 50%),linear-gradient(0deg, black, rgba(0, 0, 0, 0) 50%),linear-gradient(90deg, #808080, rgba(128, 128, 128, 0))}.picker_alpha,.picker_sample{position:relative;background:linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0/2em 2em,linear-gradient(45deg, lightgrey 25%, white 25%, white 75%, lightgrey 75%) 1em 1em/2em 2em;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:"";position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:"";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}',document.documentElement.firstElementChild.appendChild(f),p.StyleElement=f,p}()},1262:function(Ce,P,ae){"use strict";function ce(Ke){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Ze){return typeof Ze}:function(Ze){return Ze&&"function"==typeof Symbol&&Ze.constructor===Symbol&&Ze!==Symbol.prototype?"symbol":typeof Ze})(Ke)}function Z(Ke,Ze,Ct){return(Z=Y()?Reflect.construct.bind():function(Rt,yt,hn){var Fe=[null];return Fe.push.apply(Fe,yt),yt=new(Function.bind.apply(Rt,Fe)),hn&&H(yt,hn.prototype),yt}).apply(null,arguments)}function Y(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function H(Ke,Ze){return(H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ct,Rt){return Ct.__proto__=Rt,Ct})(Ke,Ze)}function F(Ke){return(F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Ze){return Ze.__proto__||Object.getPrototypeOf(Ze)})(Ke)}ae.d(P,{K:function(){return Wt}});var k=function(Ke){var Ze=hn;if("function"!=typeof Ke&&null!==Ke)throw new TypeError("Super expression must either be null or a function");Ze.prototype=Object.create(Ke&&Ke.prototype,{constructor:{value:Ze,writable:!0,configurable:!0}}),Object.defineProperty(Ze,"prototype",{writable:!1}),Ke&&H(Ze,Ke);var yt=function K(Ke){var Ze=Y();return function(){var Ct,Rt=F(Ke);if(Ct=Ze?(Ct=F(this).constructor,Reflect.construct(Rt,arguments,Ct)):Rt.apply(this,arguments),Rt=this,Ct&&("object"===ce(Ct)||"function"==typeof Ct))return Ct;if(void 0!==Ct)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==Rt)return Rt;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}(hn);function hn(Fe,tt){if(this instanceof hn)return(Fe=yt.call(this,Fe+" at position "+tt)).position=tt,Fe;throw new TypeError("Cannot call a class as a function")}return Ze=hn,Object.defineProperty(Ze,"prototype",{writable:!1}),Ze}(function U(Ke){var Ze="function"==typeof Map?new Map:void 0;return function(Ct){if(null===Ct||-1===Function.toString.call(Ct).indexOf("[native code]"))return Ct;if("function"!=typeof Ct)throw new TypeError("Super expression must either be null or a function");if(void 0!==Ze){if(Ze.has(Ct))return Ze.get(Ct);Ze.set(Ct,Rt)}function Rt(){return Z(Ct,arguments,F(this).constructor)}return Rt.prototype=Object.create(Ct.prototype,{constructor:{value:Rt,enumerable:!1,writable:!0,configurable:!0}}),H(Rt,Ct)}(Ke)}(Error)),_=92,M=47,R=42,S=123,y=125,w=91,p=93,f=40,m=41,h=32,v=10,O=9,C=13,x=8,L=12,Q=34,G=43,T=45,V=39,J=48,X=49,q=57,ee=44,j=46,D=58,N=59,re=65,ue=97,ve=69,Ae=101,Te=70,Re=102,Me=160,Ie=8192,Ge=8202,oe=8239,pe=8287,ge=12288,be=8220,ie=8221,se=8216,de=8217,_e=96,$e=180;function Xe(Ke){return J<=Ke&&Ke<=q||re<=Ke&&Ke<=Te||ue<=Ke&&Ke<=Re}function ut(Ke){return J<=Ke&&Ke<=q}var mt=/^[,:[\]{}()\n]$/;function ct(Ke){return Tt.test(Ke)||Ke&&Et(Ke.charCodeAt(0))}var Tt=/^[[{\w-]$/;function St(Ke){return Ke===h||Ke===v||Ke===O||Ke===C}function Et(Ke){return yn(Ke)||ft(Ke)}function yn(Ke){return Ke===Q||Ke===be||Ke===ie}function ft(Ke){return Ke===V||Ke===se||Ke===de||Ke===_e||Ke===$e}function pt(Ke,Ze,Ct){return Ct=2<arguments.length&&void 0!==Ct&&Ct,-1!==(Ze=Ke.lastIndexOf(Ze))?Ke.substring(0,Ze)+(Ct?"":Ke.substring(Ze+1)):Ke}function vt(Ke,Ze){var Ct=Ke.length;if(!St(Ke.charCodeAt(Ct-1)))return Ke+Ze;for(;St(Ke.charCodeAt(Ct-1));)Ct--;return Ke.substring(0,Ct)+Ze+Ke.substring(Ct)}var wt={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},Gt={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function Wt(Ke){var Ze=0,Ct="";if(!Fe())throw new k("Unexpected end of json string",Ke.length);var Rt=It(ee);if(Rt&&tt(),ct(Ke[Ze])&&/[,\n][ \t\r]*$/.test(Ct)){Rt||(Ct=vt(Ct,","));for(var yt=!0,hn=!0;hn;)yt?yt=!1:It(ee)||(Ct=vt(Ct,",")),hn=Fe();hn||(Ct=pt(Ct,",")),Ct="[\n".concat(Ct,"\n]")}else Rt&&(Ct=pt(Ct,","));if(Ze>=Ke.length)return Ct;throw new k("Unexpected character "+JSON.stringify(Ke[Ze]),Ze);function Fe(){tt();var dn=function(){if(Ke.charCodeAt(Ze)!==S)return!1;Ct+="{",Ze++,tt();for(var Qt=!0;Ze<Ke.length&&Ke.charCodeAt(Ze)!==y;){if(Qt?Qt=!1:(It(ee)||(Ct=vt(Ct,",")),tt()),!Vt()&&!Mn()){Ke.charCodeAt(Ze)===y||Ke.charCodeAt(Ze)===S||Ke.charCodeAt(Ze)===p||Ke.charCodeAt(Ze)===w||void 0===Ke[Ze]?Ct=pt(Ct,","):function(){throw new k("Object key expected",Ze)}();break}tt();var $i=It(D);$i||(ct(Ke[Ze])?Ct=vt(Ct,":"):ir()),Fe()||($i?function(){throw new k("Object value expected",Ze)}:ir)()}return Ke.charCodeAt(Ze)===y?(Ct+="}",Ze++):Ct=vt(Ct,"}"),!0}()||function(){if(Ke.charCodeAt(Ze)!==w)return!1;Ct+="[",Ze++,tt();for(var Qt=!0;Ze<Ke.length&&Ke.charCodeAt(Ze)!==p;)if(Qt?Qt=!1:It(ee)||(Ct=vt(Ct,",")),!Fe()){Ct=pt(Ct,",");break}return Ke.charCodeAt(Ze)===p?(Ct+="]",Ze++):Ct=vt(Ct,"]"),!0}()||Vt()||function(){var $i,Qt=Ze;if(Ke.charCodeAt(Ze)===T&&(Ze++,jt(Qt)),Ke.charCodeAt(Ze)===J)Ze++;else if($i=Ke.charCodeAt(Ze),X<=$i&&$i<=q)for(Ze++;ut(Ke.charCodeAt(Ze));)Ze++;if(Ke.charCodeAt(Ze)===j)for(Ze++,jt(Qt);ut(Ke.charCodeAt(Ze));)Ze++;if(Ke.charCodeAt(Ze)===Ae||Ke.charCodeAt(Ze)===ve)for(Ze++,Ke.charCodeAt(Ze)!==T&&Ke.charCodeAt(Ze)!==G||Ze++,jt(Qt);ut(Ke.charCodeAt(Ze));)Ze++;return Qt<Ze&&(Ct+=Ke.slice(Qt,Ze),!0)}()||pn("true","true")||pn("false","false")||pn("null","null")||pn("True","true")||pn("False","false")||pn("None","null")||Mn();return tt(),dn}function tt(){for(ot();function(){if(Ke.charCodeAt(Ze)===M&&Ke.charCodeAt(Ze+1)===R){for(;Ze<Ke.length&&("*"!==(dn=Ke)[Qt=Ze]||"/"!==dn[Qt+1]);)Ze++;Ze+=2}else{if(Ke.charCodeAt(Ze)!==M||Ke.charCodeAt(Ze+1)!==M)return!1;for(;Ze<Ke.length&&Ke.charCodeAt(Ze)!==v;)Ze++}var dn,Qt;return!0}()&&ot(););}function ot(){for(var dn,Qt,$i="";(dn=St(Ke.charCodeAt(Ze)))||(Qt=Ke.charCodeAt(Ze))===Me||Ie<=Qt&&Qt<=Ge||Qt===oe||Qt===pe||Qt===ge;)$i+=dn?Ke[Ze]:" ",Ze++;return 0<$i.length&&(Ct+=$i,!0)}function It(dn){return Ke.charCodeAt(Ze)===dn&&(Ct+=Ke[Ze],Ze++,!0)}function Ut(){return dn=_,Ke.charCodeAt(Ze)===dn&&(Ze++,!0);var dn}function Vt(){var dn,it,lt,Qt=Ke.charCodeAt(Ze)===_;if(Qt&&(Ze++,Qt=!0),Et(Ke.charCodeAt(Ze))){var $i=ft(Ke.charCodeAt(Ze))?ft:yn;for(Ke.charCodeAt(Ze),Ct+='"',Ze++;Ze<Ke.length&&!$i(Ke.charCodeAt(Ze));){if(Ke.charCodeAt(Ze)===_){var lo=Ke[Ze+1];if(void 0!==Gt[lo])Ct+=Ke.slice(Ze,Ze+2),Ze+=2;else if("u"===lo){if(!(Xe(Ke.charCodeAt(Ze+2))&&Xe(Ke.charCodeAt(Ze+3))&&Xe(Ke.charCodeAt(Ze+4))&&Xe(Ke.charCodeAt(Ze+5)))){Je=Kn=void 0;for(var Kn=Ze,Je=Kn+2;/\w/.test(Ke[Je]);)Je++;throw Kn=Ke.slice(Kn,Je),new k('Invalid unicode character "'.concat(Kn,'"'),Ze)}Ct+=Ke.slice(Ze,Ze+6),Ze+=6}else Ct+=lo,Ze+=2}else{if(Kn=Ke[Ze],(lo=Ke.charCodeAt(Ze))===Q&&Ke.charCodeAt(Ze-1)!==_)Ct+="\\"+Kn;else if((dn=lo)===v||dn===C||dn===O||dn===x||dn===L)Ct+=wt[Kn];else{if(!(32<=(dn=lo)&&dn<=1114111))throw new k("Invalid character "+JSON.stringify(Kn),Ze);Ct+=Kn}Ze++}Qt&&Ut()}for(Et(Ke.charCodeAt(Ze))?(Ke.charCodeAt(Ze),Ct+='"',Ze++):Ct+='"',tt();Ke.charCodeAt(Ze)===G;){Ze++,tt();var Qe=(Ct=pt(Ct,'"',!0)).length;Vt(),1,Ct=(it=Ct).substring(0,lt=Qe)+it.substring(lt+1)}return!0}return!1}function pn(dn,Qt){return Ke.slice(Ze,Ze+dn.length)===dn&&(Ct+=Qt,Ze+=dn.length,!0)}function Mn(){for(var dn,Qt=Ze;Ze<Ke.length&&!(mt.test(dn=Ke[Ze])||dn&&Et(dn.charCodeAt(0)));)Ze++;if(Qt<Ze){if(Ke.charCodeAt(Ze)===f)Ze++,Fe(),Ke.charCodeAt(Ze)===m&&(Ze++,Ke.charCodeAt(Ze)===N)&&Ze++;else{for(;St(Ke.charCodeAt(Ze-1))&&0<Ze;)Ze--;Qt=Ke.slice(Qt,Ze),Ct+=JSON.stringify(Qt)}return!0}}function jt(dn){if(!ut(Ke.charCodeAt(Ze)))throw dn=Ke.slice(dn,Ze),new k("Invalid number '".concat(dn,"', expecting a digit ").concat(Ke[Ze]?"but got '".concat(Ke[Ze],"'"):"but reached end of input"),2)}function ir(){throw new k("Colon expected",Ze)}}},894:function(Ce){"use strict";Ce.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON Schema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},7171:function(Ce){"use strict";Ce.exports=JSON.parse('{"id":"http://json-schema.org/draft-04/schema#","$schema":"http://json-schema.org/draft-04/schema#","description":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"positiveInteger":{"type":"integer","minimum":0},"positiveIntegerDefault0":{"allOf":[{"$ref":"#/definitions/positiveInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"minItems":1,"uniqueItems":true}},"type":"object","properties":{"id":{"type":"string"},"$schema":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":{},"multipleOf":{"type":"number","minimum":0,"exclusiveMinimum":true},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"boolean","default":false},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"boolean","default":false},"maxLength":{"$ref":"#/definitions/positiveInteger"},"minLength":{"$ref":"#/definitions/positiveIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"anyOf":[{"type":"boolean"},{"$ref":"#"}],"default":{}},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":{}},"maxItems":{"$ref":"#/definitions/positiveInteger"},"minItems":{"$ref":"#/definitions/positiveIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"maxProperties":{"$ref":"#/definitions/positiveInteger"},"minProperties":{"$ref":"#/definitions/positiveIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"anyOf":[{"type":"boolean"},{"$ref":"#"}],"default":{}},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"enum":{"type":"array","minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"dependencies":{"exclusiveMaximum":["maximum"],"exclusiveMinimum":["minimum"]},"default":{}}')},6273:function(Ce){"use strict";Ce.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-06/schema#","$id":"http://json-schema.org/draft-06/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"title":{"type":"string"},"description":{"type":"string"},"default":{},"examples":{"type":"array","items":{}},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":{}},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":{},"enum":{"type":"array","minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":{}}')},6680:function(Ce){"use strict";Ce.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')}},ke={},Ye.amdD=function(){throw new Error("define cannot be used indirect")},Ye.n=function(Ce){var P=Ce&&Ce.__esModule?function(){return Ce.default}:function(){return Ce};return Ye.d(P,{a:P}),P},Ye.d=function(Ce,P){for(var ae in P)Ye.o(P,ae)&&!Ye.o(Ce,ae)&&Object.defineProperty(Ce,ae,{enumerable:!0,get:P[ae]})},Ye.o=function(Ce,P){return Object.prototype.hasOwnProperty.call(Ce,P)},Ye.r=function(Ce){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Ce,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Ce,"__esModule",{value:!0})},Ye.nmd=function(Ce){return Ce.paths=[],Ce.children||(Ce.children=[]),Ce},Ye(3161);function Ye(Ce){var P=ke[Ce];return void 0!==P||(P=ke[Ce]={id:Ce,loaded:!1,exports:{}},xe[Ce].call(P.exports,P,P.exports,Ye),P.loaded=!0),P.exports}var xe,ke}()},1815:Cn=>{"use strict";var Ye=/,?([a-z]),?/gi,xe=parseFloat,ke=Math,Ce=ke.PI,P=ke.min,ae=ke.max,ce=ke.pow,c=ke.abs,K=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/gi,U=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/gi,Z=Array.isArray||function(ee){return ee instanceof Array};function Y(ee,j){return Object.prototype.hasOwnProperty.call(ee,j)}function H(ee){if("function"==typeof ee||Object(ee)!==ee)return ee;var j=new ee.constructor;for(var D in ee)Y(ee,D)&&(j[D]=H(ee[D]));return j}function M(ee){var j=M.ps=M.ps||{};return j[ee]?j[ee].sleep=100:j[ee]={sleep:100},setTimeout(function(){for(var D in j)Y(j,D)&&D!=ee&&(j[D].sleep--,!j[D].sleep&&delete j[D])}),j[ee]}function R(ee,j,D,N){return 1===arguments.length&&(j=ee.y,D=ee.width,N=ee.height,ee=ee.x),{x:ee,y:j,width:D,height:N,x2:ee+D,y2:j+N}}function S(){return this.join(",").replace(Ye,"$1")}function y(ee){var j=H(ee);return j.toString=S,j}function w(ee,j,D,N,re,ue,ve,Ae,Te){var Re=1-Te,Me=ce(Re,3),Ie=ce(Re,2),oe=Te*Te*Te,ge=Me*j+3*Ie*Te*N+3*Re*Te*Te*ue+oe*Ae;return{x:C(Me*ee+3*Ie*Te*D+3*Re*Te*Te*re+oe*ve),y:C(ge)}}function p(ee){var j=X.apply(null,ee);return R(j.x0,j.y0,j.x1-j.x0,j.y1-j.y0)}function f(ee,j,D){return j>=ee.x&&j<=ee.x+ee.width&&D>=ee.y&&D<=ee.y+ee.height}function h(ee,j,D,N,re){return ee*(ee*(-3*j+9*D-9*N+3*re)+6*j-12*D+6*N)-3*j+3*D}function v(ee,j,D,N,re,ue,ve,Ae,Te){null==Te&&(Te=1);for(var Re=(Te=Te>1?1:Te<0?0:Te)/2,Ie=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Ge=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],oe=0,pe=0;pe<12;pe++){var ge=Re*Ie[pe]+Re,be=h(ge,ee,D,re,ve),ie=h(ge,j,N,ue,Ae);oe+=Ge[pe]*ke.sqrt(be*be+ie*ie)}return Re*oe}function O(ee,j,D,N,re,ue,ve,Ae){if(!(ae(ee,D)<P(re,ve)||P(ee,D)>ae(re,ve)||ae(j,N)<P(ue,Ae)||P(j,N)>ae(ue,Ae))){var Re=(ee*N-j*D)*(ue-Ae)-(j-N)*(re*Ae-ue*ve),Me=(ee-D)*(ue-Ae)-(j-N)*(re-ve);if(Me){var Ie=C(((ee*N-j*D)*(re-ve)-(ee-D)*(re*Ae-ue*ve))/Me),Ge=C(Re/Me),oe=+Ie.toFixed(2),pe=+Ge.toFixed(2);if(!(oe<+P(ee,D).toFixed(2)||oe>+ae(ee,D).toFixed(2)||oe<+P(re,ve).toFixed(2)||oe>+ae(re,ve).toFixed(2)||pe<+P(j,N).toFixed(2)||pe>+ae(j,N).toFixed(2)||pe<+P(ue,Ae).toFixed(2)||pe>+ae(ue,Ae).toFixed(2)))return{x:Ie,y:Ge}}}}function C(ee){return Math.round(1e11*ee)/1e11}function x(ee,j,D){if(!function m(ee,j){return ee=R(ee),f(j=R(j),ee.x,ee.y)||f(j,ee.x2,ee.y)||f(j,ee.x,ee.y2)||f(j,ee.x2,ee.y2)||f(ee,j.x,j.y)||f(ee,j.x2,j.y)||f(ee,j.x,j.y2)||f(ee,j.x2,j.y2)||(ee.x<j.x2&&ee.x>j.x||j.x<ee.x2&&j.x>ee.x)&&(ee.y<j.y2&&ee.y>j.y||j.y<ee.y2&&j.y>ee.y)}(p(ee),p(j)))return D?0:[];for(var ue=v.apply(0,ee),ve=v.apply(0,j),Ae=G(ee)?1:~~(ue/5)||1,Te=G(j)?1:~~(ve/5)||1,Re=[],Me=[],Ie={},Ge=D?0:[],oe=0;oe<Ae+1;oe++){var pe=w.apply(0,ee.concat(oe/Ae));Re.push({x:pe.x,y:pe.y,t:oe/Ae})}for(oe=0;oe<Te+1;oe++)pe=w.apply(0,j.concat(oe/Te)),Me.push({x:pe.x,y:pe.y,t:oe/Te});for(oe=0;oe<Ae;oe++)for(var ge=0;ge<Te;ge++){var ut,be=Re[oe],ie=Re[oe+1],se=Me[ge],de=Me[ge+1],_e=c(ie.x-be.x)<.01?"y":"x",$e=c(de.x-se.x)<.01?"y":"x",Xe=O(be.x,be.y,ie.x,ie.y,se.x,se.y,de.x,de.y);if(Xe){if(Ie[ut=Xe.x.toFixed(9)+"#"+Xe.y.toFixed(9)])continue;Ie[ut]=!0;var mt=be.t+c((Xe[_e]-be[_e])/(ie[_e]-be[_e]))*(ie.t-be.t),ct=se.t+c((Xe[$e]-se[$e])/(de[$e]-se[$e]))*(de.t-se.t);mt>=0&&mt<=1&&ct>=0&&ct<=1&&(D?Ge++:Ge.push({x:Xe.x,y:Xe.y,t1:mt,t2:ct}))}}return Ge}function G(ee){return ee[0]===ee[2]&&ee[1]===ee[3]&&ee[4]===ee[6]&&ee[5]===ee[7]}function T(ee,j,D,N){return[ee,j,D,N,D,N]}function V(ee,j,D,N,re,ue){var ve=.3333333333333333,Ae=2/3;return[ve*ee+Ae*D,ve*j+Ae*N,ve*re+Ae*D,ve*ue+Ae*N,re,ue]}function J(ee,j,D,N,re,ue,ve,Ae,Te,Re){var oe,Me=120*Ce/180,Ie=Ce/180*(+re||0),Ge=[],pe=function k(ee){return function j(){var D=Array.prototype.slice.call(arguments,0),N=D.join("\u2400"),re=j.cache=j.cache||{},ue=j.count=j.count||[];return Y(re,N)?(function F(ee,j){for(var D=0,N=ee.length;D<N;D++)if(ee[D]===j)return ee.push(ee.splice(D,1)[0])}(ue,N),re[N]):(ue.length>=1e3&&delete re[ue.shift()],ue.push(N),re[N]=ee.apply(0,D),re[N])}}(function(tt,ot,It){return{x:tt*ke.cos(It)-ot*ke.sin(It),y:tt*ke.sin(It)+ot*ke.cos(It)}});if(Re)ut=Re[0],mt=Re[1],$e=Re[2],Xe=Re[3];else{j=(oe=pe(ee,j,-Ie)).y;var ge=((ee=oe.x)-(Ae=(oe=pe(Ae,Te,-Ie)).x))/2,be=(j-(Te=oe.y))/2,ie=ge*ge/(D*D)+be*be/(N*N);ie>1&&(D*=ie=ke.sqrt(ie),N*=ie);var se=D*D,de=N*N,_e=(ue==ve?-1:1)*ke.sqrt(c((se*de-se*be*be-de*ge*ge)/(se*be*be+de*ge*ge))),$e=_e*D*be/N+(ee+Ae)/2,Xe=_e*-N*ge/D+(j+Te)/2,ut=ke.asin(((j-Xe)/N).toFixed(9)),mt=ke.asin(((Te-Xe)/N).toFixed(9));(ut=ee<$e?Ce-ut:ut)<0&&(ut=2*Ce+ut),(mt=Ae<$e?Ce-mt:mt)<0&&(mt=2*Ce+mt),ve&&ut>mt&&(ut-=2*Ce),!ve&&mt>ut&&(mt-=2*Ce)}var ct=mt-ut;if(c(ct)>Me){var Tt=mt,St=Ae,Et=Te;Ge=J(Ae=$e+D*ke.cos(mt=ut+Me*(ve&&mt>ut?1:-1)),Te=Xe+N*ke.sin(mt),D,N,re,0,ve,St,Et,[mt,Tt,$e,Xe])}ct=mt-ut;var yn=ke.cos(ut),ft=ke.sin(ut),pt=ke.cos(mt),vt=ke.sin(mt),wt=ke.tan(ct/4),Gt=4/3*D*wt,Wt=4/3*N*wt,Ke=[ee,j],Ze=[ee+Gt*ft,j-Wt*yn],Ct=[Ae+Gt*vt,Te-Wt*pt],Rt=[Ae,Te];if(Ze[0]=2*Ke[0]-Ze[0],Ze[1]=2*Ke[1]-Ze[1],Re)return[Ze,Ct,Rt].concat(Ge);for(var yt=[],hn=0,Fe=(Ge=[Ze,Ct,Rt].concat(Ge).join().split(",")).length;hn<Fe;hn++)yt[hn]=hn%2?pe(Ge[hn-1],Ge[hn],Ie).y:pe(Ge[hn],Ge[hn+1],Ie).x;return yt}function X(ee,j,D,N,re,ue,ve,Ae){for(var Me,Ie,Ge,oe,pe,ge,be,ie,Te=[],Re=[[],[]],se=0;se<2;++se)if(0==se?(Ie=6*ee-12*D+6*re,Me=-3*ee+9*D-9*re+3*ve,Ge=3*D-3*ee):(Ie=6*j-12*N+6*ue,Me=-3*j+9*N-9*ue+3*Ae,Ge=3*N-3*j),c(Me)<1e-12){if(c(Ie)<1e-12)continue;0<(oe=-Ge/Ie)&&oe<1&&Te.push(oe)}else ie=ke.sqrt(be=Ie*Ie-4*Ge*Me),!(be<0)&&(0<(pe=(-Ie+ie)/(2*Me))&&pe<1&&Te.push(pe),0<(ge=(-Ie-ie)/(2*Me))&&ge<1&&Te.push(ge));for(var $e,de=Te.length,_e=de;de--;)Re[0][de]=($e=1-(oe=Te[de]))*$e*$e*ee+3*$e*$e*oe*D+3*$e*oe*oe*re+oe*oe*oe*ve,Re[1][de]=$e*$e*$e*j+3*$e*$e*oe*N+3*$e*oe*oe*ue+oe*oe*oe*Ae;return Re[0][_e]=ee,Re[1][_e]=j,Re[0][_e+1]=ve,Re[1][_e+1]=Ae,Re[0].length=Re[1].length=_e+2,{x0:P.apply(0,Re[0]),y0:P.apply(0,Re[1]),x1:ae.apply(0,Re[0]),y1:ae.apply(0,Re[1])}}function q(ee){var j=M(ee);if(j.curve)return y(j.curve);for(var D=function Q(ee){var j=M(ee);if(j.abs)return y(j.abs);if((!Z(ee)||!Z(ee&&ee[0]))&&(ee=function _(ee){if(!ee)return null;var j=M(ee);if(j.arr)return H(j.arr);var D={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},N=[];return Z(ee)&&Z(ee[0])&&(N=H(ee)),N.length||String(ee).replace(K,function(re,ue,ve){var Ae=[],Te=ue.toLowerCase();for(ve.replace(U,function(Re,Me){Me&&Ae.push(+Me)}),"m"==Te&&Ae.length>2&&(N.push([ue].concat(Ae.splice(0,2))),Te="l",ue="m"==ue?"l":"L");Ae.length>=D[Te]&&(N.push([ue].concat(Ae.splice(0,D[Te]))),D[Te]););}),N.toString=M.toString,j.arr=H(N),N}(ee)),!ee||!ee.length)return[["M",0,0]];var Te,D=[],N=0,re=0,ue=0,ve=0,Ae=0;"M"==ee[0][0]&&(ue=N=+ee[0][1],ve=re=+ee[0][2],Ae++,D[0]=["M",N,re]);for(var Re,Me,Ie=Ae,Ge=ee.length;Ie<Ge;Ie++){if(D.push(Re=[]),(Te=(Me=ee[Ie])[0])!=Te.toUpperCase())switch(Re[0]=Te.toUpperCase(),Re[0]){case"A":Re[1]=Me[1],Re[2]=Me[2],Re[3]=Me[3],Re[4]=Me[4],Re[5]=Me[5],Re[6]=+Me[6]+N,Re[7]=+Me[7]+re;break;case"V":Re[1]=+Me[1]+re;break;case"H":Re[1]=+Me[1]+N;break;case"M":ue=+Me[1]+N,ve=+Me[2]+re;default:for(var oe=1,pe=Me.length;oe<pe;oe++)Re[oe]=+Me[oe]+(oe%2?N:re)}else for(var ge=0,be=Me.length;ge<be;ge++)Re[ge]=Me[ge];switch(Te=Te.toUpperCase(),Re[0]){case"Z":N=+ue,re=+ve;break;case"H":N=Re[1];break;case"V":re=Re[1];break;case"M":ue=Re[Re.length-2],ve=Re[Re.length-1];default:N=Re[Re.length-2],re=Re[Re.length-1]}}return D.toString=S,j.abs=y(D),D}(ee),N={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},re=function(oe,pe,ge){var be,ie;if(!oe)return["C",pe.x,pe.y,pe.x,pe.y,pe.x,pe.y];switch(!(oe[0]in{T:1,Q:1})&&(pe.qx=pe.qy=null),oe[0]){case"M":pe.X=oe[1],pe.Y=oe[2];break;case"A":oe=["C"].concat(J.apply(0,[pe.x,pe.y].concat(oe.slice(1))));break;case"S":"C"==ge||"S"==ge?(be=2*pe.x-pe.bx,ie=2*pe.y-pe.by):(be=pe.x,ie=pe.y),oe=["C",be,ie].concat(oe.slice(1));break;case"T":"Q"==ge||"T"==ge?(pe.qx=2*pe.x-pe.qx,pe.qy=2*pe.y-pe.qy):(pe.qx=pe.x,pe.qy=pe.y),oe=["C"].concat(V(pe.x,pe.y,pe.qx,pe.qy,oe[1],oe[2]));break;case"Q":pe.qx=oe[1],pe.qy=oe[2],oe=["C"].concat(V(pe.x,pe.y,oe[1],oe[2],oe[3],oe[4]));break;case"L":oe=["C"].concat(T(pe.x,pe.y,oe[1],oe[2]));break;case"H":oe=["C"].concat(T(pe.x,pe.y,oe[1],pe.y));break;case"V":oe=["C"].concat(T(pe.x,pe.y,pe.x,oe[1]));break;case"Z":oe=["C"].concat(T(pe.x,pe.y,pe.X,pe.Y))}return oe},ue=function(oe,pe){if(oe[pe].length>7){oe[pe].shift();for(var ge=oe[pe];ge.length;)ve[pe]="A",oe.splice(pe++,0,["C"].concat(ge.splice(0,6)));oe.splice(pe,1),Me=D.length}},ve=[],Ae="",Te="",Re=0,Me=D.length;Re<Me;Re++){D[Re]&&(Ae=D[Re][0]),"C"!=Ae&&(ve[Re]=Ae,Re&&(Te=ve[Re-1])),D[Re]=re(D[Re],N,Te),"A"!=ve[Re]&&"C"==Ae&&(ve[Re]="C"),ue(D,Re);var Ie=D[Re],Ge=Ie.length;N.x=Ie[Ge-2],N.y=Ie[Ge-1],N.bx=xe(Ie[Ge-4])||N.x,N.by=xe(Ie[Ge-3])||N.y}return j.curve=y(D),D}Cn.exports=function L(ee,j,D){ee=q(ee),j=q(j);for(var N,re,ue,ve,Ae,Te,Re,Me,Ie,Ge,oe=D?0:[],pe=0,ge=ee.length;pe<ge;pe++){var be=ee[pe];if("M"==be[0])N=Ae=be[1],re=Te=be[2];else{"C"==be[0]?(Ie=[N,re].concat(be.slice(1)),N=Ie[6],re=Ie[7]):(Ie=[N,re,N,re,Ae,Te,Ae,Te],N=Ae,re=Te);for(var ie=0,se=j.length;ie<se;ie++){var de=j[ie];if("M"==de[0])ue=Re=de[1],ve=Me=de[2];else{"C"==de[0]?(Ge=[ue,ve].concat(de.slice(1)),ue=Ge[6],ve=Ge[7]):(Ge=[ue,ve,ue,ve,Re,Me,Re,Me],ue=Re,ve=Me);var _e=x(Ie,Ge,D);if(D)oe+=_e;else{for(var $e=0,Xe=_e.length;$e<Xe;$e++)_e[$e].segment1=pe,_e[$e].segment2=ie,_e[$e].bez1=Ie,_e[$e].bez2=Ge;oe=oe.concat(_e)}}}}}return oe}},7536:function(Cn){typeof self<"u"&&self,Cn.exports=function(Ye){var xe={};function ke(Ce){if(xe[Ce])return xe[Ce].exports;var P=xe[Ce]={i:Ce,l:!1,exports:{}};return Ye[Ce].call(P.exports,P,P.exports,ke),P.l=!0,P.exports}return ke.m=Ye,ke.c=xe,ke.d=function(Ce,P,ae){ke.o(Ce,P)||Object.defineProperty(Ce,P,{configurable:!1,enumerable:!0,get:ae})},ke.n=function(Ce){var P=Ce&&Ce.__esModule?function(){return Ce.default}:function(){return Ce};return ke.d(P,"a",P),P},ke.o=function(Ce,P){return Object.prototype.hasOwnProperty.call(Ce,P)},ke.p="",ke(ke.s=109)}([function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var Ce=ke(17),P=ke(18),ae=ke(19),ce=ke(45),c=ke(46),K=ke(47),U=ke(48),Z=ke(49),Y=ke(12),H=ke(32),F=ke(33),k=ke(31),_=ke(1);xe.default={Scope:_.Scope,create:_.create,find:_.find,query:_.query,register:_.register,Container:Ce.default,Format:P.default,Leaf:ae.default,Embed:U.default,Scroll:ce.default,Block:K.default,Inline:c.default,Text:Z.default,Attributor:{Attribute:Y.default,Class:H.default,Style:F.default,Store:k.default}}},function(Ye,xe,ke){"use strict";var k,Ce=this&&this.__extends||(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,M){_.__proto__=M}||function(_,M){for(var R in M)M.hasOwnProperty(R)&&(_[R]=M[R])},function(_,M){function R(){this.constructor=_}k(_,M),_.prototype=null===M?Object.create(M):(R.prototype=M.prototype,new R)});Object.defineProperty(xe,"__esModule",{value:!0});var P=function(k){function _(M){var R=this;return(R=k.call(this,M="[Parchment] "+M)||this).message=M,R.name=R.constructor.name,R}return Ce(_,k),_}(Error);xe.ParchmentError=P;var U,ae={},ce={},c={},K={};function H(k,_){var M;if(void 0===_&&(_=U.ANY),"string"==typeof k)M=K[k]||ae[k];else if(k instanceof Text||k.nodeType===Node.TEXT_NODE)M=K.text;else if("number"==typeof k)k&U.LEVEL&U.BLOCK?M=K.block:k&U.LEVEL&U.INLINE&&(M=K.inline);else if(k instanceof HTMLElement){var R=(k.getAttribute("class")||"").split(/\s+/);for(var S in R)if(M=ce[R[S]])break;M=M||c[k.tagName]}return null==M?null:_&U.LEVEL&M.scope&&_&U.TYPE&M.scope?M:null}xe.DATA_KEY="__blot",function(k){k[k.TYPE=3]="TYPE",k[k.LEVEL=12]="LEVEL",k[k.ATTRIBUTE=13]="ATTRIBUTE",k[k.BLOT=14]="BLOT",k[k.INLINE=7]="INLINE",k[k.BLOCK=11]="BLOCK",k[k.BLOCK_BLOT=10]="BLOCK_BLOT",k[k.INLINE_BLOT=6]="INLINE_BLOT",k[k.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",k[k.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",k[k.ANY=15]="ANY"}(U=xe.Scope||(xe.Scope={})),xe.create=function Z(k,_){var M=H(k);if(null==M)throw new P("Unable to create "+k+" blot");var R=M,S=k instanceof Node||k.nodeType===Node.TEXT_NODE?k:R.create(_);return new R(S,_)},xe.find=function Y(k,_){return void 0===_&&(_=!1),null==k?null:null!=k[xe.DATA_KEY]?k[xe.DATA_KEY].blot:_?Y(k.parentNode,_):null},xe.query=H,xe.register=function F(){for(var k=[],_=0;_<arguments.length;_++)k[_]=arguments[_];if(k.length>1)return k.map(function(S){return F(S)});var M=k[0];if("string"!=typeof M.blotName&&"string"!=typeof M.attrName)throw new P("Invalid definition");if("abstract"===M.blotName)throw new P("Cannot register abstract class");return K[M.blotName||M.attrName]=M,"string"==typeof M.keyName?ae[M.keyName]=M:(null!=M.className&&(ce[M.className]=M),null!=M.tagName&&(M.tagName=Array.isArray(M.tagName)?M.tagName.map(function(S){return S.toUpperCase()}):M.tagName.toUpperCase(),(Array.isArray(M.tagName)?M.tagName:[M.tagName]).forEach(function(S){(null==c[S]||null==M.className)&&(c[S]=M)}))),M}},function(Ye,xe,ke){var Ce=ke(51),P=ke(11),ae=ke(3),ce=ke(20),c=String.fromCharCode(0),K=function(U){this.ops=Array.isArray(U)?U:null!=U&&Array.isArray(U.ops)?U.ops:[]};K.prototype.insert=function(U,Z){var Y={};return 0===U.length?this:(Y.insert=U,null!=Z&&"object"==typeof Z&&Object.keys(Z).length>0&&(Y.attributes=Z),this.push(Y))},K.prototype.delete=function(U){return U<=0?this:this.push({delete:U})},K.prototype.retain=function(U,Z){if(U<=0)return this;var Y={retain:U};return null!=Z&&"object"==typeof Z&&Object.keys(Z).length>0&&(Y.attributes=Z),this.push(Y)},K.prototype.push=function(U){var Z=this.ops.length,Y=this.ops[Z-1];if(U=ae(!0,{},U),"object"==typeof Y){if("number"==typeof U.delete&&"number"==typeof Y.delete)return this.ops[Z-1]={delete:Y.delete+U.delete},this;if("number"==typeof Y.delete&&null!=U.insert&&"object"!=typeof(Y=this.ops[(Z-=1)-1]))return this.ops.unshift(U),this;if(P(U.attributes,Y.attributes)){if("string"==typeof U.insert&&"string"==typeof Y.insert)return this.ops[Z-1]={insert:Y.insert+U.insert},"object"==typeof U.attributes&&(this.ops[Z-1].attributes=U.attributes),this;if("number"==typeof U.retain&&"number"==typeof Y.retain)return this.ops[Z-1]={retain:Y.retain+U.retain},"object"==typeof U.attributes&&(this.ops[Z-1].attributes=U.attributes),this}}return Z===this.ops.length?this.ops.push(U):this.ops.splice(Z,0,U),this},K.prototype.chop=function(){var U=this.ops[this.ops.length-1];return U&&U.retain&&!U.attributes&&this.ops.pop(),this},K.prototype.filter=function(U){return this.ops.filter(U)},K.prototype.forEach=function(U){this.ops.forEach(U)},K.prototype.map=function(U){return this.ops.map(U)},K.prototype.partition=function(U){var Z=[],Y=[];return this.forEach(function(H){(U(H)?Z:Y).push(H)}),[Z,Y]},K.prototype.reduce=function(U,Z){return this.ops.reduce(U,Z)},K.prototype.changeLength=function(){return this.reduce(function(U,Z){return Z.insert?U+ce.length(Z):Z.delete?U-Z.delete:U},0)},K.prototype.length=function(){return this.reduce(function(U,Z){return U+ce.length(Z)},0)},K.prototype.slice=function(U,Z){U=U||0,"number"!=typeof Z&&(Z=1/0);for(var Y=[],H=ce.iterator(this.ops),F=0;F<Z&&H.hasNext();){var k;F<U?k=H.next(U-F):(k=H.next(Z-F),Y.push(k)),F+=ce.length(k)}return new K(Y)},K.prototype.compose=function(U){var Z=ce.iterator(this.ops),Y=ce.iterator(U.ops),H=[],F=Y.peek();if(null!=F&&"number"==typeof F.retain&&null==F.attributes){for(var k=F.retain;"insert"===Z.peekType()&&Z.peekLength()<=k;)k-=Z.peekLength(),H.push(Z.next());F.retain-k>0&&Y.next(F.retain-k)}for(var _=new K(H);Z.hasNext()||Y.hasNext();)if("insert"===Y.peekType())_.push(Y.next());else if("delete"===Z.peekType())_.push(Z.next());else{var M=Math.min(Z.peekLength(),Y.peekLength()),R=Z.next(M),S=Y.next(M);if("number"==typeof S.retain){var y={};"number"==typeof R.retain?y.retain=M:y.insert=R.insert;var w=ce.attributes.compose(R.attributes,S.attributes,"number"==typeof R.retain);if(w&&(y.attributes=w),_.push(y),!Y.hasNext()&&P(_.ops[_.ops.length-1],y)){var p=new K(Z.rest());return _.concat(p).chop()}}else"number"==typeof S.delete&&"number"==typeof R.retain&&_.push(S)}return _.chop()},K.prototype.concat=function(U){var Z=new K(this.ops.slice());return U.ops.length>0&&(Z.push(U.ops[0]),Z.ops=Z.ops.concat(U.ops.slice(1))),Z},K.prototype.diff=function(U,Z){if(this.ops===U.ops)return new K;var Y=[this,U].map(function(M){return M.map(function(R){if(null!=R.insert)return"string"==typeof R.insert?R.insert:c;throw new Error("diff() called "+(M===U?"on":"with")+" non-document")}).join("")}),H=new K,F=Ce(Y[0],Y[1],Z),k=ce.iterator(this.ops),_=ce.iterator(U.ops);return F.forEach(function(M){for(var R=M[1].length;R>0;){var S=0;switch(M[0]){case Ce.INSERT:S=Math.min(_.peekLength(),R),H.push(_.next(S));break;case Ce.DELETE:S=Math.min(R,k.peekLength()),k.next(S),H.delete(S);break;case Ce.EQUAL:S=Math.min(k.peekLength(),_.peekLength(),R);var y=k.next(S),w=_.next(S);P(y.insert,w.insert)?H.retain(S,ce.attributes.diff(y.attributes,w.attributes)):H.push(w).delete(S)}R-=S}}),H.chop()},K.prototype.eachLine=function(U,Z){Z=Z||"\n";for(var Y=ce.iterator(this.ops),H=new K,F=0;Y.hasNext();){if("insert"!==Y.peekType())return;var k=Y.peek(),_=ce.length(k)-Y.peekLength(),M="string"==typeof k.insert?k.insert.indexOf(Z,_)-_:-1;if(M<0)H.push(Y.next());else if(M>0)H.push(Y.next(M));else{if(!1===U(H,Y.next(1).attributes||{},F))return;F+=1,H=new K}}H.length()>0&&U(H,{},F)},K.prototype.transform=function(U,Z){if(Z=!!Z,"number"==typeof U)return this.transformPosition(U,Z);for(var Y=ce.iterator(this.ops),H=ce.iterator(U.ops),F=new K;Y.hasNext()||H.hasNext();)if("insert"!==Y.peekType()||!Z&&"insert"===H.peekType())if("insert"===H.peekType())F.push(H.next());else{var k=Math.min(Y.peekLength(),H.peekLength()),_=Y.next(k),M=H.next(k);if(_.delete)continue;M.delete?F.push(M):F.retain(k,ce.attributes.transform(_.attributes,M.attributes,Z))}else F.retain(ce.length(Y.next()));return F.chop()},K.prototype.transformPosition=function(U,Z){Z=!!Z;for(var Y=ce.iterator(this.ops),H=0;Y.hasNext()&&H<=U;){var F=Y.peekLength(),k=Y.peekType();Y.next(),"delete"!==k?("insert"===k&&(H<U||!Z)&&(U+=F),H+=F):U-=Math.min(F,U-H)}return U},Ye.exports=K},function(Ye,xe){"use strict";var ke=Object.prototype.hasOwnProperty,Ce=Object.prototype.toString,P=Object.defineProperty,ae=Object.getOwnPropertyDescriptor,ce=function(Y){return"function"==typeof Array.isArray?Array.isArray(Y):"[object Array]"===Ce.call(Y)},c=function(Y){if(!Y||"[object Object]"!==Ce.call(Y))return!1;var k,H=ke.call(Y,"constructor"),F=Y.constructor&&Y.constructor.prototype&&ke.call(Y.constructor.prototype,"isPrototypeOf");if(Y.constructor&&!H&&!F)return!1;for(k in Y);return typeof k>"u"||ke.call(Y,k)},K=function(Y,H){P&&"__proto__"===H.name?P(Y,H.name,{enumerable:!0,configurable:!0,value:H.newValue,writable:!0}):Y[H.name]=H.newValue},U=function(Y,H){if("__proto__"===H){if(!ke.call(Y,H))return;if(ae)return ae(Y,H).value}return Y[H]};Ye.exports=function Z(){var Y,H,F,k,_,M,R=arguments[0],S=1,y=arguments.length,w=!1;for("boolean"==typeof R&&(w=R,R=arguments[1]||{},S=2),(null==R||"object"!=typeof R&&"function"!=typeof R)&&(R={});S<y;++S)if(null!=(Y=arguments[S]))for(H in Y)F=U(R,H),R!==(k=U(Y,H))&&(w&&k&&(c(k)||(_=ce(k)))?(_?(_=!1,M=F&&ce(F)?F:[]):M=F&&c(F)?F:{},K(R,{name:H,newValue:Z(w,M,k)})):typeof k<"u"&&K(R,{name:H,newValue:k}));return R}},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0}),xe.default=xe.BlockEmbed=xe.bubbleFormats=void 0;var Ce=function(){function v(O,C){for(var x=0;x<C.length;x++){var L=C[x];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(O,L.key,L)}}return function(O,C,x){return C&&v(O.prototype,C),x&&v(O,x),O}}(),P=function v(O,C,x){null===O&&(O=Function.prototype);var L=Object.getOwnPropertyDescriptor(O,C);if(void 0===L){var Q=Object.getPrototypeOf(O);return null===Q?void 0:v(Q,C,x)}if("value"in L)return L.value;var G=L.get;return void 0===G?void 0:G.call(x)},ce=R(ke(3)),K=R(ke(2)),Z=R(ke(0)),H=R(ke(16)),k=R(ke(6)),M=R(ke(7));function R(v){return v&&v.__esModule?v:{default:v}}function S(v,O){if(!(v instanceof O))throw new TypeError("Cannot call a class as a function")}function y(v,O){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!O||"object"!=typeof O&&"function"!=typeof O?v:O}function w(v,O){if("function"!=typeof O&&null!==O)throw new TypeError("Super expression must either be null or a function, not "+typeof O);v.prototype=Object.create(O&&O.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(v,O):v.__proto__=O)}var f=function(v){function O(){return S(this,O),y(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return w(O,v),Ce(O,[{key:"attach",value:function(){P(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"attach",this).call(this),this.attributes=new Z.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new K.default).insert(this.value(),(0,ce.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(x,L){var Q=Z.default.query(x,Z.default.Scope.BLOCK_ATTRIBUTE);null!=Q&&this.attributes.attribute(Q,L)}},{key:"formatAt",value:function(x,L,Q,G){this.format(Q,G)}},{key:"insertAt",value:function(x,L,Q){if("string"==typeof L&&L.endsWith("\n")){var G=Z.default.create(m.blotName);this.parent.insertBefore(G,0===x?this:this.next),G.insertAt(0,L.slice(0,-1))}else P(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,x,L,Q)}}]),O}(Z.default.Embed);f.scope=Z.default.Scope.BLOCK_BLOT;var m=function(v){function O(C){S(this,O);var x=y(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,C));return x.cache={},x}return w(O,v),Ce(O,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(Z.default.Leaf).reduce(function(x,L){return 0===L.length()?x:x.insert(L.value(),h(L))},new K.default).insert("\n",h(this))),this.cache.delta}},{key:"deleteAt",value:function(x,L){P(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"deleteAt",this).call(this,x,L),this.cache={}}},{key:"formatAt",value:function(x,L,Q,G){L<=0||(Z.default.query(Q,Z.default.Scope.BLOCK)?x+L===this.length()&&this.format(Q,G):P(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"formatAt",this).call(this,x,Math.min(L,this.length()-x-1),Q,G),this.cache={})}},{key:"insertAt",value:function(x,L,Q){if(null!=Q)return P(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,x,L,Q);if(0!==L.length){var G=L.split("\n"),T=G.shift();T.length>0&&(x<this.length()-1||null==this.children.tail?P(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertAt",this).call(this,Math.min(x,this.length()-1),T):this.children.tail.insertAt(this.children.tail.length(),T),this.cache={});var V=this;G.reduce(function(J,X){return(V=V.split(J,!0)).insertAt(0,X),X.length},x+T.length)}}},{key:"insertBefore",value:function(x,L){var Q=this.children.head;P(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"insertBefore",this).call(this,x,L),Q instanceof H.default&&Q.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=P(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(x,L){P(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"moveChildren",this).call(this,x,L),this.cache={}}},{key:"optimize",value:function(x){P(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"optimize",this).call(this,x),this.cache={}}},{key:"path",value:function(x){return P(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"path",this).call(this,x,!0)}},{key:"removeChild",value:function(x){P(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"removeChild",this).call(this,x),this.cache={}}},{key:"split",value:function(x){var L=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(L&&(0===x||x>=this.length()-1)){var Q=this.clone();return 0===x?(this.parent.insertBefore(Q,this),this):(this.parent.insertBefore(Q,this.next),Q)}var G=P(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"split",this).call(this,x,L);return this.cache={},G}}]),O}(Z.default.Block);function h(v){var O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==v||("function"==typeof v.formats&&(O=(0,ce.default)(O,v.formats())),null==v.parent||"scroll"==v.parent.blotName||v.parent.statics.scope!==v.statics.scope)?O:h(v.parent,O)}m.blotName="block",m.tagName="P",m.defaultChild="break",m.allowedChildren=[k.default,Z.default.Embed,M.default],xe.bubbleFormats=h,xe.BlockEmbed=f,xe.default=m},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0}),xe.default=xe.overload=xe.expandConfig=void 0;var Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(V){return typeof V}:function(V){return V&&"function"==typeof Symbol&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},P=function(J,X){if(Array.isArray(J))return J;if(Symbol.iterator in Object(J))return function V(J,X){var q=[],ee=!0,j=!1,D=void 0;try{for(var re,N=J[Symbol.iterator]();!(ee=(re=N.next()).done)&&(q.push(re.value),!X||q.length!==X);ee=!0);}catch(ue){j=!0,D=ue}finally{try{!ee&&N.return&&N.return()}finally{if(j)throw D}}return q}(J,X);throw new TypeError("Invalid attempt to destructure non-iterable instance")},ae=function(){function V(J,X){for(var q=0;q<X.length;q++){var ee=X[q];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(J,ee.key,ee)}}return function(J,X,q){return X&&V(J.prototype,X),q&&V(J,q),J}}();ke(50);var c=h(ke(2)),U=h(ke(14)),Y=h(ke(8)),F=h(ke(9)),_=h(ke(0)),M=ke(15),R=h(M),y=h(ke(3)),p=h(ke(10)),m=h(ke(34));function h(V){return V&&V.__esModule?V:{default:V}}function v(V,J,X){return J in V?Object.defineProperty(V,J,{value:X,enumerable:!0,configurable:!0,writable:!0}):V[J]=X,V}var C=(0,p.default)("quill"),x=function(){function V(J){var X=this,q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function O(V,J){if(!(V instanceof J))throw new TypeError("Cannot call a class as a function")}(this,V),this.options=L(J,q),this.container=this.options.container,null==this.container)return C.error("Invalid Quill container",J);this.options.debug&&V.debug(this.options.debug);var ee=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new Y.default,this.scroll=_.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new U.default(this.scroll),this.selection=new R.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(Y.default.events.EDITOR_CHANGE,function(D){D===Y.default.events.TEXT_CHANGE&&X.root.classList.toggle("ql-blank",X.editor.isBlank())}),this.emitter.on(Y.default.events.SCROLL_UPDATE,function(D,N){var re=X.selection.lastRange,ue=re&&0===re.length?re.index:void 0;Q.call(X,function(){return X.editor.update(null,N,ue)},D)});var j=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+ee+"<p><br></p></div>");this.setContents(j),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return ae(V,null,[{key:"debug",value:function(X){!0===X&&(X="log"),p.default.level(X)}},{key:"find",value:function(X){return X.__quill||_.default.find(X)}},{key:"import",value:function(X){return null==this.imports[X]&&C.error("Cannot import "+X+". Are you sure it was registered?"),this.imports[X]}},{key:"register",value:function(X,q){var ee=this,j=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof X){var D=X.attrName||X.blotName;"string"==typeof D?this.register("formats/"+D,X,q):Object.keys(X).forEach(function(N){ee.register(N,X[N],q)})}else null!=this.imports[X]&&!j&&C.warn("Overwriting "+X+" with",q),this.imports[X]=q,(X.startsWith("blots/")||X.startsWith("formats/"))&&"abstract"!==q.blotName?_.default.register(q):X.startsWith("modules")&&"function"==typeof q.register&&q.register()}}]),ae(V,[{key:"addContainer",value:function(X){var q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof X){var ee=X;(X=document.createElement("div")).classList.add(ee)}return this.container.insertBefore(X,q),X}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(X,q,ee){var j=this,D=G(X,q,ee),N=P(D,4);return Q.call(this,function(){return j.editor.deleteText(X,q)},ee=N[3],X=N[0],-1*(q=N[1]))}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var X=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(X),this.container.classList.toggle("ql-disabled",!X)}},{key:"focus",value:function(){var X=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=X,this.scrollIntoView()}},{key:"format",value:function(X,q){var ee=this;return Q.call(this,function(){var D=ee.getSelection(!0),N=new c.default;if(null==D)return N;if(_.default.query(X,_.default.Scope.BLOCK))N=ee.editor.formatLine(D.index,D.length,v({},X,q));else{if(0===D.length)return ee.selection.format(X,q),N;N=ee.editor.formatText(D.index,D.length,v({},X,q))}return ee.setSelection(D,Y.default.sources.SILENT),N},arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y.default.sources.API)}},{key:"formatLine",value:function(X,q,ee,j,D){var re,N=this,ue=G(X,q,ee,j,D),ve=P(ue,4);return q=ve[1],re=ve[2],Q.call(this,function(){return N.editor.formatLine(X,q,re)},D=ve[3],X=ve[0],0)}},{key:"formatText",value:function(X,q,ee,j,D){var re,N=this,ue=G(X,q,ee,j,D),ve=P(ue,4);return q=ve[1],re=ve[2],Q.call(this,function(){return N.editor.formatText(X,q,re)},D=ve[3],X=ve[0],0)}},{key:"getBounds",value:function(X){var ee;ee="number"==typeof X?this.selection.getBounds(X,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0):this.selection.getBounds(X.index,X.length);var j=this.container.getBoundingClientRect();return{bottom:ee.bottom-j.top,height:ee.height,left:ee.left-j.left,right:ee.right-j.left,top:ee.top-j.top,width:ee.width}}},{key:"getContents",value:function(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-X,ee=G(X,q),j=P(ee,2);return this.editor.getContents(X=j[0],q=j[1])}},{key:"getFormat",value:function(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0);return"number"==typeof X?this.editor.getFormat(X,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0):this.editor.getFormat(X.index,X.length)}},{key:"getIndex",value:function(X){return X.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(X){return this.scroll.leaf(X)}},{key:"getLine",value:function(X){return this.scroll.line(X)}},{key:"getLines",value:function(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof X?this.scroll.lines(X.index,X.length):this.scroll.lines(X,q)}},{key:"getModule",value:function(X){return this.theme.modules[X]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-X,ee=G(X,q),j=P(ee,2);return this.editor.getText(X=j[0],q=j[1])}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(X,q,ee){var j=this;return Q.call(this,function(){return j.editor.insertEmbed(X,q,ee)},arguments.length>3&&void 0!==arguments[3]?arguments[3]:V.sources.API,X)}},{key:"insertText",value:function(X,q,ee,j,D){var re,N=this,ue=G(X,0,ee,j,D),ve=P(ue,4);return re=ve[2],Q.call(this,function(){return N.editor.insertText(X,q,re)},D=ve[3],X=ve[0],q.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(X,q,ee){this.clipboard.dangerouslyPasteHTML(X,q,ee)}},{key:"removeFormat",value:function(X,q,ee){var j=this,D=G(X,q,ee),N=P(D,4);return q=N[1],Q.call(this,function(){return j.editor.removeFormat(X,q)},ee=N[3],X=N[0])}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(X){var q=this;return Q.call(this,function(){X=new c.default(X);var j=q.getLength(),D=q.editor.deleteText(0,j),N=q.editor.applyDelta(X),re=N.ops[N.ops.length-1];return null!=re&&"string"==typeof re.insert&&"\n"===re.insert[re.insert.length-1]&&(q.editor.deleteText(q.getLength()-1,1),N.delete(1)),D.compose(N)},arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y.default.sources.API)}},{key:"setSelection",value:function(X,q,ee){if(null==X)this.selection.setRange(null,q||V.sources.API);else{var j=G(X,q,ee),D=P(j,4);ee=D[3],this.selection.setRange(new M.Range(X=D[0],q=D[1]),ee),ee!==Y.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(X){var q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y.default.sources.API,ee=(new c.default).insert(X);return this.setContents(ee,q)}},{key:"update",value:function(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y.default.sources.USER,q=this.scroll.update(X);return this.selection.update(X),q}},{key:"updateContents",value:function(X){var q=this,ee=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y.default.sources.API;return Q.call(this,function(){return X=new c.default(X),q.editor.applyDelta(X,ee)},ee,!0)}}]),V}();function L(V,J){if((J=(0,y.default)(!0,{container:V,modules:{clipboard:!0,keyboard:!0,history:!0}},J)).theme&&J.theme!==x.DEFAULTS.theme){if(J.theme=x.import("themes/"+J.theme),null==J.theme)throw new Error("Invalid theme "+J.theme+". Did you register it?")}else J.theme=m.default;var X=(0,y.default)(!0,{},J.theme.DEFAULTS);[X,J].forEach(function(j){j.modules=j.modules||{},Object.keys(j.modules).forEach(function(D){!0===j.modules[D]&&(j.modules[D]={})})});var ee=Object.keys(X.modules).concat(Object.keys(J.modules)).reduce(function(j,D){var N=x.import("modules/"+D);return null==N?C.error("Cannot load "+D+" module. Are you sure you registered it?"):j[D]=N.DEFAULTS||{},j},{});return null!=J.modules&&J.modules.toolbar&&J.modules.toolbar.constructor!==Object&&(J.modules.toolbar={container:J.modules.toolbar}),J=(0,y.default)(!0,{},x.DEFAULTS,{modules:ee},X,J),["bounds","container","scrollingContainer"].forEach(function(j){"string"==typeof J[j]&&(J[j]=document.querySelector(J[j]))}),J.modules=Object.keys(J.modules).reduce(function(j,D){return J.modules[D]&&(j[D]=J.modules[D]),j},{}),J}function Q(V,J,X,q){if(this.options.strict&&!this.isEnabled()&&J===Y.default.sources.USER)return new c.default;var ee=null==X?null:this.getSelection(),j=this.editor.delta,D=V();if(null!=ee&&(!0===X&&(X=ee.index),null==q?ee=T(ee,D,J):0!==q&&(ee=T(ee,X,q,J)),this.setSelection(ee,Y.default.sources.SILENT)),D.length()>0){var N,ue,re=[Y.default.events.TEXT_CHANGE,D,j,J];(N=this.emitter).emit.apply(N,[Y.default.events.EDITOR_CHANGE].concat(re)),J!==Y.default.sources.SILENT&&(ue=this.emitter).emit.apply(ue,re)}return D}function G(V,J,X,q,ee){var j={};return"number"==typeof V.index&&"number"==typeof V.length?"number"!=typeof J?(ee=q,q=X,X=J,J=V.length,V=V.index):(J=V.length,V=V.index):"number"!=typeof J&&(ee=q,q=X,X=J,J=0),"object"===(typeof X>"u"?"undefined":Ce(X))?(j=X,ee=q):"string"==typeof X&&(null!=q?j[X]=q:ee=X),[V,J,j,ee=ee||Y.default.sources.API]}function T(V,J,X,q){if(null==V)return null;var ee=void 0,j=void 0;if(J instanceof c.default){var D=[V.index,V.index+V.length].map(function(ve){return J.transformPosition(ve,q!==Y.default.sources.USER)}),N=P(D,2);ee=N[0],j=N[1]}else{var re=[V.index,V.index+V.length].map(function(ve){return ve<J||ve===J&&q===Y.default.sources.USER?ve:X>=0?ve+X:Math.max(J,ve+X)}),ue=P(re,2);ee=ue[0],j=ue[1]}return new M.Range(ee,j-ee)}x.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},x.events=Y.default.events,x.sources=Y.default.sources,x.version="1.3.7",x.imports={delta:c.default,parchment:_.default,"core/module":F.default,"core/theme":m.default},xe.expandConfig=L,xe.overload=G,xe.default=x},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var Ce=function(){function k(_,M){for(var R=0;R<M.length;R++){var S=M[R];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(_,S.key,S)}}return function(_,M,R){return M&&k(_.prototype,M),R&&k(_,R),_}}(),P=function k(_,M,R){null===_&&(_=Function.prototype);var S=Object.getOwnPropertyDescriptor(_,M);if(void 0===S){var y=Object.getPrototypeOf(_);return null===y?void 0:k(y,M,R)}if("value"in S)return S.value;var w=S.get;return void 0===w?void 0:w.call(R)},ce=U(ke(7)),K=U(ke(0));function U(k){return k&&k.__esModule?k:{default:k}}var F=function(k){function _(){return function Z(k,_){if(!(k instanceof _))throw new TypeError("Cannot call a class as a function")}(this,_),function Y(k,_){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||"object"!=typeof _&&"function"!=typeof _?k:_}(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return function H(k,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function, not "+typeof _);k.prototype=Object.create(_&&_.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(k,_):k.__proto__=_)}(_,k),Ce(_,[{key:"formatAt",value:function(R,S,y,w){if(_.compare(this.statics.blotName,y)<0&&K.default.query(y,K.default.Scope.BLOT)){var p=this.isolate(R,S);w&&p.wrap(y,w)}else P(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"formatAt",this).call(this,R,S,y,w)}},{key:"optimize",value:function(R){if(P(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"optimize",this).call(this,R),this.parent instanceof _&&_.compare(this.statics.blotName,this.parent.statics.blotName)>0){var S=this.parent.isolate(this.offset(),this.length());this.moveChildren(S),S.wrap(this)}}}],[{key:"compare",value:function(R,S){var y=_.order.indexOf(R),w=_.order.indexOf(S);return y>=0||w>=0?y-w:R===S?0:R<S?-1:1}}]),_}(K.default.Inline);F.allowedChildren=[F,K.default.Embed,ce.default],F.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],xe.default=F},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var U=function(Z){function Y(){return function ce(Z,Y){if(!(Z instanceof Y))throw new TypeError("Cannot call a class as a function")}(this,Y),function c(Z,Y){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!Y||"object"!=typeof Y&&"function"!=typeof Y?Z:Y}(this,(Y.__proto__||Object.getPrototypeOf(Y)).apply(this,arguments))}return function K(Z,Y){if("function"!=typeof Y&&null!==Y)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);Z.prototype=Object.create(Y&&Y.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,Y):Z.__proto__=Y)}(Y,Z),Y}(function ae(Z){return Z&&Z.__esModule?Z:{default:Z}}(ke(0)).default.Text);xe.default=U},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var Ce=function(){function M(R,S){for(var y=0;y<S.length;y++){var w=S[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(R,w.key,w)}}return function(R,S,y){return S&&M(R.prototype,S),y&&M(R,y),R}}(),P=function M(R,S,y){null===R&&(R=Function.prototype);var w=Object.getOwnPropertyDescriptor(R,S);if(void 0===w){var p=Object.getPrototypeOf(R);return null===p?void 0:M(p,S,y)}if("value"in w)return w.value;var f=w.get;return void 0===f?void 0:f.call(y)},ce=U(ke(54));function U(M){return M&&M.__esModule?M:{default:M}}var F=(0,U(ke(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(function(M){document.addEventListener(M,function(){for(var R=arguments.length,S=Array(R),y=0;y<R;y++)S[y]=arguments[y];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(w){var p;w.__quill&&w.__quill.emitter&&(p=w.__quill.emitter).handleDOM.apply(p,S)})})});var _=function(M){function R(){!function Z(M,R){if(!(M instanceof R))throw new TypeError("Cannot call a class as a function")}(this,R);var S=function Y(M,R){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!R||"object"!=typeof R&&"function"!=typeof R?M:R}(this,(R.__proto__||Object.getPrototypeOf(R)).call(this));return S.listeners={},S.on("error",F.error),S}return function H(M,R){if("function"!=typeof R&&null!==R)throw new TypeError("Super expression must either be null or a function, not "+typeof R);M.prototype=Object.create(R&&R.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(M,R):M.__proto__=R)}(R,M),Ce(R,[{key:"emit",value:function(){F.log.apply(F,arguments),P(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(y){for(var w=arguments.length,p=Array(w>1?w-1:0),f=1;f<w;f++)p[f-1]=arguments[f];(this.listeners[y.type]||[]).forEach(function(m){var h=m.node,v=m.handler;(y.target===h||h.contains(y.target))&&v.apply(void 0,[y].concat(p))})}},{key:"listenDOM",value:function(y,w,p){this.listeners[y]||(this.listeners[y]=[]),this.listeners[y].push({node:w,handler:p})}}]),R}(ce.default);_.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},_.sources={API:"api",SILENT:"silent",USER:"user"},xe.default=_},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var P=function ae(ce){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function Ce(ae,ce){if(!(ae instanceof ce))throw new TypeError("Cannot call a class as a function")})(this,ae),this.quill=ce,this.options=c};P.DEFAULTS={},xe.default=P},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var Ce=["error","warn","log","info"],P="warn";function ae(c){if(Ce.indexOf(c)<=Ce.indexOf(P)){for(var K,U=arguments.length,Z=Array(U>1?U-1:0),Y=1;Y<U;Y++)Z[Y-1]=arguments[Y];(K=console)[c].apply(K,Z)}}function ce(c){return Ce.reduce(function(K,U){return K[U]=ae.bind(console,U,c),K},{})}ae.level=ce.level=function(c){P=c},xe.default=ce},function(Ye,xe,ke){var Ce=Array.prototype.slice,P=ke(52),ae=ke(53),ce=Ye.exports=function(Z,Y,H){return H||(H={}),Z===Y||(Z instanceof Date&&Y instanceof Date?Z.getTime()===Y.getTime():!Z||!Y||"object"!=typeof Z&&"object"!=typeof Y?H.strict?Z===Y:Z==Y:function U(Z,Y,H){var F,k;if(c(Z)||c(Y)||Z.prototype!==Y.prototype)return!1;if(ae(Z))return!!ae(Y)&&(Z=Ce.call(Z),Y=Ce.call(Y),ce(Z,Y,H));if(K(Z)){if(!K(Y)||Z.length!==Y.length)return!1;for(F=0;F<Z.length;F++)if(Z[F]!==Y[F])return!1;return!0}try{var _=P(Z),M=P(Y)}catch{return!1}if(_.length!=M.length)return!1;for(_.sort(),M.sort(),F=_.length-1;F>=0;F--)if(_[F]!=M[F])return!1;for(F=_.length-1;F>=0;F--)if(!ce(Z[k=_[F]],Y[k],H))return!1;return typeof Z==typeof Y}(Z,Y,H))};function c(Z){return null==Z}function K(Z){return!(!Z||"object"!=typeof Z||"number"!=typeof Z.length||"function"!=typeof Z.copy||"function"!=typeof Z.slice||Z.length>0&&"number"!=typeof Z[0])}},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var Ce=ke(1),P=function(){function ae(ce,c,K){void 0===K&&(K={}),this.attrName=ce,this.keyName=c,this.scope=null!=K.scope?K.scope&Ce.Scope.LEVEL|Ce.Scope.TYPE&Ce.Scope.ATTRIBUTE:Ce.Scope.ATTRIBUTE,null!=K.whitelist&&(this.whitelist=K.whitelist)}return ae.keys=function(ce){return[].map.call(ce.attributes,function(c){return c.name})},ae.prototype.add=function(ce,c){return!!this.canAdd(ce,c)&&(ce.setAttribute(this.keyName,c),!0)},ae.prototype.canAdd=function(ce,c){return null!=Ce.query(ce,Ce.Scope.BLOT&(this.scope|Ce.Scope.TYPE))&&(null==this.whitelist||("string"==typeof c?this.whitelist.indexOf(c.replace(/["']/g,""))>-1:this.whitelist.indexOf(c)>-1))},ae.prototype.remove=function(ce){ce.removeAttribute(this.keyName)},ae.prototype.value=function(ce){var c=ce.getAttribute(this.keyName);return this.canAdd(ce,c)&&c?c:""},ae}();xe.default=P},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0}),xe.default=xe.Code=void 0;var Ce=function(m,h){if(Array.isArray(m))return m;if(Symbol.iterator in Object(m))return function f(m,h){var v=[],O=!0,C=!1,x=void 0;try{for(var Q,L=m[Symbol.iterator]();!(O=(Q=L.next()).done)&&(v.push(Q.value),!h||v.length!==h);O=!0);}catch(G){C=!0,x=G}finally{try{!O&&L.return&&L.return()}finally{if(C)throw x}}return v}(m,h);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P=function(){function f(m,h){for(var v=0;v<h.length;v++){var O=h[v];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(m,O.key,O)}}return function(m,h,v){return h&&f(m.prototype,h),v&&f(m,v),m}}(),ae=function f(m,h,v){null===m&&(m=Function.prototype);var O=Object.getOwnPropertyDescriptor(m,h);if(void 0===O){var C=Object.getPrototypeOf(m);return null===C?void 0:f(C,h,v)}if("value"in O)return O.value;var x=O.get;return void 0===x?void 0:x.call(v)},c=M(ke(2)),U=M(ke(0)),Y=M(ke(4)),F=M(ke(6)),_=M(ke(7));function M(f){return f&&f.__esModule?f:{default:f}}function R(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}function S(f,m){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!m||"object"!=typeof m&&"function"!=typeof m?f:m}function y(f,m){if("function"!=typeof m&&null!==m)throw new TypeError("Super expression must either be null or a function, not "+typeof m);f.prototype=Object.create(m&&m.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(f,m):f.__proto__=m)}var w=function(f){function m(){return R(this,m),S(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return y(m,f),m}(F.default);w.blotName="code",w.tagName="CODE";var p=function(f){function m(){return R(this,m),S(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return y(m,f),P(m,[{key:"delta",value:function(){var v=this,O=this.domNode.textContent;return O.endsWith("\n")&&(O=O.slice(0,-1)),O.split("\n").reduce(function(C,x){return C.insert(x).insert("\n",v.formats())},new c.default)}},{key:"format",value:function(v,O){if(v!==this.statics.blotName||!O){var C=this.descendant(_.default,this.length()-1),L=Ce(C,1)[0];L?.deleteAt(L.length()-1,1),ae(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,v,O)}}},{key:"formatAt",value:function(v,O,C,x){if(0!==O&&null!=U.default.query(C,U.default.Scope.BLOCK)&&(C!==this.statics.blotName||x!==this.statics.formats(this.domNode))){var L=this.newlineIndex(v);if(!(L<0||L>=v+O)){var Q=this.newlineIndex(v,!0)+1,G=L-Q+1,T=this.isolate(Q,G),V=T.next;T.format(C,x),V instanceof m&&V.formatAt(0,v-Q+O-G,C,x)}}}},{key:"insertAt",value:function(v,O,C){if(null==C){var x=this.descendant(_.default,v),L=Ce(x,2);L[0].insertAt(L[1],O)}}},{key:"length",value:function(){var v=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?v:v+1}},{key:"newlineIndex",value:function(v){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,v).lastIndexOf("\n");var C=this.domNode.textContent.slice(v).indexOf("\n");return C>-1?v+C:-1}},{key:"optimize",value:function(v){this.domNode.textContent.endsWith("\n")||this.appendChild(U.default.create("text","\n")),ae(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"optimize",this).call(this,v);var O=this.next;null!=O&&O.prev===this&&O.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===O.statics.formats(O.domNode)&&(O.optimize(v),O.moveChildren(this),O.remove())}},{key:"replace",value:function(v){ae(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"replace",this).call(this,v),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(O){var C=U.default.find(O);null==C?O.parentNode.removeChild(O):C instanceof U.default.Embed?C.remove():C.unwrap()})}}],[{key:"create",value:function(v){var O=ae(m.__proto__||Object.getPrototypeOf(m),"create",this).call(this,v);return O.setAttribute("spellcheck",!1),O}},{key:"formats",value:function(){return!0}}]),m}(Y.default);p.blotName="code-block",p.tagName="PRE",p.TAB="  ",xe.Code=w,xe.default=p},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(V){return typeof V}:function(V){return V&&"function"==typeof Symbol&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},P=function(J,X){if(Array.isArray(J))return J;if(Symbol.iterator in Object(J))return function V(J,X){var q=[],ee=!0,j=!1,D=void 0;try{for(var re,N=J[Symbol.iterator]();!(ee=(re=N.next()).done)&&(q.push(re.value),!X||q.length!==X);ee=!0);}catch(ue){j=!0,D=ue}finally{try{!ee&&N.return&&N.return()}finally{if(j)throw D}}return q}(J,X);throw new TypeError("Invalid attempt to destructure non-iterable instance")},ae=function(){function V(J,X){for(var q=0;q<X.length;q++){var ee=X[q];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,"value"in ee&&(ee.writable=!0),Object.defineProperty(J,ee.key,ee)}}return function(J,X,q){return X&&V(J.prototype,X),q&&V(J,q),J}}(),c=O(ke(2)),U=O(ke(20)),Y=O(ke(0)),F=O(ke(13)),_=O(ke(24)),M=ke(4),R=O(M),y=O(ke(16)),p=O(ke(21)),m=O(ke(11)),v=O(ke(3));function O(V){return V&&V.__esModule?V:{default:V}}var L=/^[ -~]*$/,Q=function(){function V(J){(function x(V,J){if(!(V instanceof J))throw new TypeError("Cannot call a class as a function")})(this,V),this.scroll=J,this.delta=this.getDelta()}return ae(V,[{key:"applyDelta",value:function(X){var q=this,ee=!1;this.scroll.update();var j=this.scroll.length();return this.scroll.batchStart(),(X=function T(V){return V.reduce(function(J,X){if(1===X.insert){var q=(0,p.default)(X.attributes);return delete q.image,J.insert({image:X.attributes.image},q)}if(null!=X.attributes&&(!0===X.attributes.list||!0===X.attributes.bullet)&&((X=(0,p.default)(X)).attributes.list?X.attributes.list="ordered":(X.attributes.list="bullet",delete X.attributes.bullet)),"string"==typeof X.insert){var ee=X.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return J.insert(ee,X.attributes)}return J.push(X)},new c.default)}(X)).reduce(function(D,N){var re=N.retain||N.delete||N.insert.length||1,ue=N.attributes||{};if(null!=N.insert){if("string"==typeof N.insert){var ve=N.insert;ve.endsWith("\n")&&ee&&(ee=!1,ve=ve.slice(0,-1)),D>=j&&!ve.endsWith("\n")&&(ee=!0),q.scroll.insertAt(D,ve);var Ae=q.scroll.line(D),Te=P(Ae,2),Re=Te[0],Me=Te[1],Ie=(0,v.default)({},(0,M.bubbleFormats)(Re));if(Re instanceof R.default){var Ge=Re.descendant(Y.default.Leaf,Me),oe=P(Ge,1);Ie=(0,v.default)(Ie,(0,M.bubbleFormats)(oe[0]))}ue=U.default.attributes.diff(Ie,ue)||{}}else if("object"===Ce(N.insert)){var ge=Object.keys(N.insert)[0];if(null==ge)return D;q.scroll.insertAt(D,ge,N.insert[ge])}j+=re}return Object.keys(ue).forEach(function(be){q.scroll.formatAt(D,re,be,ue[be])}),D+re},0),X.reduce(function(D,N){return"number"==typeof N.delete?(q.scroll.deleteAt(D,N.delete),D):D+(N.retain||N.insert.length||1)},0),this.scroll.batchEnd(),this.update(X)}},{key:"deleteText",value:function(X,q){return this.scroll.deleteAt(X,q),this.update((new c.default).retain(X).delete(q))}},{key:"formatLine",value:function(X,q){var ee=this,j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(j).forEach(function(D){if(null==ee.scroll.whitelist||ee.scroll.whitelist[D]){var N=ee.scroll.lines(X,Math.max(q,1)),re=q;N.forEach(function(ue){var ve=ue.length();if(ue instanceof F.default){var Ae=X-ue.offset(ee.scroll),Te=ue.newlineIndex(Ae+re)-Ae+1;ue.formatAt(Ae,Te,D,j[D])}else ue.format(D,j[D]);re-=ve})}}),this.scroll.optimize(),this.update((new c.default).retain(X).retain(q,(0,p.default)(j)))}},{key:"formatText",value:function(X,q){var ee=this,j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(j).forEach(function(D){ee.scroll.formatAt(X,q,D,j[D])}),this.update((new c.default).retain(X).retain(q,(0,p.default)(j)))}},{key:"getContents",value:function(X,q){return this.delta.slice(X,X+q)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(X,q){return X.concat(q.delta())},new c.default)}},{key:"getFormat",value:function(X){var q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,ee=[],j=[];0===q?this.scroll.path(X).forEach(function(N){var ue=P(N,1)[0];ue instanceof R.default?ee.push(ue):ue instanceof Y.default.Leaf&&j.push(ue)}):(ee=this.scroll.lines(X,q),j=this.scroll.descendants(Y.default.Leaf,X,q));var D=[ee,j].map(function(N){if(0===N.length)return{};for(var re=(0,M.bubbleFormats)(N.shift());Object.keys(re).length>0;){var ue=N.shift();if(null==ue)return re;re=G((0,M.bubbleFormats)(ue),re)}return re});return v.default.apply(v.default,D)}},{key:"getText",value:function(X,q){return this.getContents(X,q).filter(function(ee){return"string"==typeof ee.insert}).map(function(ee){return ee.insert}).join("")}},{key:"insertEmbed",value:function(X,q,ee){return this.scroll.insertAt(X,q,ee),this.update((new c.default).retain(X).insert(function C(V,J,X){return J in V?Object.defineProperty(V,J,{value:X,enumerable:!0,configurable:!0,writable:!0}):V[J]=X,V}({},q,ee)))}},{key:"insertText",value:function(X,q){var ee=this,j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return q=q.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(X,q),Object.keys(j).forEach(function(D){ee.scroll.formatAt(X,q.length,D,j[D])}),this.update((new c.default).retain(X).insert(q,(0,p.default)(j)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var X=this.scroll.children.head;return!(X.statics.blotName!==R.default.blotName||X.children.length>1)&&X.children.head instanceof y.default}},{key:"removeFormat",value:function(X,q){var ee=this.getText(X,q),j=this.scroll.line(X+q),D=P(j,2),N=D[0],re=D[1],ue=0,ve=new c.default;null!=N&&(ue=N instanceof F.default?N.newlineIndex(re)-re+1:N.length()-re,ve=N.delta().slice(re,re+ue-1).insert("\n"));var Te=this.getContents(X,q+ue).diff((new c.default).insert(ee).concat(ve)),Re=(new c.default).retain(X).concat(Te);return this.applyDelta(Re)}},{key:"update",value:function(X){var q=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,j=this.delta;if(1===q.length&&"characterData"===q[0].type&&q[0].target.data.match(L)&&Y.default.find(q[0].target)){var D=Y.default.find(q[0].target),N=(0,M.bubbleFormats)(D),re=D.offset(this.scroll),ue=q[0].oldValue.replace(_.default.CONTENTS,""),ve=(new c.default).insert(ue),Ae=(new c.default).insert(D.value());X=(new c.default).retain(re).concat(ve.diff(Ae,ee)).reduce(function(Re,Me){return Me.insert?Re.insert(Me.insert,N):Re.push(Me)},new c.default),this.delta=j.compose(X)}else this.delta=this.getDelta(),(!X||!(0,m.default)(j.compose(X),this.delta))&&(X=j.diff(this.delta,ee));return X}}]),V}();function G(V,J){return Object.keys(J).reduce(function(X,q){return null==V[q]||(J[q]===V[q]?X[q]=J[q]:Array.isArray(J[q])?J[q].indexOf(V[q])<0&&(X[q]=J[q].concat([V[q]])):X[q]=[J[q],V[q]]),X},{})}xe.default=Q},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0}),xe.default=xe.Range=void 0;var Ce=function(m,h){if(Array.isArray(m))return m;if(Symbol.iterator in Object(m))return function f(m,h){var v=[],O=!0,C=!1,x=void 0;try{for(var Q,L=m[Symbol.iterator]();!(O=(Q=L.next()).done)&&(v.push(Q.value),!h||v.length!==h);O=!0);}catch(G){C=!0,x=G}finally{try{!O&&L.return&&L.return()}finally{if(C)throw x}}return v}(m,h);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P=function(){function f(m,h){for(var v=0;v<h.length;v++){var O=h[v];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(m,O.key,O)}}return function(m,h,v){return h&&f(m.prototype,h),v&&f(m,v),m}}(),ce=_(ke(0)),K=_(ke(21)),Z=_(ke(11)),H=_(ke(8));function _(f){return f&&f.__esModule?f:{default:f}}function M(f){if(Array.isArray(f)){for(var m=0,h=Array(f.length);m<f.length;m++)h[m]=f[m];return h}return Array.from(f)}function R(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}var S=(0,_(ke(10)).default)("quill:selection"),y=function f(m){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;R(this,f),this.index=m,this.length=h},w=function(){function f(m,h){var v=this;R(this,f),this.emitter=h,this.scroll=m,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=ce.default.create("cursor",this),this.lastRange=this.savedRange=new y(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){v.mouseDown||setTimeout(v.update.bind(v,H.default.sources.USER),1)}),this.emitter.on(H.default.events.EDITOR_CHANGE,function(O,C){O===H.default.events.TEXT_CHANGE&&C.length()>0&&v.update(H.default.sources.SILENT)}),this.emitter.on(H.default.events.SCROLL_BEFORE_UPDATE,function(){if(v.hasFocus()){var O=v.getNativeRange();null!=O&&O.start.node!==v.cursor.textNode&&v.emitter.once(H.default.events.SCROLL_UPDATE,function(){try{v.setNativeRange(O.start.node,O.start.offset,O.end.node,O.end.offset)}catch{}})}}),this.emitter.on(H.default.events.SCROLL_OPTIMIZE,function(O,C){if(C.range){var x=C.range;v.setNativeRange(x.startNode,x.startOffset,x.endNode,x.endOffset)}}),this.update(H.default.sources.SILENT)}return P(f,[{key:"handleComposition",value:function(){var h=this;this.root.addEventListener("compositionstart",function(){h.composing=!0}),this.root.addEventListener("compositionend",function(){if(h.composing=!1,h.cursor.parent){var v=h.cursor.restore();if(!v)return;setTimeout(function(){h.setNativeRange(v.startNode,v.startOffset,v.endNode,v.endOffset)},1)}})}},{key:"handleDragging",value:function(){var h=this;this.emitter.listenDOM("mousedown",document.body,function(){h.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){h.mouseDown=!1,h.update(H.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(h,v){if(null==this.scroll.whitelist||this.scroll.whitelist[h]){this.scroll.update();var O=this.getNativeRange();if(null!=O&&O.native.collapsed&&!ce.default.query(h,ce.default.Scope.BLOCK)){if(O.start.node!==this.cursor.textNode){var C=ce.default.find(O.start.node,!1);if(null==C)return;if(C instanceof ce.default.Leaf){var x=C.split(O.start.offset);C.parent.insertBefore(this.cursor,x)}else C.insertBefore(this.cursor,O.start.node);this.cursor.attach()}this.cursor.format(h,v),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(h){var v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,O=this.scroll.length();h=Math.min(h,O-1),v=Math.min(h+v,O-1)-h;var C=void 0,x=this.scroll.leaf(h),L=Ce(x,2),Q=L[0],G=L[1];if(null==Q)return null;var T=Q.position(G,!0),V=Ce(T,2);C=V[0],G=V[1];var J=document.createRange();if(v>0){J.setStart(C,G);var X=this.scroll.leaf(h+v),q=Ce(X,2);if(null==(Q=q[0]))return null;var ee=Q.position(G=q[1],!0),j=Ce(ee,2);return J.setEnd(C=j[0],G=j[1]),J.getBoundingClientRect()}var D="left",N=void 0;return C instanceof Text?(G<C.data.length?(J.setStart(C,G),J.setEnd(C,G+1)):(J.setStart(C,G-1),J.setEnd(C,G),D="right"),N=J.getBoundingClientRect()):(N=Q.domNode.getBoundingClientRect(),G>0&&(D="right")),{bottom:N.top+N.height,height:N.height,left:N[D],right:N[D],top:N.top,width:0}}},{key:"getNativeRange",value:function(){var h=document.getSelection();if(null==h||h.rangeCount<=0)return null;var v=h.getRangeAt(0);if(null==v)return null;var O=this.normalizeNative(v);return S.info("getNativeRange",O),O}},{key:"getRange",value:function(){var h=this.getNativeRange();return null==h?[null,null]:[this.normalizedToRange(h),h]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(h){var v=this,O=[[h.start.node,h.start.offset]];h.native.collapsed||O.push([h.end.node,h.end.offset]);var C=O.map(function(Q){var G=Ce(Q,2),T=G[0],V=G[1],J=ce.default.find(T,!0),X=J.offset(v.scroll);return 0===V?X:J instanceof ce.default.Container?X+J.length():X+J.index(T,V)}),x=Math.min(Math.max.apply(Math,M(C)),this.scroll.length()-1),L=Math.min.apply(Math,[x].concat(M(C)));return new y(L,x-L)}},{key:"normalizeNative",value:function(h){if(!p(this.root,h.startContainer)||!h.collapsed&&!p(this.root,h.endContainer))return null;var v={start:{node:h.startContainer,offset:h.startOffset},end:{node:h.endContainer,offset:h.endOffset},native:h};return[v.start,v.end].forEach(function(O){for(var C=O.node,x=O.offset;!(C instanceof Text)&&C.childNodes.length>0;)if(C.childNodes.length>x)C=C.childNodes[x],x=0;else{if(C.childNodes.length!==x)break;x=(C=C.lastChild)instanceof Text?C.data.length:C.childNodes.length+1}O.node=C,O.offset=x}),v}},{key:"rangeToNative",value:function(h){var v=this,O=h.collapsed?[h.index]:[h.index,h.index+h.length],C=[],x=this.scroll.length();return O.forEach(function(L,Q){L=Math.min(x-1,L);var T=v.scroll.leaf(L),V=Ce(T,2),X=V[1],q=V[0].position(X,0!==Q),ee=Ce(q,2);C.push(ee[0],X=ee[1])}),C.length<2&&(C=C.concat(C)),C}},{key:"scrollIntoView",value:function(h){var v=this.lastRange;if(null!=v){var O=this.getBounds(v.index,v.length);if(null!=O){var C=this.scroll.length()-1,x=this.scroll.line(Math.min(v.index,C)),Q=Ce(x,1)[0],G=Q;if(v.length>0){var T=this.scroll.line(Math.min(v.index+v.length,C));G=Ce(T,1)[0]}if(null!=Q&&null!=G){var J=h.getBoundingClientRect();O.top<J.top?h.scrollTop-=J.top-O.top:O.bottom>J.bottom&&(h.scrollTop+=O.bottom-J.bottom)}}}}},{key:"setNativeRange",value:function(h,v){var O=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h,C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:v,x=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(S.info("setNativeRange",h,v,O,C),null==h||null!=this.root.parentNode&&null!=h.parentNode&&null!=O.parentNode){var L=document.getSelection();if(null!=L)if(null!=h){this.hasFocus()||this.root.focus();var Q=(this.getNativeRange()||{}).native;if(null==Q||x||h!==Q.startContainer||v!==Q.startOffset||O!==Q.endContainer||C!==Q.endOffset){"BR"==h.tagName&&(v=[].indexOf.call(h.parentNode.childNodes,h),h=h.parentNode),"BR"==O.tagName&&(C=[].indexOf.call(O.parentNode.childNodes,O),O=O.parentNode);var G=document.createRange();G.setStart(h,v),G.setEnd(O,C),L.removeAllRanges(),L.addRange(G)}}else L.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(h){var v=arguments.length>1&&void 0!==arguments[1]&&arguments[1],O=arguments.length>2&&void 0!==arguments[2]?arguments[2]:H.default.sources.API;if("string"==typeof v&&(O=v,v=!1),S.info("setRange",h),null!=h){var C=this.rangeToNative(h);this.setNativeRange.apply(this,M(C).concat([v]))}else this.setNativeRange(null);this.update(O)}},{key:"update",value:function(){var h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H.default.sources.USER,v=this.lastRange,O=this.getRange(),C=Ce(O,2),L=C[1];if(this.lastRange=C[0],null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,Z.default)(v,this.lastRange)){var Q;!this.composing&&null!=L&&L.native.collapsed&&L.start.node!==this.cursor.textNode&&this.cursor.restore();var T,G=[H.default.events.SELECTION_CHANGE,(0,K.default)(this.lastRange),(0,K.default)(v),h];(Q=this.emitter).emit.apply(Q,[H.default.events.EDITOR_CHANGE].concat(G)),h!==H.default.sources.SILENT&&(T=this.emitter).emit.apply(T,G)}}}]),f}();function p(f,m){return m instanceof Text&&(m=m.parentNode),f.contains(m)}xe.Range=y,xe.default=w},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var Ce=function(){function H(F,k){for(var _=0;_<k.length;_++){var M=k[_];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(F,M.key,M)}}return function(F,k,_){return k&&H(F.prototype,k),_&&H(F,_),F}}(),P=function H(F,k,_){null===F&&(F=Function.prototype);var M=Object.getOwnPropertyDescriptor(F,k);if(void 0===M){var R=Object.getPrototypeOf(F);return null===R?void 0:H(R,k,_)}if("value"in M)return M.value;var S=M.get;return void 0===S?void 0:S.call(_)};var Y=function(H){function F(){return function K(H,F){if(!(H instanceof F))throw new TypeError("Cannot call a class as a function")}(this,F),function U(H,F){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!F||"object"!=typeof F&&"function"!=typeof F?H:F}(this,(F.__proto__||Object.getPrototypeOf(F)).apply(this,arguments))}return function Z(H,F){if("function"!=typeof F&&null!==F)throw new TypeError("Super expression must either be null or a function, not "+typeof F);H.prototype=Object.create(F&&F.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(H,F):H.__proto__=F)}(F,H),Ce(F,[{key:"insertInto",value:function(_,M){0===_.children.length?P(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"insertInto",this).call(this,_,M):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),F}(function c(H){return H&&H.__esModule?H:{default:H}}(ke(0)).default.Embed);Y.blotName="break",Y.tagName="BR",xe.default=Y},function(Ye,xe,ke){"use strict";var U,Ce=this&&this.__extends||(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,Y){Z.__proto__=Y}||function(Z,Y){for(var H in Y)Y.hasOwnProperty(H)&&(Z[H]=Y[H])},function(Z,Y){function H(){this.constructor=Z}U(Z,Y),Z.prototype=null===Y?Object.create(Y):(H.prototype=Y.prototype,new H)});Object.defineProperty(xe,"__esModule",{value:!0});var P=ke(44),ae=ke(30),ce=ke(1),c=function(U){function Z(Y){var H=U.call(this,Y)||this;return H.build(),H}return Ce(Z,U),Z.prototype.appendChild=function(Y){this.insertBefore(Y)},Z.prototype.attach=function(){U.prototype.attach.call(this),this.children.forEach(function(Y){Y.attach()})},Z.prototype.build=function(){var Y=this;this.children=new P.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(H){try{var F=K(H);Y.insertBefore(F,Y.children.head||void 0)}catch(k){if(k instanceof ce.ParchmentError)return;throw k}})},Z.prototype.deleteAt=function(Y,H){if(0===Y&&H===this.length())return this.remove();this.children.forEachAt(Y,H,function(F,k,_){F.deleteAt(k,_)})},Z.prototype.descendant=function(Y,H){var F=this.children.find(H),k=F[0],_=F[1];return null==Y.blotName&&Y(k)||null!=Y.blotName&&k instanceof Y?[k,_]:k instanceof Z?k.descendant(Y,_):[null,-1]},Z.prototype.descendants=function(Y,H,F){void 0===H&&(H=0),void 0===F&&(F=Number.MAX_VALUE);var k=[],_=F;return this.children.forEachAt(H,F,function(M,R,S){(null==Y.blotName&&Y(M)||null!=Y.blotName&&M instanceof Y)&&k.push(M),M instanceof Z&&(k=k.concat(M.descendants(Y,R,_))),_-=S}),k},Z.prototype.detach=function(){this.children.forEach(function(Y){Y.detach()}),U.prototype.detach.call(this)},Z.prototype.formatAt=function(Y,H,F,k){this.children.forEachAt(Y,H,function(_,M,R){_.formatAt(M,R,F,k)})},Z.prototype.insertAt=function(Y,H,F){var k=this.children.find(Y),_=k[0];if(_)_.insertAt(k[1],H,F);else{var R=null==F?ce.create("text",H):ce.create(H,F);this.appendChild(R)}},Z.prototype.insertBefore=function(Y,H){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some(function(F){return Y instanceof F}))throw new ce.ParchmentError("Cannot insert "+Y.statics.blotName+" into "+this.statics.blotName);Y.insertInto(this,H)},Z.prototype.length=function(){return this.children.reduce(function(Y,H){return Y+H.length()},0)},Z.prototype.moveChildren=function(Y,H){this.children.forEach(function(F){Y.insertBefore(F,H)})},Z.prototype.optimize=function(Y){if(U.prototype.optimize.call(this,Y),0===this.children.length)if(null!=this.statics.defaultChild){var H=ce.create(this.statics.defaultChild);this.appendChild(H),H.optimize(Y)}else this.remove()},Z.prototype.path=function(Y,H){void 0===H&&(H=!1);var F=this.children.find(Y,H),k=F[0],_=F[1],M=[[this,Y]];return k instanceof Z?M.concat(k.path(_,H)):(null!=k&&M.push([k,_]),M)},Z.prototype.removeChild=function(Y){this.children.remove(Y)},Z.prototype.replace=function(Y){Y instanceof Z&&Y.moveChildren(this),U.prototype.replace.call(this,Y)},Z.prototype.split=function(Y,H){if(void 0===H&&(H=!1),!H){if(0===Y)return this;if(Y===this.length())return this.next}var F=this.clone();return this.parent.insertBefore(F,this.next),this.children.forEachAt(Y,this.length(),function(k,_,M){k=k.split(_,H),F.appendChild(k)}),F},Z.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},Z.prototype.update=function(Y,H){var F=this,k=[],_=[];Y.forEach(function(M){M.target===F.domNode&&"childList"===M.type&&(k.push.apply(k,M.addedNodes),_.push.apply(_,M.removedNodes))}),_.forEach(function(M){if(!(null!=M.parentNode&&"IFRAME"!==M.tagName&&document.body.compareDocumentPosition(M)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var R=ce.find(M);null!=R&&(null==R.domNode.parentNode||R.domNode.parentNode===F.domNode)&&R.detach()}}),k.filter(function(M){return M.parentNode==F.domNode}).sort(function(M,R){return M===R?0:M.compareDocumentPosition(R)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(M){var R=null;null!=M.nextSibling&&(R=ce.find(M.nextSibling));var S=K(M);(S.next!=R||null==S.next)&&(null!=S.parent&&S.parent.removeChild(F),F.insertBefore(S,R||void 0))})},Z}(ae.default);function K(U){var Z=ce.find(U);if(null==Z)try{Z=ce.create(U)}catch{Z=ce.create(ce.Scope.INLINE),[].slice.call(U.childNodes).forEach(function(H){Z.domNode.appendChild(H)}),U.parentNode&&U.parentNode.replaceChild(Z.domNode,U),Z.attach()}return Z}xe.default=c},function(Ye,xe,ke){"use strict";var U,Ce=this&&this.__extends||(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,Y){Z.__proto__=Y}||function(Z,Y){for(var H in Y)Y.hasOwnProperty(H)&&(Z[H]=Y[H])},function(Z,Y){function H(){this.constructor=Z}U(Z,Y),Z.prototype=null===Y?Object.create(Y):(H.prototype=Y.prototype,new H)});Object.defineProperty(xe,"__esModule",{value:!0});var P=ke(12),ae=ke(31),ce=ke(17),c=ke(1),K=function(U){function Z(Y){var H=U.call(this,Y)||this;return H.attributes=new ae.default(H.domNode),H}return Ce(Z,U),Z.formats=function(Y){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?Y.tagName.toLowerCase():void 0)},Z.prototype.format=function(Y,H){var F=c.query(Y);F instanceof P.default?this.attributes.attribute(F,H):H&&null!=F&&(Y!==this.statics.blotName||this.formats()[Y]!==H)&&this.replaceWith(Y,H)},Z.prototype.formats=function(){var Y=this.attributes.values(),H=this.statics.formats(this.domNode);return null!=H&&(Y[this.statics.blotName]=H),Y},Z.prototype.replaceWith=function(Y,H){var F=U.prototype.replaceWith.call(this,Y,H);return this.attributes.copy(F),F},Z.prototype.update=function(Y,H){var F=this;U.prototype.update.call(this,Y,H),Y.some(function(k){return k.target===F.domNode&&"attributes"===k.type})&&this.attributes.build()},Z.prototype.wrap=function(Y,H){var F=U.prototype.wrap.call(this,Y,H);return F instanceof Z&&F.statics.scope===this.statics.scope&&this.attributes.move(F),F},Z}(ce.default);xe.default=K},function(Ye,xe,ke){"use strict";var c,Ce=this&&this.__extends||(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,U){K.__proto__=U}||function(K,U){for(var Z in U)U.hasOwnProperty(Z)&&(K[Z]=U[Z])},function(K,U){function Z(){this.constructor=K}c(K,U),K.prototype=null===U?Object.create(U):(Z.prototype=U.prototype,new Z)});Object.defineProperty(xe,"__esModule",{value:!0});var P=ke(30),ae=ke(1),ce=function(c){function K(){return null!==c&&c.apply(this,arguments)||this}return Ce(K,c),K.value=function(U){return!0},K.prototype.index=function(U,Z){return this.domNode===U||this.domNode.compareDocumentPosition(U)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(Z,1):-1},K.prototype.position=function(U,Z){var Y=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return U>0&&(Y+=1),[this.parent.domNode,Y]},K.prototype.value=function(){var U;return(U={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,U},K.scope=ae.Scope.INLINE_BLOT,K}(P.default);xe.default=ce},function(Ye,xe,ke){var Ce=ke(11),P=ke(3),ae={attributes:{compose:function(c,K,U){"object"!=typeof c&&(c={}),"object"!=typeof K&&(K={});var Z=P(!0,{},K);for(var Y in U||(Z=Object.keys(Z).reduce(function(H,F){return null!=Z[F]&&(H[F]=Z[F]),H},{})),c)void 0!==c[Y]&&void 0===K[Y]&&(Z[Y]=c[Y]);return Object.keys(Z).length>0?Z:void 0},diff:function(c,K){"object"!=typeof c&&(c={}),"object"!=typeof K&&(K={});var U=Object.keys(c).concat(Object.keys(K)).reduce(function(Z,Y){return Ce(c[Y],K[Y])||(Z[Y]=void 0===K[Y]?null:K[Y]),Z},{});return Object.keys(U).length>0?U:void 0},transform:function(c,K,U){if("object"!=typeof c)return K;if("object"==typeof K){if(!U)return K;var Z=Object.keys(K).reduce(function(Y,H){return void 0===c[H]&&(Y[H]=K[H]),Y},{});return Object.keys(Z).length>0?Z:void 0}}},iterator:function(c){return new ce(c)},length:function(c){return"number"==typeof c.delete?c.delete:"number"==typeof c.retain?c.retain:"string"==typeof c.insert?c.insert.length:1}};function ce(c){this.ops=c,this.index=0,this.offset=0}ce.prototype.hasNext=function(){return this.peekLength()<1/0},ce.prototype.next=function(c){c||(c=1/0);var K=this.ops[this.index];if(K){var U=this.offset,Z=ae.length(K);if(c>=Z-U?(c=Z-U,this.index+=1,this.offset=0):this.offset+=c,"number"==typeof K.delete)return{delete:c};var Y={};return K.attributes&&(Y.attributes=K.attributes),"number"==typeof K.retain?Y.retain=c:Y.insert="string"==typeof K.insert?K.insert.substr(U,c):K.insert,Y}return{retain:1/0}},ce.prototype.peek=function(){return this.ops[this.index]},ce.prototype.peekLength=function(){return this.ops[this.index]?ae.length(this.ops[this.index])-this.offset:1/0},ce.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},ce.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var c=this.offset,K=this.index,U=this.next(),Z=this.ops.slice(this.index);return this.offset=c,this.index=K,[U].concat(Z)}return[]},Ye.exports=ae},function(Ye,xe){var ke=function(){"use strict";function Ce(F,k){return null!=k&&F instanceof k}var P,ae,ce;try{P=Map}catch{P=function(){}}try{ae=Set}catch{ae=function(){}}try{ce=Promise}catch{ce=function(){}}function c(F,k,_,M,R){"object"==typeof k&&(_=k.depth,M=k.prototype,R=k.includeNonEnumerable,k=k.circular);var S=[],y=[],w=typeof Buffer<"u";return typeof k>"u"&&(k=!0),typeof _>"u"&&(_=1/0),function p(f,m){if(null===f)return null;if(0===m)return f;var h,v;if("object"!=typeof f)return f;if(Ce(f,P))h=new P;else if(Ce(f,ae))h=new ae;else if(Ce(f,ce))h=new ce(function(J,X){f.then(function(q){J(p(q,m-1))},function(q){X(p(q,m-1))})});else if(c.__isArray(f))h=[];else if(c.__isRegExp(f))h=new RegExp(f.source,H(f)),f.lastIndex&&(h.lastIndex=f.lastIndex);else if(c.__isDate(f))h=new Date(f.getTime());else{if(w&&Buffer.isBuffer(f))return h=Buffer.allocUnsafe?Buffer.allocUnsafe(f.length):new Buffer(f.length),f.copy(h),h;Ce(f,Error)?h=Object.create(f):typeof M>"u"?(v=Object.getPrototypeOf(f),h=Object.create(v)):(h=Object.create(M),v=M)}if(k){var O=S.indexOf(f);if(-1!=O)return y[O];S.push(f),y.push(h)}for(var C in Ce(f,P)&&f.forEach(function(J,X){var q=p(X,m-1),ee=p(J,m-1);h.set(q,ee)}),Ce(f,ae)&&f.forEach(function(J){var X=p(J,m-1);h.add(X)}),f){var x;v&&(x=Object.getOwnPropertyDescriptor(v,C)),(!x||null!=x.set)&&(h[C]=p(f[C],m-1))}if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(f);for(C=0;C<L.length;C++){var Q=L[C];(G=Object.getOwnPropertyDescriptor(f,Q))&&!G.enumerable&&!R||(h[Q]=p(f[Q],m-1),G.enumerable||Object.defineProperty(h,Q,{enumerable:!1}))}}if(R){var T=Object.getOwnPropertyNames(f);for(C=0;C<T.length;C++){var G,V=T[C];(G=Object.getOwnPropertyDescriptor(f,V))&&G.enumerable||(h[V]=p(f[V],m-1),Object.defineProperty(h,V,{enumerable:!1}))}}return h}(F,_)}function K(F){return Object.prototype.toString.call(F)}function H(F){var k="";return F.global&&(k+="g"),F.ignoreCase&&(k+="i"),F.multiline&&(k+="m"),k}return c.clonePrototype=function(k){if(null===k)return null;var _=function(){};return _.prototype=k,new _},c.__objToStr=K,c.__isDate=function U(F){return"object"==typeof F&&"[object Date]"===K(F)},c.__isArray=function Z(F){return"object"==typeof F&&"[object Array]"===K(F)},c.__isRegExp=function Y(F){return"object"==typeof F&&"[object RegExp]"===K(F)},c.__getRegExpFlags=H,c}();"object"==typeof Ye&&Ye.exports&&(Ye.exports=ke)},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var Ce=function(v,O){if(Array.isArray(v))return v;if(Symbol.iterator in Object(v))return function h(v,O){var C=[],x=!0,L=!1,Q=void 0;try{for(var T,G=v[Symbol.iterator]();!(x=(T=G.next()).done)&&(C.push(T.value),!O||C.length!==O);x=!0);}catch(V){L=!0,Q=V}finally{try{!x&&G.return&&G.return()}finally{if(L)throw Q}}return C}(v,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P=function(){function h(v,O){for(var C=0;C<O.length;C++){var x=O[C];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(v,x.key,x)}}return function(v,O,C){return O&&h(v.prototype,O),C&&h(v,C),v}}(),ae=function h(v,O,C){null===v&&(v=Function.prototype);var x=Object.getOwnPropertyDescriptor(v,O);if(void 0===x){var L=Object.getPrototypeOf(v);return null===L?void 0:h(L,O,C)}if("value"in x)return x.value;var Q=x.get;return void 0===Q?void 0:Q.call(C)},c=S(ke(0)),U=S(ke(8)),Z=ke(4),Y=S(Z),F=S(ke(16)),_=S(ke(13)),R=S(ke(25));function S(h){return h&&h.__esModule?h:{default:h}}function f(h){return h instanceof Y.default||h instanceof Z.BlockEmbed}var m=function(h){function v(O,C){!function y(h,v){if(!(h instanceof v))throw new TypeError("Cannot call a class as a function")}(this,v);var x=function w(h,v){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!v||"object"!=typeof v&&"function"!=typeof v?h:v}(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,O));return x.emitter=C.emitter,Array.isArray(C.whitelist)&&(x.whitelist=C.whitelist.reduce(function(L,Q){return L[Q]=!0,L},{})),x.domNode.addEventListener("DOMNodeInserted",function(){}),x.optimize(),x.enable(),x}return function p(h,v){if("function"!=typeof v&&null!==v)throw new TypeError("Super expression must either be null or a function, not "+typeof v);h.prototype=Object.create(v&&v.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(h,v):h.__proto__=v)}(v,h),P(v,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(C,x){var L=this.line(C),Q=Ce(L,2),G=Q[0],T=Q[1],V=this.line(C+x),X=Ce(V,1)[0];if(ae(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"deleteAt",this).call(this,C,x),null!=X&&G!==X&&T>0){if(G instanceof Z.BlockEmbed||X instanceof Z.BlockEmbed)return void this.optimize();if(G instanceof _.default){var q=G.newlineIndex(G.length(),!0);if(q>-1&&(G=G.split(q+1))===X)return void this.optimize()}else if(X instanceof _.default){var ee=X.newlineIndex(0);ee>-1&&X.split(ee+1)}G.moveChildren(X,X.children.head instanceof F.default?null:X.children.head),G.remove()}this.optimize()}},{key:"enable",value:function(){this.domNode.setAttribute("contenteditable",!(arguments.length>0&&void 0!==arguments[0])||arguments[0])}},{key:"formatAt",value:function(C,x,L,Q){null!=this.whitelist&&!this.whitelist[L]||(ae(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"formatAt",this).call(this,C,x,L,Q),this.optimize())}},{key:"insertAt",value:function(C,x,L){if(null==L||null==this.whitelist||this.whitelist[x]){if(C>=this.length())if(null==L||null==c.default.query(x,c.default.Scope.BLOCK)){var Q=c.default.create(this.statics.defaultChild);this.appendChild(Q),null==L&&x.endsWith("\n")&&(x=x.slice(0,-1)),Q.insertAt(0,x,L)}else{var G=c.default.create(x,L);this.appendChild(G)}else ae(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertAt",this).call(this,C,x,L);this.optimize()}}},{key:"insertBefore",value:function(C,x){if(C.statics.scope===c.default.Scope.INLINE_BLOT){var L=c.default.create(this.statics.defaultChild);L.appendChild(C),C=L}ae(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertBefore",this).call(this,C,x)}},{key:"leaf",value:function(C){return this.path(C).pop()||[null,-1]}},{key:"line",value:function(C){return C===this.length()?this.line(C-1):this.descendant(f,C)}},{key:"lines",value:function(){return function Q(G,T,V){var J=[],X=V;return G.children.forEachAt(T,V,function(q,ee,j){f(q)?J.push(q):q instanceof c.default.Container&&(J=J.concat(Q(q,ee,X))),X-=j}),J}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}},{key:"optimize",value:function(){var C=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(ae(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,C,x),C.length>0&&this.emitter.emit(U.default.events.SCROLL_OPTIMIZE,C,x))}},{key:"path",value:function(C){return ae(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"path",this).call(this,C).slice(1)}},{key:"update",value:function(C){if(!0!==this.batch){var x=U.default.sources.USER;"string"==typeof C&&(x=C),Array.isArray(C)||(C=this.observer.takeRecords()),C.length>0&&this.emitter.emit(U.default.events.SCROLL_BEFORE_UPDATE,x,C),ae(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"update",this).call(this,C.concat([])),C.length>0&&this.emitter.emit(U.default.events.SCROLL_UPDATE,x,C)}}}]),v}(c.default.Scroll);m.blotName="scroll",m.className="ql-editor",m.tagName="DIV",m.defaultChild="block",m.allowedChildren=[Y.default,Z.BlockEmbed,R.default],xe.default=m},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0}),xe.SHORTKEY=xe.default=void 0;var Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(N){return typeof N}:function(N){return N&&"function"==typeof Symbol&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},P=function(re,ue){if(Array.isArray(re))return re;if(Symbol.iterator in Object(re))return function N(re,ue){var ve=[],Ae=!0,Te=!1,Re=void 0;try{for(var Ie,Me=re[Symbol.iterator]();!(Ae=(Ie=Me.next()).done)&&(ve.push(Ie.value),!ue||ve.length!==ue);Ae=!0);}catch(Ge){Te=!0,Re=Ge}finally{try{!Ae&&Me.return&&Me.return()}finally{if(Te)throw Re}}return ve}(re,ue);throw new TypeError("Invalid attempt to destructure non-iterable instance")},ae=function(){function N(re,ue){for(var ve=0;ve<ue.length;ve++){var Ae=ue[ve];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(re,Ae.key,Ae)}}return function(re,ue,ve){return ue&&N(re.prototype,ue),ve&&N(re,ve),re}}(),c=h(ke(21)),U=h(ke(11)),Y=h(ke(3)),F=h(ke(2)),_=h(ke(20)),R=h(ke(0)),y=h(ke(5)),p=h(ke(10)),m=h(ke(9));function h(N){return N&&N.__esModule?N:{default:N}}function v(N,re,ue){return re in N?Object.defineProperty(N,re,{value:ue,enumerable:!0,configurable:!0,writable:!0}):N[re]=ue,N}var L=(0,p.default)("quill:keyboard"),Q=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",G=function(N){function re(ue,ve){!function O(N,re){if(!(N instanceof re))throw new TypeError("Cannot call a class as a function")}(this,re);var Ae=function C(N,re){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!re||"object"!=typeof re&&"function"!=typeof re?N:re}(this,(re.__proto__||Object.getPrototypeOf(re)).call(this,ue,ve));return Ae.bindings={},Object.keys(Ae.options.bindings).forEach(function(Te){"list autofill"===Te&&null!=ue.scroll.whitelist&&!ue.scroll.whitelist.list||Ae.options.bindings[Te]&&Ae.addBinding(Ae.options.bindings[Te])}),Ae.addBinding({key:re.keys.ENTER,shiftKey:null},q),Ae.addBinding({key:re.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(Ae.addBinding({key:re.keys.BACKSPACE},{collapsed:!0},V),Ae.addBinding({key:re.keys.DELETE},{collapsed:!0},J)):(Ae.addBinding({key:re.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},V),Ae.addBinding({key:re.keys.DELETE},{collapsed:!0,suffix:/^.?$/},J)),Ae.addBinding({key:re.keys.BACKSPACE},{collapsed:!1},X),Ae.addBinding({key:re.keys.DELETE},{collapsed:!1},X),Ae.addBinding({key:re.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},V),Ae.listen(),Ae}return function x(N,re){if("function"!=typeof re&&null!==re)throw new TypeError("Super expression must either be null or a function, not "+typeof re);N.prototype=Object.create(re&&re.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),re&&(Object.setPrototypeOf?Object.setPrototypeOf(N,re):N.__proto__=re)}(re,N),ae(re,null,[{key:"match",value:function(ve,Ae){return Ae=D(Ae),!["altKey","ctrlKey","metaKey","shiftKey"].some(function(Te){return!!Ae[Te]!==ve[Te]&&null!==Ae[Te]})&&Ae.key===(ve.which||ve.keyCode)}}]),ae(re,[{key:"addBinding",value:function(ve){var Ae=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Te=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Re=D(ve);if(null==Re||null==Re.key)return L.warn("Attempted to add invalid keyboard binding",Re);"function"==typeof Ae&&(Ae={handler:Ae}),"function"==typeof Te&&(Te={handler:Te}),Re=(0,Y.default)(Re,Ae,Te),this.bindings[Re.key]=this.bindings[Re.key]||[],this.bindings[Re.key].push(Re)}},{key:"listen",value:function(){var ve=this;this.quill.root.addEventListener("keydown",function(Ae){if(!Ae.defaultPrevented){var Re=(ve.bindings[Ae.which||Ae.keyCode]||[]).filter(function(St){return re.match(Ae,St)});if(0!==Re.length){var Me=ve.quill.getSelection();if(null!=Me&&ve.quill.hasFocus()){var Ie=ve.quill.getLine(Me.index),Ge=P(Ie,2),oe=Ge[0],pe=Ge[1],ge=ve.quill.getLeaf(Me.index),be=P(ge,2),ie=be[0],se=be[1],de=0===Me.length?[ie,se]:ve.quill.getLeaf(Me.index+Me.length),_e=P(de,2),$e=_e[0],Xe=_e[1],ut=ie instanceof R.default.Text?ie.value().slice(0,se):"",mt=$e instanceof R.default.Text?$e.value().slice(Xe):"",ct={collapsed:0===Me.length,empty:0===Me.length&&oe.length()<=1,format:ve.quill.getFormat(Me),offset:pe,prefix:ut,suffix:mt};Re.some(function(St){if(null!=St.collapsed&&St.collapsed!==ct.collapsed||null!=St.empty&&St.empty!==ct.empty||null!=St.offset&&St.offset!==ct.offset)return!1;if(Array.isArray(St.format)){if(St.format.every(function(Et){return null==ct.format[Et]}))return!1}else if("object"===Ce(St.format)&&!Object.keys(St.format).every(function(Et){return!0===St.format[Et]?null!=ct.format[Et]:!1===St.format[Et]?null==ct.format[Et]:(0,U.default)(St.format[Et],ct.format[Et])}))return!1;return!(null!=St.prefix&&!St.prefix.test(ct.prefix)||null!=St.suffix&&!St.suffix.test(ct.suffix))&&!0!==St.handler.call(ve,Me,ct)})&&Ae.preventDefault()}}}})}}]),re}(m.default);function T(N,re){var ue;return v(ue={key:N,shiftKey:re,altKey:null},N===G.keys.LEFT?"prefix":"suffix",/^$/),v(ue,"handler",function(Te){var Re=Te.index;N===G.keys.RIGHT&&(Re+=Te.length+1);var Me=this.quill.getLeaf(Re);return!(P(Me,1)[0]instanceof R.default.Embed&&(N===G.keys.LEFT?re?this.quill.setSelection(Te.index-1,Te.length+1,y.default.sources.USER):this.quill.setSelection(Te.index-1,y.default.sources.USER):re?this.quill.setSelection(Te.index,Te.length+1,y.default.sources.USER):this.quill.setSelection(Te.index+Te.length+1,y.default.sources.USER),1))}),ue}function V(N,re){if(!(0===N.index||this.quill.getLength()<=1)){var ue=this.quill.getLine(N.index),Ae=P(ue,1)[0],Te={};if(0===re.offset){var Re=this.quill.getLine(N.index-1),Ie=P(Re,1)[0];if(null!=Ie&&Ie.length()>1){var Ge=Ae.formats(),oe=this.quill.getFormat(N.index-1,1);Te=_.default.attributes.diff(Ge,oe)||{}}}var pe=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(re.prefix)?2:1;this.quill.deleteText(N.index-pe,pe,y.default.sources.USER),Object.keys(Te).length>0&&this.quill.formatLine(N.index-pe,pe,Te,y.default.sources.USER),this.quill.focus()}}function J(N,re){var ue=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(re.suffix)?2:1;if(!(N.index>=this.quill.getLength()-ue)){var ve={},Ae=0,Te=this.quill.getLine(N.index),Me=P(Te,1)[0];if(re.offset>=Me.length()-1){var Ie=this.quill.getLine(N.index+1),oe=P(Ie,1)[0];if(oe){var pe=Me.formats(),ge=this.quill.getFormat(N.index,1);ve=_.default.attributes.diff(pe,ge)||{},Ae=oe.length()}}this.quill.deleteText(N.index,ue,y.default.sources.USER),Object.keys(ve).length>0&&this.quill.formatLine(N.index+Ae-1,ue,ve,y.default.sources.USER)}}function X(N){var re=this.quill.getLines(N),ue={};if(re.length>1){var ve=re[0].formats(),Ae=re[re.length-1].formats();ue=_.default.attributes.diff(Ae,ve)||{}}this.quill.deleteText(N,y.default.sources.USER),Object.keys(ue).length>0&&this.quill.formatLine(N.index,1,ue,y.default.sources.USER),this.quill.setSelection(N.index,y.default.sources.SILENT),this.quill.focus()}function q(N,re){var ue=this;N.length>0&&this.quill.scroll.deleteAt(N.index,N.length);var ve=Object.keys(re.format).reduce(function(Ae,Te){return R.default.query(Te,R.default.Scope.BLOCK)&&!Array.isArray(re.format[Te])&&(Ae[Te]=re.format[Te]),Ae},{});this.quill.insertText(N.index,"\n",ve,y.default.sources.USER),this.quill.setSelection(N.index+1,y.default.sources.SILENT),this.quill.focus(),Object.keys(re.format).forEach(function(Ae){null==ve[Ae]&&(Array.isArray(re.format[Ae])||"link"!==Ae&&ue.quill.format(Ae,re.format[Ae],y.default.sources.USER))})}function ee(N){return{key:G.keys.TAB,shiftKey:!N,format:{"code-block":!0},handler:function(ue){var ve=R.default.query("code-block"),Ae=ue.index,Te=ue.length,Re=this.quill.scroll.descendant(ve,Ae),Me=P(Re,2),Ie=Me[0],Ge=Me[1];if(null!=Ie){var oe=this.quill.getIndex(Ie),pe=Ie.newlineIndex(Ge,!0)+1,ge=Ie.newlineIndex(oe+Ge+Te),be=Ie.domNode.textContent.slice(pe,ge).split("\n");Ge=0,be.forEach(function(ie,se){N?(Ie.insertAt(pe+Ge,ve.TAB),Ge+=ve.TAB.length,0===se?Ae+=ve.TAB.length:Te+=ve.TAB.length):ie.startsWith(ve.TAB)&&(Ie.deleteAt(pe+Ge,ve.TAB.length),Ge-=ve.TAB.length,0===se?Ae-=ve.TAB.length:Te-=ve.TAB.length),Ge+=ie.length+1}),this.quill.update(y.default.sources.USER),this.quill.setSelection(Ae,Te,y.default.sources.SILENT)}}}}function j(N){return{key:N[0].toUpperCase(),shortKey:!0,handler:function(ue,ve){this.quill.format(N,!ve.format[N],y.default.sources.USER)}}}function D(N){if("string"==typeof N||"number"==typeof N)return D({key:N});if("object"===(typeof N>"u"?"undefined":Ce(N))&&(N=(0,c.default)(N,!1)),"string"==typeof N.key)if(null!=G.keys[N.key.toUpperCase()])N.key=G.keys[N.key.toUpperCase()];else{if(1!==N.key.length)return null;N.key=N.key.toUpperCase().charCodeAt(0)}return N.shortKey&&(N[Q]=N.shortKey,delete N.shortKey),N}G.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},G.DEFAULTS={bindings:{bold:j("bold"),italic:j("italic"),underline:j("underline"),indent:{key:G.keys.TAB,format:["blockquote","indent","list"],handler:function(re,ue){if(ue.collapsed&&0!==ue.offset)return!0;this.quill.format("indent","+1",y.default.sources.USER)}},outdent:{key:G.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(re,ue){if(ue.collapsed&&0!==ue.offset)return!0;this.quill.format("indent","-1",y.default.sources.USER)}},"outdent backspace":{key:G.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(re,ue){null!=ue.format.indent?this.quill.format("indent","-1",y.default.sources.USER):null!=ue.format.list&&this.quill.format("list",!1,y.default.sources.USER)}},"indent code-block":ee(!0),"outdent code-block":ee(!1),"remove tab":{key:G.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(re){this.quill.deleteText(re.index-1,1,y.default.sources.USER)}},tab:{key:G.keys.TAB,handler:function(re){this.quill.history.cutoff();var ue=(new F.default).retain(re.index).delete(re.length).insert("\t");this.quill.updateContents(ue,y.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(re.index+1,y.default.sources.SILENT)}},"list empty enter":{key:G.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(re,ue){this.quill.format("list",!1,y.default.sources.USER),ue.format.indent&&this.quill.format("indent",!1,y.default.sources.USER)}},"checklist enter":{key:G.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(re){var ue=this.quill.getLine(re.index),ve=P(ue,2),Ae=ve[0],Te=ve[1],Re=(0,Y.default)({},Ae.formats(),{list:"checked"}),Me=(new F.default).retain(re.index).insert("\n",Re).retain(Ae.length()-Te-1).retain(1,{list:"unchecked"});this.quill.updateContents(Me,y.default.sources.USER),this.quill.setSelection(re.index+1,y.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:G.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(re,ue){var ve=this.quill.getLine(re.index),Ae=P(ve,2),Te=Ae[0],Re=Ae[1],Me=(new F.default).retain(re.index).insert("\n",ue.format).retain(Te.length()-Re-1).retain(1,{header:null});this.quill.updateContents(Me,y.default.sources.USER),this.quill.setSelection(re.index+1,y.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(re,ue){var ve=ue.prefix.length,Ae=this.quill.getLine(re.index),Te=P(Ae,2),Re=Te[0],Me=Te[1];if(Me>ve)return!0;var Ie=void 0;switch(ue.prefix.trim()){case"[]":case"[ ]":Ie="unchecked";break;case"[x]":Ie="checked";break;case"-":case"*":Ie="bullet";break;default:Ie="ordered"}this.quill.insertText(re.index," ",y.default.sources.USER),this.quill.history.cutoff();var Ge=(new F.default).retain(re.index-Me).delete(ve+1).retain(Re.length()-2-Me).retain(1,{list:Ie});this.quill.updateContents(Ge,y.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(re.index-ve,y.default.sources.SILENT)}},"code exit":{key:G.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(re){var ue=this.quill.getLine(re.index),ve=P(ue,2),Ae=ve[0],Te=ve[1],Re=(new F.default).retain(re.index+Ae.length()-Te-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Re,y.default.sources.USER)}},"embed left":T(G.keys.LEFT,!1),"embed left shift":T(G.keys.LEFT,!0),"embed right":T(G.keys.RIGHT,!1),"embed right shift":T(G.keys.RIGHT,!0)}},xe.default=G,xe.SHORTKEY=Q},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var Ce=function(M,R){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return function _(M,R){var S=[],y=!0,w=!1,p=void 0;try{for(var m,f=M[Symbol.iterator]();!(y=(m=f.next()).done)&&(S.push(m.value),!R||S.length!==R);y=!0);}catch(h){w=!0,p=h}finally{try{!y&&f.return&&f.return()}finally{if(w)throw p}}return S}(M,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P=function _(M,R,S){null===M&&(M=Function.prototype);var y=Object.getOwnPropertyDescriptor(M,R);if(void 0===y){var w=Object.getPrototypeOf(M);return null===w?void 0:_(w,R,S)}if("value"in y)return y.value;var p=y.get;return void 0===p?void 0:p.call(S)},ae=function(){function _(M,R){for(var S=0;S<R.length;S++){var y=R[S];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(M,y.key,y)}}return function(M,R,S){return R&&_(M.prototype,R),S&&_(M,S),M}}(),c=Z(ke(0)),U=Z(ke(7));function Z(_){return _&&_.__esModule?_:{default:_}}var k=function(_){function M(R,S){!function Y(_,M){if(!(_ instanceof M))throw new TypeError("Cannot call a class as a function")}(this,M);var y=function H(_,M){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!M||"object"!=typeof M&&"function"!=typeof M?_:M}(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,R));return y.selection=S,y.textNode=document.createTextNode(M.CONTENTS),y.domNode.appendChild(y.textNode),y._length=0,y}return function F(_,M){if("function"!=typeof M&&null!==M)throw new TypeError("Super expression must either be null or a function, not "+typeof M);_.prototype=Object.create(M&&M.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(_,M):_.__proto__=M)}(M,_),ae(M,null,[{key:"value",value:function(){}}]),ae(M,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(S,y){if(0!==this._length)return P(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"format",this).call(this,S,y);for(var w=this,p=0;null!=w&&w.statics.scope!==c.default.Scope.BLOCK_BLOT;)p+=w.offset(w.parent),w=w.parent;null!=w&&(this._length=M.CONTENTS.length,w.optimize(),w.formatAt(p,M.CONTENTS.length,S,y),this._length=0)}},{key:"index",value:function(S,y){return S===this.textNode?0:P(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"index",this).call(this,S,y)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){P(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var S=this.textNode,y=this.selection.getNativeRange(),w=void 0,p=void 0,f=void 0;if(null!=y&&y.start.node===S&&y.end.node===S){var m=[S,y.start.offset,y.end.offset];w=m[0],p=m[1],f=m[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==M.CONTENTS){var h=this.textNode.data.split(M.CONTENTS).join("");this.next instanceof U.default?(w=this.next.domNode,this.next.insertAt(0,h),this.textNode.data=M.CONTENTS):(this.textNode.data=h,this.parent.insertBefore(c.default.create(this.textNode),this),this.textNode=document.createTextNode(M.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=p){var v=[p,f].map(function(C){return Math.max(0,Math.min(w.data.length,C-1))}),O=Ce(v,2);return{startNode:w,startOffset:p=O[0],endNode:w,endOffset:f=O[1]}}}}},{key:"update",value:function(S,y){var w=this;if(S.some(function(f){return"characterData"===f.type&&f.target===w.textNode})){var p=this.restore();p&&(y.range=p)}}},{key:"value",value:function(){return""}}]),M}(c.default.Embed);k.blotName="cursor",k.className="ql-cursor",k.tagName="span",k.CONTENTS="\ufeff",xe.default=k},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var P=c(ke(0)),ae=ke(4),ce=c(ae);function c(H){return H&&H.__esModule?H:{default:H}}var Y=function(H){function F(){return function K(H,F){if(!(H instanceof F))throw new TypeError("Cannot call a class as a function")}(this,F),function U(H,F){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!F||"object"!=typeof F&&"function"!=typeof F?H:F}(this,(F.__proto__||Object.getPrototypeOf(F)).apply(this,arguments))}return function Z(H,F){if("function"!=typeof F&&null!==F)throw new TypeError("Super expression must either be null or a function, not "+typeof F);H.prototype=Object.create(F&&F.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(H,F):H.__proto__=F)}(F,H),F}(P.default.Container);Y.allowedChildren=[ce.default,ae.BlockEmbed,Y],xe.default=Y},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0}),xe.ColorStyle=xe.ColorClass=xe.ColorAttributor=void 0;var Ce=function(){function k(_,M){for(var R=0;R<M.length;R++){var S=M[R];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(_,S.key,S)}}return function(_,M,R){return M&&k(_.prototype,M),R&&k(_,R),_}}(),P=function k(_,M,R){null===_&&(_=Function.prototype);var S=Object.getOwnPropertyDescriptor(_,M);if(void 0===S){var y=Object.getPrototypeOf(_);return null===y?void 0:k(y,M,R)}if("value"in S)return S.value;var w=S.get;return void 0===w?void 0:w.call(R)},ce=function c(k){return k&&k.__esModule?k:{default:k}}(ke(0));var Y=function(k){function _(){return function K(k,_){if(!(k instanceof _))throw new TypeError("Cannot call a class as a function")}(this,_),function U(k,_){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||"object"!=typeof _&&"function"!=typeof _?k:_}(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return function Z(k,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function, not "+typeof _);k.prototype=Object.create(_&&_.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(k,_):k.__proto__=_)}(_,k),Ce(_,[{key:"value",value:function(R){var S=P(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"value",this).call(this,R);return S.startsWith("rgb(")?"#"+(S=S.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map(function(y){return("00"+parseInt(y).toString(16)).slice(-2)}).join(""):S}}]),_}(ce.default.Attributor.Style),H=new ce.default.Attributor.Class("color","ql-color",{scope:ce.default.Scope.INLINE}),F=new Y("color","color",{scope:ce.default.Scope.INLINE});xe.ColorAttributor=Y,xe.ColorClass=H,xe.ColorStyle=F},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0}),xe.sanitize=xe.default=void 0;var Ce=function(){function F(k,_){for(var M=0;M<_.length;M++){var R=_[M];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(k,R.key,R)}}return function(k,_,M){return _&&F(k.prototype,_),M&&F(k,M),k}}(),P=function F(k,_,M){null===k&&(k=Function.prototype);var R=Object.getOwnPropertyDescriptor(k,_);if(void 0===R){var S=Object.getPrototypeOf(k);return null===S?void 0:F(S,_,M)}if("value"in R)return R.value;var y=R.get;return void 0===y?void 0:y.call(M)};var Y=function(F){function k(){return function K(F,k){if(!(F instanceof k))throw new TypeError("Cannot call a class as a function")}(this,k),function U(F,k){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!k||"object"!=typeof k&&"function"!=typeof k?F:k}(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return function Z(F,k){if("function"!=typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function, not "+typeof k);F.prototype=Object.create(k&&k.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(F,k):F.__proto__=k)}(k,F),Ce(k,[{key:"format",value:function(M,R){if(M!==this.statics.blotName||!R)return P(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"format",this).call(this,M,R);R=this.constructor.sanitize(R),this.domNode.setAttribute("href",R)}}],[{key:"create",value:function(M){var R=P(k.__proto__||Object.getPrototypeOf(k),"create",this).call(this,M);return M=this.sanitize(M),R.setAttribute("href",M),R.setAttribute("rel","noopener noreferrer"),R.setAttribute("target","_blank"),R}},{key:"formats",value:function(M){return M.getAttribute("href")}},{key:"sanitize",value:function(M){return H(M,this.PROTOCOL_WHITELIST)?M:this.SANITIZED_URL}}]),k}(function c(F){return F&&F.__esModule?F:{default:F}}(ke(6)).default);function H(F,k){var _=document.createElement("a");_.href=F;var M=_.href.slice(0,_.href.indexOf(":"));return k.indexOf(M)>-1}Y.blotName="link",Y.tagName="A",Y.SANITIZED_URL="about:blank",Y.PROTOCOL_WHITELIST=["http","https","mailto","tel"],xe.default=Y,xe.sanitize=H},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(k){return typeof k}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},P=function(){function k(_,M){for(var R=0;R<M.length;R++){var S=M[R];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(_,S.key,S)}}return function(_,M,R){return M&&k(_.prototype,M),R&&k(_,R),_}}(),ce=U(ke(23)),K=U(ke(107));function U(k){return k&&k.__esModule?k:{default:k}}var Y=0;function H(k,_){k.setAttribute(_,"true"!==k.getAttribute(_))}var F=function(){function k(_){var M=this;(function Z(k,_){if(!(k instanceof _))throw new TypeError("Cannot call a class as a function")})(this,k),this.select=_,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){M.togglePicker()}),this.label.addEventListener("keydown",function(R){switch(R.keyCode){case ce.default.keys.ENTER:M.togglePicker();break;case ce.default.keys.ESCAPE:M.escape(),R.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}return P(k,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),H(this.label,"aria-expanded"),H(this.options,"aria-hidden")}},{key:"buildItem",value:function(M){var R=this,S=document.createElement("span");return S.tabIndex="0",S.setAttribute("role","button"),S.classList.add("ql-picker-item"),M.hasAttribute("value")&&S.setAttribute("data-value",M.getAttribute("value")),M.textContent&&S.setAttribute("data-label",M.textContent),S.addEventListener("click",function(){R.selectItem(S,!0)}),S.addEventListener("keydown",function(y){switch(y.keyCode){case ce.default.keys.ENTER:R.selectItem(S,!0),y.preventDefault();break;case ce.default.keys.ESCAPE:R.escape(),y.preventDefault()}}),S}},{key:"buildLabel",value:function(){var M=document.createElement("span");return M.classList.add("ql-picker-label"),M.innerHTML=K.default,M.tabIndex="0",M.setAttribute("role","button"),M.setAttribute("aria-expanded","false"),this.container.appendChild(M),M}},{key:"buildOptions",value:function(){var M=this,R=document.createElement("span");R.classList.add("ql-picker-options"),R.setAttribute("aria-hidden","true"),R.tabIndex="-1",R.id="ql-picker-options-"+Y,Y+=1,this.label.setAttribute("aria-controls",R.id),this.options=R,[].slice.call(this.select.options).forEach(function(S){var y=M.buildItem(S);R.appendChild(y),!0===S.selected&&M.selectItem(y)}),this.container.appendChild(R)}},{key:"buildPicker",value:function(){var M=this;[].slice.call(this.select.attributes).forEach(function(R){M.container.setAttribute(R.name,R.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var M=this;this.close(),setTimeout(function(){return M.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(M){var R=arguments.length>1&&void 0!==arguments[1]&&arguments[1],S=this.container.querySelector(".ql-selected");if(M!==S&&(S?.classList.remove("ql-selected"),null!=M&&(M.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(M.parentNode.children,M),M.hasAttribute("data-value")?this.label.setAttribute("data-value",M.getAttribute("data-value")):this.label.removeAttribute("data-value"),M.hasAttribute("data-label")?this.label.setAttribute("data-label",M.getAttribute("data-label")):this.label.removeAttribute("data-label"),R))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===(typeof Event>"u"?"undefined":Ce(Event))){var y=document.createEvent("Event");y.initEvent("change",!0,!0),this.select.dispatchEvent(y)}this.close()}}},{key:"update",value:function(){var M=void 0;if(this.select.selectedIndex>-1){var R=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];M=this.select.options[this.select.selectedIndex],this.selectItem(R)}else this.selectItem(null);var S=null!=M&&M!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",S)}}]),k}();xe.default=F},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var P=L(ke(0)),ce=L(ke(5)),c=ke(4),K=L(c),Z=L(ke(16)),H=L(ke(25)),k=L(ke(24)),M=L(ke(35)),S=L(ke(6)),w=L(ke(22)),f=L(ke(7)),h=L(ke(55)),O=L(ke(42)),x=L(ke(23));function L(Q){return Q&&Q.__esModule?Q:{default:Q}}ce.default.register({"blots/block":K.default,"blots/block/embed":c.BlockEmbed,"blots/break":Z.default,"blots/container":H.default,"blots/cursor":k.default,"blots/embed":M.default,"blots/inline":S.default,"blots/scroll":w.default,"blots/text":f.default,"modules/clipboard":h.default,"modules/history":O.default,"modules/keyboard":x.default}),P.default.register(K.default,Z.default,k.default,S.default,w.default,f.default),xe.default=ce.default},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var Ce=ke(1),P=function(){function ae(ce){this.domNode=ce,this.domNode[Ce.DATA_KEY]={blot:this}}return Object.defineProperty(ae.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),ae.create=function(ce){if(null==this.tagName)throw new Ce.ParchmentError("Blot definition missing tagName");var c;return Array.isArray(this.tagName)?("string"==typeof ce&&(ce=ce.toUpperCase(),parseInt(ce).toString()===ce&&(ce=parseInt(ce))),c="number"==typeof ce?document.createElement(this.tagName[ce-1]):this.tagName.indexOf(ce)>-1?document.createElement(ce):document.createElement(this.tagName[0])):c=document.createElement(this.tagName),this.className&&c.classList.add(this.className),c},ae.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},ae.prototype.clone=function(){var ce=this.domNode.cloneNode(!1);return Ce.create(ce)},ae.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[Ce.DATA_KEY]},ae.prototype.deleteAt=function(ce,c){this.isolate(ce,c).remove()},ae.prototype.formatAt=function(ce,c,K,U){var Z=this.isolate(ce,c);if(null!=Ce.query(K,Ce.Scope.BLOT)&&U)Z.wrap(K,U);else if(null!=Ce.query(K,Ce.Scope.ATTRIBUTE)){var Y=Ce.create(this.statics.scope);Z.wrap(Y),Y.format(K,U)}},ae.prototype.insertAt=function(ce,c,K){var U=null==K?Ce.create("text",c):Ce.create(c,K),Z=this.split(ce);this.parent.insertBefore(U,Z)},ae.prototype.insertInto=function(ce,c){void 0===c&&(c=null),null!=this.parent&&this.parent.children.remove(this);var K=null;ce.children.insertBefore(this,c),null!=c&&(K=c.domNode),(this.domNode.parentNode!=ce.domNode||this.domNode.nextSibling!=K)&&ce.domNode.insertBefore(this.domNode,K),this.parent=ce,this.attach()},ae.prototype.isolate=function(ce,c){var K=this.split(ce);return K.split(c),K},ae.prototype.length=function(){return 1},ae.prototype.offset=function(ce){return void 0===ce&&(ce=this.parent),null==this.parent||this==ce?0:this.parent.children.offset(this)+this.parent.offset(ce)},ae.prototype.optimize=function(ce){null!=this.domNode[Ce.DATA_KEY]&&delete this.domNode[Ce.DATA_KEY].mutations},ae.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},ae.prototype.replace=function(ce){null!=ce.parent&&(ce.parent.insertBefore(this,ce.next),ce.remove())},ae.prototype.replaceWith=function(ce,c){var K="string"==typeof ce?Ce.create(ce,c):ce;return K.replace(this),K},ae.prototype.split=function(ce,c){return 0===ce?this:this.next},ae.prototype.update=function(ce,c){},ae.prototype.wrap=function(ce,c){var K="string"==typeof ce?Ce.create(ce,c):ce;return null!=this.parent&&this.parent.insertBefore(K,this.next),K.appendChild(this),K},ae.blotName="abstract",ae}();xe.default=P},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var Ce=ke(12),P=ke(32),ae=ke(33),ce=ke(1),c=function(){function K(U){this.attributes={},this.domNode=U,this.build()}return K.prototype.attribute=function(U,Z){Z?U.add(this.domNode,Z)&&(null!=U.value(this.domNode)?this.attributes[U.attrName]=U:delete this.attributes[U.attrName]):(U.remove(this.domNode),delete this.attributes[U.attrName])},K.prototype.build=function(){var U=this;this.attributes={};var Z=Ce.default.keys(this.domNode),Y=P.default.keys(this.domNode),H=ae.default.keys(this.domNode);Z.concat(Y).concat(H).forEach(function(F){var k=ce.query(F,ce.Scope.ATTRIBUTE);k instanceof Ce.default&&(U.attributes[k.attrName]=k)})},K.prototype.copy=function(U){var Z=this;Object.keys(this.attributes).forEach(function(Y){var H=Z.attributes[Y].value(Z.domNode);U.format(Y,H)})},K.prototype.move=function(U){var Z=this;this.copy(U),Object.keys(this.attributes).forEach(function(Y){Z.attributes[Y].remove(Z.domNode)}),this.attributes={}},K.prototype.values=function(){var U=this;return Object.keys(this.attributes).reduce(function(Z,Y){return Z[Y]=U.attributes[Y].value(U.domNode),Z},{})},K}();xe.default=c},function(Ye,xe,ke){"use strict";var c,Ce=this&&this.__extends||(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,U){K.__proto__=U}||function(K,U){for(var Z in U)U.hasOwnProperty(Z)&&(K[Z]=U[Z])},function(K,U){function Z(){this.constructor=K}c(K,U),K.prototype=null===U?Object.create(U):(Z.prototype=U.prototype,new Z)});function ae(c,K){return(c.getAttribute("class")||"").split(/\s+/).filter(function(Z){return 0===Z.indexOf(K+"-")})}Object.defineProperty(xe,"__esModule",{value:!0});var ce=function(c){function K(){return null!==c&&c.apply(this,arguments)||this}return Ce(K,c),K.keys=function(U){return(U.getAttribute("class")||"").split(/\s+/).map(function(Z){return Z.split("-").slice(0,-1).join("-")})},K.prototype.add=function(U,Z){return!!this.canAdd(U,Z)&&(this.remove(U),U.classList.add(this.keyName+"-"+Z),!0)},K.prototype.remove=function(U){ae(U,this.keyName).forEach(function(Y){U.classList.remove(Y)}),0===U.classList.length&&U.removeAttribute("class")},K.prototype.value=function(U){var Y=(ae(U,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(U,Y)?Y:""},K}(ke(12).default);xe.default=ce},function(Ye,xe,ke){"use strict";var c,Ce=this&&this.__extends||(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,U){K.__proto__=U}||function(K,U){for(var Z in U)U.hasOwnProperty(Z)&&(K[Z]=U[Z])},function(K,U){function Z(){this.constructor=K}c(K,U),K.prototype=null===U?Object.create(U):(Z.prototype=U.prototype,new Z)});function ae(c){var K=c.split("-"),U=K.slice(1).map(function(Z){return Z[0].toUpperCase()+Z.slice(1)}).join("");return K[0]+U}Object.defineProperty(xe,"__esModule",{value:!0});var ce=function(c){function K(){return null!==c&&c.apply(this,arguments)||this}return Ce(K,c),K.keys=function(U){return(U.getAttribute("style")||"").split(";").map(function(Z){return Z.split(":")[0].trim()})},K.prototype.add=function(U,Z){return!!this.canAdd(U,Z)&&(U.style[ae(this.keyName)]=Z,!0)},K.prototype.remove=function(U){U.style[ae(this.keyName)]="",U.getAttribute("style")||U.removeAttribute("style")},K.prototype.value=function(U){var Z=U.style[ae(this.keyName)];return this.canAdd(U,Z)?Z:""},K}(ke(12).default);xe.default=ce},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var Ce=function(){function ce(c,K){for(var U=0;U<K.length;U++){var Z=K[U];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(c,Z.key,Z)}}return function(c,K,U){return K&&ce(c.prototype,K),U&&ce(c,U),c}}();var ae=function(){function ce(c,K){(function P(ce,c){if(!(ce instanceof c))throw new TypeError("Cannot call a class as a function")})(this,ce),this.quill=c,this.options=K,this.modules={}}return Ce(ce,[{key:"init",value:function(){var K=this;Object.keys(this.options.modules).forEach(function(U){null==K.modules[U]&&K.addModule(U)})}},{key:"addModule",value:function(K){var U=this.quill.constructor.import("modules/"+K);return this.modules[K]=new U(this.quill,this.options.modules[K]||{}),this.modules[K]}}]),ce}();ae.DEFAULTS={modules:{}},ae.themes={default:ae},xe.default=ae},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var Ce=function(){function _(M,R){for(var S=0;S<R.length;S++){var y=R[S];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(M,y.key,y)}}return function(M,R,S){return R&&_(M.prototype,R),S&&_(M,S),M}}(),P=function _(M,R,S){null===M&&(M=Function.prototype);var y=Object.getOwnPropertyDescriptor(M,R);if(void 0===y){var w=Object.getPrototypeOf(M);return null===w?void 0:_(w,R,S)}if("value"in y)return y.value;var p=y.get;return void 0===p?void 0:p.call(S)},ce=U(ke(0)),K=U(ke(7));function U(_){return _&&_.__esModule?_:{default:_}}var F="\ufeff",k=function(_){function M(R){!function Z(_,M){if(!(_ instanceof M))throw new TypeError("Cannot call a class as a function")}(this,M);var S=function Y(_,M){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!M||"object"!=typeof M&&"function"!=typeof M?_:M}(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,R));return S.contentNode=document.createElement("span"),S.contentNode.setAttribute("contenteditable",!1),[].slice.call(S.domNode.childNodes).forEach(function(y){S.contentNode.appendChild(y)}),S.leftGuard=document.createTextNode(F),S.rightGuard=document.createTextNode(F),S.domNode.appendChild(S.leftGuard),S.domNode.appendChild(S.contentNode),S.domNode.appendChild(S.rightGuard),S}return function H(_,M){if("function"!=typeof M&&null!==M)throw new TypeError("Super expression must either be null or a function, not "+typeof M);_.prototype=Object.create(M&&M.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(_,M):_.__proto__=M)}(M,_),Ce(M,[{key:"index",value:function(S,y){return S===this.leftGuard?0:S===this.rightGuard?1:P(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"index",this).call(this,S,y)}},{key:"restore",value:function(S){var y=void 0,w=void 0,p=S.data.split(F).join("");if(S===this.leftGuard)if(this.prev instanceof K.default){var f=this.prev.length();this.prev.insertAt(f,p),y={startNode:this.prev.domNode,startOffset:f+p.length}}else w=document.createTextNode(p),this.parent.insertBefore(ce.default.create(w),this),y={startNode:w,startOffset:p.length};else S===this.rightGuard&&(this.next instanceof K.default?(this.next.insertAt(0,p),y={startNode:this.next.domNode,startOffset:p.length}):(w=document.createTextNode(p),this.parent.insertBefore(ce.default.create(w),this.next),y={startNode:w,startOffset:p.length}));return S.data=F,y}},{key:"update",value:function(S,y){var w=this;S.forEach(function(p){if("characterData"===p.type&&(p.target===w.leftGuard||p.target===w.rightGuard)){var f=w.restore(p.target);f&&(y.range=f)}})}}]),M}(ce.default.Embed);xe.default=k},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0}),xe.AlignStyle=xe.AlignClass=xe.AlignAttribute=void 0;var P=function ae(Z){return Z&&Z.__esModule?Z:{default:Z}}(ke(0));var ce={scope:P.default.Scope.BLOCK,whitelist:["right","center","justify"]},c=new P.default.Attributor.Attribute("align","align",ce),K=new P.default.Attributor.Class("align","ql-align",ce),U=new P.default.Attributor.Style("align","text-align",ce);xe.AlignAttribute=c,xe.AlignClass=K,xe.AlignStyle=U},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0}),xe.BackgroundStyle=xe.BackgroundClass=void 0;var P=function ce(U){return U&&U.__esModule?U:{default:U}}(ke(0)),ae=ke(26);var c=new P.default.Attributor.Class("background","ql-bg",{scope:P.default.Scope.INLINE}),K=new ae.ColorAttributor("background","background-color",{scope:P.default.Scope.INLINE});xe.BackgroundClass=c,xe.BackgroundStyle=K},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0}),xe.DirectionStyle=xe.DirectionClass=xe.DirectionAttribute=void 0;var P=function ae(Z){return Z&&Z.__esModule?Z:{default:Z}}(ke(0));var ce={scope:P.default.Scope.BLOCK,whitelist:["rtl"]},c=new P.default.Attributor.Attribute("direction","dir",ce),K=new P.default.Attributor.Class("direction","ql-direction",ce),U=new P.default.Attributor.Style("direction","direction",ce);xe.DirectionAttribute=c,xe.DirectionClass=K,xe.DirectionStyle=U},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0}),xe.FontClass=xe.FontStyle=void 0;var Ce=function(){function _(M,R){for(var S=0;S<R.length;S++){var y=R[S];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(M,y.key,y)}}return function(M,R,S){return R&&_(M.prototype,R),S&&_(M,S),M}}(),P=function _(M,R,S){null===M&&(M=Function.prototype);var y=Object.getOwnPropertyDescriptor(M,R);if(void 0===y){var w=Object.getPrototypeOf(M);return null===w?void 0:_(w,R,S)}if("value"in y)return y.value;var p=y.get;return void 0===p?void 0:p.call(S)},ce=function c(_){return _&&_.__esModule?_:{default:_}}(ke(0));var Y={scope:ce.default.Scope.INLINE,whitelist:["serif","monospace"]},H=new ce.default.Attributor.Class("font","ql-font",Y),F=function(_){function M(){return function K(_,M){if(!(_ instanceof M))throw new TypeError("Cannot call a class as a function")}(this,M),function U(_,M){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!M||"object"!=typeof M&&"function"!=typeof M?_:M}(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}return function Z(_,M){if("function"!=typeof M&&null!==M)throw new TypeError("Super expression must either be null or a function, not "+typeof M);_.prototype=Object.create(M&&M.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(_,M):_.__proto__=M)}(M,_),Ce(M,[{key:"value",value:function(S){return P(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"value",this).call(this,S).replace(/["']/g,"")}}]),M}(ce.default.Attributor.Style),k=new F("font","font-family",Y);xe.FontStyle=k,xe.FontClass=H},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0}),xe.SizeStyle=xe.SizeClass=void 0;var P=function ae(K){return K&&K.__esModule?K:{default:K}}(ke(0));var ce=new P.default.Attributor.Class("size","ql-size",{scope:P.default.Scope.INLINE,whitelist:["small","large","huge"]}),c=new P.default.Attributor.Style("size","font-size",{scope:P.default.Scope.INLINE,whitelist:["10px","18px","32px"]});xe.SizeClass=ce,xe.SizeStyle=c},function(Ye,xe,ke){"use strict";Ye.exports={align:{"":ke(76),center:ke(77),right:ke(78),justify:ke(79)},background:ke(80),blockquote:ke(81),bold:ke(82),clean:ke(83),code:ke(58),"code-block":ke(58),color:ke(84),direction:{"":ke(85),rtl:ke(86)},float:{center:ke(87),full:ke(88),left:ke(89),right:ke(90)},formula:ke(91),header:{1:ke(92),2:ke(93)},italic:ke(94),image:ke(95),indent:{"+1":ke(96),"-1":ke(97)},link:ke(98),list:{ordered:ke(99),bullet:ke(100),check:ke(101)},script:{sub:ke(102),super:ke(103)},strike:ke(104),underline:ke(105),video:ke(106)}},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0}),xe.getLastChangeIndex=xe.default=void 0;var Ce=function(){function R(S,y){for(var w=0;w<y.length;w++){var p=y[w];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(S,p.key,p)}}return function(S,y,w){return y&&R(S.prototype,y),w&&R(S,w),S}}(),ae=Z(ke(0)),c=Z(ke(5));function Z(R){return R&&R.__esModule?R:{default:R}}var k=function(R){function S(y,w){!function Y(R,S){if(!(R instanceof S))throw new TypeError("Cannot call a class as a function")}(this,S);var p=function H(R,S){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!S||"object"!=typeof S&&"function"!=typeof S?R:S}(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,y,w));return p.lastRecorded=0,p.ignoreChange=!1,p.clear(),p.quill.on(c.default.events.EDITOR_CHANGE,function(f,m,h,v){f!==c.default.events.TEXT_CHANGE||p.ignoreChange||(p.options.userOnly&&v!==c.default.sources.USER?p.transform(m):p.record(m,h))}),p.quill.keyboard.addBinding({key:"Z",shortKey:!0},p.undo.bind(p)),p.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},p.redo.bind(p)),/Win/i.test(navigator.platform)&&p.quill.keyboard.addBinding({key:"Y",shortKey:!0},p.redo.bind(p)),p}return function F(R,S){if("function"!=typeof S&&null!==S)throw new TypeError("Super expression must either be null or a function, not "+typeof S);R.prototype=Object.create(S&&S.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(R,S):R.__proto__=S)}(S,R),Ce(S,[{key:"change",value:function(w,p){if(0!==this.stack[w].length){var f=this.stack[w].pop();this.stack[p].push(f),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(f[w],c.default.sources.USER),this.ignoreChange=!1;var m=M(f[w]);this.quill.setSelection(m)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(w,p){if(0!==w.ops.length){this.stack.redo=[];var f=this.quill.getContents().diff(p),m=Date.now();if(this.lastRecorded+this.options.delay>m&&this.stack.undo.length>0){var h=this.stack.undo.pop();f=f.compose(h.undo),w=h.redo.compose(w)}else this.lastRecorded=m;this.stack.undo.push({redo:w,undo:f}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(w){this.stack.undo.forEach(function(p){p.undo=w.transform(p.undo,!0),p.redo=w.transform(p.redo,!0)}),this.stack.redo.forEach(function(p){p.undo=w.transform(p.undo,!0),p.redo=w.transform(p.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),S}(Z(ke(9)).default);function M(R){var S=R.reduce(function(w,p){return w+(p.delete||0)},0),y=R.length()-S;return function _(R){var S=R.ops[R.ops.length-1];return null!=S&&(null!=S.insert?"string"==typeof S.insert&&S.insert.endsWith("\n"):null!=S.attributes&&Object.keys(S.attributes).some(function(y){return null!=ae.default.query(y,ae.default.Scope.BLOCK)}))}(R)&&(y-=1),y}k.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},xe.default=k,xe.getLastChangeIndex=M},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0}),xe.default=xe.BaseTooltip=void 0;var Ce=function(){function q(ee,j){for(var D=0;D<j.length;D++){var N=j[D];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(ee,N.key,N)}}return function(ee,j,D){return j&&q(ee.prototype,j),D&&q(ee,D),ee}}(),P=function q(ee,j,D){null===ee&&(ee=Function.prototype);var N=Object.getOwnPropertyDescriptor(ee,j);if(void 0===N){var re=Object.getPrototypeOf(ee);return null===re?void 0:q(re,j,D)}if("value"in N)return N.value;var ue=N.get;return void 0===ue?void 0:ue.call(D)},ce=m(ke(3)),K=m(ke(2)),Z=m(ke(8)),H=m(ke(23)),k=m(ke(34)),M=m(ke(59)),S=m(ke(60)),w=m(ke(28)),f=m(ke(61));function m(q){return q&&q.__esModule?q:{default:q}}function h(q,ee){if(!(q instanceof ee))throw new TypeError("Cannot call a class as a function")}function v(q,ee){if(!q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!ee||"object"!=typeof ee&&"function"!=typeof ee?q:ee}function O(q,ee){if("function"!=typeof ee&&null!==ee)throw new TypeError("Super expression must either be null or a function, not "+typeof ee);q.prototype=Object.create(ee&&ee.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}),ee&&(Object.setPrototypeOf?Object.setPrototypeOf(q,ee):q.__proto__=ee)}var C=[!1,"center","right","justify"],x=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],L=[!1,"serif","monospace"],Q=["1","2","3",!1],G=["small",!1,"large","huge"],T=function(q){function ee(j,D){h(this,ee);var N=v(this,(ee.__proto__||Object.getPrototypeOf(ee)).call(this,j,D));return j.emitter.listenDOM("click",document.body,function ue(ve){if(!document.body.contains(j.root))return document.body.removeEventListener("click",ue);null!=N.tooltip&&!N.tooltip.root.contains(ve.target)&&document.activeElement!==N.tooltip.textbox&&!N.quill.hasFocus()&&N.tooltip.hide(),null!=N.pickers&&N.pickers.forEach(function(Ae){Ae.container.contains(ve.target)||Ae.close()})}),N}return O(ee,q),Ce(ee,[{key:"addModule",value:function(D){var N=P(ee.prototype.__proto__||Object.getPrototypeOf(ee.prototype),"addModule",this).call(this,D);return"toolbar"===D&&this.extendToolbar(N),N}},{key:"buildButtons",value:function(D,N){D.forEach(function(re){(re.getAttribute("class")||"").split(/\s+/).forEach(function(ve){if(ve.startsWith("ql-")&&(ve=ve.slice(3),null!=N[ve]))if("direction"===ve)re.innerHTML=N[ve][""]+N[ve].rtl;else if("string"==typeof N[ve])re.innerHTML=N[ve];else{var Ae=re.value||"";null!=Ae&&N[ve][Ae]&&(re.innerHTML=N[ve][Ae])}})})}},{key:"buildPickers",value:function(D,N){var re=this;this.pickers=D.map(function(ve){if(ve.classList.contains("ql-align"))return null==ve.querySelector("option")&&X(ve,C),new S.default(ve,N.align);if(ve.classList.contains("ql-background")||ve.classList.contains("ql-color")){var Ae=ve.classList.contains("ql-background")?"background":"color";return null==ve.querySelector("option")&&X(ve,x,"background"===Ae?"#ffffff":"#000000"),new M.default(ve,N[Ae])}return null==ve.querySelector("option")&&(ve.classList.contains("ql-font")?X(ve,L):ve.classList.contains("ql-header")?X(ve,Q):ve.classList.contains("ql-size")&&X(ve,G)),new w.default(ve)}),this.quill.on(Z.default.events.EDITOR_CHANGE,function(){re.pickers.forEach(function(Ae){Ae.update()})})}}]),ee}(k.default);T.DEFAULTS=(0,ce.default)(!0,{},k.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var ee=this,j=this.container.querySelector("input.ql-image[type=file]");null==j&&((j=document.createElement("input")).setAttribute("type","file"),j.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),j.classList.add("ql-image"),j.addEventListener("change",function(){if(null!=j.files&&null!=j.files[0]){var D=new FileReader;D.onload=function(N){var re=ee.quill.getSelection(!0);ee.quill.updateContents((new K.default).retain(re.index).delete(re.length).insert({image:N.target.result}),Z.default.sources.USER),ee.quill.setSelection(re.index+1,Z.default.sources.SILENT),j.value=""},D.readAsDataURL(j.files[0])}}),this.container.appendChild(j)),j.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var V=function(q){function ee(j,D){h(this,ee);var N=v(this,(ee.__proto__||Object.getPrototypeOf(ee)).call(this,j,D));return N.textbox=N.root.querySelector('input[type="text"]'),N.listen(),N}return O(ee,q),Ce(ee,[{key:"listen",value:function(){var D=this;this.textbox.addEventListener("keydown",function(N){H.default.match(N,"enter")?(D.save(),N.preventDefault()):H.default.match(N,"escape")&&(D.cancel(),N.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var D=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=N?this.textbox.value=N:D!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+D)||""),this.root.setAttribute("data-mode",D)}},{key:"restoreFocus",value:function(){var D=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=D}},{key:"save",value:function(){var D=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var N=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",D,Z.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",D,Z.default.sources.USER)),this.quill.root.scrollTop=N;break;case"video":D=function J(q){var ee=q.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||q.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return ee?(ee[1]||"https")+"://www.youtube.com/embed/"+ee[2]+"?showinfo=0":(ee=q.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(ee[1]||"https")+"://player.vimeo.com/video/"+ee[2]+"/":q}(D);case"formula":if(!D)break;var re=this.quill.getSelection(!0);if(null!=re){var ue=re.index+re.length;this.quill.insertEmbed(ue,this.root.getAttribute("data-mode"),D,Z.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(ue+1," ",Z.default.sources.USER),this.quill.setSelection(ue+2,Z.default.sources.USER)}}this.textbox.value="",this.hide()}}]),ee}(f.default);function X(q,ee){var j=arguments.length>2&&void 0!==arguments[2]&&arguments[2];ee.forEach(function(D){var N=document.createElement("option");D===j?N.setAttribute("selected","selected"):N.setAttribute("value",D),q.appendChild(N)})}xe.BaseTooltip=V,xe.default=T},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var Ce=function(){function P(){this.head=this.tail=null,this.length=0}return P.prototype.append=function(){for(var ae=[],ce=0;ce<arguments.length;ce++)ae[ce]=arguments[ce];this.insertBefore(ae[0],null),ae.length>1&&this.append.apply(this,ae.slice(1))},P.prototype.contains=function(ae){for(var ce,c=this.iterator();ce=c();)if(ce===ae)return!0;return!1},P.prototype.insertBefore=function(ae,ce){ae&&(ae.next=ce,null!=ce?(ae.prev=ce.prev,null!=ce.prev&&(ce.prev.next=ae),ce.prev=ae,ce===this.head&&(this.head=ae)):null!=this.tail?(this.tail.next=ae,ae.prev=this.tail,this.tail=ae):(ae.prev=null,this.head=this.tail=ae),this.length+=1)},P.prototype.offset=function(ae){for(var ce=0,c=this.head;null!=c;){if(c===ae)return ce;ce+=c.length(),c=c.next}return-1},P.prototype.remove=function(ae){this.contains(ae)&&(null!=ae.prev&&(ae.prev.next=ae.next),null!=ae.next&&(ae.next.prev=ae.prev),ae===this.head&&(this.head=ae.next),ae===this.tail&&(this.tail=ae.prev),this.length-=1)},P.prototype.iterator=function(ae){return void 0===ae&&(ae=this.head),function(){var ce=ae;return null!=ae&&(ae=ae.next),ce}},P.prototype.find=function(ae,ce){void 0===ce&&(ce=!1);for(var c,K=this.iterator();c=K();){var U=c.length();if(ae<U||ce&&ae===U&&(null==c.next||0!==c.next.length()))return[c,ae];ae-=U}return[null,0]},P.prototype.forEach=function(ae){for(var ce,c=this.iterator();ce=c();)ae(ce)},P.prototype.forEachAt=function(ae,ce,c){if(!(ce<=0))for(var Y,K=this.find(ae),H=ae-K[1],F=this.iterator(K[0]);(Y=F())&&H<ae+ce;){var k=Y.length();ae>H?c(Y,ae-H,Math.min(ce,H+k-ae)):c(Y,0,Math.min(k,ae+ce-H)),H+=k}},P.prototype.map=function(ae){return this.reduce(function(ce,c){return ce.push(ae(c)),ce},[])},P.prototype.reduce=function(ae,ce){for(var c,K=this.iterator();c=K();)ce=ae(ce,c);return ce},P}();xe.default=Ce},function(Ye,xe,ke){"use strict";var U,Ce=this&&this.__extends||(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,Y){Z.__proto__=Y}||function(Z,Y){for(var H in Y)Y.hasOwnProperty(H)&&(Z[H]=Y[H])},function(Z,Y){function H(){this.constructor=Z}U(Z,Y),Z.prototype=null===Y?Object.create(Y):(H.prototype=Y.prototype,new H)});Object.defineProperty(xe,"__esModule",{value:!0});var P=ke(17),ae=ke(1),ce={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},K=function(U){function Z(Y){var H=U.call(this,Y)||this;return H.scroll=H,H.observer=new MutationObserver(function(F){H.update(F)}),H.observer.observe(H.domNode,ce),H.attach(),H}return Ce(Z,U),Z.prototype.detach=function(){U.prototype.detach.call(this),this.observer.disconnect()},Z.prototype.deleteAt=function(Y,H){this.update(),0===Y&&H===this.length()?this.children.forEach(function(F){F.remove()}):U.prototype.deleteAt.call(this,Y,H)},Z.prototype.formatAt=function(Y,H,F,k){this.update(),U.prototype.formatAt.call(this,Y,H,F,k)},Z.prototype.insertAt=function(Y,H,F){this.update(),U.prototype.insertAt.call(this,Y,H,F)},Z.prototype.optimize=function(Y,H){var F=this;void 0===Y&&(Y=[]),void 0===H&&(H={}),U.prototype.optimize.call(this,H);for(var k=[].slice.call(this.observer.takeRecords());k.length>0;)Y.push(k.pop());for(var _=function(y,w){void 0===w&&(w=!0),null!=y&&y!==F&&null!=y.domNode.parentNode&&(null==y.domNode[ae.DATA_KEY].mutations&&(y.domNode[ae.DATA_KEY].mutations=[]),w&&_(y.parent))},M=function(y){null==y.domNode[ae.DATA_KEY]||null==y.domNode[ae.DATA_KEY].mutations||(y instanceof P.default&&y.children.forEach(M),y.optimize(H))},R=Y,S=0;R.length>0;S+=1){if(S>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(R.forEach(function(y){var w=ae.find(y.target,!0);null!=w&&(w.domNode===y.target&&("childList"===y.type?(_(ae.find(y.previousSibling,!1)),[].forEach.call(y.addedNodes,function(p){var f=ae.find(p,!1);_(f,!1),f instanceof P.default&&f.children.forEach(function(m){_(m,!1)})})):"attributes"===y.type&&_(w.prev)),_(w))}),this.children.forEach(M),k=(R=[].slice.call(this.observer.takeRecords())).slice();k.length>0;)Y.push(k.pop())}},Z.prototype.update=function(Y,H){var F=this;void 0===H&&(H={}),(Y=Y||this.observer.takeRecords()).map(function(k){var _=ae.find(k.target,!0);return null==_?null:null==_.domNode[ae.DATA_KEY].mutations?(_.domNode[ae.DATA_KEY].mutations=[k],_):(_.domNode[ae.DATA_KEY].mutations.push(k),null)}).forEach(function(k){null==k||k===F||null==k.domNode[ae.DATA_KEY]||k.update(k.domNode[ae.DATA_KEY].mutations||[],H)}),null!=this.domNode[ae.DATA_KEY].mutations&&U.prototype.update.call(this,this.domNode[ae.DATA_KEY].mutations,H),this.optimize(Y,H)},Z.blotName="scroll",Z.defaultChild="block",Z.scope=ae.Scope.BLOCK_BLOT,Z.tagName="DIV",Z}(P.default);xe.default=K},function(Ye,xe,ke){"use strict";var K,Ce=this&&this.__extends||(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,Z){U.__proto__=Z}||function(U,Z){for(var Y in Z)Z.hasOwnProperty(Y)&&(U[Y]=Z[Y])},function(U,Z){function Y(){this.constructor=U}K(U,Z),U.prototype=null===Z?Object.create(Z):(Y.prototype=Z.prototype,new Y)});Object.defineProperty(xe,"__esModule",{value:!0});var P=ke(18),ae=ke(1);var c=function(K){function U(){return null!==K&&K.apply(this,arguments)||this}return Ce(U,K),U.formats=function(Z){if(Z.tagName!==U.tagName)return K.formats.call(this,Z)},U.prototype.format=function(Z,Y){var H=this;Z!==this.statics.blotName||Y?K.prototype.format.call(this,Z,Y):(this.children.forEach(function(F){F instanceof P.default||(F=F.wrap(U.blotName,!0)),H.attributes.copy(F)}),this.unwrap())},U.prototype.formatAt=function(Z,Y,H,F){null!=this.formats()[H]||ae.query(H,ae.Scope.ATTRIBUTE)?this.isolate(Z,Y).format(H,F):K.prototype.formatAt.call(this,Z,Y,H,F)},U.prototype.optimize=function(Z){K.prototype.optimize.call(this,Z);var Y=this.formats();if(0===Object.keys(Y).length)return this.unwrap();var H=this.next;H instanceof U&&H.prev===this&&function ce(K,U){if(Object.keys(K).length!==Object.keys(U).length)return!1;for(var Z in K)if(K[Z]!==U[Z])return!1;return!0}(Y,H.formats())&&(H.moveChildren(this),H.remove())},U.blotName="inline",U.scope=ae.Scope.INLINE_BLOT,U.tagName="SPAN",U}(P.default);xe.default=c},function(Ye,xe,ke){"use strict";var c,Ce=this&&this.__extends||(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,U){K.__proto__=U}||function(K,U){for(var Z in U)U.hasOwnProperty(Z)&&(K[Z]=U[Z])},function(K,U){function Z(){this.constructor=K}c(K,U),K.prototype=null===U?Object.create(U):(Z.prototype=U.prototype,new Z)});Object.defineProperty(xe,"__esModule",{value:!0});var P=ke(18),ae=ke(1),ce=function(c){function K(){return null!==c&&c.apply(this,arguments)||this}return Ce(K,c),K.formats=function(U){var Z=ae.query(K.blotName).tagName;if(U.tagName!==Z)return c.formats.call(this,U)},K.prototype.format=function(U,Z){null!=ae.query(U,ae.Scope.BLOCK)&&(U!==this.statics.blotName||Z?c.prototype.format.call(this,U,Z):this.replaceWith(K.blotName))},K.prototype.formatAt=function(U,Z,Y,H){null!=ae.query(Y,ae.Scope.BLOCK)?this.format(Y,H):c.prototype.formatAt.call(this,U,Z,Y,H)},K.prototype.insertAt=function(U,Z,Y){if(null==Y||null!=ae.query(Z,ae.Scope.INLINE))c.prototype.insertAt.call(this,U,Z,Y);else{var H=this.split(U),F=ae.create(Z,Y);H.parent.insertBefore(F,H)}},K.prototype.update=function(U,Z){navigator.userAgent.match(/Trident/)?this.build():c.prototype.update.call(this,U,Z)},K.blotName="block",K.scope=ae.Scope.BLOCK_BLOT,K.tagName="P",K}(P.default);xe.default=ce},function(Ye,xe,ke){"use strict";var ce,Ce=this&&this.__extends||(ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,K){c.__proto__=K}||function(c,K){for(var U in K)K.hasOwnProperty(U)&&(c[U]=K[U])},function(c,K){function U(){this.constructor=c}ce(c,K),c.prototype=null===K?Object.create(K):(U.prototype=K.prototype,new U)});Object.defineProperty(xe,"__esModule",{value:!0});var ae=function(ce){function c(){return null!==ce&&ce.apply(this,arguments)||this}return Ce(c,ce),c.formats=function(K){},c.prototype.format=function(K,U){ce.prototype.formatAt.call(this,0,this.length(),K,U)},c.prototype.formatAt=function(K,U,Z,Y){0===K&&U===this.length()?this.format(Z,Y):ce.prototype.formatAt.call(this,K,U,Z,Y)},c.prototype.formats=function(){return this.statics.formats(this.domNode)},c}(ke(19).default);xe.default=ae},function(Ye,xe,ke){"use strict";var c,Ce=this&&this.__extends||(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,U){K.__proto__=U}||function(K,U){for(var Z in U)U.hasOwnProperty(Z)&&(K[Z]=U[Z])},function(K,U){function Z(){this.constructor=K}c(K,U),K.prototype=null===U?Object.create(U):(Z.prototype=U.prototype,new Z)});Object.defineProperty(xe,"__esModule",{value:!0});var P=ke(19),ae=ke(1),ce=function(c){function K(U){var Z=c.call(this,U)||this;return Z.text=Z.statics.value(Z.domNode),Z}return Ce(K,c),K.create=function(U){return document.createTextNode(U)},K.value=function(U){var Z=U.data;return Z.normalize&&(Z=Z.normalize()),Z},K.prototype.deleteAt=function(U,Z){this.domNode.data=this.text=this.text.slice(0,U)+this.text.slice(U+Z)},K.prototype.index=function(U,Z){return this.domNode===U?Z:-1},K.prototype.insertAt=function(U,Z,Y){null==Y?(this.text=this.text.slice(0,U)+Z+this.text.slice(U),this.domNode.data=this.text):c.prototype.insertAt.call(this,U,Z,Y)},K.prototype.length=function(){return this.text.length},K.prototype.optimize=function(U){c.prototype.optimize.call(this,U),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof K&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},K.prototype.position=function(U,Z){return void 0===Z&&(Z=!1),[this.domNode,U]},K.prototype.split=function(U,Z){if(void 0===Z&&(Z=!1),!Z){if(0===U)return this;if(U===this.length())return this.next}var Y=ae.create(this.domNode.splitText(U));return this.parent.insertBefore(Y,this.next),this.text=this.statics.value(this.domNode),Y},K.prototype.update=function(U,Z){var Y=this;U.some(function(H){return"characterData"===H.type&&H.target===Y.domNode})&&(this.text=this.statics.value(this.domNode))},K.prototype.value=function(){return this.text},K.blotName="text",K.scope=ae.Scope.INLINE_BLOT,K}(P.default);xe.default=ce},function(Ye,xe,ke){"use strict";var Ce=document.createElement("div");if(Ce.classList.toggle("test-class",!1),Ce.classList.contains("test-class")){var P=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(ae,ce){return arguments.length>1&&!this.contains(ae)==!ce?ce:P.call(this,ae)}}String.prototype.startsWith||(String.prototype.startsWith=function(ae,ce){return this.substr(ce=ce||0,ae.length)===ae}),String.prototype.endsWith||(String.prototype.endsWith=function(ae,ce){var c=this.toString();("number"!=typeof ce||!isFinite(ce)||Math.floor(ce)!==ce||ce>c.length)&&(ce=c.length);var K=c.indexOf(ae,ce-=ae.length);return-1!==K&&K===ce}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(ce){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof ce)throw new TypeError("predicate must be a function");for(var Z,c=Object(this),K=c.length>>>0,U=arguments[1],Y=0;Y<K;Y++)if(ce.call(U,Z=c[Y],Y,c))return Z}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(Ye,xe){var ke=-1,Ce=1,P=0;function ae(S,y,w){if(S==y)return S?[[P,S]]:[];(w<0||S.length<w)&&(w=null);var p=U(S,y),f=S.substring(0,p);p=Z(S=S.substring(p),y=y.substring(p));var m=S.substring(S.length-p),h=function ce(S,y){var w;if(!S)return[[Ce,y]];if(!y)return[[ke,S]];var p=S.length>y.length?S:y,f=S.length>y.length?y:S,m=p.indexOf(f);if(-1!=m)return w=[[Ce,p.substring(0,m)],[P,f],[Ce,p.substring(m+f.length)]],S.length>y.length&&(w[0][0]=w[2][0]=ke),w;if(1==f.length)return[[ke,S],[Ce,y]];var h=function Y(S,y){var w=S.length>y.length?S:y,p=S.length>y.length?y:S;if(w.length<4||2*p.length<w.length)return null;function f(G,T,V){for(var ee,j,D,N,J=G.substring(V,V+Math.floor(G.length/4)),X=-1,q="";-1!=(X=T.indexOf(J,X+1));){var re=U(G.substring(V),T.substring(X)),ue=Z(G.substring(0,V),T.substring(0,X));q.length<ue+re&&(q=T.substring(X-ue,X)+T.substring(X,X+re),ee=G.substring(0,V-ue),j=G.substring(V+re),D=T.substring(0,X-ue),N=T.substring(X+re))}return 2*q.length>=G.length?[ee,j,D,N,q]:null}var v,O,C,x,L,m=f(w,p,Math.ceil(w.length/4)),h=f(w,p,Math.ceil(w.length/2));return m||h?(v=h?m&&m[4].length>h[4].length?m:h:m,S.length>y.length?(O=v[0],C=v[1],x=v[2],L=v[3]):(x=v[0],L=v[1],O=v[2],C=v[3]),[O,C,x,L,v[4]]):null}(S,y);if(h){var O=h[1],x=h[3],L=h[4],Q=ae(h[0],h[2]),G=ae(O,x);return Q.concat([[P,L]],G)}return function c(S,y){for(var w=S.length,p=y.length,f=Math.ceil((w+p)/2),m=f,h=2*f,v=new Array(h),O=new Array(h),C=0;C<h;C++)v[C]=-1,O[C]=-1;v[m+1]=0,O[m+1]=0;for(var x=w-p,L=x%2!=0,Q=0,G=0,T=0,V=0,J=0;J<f;J++){for(var X=-J+Q;X<=J-G;X+=2){for(var q=m+X,j=(ee=X==-J||X!=J&&v[q-1]<v[q+1]?v[q+1]:v[q-1]+1)-X;ee<w&&j<p&&S.charAt(ee)==y.charAt(j);)ee++,j++;if(v[q]=ee,ee>w)G+=2;else if(j>p)Q+=2;else if(L&&(D=m+x-X)>=0&&D<h&&-1!=O[D]&&ee>=(N=w-O[D]))return K(S,y,ee,j)}for(var re=-J+T;re<=J-V;re+=2){for(var N,D=m+re,ue=(N=re==-J||re!=J&&O[D-1]<O[D+1]?O[D+1]:O[D-1]+1)-re;N<w&&ue<p&&S.charAt(w-N-1)==y.charAt(p-ue-1);)N++,ue++;if(O[D]=N,N>w)V+=2;else if(ue>p)T+=2;else if(!L){var ee;if((q=m+x-re)>=0&&q<h&&-1!=v[q]&&(j=m+(ee=v[q])-q,ee>=(N=w-N)))return K(S,y,ee,j)}}}return[[ke,S],[Ce,y]]}(S,y)}(S=S.substring(0,S.length-p),y=y.substring(0,y.length-p));return f&&h.unshift([P,f]),m&&h.push([P,m]),H(h),null!=w&&(h=function _(S,y){var w=function k(S,y){if(0===y)return[P,S];for(var w=0,p=0;p<S.length;p++){var f=S[p];if(f[0]===ke||f[0]===P){var m=w+f[1].length;if(y===m)return[p+1,S];if(y<m){S=S.slice();var h=y-w,v=[f[0],f[1].slice(0,h)],O=[f[0],f[1].slice(h)];return S.splice(p,1,v,O),[p+1,S]}w=m}}throw new Error("cursor_pos is out of bounds!")}(S,y),p=w[1],f=w[0],m=p[f],h=p[f+1];if(null==m)return S;if(m[0]!==P)return S;if(null!=h&&m[1]+h[1]===h[1]+m[1])return p.splice(f,2,h,m),R(p,f,2);if(null!=h&&0===h[1].indexOf(m[1])){p.splice(f,2,[h[0],m[1]],[0,m[1]]);var v=h[1].slice(m[1].length);return v.length>0&&p.splice(f+2,0,[h[0],v]),R(p,f,3)}return S}(h,w)),function M(S){for(var y=!1,w=function(h){return h.charCodeAt(0)>=56320&&h.charCodeAt(0)<=57343},p=function(h){return h.charCodeAt(h.length-1)>=55296&&h.charCodeAt(h.length-1)<=56319},f=2;f<S.length;f+=1)S[f-2][0]===P&&p(S[f-2][1])&&S[f-1][0]===ke&&w(S[f-1][1])&&S[f][0]===Ce&&w(S[f][1])&&(y=!0,S[f-1][1]=S[f-2][1].slice(-1)+S[f-1][1],S[f][1]=S[f-2][1].slice(-1)+S[f][1],S[f-2][1]=S[f-2][1].slice(0,-1));if(!y)return S;var m=[];for(f=0;f<S.length;f+=1)S[f][1].length>0&&m.push(S[f]);return m}(h)}function K(S,y,w,p){var f=S.substring(0,w),m=y.substring(0,p),h=S.substring(w),v=y.substring(p),O=ae(f,m),C=ae(h,v);return O.concat(C)}function U(S,y){if(!S||!y||S.charAt(0)!=y.charAt(0))return 0;for(var w=0,p=Math.min(S.length,y.length),f=p,m=0;w<f;)S.substring(m,f)==y.substring(m,f)?m=w=f:p=f,f=Math.floor((p-w)/2+w);return f}function Z(S,y){if(!S||!y||S.charAt(S.length-1)!=y.charAt(y.length-1))return 0;for(var w=0,p=Math.min(S.length,y.length),f=p,m=0;w<f;)S.substring(S.length-f,S.length-m)==y.substring(y.length-f,y.length-m)?m=w=f:p=f,f=Math.floor((p-w)/2+w);return f}function H(S){S.push([P,""]);for(var h,y=0,w=0,p=0,f="",m="";y<S.length;)switch(S[y][0]){case Ce:p++,m+=S[y][1],y++;break;case ke:w++,f+=S[y][1],y++;break;case P:w+p>1?(0!==w&&0!==p&&(0!==(h=U(m,f))&&(y-w-p>0&&S[y-w-p-1][0]==P?S[y-w-p-1][1]+=m.substring(0,h):(S.splice(0,0,[P,m.substring(0,h)]),y++),m=m.substring(h),f=f.substring(h)),0!==(h=Z(m,f))&&(S[y][1]=m.substring(m.length-h)+S[y][1],m=m.substring(0,m.length-h),f=f.substring(0,f.length-h))),0===w?S.splice(y-p,w+p,[Ce,m]):0===p?S.splice(y-w,w+p,[ke,f]):S.splice(y-w-p,w+p,[ke,f],[Ce,m]),y=y-w-p+(w?1:0)+(p?1:0)+1):0!==y&&S[y-1][0]==P?(S[y-1][1]+=S[y][1],S.splice(y,1)):y++,p=0,w=0,f="",m=""}""===S[S.length-1][1]&&S.pop();var v=!1;for(y=1;y<S.length-1;)S[y-1][0]==P&&S[y+1][0]==P&&(S[y][1].substring(S[y][1].length-S[y-1][1].length)==S[y-1][1]?(S[y][1]=S[y-1][1]+S[y][1].substring(0,S[y][1].length-S[y-1][1].length),S[y+1][1]=S[y-1][1]+S[y+1][1],S.splice(y-1,1),v=!0):S[y][1].substring(0,S[y+1][1].length)==S[y+1][1]&&(S[y-1][1]+=S[y+1][1],S[y][1]=S[y][1].substring(S[y+1][1].length)+S[y+1][1],S.splice(y+1,1),v=!0)),y++;v&&H(S)}var F=ae;function R(S,y,w){for(var p=y+w-1;p>=0&&p>=y-1;p--)if(p+1<S.length){var f=S[p],m=S[p+1];f[0]===m[1]&&S.splice(p,2,[f[0],f[1]+m[1]])}return S}F.INSERT=Ce,F.DELETE=ke,F.EQUAL=P,Ye.exports=F},function(Ye,xe){function ke(Ce){var P=[];for(var ae in Ce)P.push(ae);return P}(Ye.exports="function"==typeof Object.keys?Object.keys:ke).shim=ke},function(Ye,xe){var ke="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function Ce(ae){return"[object Arguments]"==Object.prototype.toString.call(ae)}function P(ae){return ae&&"object"==typeof ae&&"number"==typeof ae.length&&Object.prototype.hasOwnProperty.call(ae,"callee")&&!Object.prototype.propertyIsEnumerable.call(ae,"callee")||!1}(xe=Ye.exports=ke?Ce:P).supported=Ce,xe.unsupported=P},function(Ye,xe){"use strict";var ke=Object.prototype.hasOwnProperty,Ce="~";function P(){}function ae(c,K,U){this.fn=c,this.context=K,this.once=U||!1}function ce(){this._events=new P,this._eventsCount=0}Object.create&&(P.prototype=Object.create(null),(new P).__proto__||(Ce=!1)),ce.prototype.eventNames=function(){var U,Z,K=[];if(0===this._eventsCount)return K;for(Z in U=this._events)ke.call(U,Z)&&K.push(Ce?Z.slice(1):Z);return Object.getOwnPropertySymbols?K.concat(Object.getOwnPropertySymbols(U)):K},ce.prototype.listeners=function(K,U){var Y=this._events[Ce?Ce+K:K];if(U)return!!Y;if(!Y)return[];if(Y.fn)return[Y.fn];for(var H=0,F=Y.length,k=new Array(F);H<F;H++)k[H]=Y[H].fn;return k},ce.prototype.emit=function(K,U,Z,Y,H,F){var k=Ce?Ce+K:K;if(!this._events[k])return!1;var R,S,_=this._events[k],M=arguments.length;if(_.fn){switch(_.once&&this.removeListener(K,_.fn,void 0,!0),M){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,U),!0;case 3:return _.fn.call(_.context,U,Z),!0;case 4:return _.fn.call(_.context,U,Z,Y),!0;case 5:return _.fn.call(_.context,U,Z,Y,H),!0;case 6:return _.fn.call(_.context,U,Z,Y,H,F),!0}for(S=1,R=new Array(M-1);S<M;S++)R[S-1]=arguments[S];_.fn.apply(_.context,R)}else{var w,y=_.length;for(S=0;S<y;S++)switch(_[S].once&&this.removeListener(K,_[S].fn,void 0,!0),M){case 1:_[S].fn.call(_[S].context);break;case 2:_[S].fn.call(_[S].context,U);break;case 3:_[S].fn.call(_[S].context,U,Z);break;case 4:_[S].fn.call(_[S].context,U,Z,Y);break;default:if(!R)for(w=1,R=new Array(M-1);w<M;w++)R[w-1]=arguments[w];_[S].fn.apply(_[S].context,R)}}return!0},ce.prototype.on=function(K,U,Z){var Y=new ae(U,Z||this),H=Ce?Ce+K:K;return this._events[H]?this._events[H].fn?this._events[H]=[this._events[H],Y]:this._events[H].push(Y):(this._events[H]=Y,this._eventsCount++),this},ce.prototype.once=function(K,U,Z){var Y=new ae(U,Z||this,!0),H=Ce?Ce+K:K;return this._events[H]?this._events[H].fn?this._events[H]=[this._events[H],Y]:this._events[H].push(Y):(this._events[H]=Y,this._eventsCount++),this},ce.prototype.removeListener=function(K,U,Z,Y){var H=Ce?Ce+K:K;if(!this._events[H])return this;if(!U)return 0==--this._eventsCount?this._events=new P:delete this._events[H],this;var F=this._events[H];if(F.fn)F.fn===U&&(!Y||F.once)&&(!Z||F.context===Z)&&(0==--this._eventsCount?this._events=new P:delete this._events[H]);else{for(var k=0,_=[],M=F.length;k<M;k++)(F[k].fn!==U||Y&&!F[k].once||Z&&F[k].context!==Z)&&_.push(F[k]);_.length?this._events[H]=1===_.length?_[0]:_:0==--this._eventsCount?this._events=new P:delete this._events[H]}return this},ce.prototype.removeAllListeners=function(K){var U;return K?this._events[U=Ce?Ce+K:K]&&(0==--this._eventsCount?this._events=new P:delete this._events[U]):(this._events=new P,this._eventsCount=0),this},ce.prototype.off=ce.prototype.removeListener,ce.prototype.addListener=ce.prototype.on,ce.prototype.setMaxListeners=function(){return this},ce.prefixed=Ce,ce.EventEmitter=ce,typeof Ye<"u"&&(Ye.exports=ce)},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0}),xe.matchText=xe.matchSpacing=xe.matchNewline=xe.matchBlot=xe.matchAttributor=xe.default=void 0;var Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ge){return typeof ge}:function(ge){return ge&&"function"==typeof Symbol&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":typeof ge},P=function(be,ie){if(Array.isArray(be))return be;if(Symbol.iterator in Object(be))return function ge(be,ie){var se=[],de=!0,_e=!1,$e=void 0;try{for(var ut,Xe=be[Symbol.iterator]();!(de=(ut=Xe.next()).done)&&(se.push(ut.value),!ie||se.length!==ie);de=!0);}catch(mt){_e=!0,$e=mt}finally{try{!de&&Xe.return&&Xe.return()}finally{if(_e)throw $e}}return se}(be,ie);throw new TypeError("Invalid attempt to destructure non-iterable instance")},ae=function(){function ge(be,ie){for(var se=0;se<ie.length;se++){var de=ie[se];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(be,de.key,de)}}return function(be,ie,se){return ie&&ge(be.prototype,ie),se&&ge(be,se),be}}(),c=O(ke(3)),U=O(ke(2)),Y=O(ke(0)),F=O(ke(5)),_=O(ke(10)),R=O(ke(9)),S=ke(36),y=ke(37),p=O(ke(13)),f=ke(26),m=ke(38),h=ke(39),v=ke(40);function O(ge){return ge&&ge.__esModule?ge:{default:ge}}function C(ge,be,ie){return be in ge?Object.defineProperty(ge,be,{value:ie,enumerable:!0,configurable:!0,writable:!0}):ge[be]=ie,ge}var G=(0,_.default)("quill:clipboard"),T="__ql-matcher",V=[[Node.TEXT_NODE,pe],[Node.TEXT_NODE,Ie],["br",function Te(ge,be){return D(be,"\n")||be.insert("\n"),be}],[Node.ELEMENT_NODE,Ie],[Node.ELEMENT_NODE,Ae],[Node.ELEMENT_NODE,Ge],[Node.ELEMENT_NODE,ve],[Node.ELEMENT_NODE,function oe(ge,be){var ie={},se=ge.style||{};return se.fontStyle&&"italic"===j(ge).fontStyle&&(ie.italic=!0),se.fontWeight&&(j(ge).fontWeight.startsWith("bold")||parseInt(j(ge).fontWeight)>=700)&&(ie.bold=!0),Object.keys(ie).length>0&&(be=ee(be,ie)),parseFloat(se.textIndent||0)>0&&(be=(new U.default).insert("\t").concat(be)),be}],["li",function Me(ge,be){var ie=Y.default.query(ge);if(null==ie||"list-item"!==ie.blotName||!D(be,"\n"))return be;for(var se=-1,de=ge.parentNode;!de.classList.contains("ql-clipboard");)"list"===(Y.default.query(de)||{}).blotName&&(se+=1),de=de.parentNode;return se<=0?be:be.compose((new U.default).retain(be.length()-1).retain(1,{indent:se}))}],["b",ue.bind(ue,"bold")],["i",ue.bind(ue,"italic")],["style",function Re(){return new U.default}]],J=[S.AlignAttribute,m.DirectionAttribute].reduce(function(ge,be){return ge[be.keyName]=be,ge},{}),X=[S.AlignStyle,y.BackgroundStyle,f.ColorStyle,m.DirectionStyle,h.FontStyle,v.SizeStyle].reduce(function(ge,be){return ge[be.keyName]=be,ge},{}),q=function(ge){function be(ie,se){!function x(ge,be){if(!(ge instanceof be))throw new TypeError("Cannot call a class as a function")}(this,be);var de=function L(ge,be){if(!ge)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!be||"object"!=typeof be&&"function"!=typeof be?ge:be}(this,(be.__proto__||Object.getPrototypeOf(be)).call(this,ie,se));return de.quill.root.addEventListener("paste",de.onPaste.bind(de)),de.container=de.quill.addContainer("ql-clipboard"),de.container.setAttribute("contenteditable",!0),de.container.setAttribute("tabindex",-1),de.matchers=[],V.concat(de.options.matchers).forEach(function(_e){var $e=P(_e,2),ut=$e[1];!se.matchVisual&&ut===Ge||de.addMatcher($e[0],ut)}),de}return function Q(ge,be){if("function"!=typeof be&&null!==be)throw new TypeError("Super expression must either be null or a function, not "+typeof be);ge.prototype=Object.create(be&&be.prototype,{constructor:{value:ge,enumerable:!1,writable:!0,configurable:!0}}),be&&(Object.setPrototypeOf?Object.setPrototypeOf(ge,be):ge.__proto__=be)}(be,ge),ae(be,[{key:"addMatcher",value:function(se,de){this.matchers.push([se,de])}},{key:"convert",value:function(se){if("string"==typeof se)return this.container.innerHTML=se.replace(/\>\r?\n +\</g,"><"),this.convert();var de=this.quill.getFormat(this.quill.selection.savedRange.index);if(de[p.default.blotName]){var _e=this.container.innerText;return this.container.innerHTML="",(new U.default).insert(_e,C({},p.default.blotName,de[p.default.blotName]))}var $e=this.prepareMatching(),Xe=P($e,2),ct=re(this.container,Xe[0],Xe[1]);return D(ct,"\n")&&null==ct.ops[ct.ops.length-1].attributes&&(ct=ct.compose((new U.default).retain(ct.length()-1).delete(1))),G.log("convert",this.container.innerHTML,ct),this.container.innerHTML="",ct}},{key:"dangerouslyPasteHTML",value:function(se,de){var _e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F.default.sources.API;if("string"==typeof se)this.quill.setContents(this.convert(se),de),this.quill.setSelection(0,F.default.sources.SILENT);else{var $e=this.convert(de);this.quill.updateContents((new U.default).retain(se).concat($e),_e),this.quill.setSelection(se+$e.length(),F.default.sources.SILENT)}}},{key:"onPaste",value:function(se){var de=this;if(!se.defaultPrevented&&this.quill.isEnabled()){var _e=this.quill.getSelection(),$e=(new U.default).retain(_e.index),Xe=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(F.default.sources.SILENT),setTimeout(function(){$e=$e.concat(de.convert()).delete(_e.length),de.quill.updateContents($e,F.default.sources.USER),de.quill.setSelection($e.length()-_e.length,F.default.sources.SILENT),de.quill.scrollingContainer.scrollTop=Xe,de.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var se=this,de=[],_e=[];return this.matchers.forEach(function($e){var Xe=P($e,2),ut=Xe[0],mt=Xe[1];switch(ut){case Node.TEXT_NODE:_e.push(mt);break;case Node.ELEMENT_NODE:de.push(mt);break;default:[].forEach.call(se.container.querySelectorAll(ut),function(ct){ct[T]=ct[T]||[],ct[T].push(mt)})}}),[de,_e]}}]),be}(R.default);function ee(ge,be,ie){return"object"===(typeof be>"u"?"undefined":Ce(be))?Object.keys(be).reduce(function(se,de){return ee(se,de,be[de])},ge):ge.reduce(function(se,de){return de.attributes&&de.attributes[be]?se.push(de):se.insert(de.insert,(0,c.default)({},C({},be,ie),de.attributes))},new U.default)}function j(ge){if(ge.nodeType!==Node.ELEMENT_NODE)return{};var be="__ql-computed-style";return ge[be]||(ge[be]=window.getComputedStyle(ge))}function D(ge,be){for(var ie="",se=ge.ops.length-1;se>=0&&ie.length<be.length;--se){var de=ge.ops[se];if("string"!=typeof de.insert)break;ie=de.insert+ie}return ie.slice(-1*be.length)===be}function N(ge){if(0===ge.childNodes.length)return!1;var be=j(ge);return["block","list-item"].indexOf(be.display)>-1}function re(ge,be,ie){return ge.nodeType===ge.TEXT_NODE?ie.reduce(function(se,de){return de(ge,se)},new U.default):ge.nodeType===ge.ELEMENT_NODE?[].reduce.call(ge.childNodes||[],function(se,de){var _e=re(de,be,ie);return de.nodeType===ge.ELEMENT_NODE&&(_e=be.reduce(function($e,Xe){return Xe(de,$e)},_e),_e=(de[T]||[]).reduce(function($e,Xe){return Xe(de,$e)},_e)),se.concat(_e)},new U.default):new U.default}function ue(ge,be,ie){return ee(ie,ge,!0)}function ve(ge,be){var ie=Y.default.Attributor.Attribute.keys(ge),se=Y.default.Attributor.Class.keys(ge),de=Y.default.Attributor.Style.keys(ge),_e={};return ie.concat(se).concat(de).forEach(function($e){var Xe=Y.default.query($e,Y.default.Scope.ATTRIBUTE);null!=Xe&&(_e[Xe.attrName]=Xe.value(ge),_e[Xe.attrName])||(null!=(Xe=J[$e])&&(Xe.attrName===$e||Xe.keyName===$e)&&(_e[Xe.attrName]=Xe.value(ge)||void 0),null!=(Xe=X[$e])&&(Xe.attrName===$e||Xe.keyName===$e)&&(_e[(Xe=X[$e]).attrName]=Xe.value(ge)||void 0))}),Object.keys(_e).length>0&&(be=ee(be,_e)),be}function Ae(ge,be){var ie=Y.default.query(ge);if(null==ie)return be;if(ie.prototype instanceof Y.default.Embed){var se={},de=ie.value(ge);null!=de&&(se[ie.blotName]=de,be=(new U.default).insert(se,ie.formats(ge)))}else"function"==typeof ie.formats&&(be=ee(be,ie.blotName,ie.formats(ge)));return be}function Ie(ge,be){return D(be,"\n")||(N(ge)||be.length()>0&&ge.nextSibling&&N(ge.nextSibling))&&be.insert("\n"),be}function Ge(ge,be){if(N(ge)&&null!=ge.nextElementSibling&&!D(be,"\n\n")){var ie=ge.offsetHeight+parseFloat(j(ge).marginTop)+parseFloat(j(ge).marginBottom);ge.nextElementSibling.offsetTop>ge.offsetTop+1.5*ie&&be.insert("\n")}return be}function pe(ge,be){var ie=ge.data;if("O:P"===ge.parentNode.tagName)return be.insert(ie.trim());if(0===ie.trim().length&&ge.parentNode.classList.contains("ql-clipboard"))return be;if(!j(ge.parentNode).whiteSpace.startsWith("pre")){var se=function(_e,$e){return($e=$e.replace(/[^\u00a0]/g,"")).length<1&&_e?" ":$e};ie=(ie=ie.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,se.bind(se,!0)),(null==ge.previousSibling&&N(ge.parentNode)||null!=ge.previousSibling&&N(ge.previousSibling))&&(ie=ie.replace(/^\s+/,se.bind(se,!1))),(null==ge.nextSibling&&N(ge.parentNode)||null!=ge.nextSibling&&N(ge.nextSibling))&&(ie=ie.replace(/\s+$/,se.bind(se,!1)))}return be.insert(ie)}q.DEFAULTS={matchers:[],matchVisual:!0},xe.default=q,xe.matchAttributor=ve,xe.matchBlot=Ae,xe.matchNewline=Ie,xe.matchSpacing=Ge,xe.matchText=pe},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var Ce=function(){function H(F,k){for(var _=0;_<k.length;_++){var M=k[_];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(F,M.key,M)}}return function(F,k,_){return k&&H(F.prototype,k),_&&H(F,_),F}}(),P=function H(F,k,_){null===F&&(F=Function.prototype);var M=Object.getOwnPropertyDescriptor(F,k);if(void 0===M){var R=Object.getPrototypeOf(F);return null===R?void 0:H(R,k,_)}if("value"in M)return M.value;var S=M.get;return void 0===S?void 0:S.call(_)};var Y=function(H){function F(){return function K(H,F){if(!(H instanceof F))throw new TypeError("Cannot call a class as a function")}(this,F),function U(H,F){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!F||"object"!=typeof F&&"function"!=typeof F?H:F}(this,(F.__proto__||Object.getPrototypeOf(F)).apply(this,arguments))}return function Z(H,F){if("function"!=typeof F&&null!==F)throw new TypeError("Super expression must either be null or a function, not "+typeof F);H.prototype=Object.create(F&&F.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(H,F):H.__proto__=F)}(F,H),Ce(F,[{key:"optimize",value:function(_){P(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"optimize",this).call(this,_),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return P(F.__proto__||Object.getPrototypeOf(F),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),F}(function c(H){return H&&H.__esModule?H:{default:H}}(ke(6)).default);Y.blotName="bold",Y.tagName=["STRONG","B"],xe.default=Y},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0}),xe.addControls=xe.default=void 0;var Ce=function(O,C){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return function v(O,C){var x=[],L=!0,Q=!1,G=void 0;try{for(var V,T=O[Symbol.iterator]();!(L=(V=T.next()).done)&&(x.push(V.value),!C||x.length!==C);L=!0);}catch(J){Q=!0,G=J}finally{try{!L&&T.return&&T.return()}finally{if(Q)throw G}}return x}(O,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P=function(){function v(O,C){for(var x=0;x<C.length;x++){var L=C[x];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(O,L.key,L)}}return function(O,C,x){return C&&v(O.prototype,C),x&&v(O,x),O}}(),ce=_(ke(2)),K=_(ke(0)),Z=_(ke(5)),H=_(ke(10)),k=_(ke(9));function _(v){return v&&v.__esModule?v:{default:v}}function S(v,O){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!O||"object"!=typeof O&&"function"!=typeof O?v:O}var w=(0,H.default)("quill:toolbar"),p=function(v){function O(C,x){!function R(v,O){if(!(v instanceof O))throw new TypeError("Cannot call a class as a function")}(this,O);var G,L=S(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,C,x));if(Array.isArray(L.options.container)){var Q=document.createElement("div");m(Q,L.options.container),C.container.parentNode.insertBefore(Q,C.container),L.container=Q}else L.container="string"==typeof L.options.container?document.querySelector(L.options.container):L.options.container;return L.container instanceof HTMLElement?(L.container.classList.add("ql-toolbar"),L.controls=[],L.handlers={},Object.keys(L.options.handlers).forEach(function(T){L.addHandler(T,L.options.handlers[T])}),[].forEach.call(L.container.querySelectorAll("button, select"),function(T){L.attach(T)}),L.quill.on(Z.default.events.EDITOR_CHANGE,function(T,V){T===Z.default.events.SELECTION_CHANGE&&L.update(V)}),L.quill.on(Z.default.events.SCROLL_OPTIMIZE,function(){var T=L.quill.selection.getRange(),V=Ce(T,1);L.update(V[0])}),L):(G=w.error("Container required for toolbar",L.options),S(L,G))}return function y(v,O){if("function"!=typeof O&&null!==O)throw new TypeError("Super expression must either be null or a function, not "+typeof O);v.prototype=Object.create(O&&O.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(v,O):v.__proto__=O)}(O,v),P(O,[{key:"addHandler",value:function(x,L){this.handlers[x]=L}},{key:"attach",value:function(x){var L=this,Q=[].find.call(x.classList,function(T){return 0===T.indexOf("ql-")});if(Q){if(Q=Q.slice(3),"BUTTON"===x.tagName&&x.setAttribute("type","button"),null==this.handlers[Q]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[Q])return void w.warn("ignoring attaching to disabled format",Q,x);if(null==K.default.query(Q))return void w.warn("ignoring attaching to nonexistent format",Q,x)}x.addEventListener("SELECT"===x.tagName?"change":"click",function(T){var V=void 0;if("SELECT"===x.tagName){if(x.selectedIndex<0)return;var J=x.options[x.selectedIndex];V=!J.hasAttribute("selected")&&(J.value||!1)}else V=!x.classList.contains("ql-active")&&(x.value||!x.hasAttribute("value")),T.preventDefault();L.quill.focus();var X=L.quill.selection.getRange(),ee=Ce(X,1)[0];if(null!=L.handlers[Q])L.handlers[Q].call(L,V);else if(K.default.query(Q).prototype instanceof K.default.Embed){if(!(V=prompt("Enter "+Q)))return;L.quill.updateContents((new ce.default).retain(ee.index).delete(ee.length).insert(function M(v,O,C){return O in v?Object.defineProperty(v,O,{value:C,enumerable:!0,configurable:!0,writable:!0}):v[O]=C,v}({},Q,V)),Z.default.sources.USER)}else L.quill.format(Q,V,Z.default.sources.USER);L.update(ee)}),this.controls.push([Q,x])}}},{key:"update",value:function(x){var L=null==x?{}:this.quill.getFormat(x);this.controls.forEach(function(Q){var G=Ce(Q,2),T=G[0],V=G[1];if("SELECT"===V.tagName){var J=void 0;if(null==x)J=null;else if(null==L[T])J=V.querySelector("option[selected]");else if(!Array.isArray(L[T])){var X=L[T];"string"==typeof X&&(X=X.replace(/\"/g,'\\"')),J=V.querySelector('option[value="'+X+'"]')}null==J?(V.value="",V.selectedIndex=-1):J.selected=!0}else if(null==x)V.classList.remove("ql-active");else if(V.hasAttribute("value")){var q=L[T]===V.getAttribute("value")||null!=L[T]&&L[T].toString()===V.getAttribute("value")||null==L[T]&&!V.getAttribute("value");V.classList.toggle("ql-active",q)}else V.classList.toggle("ql-active",null!=L[T])})}}]),O}(k.default);function f(v,O,C){var x=document.createElement("button");x.setAttribute("type","button"),x.classList.add("ql-"+O),null!=C&&(x.value=C),v.appendChild(x)}function m(v,O){Array.isArray(O[0])||(O=[O]),O.forEach(function(C){var x=document.createElement("span");x.classList.add("ql-formats"),C.forEach(function(L){if("string"==typeof L)f(x,L);else{var Q=Object.keys(L)[0],G=L[Q];Array.isArray(G)?function h(v,O,C){var x=document.createElement("select");x.classList.add("ql-"+O),C.forEach(function(L){var Q=document.createElement("option");!1!==L?Q.setAttribute("value",L):Q.setAttribute("selected","selected"),x.appendChild(Q)}),v.appendChild(x)}(x,Q,G):f(x,Q,G)}}),v.appendChild(x)})}p.DEFAULTS={},p.DEFAULTS={container:null,handlers:{clean:function(){var O=this,C=this.quill.getSelection();if(null!=C)if(0==C.length){var x=this.quill.getFormat();Object.keys(x).forEach(function(L){null!=K.default.query(L,K.default.Scope.INLINE)&&O.quill.format(L,!1)})}else this.quill.removeFormat(C,Z.default.sources.USER)},direction:function(O){var C=this.quill.getFormat().align;"rtl"===O&&null==C?this.quill.format("align","right",Z.default.sources.USER):!O&&"right"===C&&this.quill.format("align",!1,Z.default.sources.USER),this.quill.format("direction",O,Z.default.sources.USER)},indent:function(O){var C=this.quill.getSelection(),x=this.quill.getFormat(C),L=parseInt(x.indent||0);if("+1"===O||"-1"===O){var Q="+1"===O?1:-1;"rtl"===x.direction&&(Q*=-1),this.quill.format("indent",L+Q,Z.default.sources.USER)}},link:function(O){!0===O&&(O=prompt("Enter link URL:")),this.quill.format("link",O,Z.default.sources.USER)},list:function(O){var C=this.quill.getSelection(),x=this.quill.getFormat(C);this.quill.format("list","check"===O?"checked"!==x.list&&"unchecked"!==x.list&&"unchecked":O,Z.default.sources.USER)}}},xe.default=p,xe.addControls=m},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var Ce=function(){function H(F,k){for(var _=0;_<k.length;_++){var M=k[_];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(F,M.key,M)}}return function(F,k,_){return k&&H(F.prototype,k),_&&H(F,_),F}}(),P=function H(F,k,_){null===F&&(F=Function.prototype);var M=Object.getOwnPropertyDescriptor(F,k);if(void 0===M){var R=Object.getPrototypeOf(F);return null===R?void 0:H(R,k,_)}if("value"in M)return M.value;var S=M.get;return void 0===S?void 0:S.call(_)};var Y=function(H){function F(k,_){!function K(H,F){if(!(H instanceof F))throw new TypeError("Cannot call a class as a function")}(this,F);var M=function U(H,F){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!F||"object"!=typeof F&&"function"!=typeof F?H:F}(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,k));return M.label.innerHTML=_,M.container.classList.add("ql-color-picker"),[].slice.call(M.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(R){R.classList.add("ql-primary")}),M}return function Z(H,F){if("function"!=typeof F&&null!==F)throw new TypeError("Super expression must either be null or a function, not "+typeof F);H.prototype=Object.create(F&&F.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(H,F):H.__proto__=F)}(F,H),Ce(F,[{key:"buildItem",value:function(_){var M=P(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"buildItem",this).call(this,_);return M.style.backgroundColor=_.getAttribute("value")||"",M}},{key:"selectItem",value:function(_,M){P(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"selectItem",this).call(this,_,M);var R=this.label.querySelector(".ql-color-label"),S=_&&_.getAttribute("data-value")||"";R&&("line"===R.tagName?R.style.stroke=S:R.style.fill=S)}}]),F}(function c(H){return H&&H.__esModule?H:{default:H}}(ke(28)).default);xe.default=Y},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var Ce=function(){function H(F,k){for(var _=0;_<k.length;_++){var M=k[_];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(F,M.key,M)}}return function(F,k,_){return k&&H(F.prototype,k),_&&H(F,_),F}}(),P=function H(F,k,_){null===F&&(F=Function.prototype);var M=Object.getOwnPropertyDescriptor(F,k);if(void 0===M){var R=Object.getPrototypeOf(F);return null===R?void 0:H(R,k,_)}if("value"in M)return M.value;var S=M.get;return void 0===S?void 0:S.call(_)};var Y=function(H){function F(k,_){!function K(H,F){if(!(H instanceof F))throw new TypeError("Cannot call a class as a function")}(this,F);var M=function U(H,F){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!F||"object"!=typeof F&&"function"!=typeof F?H:F}(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,k));return M.container.classList.add("ql-icon-picker"),[].forEach.call(M.container.querySelectorAll(".ql-picker-item"),function(R){R.innerHTML=_[R.getAttribute("data-value")||""]}),M.defaultItem=M.container.querySelector(".ql-selected"),M.selectItem(M.defaultItem),M}return function Z(H,F){if("function"!=typeof F&&null!==F)throw new TypeError("Super expression must either be null or a function, not "+typeof F);H.prototype=Object.create(F&&F.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(H,F):H.__proto__=F)}(F,H),Ce(F,[{key:"selectItem",value:function(_,M){P(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"selectItem",this).call(this,_,M),this.label.innerHTML=(_=_||this.defaultItem).innerHTML}}]),F}(function c(H){return H&&H.__esModule?H:{default:H}}(ke(28)).default);xe.default=Y},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var Ce=function(){function ce(c,K){for(var U=0;U<K.length;U++){var Z=K[U];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(c,Z.key,Z)}}return function(c,K,U){return K&&ce(c.prototype,K),U&&ce(c,U),c}}();var ae=function(){function ce(c,K){var U=this;(function P(ce,c){if(!(ce instanceof c))throw new TypeError("Cannot call a class as a function")})(this,ce),this.quill=c,this.boundsContainer=K||document.body,this.root=c.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){U.root.style.marginTop=-1*U.quill.root.scrollTop+"px"}),this.hide()}return Ce(ce,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(K){var U=K.left+K.width/2-this.root.offsetWidth/2,Z=K.bottom+this.quill.root.scrollTop;this.root.style.left=U+"px",this.root.style.top=Z+"px",this.root.classList.remove("ql-flip");var Y=this.boundsContainer.getBoundingClientRect(),H=this.root.getBoundingClientRect(),F=0;return H.right>Y.right&&(this.root.style.left=U+(F=Y.right-H.right)+"px"),H.left<Y.left&&(this.root.style.left=U+(F=Y.left-H.left)+"px"),H.bottom>Y.bottom&&(this.root.style.top=Z-(K.bottom-K.top+(H.bottom-H.top))+"px",this.root.classList.add("ql-flip")),F}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),ce}();xe.default=ae},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var Ce=function(v,O){if(Array.isArray(v))return v;if(Symbol.iterator in Object(v))return function h(v,O){var C=[],x=!0,L=!1,Q=void 0;try{for(var T,G=v[Symbol.iterator]();!(x=(T=G.next()).done)&&(C.push(T.value),!O||C.length!==O);x=!0);}catch(V){L=!0,Q=V}finally{try{!x&&G.return&&G.return()}finally{if(L)throw Q}}return C}(v,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P=function h(v,O,C){null===v&&(v=Function.prototype);var x=Object.getOwnPropertyDescriptor(v,O);if(void 0===x){var L=Object.getPrototypeOf(v);return null===L?void 0:h(L,O,C)}if("value"in x)return x.value;var Q=x.get;return void 0===Q?void 0:Q.call(C)},ae=function(){function h(v,O){for(var C=0;C<O.length;C++){var x=O[C];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(v,x.key,x)}}return function(v,O,C){return O&&h(v.prototype,O),C&&h(v,C),v}}(),c=R(ke(3)),U=R(ke(8)),Z=ke(43),Y=R(Z),F=R(ke(27)),k=ke(15),M=R(ke(41));function R(h){return h&&h.__esModule?h:{default:h}}function S(h,v){if(!(h instanceof v))throw new TypeError("Cannot call a class as a function")}function y(h,v){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!v||"object"!=typeof v&&"function"!=typeof v?h:v}function w(h,v){if("function"!=typeof v&&null!==v)throw new TypeError("Super expression must either be null or a function, not "+typeof v);h.prototype=Object.create(v&&v.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(h,v):h.__proto__=v)}var p=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],f=function(h){function v(O,C){S(this,v),null!=C.modules.toolbar&&null==C.modules.toolbar.container&&(C.modules.toolbar.container=p);var x=y(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,O,C));return x.quill.container.classList.add("ql-snow"),x}return w(v,h),ae(v,[{key:"extendToolbar",value:function(C){C.container.classList.add("ql-snow"),this.buildButtons([].slice.call(C.container.querySelectorAll("button")),M.default),this.buildPickers([].slice.call(C.container.querySelectorAll("select")),M.default),this.tooltip=new m(this.quill,this.options.bounds),C.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(x,L){C.handlers.link.call(C,!L.format.link)})}}]),v}(Y.default);f.DEFAULTS=(0,c.default)(!0,{},Y.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(v){if(v){var O=this.quill.getSelection();if(null==O||0==O.length)return;var C=this.quill.getText(O);/^\S+@\S+\.\S+$/.test(C)&&0!==C.indexOf("mailto:")&&(C="mailto:"+C),this.quill.theme.tooltip.edit("link",C)}else this.quill.format("link",!1)}}}}});var m=function(h){function v(O,C){S(this,v);var x=y(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,O,C));return x.preview=x.root.querySelector("a.ql-preview"),x}return w(v,h),ae(v,[{key:"listen",value:function(){var C=this;P(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(x){C.root.classList.contains("ql-editing")?C.save():C.edit("link",C.preview.textContent),x.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(x){if(null!=C.linkRange){var L=C.linkRange;C.restoreFocus(),C.quill.formatText(L,"link",!1,U.default.sources.USER),delete C.linkRange}x.preventDefault(),C.hide()}),this.quill.on(U.default.events.SELECTION_CHANGE,function(x,L,Q){if(null!=x){if(0===x.length&&Q===U.default.sources.USER){var G=C.quill.scroll.descendant(F.default,x.index),T=Ce(G,2),V=T[0];if(null!=V){C.linkRange=new k.Range(x.index-T[1],V.length());var X=F.default.formats(V.domNode);return C.preview.textContent=X,C.preview.setAttribute("href",X),C.show(),void C.position(C.quill.getBounds(C.linkRange))}}else delete C.linkRange;C.hide()}})}},{key:"show",value:function(){P(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),v}(Z.BaseTooltip);m.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),xe.default=f},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var P=de(ke(29)),ae=ke(36),ce=ke(38),c=ke(64),U=de(ke(65)),Y=de(ke(66)),H=ke(67),F=de(H),k=ke(37),_=ke(26),M=ke(39),R=ke(40),y=de(ke(56)),p=de(ke(68)),m=de(ke(27)),v=de(ke(69)),C=de(ke(70)),L=de(ke(71)),G=de(ke(72)),V=de(ke(73)),J=ke(13),X=de(J),ee=de(ke(74)),D=de(ke(75)),re=de(ke(57)),ve=de(ke(41)),Te=de(ke(28)),Me=de(ke(59)),Ge=de(ke(60)),pe=de(ke(61)),be=de(ke(108)),se=de(ke(62));function de(_e){return _e&&_e.__esModule?_e:{default:_e}}P.default.register({"attributors/attribute/direction":ce.DirectionAttribute,"attributors/class/align":ae.AlignClass,"attributors/class/background":k.BackgroundClass,"attributors/class/color":_.ColorClass,"attributors/class/direction":ce.DirectionClass,"attributors/class/font":M.FontClass,"attributors/class/size":R.SizeClass,"attributors/style/align":ae.AlignStyle,"attributors/style/background":k.BackgroundStyle,"attributors/style/color":_.ColorStyle,"attributors/style/direction":ce.DirectionStyle,"attributors/style/font":M.FontStyle,"attributors/style/size":R.SizeStyle},!0),P.default.register({"formats/align":ae.AlignClass,"formats/direction":ce.DirectionClass,"formats/indent":c.IndentClass,"formats/background":k.BackgroundStyle,"formats/color":_.ColorStyle,"formats/font":M.FontClass,"formats/size":R.SizeClass,"formats/blockquote":U.default,"formats/code-block":X.default,"formats/header":Y.default,"formats/list":F.default,"formats/bold":y.default,"formats/code":J.Code,"formats/italic":p.default,"formats/link":m.default,"formats/script":v.default,"formats/strike":C.default,"formats/underline":L.default,"formats/image":G.default,"formats/video":V.default,"formats/list/item":H.ListItem,"modules/formula":ee.default,"modules/syntax":D.default,"modules/toolbar":re.default,"themes/bubble":be.default,"themes/snow":se.default,"ui/icons":ve.default,"ui/picker":Te.default,"ui/icon-picker":Ge.default,"ui/color-picker":Me.default,"ui/tooltip":pe.default},!0),xe.default=P.default},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0}),xe.IndentClass=void 0;var Ce=function(){function F(k,_){for(var M=0;M<_.length;M++){var R=_[M];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(k,R.key,R)}}return function(k,_,M){return _&&F(k.prototype,_),M&&F(k,M),k}}(),P=function F(k,_,M){null===k&&(k=Function.prototype);var R=Object.getOwnPropertyDescriptor(k,_);if(void 0===R){var S=Object.getPrototypeOf(k);return null===S?void 0:F(S,_,M)}if("value"in R)return R.value;var y=R.get;return void 0===y?void 0:y.call(M)},ce=function c(F){return F&&F.__esModule?F:{default:F}}(ke(0));var Y=function(F){function k(){return function K(F,k){if(!(F instanceof k))throw new TypeError("Cannot call a class as a function")}(this,k),function U(F,k){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!k||"object"!=typeof k&&"function"!=typeof k?F:k}(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return function Z(F,k){if("function"!=typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function, not "+typeof k);F.prototype=Object.create(k&&k.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(F,k):F.__proto__=k)}(k,F),Ce(k,[{key:"add",value:function(M,R){if("+1"===R||"-1"===R){var S=this.value(M)||0;R="+1"===R?S+1:S-1}return 0===R?(this.remove(M),!0):P(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"add",this).call(this,M,R)}},{key:"canAdd",value:function(M,R){return P(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"canAdd",this).call(this,M,R)||P(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"canAdd",this).call(this,M,parseInt(R))}},{key:"value",value:function(M){return parseInt(P(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"value",this).call(this,M))||void 0}}]),k}(ce.default.Attributor.Class),H=new Y("indent","ql-indent",{scope:ce.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});xe.IndentClass=H},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var U=function(Z){function Y(){return function ce(Z,Y){if(!(Z instanceof Y))throw new TypeError("Cannot call a class as a function")}(this,Y),function c(Z,Y){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!Y||"object"!=typeof Y&&"function"!=typeof Y?Z:Y}(this,(Y.__proto__||Object.getPrototypeOf(Y)).apply(this,arguments))}return function K(Z,Y){if("function"!=typeof Y&&null!==Y)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);Z.prototype=Object.create(Y&&Y.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,Y):Z.__proto__=Y)}(Y,Z),Y}(function ae(Z){return Z&&Z.__esModule?Z:{default:Z}}(ke(4)).default);U.blotName="blockquote",U.tagName="blockquote",xe.default=U},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var Ce=function(){function Y(H,F){for(var k=0;k<F.length;k++){var _=F[k];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(H,_.key,_)}}return function(H,F,k){return F&&Y(H.prototype,F),k&&Y(H,k),H}}();var Z=function(Y){function H(){return function c(Y,H){if(!(Y instanceof H))throw new TypeError("Cannot call a class as a function")}(this,H),function K(Y,H){if(!Y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!H||"object"!=typeof H&&"function"!=typeof H?Y:H}(this,(H.__proto__||Object.getPrototypeOf(H)).apply(this,arguments))}return function U(Y,H){if("function"!=typeof H&&null!==H)throw new TypeError("Super expression must either be null or a function, not "+typeof H);Y.prototype=Object.create(H&&H.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf(Y,H):Y.__proto__=H)}(H,Y),Ce(H,null,[{key:"formats",value:function(k){return this.tagName.indexOf(k.tagName)+1}}]),H}(function ce(Y){return Y&&Y.__esModule?Y:{default:Y}}(ke(4)).default);Z.blotName="header",Z.tagName=["H1","H2","H3","H4","H5","H6"],xe.default=Z},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0}),xe.default=xe.ListItem=void 0;var Ce=function(){function S(y,w){for(var p=0;p<w.length;p++){var f=w[p];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(y,f.key,f)}}return function(y,w,p){return w&&S(y.prototype,w),p&&S(y,p),y}}(),P=function S(y,w,p){null===y&&(y=Function.prototype);var f=Object.getOwnPropertyDescriptor(y,w);if(void 0===f){var m=Object.getPrototypeOf(y);return null===m?void 0:S(m,w,p)}if("value"in f)return f.value;var h=f.get;return void 0===h?void 0:h.call(p)},ce=Y(ke(0)),K=Y(ke(4)),Z=Y(ke(25));function Y(S){return S&&S.__esModule?S:{default:S}}function F(S,y){if(!(S instanceof y))throw new TypeError("Cannot call a class as a function")}function k(S,y){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!y||"object"!=typeof y&&"function"!=typeof y?S:y}function _(S,y){if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function, not "+typeof y);S.prototype=Object.create(y&&y.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(S,y):S.__proto__=y)}var M=function(S){function y(){return F(this,y),k(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return _(y,S),Ce(y,[{key:"format",value:function(p,f){p!==R.blotName||f?P(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,p,f):this.replaceWith(ce.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():P(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(p,f){return this.parent.isolate(this.offset(this.parent),this.length()),p===this.parent.statics.blotName?(this.parent.replaceWith(p,f),this):(this.parent.unwrap(),P(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"replaceWith",this).call(this,p,f))}}],[{key:"formats",value:function(p){return p.tagName===this.tagName?void 0:P(y.__proto__||Object.getPrototypeOf(y),"formats",this).call(this,p)}}]),y}(K.default);M.blotName="list-item",M.tagName="LI";var R=function(S){function y(w){F(this,y);var p=k(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,w)),f=function(h){if(h.target.parentNode===w){var v=p.statics.formats(w),O=ce.default.find(h.target);"checked"===v?O.format("list","unchecked"):"unchecked"===v&&O.format("list","checked")}};return w.addEventListener("touchstart",f),w.addEventListener("mousedown",f),p}return _(y,S),Ce(y,null,[{key:"create",value:function(p){var f="ordered"===p?"OL":"UL",m=P(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,f);return("checked"===p||"unchecked"===p)&&m.setAttribute("data-checked","checked"===p),m}},{key:"formats",value:function(p){return"OL"===p.tagName?"ordered":"UL"===p.tagName?p.hasAttribute("data-checked")?"true"===p.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),Ce(y,[{key:"format",value:function(p,f){this.children.length>0&&this.children.tail.format(p,f)}},{key:"formats",value:function(){return function H(S,y,w){return y in S?Object.defineProperty(S,y,{value:w,enumerable:!0,configurable:!0,writable:!0}):S[y]=w,S}({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(p,f){if(p instanceof M)P(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"insertBefore",this).call(this,p,f);else{var m=null==f?this.length():f.offset(this),h=this.split(m);h.parent.insertBefore(p,h)}}},{key:"optimize",value:function(p){P(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"optimize",this).call(this,p);var f=this.next;null!=f&&f.prev===this&&f.statics.blotName===this.statics.blotName&&f.domNode.tagName===this.domNode.tagName&&f.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(f.moveChildren(this),f.remove())}},{key:"replace",value:function(p){if(p.statics.blotName!==this.statics.blotName){var f=ce.default.create(this.statics.defaultChild);p.moveChildren(f),this.appendChild(f)}P(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"replace",this).call(this,p)}}]),y}(Z.default);R.blotName="list",R.scope=ce.default.Scope.BLOCK_BLOT,R.tagName=["OL","UL"],R.defaultChild="list-item",R.allowedChildren=[M],xe.ListItem=M,xe.default=R},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var U=function(Z){function Y(){return function ce(Z,Y){if(!(Z instanceof Y))throw new TypeError("Cannot call a class as a function")}(this,Y),function c(Z,Y){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!Y||"object"!=typeof Y&&"function"!=typeof Y?Z:Y}(this,(Y.__proto__||Object.getPrototypeOf(Y)).apply(this,arguments))}return function K(Z,Y){if("function"!=typeof Y&&null!==Y)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);Z.prototype=Object.create(Y&&Y.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,Y):Z.__proto__=Y)}(Y,Z),Y}(function ae(Z){return Z&&Z.__esModule?Z:{default:Z}}(ke(56)).default);U.blotName="italic",U.tagName=["EM","I"],xe.default=U},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var Ce=function(){function H(F,k){for(var _=0;_<k.length;_++){var M=k[_];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(F,M.key,M)}}return function(F,k,_){return k&&H(F.prototype,k),_&&H(F,_),F}}(),P=function H(F,k,_){null===F&&(F=Function.prototype);var M=Object.getOwnPropertyDescriptor(F,k);if(void 0===M){var R=Object.getPrototypeOf(F);return null===R?void 0:H(R,k,_)}if("value"in M)return M.value;var S=M.get;return void 0===S?void 0:S.call(_)};var Y=function(H){function F(){return function K(H,F){if(!(H instanceof F))throw new TypeError("Cannot call a class as a function")}(this,F),function U(H,F){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!F||"object"!=typeof F&&"function"!=typeof F?H:F}(this,(F.__proto__||Object.getPrototypeOf(F)).apply(this,arguments))}return function Z(H,F){if("function"!=typeof F&&null!==F)throw new TypeError("Super expression must either be null or a function, not "+typeof F);H.prototype=Object.create(F&&F.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(H,F):H.__proto__=F)}(F,H),Ce(F,null,[{key:"create",value:function(_){return"super"===_?document.createElement("sup"):"sub"===_?document.createElement("sub"):P(F.__proto__||Object.getPrototypeOf(F),"create",this).call(this,_)}},{key:"formats",value:function(_){return"SUB"===_.tagName?"sub":"SUP"===_.tagName?"super":void 0}}]),F}(function c(H){return H&&H.__esModule?H:{default:H}}(ke(6)).default);Y.blotName="script",Y.tagName=["SUB","SUP"],xe.default=Y},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var U=function(Z){function Y(){return function ce(Z,Y){if(!(Z instanceof Y))throw new TypeError("Cannot call a class as a function")}(this,Y),function c(Z,Y){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!Y||"object"!=typeof Y&&"function"!=typeof Y?Z:Y}(this,(Y.__proto__||Object.getPrototypeOf(Y)).apply(this,arguments))}return function K(Z,Y){if("function"!=typeof Y&&null!==Y)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);Z.prototype=Object.create(Y&&Y.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,Y):Z.__proto__=Y)}(Y,Z),Y}(function ae(Z){return Z&&Z.__esModule?Z:{default:Z}}(ke(6)).default);U.blotName="strike",U.tagName="S",xe.default=U},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var U=function(Z){function Y(){return function ce(Z,Y){if(!(Z instanceof Y))throw new TypeError("Cannot call a class as a function")}(this,Y),function c(Z,Y){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!Y||"object"!=typeof Y&&"function"!=typeof Y?Z:Y}(this,(Y.__proto__||Object.getPrototypeOf(Y)).apply(this,arguments))}return function K(Z,Y){if("function"!=typeof Y&&null!==Y)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);Z.prototype=Object.create(Y&&Y.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,Y):Z.__proto__=Y)}(Y,Z),Y}(function ae(Z){return Z&&Z.__esModule?Z:{default:Z}}(ke(6)).default);U.blotName="underline",U.tagName="U",xe.default=U},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var Ce=function(){function k(_,M){for(var R=0;R<M.length;R++){var S=M[R];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(_,S.key,S)}}return function(_,M,R){return M&&k(_.prototype,M),R&&k(_,R),_}}(),P=function k(_,M,R){null===_&&(_=Function.prototype);var S=Object.getOwnPropertyDescriptor(_,M);if(void 0===S){var y=Object.getPrototypeOf(_);return null===y?void 0:k(y,M,R)}if("value"in S)return S.value;var w=S.get;return void 0===w?void 0:w.call(R)},ce=function K(k){return k&&k.__esModule?k:{default:k}}(ke(0)),c=ke(27);var H=["alt","height","width"],F=function(k){function _(){return function U(k,_){if(!(k instanceof _))throw new TypeError("Cannot call a class as a function")}(this,_),function Z(k,_){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||"object"!=typeof _&&"function"!=typeof _?k:_}(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return function Y(k,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function, not "+typeof _);k.prototype=Object.create(_&&_.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(k,_):k.__proto__=_)}(_,k),Ce(_,[{key:"format",value:function(R,S){H.indexOf(R)>-1?S?this.domNode.setAttribute(R,S):this.domNode.removeAttribute(R):P(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"format",this).call(this,R,S)}}],[{key:"create",value:function(R){var S=P(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this,R);return"string"==typeof R&&S.setAttribute("src",this.sanitize(R)),S}},{key:"formats",value:function(R){return H.reduce(function(S,y){return R.hasAttribute(y)&&(S[y]=R.getAttribute(y)),S},{})}},{key:"match",value:function(R){return/\.(jpe?g|gif|png)$/.test(R)||/^data:image\/.+;base64/.test(R)}},{key:"sanitize",value:function(R){return(0,c.sanitize)(R,["http","https","data"])?R:"//:0"}},{key:"value",value:function(R){return R.getAttribute("src")}}]),_}(ce.default.Embed);F.blotName="image",F.tagName="IMG",xe.default=F},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0});var Ce=function(){function k(_,M){for(var R=0;R<M.length;R++){var S=M[R];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(_,S.key,S)}}return function(_,M,R){return M&&k(_.prototype,M),R&&k(_,R),_}}(),P=function k(_,M,R){null===_&&(_=Function.prototype);var S=Object.getOwnPropertyDescriptor(_,M);if(void 0===S){var y=Object.getPrototypeOf(_);return null===y?void 0:k(y,M,R)}if("value"in S)return S.value;var w=S.get;return void 0===w?void 0:w.call(R)},ae=ke(4),c=function K(k){return k&&k.__esModule?k:{default:k}}(ke(27));var H=["height","width"],F=function(k){function _(){return function U(k,_){if(!(k instanceof _))throw new TypeError("Cannot call a class as a function")}(this,_),function Z(k,_){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!_||"object"!=typeof _&&"function"!=typeof _?k:_}(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return function Y(k,_){if("function"!=typeof _&&null!==_)throw new TypeError("Super expression must either be null or a function, not "+typeof _);k.prototype=Object.create(_&&_.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(k,_):k.__proto__=_)}(_,k),Ce(_,[{key:"format",value:function(R,S){H.indexOf(R)>-1?S?this.domNode.setAttribute(R,S):this.domNode.removeAttribute(R):P(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"format",this).call(this,R,S)}}],[{key:"create",value:function(R){var S=P(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this,R);return S.setAttribute("frameborder","0"),S.setAttribute("allowfullscreen",!0),S.setAttribute("src",this.sanitize(R)),S}},{key:"formats",value:function(R){return H.reduce(function(S,y){return R.hasAttribute(y)&&(S[y]=R.getAttribute(y)),S},{})}},{key:"sanitize",value:function(R){return c.default.sanitize(R)}},{key:"value",value:function(R){return R.getAttribute("src")}}]),_}(ae.BlockEmbed);F.blotName="video",F.className="ql-video",F.tagName="IFRAME",xe.default=F},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0}),xe.default=xe.FormulaBlot=void 0;var Ce=function(){function R(S,y){for(var w=0;w<y.length;w++){var p=y[w];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(S,p.key,p)}}return function(S,y,w){return y&&R(S.prototype,y),w&&R(S,w),S}}(),P=function R(S,y,w){null===S&&(S=Function.prototype);var p=Object.getOwnPropertyDescriptor(S,y);if(void 0===p){var f=Object.getPrototypeOf(S);return null===f?void 0:R(f,y,w)}if("value"in p)return p.value;var m=p.get;return void 0===m?void 0:m.call(w)},ce=Y(ke(35)),K=Y(ke(5)),Z=Y(ke(9));function Y(R){return R&&R.__esModule?R:{default:R}}function H(R,S){if(!(R instanceof S))throw new TypeError("Cannot call a class as a function")}function F(R,S){if(!R)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!S||"object"!=typeof S&&"function"!=typeof S?R:S}function k(R,S){if("function"!=typeof S&&null!==S)throw new TypeError("Super expression must either be null or a function, not "+typeof S);R.prototype=Object.create(S&&S.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(R,S):R.__proto__=S)}var _=function(R){function S(){return H(this,S),F(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return k(S,R),Ce(S,null,[{key:"create",value:function(w){var p=P(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,w);return"string"==typeof w&&(window.katex.render(w,p,{throwOnError:!1,errorColor:"#f00"}),p.setAttribute("data-value",w)),p}},{key:"value",value:function(w){return w.getAttribute("data-value")}}]),S}(ce.default);_.blotName="formula",_.className="ql-formula",_.tagName="SPAN";var M=function(R){function S(){H(this,S);var y=F(this,(S.__proto__||Object.getPrototypeOf(S)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return y}return k(S,R),Ce(S,null,[{key:"register",value:function(){K.default.register(_,!0)}}]),S}(Z.default);xe.FormulaBlot=_,xe.default=M},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0}),xe.default=xe.CodeToken=xe.CodeBlock=void 0;var Ce=function(){function w(p,f){for(var m=0;m<f.length;m++){var h=f[m];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(p,h.key,h)}}return function(p,f,m){return f&&w(p.prototype,f),m&&w(p,m),p}}(),P=function w(p,f,m){null===p&&(p=Function.prototype);var h=Object.getOwnPropertyDescriptor(p,f);if(void 0===h){var v=Object.getPrototypeOf(p);return null===v?void 0:w(v,f,m)}if("value"in h)return h.value;var O=h.get;return void 0===O?void 0:O.call(m)},ce=F(ke(0)),K=F(ke(5)),Z=F(ke(9));function F(w){return w&&w.__esModule?w:{default:w}}function k(w,p){if(!(w instanceof p))throw new TypeError("Cannot call a class as a function")}function _(w,p){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!p||"object"!=typeof p&&"function"!=typeof p?w:p}function M(w,p){if("function"!=typeof p&&null!==p)throw new TypeError("Super expression must either be null or a function, not "+typeof p);w.prototype=Object.create(p&&p.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(w,p):w.__proto__=p)}var R=function(w){function p(){return k(this,p),_(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return M(p,w),Ce(p,[{key:"replaceWith",value:function(m){this.domNode.textContent=this.domNode.textContent,this.attach(),P(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"replaceWith",this).call(this,m)}},{key:"highlight",value:function(m){var h=this.domNode.textContent;this.cachedText!==h&&((h.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=m(h),this.domNode.normalize(),this.attach()),this.cachedText=h)}}]),p}(F(ke(13)).default);R.className="ql-syntax";var S=new ce.default.Attributor.Class("token","hljs",{scope:ce.default.Scope.INLINE}),y=function(w){function p(f,m){k(this,p);var h=_(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,f,m));if("function"!=typeof h.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var v=null;return h.quill.on(K.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(v),v=setTimeout(function(){h.highlight(),v=null},h.options.interval)}),h.highlight(),h}return M(p,w),Ce(p,null,[{key:"register",value:function(){K.default.register(S,!0),K.default.register(R,!0)}}]),Ce(p,[{key:"highlight",value:function(){var m=this;if(!this.quill.selection.composing){this.quill.update(K.default.sources.USER);var h=this.quill.getSelection();this.quill.scroll.descendants(R).forEach(function(v){v.highlight(m.options.highlight)}),this.quill.update(K.default.sources.SILENT),null!=h&&this.quill.setSelection(h,K.default.sources.SILENT)}}}]),p}(Z.default);y.DEFAULTS={highlight:null==window.hljs?null:function(w){return window.hljs.highlightAuto(w).value},interval:1e3},xe.CodeBlock=R,xe.CodeToken=S,xe.default=y},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(Ye,xe){Ye.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(Ye,xe){Ye.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(Ye,xe){Ye.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(Ye,xe){Ye.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(Ye,xe){Ye.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(Ye,xe,ke){"use strict";Object.defineProperty(xe,"__esModule",{value:!0}),xe.default=xe.BubbleTooltip=void 0;var Ce=function p(f,m,h){null===f&&(f=Function.prototype);var v=Object.getOwnPropertyDescriptor(f,m);if(void 0===v){var O=Object.getPrototypeOf(f);return null===O?void 0:p(O,m,h)}if("value"in v)return v.value;var C=v.get;return void 0===C?void 0:C.call(h)},P=function(){function p(f,m){for(var h=0;h<m.length;h++){var v=m[h];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}return function(f,m,h){return m&&p(f.prototype,m),h&&p(f,h),f}}(),ce=k(ke(3)),K=k(ke(8)),U=ke(43),Z=k(U),Y=ke(15),F=k(ke(41));function k(p){return p&&p.__esModule?p:{default:p}}function _(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")}function M(p,f){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!=typeof f&&"function"!=typeof f?p:f}function R(p,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);p.prototype=Object.create(f&&f.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(p,f):p.__proto__=f)}var S=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],y=function(p){function f(m,h){_(this,f),null!=h.modules.toolbar&&null==h.modules.toolbar.container&&(h.modules.toolbar.container=S);var v=M(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,m,h));return v.quill.container.classList.add("ql-bubble"),v}return R(f,p),P(f,[{key:"extendToolbar",value:function(h){this.tooltip=new w(this.quill,this.options.bounds),this.tooltip.root.appendChild(h.container),this.buildButtons([].slice.call(h.container.querySelectorAll("button")),F.default),this.buildPickers([].slice.call(h.container.querySelectorAll("select")),F.default)}}]),f}(Z.default);y.DEFAULTS=(0,ce.default)(!0,{},Z.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(f){f?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var w=function(p){function f(m,h){_(this,f);var v=M(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,m,h));return v.quill.on(K.default.events.EDITOR_CHANGE,function(O,C,x,L){if(O===K.default.events.SELECTION_CHANGE)if(null!=C&&C.length>0&&L===K.default.sources.USER){v.show(),v.root.style.left="0px",v.root.style.width="",v.root.style.width=v.root.offsetWidth+"px";var Q=v.quill.getLines(C.index,C.length);if(1===Q.length)v.position(v.quill.getBounds(C));else{var G=Q[Q.length-1],T=v.quill.getIndex(G),V=Math.min(G.length()-1,C.index+C.length-T),J=v.quill.getBounds(new Y.Range(T,V));v.position(J)}}else document.activeElement!==v.textbox&&v.quill.hasFocus()&&v.hide()}),v}return R(f,p),P(f,[{key:"listen",value:function(){var h=this;Ce(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){h.root.classList.remove("ql-editing")}),this.quill.on(K.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!h.root.classList.contains("ql-hidden")){var v=h.quill.getSelection();null!=v&&h.position(h.quill.getBounds(v))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(h){var v=Ce(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"position",this).call(this,h),O=this.root.querySelector(".ql-tooltip-arrow");if(O.style.marginLeft="",0===v)return v;O.style.marginLeft=-1*v-O.offsetWidth/2+"px"}}]),f}(U.BaseTooltip);w.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),xe.BubbleTooltip=w,xe.default=y},function(Ye,xe,ke){Ye.exports=ke(63)}]).default},7156:Cn=>{function Ye(ke,Ce,P,ae,ce,c,K){try{var U=ke[c](K),Z=U.value}catch(Y){return void P(Y)}U.done?Ce(Z):Promise.resolve(Z).then(ae,ce)}Cn.exports=function xe(ke){return function(){var Ce=this,P=arguments;return new Promise(function(ae,ce){var c=ke.apply(Ce,P);function K(Z){Ye(c,ae,ce,K,U,"next",Z)}function U(Z){Ye(c,ae,ce,K,U,"throw",Z)}K(void 0)})}},Cn.exports.__esModule=!0,Cn.exports.default=Cn.exports},6773:(Cn,Ye,xe)=>{"use strict";function ke(){var P=arguments[0];"string"==typeof P&&(P=document.createElement(P));var ae=1,ce=arguments[1];if(ce&&"object"==typeof ce&&null==ce.nodeType&&!Array.isArray(ce)){for(var c in ce)if(Object.prototype.hasOwnProperty.call(ce,c)){var K=ce[c];"string"==typeof K?P.setAttribute(c,K):null!=K&&(P[c]=K)}ae++}for(;ae<arguments.length;ae++)Ce(P,arguments[ae]);return P}function Ce(P,ae){if("string"==typeof ae)P.appendChild(document.createTextNode(ae));else if(null!=ae)if(null!=ae.nodeType)P.appendChild(ae);else{if(!Array.isArray(ae))throw new RangeError("Unsupported child node: "+ae);for(var ce=0;ce<ae.length;ce++)Ce(P,ae[ce])}}xe.d(Ye,{Z:()=>ke})},5431:(Cn,Ye,xe)=>{"use strict";xe.d(Ye,{V:()=>ce});const Ce=typeof Symbol>"u"?"__\u037c":Symbol.for("\u037c"),P=typeof Symbol>"u"?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),ae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class ce{constructor(Z,Y){this.rules=[];let{finish:H}=Y||{};function F(_){return/^@/.test(_)?[_]:_.split(/,\s*/)}function k(_,M,R,S){let y=[],w=/^@(\w+)\b/.exec(_[0]),p=w&&"keyframes"==w[1];if(w&&null==M)return R.push(_[0]+";");for(let f in M){let m=M[f];if(/&/.test(f))k(f.split(/,\s*/).map(h=>_.map(v=>h.replace(/&/,v))).reduce((h,v)=>h.concat(v)),m,R);else if(m&&"object"==typeof m){if(!w)throw new RangeError("The value of a property ("+f+") should be a primitive value.");k(F(f),m,y,p)}else null!=m&&y.push(f.replace(/_.*/,"").replace(/[A-Z]/g,h=>"-"+h.toLowerCase())+": "+m+";")}(y.length||p)&&R.push((!H||w||S?_:_.map(H)).join(", ")+" {"+y.join(" ")+"}")}for(let _ in Z)k(F(_),Z[_],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let Z=ae[Ce]||1;return ae[Ce]=Z+1,"\u037c"+Z.toString(36)}static mount(Z,Y){(Z[P]||new K(Z)).mount(Array.isArray(Y)?Y:[Y])}}let c=new Map;class K{constructor(Z){let Y=Z.ownerDocument||Z,H=Y.defaultView;if(!Z.head&&Z.adoptedStyleSheets&&H.CSSStyleSheet){let F=c.get(Y);if(F)return Z.adoptedStyleSheets=[F.sheet,...Z.adoptedStyleSheets],Z[P]=F;this.sheet=new H.CSSStyleSheet,Z.adoptedStyleSheets=[this.sheet,...Z.adoptedStyleSheets],c.set(Y,this)}else{this.styleTag=Y.createElement("style");let F=Z.head||Z;F.insertBefore(this.styleTag,F.firstChild)}this.modules=[],Z[P]=this}mount(Z){let Y=this.sheet,H=0,F=0;for(let k=0;k<Z.length;k++){let _=Z[k],M=this.modules.indexOf(_);if(M<F&&M>-1&&(this.modules.splice(M,1),F--,M=-1),-1==M){if(this.modules.splice(F++,0,_),Y)for(let R=0;R<_.rules.length;R++)Y.insertRule(_.rules[R],H++)}else{for(;F<M;)H+=this.modules[F++].rules.length;H+=_.rules.length,F++}}if(!Y){let k="";for(let _=0;_<this.modules.length;_++)k+=this.modules[_].getRules()+"\n";this.styleTag.textContent=k}}}},4074:(Cn,Ye,xe)=>{"use strict";xe.d(Ye,{YG:()=>Y,uY:()=>Ce,ue:()=>ke});for(var ke={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ce={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},P=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent),ce=(typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent),typeof navigator<"u"&&/Mac/.test(navigator.platform)),c=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),K=ce||P&&+P[1]<57,U=0;U<10;U++)ke[48+U]=ke[96+U]=String(U);for(U=1;U<=24;U++)ke[U+111]="F"+U;for(U=65;U<=90;U++)ke[U]=String.fromCharCode(U+32),Ce[U]=String.fromCharCode(U);for(var Z in ke)Ce.hasOwnProperty(Z)||(Ce[Z]=ke[Z]);function Y(H){var k=!(K&&(H.ctrlKey||H.altKey||H.metaKey)||c&&H.shiftKey&&H.key&&1==H.key.length||"Unidentified"==H.key)&&H.key||(H.shiftKey?Ce:ke)[H.keyCode]||H.key||"Unidentified";return"Esc"==k&&(k="Escape"),"Del"==k&&(k="Delete"),"Left"==k&&(k="ArrowLeft"),"Up"==k&&(k="ArrowUp"),"Right"==k&&(k="ArrowRight"),"Down"==k&&(k="ArrowDown"),k}}}]);