<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>storage-manager documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">storage-manager documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content class">
                   <div class="content-data">












<ol class="breadcrumb">
  <li>Classes</li>
  <li >CodemirrorRepository</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/lib/core/codemirror.repository.ts</code>
        </p>






            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Static</span>
                                <a href="#evaluateCustomMethod" >evaluateCustomMethod</a>
                            </li>
                            <li>
                                    <span class="modifier">Static</span>
                                <a href="#extractMemberExpressionVariableNameNode" >extractMemberExpressionVariableNameNode</a>
                            </li>
                            <li>
                                    <span class="modifier">Static</span>
                                <a href="#getEvaluationResult" >getEvaluationResult</a>
                            </li>
                            <li>
                                    <span class="modifier">Static</span>
                                <a href="#getMainMethod" >getMainMethod</a>
                            </li>
                            <li>
                                    <span class="modifier">Static</span>
                                <a href="#getMemberExpressionContainingCandidates" >getMemberExpressionContainingCandidates</a>
                            </li>
                            <li>
                                    <span class="modifier">Static</span>
                                <a href="#getUsedInputParams" >getUsedInputParams</a>
                            </li>
                            <li>
                                    <span class="modifier">Static</span>
                                <a href="#iterateToMemberStatementNode" >iterateToMemberStatementNode</a>
                            </li>
                            <li>
                                    <span class="modifier">Static</span>
                                <a href="#resolveVariableValue" >resolveVariableValue</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>



            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="evaluateCustomMethod"></a>
                    <span class="name">
                        <span class="modifier">Static</span>
                        <span ><b>evaluateCustomMethod</b></span>
                        <a href="#evaluateCustomMethod"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>evaluateCustomMethod(state?: EditorState, text?: string[] | string, injector?: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="11"
                            class="link-to-prism">src/lib/core/codemirror.repository.ts:11</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>state</td>
                                    <td>
                                            <code>EditorState</code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                </tr>
                                <tr>
                                    <td>text</td>
                                    <td>
                                            <code>string[] | string</code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                </tr>
                                <tr>
                                    <td>injector</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/IMethodEvaluationResult.html" target="_self" >IMethodEvaluationResult</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="extractMemberExpressionVariableNameNode"></a>
                    <span class="name">
                        <span class="modifier">Static</span>
                        <span ><b>extractMemberExpressionVariableNameNode</b></span>
                        <a href="#extractMemberExpressionVariableNameNode"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>extractMemberExpressionVariableNameNode(node: SyntaxNode | null)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="232"
                            class="link-to-prism">src/lib/core/codemirror.repository.ts:232</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>node</td>
                                    <td>
                                            <code>SyntaxNode | null</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>SyntaxNode | null</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getEvaluationResult"></a>
                    <span class="name">
                        <span class="modifier">Static</span>
                        <span ><b>getEvaluationResult</b></span>
                        <a href="#getEvaluationResult"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getEvaluationResult(state: EditorState, parent: SyntaxNode, block: SyntaxNode, injector: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="45"
                            class="link-to-prism">src/lib/core/codemirror.repository.ts:45</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>state</td>
                                    <td>
                                            <code>EditorState</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>parent</td>
                                    <td>
                                            <code>SyntaxNode</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>block</td>
                                    <td>
                                            <code>SyntaxNode</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>injector</td>
                                    <td>
                                                <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/IMethodEvaluationResult.html" target="_self" >IMethodEvaluationResult</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getMainMethod"></a>
                    <span class="name">
                        <span class="modifier">Static</span>
                        <span ><b>getMainMethod</b></span>
                        <a href="#getMainMethod"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getMainMethod(tree?: Tree, state?: EditorState, text?: string[] | string)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="133"
                            class="link-to-prism">src/lib/core/codemirror.repository.ts:133</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>tree</td>
                                    <td>
                                            <code>Tree</code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                </tr>
                                <tr>
                                    <td>state</td>
                                    <td>
                                            <code>EditorState</code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                </tr>
                                <tr>
                                    <td>text</td>
                                    <td>
                                            <code>string[] | string</code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../interfaces/ISyntaxNodeResponse.html" target="_self" >ISyntaxNodeResponse</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getMemberExpressionContainingCandidates"></a>
                    <span class="name">
                        <span class="modifier">Static</span>
                        <span ><b>getMemberExpressionContainingCandidates</b></span>
                        <a href="#getMemberExpressionContainingCandidates"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getMemberExpressionContainingCandidates(blockNode: SyntaxNode | null)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="213"
                            class="link-to-prism">src/lib/core/codemirror.repository.ts:213</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>blockNode</td>
                                    <td>
                                            <code>SyntaxNode | null</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>SyntaxNode[]</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getUsedInputParams"></a>
                    <span class="name">
                        <span class="modifier">Static</span>
                        <span ><b>getUsedInputParams</b></span>
                        <a href="#getUsedInputParams"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getUsedInputParams(state?: EditorState, text?: string[] | string)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="157"
                            class="link-to-prism">src/lib/core/codemirror.repository.ts:157</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>state</td>
                                    <td>
                                            <code>EditorState</code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                </tr>
                                <tr>
                                    <td>text</td>
                                    <td>
                                            <code>string[] | string</code>
                                    </td>

                                    <td>
                                        Yes
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>literal type[]</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="iterateToMemberStatementNode"></a>
                    <span class="name">
                        <span class="modifier">Static</span>
                        <span ><b>iterateToMemberStatementNode</b></span>
                        <a href="#iterateToMemberStatementNode"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>iterateToMemberStatementNode(node: SyntaxNode | null)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="239"
                            class="link-to-prism">src/lib/core/codemirror.repository.ts:239</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>node</td>
                                    <td>
                                            <code>SyntaxNode | null</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>    <code>SyntaxNode[]</code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="resolveVariableValue"></a>
                    <span class="name">
                        <span class="modifier">Static</span>
                        <span ><b>resolveVariableValue</b></span>
                        <a href="#resolveVariableValue"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>resolveVariableValue(state: EditorState, blockNode: SyntaxNode, variableName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="277"
                            class="link-to-prism">src/lib/core/codemirror.repository.ts:277</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>state</td>
                                    <td>
                                            <code>EditorState</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>blockNode</td>
                                    <td>
                                            <code>SyntaxNode</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                                <tr>
                                    <td>variableName</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>





    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { javascript } from &quot;@codemirror/lang-javascript&quot;;
import { syntaxTree } from &quot;@codemirror/language&quot;;
import { EditorState } from &quot;@codemirror/state&quot;;
import { MethodEvaluationStatus } from &quot;../process-builder/globals/method-evaluation-status&quot;;
import { Tree, SyntaxNode } from &#x27;node_modules/@lezer/common/dist/tree&#x27;;
import { IMethodEvaluationResult } from &quot;../process-builder/interfaces/method-evaluation-result.interface&quot;;
import { ISyntaxNodeResponse } from &quot;./interfaces/syntax-node-response.interface&quot;;

export class CodemirrorRepository {

    static evaluateCustomMethod(state?: EditorState, text?: string[] | string, injector?: any): IMethodEvaluationResult {
        const convertedText &#x3D; Array.isArray(text) ? text.join(&#x27;\n&#x27;) : text;
        if (!state) {
            if (!text) {
                throw (&#x27;no state and no text passed&#x27;);
            }
            
            state &#x3D; EditorState.create({
                doc: convertedText,
                extensions: [
                    javascript()
                ]
            });
        }

        const tree &#x3D; syntaxTree(state);
        const mainMethod &#x3D; this.getMainMethod(tree, state, text);
        if (!mainMethod.node) {
            return { status: MethodEvaluationStatus.NoMainMethodFound, valueIsDefinite: false };
        }

        const arrowFunction &#x3D; mainMethod.node.getChild(&#x27;ArrowFunction&#x27;);
        const block &#x3D; arrowFunction ? arrowFunction.getChild(&#x27;Block&#x27;) : mainMethod.node.getChild(&#x27;Block&#x27;);
        const returnStatement &#x3D; block?.getChild(&#x27;ReturnStatement&#x27;) ?? undefined;
        if (returnStatement) {
            const result &#x3D; this.getEvaluationResult(state, returnStatement, block!, injector);
            if (result) {
                return result;
            }
        }

        return { status: MethodEvaluationStatus.NoReturnValue, valueIsDefinite: false };
    }

    static getEvaluationResult(state: EditorState, parent: SyntaxNode, block: SyntaxNode, injector: any): IMethodEvaluationResult {
        const memberExpression &#x3D; parent.getChild(&#x27;MemberExpression&#x27;);
        if (memberExpression) {
            const representation &#x3D; state.sliceDoc(memberExpression?.from, memberExpression?.to);
            const navigationPath &#x3D; representation.split(&#x27;.&#x27;);
            let dependsOnInjector &#x3D; navigationPath[0] &#x3D;&#x3D;&#x3D; &#x27;injector&#x27;;
            if (!dependsOnInjector) {
                const variableValue &#x3D; this.resolveVariableValue(state, block!, representation);
                if (variableValue) {
                    let result &#x3D; this.getEvaluationResult(state, variableValue, block, injector);
                    result.valueIsDefinite &#x3D; false;
                    return result;
                }
            }
            return { status: MethodEvaluationStatus.ReturnValueFound, injectorNavigationPath: representation, type: &#x27;member&#x27;, valueIsDefinite: false };
        }

        const variableExpression &#x3D; parent.getChild(&#x27;VariableName&#x27;);
        if (variableExpression) {
            const representation &#x3D; state.sliceDoc(variableExpression?.from, variableExpression?.to);
            if (representation &#x3D;&#x3D;&#x3D; &#x27;undefined&#x27;) {
                return { status: MethodEvaluationStatus.ReturnValueFound, detectedValue: undefined, type: &#x27;undefined&#x27;, valueIsDefinite: true };
            }

            let dependsOnInjector &#x3D; representation &#x3D;&#x3D;&#x3D; &#x27;injector&#x27;;
            if (!dependsOnInjector) {
                const variableValue &#x3D; this.resolveVariableValue(state, block!, representation);
                if (variableValue) {
                    let result &#x3D; this.getEvaluationResult(state, variableValue, block, injector);
                    result.valueIsDefinite &#x3D; false;
                    return result;
                }

                return { status: MethodEvaluationStatus.ReturnValueFound, valueIsDefinite: false };
            }
            return { status: MethodEvaluationStatus.ReturnValueFound, injectorNavigationPath: representation, type: &#x27;variable&#x27;, valueIsDefinite: true, detectedValue: injector };
        }

        const unaryExpression &#x3D; parent.getChild(&#x27;UnaryExpression&#x27;);
        if(unaryExpression){
            // method call
            const representation &#x3D; state.sliceDoc(unaryExpression?.from, unaryExpression?.to);
            return { status: MethodEvaluationStatus.ReturnValueFound, valueIsDefinite: false, unaryExpression: representation };
        }

        const stringExpression &#x3D; parent.getChild(&#x27;String&#x27;);
        if (stringExpression) {
            const representation &#x3D; state.sliceDoc(stringExpression?.from, stringExpression?.to);
            return { status: MethodEvaluationStatus.ReturnValueFound, detectedValue: representation, type: &#x27;string&#x27;, valueIsDefinite: true };
        }

        const numberExpression &#x3D; parent.getChild(&#x27;Number&#x27;);
        if (numberExpression) {
            const representation &#x3D; state.sliceDoc(numberExpression?.from, numberExpression?.to);
            return { status: MethodEvaluationStatus.ReturnValueFound, detectedValue: parseFloat(representation), type: &#x27;number&#x27;, valueIsDefinite: true };
        }

        const objectExpression &#x3D; parent.getChild(&#x27;ObjectExpression&#x27;);
        if (objectExpression) {
            const representation &#x3D; state.sliceDoc(objectExpression?.from, objectExpression?.to);
            try {
                const parsedValue &#x3D; JSON.parse(representation);
                return { status: MethodEvaluationStatus.ReturnValueFound, detectedValue: parsedValue, valueIsDefinite: true };
            } catch(e){
                return { status: MethodEvaluationStatus.ReturnValueFound, valueIsDefinite: false };
            }
        }

        const booleanLiteral &#x3D; parent.getChild(&#x27;BooleanLiteral&#x27;);
        if (booleanLiteral) {
            const representation &#x3D; state.sliceDoc(booleanLiteral?.from, booleanLiteral?.to);
            return { status: MethodEvaluationStatus.ReturnValueFound, detectedValue: representation &#x3D;&#x3D;&#x3D; &#x27;true&#x27;, type: &#x27;boolean&#x27;, valueIsDefinite: true };
        }

        const arrayExpression &#x3D; parent.getChild(&#x27;ArrayExpression&#x27;);
        if (arrayExpression) {
            const representation &#x3D; state.sliceDoc(arrayExpression?.from, arrayExpression?.to);
            return { status: MethodEvaluationStatus.ReturnValueFound, detectedValue: JSON.parse(representation), type: &#x27;array&#x27;, valueIsDefinite: false };
        }

        const nullExpression &#x3D; parent.getChild(&#x27;null&#x27;);
        if (nullExpression) {
            return { status: MethodEvaluationStatus.ReturnValueFound, detectedValue: null, type: &#x27;null&#x27;, valueIsDefinite: true };
        }

        return { status: MethodEvaluationStatus.NoReturnValue, valueIsDefinite: false };
    }

    static getMainMethod(tree?: Tree, state?: EditorState, text?: string[] | string): ISyntaxNodeResponse {

        let convertedText &#x3D; Array.isArray(text) ? text.join(&#x27;\n&#x27;) : text;

        if (!state) {
            if (!text) throw (&#x27;no state and no text passed&#x27;);

            state &#x3D; EditorState.create({
                doc: convertedText,
                extensions: [
                    javascript()
                ]
            });
        }

        if (!tree) tree &#x3D; syntaxTree(state);

        let node &#x3D; tree.resolveInner(0);
        let functions &#x3D; [...node.getChildren(&quot;ExpressionStatement&quot;)];

        return { &#x27;node&#x27;: functions.length &gt; 0 ? functions[functions.length - 1] : null, &#x27;tree&#x27;: tree };

    }

    static getUsedInputParams(state?: EditorState, text?: string[] | string): { varName: string, propertyName: string | null }[] {

        let output: { varName: string, propertyName: string | null }[] &#x3D; [];

        let convertedText &#x3D; text ? Array.isArray(text) ? text.join(&#x27;\n&#x27;) : text : (state?.doc as any).text.join(&#x27;\n&#x27;);

        if (!state) {
            if (!text) throw (&#x27;no state and no text passed&#x27;);

            state &#x3D; EditorState.create({
                doc: convertedText,
                extensions: [
                    javascript()
                ]
            });
        }

        let tree &#x3D; syntaxTree(state);
        let mainMethod &#x3D; this.getMainMethod(tree, state, text);
        if (!mainMethod.node) return [];

        let arrowFunction &#x3D; mainMethod.node.getChild(&#x27;ArrowFunction&#x27;);
        let block &#x3D; arrowFunction ? arrowFunction.getChild(&#x27;Block&#x27;) : mainMethod.node.getChild(&#x27;Block&#x27;);

        let candidates &#x3D; this.getMemberExpressionContainingCandidates(block);

        for (let candidate of candidates) {

            let statement: SyntaxNode | null &#x3D; candidate;
            while (statement &amp;&amp; statement.type.name !&#x3D;&#x3D; &#x27;MemberExpression&#x27;) {
                let result &#x3D; this.iterateToMemberStatementNode(statement);
                statement &#x3D; result[0] ?? null;
                candidates.push(...result.slice(1));
            }

            let variableNameNode &#x3D; this.extractMemberExpressionVariableNameNode(statement);
            if (variableNameNode &#x3D;&#x3D; null) continue;

            var varNodeName &#x3D; convertedText!.slice(variableNameNode.from, variableNameNode.to);

            if (varNodeName &#x3D;&#x3D;&#x3D; &#x27;console&#x27;) {
                if (statement.nextSibling) candidates.push(statement.nextSibling);
                continue;
            }

            let propertyNameNode &#x3D; variableNameNode.nextSibling?.nextSibling;

            output.push({
                &#x27;varName&#x27;: varNodeName,
                &#x27;propertyName&#x27;: convertedText?.slice(propertyNameNode?.from, propertyNameNode?.to) ?? null
            });
        }

        return output;
    }

    static getMemberExpressionContainingCandidates(blockNode: SyntaxNode | null): SyntaxNode[] {
        let candidates &#x3D; blockNode ? [
            ...blockNode.getChildren(&#x27;ExpressionStatement&#x27;),
            ...blockNode.getChildren(&#x27;VariableDeclaration&#x27;),
            ...blockNode.getChildren(&#x27;ObjectExpression&#x27;)
        ] : [];
        blockNode?.getChildren(&quot;ReturnStatement&quot;).forEach(statement &#x3D;&gt; {
            candidates.push(
                ...statement.getChildren(&#x27;MemberExpression&#x27;),
                ...statement.getChildren(&#x27;ObjectExpression&#x27;),
                ...statement.getChildren(&#x27;ArrayExpression&#x27;),
                ...statement.getChildren(&#x27;BinaryExpression&#x27;),
                ...statement.getChildren(&#x27;ParenthesizedExpression&#x27;),
                ...statement.getChildren(&#x27;TemplateString&#x27;)
            );
        });
        return candidates;
    }

    static extractMemberExpressionVariableNameNode(node: SyntaxNode | null): SyntaxNode | null {
        if (node?.type.name !&#x3D;&#x3D; &#x27;MemberExpression&#x27;) return null;
        let candidate: SyntaxNode | null &#x3D; node;
        while (candidate &amp;&amp; candidate.type.name &#x3D;&#x3D;&#x3D; &#x27;MemberExpression&#x27;) candidate &#x3D; candidate.firstChild;
        return candidate &amp;&amp; candidate.type.name &#x3D;&#x3D;&#x3D; &#x27;VariableName&#x27; ? candidate : null;
    }

    static iterateToMemberStatementNode(node: SyntaxNode | null): SyntaxNode[] {
        if (node &#x3D;&#x3D; null) return [];
        switch (node.type.name) {
            case &#x27;{&#x27;:
            case &#x27;[&#x27;:
            case &#x27;LineComment&#x27;:
            case &#x27;var&#x27;:
            case &#x27;VariableDefinition&#x27;:
            case &#x27;Equals&#x27;:
            case &#x27;return&#x27;:
            case &#x27;PropertyDefinition&#x27;:
            case &#x27;String&#x27;:
            case &#x27;:&#x27;:
                return node.nextSibling ? [node.nextSibling] : [];

            case &#x27;ExpressionStatement&#x27;:
            case &#x27;CallExpression&#x27;:
            case &#x27;VariableDeclaration&#x27;:
            case &#x27;ReturnStatement&#x27;:
            case &#x27;Property&#x27;:
                return node.firstChild ? [node.firstChild] : [];

            case &#x27;ObjectExpression&#x27;:
                return node.getChildren(&#x27;Property&#x27;);

            case &#x27;ArrayExpression&#x27;:
            case &#x27;ArgList&#x27;:
            case &#x27;BinaryExpression&#x27;:
            case &#x27;ParenthesizedExpression&#x27;:
            case &#x27;Interpolation&#x27;:
                return [...node.getChildren(&#x27;MemberExpression&#x27;), ...node.getChildren(&#x27;BinaryExpression&#x27;), ...node.getChildren(&#x27;ParenthesizedExpression&#x27;)];

            case &#x27;TemplateString&#x27;:
                return node.getChildren(&#x27;Interpolation&#x27;);
        }
        return [];
    }

    static resolveVariableValue(state: EditorState, blockNode: SyntaxNode, variableName: string) {
        const declarations &#x3D; blockNode.getChildren(&#x27;VariableDeclaration&#x27;);
        if (declarations.length &#x3D;&#x3D;&#x3D; 0) {
            return undefined;
        }

        const definition &#x3D; declarations.find(declaration &#x3D;&gt; {
            const child &#x3D; declaration.getChild(&#x27;VariableDefinition&#x27;);
            const representation &#x3D; state.sliceDoc(child?.from, child?.to);
            return representation &#x3D;&#x3D;&#x3D; variableName;
        });
        if (!definition) {
            return undefined;
        }

        return definition;
    }
}</code></pre>
    </div>
</div>









                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'class';
            var COMPODOC_CURRENT_PAGE_URL = 'CodemirrorRepository.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
